import{r as t,c as i,h as a,F as e,g as s}from"./p-c5b7f45e.js";import{h as n,g as r,C as o}from"./p-0567f9a9.js";import{g as l}from"./p-a4e6e35b.js";const c=class{constructor(a){t(this,a),this.calciteRatingChange=i(this,"calciteRatingChange",7),this.scale="m",this.value=0,this.readOnly=!1,this.disabled=!1,this.showChip=!1,this.intlRating="Rating",this.intlStars="stars: ${num}",this.guid=`calcite-ratings-${l()}`}handleLabelFocus(t){n(t.detail.labelEl,this.el)&&t.detail.interactedEl!==this.el&&!this.el.contains(t.detail.interactedEl)&&this.setFocus()}blurHandler(){this.hasFocus=!1}renderStars(){return[1,2,3,4,5].map((t=>{const i=this.value>=t,e=this.average&&!this.value&&t<=this.average,s=t<=this.hoverValue,n=this.average&&this.average+1-t,r=!this.value&&!s&&n>0&&n<1;return a("span",{class:{wrapper:!0}},a("label",{class:{star:!0,focused:this.hasFocus&&this.focusValue===t,selected:i,average:e,hovered:s,partial:r},htmlFor:`${this.guid}-${t}`,onMouseOver:()=>{this.hoverValue=t}},a("calcite-icon",{"aria-hidden":"true",class:"icon",icon:i||e||this.readOnly?"star-f":"star",scale:this.scale}),r&&a("div",{class:"fraction",style:{width:100*n+"%"}},a("calcite-icon",{icon:"star-f",scale:this.scale})),a("span",{class:"visually-hidden"},this.intlStars.replace("${num}",`${t}`))),a("input",{checked:t===this.value,class:"visually-hidden",disabled:this.disabled||this.readOnly,id:`${this.guid}-${t}`,name:this.guid,onChange:()=>this.updateValue(t),onFocus:()=>{this.hasFocus=!0,this.focusValue=t},ref:i=>(1===t||t===this.value)&&(this.inputFocusRef=i),type:"radio",value:t}))}))}render(){const{intlRating:t,showChip:i,scale:s,count:n,average:l}=this,c=r(this.el);return a(e,null,a("fieldset",{class:{fieldset:!0,[o.rtl]:"rtl"===c},onBlur:()=>this.hoverValue=null,onMouseLeave:()=>this.hoverValue=null,onTouchEnd:()=>this.hoverValue=null},a("legend",{class:"visually-hidden"},t),this.renderStars()),(n||l)&&i?a("calcite-chip",{class:{[o.rtl]:"rtl"===c},dir:c,scale:s,value:null==n?void 0:n.toString()},!!l&&a("span",{class:"number--average"},l.toString()),!!n&&a("span",{class:"number--count"},"(",null==n?void 0:n.toString(),")")):null)}updateValue(t){this.value=t,this.calciteRatingChange.emit({value:t})}async setFocus(){this.inputFocusRef.focus()}get el(){return s(this)}};c.style="@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;position:relative;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}:host([scale=s]){--calcite-rating-spacing-unit:0.25rem}:host([scale=m]){--calcite-rating-spacing-unit:0.5rem}:host([scale=l]){--calcite-rating-spacing-unit:0.75rem}:host([disabled]){pointer-events:none;opacity:0.5}:host([read-only]){pointer-events:none}.fieldset{padding:0;margin:0;border-width:0;display:inline-block}.wrapper{display:inline-block;margin-right:var(--calcite-rating-spacing-unit)}.calcite--rtl .wrapper{margin-right:0;margin-left:var(--calcite-rating-spacing-unit)}.star{position:relative;display:inline-block;cursor:pointer;outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;color:var(--calcite-ui-border-input);-webkit-transition:150ms ease-in-out;transition:150ms ease-in-out;-webkit-transform:scale(1);transform:scale(1)}.star:active{-webkit-transform:scale(1.1);transform:scale(1.1)}.focused{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.average,.fraction{color:var(--calcite-ui-warning)}.hovered,.selected,:host([read-only]) .average,:host([read-only]) .fraction{color:var(--calcite-ui-brand)}.hovered:not(.selected){-webkit-transform:scale(0.9);transform:scale(0.9)}:host .fraction{position:absolute;overflow:hidden;pointer-events:none;top:0;left:0;-webkit-transition:150ms ease-in-out;transition:150ms ease-in-out}.calcite--rtl .fraction{right:0;left:auto}calcite-chip{cursor:default;pointer-events:none}.number--average{font-weight:var(--calcite-font-weight-bold)}.number--count{color:var(--calcite-ui-text-2);font-style:italic}.number--count:not(:first-child){margin-left:var(--calcite-rating-spacing-unit)}.calcite--rtl .number--count:not(:first-child){margin-left:0;margin-right:var(--calcite-rating-spacing-unit)}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}";export{c as calcite_rating}