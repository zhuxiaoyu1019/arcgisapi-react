/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as r}from"../../chunks/tslib.es6.js";import{JSONSupport as t}from"../../core/JSONSupport.js";import{clone as o}from"../../core/lang.js";import e from"../../core/Logger.js";import{property as n}from"../../core/accessorSupport/decorators/property.js";import{cast as a}from"../../core/accessorSupport/decorators/cast.js";import"../../core/has.js";import{subclass as s}from"../../core/accessorSupport/decorators/subclass.js";var i;const l=e.getLogger("esri.geometry.support.MeshVertexAttributes");let p=i=class extends t{constructor(r){super(r),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(r){return u(r,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},l)}castPosition(r){r&&r instanceof Float32Array&&l.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return u(r,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},l)}castUv(r){return u(r,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},l)}castNormal(r){return u(r,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},l)}castTangent(r){return u(r,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},l)}clone(){const r={position:o(this.position),uv:o(this.uv),normal:o(this.normal),tangent:o(this.tangent),color:o(this.color)};return new i(r)}clonePositional(){const r={position:o(this.position),normal:o(this.normal),tangent:o(this.tangent),uv:this.uv,color:this.color};return new i(r)}};function c(r,t,o,e){const{loggerTag:n,stride:a}=t;return r.length%a!=0?(e.error(n,`Invalid array length, expected a multiple of ${a}`),new o([])):r}function u(r,t,o,e,n){if(!r)return r;if(r instanceof t)return c(r,e,t,n);for(const a of o)if(r instanceof a)return c(new t(r),e,t,n);if(Array.isArray(r))return c(new t(r),e,t,n);{const e=o.map((r=>`'${r.name}'`));return n.error(`Failed to set property, expected one of ${e}, but got ${r.constructor.name}`),new t([])}}function g(r,t,o){t[o]=m(r)}function m(r){const t=new Array(r.length);for(let o=0;o<r.length;o++)t[o]=r[o];return t}r([n({json:{write:g}})],p.prototype,"color",void 0),r([a("color")],p.prototype,"castColor",null),r([n({nonNullable:!0,json:{write:g}})],p.prototype,"position",void 0),r([a("position")],p.prototype,"castPosition",null),r([n({json:{write:g}})],p.prototype,"uv",void 0),r([a("uv")],p.prototype,"castUv",null),r([n({json:{write:g}})],p.prototype,"normal",void 0),r([a("normal")],p.prototype,"castNormal",null),r([n({json:{write:g}})],p.prototype,"tangent",void 0),r([a("tangent")],p.prototype,"castTangent",null),p=i=r([s("esri.geometry.support.MeshVertexAttributes")],p);var y=p;export default y;export{p as MeshVertexAttributes,u as castArray};
