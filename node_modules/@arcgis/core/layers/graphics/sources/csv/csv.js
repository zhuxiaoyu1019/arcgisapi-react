/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
const n=/^\s*"([\S\s]*)"\s*$/,t=/""/g,e="\n",o=[","," ",";","|","\t"];function r(n,t){const e={},o=n.length;for(let r=0;r<o;r++)e[n[r]]=t[r];return e}function*i(n,t,e){let o=0;for(;o<=n.length;){const r=n.indexOf(t,o),i=n.substring(o,r>-1?r:void 0);o+=i.length+t.length,e&&!i.trim()||(yield i)}}function c(n){const t=n.includes("\r\n")?"\r\n":e;return i(n,t,!0)}function f(n,t){return i(n,t,!1)}function s(n){const t=n.trim();let e=0,r="";for(const i of o){const n=t.split(i).length;n>e&&(e=n,r=i)}return""===r?null:r}function*l(o,i,c){let s="",l="",d=0,g=[];n:for(;;){const{value:h,done:x}=o.next();if(x)return;const p=f(h,c);t:for(;;){const{value:e,done:o}=p.next();if(o)break t;if(s+=l+e,l="",d+=u(e),d%2==0){if(d>0){const e=n.exec(s);if(!e){g=[],s="",d=0;continue n}g.push(e[1].replace(t,'"'))}else g.push(s);s="",d=0}else l=c}0===d?(yield r(i,g),g=[]):l=e}}function u(n){let t=0,e=0;for(e=n.indexOf('"',e);e>=0;)t++,e=n.indexOf('"',e+1);return t}export{s as inferDelimiter,l as parseRows,f as readRowParts,c as readRows};
