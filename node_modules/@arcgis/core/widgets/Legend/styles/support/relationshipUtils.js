/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{generateFillAttributes as e,generateStrokeAttributes as a,renderDef as r,renderShape as l,getBoundingBox as t,computeBBox as s,getTransformMatrix as i}from"../../../../symbols/support/svgUtils.js";import{classes as o}from"../../../support/widgetUtils.js";import"../../../../core/has.js";import"../../../../core/Logger.js";import{tsx as n}from"../../../support/jsxFactory.js";const d="http://www.w3.org/2000/svg",m={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function u(e,a,r){const{focus:l,labels:t}=e,s=!!l,i=p(e,a,r);return s?n("div",{class:m.diamondContainer},n("div",{class:m.diamondLeftCol},t.left),n("div",{class:m.diamondMidCol},n("div",{class:m.diamondMidColLabel},t.top),i,n("div",{class:m.diamondMidColLabel},t.bottom)),n("div",{class:m.diamondRightCol},t.right)):n("div",{class:m.squareTable},n("div",{class:m.squareTableRow},n("div",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelRightBottom)},t.left),n("div",{class:m.squareTableCell}),n("div",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelLeftBottom)},t.top)),n("div",{class:m.squareTableRow},n("div",{class:m.squareTableCell}),i,n("div",{class:m.squareTableCell})),n("div",{class:m.squareTableRow},n("div",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelRightTop)},t.bottom),n("div",{class:m.squareTableCell}),n("div",{class:o(m.squareTableCell,m.squareTableLabel,m.squareTableLabelLeftTop)},t.right)))}function b(e,a,r){const l=`${r}_arrowStart`,t=`${r}_arrowEnd`,s="left"===e,i={markerStart:null,markerEnd:null};switch(a){case"HL":s?i.markerStart=`url(#${t})`:i.markerEnd=`url(#${l})`;break;case"LL":i.markerStart=`url(#${t})`;break;case"LH":s?i.markerEnd=`url(#${l})`:i.markerStart=`url(#${t})`;break;default:i.markerEnd=`url(#${l})`}return i}function p(o,u,p,c=60){const{focus:h,numClasses:q,colors:k,rotation:f}=o,T=!!h,_=Math.sqrt(c**2+c**2)+(T?0:5);let L=null;null!=p&&(L=`opacity: ${p}`);const g=[],C=[],v=[],w=(c||75)/q;for(let s=0;s<q;s++){const i=s*w;for(let o=0;o<q;o++){const n=o*w,d=e(k[s][o]),m=a(null),u={type:"rect",x:n,y:i,width:w,height:w};g.push(r(d)),C.push(l(u,d.fill,m,null)),v.push(t(u))}}const y=10,x=15,R=15,$=10;let E=null;T||(E="margin: -15px -15px -18px -15px");const M=b("left",h,u),S=b("right",h,u),j=s(v),B=i(j,_,_,0,!1,f,!1),H=i(j,_,_,0,!1,T?-45:null,!1);return n("div",{style:L,class:T?m.diamondMidColRamp:m.squareTableCell},n("svg",{xmlns:d,width:_,height:_,style:E},n("defs",null,n("marker",{id:`${u}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),n("marker",{id:`${u}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},n("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),g),n("g",{transform:B},C),n("g",{transform:H},n("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":M.markerStart,"marker-end":M.markerEnd,x1:-y,y1:c-x,x2:-y,y2:x}),n("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":S.markerStart,"marker-end":S.markerEnd,x1:R,y1:c+$,x2:c-R,y2:c+$}))))}export{u as renderRelationshipRamp};
