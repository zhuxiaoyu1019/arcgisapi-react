/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import e from"../../Color.js";import{binaryFindClosest as o}from"../../core/arrayUtils.js";import r from"../../core/Evented.js";import{handlesGroup as i}from"../../core/handleUtils.js";import{isSome as s,applySome as l,isNone as n}from"../../core/maybe.js";import{memoize as p}from"../../core/memoize.js";import{generateUUID as a}from"../../core/uuid.js";import{property as u}from"../../core/accessorSupport/decorators/property.js";import"../../core/has.js";import"../../core/accessorSupport/ensureType.js";import"../../core/Logger.js";import{subclass as h}from"../../core/accessorSupport/decorators/subclass.js";import{reactionInit as c,reaction as m}from"../../core/accessorSupport/trackingUtils.js";import d from"../../geometry/Point.js";import{DEFAULT_DEM_RESOLUTION as v}from"./support/constants.js";import{convertSamples as f,convertStatistics as y}from"./support/unitUtils.js";let g=class extends r.EventedAccessor{constructor(t){super(t),this.type=null,this.id=a(),this.title=null,this.color=new e("#000000"),this.visible=!0,this._getSamplesMemoized=p(((t,e)=>f(t,e))),this._getStatisticsMemoized=p(((t,e)=>y(t,e))),this.viewVisualizationEnabled=!0,this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0}get progress(){return s(this.result)&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){return l(this._viewModel.hoveredChartPosition,(t=>this._getPoint(t)))}get available(){return!0}get hasZ(){const t=this.result;return s(t)&&t.hasZ}get minDemResolution(){return v}queryElevation(){throw new Error("not implemented")}attach(t){return this._viewModel=t,i([c((()=>t.effectiveUnits),(t=>{this.effectiveUnits=t})),m((()=>[t.input]),(()=>this._onChange()))])}toggleVisibility(t){this.visible=void 0===t?!this.visible:t}_onChange(){this.emit("change")}_getPoint(t){const{samples:e,result:r}=this;if(n(e)||n(r))return null;const i=e.length;if(0===i)return null;const s=t*e[i-1].distance,{x:l,y:p,z:a}=o(e,s,(t=>t.distance));return n(a)?null:new d({x:l,y:p,z:a,spatialReference:r.spatialReference})}};t([u({nonNullable:!0})],g.prototype,"id",void 0),t([u({nonNullable:!0})],g.prototype,"title",void 0),t([u({type:e,nonNullable:!0})],g.prototype,"color",void 0),t([u({nonNullable:!0})],g.prototype,"visible",void 0),t([u({readOnly:!0})],g.prototype,"progress",null),t([u({readOnly:!0})],g.prototype,"samples",null),t([u({readOnly:!0})],g.prototype,"statistics",null),t([u()],g.prototype,"hoveredPoint",null),t([u()],g.prototype,"viewVisualizationEnabled",void 0),t([u()],g.prototype,"available",null),t([u()],g.prototype,"result",void 0),t([u()],g.prototype,"effectiveUnits",void 0),t([u()],g.prototype,"numSamplesForPreview",void 0),t([u()],g.prototype,"numSamplesPerChunk",void 0),t([u()],g.prototype,"chartFillEnabled",void 0),t([u()],g.prototype,"chartStrokeWidth",void 0),t([u()],g.prototype,"chartStrokeOffsetY",void 0),t([u({readOnly:!0})],g.prototype,"hasZ",null),t([u({readOnly:!0})],g.prototype,"minDemResolution",null),t([u()],g.prototype,"_viewModel",void 0),g=t([h("esri.widgets.ElevationProfile.ElevationProfileLine")],g);var b=g;export default b;export{g as ElevationProfileLine};
