/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"@esri/calcite-components/dist/custom-elements/bundles/button.js";import"@esri/calcite-components/dist/custom-elements/bundles/icon.js";import{ignoreAbortErrors as t}from"../core/promiseUtils.js";import{aliasOf as i}from"../core/accessorSupport/decorators/aliasOf.js";import"../core/has.js";import"../core/accessorSupport/ensureType.js";import"../core/Logger.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{subclass as o}from"../core/accessorSupport/decorators/subclass.js";import"../views/3d/layers/SliceLayerView3D.js";import l from"./Widget.js";import r from"./Slice/SliceViewModel.js";import{Heading as c}from"./support/Heading.js";import"./support/widgetUtils.js";import{messageBundle as n}from"./support/decorators/messageBundle.js";import{tsx as a}from"./support/jsxFactory.js";const d="esri-slice",u={buttonDisabled:"esri-button--disabled",layerIncludeButton:"esri-slice__cross",widgetIcon:"esri-icon-slice",base:`${d} esri-widget esri-widget--panel`,layerList:`${d}__settings`,layerListHeading:"esri-slice__settings-title",layerItem:`${d}__layer-item`,layerItemTitle:`${d}__layer-item__title`,container:`${d}__container`,actionSection:"esri-slice__actions",hint:`${d}__hint`,hintText:`${d}__hint-text`,panelError:`${d}__panel--error`,newSliceButton:`${d}__clear-button esri-button esri-button--primary`,excludeButton:`${d}__exclude-button esri-button esri-button--secondary`,cancelButton:`${d}__cancel-button esri-button esri-button--secondary`};let p=class extends l{constructor(e,t){super(e,t),this.messages=null,this.headingLevel=3,this.iconClass=u.widgetIcon,this.label=void 0,this.view=null,this.viewModel=new r}render(){const e=this.viewModel.isSupported,t=this.viewModel.active,i="disabled"===this.viewModel.state,s="ready"===this.viewModel.state,o="slicing"===this.viewModel.state||"sliced"===this.viewModel.state,l="exclude"===this.viewModel.layersMode,{messages:r}=this,n=i&&u.buttonDisabled,d=t&&!o||l?null:a("button",{disabled:i,class:this.classes(u.newSliceButton,n),bind:this,onclick:this._onNewSliceClick,key:"esri-slice__clear",type:"button"},r.newSlice),p=o&&!l?a("button",{class:this.classes(u.excludeButton,n),bind:this,onclick:()=>{this.viewModel.enterExcludeLayerMode()},key:"esri-slice__exclude",type:"button"},r.excludeLayer):null,y=t&&l?a("button",{class:this.classes(u.cancelButton,n),bind:this,onclick:()=>{this.viewModel.exitExcludeLayerMode()},key:"esri-slice__cancel-exclude",type:"button"},r.cancel):null;let m=null;t&&(l?m=r.excludeHint:s&&(m=r.hint));const v=m?a("div",{class:u.hint,key:"esri-slice__hint"},a("p",{class:u.hintText},m)):null,h=this.excludedLayers?this.excludedLayers.toArray().map((e=>this._renderLayerItem({uid:e.uid,title:e.title,onClick:()=>(this.excludedLayers.remove(e),!1)}))):[];this.excludeGroundSurface&&h.push(this._renderLayerItem({uid:"ground",title:r.ground,onClick:()=>(this.excludeGroundSurface=!1,!1)}));const _=!l&&o&&h.length>0?a("div",{class:u.layerList,key:"esri-slice__settings"},a(c,{class:u.layerListHeading,level:this.headingLevel},r.excludedLayers),a("ul",null,h)):null,b=a("div",{class:u.panelError,key:"esri-slice__unsupported"},a("p",null,r.unsupported)),w=a("div",{class:u.actionSection},p,y,d),g=this.visible?a("div",{class:u.container},e?[v,_,w]:b):null;return a("div",{class:u.base,role:"presentation"},g)}_renderLayerItem(e){return a("li",{class:u.layerItem,key:e.uid},a("calcite-button",{appearance:"transparent",class:u.layerIncludeButton,"icon-start":"x",scale:"s",title:this.messages.includeLayer,bind:this,onclick:e.onClick}),a("div",{class:u.layerItemTitle},e.title))}_onNewSliceClick(){t(this.viewModel.removeSliceAndStart())}};e([s(),n("esri/widgets/Slice/t9n/Slice")],p.prototype,"messages",void 0),e([s()],p.prototype,"headingLevel",void 0),e([s()],p.prototype,"iconClass",void 0),e([s({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],p.prototype,"label",void 0),e([i("viewModel.view")],p.prototype,"view",void 0),e([i("viewModel.visible")],p.prototype,"visible",void 0),e([i("viewModel.active")],p.prototype,"active",void 0),e([s({type:r})],p.prototype,"viewModel",void 0),e([i("viewModel.excludedLayers")],p.prototype,"excludedLayers",void 0),e([i("viewModel.excludeGroundSurface")],p.prototype,"excludeGroundSurface",void 0),p=e([o("esri.widgets.Slice")],p);var y=p;export default y;
