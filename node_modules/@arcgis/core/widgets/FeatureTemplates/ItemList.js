/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{Heading as e}from"../support/Heading.js";import{tsx as t}from"../support/jsxFactory.js";import{classes as i,isActivationKey as s}from"../support/widgetUtils.js";const n={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group-header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};function l(e){const{id:s,identify:l,filterEnabled:r=!0,headingLevel:c=4,items:m,selectedItem:d,messages:u,filterText:f="",onFilterChange:g,renderIcon:I,onItemMouseLeave:p,onItemMouseEnter:h,onItemSelect:_}=e;return t("div",{class:i(n.base,n.widget),key:s},r?a({filterText:f,messages:u,onFilterChange:g,id:s}):null,o({identify:l,items:m,selectedItem:d,messages:u,filterText:f,headingLevel:c,renderIcon:I,onItemMouseLeave:p,onItemMouseEnter:h,onItemSelect:_}))}function r(e){return!!e.items}function o(e){const{headingLevel:s,identify:l,items:o,renderIcon:a,filterText:d,onItemMouseLeave:u,onItemMouseEnter:f,onItemSelect:g,selectedItem:I}=e;return 0===o.length?t("div",{class:n.noMatchesMessage,key:"no-matches"},e.messages.noMatches):r(o[0])?t("div",{class:n.scroller,key:"item-container"},o.map((e=>m({filterText:d,group:e,headingLevel:s,identify:l,onItemMouseLeave:u,onItemMouseEnter:f,onItemSelect:g,renderIcon:a,selectedItem:I})))):t("ul",{class:i(n.list,n.scroller),key:"item-container"},o.map((e=>c({item:e,identify:l,grouped:!0,onItemMouseLeave:u,onItemMouseEnter:f,onItemSelect:g,renderIcon:a,filterText:d,selectedItem:I}))))}function a(e){const s=`${e.id}-placeholder`;return t("div",{class:n.filterContainer,key:"filter"},t("input",{"aria-labelledby":s,class:i(n.input,n.filterInput),oninput:t=>{const i=t.currentTarget;e.onFilterChange&&e.onFilterChange(i.value)},value:e.filterText,type:"search"}),e.filterText?null:t("div",{class:n.filterPlaceholder,id:s,key:"placeholder"},t("span",{class:n.searchIcon,"aria-hidden":"true"}),t("div",{class:n.filterPlaceholderText},e.messages.filterPlaceholder)))}function c(e){const{identify:l,item:r,selectedItem:o,grouped:a,filterText:c,onItemSelect:m,onItemMouseEnter:u,onItemMouseLeave:f,renderIcon:g}=e,I=`${(null==l?void 0:l(r))||r.id}__${r.label}`,p=o?`${(null==l?void 0:l(o))||o.id}__${o.label}`:"";return t("li",{"aria-level":a?"2":"",class:i(n.item,I===p&&n.itemSelected),"data-item":r,key:I,onclick:e=>{const t=e.currentTarget["data-item"];m&&m(t)},onmouseenter:e=>{const t=e.currentTarget["data-item"];u&&u(t)},onkeydown:e=>{if(!s(e.key))return;const t=e.currentTarget["data-item"];m&&m(t)},onmouseleave:e=>{const t=e.currentTarget["data-item"];f&&f(t)},tabIndex:0},t("div",{class:n.itemContainer},g&&g({item:r}),d({text:r.label,match:c})))}function m(i){const{group:s,headingLevel:l,identify:r,onItemMouseLeave:o,onItemMouseEnter:a,onItemSelect:m,filterText:u,renderIcon:f,selectedItem:g}=i,I=`${r&&r(s)||s.id}-heading`;return t("section",{"aria-labelledby":I,class:n.group,key:s.label},t(e,{id:I,class:n.groupHeader,level:l},d({text:s.label,match:u})),t("ul",{class:n.list},s.items.map((e=>c({item:e,identify:r,grouped:!0,onItemMouseLeave:o,onItemMouseEnter:a,onItemSelect:m,renderIcon:f,filterText:u,selectedItem:g})))))}function d(e){const{match:i,text:s}=e;let l=null;if(i){const e=s.toLowerCase(),n=i.toLowerCase(),r=e.indexOf(n);if(-1===r)l=s;else{const e=s.substring(0,r),n=s.substr(r,i.length),o=s.substring(r+i.length);l=t("span",null,e,t("strong",null,n),o)}}else l=s;return t("span",{class:n.itemLabel},l)}export{l as ItemList,m as renderGroup,c as renderItem,d as renderLabel};
