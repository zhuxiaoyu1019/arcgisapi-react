/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as o}from"../../../chunks/tslib.es6.js";import"@esri/calcite-components/dist/custom-elements/bundles/label.js";import{destroyMaybe as e}from"../../../core/maybe.js";import{convertTime as s}from"../../../core/timeUtils.js";import{generateUUID as r}from"../../../core/uuid.js";import{property as i}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/Logger.js";import{subclass as t}from"../../../core/accessorSupport/decorators/subclass.js";import{reactionInit as l}from"../../../core/accessorSupport/trackingUtils.js";import{formatNumber as a}from"../../../intl/number.js";import c from"../../Slider.js";import m from"../../Widget.js";import{THRESHOLD_CONFIGURATOR_CSS as u}from"../css.js";import{Label as n}from"./Label.js";import{LabeledColorPicker as p}from"./LabeledColorPicker.js";import"../../support/widgetUtils.js";import{messageBundle as d}from"../../support/decorators/messageBundle.js";import{tsx as h}from"../../support/jsxFactory.js";let v=class extends m{constructor(o){super(o),this.colorPickerVisible=!0,this._valueSliderId=`value-slider-${r()}`,this._colorPickerId=`color-picker-${r()}`,this._valueSlider=new c({visibleElements:{labels:!1,rangeLabels:!1},steps:s(30,"minutes","milliseconds"),labelFormatFunction:(o,e)=>{const r=s(o,"milliseconds","hours");return"tick"===e?a(r,{maximumFractionDigits:0}):""}}),this._onColorChange=o=>{this.options.color=o}}initialize(){const o=({value:o})=>{this.options.value=o};this.own([l((()=>{const{value:o,minValue:e,maxValue:s}=this.options;return{value:o,minValue:e,maxValue:s}}),(({value:o,minValue:e,maxValue:r})=>{const i=this._valueSlider;i.min=e,i.max=r,i.values=[o];const t=r-e,l=Math.floor(s(t,"milliseconds","hours"));i.tickConfigs=[{mode:"count",values:2*l+1,labelsVisible:!1},{mode:"count",values:l+1,labelsVisible:!0}]})),this._valueSlider.on("thumb-change",o),this._valueSlider.on("thumb-drag",o)])}destroy(){this._valueSlider=e(this._valueSlider)}render(){const o=this._messages.threshold,{color:e}=this.options;return h("div",{class:u.base},h(n,{class:u.valueLabel,for:this._valueSliderId,label:o.valueLabel},this._valueSlider.render()),this.colorPickerVisible&&h(p,{id:this._colorPickerId,label:o.colorLabel,value:e,onChange:this._onColorChange}))}get testData(){return{valueSlider:this._valueSlider}}};o([i()],v.prototype,"options",void 0),o([i()],v.prototype,"colorPickerVisible",void 0),o([i()],v.prototype,"testData",null),o([i()],v.prototype,"_valueSlider",void 0),o([i(),d("esri/widgets/ShadowAccumulation/t9n/ShadowAccumulation")],v.prototype,"_messages",void 0),v=o([t("esri.widgets.ShadowAccumulation.components.ThresholdConfigurator")],v);export{v as ThresholdConfigurator};
