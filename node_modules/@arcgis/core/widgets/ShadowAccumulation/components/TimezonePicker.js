/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"../../../chunks/tslib.es6.js";import"@esri/calcite-components/dist/custom-elements/bundles/icon.js";import{isNone as t,applySome as s,isSome as o}from"../../../core/maybe.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/Logger.js";import{subclass as i}from"../../../core/accessorSupport/decorators/subclass.js";import c from"../../Widget.js";import{TIMEZONE_PICKER_CSS as n}from"../css.js";import{getTimezoneInfos as l}from"../../support/timeWidgetUtils.js";import"../../support/widgetUtils.js";import{messageBundle as p}from"../../support/decorators/messageBundle.js";import{tsx as m}from"../../support/jsxFactory.js";let a=class extends c{constructor(e,t){super(e,t),this._focused=!1}render(){const e=this._gmtOffsets,s=this._timezoneMessages;if(t(e)||t(s))return m("div",{class:n.base});const o=this.value,r=this._selectedItemText;return m("div",{class:n.base},m("select",{key:"hidden-select",class:n.hiddenSelect,"aria-label":s.chooseTimezone,title:s.chooseTimezone,value:String(o),bind:this,onfocus:this._onFocus,onblur:this._onBlur,onchange:this._onDropdownSelectChange},e.map((({utcOffset:e,shortWithUTC:t,long:s})=>m("option",{value:String(e)},t," - ",s)))),m("div",{key:"visible-select",class:this.classes({[n.select]:!0,[n.selectFocused]:this._focused})},r,m("calcite-icon",{icon:"chevron-down",scale:"s"})))}get _gmtOffsets(){return s(this._timezoneMessages,l)}get _selectedItem(){const e=this.value,s=this._gmtOffsets;return t(e)||t(s)?null:s.find((t=>t.utcOffset===e))}get _selectedItemText(){const e=this._selectedItem;return o(e)?e.short:""}_onDropdownSelectChange(e){const t=e.target,s=parseInt(null==t?void 0:t.value,10);Number.isFinite(s)&&o(this.onChange)&&this.onChange(s)}_onFocus(){this._focused=!0}_onBlur(){this._focused=!1}};e([r()],a.prototype,"value",void 0),e([r()],a.prototype,"onChange",void 0),e([r(),p("esri/widgets/support/t9n/timezone")],a.prototype,"_timezoneMessages",void 0),e([r()],a.prototype,"_focused",void 0),e([r({readOnly:!0})],a.prototype,"_gmtOffsets",null),e([r({readOnly:!0})],a.prototype,"_selectedItem",null),e([r({readOnly:!0})],a.prototype,"_selectedItemText",null),a=e([i("esri.widgets.ShadowAccumulation.components.TimezonePicker")],a);export{a as TimezonePicker};
