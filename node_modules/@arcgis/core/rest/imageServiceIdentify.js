/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import t from"../request.js";import{isSome as r}from"../core/maybe.js";import{normalizeCentralMeridian as o}from"../geometry/support/normalizeUtils.js";import{parseUrl as e,encode as m,asValidOptions as s}from"./utils.js";import i from"./support/ImageServiceIdentifyResult.js";async function n(n,f,p){const y=e(n),u=f.geometry?[f.geometry]:[];return o(u).then((o=>{const e=f.toJSON(),i=o&&o[0];r(i)&&(e.geometry=JSON.stringify(i.toJSON()));const n=m({...y.query,f:"json",...e}),u=s(n,p);return t(y.path+"/identify",u)})).then((t=>i.fromJSON(t.data)))}export{n as imageServiceIdentify};
