/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import t from"../request.js";import{normalizeCentralMeridian as r}from"../geometry/support/normalizeUtils.js";import{parseUrl as o,encode as s,asValidOptions as e}from"./utils.js";import n from"./support/IdentifyParameters.js";import m from"./support/IdentifyResult.js";import{identifyToIdentifyRESTParameters as i}from"../tasks/operations/identify.js";async function u(n,m,u){const a=(m=f(m)).geometry?[m.geometry]:[],y=o(n);return y.path+="/identify",r(a).then((r=>{const o=i(m,{geometry:r&&r[0]}),n=s({...y.query,f:"json",...o}),f=e(n,u);return t(y.path,f).then(p)}))}function p(t){const r=t.data;r.results=r.results||[];const o={results:[]};return o.results=r.results.map((t=>m.fromJSON(t))),o}function f(t){return t=n.from(t)}export{u as identify};
