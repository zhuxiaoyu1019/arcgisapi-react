/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import o from"../Graphic.js";import r from"../core/Collection.js";import{castForReferenceSetter as t,referenceSetter as s}from"../core/collectionUtils.js";import"../core/has.js";import n from"../core/Logger.js";import{property as i}from"../core/accessorSupport/decorators/property.js";import{ensureType as c}from"../core/accessorSupport/ensureType.js";import{subclass as l}from"../core/accessorSupport/decorators/subclass.js";const p=r.ofType(o);n.getLogger("esri.support.GraphicsCollection");let a=class extends p{constructor(e){super(e),this.on("before-add",(e=>{e.item||e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(({item:e})=>{e.layer=null}))}destroy(){this._unownAll()}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())}_createNewInstance(e){return new p(e)}_ownAll(){this.items.forEach((e=>this._own(e)))}_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_unownAll(){this.items.forEach((e=>this._unown(e)))}_unown(e){e.layer===this.owner&&(e.layer=null)}};function h(e){const o=c(a,e);return o&&(o.owner=this),o}e([i()],a.prototype,"owner",null),a=e([l("esri.support.GraphicsCollection")],a);const m=(e="graphics")=>({type:a,cast:t,set(o){const r=s(o,this._get(e),a);r.owner=this,this._set(e,r)}});var u=a;export default u;export{a as GraphicsCollection,h as castGraphicsCollection,m as graphicsCollectionProperty};
