/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{CommentHandler as t}from"./comment-handler.js";import{Parser as e}from"./parser.js";import{Tokenizer as o}from"./tokenizer.js";export{Syntax}from"./syntax.js";function r(o,r,n){let c=null;const s=(t,e)=>{n&&n(t,e),c&&c.visit(t,e)};let m="function"==typeof n?s:null,a=!1;if(r){a="boolean"==typeof r.comment&&r.comment;const e="boolean"==typeof r.attachComment&&r.attachComment;(a||e)&&(c=new t,c.attach=e,r.comment=!0,m=s)}const f=new e(o,r,m),i=f.parseScript();return a&&c&&(i.comments=c.comments),f.config.tokens&&(i.tokens=f.tokens),f.config.tolerant&&(i.errors=f.errorHandler.errors),i}function n(t,e,o){const n=e||{};return n.sourceType="script",r(t,n,o)}function c(t,e,r){const n=new o(t,e),c=[];try{for(;;){let t=n.getNextToken();if(!t)break;r&&(t=r(t)),c.push(t)}}catch(s){n.errorHandler.tolerate(s)}return n.errorHandler.tolerant&&(c.errors=n.errors()),c}const s="4.0.0-dev";export{r as parse,n as parseScript,c as tokenize,s as version};
