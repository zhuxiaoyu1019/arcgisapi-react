/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import e from"../core/Collection.js";import o from"../core/Error.js";import{clone as r}from"../core/lang.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import"../core/accessorSupport/ensureType.js";import"../core/has.js";import"../core/Logger.js";import{enumeration as l}from"../core/accessorSupport/decorators/enumeration.js";import{subclass as i}from"../core/accessorSupport/decorators/subclass.js";import{writer as y}from"../core/accessorSupport/decorators/writer.js";import a from"./IconSymbol3DLayer.js";import m from"./ObjectSymbol3DLayer.js";import c from"./Symbol3D.js";import p from"./TextSymbol3DLayer.js";import{hasVisibleCallout as n,hasVisibleVerticalOffset as b,calloutProperty as f}from"./callouts/calloutUtils.js";import u from"./support/Symbol3DVerticalOffset.js";var S;const h=e.ofType({base:null,key:"type",typeMap:{icon:a,object:m,text:p}}),j=e.ofType({base:null,key:"type",typeMap:{icon:a,object:m}});let L=S=class extends c{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new h,this.type="point-3d"}writeSymbolLayers(t,e,r,s){const l=t.filter((t=>"text"!==t.type));if(s&&s.messages&&l.length<t.length){const e=t.find((t=>"text"===t.type));s.messages.push(new o("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:e}))}e[r]=l.map((t=>t.write({},s))).toArray()}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return n(this)}hasVisibleVerticalOffset(){return b(this)}clone(){return new S({verticalOffset:r(this.verticalOffset),callout:r(this.callout),styleOrigin:r(this.styleOrigin),symbolLayers:r(this.symbolLayers),thumbnail:r(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new S({symbolLayers:[a.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new S({symbolLayers:[a.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){if(t.data&&t.data.symbol){const e=t.data.symbol;if("CIMPointSymbol"===e.type&&e.callout)return new S({symbolLayers:[a.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new S({symbolLayers:[a.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new S({symbolLayers:[p.fromTextSymbol(t)]})}};t([s({type:u,json:{write:!0}})],L.prototype,"verticalOffset",void 0),t([s(f)],L.prototype,"callout",void 0),t([s({type:h,json:{type:j,origins:{"web-scene":{type:j}}}})],L.prototype,"symbolLayers",void 0),t([y("web-scene","symbolLayers")],L.prototype,"writeSymbolLayers",null),t([l({PointSymbol3D:"point-3d"},{readOnly:!0})],L.prototype,"type",void 0),L=S=t([i("esri.symbols.PointSymbol3D")],L);var d=L;export default d;
