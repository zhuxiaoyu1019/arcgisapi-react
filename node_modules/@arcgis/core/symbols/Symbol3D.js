/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import r from"../core/Collection.js";import{referenceSetter as o,castForReferenceSetter as t}from"../core/collectionUtils.js";import s from"../core/Logger.js";import{isAbsolute as l,normalize as i,hasSamePortal as a}from"../core/urlUtils.js";import m from"../core/Warning.js";import{property as y}from"../core/accessorSupport/decorators/property.js";import"../core/has.js";import{cast as n}from"../core/accessorSupport/decorators/cast.js";import{reader as p}from"../core/accessorSupport/decorators/reader.js";import{subclass as c}from"../core/accessorSupport/decorators/subclass.js";import{writer as b}from"../core/accessorSupport/decorators/writer.js";import u from"../portal/Portal.js";import{f,t as g}from"../chunks/persistableUrlUtils.js";import d from"./ExtrudeSymbol3DLayer.js";import j from"./FillSymbol3DLayer.js";import S from"./IconSymbol3DLayer.js";import h from"./LineSymbol3DLayer.js";import L from"./ObjectSymbol3DLayer.js";import O from"./PathSymbol3DLayer.js";import _ from"./Symbol.js";import U from"./Symbol3DLayer.js";import D from"./TextSymbol3DLayer.js";import w from"./WaterSymbol3DLayer.js";import N from"./support/StyleOrigin.js";import x from"./support/Thumbnail.js";const v={icon:S,object:L,line:h,path:O,fill:j,extrude:d,text:D,water:w},C=r.ofType({base:U,key:"type",typeMap:v,errorContext:"symbol-layer"}),T=s.getLogger("esri.symbols.Symbol3D");let k=class extends _{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const o=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,t=o&&o.type||r;this._set("symbolLayers",new t)}get color(){return null}set color(e){T.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){o(e,this._get("symbolLayers"))}readStyleOrigin(e,r,o){if(e.styleUrl&&e.name){const r=f(e.styleUrl,o);return new N({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new N({portal:o&&o.portal||u.getDefault(),styleName:e.styleName,name:e.name});o&&o.messages&&o.messages.push(new m("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:o,definition:e}))}writeStyleOrigin(e,r,o,t){if(e.styleUrl&&e.name){let o=g(e.styleUrl,t);l(o)&&(o=i(o)),r.styleOrigin={styleUrl:o,name:e.name}}else e.styleName&&e.name&&(e.portal&&t&&t.portal&&!a(e.portal.restUrl,t.portal.restUrl)?t&&t.messages&&t.messages.push(new m("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof U||e&&v[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e([y({json:{read:!1,write:!1}})],k.prototype,"color",null),e([y({type:C,nonNullable:!0,json:{write:!0}}),n(t)],k.prototype,"symbolLayers",null),e([y({type:N})],k.prototype,"styleOrigin",void 0),e([p("styleOrigin")],k.prototype,"readStyleOrigin",null),e([b("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k.prototype,"writeStyleOrigin",null),e([y({type:x,json:{read:!1}})],k.prototype,"thumbnail",void 0),e([y({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k.prototype,"type",void 0),k=e([c("esri.symbols.Symbol3D")],k);var A=k;export default A;
