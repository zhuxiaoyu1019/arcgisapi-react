/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{l as e,f as t,b as r,a as n}from"../../../../chunks/vec3.js";import{c as s}from"../../../../chunks/vec3f64.js";import{surfaceElevationBelowRenderLocation as o}from"../intersectionUtils.js";function i(s,i,a=0){const f=s.state.constraints;if(!f.collision.enabled)return!1;const u=o(s,i.eye),d=s.renderCoordsHelper.getAltitude(i.eye),y=u+f.collision.elevationMargin;if(d>=y)return!1;const m=e(i.eye);if(t(c,i.center,i.eye),i.eye=s.renderCoordsHelper.setAltitude(l,y,i.eye),1===a)i.center=r(c,i.eye,c);else if(2===a){const e=(m-d+y)/m;i.center=n(c,i.center,e)}return!0}const c=s(),l=s();export{i as applySurfaceCollisionConstraint};
