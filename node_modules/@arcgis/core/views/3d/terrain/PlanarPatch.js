/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{lerp as t}from"../../../core/mathUtils.js";import{wrap as e}from"../../../geometry/support/aaBoundingBox.js";import{intersectsAABB as i}from"../../../geometry/support/frustum.js";import{createPlanarGlobePatch as s}from"./PatchGeometryFactory.js";import n from"./Tile.js";class r extends n{constructor(t,e,i){super(r.NumSubdivisionsAtLevel),void 0!==t&&this.init(t,e,i)}init(e,i,s){super.init(e,i,s),this._edgeLen=this.extent[2]-this.extent[0],this._edgeLen2=this._edgeLen*this._edgeLen,this.centerAtSeaLevel[0]=t(this.extent[0],this.extent[2],.5),this.centerAtSeaLevel[1]=t(this.extent[1],this.extent[3],.5),this.centerAtSeaLevel[2]=0,this.updateRadiusAndCenter()}updateRadiusAndCenter(){this._updateCenter();const t=(this.extent[2]-this.extent[0])*Math.SQRT1_2,e=.5*(this.elevationBounds[0]-this.elevationBounds[1]);this._center[1][3]=Math.sqrt(t*t+e*e)}_isVisible(t){return this.intersectsClippingArea&&i(t,e(this.extent[0],this.extent[1],this.elevationBounds[0],this.extent[2],this.extent[3],this.elevationBounds[1]))}createGeometry(t,e){s(t,this.extent,e,this.renderData),this.setMemoryDirty()}}r.NumSubdivisionsAtLevel=[2,2,2,2,2,2,2,2];export{r as PlanarPatch};
