/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"../../../chunks/tslib.es6.js";import{unwrapOr as t,isSome as r,destroyMaybe as a}from"../../../core/maybe.js";import{property as s}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/Logger.js";import{subclass as i}from"../../../core/accessorSupport/decorators/subclass.js";import{defaultUnitPropertyMetadata as o}from"../../../properties/defaultUnit.js";import{LayerView3D as n}from"./LayerView3D.js";import{AreaMeasurementController as l}from"./analysis/AreaMeasurement/AreaMeasurementController.js";import{AreaMeasurementLayerViewData as p}from"./analysis/AreaMeasurement/AreaMeasurementLayerViewData.js";import{AreaMeasurementView as y}from"./analysis/AreaMeasurement/AreaMeasurementView.js";import h from"../../layers/LayerView.js";let u=class extends(n(h)){constructor(e){super(e),this.type="area-measurement-3d",this.layerViewData=new p,this._userUnit=null}set unit(e){this._userUnit=e}get unit(){return t(this._userUnit,this._defaultUnit)}get result(){if(r(this.layerViewData.measurementData)){const e=this.layerViewData.measurementData;return{area:e.area,geodesicArea:e.geodesicArea,pathLength:e.pathLength,geodesicPathLength:e.geodesicPathLength,perimeterLength:e.perimeterLength}}return{area:null,geodesicArea:null,pathLength:null,geodesicPathLength:null,perimeterLength:null}}initialize(){this.layerViewData.path.view=this.view,this.layerViewData.path.areaMeasurement=this.layer,this.analysisView=new y({view:this.view,analysis:this.layer,layerView:this}),this.analysisController=new l({view:this.view,analysis:this.layer,layerViewData:this.layerViewData})}destroy(){this.analysisController=a(this.analysisController),this.analysisView=a(this.analysisView)}get testData(){return{view:this.analysisView,controller:this.analysisController}}};e([s()],u.prototype,"type",void 0),e([s()],u.prototype,"analysisView",void 0),e([s()],u.prototype,"analysisController",void 0),e([s()],u.prototype,"unit",null),e([s()],u.prototype,"layer",void 0),e([s()],u.prototype,"result",null),e([s()],u.prototype,"layerViewData",void 0),e([s(o)],u.prototype,"_defaultUnit",void 0),e([s()],u.prototype,"_userUnit",void 0),u=e([i("esri.views.3d.layers.AreaMeasurementLayerView3D")],u);var m=u;export default m;
