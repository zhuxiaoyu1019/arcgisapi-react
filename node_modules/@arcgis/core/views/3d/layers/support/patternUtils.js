/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import"../../../../core/has.js";import{isSome as r}from"../../../../core/maybe.js";import{f as e}from"../../../../chunks/vec4f64.js";import{BufferViewMat3f64 as t,BufferViewVec3f64 as a,BufferViewVec4f as n}from"../../../../geometry/support/buffer/BufferView.js";import{perVertexElevationAligner as o}from"../graphics/ElevationAligners.js";import{createMapSpaceUVCoords as s}from"./uvUtils.js";import{ColorMaterial as i}from"../../webgl-engine/materials/ColorMaterial.js";import{PatternMaterial as c}from"../../webgl-engine/materials/PatternMaterial.js";function l(r,e,t){return f(u(r),e,t)}function u(r){return r&&r.pattern||null}function f(t,a,n){return r(t)?"none"===t.style||"solid"===t.style?("none"===t.style&&(a.color=e(0,0,0,0),a.transparent=!0),new i(a)):(a.style=m(t.style),a.draped=n.isDraped,new c(a)):new i(a)}function m(r){switch(r){case"horizontal":return 0;case"vertical":return 1;case"cross":return 2;case"forward-diagonal":return 3;case"backward-diagonal":return 4;case"diagonal-cross":return 5;default:return}}function p(r){return r.material instanceof c&&!r.material.params.draped}function d(r,e){if(p(r)){const o=r.geometry.vertexAttributes,i=o.get("position").data,c=o.get("uvMapSpace").data,l=o.get("boundingRect").data;s(n.fromTypedArray(c),a.fromTypedArray(i),e,t.fromTypedArray(l))}}function g(r,e,t,a){const n=o(r,e,t,a),s=r.stageObject.geometryRecords;for(let o=0;o<s.length;o++)d(s[o],a);return n}export{l as createMaterial,f as createMaterialFromPattern,m as parsePatternStyle,p as requiresUVUpdates,d as updateMapSpaceUVCoords,g as uvElevationAligner};
