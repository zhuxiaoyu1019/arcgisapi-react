/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as r}from"../../../../chunks/tslib.es6.js";import{t as o}from"../../../../chunks/mat4.js";import{c as t}from"../../../../chunks/mat4f64.js";import{ReloadableShaderModule as i}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as e}from"../core/shaderTechnique/ShaderTechnique.js";import{ShaderTechniqueConfiguration as a,parameter as s}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{Program as n}from"../lib/Program.js";import{L as l}from"../../../../chunks/LaserlinePath.glsl.js";import{makePipelineState as h,simpleBlendingParams as m,defaultColorWriteParams as p}from"../../../webgl/renderState.js";class f extends e{initializeProgram(r){const o=f.shader.get(),t=this.configuration,i=o.build(t);return new n(r.rctx,i,f.attributeLocations)}bind(r,t,i){this.program.setUniform3fv("innerColor",r.innerColor),this.program.setUniform1f("innerWidth",r.innerWidth*i.pixelRatio),this.program.setUniform3fv("glowColor",r.glowColor),this.program.setUniform1f("glowWidth",r.glowWidth*i.pixelRatio),this.program.setUniform1f("glowFalloff",r.glowFalloff),this.program.setUniform1f("globalAlpha",r.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",i.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/i.fullWidth,2/i.fullHeight),this.program.setUniformMatrix4fv("uProjectionMatrix",i.projectionMatrix),o(c,i.viewMatrix,t),this.program.setUniformMatrix4fv("uModelViewMatrix",c),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=r.globalAlphaContrastBoost?r.globalAlphaContrastBoost:1)}initializePipeline(){return h({blending:m(1,771),colorWrite:p})}bindPipelineState(r){r.setPipelineState(this.pipeline)}}f.shader=new i(l,(()=>import("./LaserlinePath.glsl.js"))),f.attributeLocations=new Map([["start",0],["end",1],["up",2],["extrude",3]]);class g extends a{constructor(){super(...arguments),this.contrastControlEnabled=!1}}r([s()],g.prototype,"contrastControlEnabled",void 0);const c=t();export{f as LaserlinePathTechnique,g as LaserlinePathTechniqueConfiguration};
