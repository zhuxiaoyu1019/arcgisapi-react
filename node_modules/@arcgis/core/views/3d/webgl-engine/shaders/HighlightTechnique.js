/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as i}from"../../../../chunks/tslib.es6.js";import{ReloadableShaderModule as o}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as t}from"../core/shaderTechnique/ShaderTechnique.js";import{ShaderTechniqueConfiguration as r,parameter as e}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{Default3D as s}from"../lib/DefaultVertexAttributeLocations.js";import{Program as a}from"../lib/Program.js";import{H as n}from"../../../../chunks/HighlightComposition.glsl.js";import{makePipelineState as l,separateBlendingParams as h,defaultColorWriteParams as c}from"../../../webgl/renderState.js";const m=8.6,p=.4;class g extends t{initializeProgram(i){const o=g.shader.get().build(this.configuration);return new a(i.rctx,o,s)}bindApplyPass(i){this.program.setUniform4fv("color",i.color),this.program.setUniform4fv("haloColor",i.haloColor),this.program.setUniform1f("outlineSize",m),this.program.setUniform1f("blurSize",p),this.program.setUniform4f("opacities",i.haloOpacity,i.haloOpacityOccluded,i.fillOpacity,i.fillOpacityOccluded)}initializePipeline(){return 1===this.configuration.highlightStage?l({blending:h(770,1,771,771),colorWrite:c}):l({colorWrite:c})}get primitiveType(){return this.configuration.gridOptimization?4:5}}g.shader=new o(n,(()=>import("./HighlightComposition.glsl.js")));class d extends r{constructor(){super(...arguments),this.highlightStage=0,this.gridOptimization=!1}}i([e({count:3})],d.prototype,"highlightStage",void 0),i([e()],d.prototype,"gridOptimization",void 0);export{g as HighlightCompositionTechnique,d as HighlightCompositionTechniqueConfiguration};
