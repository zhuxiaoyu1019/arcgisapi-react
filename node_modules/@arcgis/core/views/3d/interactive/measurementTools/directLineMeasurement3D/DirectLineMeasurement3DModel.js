/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../../chunks/tslib.es6.js";import t from"../../../../../core/Accessor.js";import r from"../../../../../core/Handles.js";import{destroyMaybe as o,isSome as s}from"../../../../../core/maybe.js";import{property as i}from"../../../../../core/accessorSupport/decorators/property.js";import"../../../../../core/has.js";import"../../../../../core/accessorSupport/ensureType.js";import"../../../../../core/Logger.js";import{subclass as a}from"../../../../../core/accessorSupport/decorators/subclass.js";import n from"../../../../../layers/DirectLineMeasurementLayer.js";let c=class extends t{constructor(){super(...arguments),this._handles=new r,this.layer=new n({visible:!1,listMode:"hide"}),this.cursorPoint=null,this.state="initial",this.active=!1}initialize(){this.sceneView.map.add(this.layer),this.reset()}destroy(){this._handles=o(this._handles),this.sceneView.map.remove(this.layer),this.layer.destroy()}get startPoint(){return this.layer.startPoint}set startPoint(e){this.layer.startPoint=e}set startPointSurfaceLocation(e){this._set("startPointSurfaceLocation",e)}get endPoint(){return this.layer.endPoint}set endPoint(e){this.layer.endPoint=e}set endPointSurfaceLocation(e){this._set("endPointSurfaceLocation",e)}get measurementSurfaceLocation(){const e=this.startPointSurfaceLocation,t=this.endPointSurfaceLocation;return null==e||null==t||"above-the-surface"===e&&"below-the-surface"===t||"below-the-surface"===e&&"above-the-surface"===t||"on-the-surface"===e&&"on-the-surface"===t?"camera-dependent":"above-the-surface"===e||"above-the-surface"===t?"above-the-surface":"below-the-surface"}get validMeasurement(){return s(this.layer.startPoint)&&s(this.layer.endPoint)}get isMeasuring(){return!!this.startPoint}reset(){this.clearMeasurement()}clearMeasurement(){this.state="initial",this.startPoint=null,this.endPoint=null,this.cursorPoint=null,this._clearOverride("measurementSurfaceLocation")}finishMeasurement(){if(!this._isOverridden("measurementSurfaceLocation")){const e=this.measurementSurfaceLocation,t="camera-dependent"===e?this.sceneView.state.camera.aboveGround?"above-the-surface":"below-the-surface":e;this._override("measurementSurfaceLocation",t)}this.state="measured"}};e([i()],c.prototype,"messages",void 0),e([i({constructOnly:!0})],c.prototype,"sceneView",void 0),e([i()],c.prototype,"layer",void 0),e([i()],c.prototype,"startPoint",null),e([i({value:null})],c.prototype,"startPointSurfaceLocation",null),e([i()],c.prototype,"endPoint",null),e([i({value:null})],c.prototype,"endPointSurfaceLocation",null),e([i()],c.prototype,"measurementSurfaceLocation",null),e([i()],c.prototype,"cursorPoint",void 0),e([i()],c.prototype,"state",void 0),e([i()],c.prototype,"active",void 0),e([i({readOnly:!0})],c.prototype,"validMeasurement",null),e([i({readOnly:!0})],c.prototype,"isMeasuring",null),c=e([a("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DModel")],c);export{c as DirectLineMeasurement3DModel};
