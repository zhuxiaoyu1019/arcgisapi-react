/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import"../../../../../core/has.js";class e{constructor(e,s){this._buffers=[],this.geometryType=e,this._stage=s}destroy(){this._buffers.forEach((e=>e.release()))}insert(e,s){if(!s.records.byteLength)return;"update"===e&&this._buffers.forEach((e=>e.free(s)));const r={done:!1,offset:0,vertexData:s};this._buffers.forEach((e=>e.insert(r)));let t=1e3;for(;!r.done&&--t;){const e=this._stage.pools.bufferData.acquire(s,this.geometryType,r.offset);e.insert(r),this._buffers.push(e)}}remove(e){this._buffers.forEach((s=>s.freeIds(e)))}upload(e){this._buffers.forEach((s=>s.upload(e)))}forEachCommand(e){this._buffers.forEach((s=>s.displayList.forEach(e)))}}export{e as Geometry};
