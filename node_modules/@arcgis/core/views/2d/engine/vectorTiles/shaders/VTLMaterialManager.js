/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.20/esri/copyright.txt for details.
*/
import"../../../../webgl/BufferObject.js";import"../../../../webgl/FramebufferObject.js";import{Program as e}from"../../../../webgl/Program.js";import"../../../../webgl/enums.js";import"../../../../webgl/RenderingContext.js";import"../../../../webgl/Texture.js";import"../../../../webgl/VertexArrayObject.js";import{text as r,outline as t,line as a,icon as s,fill as n,circle as i,background as o}from"./Programs.js";class c{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(r,t,a){const s=t.key<<3|this._getMaterialOptionsValue(t.type,a);if(this._programByKey.has(s))return this._programByKey.get(s);const n=this._getProgramTemplate(t.type),{shaders:i}=n,{vertexShader:o,fragmentShader:c}=i(a),g=t.getShaderHeader(),p=t.getShaderMain(),u=o.replace("#pragma header",g).replace("#pragma main",p),m=new e(r,u,c,t.getAttributeLocations());return this._programByKey.set(s,m),m}_getMaterialOptionsValue(e,r){switch(e){case 0:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 1:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 2:return r.id?1:0;case 3:{const e=r;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1|(e.id?1:0)}case 4:{const e=r;return(e.sdf?1:0)<<1|(e.id?1:0)}case 5:return r.id?1:0;case 6:return r.id?1:0;default:return 0}}_getProgramTemplate(e){switch(e){case 0:return o;case 5:return i;case 1:return n;case 4:return s;case 3:return a;case 2:return t;case 6:return r;default:return null}}}export default c;
