{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as e } from \"../../../../../../core/maybe.js\";\nimport { deltaDecodeGeometry as t, convertFromGeometry as r } from \"../../../../../../layers/graphics/featureConversionUtils.js\";\nimport { WGLGeometryType as i } from \"../../enums.js\";\nimport { i1616to32 as s } from \"../../number.js\";\nimport { FillMaterialKey as o } from \"../../materialKey/MaterialKey.js\";\nimport { triangulate as n, triangulateLibtess as m, clipMarshall as a } from \"./templateUtils.js\";\n\nconst l = 1e3,\n      c = 1,\n      y = y => class extends y {\n  constructor(...e) {\n    super(...e), this.forceLibtess = !1, this.geometryType = i.FILL;\n  }\n\n  _write(e, t, r) {\n    const i = \"esriGeometryPoint\" === t.geometryType,\n          s = o.load(this._materialKey);\n    e.recordStart(t.getDisplayId(), this._materialKey, this.geometryType, s.dotDensity, i), this._writeGeometry(e, t, s, r, i), e.recordEnd();\n  }\n\n  _writeGeometry(t, r, i, s, o) {\n    const a = this._getGeometry(r, s, o);\n\n    if (e(a)) return;\n    const c = t.indexCount();\n\n    if (!(a.lengths[0] > l) && !this.forceLibtess && n(t, a)) {\n      return void (!(c === t.indexCount()) && this._writeVertices(t, r, a.coords, a.lengths, i));\n    }\n\n    const y = m(t, a);\n    !(c === t.indexCount()) && this._writeVertices(t, r, y, [y.length / 2], i);\n  }\n\n  _writeVertices(e, t, r, i, o) {\n    const n = t.getDisplayId();\n    let m = 0;\n\n    for (const a of i) {\n      const i = a + m;\n\n      for (let a = m; a < i; a++) {\n        const i = r[2 * a],\n              m = r[2 * a + 1],\n              l = s(c * i, c * m);\n        e.vertexBounds(i, m, 0, 0), e.vertexWrite(l), e.vertexWrite(n), o.dotDensity ? e.vertexWriteF32(1 / Math.abs(t.readGeometryArea())) : (e.vertexWrite(this.fillColor), e.vertexWrite(this.tl), e.vertexWrite(this.br), e.vertexWrite(this.aux1), e.vertexWrite(this.aux2), e.vertexWrite(this.aux3), e.vertexWrite(this._minMaxZoom));\n      }\n\n      m += a;\n    }\n  }\n\n  _getGeometry(e, i, s) {\n    const o = i ? t(r(i), 2) : e.readUnquantizedGeometry();\n    if (!o) return null;\n    return a(o, s ? 256 : 128);\n  }\n\n};\n\nexport default y;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate.js"],"names":["isNone","e","deltaDecodeGeometry","t","convertFromGeometry","r","WGLGeometryType","i","i1616to32","s","FillMaterialKey","o","triangulate","n","triangulateLibtess","m","clipMarshall","a","l","c","y","constructor","forceLibtess","geometryType","FILL","_write","load","_materialKey","recordStart","getDisplayId","dotDensity","_writeGeometry","recordEnd","_getGeometry","indexCount","lengths","_writeVertices","coords","length","vertexBounds","vertexWrite","vertexWriteF32","Math","abs","readGeometryArea","fillColor","tl","br","aux1","aux2","aux3","_minMaxZoom","readUnquantizedGeometry"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../../core/maybe.js\";import{deltaDecodeGeometry as t,convertFromGeometry as r}from\"../../../../../../layers/graphics/featureConversionUtils.js\";import{WGLGeometryType as i}from\"../../enums.js\";import{i1616to32 as s}from\"../../number.js\";import{FillMaterialKey as o}from\"../../materialKey/MaterialKey.js\";import{triangulate as n,triangulateLibtess as m,clipMarshall as a}from\"./templateUtils.js\";const l=1e3,c=1,y=y=>class extends y{constructor(...e){super(...e),this.forceLibtess=!1,this.geometryType=i.FILL}_write(e,t,r){const i=\"esriGeometryPoint\"===t.geometryType,s=o.load(this._materialKey);e.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,s.dotDensity,i),this._writeGeometry(e,t,s,r,i),e.recordEnd()}_writeGeometry(t,r,i,s,o){const a=this._getGeometry(r,s,o);if(e(a))return;const c=t.indexCount();if(!(a.lengths[0]>l)&&!this.forceLibtess&&n(t,a)){return void(!(c===t.indexCount())&&this._writeVertices(t,r,a.coords,a.lengths,i))}const y=m(t,a);!(c===t.indexCount())&&this._writeVertices(t,r,y,[y.length/2],i)}_writeVertices(e,t,r,i,o){const n=t.getDisplayId();let m=0;for(const a of i){const i=a+m;for(let a=m;a<i;a++){const i=r[2*a],m=r[2*a+1],l=s(c*i,c*m);e.vertexBounds(i,m,0,0),e.vertexWrite(l),e.vertexWrite(n),o.dotDensity?e.vertexWriteF32(1/Math.abs(t.readGeometryArea())):(e.vertexWrite(this.fillColor),e.vertexWrite(this.tl),e.vertexWrite(this.br),e.vertexWrite(this.aux1),e.vertexWrite(this.aux2),e.vertexWrite(this.aux3),e.vertexWrite(this._minMaxZoom))}m+=a}}_getGeometry(e,i,s){const o=i?t(r(i),2):e.readUnquantizedGeometry();if(!o)return null;return a(o,s?256:128)}};export default y;\n"]},"metadata":{},"sourceType":"module"}