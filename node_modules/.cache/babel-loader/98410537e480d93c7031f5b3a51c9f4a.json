{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as e } from \"../../core/maybe.js\";\nimport r from \"../../rest/support/Query.js\";\n\nasync function t(r, t, o) {\n  t = t.clone(), r.capabilities.query.supportsMaxRecordCountFactor && (t.maxRecordCountFactor = u(r));\n  const i = a(r),\n        n = r.capabilities.query.supportsPagination;\n  t.start = 0, t.num = i;\n  let s = null;\n\n  for (;;) {\n    const a = await r.source.queryFeaturesJSON(t, o);\n    if (e(s) ? s = a : s.features = s.features.concat(a.features), s.exceededTransferLimit = a.exceededTransferLimit, !n || !a.exceededTransferLimit) break;\n    t.start += i;\n  }\n\n  return s;\n}\n\nfunction a(e) {\n  return u(e) * o(e);\n}\n\nfunction o(e) {\n  return e.capabilities.query.maxRecordCount || 2e3;\n}\n\nfunction u(e) {\n  return e.capabilities.query.supportsMaxRecordCountFactor ? r.MAX_MAX_RECORD_COUNT_FACTOR : 1;\n}\n\nexport { u as getMaxRecordCountFactor, a as getMaximumQuerySize, o as getMaximumRecordCount, t as queryAllJSON };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/support/featureQueryAll.js"],"names":["isNone","e","r","t","o","clone","capabilities","query","supportsMaxRecordCountFactor","maxRecordCountFactor","u","i","a","n","supportsPagination","start","num","s","source","queryFeaturesJSON","features","concat","exceededTransferLimit","maxRecordCount","MAX_MAX_RECORD_COUNT_FACTOR","getMaxRecordCountFactor","getMaximumQuerySize","getMaximumRecordCount","queryAllJSON"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,qBAAvB;AAA6C,OAAOC,CAAP,MAAa,6BAAb;;AAA2C,eAAeC,CAAf,CAAiBD,CAAjB,EAAmBC,CAAnB,EAAqBC,CAArB,EAAuB;AAACD,EAAAA,CAAC,GAACA,CAAC,CAACE,KAAF,EAAF,EAAYH,CAAC,CAACI,YAAF,CAAeC,KAAf,CAAqBC,4BAArB,KAAoDL,CAAC,CAACM,oBAAF,GAAuBC,CAAC,CAACR,CAAD,CAA5E,CAAZ;AAA6F,QAAMS,CAAC,GAACC,CAAC,CAACV,CAAD,CAAT;AAAA,QAAaW,CAAC,GAACX,CAAC,CAACI,YAAF,CAAeC,KAAf,CAAqBO,kBAApC;AAAuDX,EAAAA,CAAC,CAACY,KAAF,GAAQ,CAAR,EAAUZ,CAAC,CAACa,GAAF,GAAML,CAAhB;AAAkB,MAAIM,CAAC,GAAC,IAAN;;AAAW,WAAO;AAAC,UAAML,CAAC,GAAC,MAAMV,CAAC,CAACgB,MAAF,CAASC,iBAAT,CAA2BhB,CAA3B,EAA6BC,CAA7B,CAAd;AAA8C,QAAGH,CAAC,CAACgB,CAAD,CAAD,GAAKA,CAAC,GAACL,CAAP,GAASK,CAAC,CAACG,QAAF,GAAWH,CAAC,CAACG,QAAF,CAAWC,MAAX,CAAkBT,CAAC,CAACQ,QAApB,CAApB,EAAkDH,CAAC,CAACK,qBAAF,GAAwBV,CAAC,CAACU,qBAA5E,EAAkG,CAACT,CAAD,IAAI,CAACD,CAAC,CAACU,qBAA5G,EAAkI;AAAMnB,IAAAA,CAAC,CAACY,KAAF,IAASJ,CAAT;AAAW;;AAAA,SAAOM,CAAP;AAAS;;AAAA,SAASL,CAAT,CAAWX,CAAX,EAAa;AAAC,SAAOS,CAAC,CAACT,CAAD,CAAD,GAAKG,CAAC,CAACH,CAAD,CAAb;AAAiB;;AAAA,SAASG,CAAT,CAAWH,CAAX,EAAa;AAAC,SAAOA,CAAC,CAACK,YAAF,CAAeC,KAAf,CAAqBgB,cAArB,IAAqC,GAA5C;AAAgD;;AAAA,SAASb,CAAT,CAAWT,CAAX,EAAa;AAAC,SAAOA,CAAC,CAACK,YAAF,CAAeC,KAAf,CAAqBC,4BAArB,GAAkDN,CAAC,CAACsB,2BAApD,GAAgF,CAAvF;AAAyF;;AAAA,SAAOd,CAAC,IAAIe,uBAAZ,EAAoCb,CAAC,IAAIc,mBAAzC,EAA6DtB,CAAC,IAAIuB,qBAAlE,EAAwFxB,CAAC,IAAIyB,YAA7F","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../core/maybe.js\";import r from\"../../rest/support/Query.js\";async function t(r,t,o){t=t.clone(),r.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=u(r));const i=a(r),n=r.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const a=await r.source.queryFeaturesJSON(t,o);if(e(s)?s=a:s.features=s.features.concat(a.features),s.exceededTransferLimit=a.exceededTransferLimit,!n||!a.exceededTransferLimit)break;t.start+=i}return s}function a(e){return u(e)*o(e)}function o(e){return e.capabilities.query.maxRecordCount||2e3}function u(e){return e.capabilities.query.supportsMaxRecordCountFactor?r.MAX_MAX_RECORD_COUNT_FACTOR:1}export{u as getMaxRecordCountFactor,a as getMaximumQuerySize,o as getMaximumRecordCount,t as queryAllJSON};\n"]},"metadata":{},"sourceType":"module"}