{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { g as t, r as i } from \"../../../chunks/vec3.js\";\nimport { c as s } from \"../../../chunks/vec3f64.js\";\nimport { create as e, createPoints as r, fromMatrix as n, computePlanes as o, intersectsSphere as u, intersectsRay as h, intersectsLineSegment as p, intersectsPoint as l, planePointIndices as d } from \"../../../geometry/support/frustum.js\";\n\nclass c {\n  constructor(t) {\n    this.renderCoordsHelper = t, this.frustum = e(), this._points = r(), this.lines = new Array(12), this._origin = s(), this._direction = s(), this._altitude = null;\n\n    for (let i = 0; i < 12; i++) this.lines[i] = {\n      origin: null,\n      direction: s(),\n      endpoint: null\n    };\n  }\n\n  get planes() {\n    return this.frustum;\n  }\n\n  get points() {\n    return this._points;\n  }\n\n  get mutablePoints() {\n    return this._points;\n  }\n\n  get direction() {\n    return this._direction;\n  }\n\n  update(i) {\n    n(i.viewMatrix, i.projectionMatrix, this.frustum, this._points), t(this._origin, i.eye), t(this._direction, i.viewForward), this._altitude = this.renderCoordsHelper.getAltitude(this._origin), this.updateLines();\n  }\n\n  updatePoints(i) {\n    for (let s = 0; s < this._points.length; s++) t(this._points[s], i[s]);\n\n    o(this.frustum, this._points), this.updateLines();\n  }\n\n  get altitude() {\n    return this._altitude;\n  }\n\n  intersectsSphere(t) {\n    return u(this.frustum, t);\n  }\n\n  intersectsRay(t) {\n    return h(this.frustum, t);\n  }\n\n  intersectsLineSegment(t, i) {\n    return p(this.frustum, t, i);\n  }\n\n  intersectsPoint(t) {\n    return l(this.frustum, t);\n  }\n\n  updateLines() {\n    const t = this._points;\n\n    for (let i = 0; i < 4; i++) {\n      const s = i + 4;\n      a(this.lines[i], t[i], t[s]), a(this.lines[i + 4], t[i], 3 === i ? t[0] : t[i + 1]), a(this.lines[i + 8], t[s], 3 === i ? t[4] : t[s + 1]);\n    }\n  }\n\n}\n\nfunction a(t, s, e) {\n  t.origin = s, t.endpoint = e, i(t.direction, s, e);\n}\n\nc.planePointIndices = d, c.nearFarLineIndices = [[0, 4], [1, 5], [2, 6], [3, 7]];\nexport { c as Frustum };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/state/Frustum.js"],"names":["g","t","r","i","c","s","create","e","createPoints","fromMatrix","n","computePlanes","o","intersectsSphere","u","intersectsRay","h","intersectsLineSegment","p","intersectsPoint","l","planePointIndices","d","constructor","renderCoordsHelper","frustum","_points","lines","Array","_origin","_direction","_altitude","origin","direction","endpoint","planes","points","mutablePoints","update","viewMatrix","projectionMatrix","eye","viewForward","getAltitude","updateLines","updatePoints","length","altitude","a","nearFarLineIndices","Frustum"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{g as t,r as i}from\"../../../chunks/vec3.js\";import{c as s}from\"../../../chunks/vec3f64.js\";import{create as e,createPoints as r,fromMatrix as n,computePlanes as o,intersectsSphere as u,intersectsRay as h,intersectsLineSegment as p,intersectsPoint as l,planePointIndices as d}from\"../../../geometry/support/frustum.js\";class c{constructor(t){this.renderCoordsHelper=t,this.frustum=e(),this._points=r(),this.lines=new Array(12),this._origin=s(),this._direction=s(),this._altitude=null;for(let i=0;i<12;i++)this.lines[i]={origin:null,direction:s(),endpoint:null}}get planes(){return this.frustum}get points(){return this._points}get mutablePoints(){return this._points}get direction(){return this._direction}update(i){n(i.viewMatrix,i.projectionMatrix,this.frustum,this._points),t(this._origin,i.eye),t(this._direction,i.viewForward),this._altitude=this.renderCoordsHelper.getAltitude(this._origin),this.updateLines()}updatePoints(i){for(let s=0;s<this._points.length;s++)t(this._points[s],i[s]);o(this.frustum,this._points),this.updateLines()}get altitude(){return this._altitude}intersectsSphere(t){return u(this.frustum,t)}intersectsRay(t){return h(this.frustum,t)}intersectsLineSegment(t,i){return p(this.frustum,t,i)}intersectsPoint(t){return l(this.frustum,t)}updateLines(){const t=this._points;for(let i=0;i<4;i++){const s=i+4;a(this.lines[i],t[i],t[s]),a(this.lines[i+4],t[i],3===i?t[0]:t[i+1]),a(this.lines[i+8],t[s],3===i?t[4]:t[s+1])}}}function a(t,s,e){t.origin=s,t.endpoint=e,i(t.direction,s,e)}c.planePointIndices=d,c.nearFarLineIndices=[[0,4],[1,5],[2,6],[3,7]];export{c as Frustum};\n"]},"metadata":{},"sourceType":"module"}