{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/ArrayPool.js\";\nimport t from \"../../../../../geometry/Extent.js\";\nimport { create as i } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport s from \"../../../../../rest/support/QuantizationParameters.js\";\nimport o from \"../../../tiling/TileKey.js\";\n\nfunction n(e, t) {\n  const i = e.bounds,\n        s = t.bounds;\n  return e.key.id !== t.key.id && e.key.world === t.key.world && i[0] <= s[0] && i[1] <= s[1] && i[2] >= s[2] && i[3] >= s[3];\n}\n\nfunction r(e, t) {\n  return n(t, e);\n}\n\nclass l {\n  constructor(e, t) {\n    this.key = new o(0, 0, 0, 0), this.bounds = i(), this.objectIds = new Set(), this.key.set(t);\n    const s = e.getLODInfoAt(this.key);\n    this.tileInfoView = e, this.tileInfoView.getTileBounds(this.bounds, this.key, !0), this.resolution = s.resolution, this.scale = s.scale, this.level = s.level, this.needsClear = !0;\n  }\n\n  get id() {\n    return this.key.id;\n  }\n\n  get extent() {\n    return t.fromBounds(this.bounds, this.tileInfoView.tileInfo.spatialReference);\n  }\n\n  get transform() {\n    return {\n      originPosition: \"upperLeft\",\n      scale: [this.resolution, this.resolution],\n      translate: [this.bounds[0], this.bounds[3]]\n    };\n  }\n\n  get bbox() {\n    const e = this.bounds;\n    return {\n      minX: e[0],\n      minY: e[1],\n      maxX: e[2],\n      maxY: e[3]\n    };\n  }\n\n  clone() {\n    return new l(this.tileInfoView, this.key);\n  }\n\n  createChildTiles() {\n    const t = this.key.getChildKeys(),\n          i = e.acquire();\n\n    for (let e = 0; e < t.length; e++) i[e] = new l(this.tileInfoView, t[e]);\n\n    return i;\n  }\n\n  getQuantizationParameters() {\n    return s.fromJSON({\n      mode: \"view\",\n      originPosition: \"upperLeft\",\n      tolerance: this.resolution,\n      extent: {\n        xmin: this.bounds[0],\n        ymin: this.bounds[1],\n        xmax: this.bounds[2],\n        ymax: this.bounds[3],\n        spatialReference: this.tileInfoView.tileInfo.spatialReference\n      }\n    });\n  }\n\n}\n\nexport default l;\nexport { l as Tile, r as isChildOf, n as isParentOf };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/layers/features/support/Tile.js"],"names":["e","t","create","i","s","o","n","bounds","key","id","world","r","l","constructor","objectIds","Set","set","getLODInfoAt","tileInfoView","getTileBounds","resolution","scale","level","needsClear","extent","fromBounds","tileInfo","spatialReference","transform","originPosition","translate","bbox","minX","minY","maxX","maxY","clone","createChildTiles","getChildKeys","acquire","length","getQuantizationParameters","fromJSON","mode","tolerance","xmin","ymin","xmax","ymax","Tile","isChildOf","isParentOf"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/ArrayPool.js\";import t from\"../../../../../geometry/Extent.js\";import{create as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import s from\"../../../../../rest/support/QuantizationParameters.js\";import o from\"../../../tiling/TileKey.js\";function n(e,t){const i=e.bounds,s=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&i[0]<=s[0]&&i[1]<=s[1]&&i[2]>=s[2]&&i[3]>=s[3]}function r(e,t){return n(t,e)}class l{constructor(e,t){this.key=new o(0,0,0,0),this.bounds=i(),this.objectIds=new Set,this.key.set(t);const s=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level,this.needsClear=!0}get id(){return this.key.id}get extent(){return t.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:\"upperLeft\",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}get bbox(){const e=this.bounds;return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}clone(){return new l(this.tileInfoView,this.key)}createChildTiles(){const t=this.key.getChildKeys(),i=e.acquire();for(let e=0;e<t.length;e++)i[e]=new l(this.tileInfoView,t[e]);return i}getQuantizationParameters(){return s.fromJSON({mode:\"view\",originPosition:\"upperLeft\",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}export default l;export{l as Tile,r as isChildOf,n as isParentOf};\n"]},"metadata":{},"sourceType":"module"}