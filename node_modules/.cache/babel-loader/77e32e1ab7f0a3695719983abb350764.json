{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../core/maybe.js\";\nimport { a as r } from \"../../../chunks/mat4.js\";\nimport { f as n, c as o, m as c, n as a } from \"../../../chunks/vec3.js\";\nimport { f as i } from \"../../../chunks/vec4f64.js\";\nimport { sv3d as s, sm4d as l } from \"../../../geometry/support/vectorStacks.js\";\nimport { hydrateGeometry as m } from \"../../../layers/graphics/hydratedFeatures.js\";\nimport { Manipulator3D as u } from \"./Manipulator3D.js\";\nimport { computeCentroid as p } from \"../layers/graphics/graphicUtils.js\";\nimport g from \"../webgl-engine/lib/GeometryUtil.js\";\nimport { ColorMaterial as f } from \"../webgl-engine/materials/ColorMaterial.js\";\nimport { ShadedColorMaterial as h } from \"../webgl-engine/materials/ShadedColorMaterial.js\";\n\nfunction d(e, t = 4, r = !0) {\n  const n = i(e[0], e[1], e[2], e.length > 3 ? e[3] : 1),\n        o = e[3] < 1;\n  return r ? new h({\n    color: n,\n    transparent: o,\n    writeDepth: !0,\n    cullFace: 2,\n    renderOccluded: t\n  }) : new f({\n    color: n,\n    transparent: o,\n    writeDepth: !0,\n    cullFace: 2,\n    renderOccluded: t\n  });\n}\n\nfunction j(e, t = 4) {\n  const r = i(e[0], e[1], e[2], 4 === e.length ? e[3] : 1);\n  return new f({\n    color: r,\n    transparent: !0,\n    writeDepth: !0,\n    cullFace: 1,\n    renderOccluded: t\n  });\n}\n\nfunction w(e, t, r) {\n  return new u({\n    view: e,\n    renderObjects: [{\n      geometry: g.createSphereGeometry(1, 32, 32),\n      material: d(i(t[0], t[1], t[2], null != r ? r : 1))\n    }]\n  });\n}\n\nfunction y(e, t, a, i) {\n  const m = n(s.get(), e, a),\n        u = b(m, o(s.get(), i, m), a, l.get());\n  r(u, u);\n  const p = c(s.get(), t, u);\n  return Math.atan2(p[1], p[0]);\n}\n\nfunction b(e, t, r, n) {\n  const c = a(s.get(), e),\n        i = a(s.get(), t),\n        l = o(s.get(), c, i);\n  return n[0] = c[0], n[1] = c[1], n[2] = c[2], n[3] = 0, n[4] = i[0], n[5] = i[1], n[6] = i[2], n[7] = 0, n[8] = l[0], n[9] = l[1], n[10] = l[2], n[11] = 0, n[12] = r[0], n[13] = r[1], n[14] = r[2], n[15] = 1, n;\n}\n\nfunction O(t, r) {\n  const n = t.getViewForGraphic(r);\n  return e(n) && \"computeAttachmentOrigin\" in n ? n.computeAttachmentOrigin(r, t.spatialReference) : null;\n}\n\nfunction v(t, r, n) {\n  const o = O(t, n);\n  e(o) ? r.elevationAlignedLocation = o : F(r, n.geometry);\n}\n\nfunction F(e, r) {\n  if (t(r)) return;\n  const n = \"mesh\" === r.type ? r.anchor : p(r);\n  t(n) || (e.location = m(n));\n}\n\nexport { y as calculateInputRotationTransform, b as calculateTranslateRotateFromBases, d as createManipulatorMaterial, j as createManipulatorOutlineMaterial, w as createSphereManipulator, O as getGraphicAttachmentOrigin, v as placeAtGraphic };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js"],"names":["isSome","e","isNone","t","a","r","f","n","c","o","m","i","sv3d","s","sm4d","l","hydrateGeometry","Manipulator3D","u","computeCentroid","p","g","ColorMaterial","ShadedColorMaterial","h","d","length","color","transparent","writeDepth","cullFace","renderOccluded","j","w","view","renderObjects","geometry","createSphereGeometry","material","y","get","b","Math","atan2","O","getViewForGraphic","computeAttachmentOrigin","spatialReference","v","elevationAlignedLocation","F","type","anchor","location","calculateInputRotationTransform","calculateTranslateRotateFromBases","createManipulatorMaterial","createManipulatorOutlineMaterial","createSphereManipulator","getGraphicAttachmentOrigin","placeAtGraphic"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";import{a as r}from\"../../../chunks/mat4.js\";import{f as n,c as o,m as c,n as a}from\"../../../chunks/vec3.js\";import{f as i}from\"../../../chunks/vec4f64.js\";import{sv3d as s,sm4d as l}from\"../../../geometry/support/vectorStacks.js\";import{hydrateGeometry as m}from\"../../../layers/graphics/hydratedFeatures.js\";import{Manipulator3D as u}from\"./Manipulator3D.js\";import{computeCentroid as p}from\"../layers/graphics/graphicUtils.js\";import g from\"../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as f}from\"../webgl-engine/materials/ColorMaterial.js\";import{ShadedColorMaterial as h}from\"../webgl-engine/materials/ShadedColorMaterial.js\";function d(e,t=4,r=!0){const n=i(e[0],e[1],e[2],e.length>3?e[3]:1),o=e[3]<1;return r?new h({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t}):new f({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t})}function j(e,t=4){const r=i(e[0],e[1],e[2],4===e.length?e[3]:1);return new f({color:r,transparent:!0,writeDepth:!0,cullFace:1,renderOccluded:t})}function w(e,t,r){return new u({view:e,renderObjects:[{geometry:g.createSphereGeometry(1,32,32),material:d(i(t[0],t[1],t[2],null!=r?r:1))}]})}function y(e,t,a,i){const m=n(s.get(),e,a),u=b(m,o(s.get(),i,m),a,l.get());r(u,u);const p=c(s.get(),t,u);return Math.atan2(p[1],p[0])}function b(e,t,r,n){const c=a(s.get(),e),i=a(s.get(),t),l=o(s.get(),c,i);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=0,n[4]=i[0],n[5]=i[1],n[6]=i[2],n[7]=0,n[8]=l[0],n[9]=l[1],n[10]=l[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function O(t,r){const n=t.getViewForGraphic(r);return e(n)&&\"computeAttachmentOrigin\"in n?n.computeAttachmentOrigin(r,t.spatialReference):null}function v(t,r,n){const o=O(t,n);e(o)?r.elevationAlignedLocation=o:F(r,n.geometry)}function F(e,r){if(t(r))return;const n=\"mesh\"===r.type?r.anchor:p(r);t(n)||(e.location=m(n))}export{y as calculateInputRotationTransform,b as calculateTranslateRotateFromBases,d as createManipulatorMaterial,j as createManipulatorOutlineMaterial,w as createSphereManipulator,O as getGraphicAttachmentOrigin,v as placeAtGraphic};\n"]},"metadata":{},"sourceType":"module"}