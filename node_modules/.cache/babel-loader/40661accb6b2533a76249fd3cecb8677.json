{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { n as s } from \"../../../../chunks/mat3.js\";\nimport { c as i } from \"../../../../chunks/mat3f64.js\";\nimport { a as r, e, d as o, m as n } from \"../../../../chunks/mat4.js\";\nimport { c as h } from \"../../../../chunks/mat4f64.js\";\nimport { c as a } from \"../../../../chunks/quat.js\";\nimport { a as f } from \"../../../../chunks/quatf64.js\";\nimport { q as l, b as m, f as c } from \"../../../../chunks/vec3.js\";\nimport { c as b } from \"../../../../chunks/vec3f32.js\";\nimport { c as p } from \"../../../../chunks/vec3f64.js\";\nimport { c as u } from \"../../../../chunks/vec4f64.js\";\nimport { c as v } from \"../../../../chunks/sphere.js\";\n\nclass z {\n  constructor() {\n    this._transform = h(), this._transformInverse = new g({\n      value: this._transform\n    }, r, h), this._transformInverseTranspose = new g(this._transformInverse, e, h), this._transformTranspose = new g({\n      value: this._transform\n    }, e, h), this._transformInverseRotation = new g({\n      value: this._transform\n    }, s, i);\n  }\n\n  invalidateLazyTransforms() {\n    this._transformInverse.invalidate(), this._transformInverseTranspose.invalidate(), this._transformTranspose.invalidate(), this._transformInverseRotation.invalidate();\n  }\n\n  get transform() {\n    return this._transform;\n  }\n\n  get inverse() {\n    return this._transformInverse.value;\n  }\n\n  get inverseTranspose() {\n    return this._transformInverseTranspose.value;\n  }\n\n  get inverseRotation() {\n    return this._transformInverseRotation.value;\n  }\n\n  get transpose() {\n    return this._transformTranspose.value;\n  }\n\n  setTransformMatrix(t) {\n    o(this._transform, t);\n  }\n\n  multiplyTransform(t) {\n    n(this._transform, this._transform, t);\n  }\n\n  set(t) {\n    o(this._transform, t), this.invalidateLazyTransforms();\n  }\n\n  setAndInvalidateLazyTransforms(t, s) {\n    this.setTransformMatrix(t), this.multiplyTransform(s), this.invalidateLazyTransforms();\n  }\n\n}\n\nclass g {\n  constructor(t, s, i) {\n    this.original = t, this.update = s, this.dirty = !0, this.transform = i();\n  }\n\n  invalidate() {\n    this.dirty = !0;\n  }\n\n  get value() {\n    return this.dirty && (this.update(this.transform, this.original.value), this.dirty = !1), this.transform;\n  }\n\n}\n\nclass S {\n  constructor(t = 0) {\n    this.offset = t, this.tmpVertex = p();\n  }\n\n  applyToVertex(t, s, i) {\n    const r = t + this.localOrigin[0],\n          e = s + this.localOrigin[1],\n          o = i + this.localOrigin[2],\n          n = this.offset / Math.sqrt(r * r + e * e + o * o);\n    return this.tmpVertex[0] = t + r * n, this.tmpVertex[1] = s + e * n, this.tmpVertex[2] = i + o * n, this.tmpVertex;\n  }\n\n  applyToAabb(t) {\n    const s = t[0] + this.localOrigin[0],\n          i = t[1] + this.localOrigin[1],\n          r = t[2] + this.localOrigin[2],\n          e = t[3] + this.localOrigin[0],\n          o = t[4] + this.localOrigin[1],\n          n = t[5] + this.localOrigin[2],\n          h = this.offset / Math.sqrt(s * s + i * i + r * r);\n    t[0] += s * h, t[1] += i * h, t[2] += r * h;\n    const a = this.offset / Math.sqrt(e * e + o * o + n * n);\n    return t[3] += e * a, t[4] += o * a, t[5] += n * a, t;\n  }\n\n}\n\nclass T {\n  constructor(t = 0) {\n    this.offset = t, this.componentLocalOriginLength = 0, this.tmpVertex = p(), this.mbs = u(), this.obb = {\n      center: p(),\n      halfSize: b(),\n      quaternion: null\n    };\n  }\n\n  set localOrigin(t) {\n    this.componentLocalOriginLength = Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);\n  }\n\n  applyToVertex(t, s, i) {\n    const r = t,\n          e = s,\n          o = i + this.componentLocalOriginLength,\n          n = this.offset / Math.sqrt(r * r + e * e + o * o);\n    return this.tmpVertex[0] = t + r * n, this.tmpVertex[1] = s + e * n, this.tmpVertex[2] = i + o * n, this.tmpVertex;\n  }\n\n  applyToAabb(t) {\n    const s = t[0],\n          i = t[1],\n          r = t[2] + this.componentLocalOriginLength,\n          e = t[3],\n          o = t[4],\n          n = t[5] + this.componentLocalOriginLength,\n          h = this.offset / Math.sqrt(s * s + i * i + r * r);\n    t[0] += s * h, t[1] += i * h, t[2] += r * h;\n    const a = this.offset / Math.sqrt(e * e + o * o + n * n);\n    return t[3] += e * a, t[4] += o * a, t[5] += n * a, t;\n  }\n\n  applyToMbs(t) {\n    const s = Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]),\n          i = this.offset / s;\n    return this.mbs[0] = t[0] + t[0] * i, this.mbs[1] = t[1] + t[1] * i, this.mbs[2] = t[2] + t[2] * i, this.mbs[3] = t[3] + t[3] * this.offset / s, this.mbs;\n  }\n\n  applyToObb(t) {\n    const s = t.center,\n          i = this.offset / Math.sqrt(s[0] * s[0] + s[1] * s[1] + s[2] * s[2]);\n    this.obb.center[0] = s[0] + s[0] * i, this.obb.center[1] = s[1] + s[1] * i, this.obb.center[2] = s[2] + s[2] * i, l(this.obb.halfSize, t.halfSize, t.quaternion), m(this.obb.halfSize, this.obb.halfSize, t.center);\n    const r = this.offset / Math.sqrt(this.obb.halfSize[0] * this.obb.halfSize[0] + this.obb.halfSize[1] * this.obb.halfSize[1] + this.obb.halfSize[2] * this.obb.halfSize[2]);\n    return this.obb.halfSize[0] += this.obb.halfSize[0] * r, this.obb.halfSize[1] += this.obb.halfSize[1] * r, this.obb.halfSize[2] += this.obb.halfSize[2] * r, c(this.obb.halfSize, this.obb.halfSize, t.center), a(j, t.quaternion), l(this.obb.halfSize, this.obb.halfSize, j), this.obb.halfSize[0] *= this.obb.halfSize[0] < 0 ? -1 : 1, this.obb.halfSize[1] *= this.obb.halfSize[1] < 0 ? -1 : 1, this.obb.halfSize[2] *= this.obb.halfSize[2] < 0 ? -1 : 1, this.obb.quaternion = t.quaternion, this.obb;\n  }\n\n}\n\nclass q {\n  constructor(t = 0) {\n    this.offset = t, this.sphere = v(), this.tmpVertex = p();\n  }\n\n  applyToVertex(t, s, i) {\n    const r = this.objectTransform.transform;\n    let e = r[0] * t + r[4] * s + r[8] * i + r[12],\n        o = r[1] * t + r[5] * s + r[9] * i + r[13],\n        n = r[2] * t + r[6] * s + r[10] * i + r[14];\n    const h = this.offset / Math.sqrt(e * e + o * o + n * n);\n    e += e * h, o += o * h, n += n * h;\n    const a = this.objectTransform.inverse;\n    return this.tmpVertex[0] = a[0] * e + a[4] * o + a[8] * n + a[12], this.tmpVertex[1] = a[1] * e + a[5] * o + a[9] * n + a[13], this.tmpVertex[2] = a[2] * e + a[6] * o + a[10] * n + a[14], this.tmpVertex;\n  }\n\n  applyToMinMax(t, s) {\n    const i = this.offset / Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);\n    t[0] += t[0] * i, t[1] += t[1] * i, t[2] += t[2] * i;\n    const r = this.offset / Math.sqrt(s[0] * s[0] + s[1] * s[1] + s[2] * s[2]);\n    s[0] += s[0] * r, s[1] += s[1] * r, s[2] += s[2] * r;\n  }\n\n  applyToAabb(t) {\n    const s = this.offset / Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);\n    t[0] += t[0] * s, t[1] += t[1] * s, t[2] += t[2] * s;\n    const i = this.offset / Math.sqrt(t[3] * t[3] + t[4] * t[4] + t[5] * t[5]);\n    return t[3] += t[3] * i, t[4] += t[4] * i, t[5] += t[5] * i, t;\n  }\n\n  applyToBoundingSphere(t) {\n    const s = Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]),\n          i = this.offset / s;\n    return this.sphere[0] = t[0] + t[0] * i, this.sphere[1] = t[1] + t[1] * i, this.sphere[2] = t[2] + t[2] * i, this.sphere[3] = t[3] + t[3] * this.offset / s, this.sphere;\n  }\n\n}\n\nconst x = new q();\n\nfunction _(s) {\n  return t(s) ? (x.offset = s, x) : null;\n}\n\nconst y = new T();\n\nfunction M(s) {\n  return t(s) ? (y.offset = s, y) : null;\n}\n\nconst d = new S();\n\nfunction V(s) {\n  return t(s) ? (d.offset = s, d) : null;\n}\n\nconst O = \"terrain\",\n      j = f();\nexport { T as I3SVerticalOffsetGlobalViewingMode, z as IntersectorTransform, q as Object3DVerticalOffsetGlobalViewingMode, O as TERRAIN_ID, S as TerrainVerticalOffsetGlobalViewingMode, M as getVerticalOffsetI3S, _ as getVerticalOffsetObject3D, V as getVerticalOffsetTerrain };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js"],"names":["isSome","t","n","s","c","i","a","r","e","d","o","m","h","f","q","l","b","p","u","v","z","constructor","_transform","_transformInverse","g","value","_transformInverseTranspose","_transformTranspose","_transformInverseRotation","invalidateLazyTransforms","invalidate","transform","inverse","inverseTranspose","inverseRotation","transpose","setTransformMatrix","multiplyTransform","set","setAndInvalidateLazyTransforms","original","update","dirty","S","offset","tmpVertex","applyToVertex","localOrigin","Math","sqrt","applyToAabb","T","componentLocalOriginLength","mbs","obb","center","halfSize","quaternion","applyToMbs","applyToObb","j","sphere","objectTransform","applyToMinMax","applyToBoundingSphere","x","_","y","M","V","O","I3SVerticalOffsetGlobalViewingMode","IntersectorTransform","Object3DVerticalOffsetGlobalViewingMode","TERRAIN_ID","TerrainVerticalOffsetGlobalViewingMode","getVerticalOffsetI3S","getVerticalOffsetObject3D","getVerticalOffsetTerrain"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,2BAAvB;AAAmD,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAd,EAAgBC,CAAC,IAAIC,CAArB,EAAuBC,CAAC,IAAIT,CAA5B,QAAkC,4BAAlC;AAA+D,SAAOE,CAAC,IAAIQ,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOR,CAAC,IAAIE,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOA,CAAC,IAAIO,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIL,CAAnB,EAAqBE,CAAC,IAAIT,CAA1B,QAAgC,4BAAhC;AAA6D,SAAOA,CAAC,IAAIY,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOZ,CAAC,IAAIa,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOb,CAAC,IAAIc,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOd,CAAC,IAAIe,CAAZ,QAAkB,8BAAlB;;AAAiD,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,GAAE;AAAC,SAAKC,UAAL,GAAgBV,CAAC,EAAjB,EAAoB,KAAKW,iBAAL,GAAuB,IAAIC,CAAJ,CAAM;AAACC,MAAAA,KAAK,EAAC,KAAKH;AAAZ,KAAN,EAA8Bf,CAA9B,EAAgCK,CAAhC,CAA3C,EAA8E,KAAKc,0BAAL,GAAgC,IAAIF,CAAJ,CAAM,KAAKD,iBAAX,EAA6Bf,CAA7B,EAA+BI,CAA/B,CAA9G,EAAgJ,KAAKe,mBAAL,GAAyB,IAAIH,CAAJ,CAAM;AAACC,MAAAA,KAAK,EAAC,KAAKH;AAAZ,KAAN,EAA8Bd,CAA9B,EAAgCI,CAAhC,CAAzK,EAA4M,KAAKgB,yBAAL,GAA+B,IAAIJ,CAAJ,CAAM;AAACC,MAAAA,KAAK,EAAC,KAAKH;AAAZ,KAAN,EAA8BnB,CAA9B,EAAgCE,CAAhC,CAA3O;AAA8Q;;AAAAwB,EAAAA,wBAAwB,GAAE;AAAC,SAAKN,iBAAL,CAAuBO,UAAvB,IAAoC,KAAKJ,0BAAL,CAAgCI,UAAhC,EAApC,EAAiF,KAAKH,mBAAL,CAAyBG,UAAzB,EAAjF,EAAuH,KAAKF,yBAAL,CAA+BE,UAA/B,EAAvH;AAAmK;;AAAa,MAATC,SAAS,GAAE;AAAC,WAAO,KAAKT,UAAZ;AAAuB;;AAAW,MAAPU,OAAO,GAAE;AAAC,WAAO,KAAKT,iBAAL,CAAuBE,KAA9B;AAAoC;;AAAoB,MAAhBQ,gBAAgB,GAAE;AAAC,WAAO,KAAKP,0BAAL,CAAgCD,KAAvC;AAA6C;;AAAmB,MAAfS,eAAe,GAAE;AAAC,WAAO,KAAKN,yBAAL,CAA+BH,KAAtC;AAA4C;;AAAa,MAATU,SAAS,GAAE;AAAC,WAAO,KAAKR,mBAAL,CAAyBF,KAAhC;AAAsC;;AAAAW,EAAAA,kBAAkB,CAACnC,CAAD,EAAG;AAACS,IAAAA,CAAC,CAAC,KAAKY,UAAN,EAAiBrB,CAAjB,CAAD;AAAqB;;AAAAoC,EAAAA,iBAAiB,CAACpC,CAAD,EAAG;AAACC,IAAAA,CAAC,CAAC,KAAKoB,UAAN,EAAiB,KAAKA,UAAtB,EAAiCrB,CAAjC,CAAD;AAAqC;;AAAAqC,EAAAA,GAAG,CAACrC,CAAD,EAAG;AAACS,IAAAA,CAAC,CAAC,KAAKY,UAAN,EAAiBrB,CAAjB,CAAD,EAAqB,KAAK4B,wBAAL,EAArB;AAAqD;;AAAAU,EAAAA,8BAA8B,CAACtC,CAAD,EAAGE,CAAH,EAAK;AAAC,SAAKiC,kBAAL,CAAwBnC,CAAxB,GAA2B,KAAKoC,iBAAL,CAAuBlC,CAAvB,CAA3B,EAAqD,KAAK0B,wBAAL,EAArD;AAAqF;;AAA1gC;;AAA2gC,MAAML,CAAN,CAAO;AAACH,EAAAA,WAAW,CAACpB,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,SAAKmC,QAAL,GAAcvC,CAAd,EAAgB,KAAKwC,MAAL,GAAYtC,CAA5B,EAA8B,KAAKuC,KAAL,GAAW,CAAC,CAA1C,EAA4C,KAAKX,SAAL,GAAe1B,CAAC,EAA5D;AAA+D;;AAAAyB,EAAAA,UAAU,GAAE;AAAC,SAAKY,KAAL,GAAW,CAAC,CAAZ;AAAc;;AAAS,MAALjB,KAAK,GAAE;AAAC,WAAO,KAAKiB,KAAL,KAAa,KAAKD,MAAL,CAAY,KAAKV,SAAjB,EAA2B,KAAKS,QAAL,CAAcf,KAAzC,GAAgD,KAAKiB,KAAL,GAAW,CAAC,CAAzE,GAA4E,KAAKX,SAAxF;AAAkG;;AAA5N;;AAA6N,MAAMY,CAAN,CAAO;AAACtB,EAAAA,WAAW,CAACpB,CAAC,GAAC,CAAH,EAAK;AAAC,SAAK2C,MAAL,GAAY3C,CAAZ,EAAc,KAAK4C,SAAL,GAAe5B,CAAC,EAA9B;AAAiC;;AAAA6B,EAAAA,aAAa,CAAC7C,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAME,CAAC,GAACN,CAAC,GAAC,KAAK8C,WAAL,CAAiB,CAAjB,CAAV;AAAA,UAA8BvC,CAAC,GAACL,CAAC,GAAC,KAAK4C,WAAL,CAAiB,CAAjB,CAAlC;AAAA,UAAsDrC,CAAC,GAACL,CAAC,GAAC,KAAK0C,WAAL,CAAiB,CAAjB,CAA1D;AAAA,UAA8E7C,CAAC,GAAC,KAAK0C,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAU1C,CAAC,GAACA,CAAF,GAAIC,CAAC,GAACA,CAAN,GAAQE,CAAC,GAACA,CAApB,CAA5F;AAAmH,WAAO,KAAKmC,SAAL,CAAe,CAAf,IAAkB5C,CAAC,GAACM,CAAC,GAACL,CAAtB,EAAwB,KAAK2C,SAAL,CAAe,CAAf,IAAkB1C,CAAC,GAACK,CAAC,GAACN,CAA9C,EAAgD,KAAK2C,SAAL,CAAe,CAAf,IAAkBxC,CAAC,GAACK,CAAC,GAACR,CAAtE,EAAwE,KAAK2C,SAApF;AAA8F;;AAAAK,EAAAA,WAAW,CAACjD,CAAD,EAAG;AAAC,UAAME,CAAC,GAACF,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK8C,WAAL,CAAiB,CAAjB,CAAb;AAAA,UAAiC1C,CAAC,GAACJ,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK8C,WAAL,CAAiB,CAAjB,CAAxC;AAAA,UAA4DxC,CAAC,GAACN,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK8C,WAAL,CAAiB,CAAjB,CAAnE;AAAA,UAAuFvC,CAAC,GAACP,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK8C,WAAL,CAAiB,CAAjB,CAA9F;AAAA,UAAkHrC,CAAC,GAACT,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK8C,WAAL,CAAiB,CAAjB,CAAzH;AAAA,UAA6I7C,CAAC,GAACD,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK8C,WAAL,CAAiB,CAAjB,CAApJ;AAAA,UAAwKnC,CAAC,GAAC,KAAKgC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAU9C,CAAC,GAACA,CAAF,GAAIE,CAAC,GAACA,CAAN,GAAQE,CAAC,GAACA,CAApB,CAAtL;AAA6MN,IAAAA,CAAC,CAAC,CAAD,CAAD,IAAME,CAAC,GAACS,CAAR,EAAUX,CAAC,CAAC,CAAD,CAAD,IAAMI,CAAC,GAACO,CAAlB,EAAoBX,CAAC,CAAC,CAAD,CAAD,IAAMM,CAAC,GAACK,CAA5B;AAA8B,UAAMN,CAAC,GAAC,KAAKsC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAUzC,CAAC,GAACA,CAAF,GAAIE,CAAC,GAACA,CAAN,GAAQR,CAAC,GAACA,CAApB,CAApB;AAA2C,WAAOD,CAAC,CAAC,CAAD,CAAD,IAAMO,CAAC,GAACF,CAAR,EAAUL,CAAC,CAAC,CAAD,CAAD,IAAMS,CAAC,GAACJ,CAAlB,EAAoBL,CAAC,CAAC,CAAD,CAAD,IAAMC,CAAC,GAACI,CAA5B,EAA8BL,CAArC;AAAuC;;AAArmB;;AAAsmB,MAAMkD,CAAN,CAAO;AAAC9B,EAAAA,WAAW,CAACpB,CAAC,GAAC,CAAH,EAAK;AAAC,SAAK2C,MAAL,GAAY3C,CAAZ,EAAc,KAAKmD,0BAAL,GAAgC,CAA9C,EAAgD,KAAKP,SAAL,GAAe5B,CAAC,EAAhE,EAAmE,KAAKoC,GAAL,GAASnC,CAAC,EAA7E,EAAgF,KAAKoC,GAAL,GAAS;AAACC,MAAAA,MAAM,EAACtC,CAAC,EAAT;AAAYuC,MAAAA,QAAQ,EAACxC,CAAC,EAAtB;AAAyByC,MAAAA,UAAU,EAAC;AAApC,KAAzF;AAAmI;;AAAe,MAAXV,WAAW,CAAC9C,CAAD,EAAG;AAAC,SAAKmD,0BAAL,GAAgCJ,IAAI,CAACC,IAAL,CAAUhD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAAhC;AAAyE;;AAAA6C,EAAAA,aAAa,CAAC7C,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAME,CAAC,GAACN,CAAR;AAAA,UAAUO,CAAC,GAACL,CAAZ;AAAA,UAAcO,CAAC,GAACL,CAAC,GAAC,KAAK+C,0BAAvB;AAAA,UAAkDlD,CAAC,GAAC,KAAK0C,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAU1C,CAAC,GAACA,CAAF,GAAIC,CAAC,GAACA,CAAN,GAAQE,CAAC,GAACA,CAApB,CAAhE;AAAuF,WAAO,KAAKmC,SAAL,CAAe,CAAf,IAAkB5C,CAAC,GAACM,CAAC,GAACL,CAAtB,EAAwB,KAAK2C,SAAL,CAAe,CAAf,IAAkB1C,CAAC,GAACK,CAAC,GAACN,CAA9C,EAAgD,KAAK2C,SAAL,CAAe,CAAf,IAAkBxC,CAAC,GAACK,CAAC,GAACR,CAAtE,EAAwE,KAAK2C,SAApF;AAA8F;;AAAAK,EAAAA,WAAW,CAACjD,CAAD,EAAG;AAAC,UAAME,CAAC,GAACF,CAAC,CAAC,CAAD,CAAT;AAAA,UAAaI,CAAC,GAACJ,CAAC,CAAC,CAAD,CAAhB;AAAA,UAAoBM,CAAC,GAACN,CAAC,CAAC,CAAD,CAAD,GAAK,KAAKmD,0BAAhC;AAAA,UAA2D5C,CAAC,GAACP,CAAC,CAAC,CAAD,CAA9D;AAAA,UAAkES,CAAC,GAACT,CAAC,CAAC,CAAD,CAArE;AAAA,UAAyEC,CAAC,GAACD,CAAC,CAAC,CAAD,CAAD,GAAK,KAAKmD,0BAArF;AAAA,UAAgHxC,CAAC,GAAC,KAAKgC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAU9C,CAAC,GAACA,CAAF,GAAIE,CAAC,GAACA,CAAN,GAAQE,CAAC,GAACA,CAApB,CAA9H;AAAqJN,IAAAA,CAAC,CAAC,CAAD,CAAD,IAAME,CAAC,GAACS,CAAR,EAAUX,CAAC,CAAC,CAAD,CAAD,IAAMI,CAAC,GAACO,CAAlB,EAAoBX,CAAC,CAAC,CAAD,CAAD,IAAMM,CAAC,GAACK,CAA5B;AAA8B,UAAMN,CAAC,GAAC,KAAKsC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAUzC,CAAC,GAACA,CAAF,GAAIE,CAAC,GAACA,CAAN,GAAQR,CAAC,GAACA,CAApB,CAApB;AAA2C,WAAOD,CAAC,CAAC,CAAD,CAAD,IAAMO,CAAC,GAACF,CAAR,EAAUL,CAAC,CAAC,CAAD,CAAD,IAAMS,CAAC,GAACJ,CAAlB,EAAoBL,CAAC,CAAC,CAAD,CAAD,IAAMC,CAAC,GAACI,CAA5B,EAA8BL,CAArC;AAAuC;;AAAAyD,EAAAA,UAAU,CAACzD,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC6C,IAAI,CAACC,IAAL,CAAUhD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAAR;AAAA,UAAiDI,CAAC,GAAC,KAAKuC,MAAL,GAAYzC,CAA/D;AAAiE,WAAO,KAAKkD,GAAL,CAAS,CAAT,IAAYpD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAtB,EAAwB,KAAKgD,GAAL,CAAS,CAAT,IAAYpD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAA9C,EAAgD,KAAKgD,GAAL,CAAS,CAAT,IAAYpD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAtE,EAAwE,KAAKgD,GAAL,CAAS,CAAT,IAAYpD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK2C,MAAV,GAAiBzC,CAA1G,EAA4G,KAAKkD,GAAxH;AAA4H;;AAAAM,EAAAA,UAAU,CAAC1D,CAAD,EAAG;AAAC,UAAME,CAAC,GAACF,CAAC,CAACsD,MAAV;AAAA,UAAiBlD,CAAC,GAAC,KAAKuC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAU9C,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAA/B;AAAwE,SAAKmD,GAAL,CAASC,MAAT,CAAgB,CAAhB,IAAmBpD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKE,CAA7B,EAA+B,KAAKiD,GAAL,CAASC,MAAT,CAAgB,CAAhB,IAAmBpD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKE,CAA5D,EAA8D,KAAKiD,GAAL,CAASC,MAAT,CAAgB,CAAhB,IAAmBpD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKE,CAA3F,EAA6FU,CAAC,CAAC,KAAKuC,GAAL,CAASE,QAAV,EAAmBvD,CAAC,CAACuD,QAArB,EAA8BvD,CAAC,CAACwD,UAAhC,CAA9F,EAA0I9C,CAAC,CAAC,KAAK2C,GAAL,CAASE,QAAV,EAAmB,KAAKF,GAAL,CAASE,QAA5B,EAAqCvD,CAAC,CAACsD,MAAvC,CAA3I;AAA0L,UAAMhD,CAAC,GAAC,KAAKqC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAU,KAAKK,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,CAArB,GAA0C,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,CAA/D,GAAoF,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,CAAnH,CAApB;AAA6J,WAAO,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,KAAsB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqBjD,CAA3C,EAA6C,KAAK+C,GAAL,CAASE,QAAT,CAAkB,CAAlB,KAAsB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqBjD,CAAxF,EAA0F,KAAK+C,GAAL,CAASE,QAAT,CAAkB,CAAlB,KAAsB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqBjD,CAArI,EAAuIH,CAAC,CAAC,KAAKkD,GAAL,CAASE,QAAV,EAAmB,KAAKF,GAAL,CAASE,QAA5B,EAAqCvD,CAAC,CAACsD,MAAvC,CAAxI,EAAuLjD,CAAC,CAACsD,CAAD,EAAG3D,CAAC,CAACwD,UAAL,CAAxL,EAAyM1C,CAAC,CAAC,KAAKuC,GAAL,CAASE,QAAV,EAAmB,KAAKF,GAAL,CAASE,QAA5B,EAAqCI,CAArC,CAA1M,EAAkP,KAAKN,GAAL,CAASE,QAAT,CAAkB,CAAlB,KAAsB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqB,CAArB,GAAuB,CAAC,CAAxB,GAA0B,CAAlS,EAAoS,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,KAAsB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqB,CAArB,GAAuB,CAAC,CAAxB,GAA0B,CAApV,EAAsV,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,KAAsB,KAAKF,GAAL,CAASE,QAAT,CAAkB,CAAlB,IAAqB,CAArB,GAAuB,CAAC,CAAxB,GAA0B,CAAtY,EAAwY,KAAKF,GAAL,CAASG,UAAT,GAAoBxD,CAAC,CAACwD,UAA9Z,EAAya,KAAKH,GAArb;AAAyb;;AAAhwD;;AAAiwD,MAAMxC,CAAN,CAAO;AAACO,EAAAA,WAAW,CAACpB,CAAC,GAAC,CAAH,EAAK;AAAC,SAAK2C,MAAL,GAAY3C,CAAZ,EAAc,KAAK4D,MAAL,GAAY1C,CAAC,EAA3B,EAA8B,KAAK0B,SAAL,GAAe5B,CAAC,EAA9C;AAAiD;;AAAA6B,EAAAA,aAAa,CAAC7C,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAME,CAAC,GAAC,KAAKuD,eAAL,CAAqB/B,SAA7B;AAAuC,QAAIvB,CAAC,GAACD,CAAC,CAAC,CAAD,CAAD,GAAKN,CAAL,GAAOM,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAZ,GAAcI,CAAC,CAAC,CAAD,CAAD,GAAKF,CAAnB,GAAqBE,CAAC,CAAC,EAAD,CAA5B;AAAA,QAAiCG,CAAC,GAACH,CAAC,CAAC,CAAD,CAAD,GAAKN,CAAL,GAAOM,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAZ,GAAcI,CAAC,CAAC,CAAD,CAAD,GAAKF,CAAnB,GAAqBE,CAAC,CAAC,EAAD,CAAzD;AAAA,QAA8DL,CAAC,GAACK,CAAC,CAAC,CAAD,CAAD,GAAKN,CAAL,GAAOM,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAZ,GAAcI,CAAC,CAAC,EAAD,CAAD,GAAMF,CAApB,GAAsBE,CAAC,CAAC,EAAD,CAAvF;AAA4F,UAAMK,CAAC,GAAC,KAAKgC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAUzC,CAAC,GAACA,CAAF,GAAIE,CAAC,GAACA,CAAN,GAAQR,CAAC,GAACA,CAApB,CAApB;AAA2CM,IAAAA,CAAC,IAAEA,CAAC,GAACI,CAAL,EAAOF,CAAC,IAAEA,CAAC,GAACE,CAAZ,EAAcV,CAAC,IAAEA,CAAC,GAACU,CAAnB;AAAqB,UAAMN,CAAC,GAAC,KAAKwD,eAAL,CAAqB9B,OAA7B;AAAqC,WAAO,KAAKa,SAAL,CAAe,CAAf,IAAkBvC,CAAC,CAAC,CAAD,CAAD,GAAKE,CAAL,GAAOF,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAZ,GAAcJ,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAnB,GAAqBI,CAAC,CAAC,EAAD,CAAxC,EAA6C,KAAKuC,SAAL,CAAe,CAAf,IAAkBvC,CAAC,CAAC,CAAD,CAAD,GAAKE,CAAL,GAAOF,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAZ,GAAcJ,CAAC,CAAC,CAAD,CAAD,GAAKJ,CAAnB,GAAqBI,CAAC,CAAC,EAAD,CAArF,EAA0F,KAAKuC,SAAL,CAAe,CAAf,IAAkBvC,CAAC,CAAC,CAAD,CAAD,GAAKE,CAAL,GAAOF,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAZ,GAAcJ,CAAC,CAAC,EAAD,CAAD,GAAMJ,CAApB,GAAsBI,CAAC,CAAC,EAAD,CAAnI,EAAwI,KAAKuC,SAApJ;AAA8J;;AAAAkB,EAAAA,aAAa,CAAC9D,CAAD,EAAGE,CAAH,EAAK;AAAC,UAAME,CAAC,GAAC,KAAKuC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAUhD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAApB;AAA6DA,IAAAA,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAX,EAAaJ,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAxB,EAA0BJ,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAArC;AAAuC,UAAME,CAAC,GAAC,KAAKqC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAU9C,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAApB;AAA6DA,IAAAA,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAX,EAAaJ,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAxB,EAA0BJ,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAArC;AAAuC;;AAAA2C,EAAAA,WAAW,CAACjD,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKyC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAUhD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAApB;AAA6DA,IAAAA,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKE,CAAX,EAAaF,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKE,CAAxB,EAA0BF,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKE,CAArC;AAAuC,UAAME,CAAC,GAAC,KAAKuC,MAAL,GAAYI,IAAI,CAACC,IAAL,CAAUhD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAApB;AAA6D,WAAOA,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAX,EAAaJ,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAxB,EAA0BJ,CAAC,CAAC,CAAD,CAAD,IAAMA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAArC,EAAuCJ,CAA9C;AAAgD;;AAAA+D,EAAAA,qBAAqB,CAAC/D,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC6C,IAAI,CAACC,IAAL,CAAUhD,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAAR;AAAA,UAAiDI,CAAC,GAAC,KAAKuC,MAAL,GAAYzC,CAA/D;AAAiE,WAAO,KAAK0D,MAAL,CAAY,CAAZ,IAAe5D,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAAzB,EAA2B,KAAKwD,MAAL,CAAY,CAAZ,IAAe5D,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAApD,EAAsD,KAAKwD,MAAL,CAAY,CAAZ,IAAe5D,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKI,CAA/E,EAAiF,KAAKwD,MAAL,CAAY,CAAZ,IAAe5D,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK2C,MAAV,GAAiBzC,CAAtH,EAAwH,KAAK0D,MAApI;AAA2I;;AAA9nC;;AAA+nC,MAAMI,CAAC,GAAC,IAAInD,CAAJ,EAAR;;AAAc,SAASoD,CAAT,CAAW/D,CAAX,EAAa;AAAC,SAAOF,CAAC,CAACE,CAAD,CAAD,IAAM8D,CAAC,CAACrB,MAAF,GAASzC,CAAT,EAAW8D,CAAjB,IAAoB,IAA3B;AAAgC;;AAAA,MAAME,CAAC,GAAC,IAAIhB,CAAJ,EAAR;;AAAc,SAASiB,CAAT,CAAWjE,CAAX,EAAa;AAAC,SAAOF,CAAC,CAACE,CAAD,CAAD,IAAMgE,CAAC,CAACvB,MAAF,GAASzC,CAAT,EAAWgE,CAAjB,IAAoB,IAA3B;AAAgC;;AAAA,MAAM1D,CAAC,GAAC,IAAIkC,CAAJ,EAAR;;AAAc,SAAS0B,CAAT,CAAWlE,CAAX,EAAa;AAAC,SAAOF,CAAC,CAACE,CAAD,CAAD,IAAMM,CAAC,CAACmC,MAAF,GAASzC,CAAT,EAAWM,CAAjB,IAAoB,IAA3B;AAAgC;;AAAA,MAAM6D,CAAC,GAAC,SAAR;AAAA,MAAkBV,CAAC,GAAC/C,CAAC,EAArB;AAAwB,SAAOsC,CAAC,IAAIoB,kCAAZ,EAA+CnD,CAAC,IAAIoD,oBAApD,EAAyE1D,CAAC,IAAI2D,uCAA9E,EAAsHH,CAAC,IAAII,UAA3H,EAAsI/B,CAAC,IAAIgC,sCAA3I,EAAkLP,CAAC,IAAIQ,oBAAvL,EAA4MV,CAAC,IAAIW,yBAAjN,EAA2OR,CAAC,IAAIS,wBAAhP","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{n as s}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{a as r,e,d as o,m as n}from\"../../../../chunks/mat4.js\";import{c as h}from\"../../../../chunks/mat4f64.js\";import{c as a}from\"../../../../chunks/quat.js\";import{a as f}from\"../../../../chunks/quatf64.js\";import{q as l,b as m,f as c}from\"../../../../chunks/vec3.js\";import{c as b}from\"../../../../chunks/vec3f32.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{c as u}from\"../../../../chunks/vec4f64.js\";import{c as v}from\"../../../../chunks/sphere.js\";class z{constructor(){this._transform=h(),this._transformInverse=new g({value:this._transform},r,h),this._transformInverseTranspose=new g(this._transformInverse,e,h),this._transformTranspose=new g({value:this._transform},e,h),this._transformInverseRotation=new g({value:this._transform},s,i)}invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){o(this._transform,t)}multiplyTransform(t){n(this._transform,this._transform,t)}set(t){o(this._transform,t),this.invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,s){this.setTransformMatrix(t),this.multiplyTransform(s),this.invalidateLazyTransforms()}}class g{constructor(t,s,i){this.original=t,this.update=s,this.dirty=!0,this.transform=i()}invalidate(){this.dirty=!0}get value(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}class S{constructor(t=0){this.offset=t,this.tmpVertex=p()}applyToVertex(t,s,i){const r=t+this.localOrigin[0],e=s+this.localOrigin[1],o=i+this.localOrigin[2],n=this.offset/Math.sqrt(r*r+e*e+o*o);return this.tmpVertex[0]=t+r*n,this.tmpVertex[1]=s+e*n,this.tmpVertex[2]=i+o*n,this.tmpVertex}applyToAabb(t){const s=t[0]+this.localOrigin[0],i=t[1]+this.localOrigin[1],r=t[2]+this.localOrigin[2],e=t[3]+this.localOrigin[0],o=t[4]+this.localOrigin[1],n=t[5]+this.localOrigin[2],h=this.offset/Math.sqrt(s*s+i*i+r*r);t[0]+=s*h,t[1]+=i*h,t[2]+=r*h;const a=this.offset/Math.sqrt(e*e+o*o+n*n);return t[3]+=e*a,t[4]+=o*a,t[5]+=n*a,t}}class T{constructor(t=0){this.offset=t,this.componentLocalOriginLength=0,this.tmpVertex=p(),this.mbs=u(),this.obb={center:p(),halfSize:b(),quaternion:null}}set localOrigin(t){this.componentLocalOriginLength=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}applyToVertex(t,s,i){const r=t,e=s,o=i+this.componentLocalOriginLength,n=this.offset/Math.sqrt(r*r+e*e+o*o);return this.tmpVertex[0]=t+r*n,this.tmpVertex[1]=s+e*n,this.tmpVertex[2]=i+o*n,this.tmpVertex}applyToAabb(t){const s=t[0],i=t[1],r=t[2]+this.componentLocalOriginLength,e=t[3],o=t[4],n=t[5]+this.componentLocalOriginLength,h=this.offset/Math.sqrt(s*s+i*i+r*r);t[0]+=s*h,t[1]+=i*h,t[2]+=r*h;const a=this.offset/Math.sqrt(e*e+o*o+n*n);return t[3]+=e*a,t[4]+=o*a,t[5]+=n*a,t}applyToMbs(t){const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/s;return this.mbs[0]=t[0]+t[0]*i,this.mbs[1]=t[1]+t[1]*i,this.mbs[2]=t[2]+t[2]*i,this.mbs[3]=t[3]+t[3]*this.offset/s,this.mbs}applyToObb(t){const s=t.center,i=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);this.obb.center[0]=s[0]+s[0]*i,this.obb.center[1]=s[1]+s[1]*i,this.obb.center[2]=s[2]+s[2]*i,l(this.obb.halfSize,t.halfSize,t.quaternion),m(this.obb.halfSize,this.obb.halfSize,t.center);const r=this.offset/Math.sqrt(this.obb.halfSize[0]*this.obb.halfSize[0]+this.obb.halfSize[1]*this.obb.halfSize[1]+this.obb.halfSize[2]*this.obb.halfSize[2]);return this.obb.halfSize[0]+=this.obb.halfSize[0]*r,this.obb.halfSize[1]+=this.obb.halfSize[1]*r,this.obb.halfSize[2]+=this.obb.halfSize[2]*r,c(this.obb.halfSize,this.obb.halfSize,t.center),a(j,t.quaternion),l(this.obb.halfSize,this.obb.halfSize,j),this.obb.halfSize[0]*=this.obb.halfSize[0]<0?-1:1,this.obb.halfSize[1]*=this.obb.halfSize[1]<0?-1:1,this.obb.halfSize[2]*=this.obb.halfSize[2]<0?-1:1,this.obb.quaternion=t.quaternion,this.obb}}class q{constructor(t=0){this.offset=t,this.sphere=v(),this.tmpVertex=p()}applyToVertex(t,s,i){const r=this.objectTransform.transform;let e=r[0]*t+r[4]*s+r[8]*i+r[12],o=r[1]*t+r[5]*s+r[9]*i+r[13],n=r[2]*t+r[6]*s+r[10]*i+r[14];const h=this.offset/Math.sqrt(e*e+o*o+n*n);e+=e*h,o+=o*h,n+=n*h;const a=this.objectTransform.inverse;return this.tmpVertex[0]=a[0]*e+a[4]*o+a[8]*n+a[12],this.tmpVertex[1]=a[1]*e+a[5]*o+a[9]*n+a[13],this.tmpVertex[2]=a[2]*e+a[6]*o+a[10]*n+a[14],this.tmpVertex}applyToMinMax(t,s){const i=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*i,t[1]+=t[1]*i,t[2]+=t[2]*i;const r=this.offset/Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]+=s[0]*r,s[1]+=s[1]*r,s[2]+=s[2]*r}applyToAabb(t){const s=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*s,t[1]+=t[1]*s,t[2]+=t[2]*s;const i=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*i,t[4]+=t[4]*i,t[5]+=t[5]*i,t}applyToBoundingSphere(t){const s=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/s;return this.sphere[0]=t[0]+t[0]*i,this.sphere[1]=t[1]+t[1]*i,this.sphere[2]=t[2]+t[2]*i,this.sphere[3]=t[3]+t[3]*this.offset/s,this.sphere}}const x=new q;function _(s){return t(s)?(x.offset=s,x):null}const y=new T;function M(s){return t(s)?(y.offset=s,y):null}const d=new S;function V(s){return t(s)?(d.offset=s,d):null}const O=\"terrain\",j=f();export{T as I3SVerticalOffsetGlobalViewingMode,z as IntersectorTransform,q as Object3DVerticalOffsetGlobalViewingMode,O as TERRAIN_ID,S as TerrainVerticalOffsetGlobalViewingMode,M as getVerticalOffsetI3S,_ as getVerticalOffsetObject3D,V as getVerticalOffsetTerrain};\n"]},"metadata":{},"sourceType":"module"}