{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { bytesToUTF8 as e } from \"./byteStreamUtils.js\";\n\nfunction t(e) {\n  const t = e.fields,\n        r = e.records,\n        n = t.some(e => \"oid\" === e.name.toLowerCase()) ? \"OBJECTID\" : \"OID\",\n        i = [{\n    name: n,\n    type: \"esriFieldTypeOID\",\n    alias: \"OID\"\n  }].concat(t.map(e => ({\n    name: e.name,\n    type: \"esriFieldType\" + e.typeName,\n    alias: e.name\n  }))),\n        s = i.map(e => e.name),\n        a = [];\n  let o = 0,\n      l = 0;\n  return r.forEach(e => {\n    const t = {};\n\n    for (t[n] = o++, l = 1; l < s.length; l++) t[s[l]] = e[l - 1];\n\n    a.push({\n      attributes: t\n    });\n  }), {\n    displayFieldName: \"\",\n    fields: i,\n    features: a\n  };\n}\n\nclass r {\n  static get supportedVersions() {\n    return [5];\n  }\n\n  static parse(r) {\n    const n = new DataView(r),\n          i = 3 & n.getUint8(0);\n    if (3 !== i) return {\n      header: {\n        version: i\n      },\n      recordSet: null\n    };\n    const s = n.getUint32(4, !0),\n          a = n.getUint16(8, !0),\n          o = n.getUint16(10, !0),\n          l = {\n      version: i,\n      recordCount: s,\n      headerByteCount: a,\n      recordByteCount: o\n    };\n    let p = 32;\n    const g = [],\n          u = [];\n    let d;\n\n    if (3 === i) {\n      for (; 13 !== n.getUint8(p);) d = String.fromCharCode(n.getUint8(p + 11)).trim(), g.push({\n        name: e(new Uint8Array(r, p, 11)),\n        type: d,\n        typeName: [\"String\", \"Date\", \"Double\", \"Boolean\", \"String\", \"Integer\"][[\"C\", \"D\", \"F\", \"L\", \"M\", \"N\"].indexOf(d)],\n        length: n.getUint8(p + 16)\n      }), p += 32;\n\n      if (p += 1, g.length > 0) for (; u.length < s && r.byteLength - p > o;) {\n        const t = [];\n        32 === n.getUint8(p) ? (p += 1, g.forEach(n => {\n          if (\"C\" === n.type) t.push(e(new Uint8Array(r, p, n.length)).trim());else if (\"N\" === n.type) t.push(parseInt(String.fromCharCode.apply(null, new Uint8Array(r, p, n.length)).trim(), 10));else if (\"F\" === n.type) t.push(parseFloat(String.fromCharCode.apply(null, new Uint8Array(r, p, n.length)).trim()));else if (\"D\" === n.type) {\n            const e = String.fromCharCode.apply(null, new Uint8Array(r, p, n.length)).trim();\n            t.push(new Date(parseInt(e.substring(0, 4), 10), parseInt(e.substring(4, 6), 10) - 1, parseInt(e.substring(6, 8), 10)));\n          }\n          p += n.length;\n        }), u.push(t)) : p += o;\n      }\n    }\n\n    return {\n      header: l,\n      fields: g,\n      records: u,\n      recordSet: t({\n        fields: g,\n        records: u\n      })\n    };\n  }\n\n}\n\nexport default r;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/layers/support/rasterDatasets/DBFParser.js"],"names":["bytesToUTF8","e","t","fields","r","records","n","some","name","toLowerCase","i","type","alias","concat","map","typeName","s","a","o","l","forEach","length","push","attributes","displayFieldName","features","supportedVersions","parse","DataView","getUint8","header","version","recordSet","getUint32","getUint16","recordCount","headerByteCount","recordByteCount","p","g","u","d","String","fromCharCode","trim","Uint8Array","indexOf","byteLength","parseInt","apply","parseFloat","Date","substring"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{bytesToUTF8 as e}from\"./byteStreamUtils.js\";function t(e){const t=e.fields,r=e.records,n=t.some((e=>\"oid\"===e.name.toLowerCase()))?\"OBJECTID\":\"OID\",i=[{name:n,type:\"esriFieldTypeOID\",alias:\"OID\"}].concat(t.map((e=>({name:e.name,type:\"esriFieldType\"+e.typeName,alias:e.name})))),s=i.map((e=>e.name)),a=[];let o=0,l=0;return r.forEach((e=>{const t={};for(t[n]=o++,l=1;l<s.length;l++)t[s[l]]=e[l-1];a.push({attributes:t})})),{displayFieldName:\"\",fields:i,features:a}}class r{static get supportedVersions(){return[5]}static parse(r){const n=new DataView(r),i=3&n.getUint8(0);if(3!==i)return{header:{version:i},recordSet:null};const s=n.getUint32(4,!0),a=n.getUint16(8,!0),o=n.getUint16(10,!0),l={version:i,recordCount:s,headerByteCount:a,recordByteCount:o};let p=32;const g=[],u=[];let d;if(3===i){for(;13!==n.getUint8(p);)d=String.fromCharCode(n.getUint8(p+11)).trim(),g.push({name:e(new Uint8Array(r,p,11)),type:d,typeName:[\"String\",\"Date\",\"Double\",\"Boolean\",\"String\",\"Integer\"][[\"C\",\"D\",\"F\",\"L\",\"M\",\"N\"].indexOf(d)],length:n.getUint8(p+16)}),p+=32;if(p+=1,g.length>0)for(;u.length<s&&r.byteLength-p>o;){const t=[];32===n.getUint8(p)?(p+=1,g.forEach((n=>{if(\"C\"===n.type)t.push(e(new Uint8Array(r,p,n.length)).trim());else if(\"N\"===n.type)t.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(r,p,n.length)).trim(),10));else if(\"F\"===n.type)t.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(r,p,n.length)).trim()));else if(\"D\"===n.type){const e=String.fromCharCode.apply(null,new Uint8Array(r,p,n.length)).trim();t.push(new Date(parseInt(e.substring(0,4),10),parseInt(e.substring(4,6),10)-1,parseInt(e.substring(6,8),10)))}p+=n.length})),u.push(t)):p+=o}}return{header:l,fields:g,records:u,recordSet:t({fields:g,records:u})}}}export default r;\n"]},"metadata":{},"sourceType":"module"}