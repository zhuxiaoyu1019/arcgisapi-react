{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Error.js\";\nimport { property as r } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as s } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport i from \"../../../geometry/Extent.js\";\nimport o from \"./DynamicLayerView3D.js\";\nimport { WMSLayerView as a } from \"../../layers/WMSLayerView.js\";\nlet p = class extends a(o) {\n  constructor() {\n    super(...arguments), this.type = \"wms-3d\";\n  }\n\n  initialize() {\n    this.layer.supportsSpatialReference(this.view.spatialReference) || this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\", \"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\"))), this.updatingHandles.add(this.exportImageParameters, \"version\", () => {\n      this.updatingHandles.addPromise(this.refreshDebounced());\n    });\n  }\n\n  createFetchPopupFeaturesQuery(e) {\n    const t = this.findExtentInfoAt(e),\n          r = t.extent,\n          s = new i(r[0], r[1], r[2], r[3], t.spatialReference),\n          o = t.imageSize,\n          a = o.width,\n          p = o.height,\n          n = s.width / a;\n    return {\n      extent: s,\n      width: a,\n      height: p,\n      x: Math.round((e.x - s.xmin) / n),\n      y: Math.round((s.ymax - e.y) / n)\n    };\n  }\n\n  getFetchOptions() {\n    return {\n      timeExtent: this.timeExtent\n    };\n  }\n\n};\ne([r()], p.prototype, \"suspended\", void 0), p = e([s(\"esri.views.3d.layers.WMSLayerView3D\")], p);\nvar n = p;\nexport default n;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/WMSLayerView3D.js"],"names":["_","e","t","property","r","subclass","s","i","o","WMSLayerView","a","p","constructor","arguments","type","initialize","layer","supportsSpatialReference","view","spatialReference","addResolvingPromise","Promise","reject","updatingHandles","add","exportImageParameters","addPromise","refreshDebounced","createFetchPopupFeaturesQuery","findExtentInfoAt","extent","imageSize","width","height","n","x","Math","round","xmin","y","ymax","getFetchOptions","timeExtent","prototype"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAOC,CAAP,MAAa,wBAAb;AAAsC,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,sBAAN;AAA6B,OAAM,6CAAN;AAAoD,OAAM,yBAAN;AAAgC,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAOC,CAAP,MAAa,6BAAb;AAA2C,OAAOC,CAAP,MAAa,yBAAb;AAAuC,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,8BAA7B;AAA4D,IAAIC,CAAC,GAAC,cAAcD,CAAC,CAACF,CAAD,CAAf,CAAmB;AAACI,EAAAA,WAAW,GAAE;AAAC,UAAM,GAAGC,SAAT,GAAoB,KAAKC,IAAL,GAAU,QAA9B;AAAuC;;AAAAC,EAAAA,UAAU,GAAE;AAAC,SAAKC,KAAL,CAAWC,wBAAX,CAAoC,KAAKC,IAAL,CAAUC,gBAA9C,KAAiE,KAAKC,mBAAL,CAAyBC,OAAO,CAACC,MAAR,CAAe,IAAIpB,CAAJ,CAAM,0CAAN,EAAiD,4GAAjD,CAAf,CAAzB,CAAjE,EAA0Q,KAAKqB,eAAL,CAAqBC,GAArB,CAAyB,KAAKC,qBAA9B,EAAoD,SAApD,EAA+D,MAAI;AAAC,WAAKF,eAAL,CAAqBG,UAArB,CAAgC,KAAKC,gBAAL,EAAhC;AAAyD,KAA7H,CAA1Q;AAA0Y;;AAAAC,EAAAA,6BAA6B,CAAC3B,CAAD,EAAG;AAAC,UAAMC,CAAC,GAAC,KAAK2B,gBAAL,CAAsB5B,CAAtB,CAAR;AAAA,UAAiCG,CAAC,GAACF,CAAC,CAAC4B,MAArC;AAAA,UAA4CxB,CAAC,GAAC,IAAIC,CAAJ,CAAMH,CAAC,CAAC,CAAD,CAAP,EAAWA,CAAC,CAAC,CAAD,CAAZ,EAAgBA,CAAC,CAAC,CAAD,CAAjB,EAAqBA,CAAC,CAAC,CAAD,CAAtB,EAA0BF,CAAC,CAACiB,gBAA5B,CAA9C;AAAA,UAA4FX,CAAC,GAACN,CAAC,CAAC6B,SAAhG;AAAA,UAA0GrB,CAAC,GAACF,CAAC,CAACwB,KAA9G;AAAA,UAAoHrB,CAAC,GAACH,CAAC,CAACyB,MAAxH;AAAA,UAA+HC,CAAC,GAAC5B,CAAC,CAAC0B,KAAF,GAAQtB,CAAzI;AAA2I,WAAM;AAACoB,MAAAA,MAAM,EAACxB,CAAR;AAAU0B,MAAAA,KAAK,EAACtB,CAAhB;AAAkBuB,MAAAA,MAAM,EAACtB,CAAzB;AAA2BwB,MAAAA,CAAC,EAACC,IAAI,CAACC,KAAL,CAAW,CAACpC,CAAC,CAACkC,CAAF,GAAI7B,CAAC,CAACgC,IAAP,IAAaJ,CAAxB,CAA7B;AAAwDK,MAAAA,CAAC,EAACH,IAAI,CAACC,KAAL,CAAW,CAAC/B,CAAC,CAACkC,IAAF,GAAOvC,CAAC,CAACsC,CAAV,IAAaL,CAAxB;AAA1D,KAAN;AAA4F;;AAAAO,EAAAA,eAAe,GAAE;AAAC,WAAM;AAACC,MAAAA,UAAU,EAAC,KAAKA;AAAjB,KAAN;AAAmC;;AAA1wB,CAAzB;AAAqyBzC,CAAC,CAAC,CAACG,CAAC,EAAF,CAAD,EAAOO,CAAC,CAACgC,SAAT,EAAmB,WAAnB,EAA+B,KAAK,CAApC,CAAD,EAAwChC,CAAC,GAACV,CAAC,CAAC,CAACK,CAAC,CAAC,qCAAD,CAAF,CAAD,EAA4CK,CAA5C,CAA3C;AAA0F,IAAIuB,CAAC,GAACvB,CAAN;AAAQ,eAAeuB,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../geometry/Extent.js\";import o from\"./DynamicLayerView3D.js\";import{WMSLayerView as a}from\"../../layers/WMSLayerView.js\";let p=class extends(a(o)){constructor(){super(...arguments),this.type=\"wms-3d\"}initialize(){this.layer.supportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new t(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\"))),this.updatingHandles.add(this.exportImageParameters,\"version\",(()=>{this.updatingHandles.addPromise(this.refreshDebounced())}))}createFetchPopupFeaturesQuery(e){const t=this.findExtentInfoAt(e),r=t.extent,s=new i(r[0],r[1],r[2],r[3],t.spatialReference),o=t.imageSize,a=o.width,p=o.height,n=s.width/a;return{extent:s,width:a,height:p,x:Math.round((e.x-s.xmin)/n),y:Math.round((s.ymax-e.y)/n)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};e([r()],p.prototype,\"suspended\",void 0),p=e([s(\"esri.views.3d.layers.WMSLayerView3D\")],p);var n=p;export default n;\n"]},"metadata":{},"sourceType":"module"}