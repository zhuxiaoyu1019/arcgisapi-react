{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { f as e } from \"../../../../../../chunks/vec3f32.js\";\nimport { VertexTextureCoordinates as s } from \"../attributes/VertexTextureCoordinates.glsl.js\";\nimport { glsl as o } from \"../../shaderModules/interfaces.js\";\nconst t = e(0, .6, .2);\n\nfunction r(e, t) {\n  const r = e.fragment,\n        a = t.hasMetalnessAndRoughnessTexture || t.hasEmissionTexture || t.hasOcclusionTexture;\n  1 === t.pbrMode && a && e.include(s, t), 2 !== t.pbrMode ? (0 === t.pbrMode && r.code.add(o`float getBakedOcclusion() { return 1.0; }`), 1 === t.pbrMode && (r.uniforms.add(\"emissionFactor\", \"vec3\"), r.uniforms.add(\"mrrFactors\", \"vec3\"), r.code.add(o`vec3 mrr;\nvec3 emission;\nfloat occlusion;`), t.hasMetalnessAndRoughnessTexture && (r.uniforms.add(\"texMetallicRoughness\", \"sampler2D\"), t.supportsTextureAtlas && r.uniforms.add(\"texMetallicRoughnessSize\", \"vec2\"), r.code.add(o`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)), t.hasEmissionTexture && (r.uniforms.add(\"texEmission\", \"sampler2D\"), t.supportsTextureAtlas && r.uniforms.add(\"texEmissionSize\", \"vec2\"), r.code.add(o`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)), t.hasOcclusionTexture ? (r.uniforms.add(\"texOcclusion\", \"sampler2D\"), t.supportsTextureAtlas && r.uniforms.add(\"texOcclusionSize\", \"vec2\"), r.code.add(o`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)) : r.code.add(o`float getBakedOcclusion() { return 1.0; }`), r.code.add(o`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${a ? \"vtc.uv = vuv0;\" : \"\"}\n      ${t.hasMetalnessAndRoughnessTexture ? t.supportsTextureAtlas ? \"vtc.size = texMetallicRoughnessSize; applyMetallnessAndRoughness(vtc);\" : \"applyMetallnessAndRoughness(vtc);\" : \"\"}\n      ${t.hasEmissionTexture ? t.supportsTextureAtlas ? \"vtc.size = texEmissionSize; applyEmission(vtc);\" : \"applyEmission(vtc);\" : \"\"}\n      ${t.hasOcclusionTexture ? t.supportsTextureAtlas ? \"vtc.size = texOcclusionSize; applyOcclusion(vtc);\" : \"applyOcclusion(vtc);\" : \"\"}\n    }\n  `))) : r.code.add(o`const vec3 mrr = vec3(0.0, 0.6, 0.2);\nconst vec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`);\n}\n\nfunction a(e, s, o = !1) {\n  o || (e.setUniform3fv(\"mrrFactors\", s.mrrFactors), e.setUniform3fv(\"emissionFactor\", s.emissiveFactor));\n}\n\nexport { t as PBRSchematicMRRValues, r as PhysicallyBasedRenderingParameters, a as bindPBRUniforms };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js"],"names":["f","e","VertexTextureCoordinates","s","glsl","o","t","r","fragment","a","hasMetalnessAndRoughnessTexture","hasEmissionTexture","hasOcclusionTexture","pbrMode","include","code","add","uniforms","supportsTextureAtlas","setUniform3fv","mrrFactors","emissiveFactor","PBRSchematicMRRValues","PhysicallyBasedRenderingParameters","bindPBRUniforms"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec3f32.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";const t=e(0,.6,.2);function r(e,t){const r=e.fragment,a=t.hasMetalnessAndRoughnessTexture||t.hasEmissionTexture||t.hasOcclusionTexture;1===t.pbrMode&&a&&e.include(s,t),2!==t.pbrMode?(0===t.pbrMode&&r.code.add(o`float getBakedOcclusion() { return 1.0; }`),1===t.pbrMode&&(r.uniforms.add(\"emissionFactor\",\"vec3\"),r.uniforms.add(\"mrrFactors\",\"vec3\"),r.code.add(o`vec3 mrr;\nvec3 emission;\nfloat occlusion;`),t.hasMetalnessAndRoughnessTexture&&(r.uniforms.add(\"texMetallicRoughness\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texMetallicRoughnessSize\",\"vec2\"),r.code.add(o`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),t.hasEmissionTexture&&(r.uniforms.add(\"texEmission\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texEmissionSize\",\"vec2\"),r.code.add(o`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)),t.hasOcclusionTexture?(r.uniforms.add(\"texOcclusion\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texOcclusionSize\",\"vec2\"),r.code.add(o`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):r.code.add(o`float getBakedOcclusion() { return 1.0; }`),r.code.add(o`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${a?\"vtc.uv = vuv0;\":\"\"}\n      ${t.hasMetalnessAndRoughnessTexture?t.supportsTextureAtlas?\"vtc.size = texMetallicRoughnessSize; applyMetallnessAndRoughness(vtc);\":\"applyMetallnessAndRoughness(vtc);\":\"\"}\n      ${t.hasEmissionTexture?t.supportsTextureAtlas?\"vtc.size = texEmissionSize; applyEmission(vtc);\":\"applyEmission(vtc);\":\"\"}\n      ${t.hasOcclusionTexture?t.supportsTextureAtlas?\"vtc.size = texOcclusionSize; applyOcclusion(vtc);\":\"applyOcclusion(vtc);\":\"\"}\n    }\n  `))):r.code.add(o`const vec3 mrr = vec3(0.0, 0.6, 0.2);\nconst vec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}function a(e,s,o=!1){o||(e.setUniform3fv(\"mrrFactors\",s.mrrFactors),e.setUniform3fv(\"emissionFactor\",s.emissiveFactor))}export{t as PBRSchematicMRRValues,r as PhysicallyBasedRenderingParameters,a as bindPBRUniforms};\n"]},"metadata":{},"sourceType":"module"}