{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport s from \"../../../core/Handles.js\";\nimport { init as r } from \"../../../core/watchUtils.js\";\nimport { property as n } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as i } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { fromExtent as a, empty as l, expand as o, allFinite as c, equals as p } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { canProject as d, project as h } from \"../../../geometry/support/webMercatorUtils.js\";\nimport { isTiledLayer as u } from \"../../../layers/support/layerUtils.js\";\nimport { WEBMERCATOR_WORLD_EXTENT as y, GEOGRAPHIC_WORLD_EXTENT as f } from \"./TerrainConst.js\";\nimport { getTiledLayerInfo as m, isProjectableRasterLayer as E } from \"./terrainUtils.js\";\nlet x = class extends t {\n  constructor(e) {\n    super(e), this._handles = new s();\n  }\n\n  initialize() {\n    this._handles.add([this.layerViews.on(\"change\", () => this.notifyChange(\"stencilEnabledExtents\"))]);\n  }\n\n  destroy() {\n    this._handles.destroy(), this._handles = null;\n  }\n\n  get layerViewsExtent() {\n    return this._computeLayerViewsExtent();\n  }\n\n  get tiledLayersExtent() {\n    return this._computeTiledLayersExtent();\n  }\n\n  get stencilEnabledExtents() {\n    return this._computeStencilEnabledExtents();\n  }\n\n  set spatialReference(e) {\n    this.tilingScheme || this._set(\"spatialReference\", e);\n  }\n\n  set tilingScheme(e) {\n    this._set(\"tilingScheme\", e), this._set(\"spatialReference\", e.spatialReference);\n  }\n\n  _computeStencilEnabledExtents() {\n    const e = [];\n    return this.layerViews.forEach(t => {\n      const s = t.layer;\n\n      if (\"IntegratedMeshLayer\" === s.operationalLayerType && null != this.spatialReference) {\n        const t = L(s.fullExtent, this.spatialReference);\n        null != t && e.push(a(t));\n      }\n    }), e;\n  }\n\n};\n\nfunction g(e, t) {\n  return 1 === e ? new _(t) : new w(t);\n}\n\ne([n({\n  readOnly: !0,\n  dependsOn: []\n})], x.prototype, \"layerViewsExtent\", null), e([n({\n  readOnly: !0,\n  dependsOn: [\"spatialReference\", \"tilingScheme\"]\n})], x.prototype, \"tiledLayersExtent\", null), e([n({\n  readOnly: !0,\n  dependsOn: [\"spatialReference\"]\n})], x.prototype, \"stencilEnabledExtents\", null), e([n()], x.prototype, \"spatialReference\", null), e([n()], x.prototype, \"tilingScheme\", null), e([n()], x.prototype, \"defaultTiledLayersExtent\", void 0), e([n({\n  constructOnly: !0\n})], x.prototype, \"layers\", void 0), e([n({\n  constructOnly: !0\n})], x.prototype, \"layerViews\", void 0), x = e([i(\"esri.views.3d.terrain.SurfaceExtentHelperBase\")], x);\n\nlet _ = class extends x {\n  _computeLayerViewsExtent() {\n    return this._getGlobalExtent();\n  }\n\n  _computeTiledLayersExtent() {\n    return this._getGlobalExtent();\n  }\n\n  _getGlobalExtent() {\n    return this.spatialReference.isWebMercator ? y : f;\n  }\n\n};\n\ne([n({\n  dependsOn: [\"spatialReference\"]\n})], _.prototype, \"layerViewsExtent\", void 0), _ = e([i(\"esri.views.3d.terrain.SurfaceExtentHelperGlobal\")], _);\nlet w = class extends x {\n  initialize() {\n    this._handles.add([this.layers.on(\"change\", e => this._handleLayersChanged(e)), this.layerViews.on(\"change\", () => this.notifyChange(\"layerViewsExtent\"))]);\n  }\n\n  _handleLayersChanged(e) {\n    for (const t of e.removed) this._handles.remove(t.uid);\n\n    for (const t of e.added) this._handles.add(r(t, \"loaded\", () => this.notifyChange(\"tiledLayersExtent\")), t.uid);\n  }\n\n  _computeLayerViewsExtent() {\n    const e = l(),\n          t = this.spatialReference;\n    this.layerViews.forEach(s => {\n      const r = s.layer;\n\n      if (s.isResolved() && (\"graphics\" !== r.type || !r.internal)) {\n        const r = L(\"fullExtentInLocalViewSpatialReference\" in s && s.fullExtentInLocalViewSpatialReference || s.layer.fullExtent, t);\n        r && o(e, r);\n      }\n    });\n\n    const s = c(e) ? e : null,\n          r = this._get(\"layerViewsExtent\");\n\n    return p(s, r) ? r : s;\n  }\n\n  _computeTiledLayersExtent() {\n    const e = this.tilingScheme;\n    if (!e) return null;\n    const t = this.spatialReference,\n          s = l();\n    this.layers.forEach(function (r) {\n      if (r.loaded && u(r)) {\n        const {\n          tileInfo: n,\n          fullExtent: i\n        } = m(r, t, 2);\n        (n && E(r) && i || n && e.compatibleWith(n) && i && i.spatialReference.equals(t)) && o(s, i);\n      }\n    }), this.defaultTiledLayersExtent && o(s, this.defaultTiledLayersExtent);\n\n    const r = c(s) ? s : null,\n          n = this._get(\"tiledLayersExtent\");\n\n    return p(r, n) ? n : r;\n  }\n\n};\n\nfunction L(e, t) {\n  return e && !e.spatialReference.equals(t) && (e = d(e.spatialReference, t) ? h(e, t) : null), e;\n}\n\nw = e([i(\"esri.views.3d.terrain.SurfaceExtentHelperLocal\")], w);\nexport { x as SurfaceExtentHelper, g as create };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/terrain/SurfaceExtentHelper.js"],"names":["_","e","t","s","init","r","property","n","subclass","i","fromExtent","a","empty","l","expand","o","allFinite","c","equals","p","canProject","d","project","h","isTiledLayer","u","WEBMERCATOR_WORLD_EXTENT","y","GEOGRAPHIC_WORLD_EXTENT","f","getTiledLayerInfo","m","isProjectableRasterLayer","E","x","constructor","_handles","initialize","add","layerViews","on","notifyChange","destroy","layerViewsExtent","_computeLayerViewsExtent","tiledLayersExtent","_computeTiledLayersExtent","stencilEnabledExtents","_computeStencilEnabledExtents","spatialReference","tilingScheme","_set","forEach","layer","operationalLayerType","L","fullExtent","push","g","w","readOnly","dependsOn","prototype","constructOnly","_getGlobalExtent","isWebMercator","layers","_handleLayersChanged","removed","remove","uid","added","isResolved","type","internal","fullExtentInLocalViewSpatialReference","_get","loaded","tileInfo","compatibleWith","defaultTiledLayersExtent","SurfaceExtentHelper","create"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,8BAAlB;AAAiD,OAAOC,CAAP,MAAa,2BAAb;AAAyC,OAAOC,CAAP,MAAa,0BAAb;AAAwC,SAAOC,IAAI,IAAIC,CAAf,QAAqB,6BAArB;AAAmD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,OAAM,sBAAN;AAA6B,OAAM,6CAAN;AAAoD,OAAM,yBAAN;AAAgC,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,sDAAzB;AAAgF,SAAOC,UAAU,IAAIC,CAArB,EAAuBC,KAAK,IAAIC,CAAhC,EAAkCC,MAAM,IAAIC,CAA5C,EAA8CC,SAAS,IAAIC,CAA3D,EAA6DC,MAAM,IAAIC,CAAvE,QAA6E,6CAA7E;AAA2H,SAAOC,UAAU,IAAIC,CAArB,EAAuBC,OAAO,IAAIC,CAAlC,QAAwC,+CAAxC;AAAwF,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,uCAA7B;AAAqE,SAAOC,wBAAwB,IAAIC,CAAnC,EAAqCC,uBAAuB,IAAIC,CAAhE,QAAsE,mBAAtE;AAA0F,SAAOC,iBAAiB,IAAIC,CAA5B,EAA8BC,wBAAwB,IAAIC,CAA1D,QAAgE,mBAAhE;AAAoF,IAAIC,CAAC,GAAC,cAAchC,CAAd,CAAe;AAACiC,EAAAA,WAAW,CAAClC,CAAD,EAAG;AAAC,UAAMA,CAAN,GAAS,KAAKmC,QAAL,GAAc,IAAIjC,CAAJ,EAAvB;AAA6B;;AAAAkC,EAAAA,UAAU,GAAE;AAAC,SAAKD,QAAL,CAAcE,GAAd,CAAkB,CAAC,KAAKC,UAAL,CAAgBC,EAAhB,CAAmB,QAAnB,EAA6B,MAAI,KAAKC,YAAL,CAAkB,uBAAlB,CAAjC,CAAD,CAAlB;AAAmG;;AAAAC,EAAAA,OAAO,GAAE;AAAC,SAAKN,QAAL,CAAcM,OAAd,IAAwB,KAAKN,QAAL,GAAc,IAAtC;AAA2C;;AAAoB,MAAhBO,gBAAgB,GAAE;AAAC,WAAO,KAAKC,wBAAL,EAAP;AAAuC;;AAAqB,MAAjBC,iBAAiB,GAAE;AAAC,WAAO,KAAKC,yBAAL,EAAP;AAAwC;;AAAyB,MAArBC,qBAAqB,GAAE;AAAC,WAAO,KAAKC,6BAAL,EAAP;AAA4C;;AAAoB,MAAhBC,gBAAgB,CAAChD,CAAD,EAAG;AAAC,SAAKiD,YAAL,IAAmB,KAAKC,IAAL,CAAU,kBAAV,EAA6BlD,CAA7B,CAAnB;AAAmD;;AAAgB,MAAZiD,YAAY,CAACjD,CAAD,EAAG;AAAC,SAAKkD,IAAL,CAAU,cAAV,EAAyBlD,CAAzB,GAA4B,KAAKkD,IAAL,CAAU,kBAAV,EAA6BlD,CAAC,CAACgD,gBAA/B,CAA5B;AAA6E;;AAAAD,EAAAA,6BAA6B,GAAE;AAAC,UAAM/C,CAAC,GAAC,EAAR;AAAW,WAAO,KAAKsC,UAAL,CAAgBa,OAAhB,CAAyBlD,CAAC,IAAE;AAAC,YAAMC,CAAC,GAACD,CAAC,CAACmD,KAAV;;AAAgB,UAAG,0BAAwBlD,CAAC,CAACmD,oBAA1B,IAAgD,QAAM,KAAKL,gBAA9D,EAA+E;AAAC,cAAM/C,CAAC,GAACqD,CAAC,CAACpD,CAAC,CAACqD,UAAH,EAAc,KAAKP,gBAAnB,CAAT;AAA8C,gBAAM/C,CAAN,IAASD,CAAC,CAACwD,IAAF,CAAO9C,CAAC,CAACT,CAAD,CAAR,CAAT;AAAsB;AAAC,KAAlM,GAAqMD,CAA5M;AAA8M;;AAA7zB,CAArB;;AAAo1B,SAASyD,CAAT,CAAWzD,CAAX,EAAaC,CAAb,EAAe;AAAC,SAAO,MAAID,CAAJ,GAAM,IAAID,CAAJ,CAAME,CAAN,CAAN,GAAe,IAAIyD,CAAJ,CAAMzD,CAAN,CAAtB;AAA+B;;AAAAD,CAAC,CAAC,CAACM,CAAC,CAAC;AAACqD,EAAAA,QAAQ,EAAC,CAAC,CAAX;AAAaC,EAAAA,SAAS,EAAC;AAAvB,CAAD,CAAF,CAAD,EAAiC3B,CAAC,CAAC4B,SAAnC,EAA6C,kBAA7C,EAAgE,IAAhE,CAAD,EAAuE7D,CAAC,CAAC,CAACM,CAAC,CAAC;AAACqD,EAAAA,QAAQ,EAAC,CAAC,CAAX;AAAaC,EAAAA,SAAS,EAAC,CAAC,kBAAD,EAAoB,cAApB;AAAvB,CAAD,CAAF,CAAD,EAAkE3B,CAAC,CAAC4B,SAApE,EAA8E,mBAA9E,EAAkG,IAAlG,CAAxE,EAAgL7D,CAAC,CAAC,CAACM,CAAC,CAAC;AAACqD,EAAAA,QAAQ,EAAC,CAAC,CAAX;AAAaC,EAAAA,SAAS,EAAC,CAAC,kBAAD;AAAvB,CAAD,CAAF,CAAD,EAAmD3B,CAAC,CAAC4B,SAArD,EAA+D,uBAA/D,EAAuF,IAAvF,CAAjL,EAA8Q7D,CAAC,CAAC,CAACM,CAAC,EAAF,CAAD,EAAO2B,CAAC,CAAC4B,SAAT,EAAmB,kBAAnB,EAAsC,IAAtC,CAA/Q,EAA2T7D,CAAC,CAAC,CAACM,CAAC,EAAF,CAAD,EAAO2B,CAAC,CAAC4B,SAAT,EAAmB,cAAnB,EAAkC,IAAlC,CAA5T,EAAoW7D,CAAC,CAAC,CAACM,CAAC,EAAF,CAAD,EAAO2B,CAAC,CAAC4B,SAAT,EAAmB,0BAAnB,EAA8C,KAAK,CAAnD,CAArW,EAA2Z7D,CAAC,CAAC,CAACM,CAAC,CAAC;AAACwD,EAAAA,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyB7B,CAAC,CAAC4B,SAA3B,EAAqC,QAArC,EAA8C,KAAK,CAAnD,CAA5Z,EAAkd7D,CAAC,CAAC,CAACM,CAAC,CAAC;AAACwD,EAAAA,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyB7B,CAAC,CAAC4B,SAA3B,EAAqC,YAArC,EAAkD,KAAK,CAAvD,CAAnd,EAA6gB5B,CAAC,GAACjC,CAAC,CAAC,CAACQ,CAAC,CAAC,+CAAD,CAAF,CAAD,EAAsDyB,CAAtD,CAAhhB;;AAAykB,IAAIlC,CAAC,GAAC,cAAckC,CAAd,CAAe;AAACU,EAAAA,wBAAwB,GAAE;AAAC,WAAO,KAAKoB,gBAAL,EAAP;AAA+B;;AAAAlB,EAAAA,yBAAyB,GAAE;AAAC,WAAO,KAAKkB,gBAAL,EAAP;AAA+B;;AAAAA,EAAAA,gBAAgB,GAAE;AAAC,WAAO,KAAKf,gBAAL,CAAsBgB,aAAtB,GAAoCtC,CAApC,GAAsCE,CAA7C;AAA+C;;AAAxL,CAArB;;AAA+M5B,CAAC,CAAC,CAACM,CAAC,CAAC;AAACsD,EAAAA,SAAS,EAAC,CAAC,kBAAD;AAAX,CAAD,CAAF,CAAD,EAAuC7D,CAAC,CAAC8D,SAAzC,EAAmD,kBAAnD,EAAsE,KAAK,CAA3E,CAAD,EAA+E9D,CAAC,GAACC,CAAC,CAAC,CAACQ,CAAC,CAAC,iDAAD,CAAF,CAAD,EAAwDT,CAAxD,CAAlF;AAA6I,IAAI2D,CAAC,GAAC,cAAczB,CAAd,CAAe;AAACG,EAAAA,UAAU,GAAE;AAAC,SAAKD,QAAL,CAAcE,GAAd,CAAkB,CAAC,KAAK4B,MAAL,CAAY1B,EAAZ,CAAe,QAAf,EAAyBvC,CAAC,IAAE,KAAKkE,oBAAL,CAA0BlE,CAA1B,CAA5B,CAAD,EAA4D,KAAKsC,UAAL,CAAgBC,EAAhB,CAAmB,QAAnB,EAA6B,MAAI,KAAKC,YAAL,CAAkB,kBAAlB,CAAjC,CAA5D,CAAlB;AAAyJ;;AAAA0B,EAAAA,oBAAoB,CAAClE,CAAD,EAAG;AAAC,SAAI,MAAMC,CAAV,IAAeD,CAAC,CAACmE,OAAjB,EAAyB,KAAKhC,QAAL,CAAciC,MAAd,CAAqBnE,CAAC,CAACoE,GAAvB;;AAA4B,SAAI,MAAMpE,CAAV,IAAeD,CAAC,CAACsE,KAAjB,EAAuB,KAAKnC,QAAL,CAAcE,GAAd,CAAkBjC,CAAC,CAACH,CAAD,EAAG,QAAH,EAAa,MAAI,KAAKuC,YAAL,CAAkB,mBAAlB,CAAjB,CAAnB,EAA6EvC,CAAC,CAACoE,GAA/E;AAAoF;;AAAA1B,EAAAA,wBAAwB,GAAE;AAAC,UAAM3C,CAAC,GAACY,CAAC,EAAT;AAAA,UAAYX,CAAC,GAAC,KAAK+C,gBAAnB;AAAoC,SAAKV,UAAL,CAAgBa,OAAhB,CAAyBjD,CAAC,IAAE;AAAC,YAAME,CAAC,GAACF,CAAC,CAACkD,KAAV;;AAAgB,UAAGlD,CAAC,CAACqE,UAAF,OAAiB,eAAanE,CAAC,CAACoE,IAAf,IAAqB,CAACpE,CAAC,CAACqE,QAAzC,CAAH,EAAsD;AAAC,cAAMrE,CAAC,GAACkD,CAAC,CAAC,2CAA0CpD,CAA1C,IAA6CA,CAAC,CAACwE,qCAA/C,IAAsFxE,CAAC,CAACkD,KAAF,CAAQG,UAA/F,EAA0GtD,CAA1G,CAAT;AAAsHG,QAAAA,CAAC,IAAEU,CAAC,CAACd,CAAD,EAAGI,CAAH,CAAJ;AAAU;AAAC,KAArO;;AAAwO,UAAMF,CAAC,GAACc,CAAC,CAAChB,CAAD,CAAD,GAAKA,CAAL,GAAO,IAAf;AAAA,UAAoBI,CAAC,GAAC,KAAKuE,IAAL,CAAU,kBAAV,CAAtB;;AAAoD,WAAOzD,CAAC,CAAChB,CAAD,EAAGE,CAAH,CAAD,GAAOA,CAAP,GAASF,CAAhB;AAAkB;;AAAA2C,EAAAA,yBAAyB,GAAE;AAAC,UAAM7C,CAAC,GAAC,KAAKiD,YAAb;AAA0B,QAAG,CAACjD,CAAJ,EAAM,OAAO,IAAP;AAAY,UAAMC,CAAC,GAAC,KAAK+C,gBAAb;AAAA,UAA8B9C,CAAC,GAACU,CAAC,EAAjC;AAAoC,SAAKqD,MAAL,CAAYd,OAAZ,CAAqB,UAAS/C,CAAT,EAAW;AAAC,UAAGA,CAAC,CAACwE,MAAF,IAAUpD,CAAC,CAACpB,CAAD,CAAd,EAAkB;AAAC,cAAK;AAACyE,UAAAA,QAAQ,EAACvE,CAAV;AAAYiD,UAAAA,UAAU,EAAC/C;AAAvB,YAA0BsB,CAAC,CAAC1B,CAAD,EAAGH,CAAH,EAAK,CAAL,CAAhC;AAAwC,SAACK,CAAC,IAAE0B,CAAC,CAAC5B,CAAD,CAAJ,IAASI,CAAT,IAAYF,CAAC,IAAEN,CAAC,CAAC8E,cAAF,CAAiBxE,CAAjB,CAAH,IAAwBE,CAAxB,IAA2BA,CAAC,CAACwC,gBAAF,CAAmB/B,MAAnB,CAA0BhB,CAA1B,CAAxC,KAAuEa,CAAC,CAACZ,CAAD,EAAGM,CAAH,CAAxE;AAA8E;AAAC,KAA3K,GAA8K,KAAKuE,wBAAL,IAA+BjE,CAAC,CAACZ,CAAD,EAAG,KAAK6E,wBAAR,CAA9M;;AAAgP,UAAM3E,CAAC,GAACY,CAAC,CAACd,CAAD,CAAD,GAAKA,CAAL,GAAO,IAAf;AAAA,UAAoBI,CAAC,GAAC,KAAKqE,IAAL,CAAU,mBAAV,CAAtB;;AAAqD,WAAOzD,CAAC,CAACd,CAAD,EAAGE,CAAH,CAAD,GAAOA,CAAP,GAASF,CAAhB;AAAkB;;AAA/mC,CAArB;;AAAsoC,SAASkD,CAAT,CAAWtD,CAAX,EAAaC,CAAb,EAAe;AAAC,SAAOD,CAAC,IAAE,CAACA,CAAC,CAACgD,gBAAF,CAAmB/B,MAAnB,CAA0BhB,CAA1B,CAAJ,KAAmCD,CAAC,GAACoB,CAAC,CAACpB,CAAC,CAACgD,gBAAH,EAAoB/C,CAApB,CAAD,GAAwBqB,CAAC,CAACtB,CAAD,EAAGC,CAAH,CAAzB,GAA+B,IAApE,GAA0ED,CAAjF;AAAmF;;AAAA0D,CAAC,GAAC1D,CAAC,CAAC,CAACQ,CAAC,CAAC,gDAAD,CAAF,CAAD,EAAuDkD,CAAvD,CAAH;AAA6D,SAAOzB,CAAC,IAAI+C,mBAAZ,EAAgCvB,CAAC,IAAIwB,MAArC","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import s from\"../../../core/Handles.js\";import{init as r}from\"../../../core/watchUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{fromExtent as a,empty as l,expand as o,allFinite as c,equals as p}from\"../../../geometry/support/aaBoundingRect.js\";import{canProject as d,project as h}from\"../../../geometry/support/webMercatorUtils.js\";import{isTiledLayer as u}from\"../../../layers/support/layerUtils.js\";import{WEBMERCATOR_WORLD_EXTENT as y,GEOGRAPHIC_WORLD_EXTENT as f}from\"./TerrainConst.js\";import{getTiledLayerInfo as m,isProjectableRasterLayer as E}from\"./terrainUtils.js\";let x=class extends t{constructor(e){super(e),this._handles=new s}initialize(){this._handles.add([this.layerViews.on(\"change\",(()=>this.notifyChange(\"stencilEnabledExtents\")))])}destroy(){this._handles.destroy(),this._handles=null}get layerViewsExtent(){return this._computeLayerViewsExtent()}get tiledLayersExtent(){return this._computeTiledLayersExtent()}get stencilEnabledExtents(){return this._computeStencilEnabledExtents()}set spatialReference(e){this.tilingScheme||this._set(\"spatialReference\",e)}set tilingScheme(e){this._set(\"tilingScheme\",e),this._set(\"spatialReference\",e.spatialReference)}_computeStencilEnabledExtents(){const e=[];return this.layerViews.forEach((t=>{const s=t.layer;if(\"IntegratedMeshLayer\"===s.operationalLayerType&&null!=this.spatialReference){const t=L(s.fullExtent,this.spatialReference);null!=t&&e.push(a(t))}})),e}};function g(e,t){return 1===e?new _(t):new w(t)}e([n({readOnly:!0,dependsOn:[]})],x.prototype,\"layerViewsExtent\",null),e([n({readOnly:!0,dependsOn:[\"spatialReference\",\"tilingScheme\"]})],x.prototype,\"tiledLayersExtent\",null),e([n({readOnly:!0,dependsOn:[\"spatialReference\"]})],x.prototype,\"stencilEnabledExtents\",null),e([n()],x.prototype,\"spatialReference\",null),e([n()],x.prototype,\"tilingScheme\",null),e([n()],x.prototype,\"defaultTiledLayersExtent\",void 0),e([n({constructOnly:!0})],x.prototype,\"layers\",void 0),e([n({constructOnly:!0})],x.prototype,\"layerViews\",void 0),x=e([i(\"esri.views.3d.terrain.SurfaceExtentHelperBase\")],x);let _=class extends x{_computeLayerViewsExtent(){return this._getGlobalExtent()}_computeTiledLayersExtent(){return this._getGlobalExtent()}_getGlobalExtent(){return this.spatialReference.isWebMercator?y:f}};e([n({dependsOn:[\"spatialReference\"]})],_.prototype,\"layerViewsExtent\",void 0),_=e([i(\"esri.views.3d.terrain.SurfaceExtentHelperGlobal\")],_);let w=class extends x{initialize(){this._handles.add([this.layers.on(\"change\",(e=>this._handleLayersChanged(e))),this.layerViews.on(\"change\",(()=>this.notifyChange(\"layerViewsExtent\")))])}_handleLayersChanged(e){for(const t of e.removed)this._handles.remove(t.uid);for(const t of e.added)this._handles.add(r(t,\"loaded\",(()=>this.notifyChange(\"tiledLayersExtent\"))),t.uid)}_computeLayerViewsExtent(){const e=l(),t=this.spatialReference;this.layerViews.forEach((s=>{const r=s.layer;if(s.isResolved()&&(\"graphics\"!==r.type||!r.internal)){const r=L(\"fullExtentInLocalViewSpatialReference\"in s&&s.fullExtentInLocalViewSpatialReference||s.layer.fullExtent,t);r&&o(e,r)}}));const s=c(e)?e:null,r=this._get(\"layerViewsExtent\");return p(s,r)?r:s}_computeTiledLayersExtent(){const e=this.tilingScheme;if(!e)return null;const t=this.spatialReference,s=l();this.layers.forEach((function(r){if(r.loaded&&u(r)){const{tileInfo:n,fullExtent:i}=m(r,t,2);(n&&E(r)&&i||n&&e.compatibleWith(n)&&i&&i.spatialReference.equals(t))&&o(s,i)}})),this.defaultTiledLayersExtent&&o(s,this.defaultTiledLayersExtent);const r=c(s)?s:null,n=this._get(\"tiledLayersExtent\");return p(r,n)?n:r}};function L(e,t){return e&&!e.spatialReference.equals(t)&&(e=d(e.spatialReference,t)?h(e,t):null),e}w=e([i(\"esri.views.3d.terrain.SurfaceExtentHelperLocal\")],w);export{x as SurfaceExtentHelper,g as create};\n"]},"metadata":{},"sourceType":"module"}