{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../Error.js\";\nimport t from \"../global.js\";\nimport { unwrap as r } from \"../maybe.js\";\nlet s;\n\nfunction a(a, n = {}) {\n  let o = n.responseType;\n  o ? \"array-buffer\" !== o && \"blob\" !== o && \"json\" !== o && \"native\" !== o && \"native-request-init\" !== o && \"text\" !== o && (o = \"text\") : o = \"json\";\n  const i = r(n.signal);\n  return delete n.signal, t.invokeStaticMessage(\"request\", {\n    url: a,\n    options: n\n  }, {\n    signal: i\n  }).then(async t => {\n    let r, l, u, c, f;\n    if (t.data) if (t.data instanceof ArrayBuffer) {\n      if (!(\"json\" !== o && \"text\" !== o && \"blob\" !== o || (r = new Blob([t.data]), \"json\" !== o && \"text\" !== o || (s || (s = new FileReaderSync()), c = s.readAsText(r), \"json\" !== o)))) {\n        try {\n          l = JSON.parse(c || null);\n        } catch (b) {\n          const t = { ...b,\n            url: a,\n            requestOptions: n\n          };\n          throw new e(\"request:server\", b.message, t);\n        }\n\n        if (l.error) {\n          const t = { ...l.error,\n            url: a,\n            requestOptions: n\n          };\n          throw new e(\"request:server\", l.error.message, t);\n        }\n      }\n    } else \"native\" === o && (t.data.signal = i, u = await fetch(t.data.url, t.data));\n\n    switch (o) {\n      case \"blob\":\n        f = r;\n        break;\n\n      case \"json\":\n        f = l;\n        break;\n\n      case \"native\":\n        f = u;\n        break;\n\n      case \"text\":\n        f = c;\n        break;\n\n      default:\n        f = t.data;\n    }\n\n    return {\n      data: f,\n      requestOptions: n,\n      ssl: t.ssl,\n      url: a\n    };\n  });\n}\n\nexport { a as execute };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/core/workers/request.js"],"names":["e","t","unwrap","r","s","a","n","o","responseType","i","signal","invokeStaticMessage","url","options","then","l","u","c","f","data","ArrayBuffer","Blob","FileReaderSync","readAsText","JSON","parse","b","requestOptions","message","error","fetch","ssl","execute"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../Error.js\";import t from\"../global.js\";import{unwrap as r}from\"../maybe.js\";let s;function a(a,n={}){let o=n.responseType;o?\"array-buffer\"!==o&&\"blob\"!==o&&\"json\"!==o&&\"native\"!==o&&\"native-request-init\"!==o&&\"text\"!==o&&(o=\"text\"):o=\"json\";const i=r(n.signal);return delete n.signal,t.invokeStaticMessage(\"request\",{url:a,options:n},{signal:i}).then((async t=>{let r,l,u,c,f;if(t.data)if(t.data instanceof ArrayBuffer){if(!(\"json\"!==o&&\"text\"!==o&&\"blob\"!==o||(r=new Blob([t.data]),\"json\"!==o&&\"text\"!==o||(s||(s=new FileReaderSync),c=s.readAsText(r),\"json\"!==o)))){try{l=JSON.parse(c||null)}catch(b){const t={...b,url:a,requestOptions:n};throw new e(\"request:server\",b.message,t)}if(l.error){const t={...l.error,url:a,requestOptions:n};throw new e(\"request:server\",l.error.message,t)}}}else\"native\"===o&&(t.data.signal=i,u=await fetch(t.data.url,t.data));switch(o){case\"blob\":f=r;break;case\"json\":f=l;break;case\"native\":f=u;break;case\"text\":f=c;break;default:f=t.data}return{data:f,requestOptions:n,ssl:t.ssl,url:a}}))}export{a as execute};\n"]},"metadata":{},"sourceType":"module"}