{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { create as e } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { getCentroidOptimizedGeometry as r } from \"../../../../layers/graphics/centroid.js\";\nimport o from \"../../../../layers/graphics/OptimizedGeometry.js\";\nimport { getCachedAttributeValue as i } from \"./I3SUtil.js\";\n\nclass n {\n  constructor(t) {\n    this.objectIdField = t.objectIdField, this.getFeatureExtent = t.getFeatureExtent;\n  }\n\n  getObjectId(t) {\n    return t.id;\n  }\n\n  getAttributes(e) {\n    const {\n      meta: r,\n      index: o\n    } = e,\n          n = {};\n    this.objectIdField && (n[this.objectIdField] = e.id);\n    const s = t(r.attributeInfo) && r.attributeInfo.attributeData;\n    if (t(s)) for (const t of Object.keys(s)) n[t] = i(s[t], o);\n    return n;\n  }\n\n  getAttribute(e, r) {\n    if (r === this.objectIdField) return e.id;\n    const {\n      meta: o,\n      index: n\n    } = e,\n          s = t(o.attributeInfo) && o.attributeInfo.attributeData;\n    return t(s) ? i(s[r], n) : null;\n  }\n\n  getGeometry(t) {\n    if (t.geometry) return t.geometry;\n    const [e, r, i, n, a] = this.getFeatureExtent(t, s);\n    return new o([5], [e, r, i, n, r, i, n, a, i, e, a, i, e, r, i]);\n  }\n\n  getCentroid(t, e) {\n    if (t.geometry) return r(new o(), t.geometry, e.hasZ, e.hasM);\n    const [i, n, a, m, u, d] = this.getFeatureExtent(t, s);\n    return new o([0], [(i + m) / 2, (n + u) / 2, (a + d) / 2]);\n  }\n\n  cloneWithGeometry(t, e) {\n    const {\n      id: r,\n      index: o,\n      meta: i\n    } = t;\n    return {\n      id: r,\n      index: o,\n      meta: i,\n      geometry: e\n    };\n  }\n\n}\n\nconst s = e();\nexport { n as I3SQueryFeatureAdapter };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js"],"names":["isSome","t","create","e","getCentroidOptimizedGeometry","r","o","getCachedAttributeValue","i","n","constructor","objectIdField","getFeatureExtent","getObjectId","id","getAttributes","meta","index","s","attributeInfo","attributeData","Object","keys","getAttribute","getGeometry","geometry","a","getCentroid","hasZ","hasM","m","u","d","cloneWithGeometry","I3SQueryFeatureAdapter"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{create as e}from\"../../../../geometry/support/aaBoundingBox.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../layers/graphics/centroid.js\";import o from\"../../../../layers/graphics/OptimizedGeometry.js\";import{getCachedAttributeValue as i}from\"./I3SUtil.js\";class n{constructor(t){this.objectIdField=t.objectIdField,this.getFeatureExtent=t.getFeatureExtent}getObjectId(t){return t.id}getAttributes(e){const{meta:r,index:o}=e,n={};this.objectIdField&&(n[this.objectIdField]=e.id);const s=t(r.attributeInfo)&&r.attributeInfo.attributeData;if(t(s))for(const t of Object.keys(s))n[t]=i(s[t],o);return n}getAttribute(e,r){if(r===this.objectIdField)return e.id;const{meta:o,index:n}=e,s=t(o.attributeInfo)&&o.attributeInfo.attributeData;return t(s)?i(s[r],n):null}getGeometry(t){if(t.geometry)return t.geometry;const[e,r,i,n,a]=this.getFeatureExtent(t,s);return new o([5],[e,r,i,n,r,i,n,a,i,e,a,i,e,r,i])}getCentroid(t,e){if(t.geometry)return r(new o,t.geometry,e.hasZ,e.hasM);const[i,n,a,m,u,d]=this.getFeatureExtent(t,s);return new o([0],[(i+m)/2,(n+u)/2,(a+d)/2])}cloneWithGeometry(t,e){const{id:r,index:o,meta:i}=t;return{id:r,index:o,meta:i,geometry:e}}}const s=e();export{n as I3SQueryFeatureAdapter};\n"]},"metadata":{},"sourceType":"module"}