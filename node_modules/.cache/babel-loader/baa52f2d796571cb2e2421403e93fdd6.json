{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../chunks/tslib.es6.js\";\nimport e from \"../core/Error.js\";\nimport { formatFileSize as s } from \"../core/unitFormatUtils.js\";\nimport { on as i, init as a } from \"../core/watchUtils.js\";\nimport { aliasOf as n } from \"../core/accessorSupport/decorators/aliasOf.js\";\nimport \"../core/has.js\";\nimport { cast as r } from \"../core/accessorSupport/decorators/cast.js\";\nimport \"../core/Logger.js\";\nimport { property as o } from \"../core/accessorSupport/decorators/property.js\";\nimport { subclass as l } from \"../core/accessorSupport/decorators/subclass.js\";\nimport m from \"./Widget.js\";\nimport d from \"./Attachments/AttachmentsViewModel.js\";\nimport { isSupportedImage as c, getIconPath as h } from \"./Attachments/support/attachmentUtils.js\";\nimport { storeNode as u, discardNode as p, isRTL as b } from \"./support/widgetUtils.js\";\nimport { messageBundle as _ } from \"./support/decorators/messageBundle.js\";\nimport { tsx as g } from \"./support/jsxFactory.js\";\nconst f = {\n  addButton: !0,\n  addSubmitButton: !0,\n  cancelAddButton: !0,\n  cancelUpdateButton: !0,\n  deleteButton: !0,\n  errorMessage: !0,\n  progressBar: !0,\n  updateButton: !0\n},\n      v = {\n  base: \"esri-attachments\",\n  loaderContainer: \"esri-attachments__loader-container\",\n  loader: \"esri-attachments__loader\",\n  fadeIn: \"esri-attachments--fade-in\",\n  container: \"esri-attachments__container\",\n  containerList: \"esri-attachments__container--list\",\n  containerPreview: \"esri-attachments__container--preview\",\n  actions: \"esri-attachments__actions\",\n  deleteButton: \"esri-attachments__delete-button\",\n  addAttachmentButton: \"esri-attachments__add-attachment-button\",\n  errorMessage: \"esri-attachments__error-message\",\n  items: \"esri-attachments__items\",\n  item: \"esri-attachments__item\",\n  itemButton: \"esri-attachments__item-button\",\n  itemMask: \"esri-attachments__item-mask\",\n  itemMaskIcon: \"esri-attachments__item-mask--icon\",\n  itemImage: \"esri-attachments__image\",\n  itemImageResizable: \"esri-attachments__image--resizable\",\n  itemLabel: \"esri-attachments__label\",\n  itemFilename: \"esri-attachments__filename\",\n  itemChevronIcon: \"esri-attachments__item-chevron-icon\",\n  itemLink: \"esri-attachments__item-link\",\n  itemLinkOverlay: \"esri-attachments__item-link-overlay\",\n  itemLinkOverlayIcon: \"esri-attachments__item-link-overlay-icon\",\n  itemEditIcon: \"esri-attachments__item-edit-icon\",\n  itemAddIcon: \"esri-attachments__item-add-icon\",\n  itemAddButton: \"esri-attachments__item-add-button\",\n  formNode: \"esri-attachments__form-node\",\n  fileFieldset: \"esri-attachments__file-fieldset\",\n  fileLabel: \"esri-attachments__file-label\",\n  fileName: \"esri-attachments__file-name\",\n  fileInput: \"esri-attachments__file-input\",\n  metadata: \"esri-attachments__metadata\",\n  metadataFieldset: \"esri-attachments__metadata-fieldset\",\n  progressBar: \"esri-attachments__progress-bar\",\n  esriWidget: \"esri-widget\",\n  esriButton: \"esri-button\",\n  buttonDisabled: \"esri-button--disabled\",\n  esriButtonSecondary: \"esri-button--secondary\",\n  esriButtonTertiary: \"esri-button--tertiary\",\n  esriButtonThird: \"esri-button--third\",\n  esriButtonSmall: \"esri-button--small\",\n  esriButtonHalf: \"esri-button--half\",\n  empty: \"esri-widget__content--empty\",\n  iconExternalLink: \"esri-icon-link-external\",\n  iconEdit: \"esri-icon-edit\",\n  iconRight: \"esri-icon-right\",\n  iconLeft: \"esri-icon-left\",\n  iconPlus: \"esri-icon-plus\"\n},\n      y = window.CSS;\nlet B = class extends m {\n  constructor(t, e) {\n    super(t, e), this.abilities = null, this.displayType = \"list\", this.graphic = null, this.label = void 0, this.messages = null, this.messagesUnits = null, this.selectedFile = null, this.submitting = !1, this.viewModel = new d(), this.visibleElements = { ...f\n    }, this._supportsImageOrientation = y && y.supports && y.supports(\"image-orientation\", \"from-image\"), this._addAttachmentForm = null, this._updateAttachmentForm = null;\n  }\n\n  initialize() {\n    this.own(i(this, \"viewModel.attachmentInfos\", \"change\", () => this.scheduleRender()), a(this, \"viewModel.mode\", () => this._modeChanged()));\n  }\n\n  castVisibleElements(t) {\n    return { ...f,\n      ...t\n    };\n  }\n\n  addAttachment() {\n    const {\n      _addAttachmentForm: t,\n      viewModel: s\n    } = this;\n    return this._set(\"submitting\", !0), this._set(\"error\", null), s.addAttachment(t).then(t => (this._set(\"submitting\", !1), this._set(\"error\", null), s.mode = \"view\", t)).catch(t => {\n      throw this._set(\"submitting\", !1), this._set(\"error\", new e(\"attachments:add-attachment\", this.messages.addErrorMessage, t)), t;\n    });\n  }\n\n  deleteAttachment(t) {\n    const {\n      viewModel: s\n    } = this;\n    return this._set(\"submitting\", !0), this._set(\"error\", null), s.deleteAttachment(t).then(t => (this._set(\"submitting\", !1), this._set(\"error\", null), s.mode = \"view\", t)).catch(t => {\n      throw this._set(\"submitting\", !1), this._set(\"error\", new e(\"attachments:delete-attachment\", this.messages.deleteErrorMessage, t)), t;\n    });\n  }\n\n  updateAttachment() {\n    const {\n      viewModel: t\n    } = this,\n          {\n      _updateAttachmentForm: s\n    } = this;\n    return this._set(\"submitting\", !0), this._set(\"error\", null), t.updateAttachment(s).then(e => (this._set(\"submitting\", !1), this._set(\"error\", null), t.mode = \"view\", e)).catch(t => {\n      throw this._set(\"submitting\", !1), this._set(\"error\", new e(\"attachments:update-attachment\", this.messages.updateErrorMessage, t)), t;\n    });\n  }\n\n  render() {\n    const {\n      submitting: t,\n      viewModel: e\n    } = this,\n          {\n      state: s\n    } = e;\n    return g(\"div\", {\n      class: this.classes(v.base, v.esriWidget)\n    }, t ? this.renderProgressBar() : null, \"loading\" === s ? this.renderLoading() : this.renderAttachments(), this.renderErrorMessage());\n  }\n\n  renderErrorMessage() {\n    const {\n      error: t,\n      visibleElements: e\n    } = this;\n    return t && e.errorMessage ? g(\"div\", {\n      key: \"error-message\",\n      class: v.errorMessage\n    }, t.message) : null;\n  }\n\n  renderAttachments() {\n    const {\n      mode: t,\n      activeAttachmentInfo: e\n    } = this.viewModel;\n    return \"add\" === t ? this.renderAddForm() : \"edit\" === t ? this.renderDetailsForm(e) : this.renderAttachmentContainer();\n  }\n\n  renderLoading() {\n    return g(\"div\", {\n      class: v.loaderContainer,\n      key: \"loader\"\n    }, g(\"div\", {\n      class: v.loader\n    }));\n  }\n\n  renderProgressBar() {\n    return this.visibleElements.progressBar ? g(\"div\", {\n      class: v.progressBar,\n      key: \"progress-bar\"\n    }) : null;\n  }\n\n  renderAddForm() {\n    const {\n      submitting: t,\n      selectedFile: e\n    } = this,\n          s = t || !e,\n          i = this.visibleElements.cancelAddButton ? g(\"button\", {\n      type: \"button\",\n      bind: this,\n      disabled: t,\n      onclick: this._cancelForm,\n      class: this.classes(v.esriButton, v.esriButtonTertiary, v.esriButtonSmall, v.esriButtonHalf, t && v.buttonDisabled)\n    }, this.messages.cancel) : null,\n          a = this.visibleElements.addSubmitButton ? g(\"button\", {\n      type: \"submit\",\n      disabled: s,\n      class: this.classes(v.esriButton, v.esriButtonSecondary, v.esriButtonSmall, v.esriButtonHalf, {\n        [v.buttonDisabled]: s\n      })\n    }, this.messages.add) : null,\n          n = e ? g(\"span\", {\n      key: \"file-name\",\n      class: v.fileName\n    }, e.name) : null,\n          r = g(\"form\", {\n      bind: this,\n      afterCreate: u,\n      afterRemoved: p,\n      \"data-node-ref\": \"_addAttachmentForm\",\n      onsubmit: this._submitAddAttachment\n    }, g(\"fieldset\", {\n      class: v.fileFieldset\n    }, n, g(\"label\", {\n      class: this.classes(v.fileLabel, v.esriButton, v.esriButtonSecondary)\n    }, e ? this.messages.changeFile : this.messages.selectFile, g(\"input\", {\n      class: v.fileInput,\n      type: \"file\",\n      name: \"attachment\",\n      bind: this,\n      onchange: this._handleFileInputChange\n    }))), a, i);\n    return g(\"div\", {\n      key: \"add-form-container\",\n      class: v.formNode\n    }, r);\n  }\n\n  renderDetailsForm(t) {\n    const {\n      visibleElements: e,\n      viewModel: i,\n      selectedFile: a,\n      submitting: n\n    } = this,\n          {\n      contentType: r,\n      size: o,\n      url: l\n    } = t,\n          {\n      abilities: m\n    } = i,\n          d = n || !a,\n          c = m.editing && m.operations.delete && e.deleteButton ? g(\"button\", {\n      key: \"delete-button\",\n      type: \"button\",\n      disabled: n,\n      bind: this,\n      onclick: e => this._submitDeleteAttachment(e, t),\n      class: this.classes(v.esriButton, v.esriButtonSmall, v.esriButtonTertiary, v.deleteButton, {\n        [v.buttonDisabled]: n\n      })\n    }, this.messages.delete) : null,\n          h = m.editing && m.operations.update && e.updateButton ? g(\"button\", {\n      disabled: d,\n      key: \"update-button\",\n      type: \"submit\",\n      class: this.classes(v.esriButton, v.esriButtonSmall, v.esriButtonThird, {\n        [v.buttonDisabled]: d\n      })\n    }, this.messages.update) : null,\n          b = this.visibleElements.cancelUpdateButton ? g(\"button\", {\n      disabled: n,\n      key: \"cancel-button\",\n      type: \"button\",\n      bind: this,\n      onclick: this._cancelForm,\n      class: this.classes(v.esriButton, v.esriButtonSmall, v.esriButtonTertiary, v.esriButtonThird, {\n        [v.buttonDisabled]: n\n      })\n    }, this.messages.cancel) : null,\n          _ = a ? g(\"span\", {\n      key: \"file-name\",\n      class: v.fileName\n    }, a.name) : null,\n          f = m.editing && m.operations.update ? g(\"fieldset\", {\n      key: \"file\",\n      class: v.fileFieldset\n    }, _, g(\"label\", {\n      class: this.classes(v.fileLabel, v.esriButton, v.esriButtonSecondary)\n    }, this.messages.changeFile, g(\"input\", {\n      class: v.fileInput,\n      type: \"file\",\n      name: \"attachment\",\n      bind: this,\n      onchange: this._handleFileInputChange\n    }))) : null,\n          y = g(\"fieldset\", {\n      key: \"size\",\n      class: v.metadataFieldset\n    }, g(\"label\", null, s(this.messagesUnits, o))),\n          B = g(\"fieldset\", {\n      key: \"content-type\",\n      class: v.metadataFieldset\n    }, g(\"label\", null, r)),\n          A = g(\"form\", {\n      bind: this,\n      afterCreate: u,\n      afterRemoved: p,\n      \"data-node-ref\": \"_updateAttachmentForm\",\n      onsubmit: this._submitUpdateAttachment\n    }, g(\"div\", {\n      class: v.metadata\n    }, y, B), f, g(\"div\", {\n      class: v.actions\n    }, c, b, h));\n\n    return g(\"div\", {\n      key: \"edit-form-container\",\n      class: v.formNode\n    }, g(\"a\", {\n      class: v.itemLink,\n      href: l,\n      rel: \"noreferrer\",\n      target: \"_blank\"\n    }, this.renderImageMask({\n      attachmentInfo: t,\n      size: 400\n    }), g(\"div\", {\n      class: v.itemLinkOverlay\n    }, g(\"span\", {\n      class: v.itemLinkOverlayIcon\n    }, g(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"32\",\n      height: \"32\",\n      viewBox: \"0 0 32 32\"\n    }, g(\"path\", {\n      d: \"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z\"\n    }), g(\"path\", {\n      fill: \"none\",\n      d: \"M0 0h32v32H0z\"\n    }))))), A);\n  }\n\n  renderImageMask({\n    attachmentInfo: t,\n    size: e\n  }) {\n    const {\n      supportsResizeAttachments: s\n    } = this.viewModel,\n          {\n      contentType: i,\n      name: a,\n      url: n\n    } = t,\n          r = s && c(i),\n          o = this._getCSSTransform(t, r),\n          l = o ? {\n      transform: o,\n      \"image-orientation\": \"none\"\n    } : {},\n          m = -1 === n.indexOf(\"?\") ? \"?\" : \"&\",\n          d = r ? `${n}${m}w=${e}` : h(i),\n          u = {\n      [v.itemMaskIcon]: !r\n    },\n          p = {\n      [v.itemImageResizable]: s\n    };\n\n    return g(\"div\", {\n      class: this.classes(u, v.itemMask)\n    }, g(\"img\", {\n      styles: l,\n      alt: a,\n      src: d,\n      class: this.classes(p, v.itemImage)\n    }));\n  }\n\n  renderAttachmentInfo({\n    attachmentInfo: t,\n    displayType: e\n  }) {\n    const {\n      viewModel: s\n    } = this,\n          {\n      abilities: i\n    } = s,\n          {\n      name: a,\n      url: n\n    } = t,\n          r = this.renderImageMask({\n      attachmentInfo: t,\n      size: \"list\" === e ? 48 : 400\n    }),\n          o = i.editing ? g(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: this.classes(v.itemChevronIcon, b() ? v.iconLeft : v.iconRight)\n    }) : null,\n          l = [r, g(\"label\", {\n      class: v.itemLabel\n    }, g(\"span\", {\n      class: v.itemFilename\n    }, a || this.messages.noTitle), o)],\n          m = i.editing ? g(\"button\", {\n      key: \"details-button\",\n      bind: this,\n      class: v.itemButton,\n      title: this.messages.attachmentDetails,\n      \"aria-label\": this.messages.attachmentDetails,\n      \"data-attachment-info-id\": t.id,\n      onclick: () => this._startEditAttachment(t),\n      type: \"button\"\n    }, l) : g(\"a\", {\n      key: \"details-link\",\n      class: v.itemButton,\n      href: n,\n      target: \"_blank\"\n    }, l);\n    return g(\"li\", {\n      class: v.item,\n      key: t\n    }, m);\n  }\n\n  renderAttachmentContainer() {\n    const {\n      displayType: t,\n      viewModel: e,\n      visibleElements: s\n    } = this,\n          {\n      attachmentInfos: i,\n      abilities: a\n    } = e,\n          n = i && i.length,\n          r = {\n      [v.containerList]: \"preview\" !== t,\n      [v.containerPreview]: \"preview\" === t\n    },\n          o = a.editing && a.operations.add && s.addButton ? g(\"button\", {\n      bind: this,\n      onclick: () => this._startAddAttachment(),\n      class: this.classes(v.esriButton, v.esriButtonTertiary, v.addAttachmentButton),\n      type: \"button\"\n    }, g(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: this.classes(v.itemAddIcon, v.iconPlus)\n    }), this.messages.add) : null,\n          l = n ? g(\"ul\", {\n      class: v.items\n    }, i.toArray().map(e => this.renderAttachmentInfo({\n      attachmentInfo: e,\n      displayType: t\n    }))) : g(\"div\", {\n      class: v.empty\n    }, this.messages.noAttachments);\n    return g(\"div\", {\n      key: \"attachments-container\",\n      class: this.classes(v.container, r)\n    }, l, o);\n  }\n\n  _modeChanged() {\n    this._set(\"error\", null), this._set(\"selectedFile\", null);\n  }\n\n  _handleFileInputChange(t) {\n    const e = t.target,\n          s = e && e.files && e.files.item(0);\n\n    this._set(\"selectedFile\", s);\n  }\n\n  _submitDeleteAttachment(t, e) {\n    t.preventDefault(), this.deleteAttachment(e);\n  }\n\n  _submitAddAttachment(t) {\n    t.preventDefault(), this.addAttachment();\n  }\n\n  _submitUpdateAttachment(t) {\n    t.preventDefault(), this.updateAttachment();\n  }\n\n  _startEditAttachment(t) {\n    const {\n      viewModel: e\n    } = this;\n    e.activeAttachmentInfo = t, e.mode = \"edit\";\n  }\n\n  _startAddAttachment() {\n    this.viewModel.mode = \"add\";\n  }\n\n  _cancelForm(t) {\n    t.preventDefault(), this.viewModel.mode = \"view\";\n  }\n\n  _getCSSTransform(t, e) {\n    const {\n      orientationInfo: s\n    } = t;\n    return !this._supportsImageOrientation && e && s ? [s.rotation ? `rotate(${s.rotation}deg)` : \"\", s.mirrored ? \"scaleX(-1)\" : \"\"].join(\" \") : \"\";\n  }\n\n};\nt([n(\"viewModel.abilities\")], B.prototype, \"abilities\", void 0), t([o()], B.prototype, \"displayType\", void 0), t([n(\"viewModel.graphic\")], B.prototype, \"graphic\", void 0), t([o({\n  aliasOf: {\n    source: \"messages.widgetLabel\",\n    overridable: !0\n  }\n})], B.prototype, \"label\", void 0), t([o(), _(\"esri/widgets/Attachments/t9n/Attachments\")], B.prototype, \"messages\", void 0), t([o(), _(\"esri/core/t9n/Units\")], B.prototype, \"messagesUnits\", void 0), t([o({\n  readOnly: !0\n})], B.prototype, \"selectedFile\", void 0), t([o({\n  readOnly: !0\n})], B.prototype, \"submitting\", void 0), t([o({\n  readOnly: !0\n})], B.prototype, \"error\", void 0), t([o({\n  type: d\n})], B.prototype, \"viewModel\", void 0), t([o()], B.prototype, \"visibleElements\", void 0), t([r(\"visibleElements\")], B.prototype, \"castVisibleElements\", null), B = t([l(\"esri.widgets.Attachments\")], B);\nvar A = B;\nexport default A;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/widgets/Attachments.js"],"names":["_","t","e","formatFileSize","s","on","i","init","a","aliasOf","n","cast","r","property","o","subclass","l","m","d","isSupportedImage","c","getIconPath","h","storeNode","u","discardNode","p","isRTL","b","messageBundle","tsx","g","f","addButton","addSubmitButton","cancelAddButton","cancelUpdateButton","deleteButton","errorMessage","progressBar","updateButton","v","base","loaderContainer","loader","fadeIn","container","containerList","containerPreview","actions","addAttachmentButton","items","item","itemButton","itemMask","itemMaskIcon","itemImage","itemImageResizable","itemLabel","itemFilename","itemChevronIcon","itemLink","itemLinkOverlay","itemLinkOverlayIcon","itemEditIcon","itemAddIcon","itemAddButton","formNode","fileFieldset","fileLabel","fileName","fileInput","metadata","metadataFieldset","esriWidget","esriButton","buttonDisabled","esriButtonSecondary","esriButtonTertiary","esriButtonThird","esriButtonSmall","esriButtonHalf","empty","iconExternalLink","iconEdit","iconRight","iconLeft","iconPlus","y","window","CSS","B","constructor","abilities","displayType","graphic","label","messages","messagesUnits","selectedFile","submitting","viewModel","visibleElements","_supportsImageOrientation","supports","_addAttachmentForm","_updateAttachmentForm","initialize","own","scheduleRender","_modeChanged","castVisibleElements","addAttachment","_set","then","mode","catch","addErrorMessage","deleteAttachment","deleteErrorMessage","updateAttachment","updateErrorMessage","render","state","class","classes","renderProgressBar","renderLoading","renderAttachments","renderErrorMessage","error","key","message","activeAttachmentInfo","renderAddForm","renderDetailsForm","renderAttachmentContainer","type","bind","disabled","onclick","_cancelForm","cancel","add","name","afterCreate","afterRemoved","onsubmit","_submitAddAttachment","changeFile","selectFile","onchange","_handleFileInputChange","contentType","size","url","editing","operations","delete","_submitDeleteAttachment","update","A","_submitUpdateAttachment","href","rel","target","renderImageMask","attachmentInfo","xmlns","width","height","viewBox","fill","supportsResizeAttachments","_getCSSTransform","transform","indexOf","styles","alt","src","renderAttachmentInfo","noTitle","title","attachmentDetails","id","_startEditAttachment","attachmentInfos","length","_startAddAttachment","toArray","map","noAttachments","files","preventDefault","orientationInfo","rotation","mirrored","join","prototype","source","overridable","readOnly"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"../core/Error.js\";import{formatFileSize as s}from\"../core/unitFormatUtils.js\";import{on as i,init as a}from\"../core/watchUtils.js\";import{aliasOf as n}from\"../core/accessorSupport/decorators/aliasOf.js\";import\"../core/has.js\";import{cast as r}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/Logger.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../core/accessorSupport/decorators/subclass.js\";import m from\"./Widget.js\";import d from\"./Attachments/AttachmentsViewModel.js\";import{isSupportedImage as c,getIconPath as h}from\"./Attachments/support/attachmentUtils.js\";import{storeNode as u,discardNode as p,isRTL as b}from\"./support/widgetUtils.js\";import{messageBundle as _}from\"./support/decorators/messageBundle.js\";import{tsx as g}from\"./support/jsxFactory.js\";const f={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},v={base:\"esri-attachments\",loaderContainer:\"esri-attachments__loader-container\",loader:\"esri-attachments__loader\",fadeIn:\"esri-attachments--fade-in\",container:\"esri-attachments__container\",containerList:\"esri-attachments__container--list\",containerPreview:\"esri-attachments__container--preview\",actions:\"esri-attachments__actions\",deleteButton:\"esri-attachments__delete-button\",addAttachmentButton:\"esri-attachments__add-attachment-button\",errorMessage:\"esri-attachments__error-message\",items:\"esri-attachments__items\",item:\"esri-attachments__item\",itemButton:\"esri-attachments__item-button\",itemMask:\"esri-attachments__item-mask\",itemMaskIcon:\"esri-attachments__item-mask--icon\",itemImage:\"esri-attachments__image\",itemImageResizable:\"esri-attachments__image--resizable\",itemLabel:\"esri-attachments__label\",itemFilename:\"esri-attachments__filename\",itemChevronIcon:\"esri-attachments__item-chevron-icon\",itemLink:\"esri-attachments__item-link\",itemLinkOverlay:\"esri-attachments__item-link-overlay\",itemLinkOverlayIcon:\"esri-attachments__item-link-overlay-icon\",itemEditIcon:\"esri-attachments__item-edit-icon\",itemAddIcon:\"esri-attachments__item-add-icon\",itemAddButton:\"esri-attachments__item-add-button\",formNode:\"esri-attachments__form-node\",fileFieldset:\"esri-attachments__file-fieldset\",fileLabel:\"esri-attachments__file-label\",fileName:\"esri-attachments__file-name\",fileInput:\"esri-attachments__file-input\",metadata:\"esri-attachments__metadata\",metadataFieldset:\"esri-attachments__metadata-fieldset\",progressBar:\"esri-attachments__progress-bar\",esriWidget:\"esri-widget\",esriButton:\"esri-button\",buttonDisabled:\"esri-button--disabled\",esriButtonSecondary:\"esri-button--secondary\",esriButtonTertiary:\"esri-button--tertiary\",esriButtonThird:\"esri-button--third\",esriButtonSmall:\"esri-button--small\",esriButtonHalf:\"esri-button--half\",empty:\"esri-widget__content--empty\",iconExternalLink:\"esri-icon-link-external\",iconEdit:\"esri-icon-edit\",iconRight:\"esri-icon-right\",iconLeft:\"esri-icon-left\",iconPlus:\"esri-icon-plus\"},y=window.CSS;let B=class extends m{constructor(t,e){super(t,e),this.abilities=null,this.displayType=\"list\",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new d,this.visibleElements={...f},this._supportsImageOrientation=y&&y.supports&&y.supports(\"image-orientation\",\"from-image\"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own(i(this,\"viewModel.attachmentInfos\",\"change\",(()=>this.scheduleRender())),a(this,\"viewModel.mode\",(()=>this._modeChanged())))}castVisibleElements(t){return{...f,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:s}=this;return this._set(\"submitting\",!0),this._set(\"error\",null),s.addAttachment(t).then((t=>(this._set(\"submitting\",!1),this._set(\"error\",null),s.mode=\"view\",t))).catch((t=>{throw this._set(\"submitting\",!1),this._set(\"error\",new e(\"attachments:add-attachment\",this.messages.addErrorMessage,t)),t}))}deleteAttachment(t){const{viewModel:s}=this;return this._set(\"submitting\",!0),this._set(\"error\",null),s.deleteAttachment(t).then((t=>(this._set(\"submitting\",!1),this._set(\"error\",null),s.mode=\"view\",t))).catch((t=>{throw this._set(\"submitting\",!1),this._set(\"error\",new e(\"attachments:delete-attachment\",this.messages.deleteErrorMessage,t)),t}))}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:s}=this;return this._set(\"submitting\",!0),this._set(\"error\",null),t.updateAttachment(s).then((e=>(this._set(\"submitting\",!1),this._set(\"error\",null),t.mode=\"view\",e))).catch((t=>{throw this._set(\"submitting\",!1),this._set(\"error\",new e(\"attachments:update-attachment\",this.messages.updateErrorMessage,t)),t}))}render(){const{submitting:t,viewModel:e}=this,{state:s}=e;return g(\"div\",{class:this.classes(v.base,v.esriWidget)},t?this.renderProgressBar():null,\"loading\"===s?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:t,visibleElements:e}=this;return t&&e.errorMessage?g(\"div\",{key:\"error-message\",class:v.errorMessage},t.message):null}renderAttachments(){const{mode:t,activeAttachmentInfo:e}=this.viewModel;return\"add\"===t?this.renderAddForm():\"edit\"===t?this.renderDetailsForm(e):this.renderAttachmentContainer()}renderLoading(){return g(\"div\",{class:v.loaderContainer,key:\"loader\"},g(\"div\",{class:v.loader}))}renderProgressBar(){return this.visibleElements.progressBar?g(\"div\",{class:v.progressBar,key:\"progress-bar\"}):null}renderAddForm(){const{submitting:t,selectedFile:e}=this,s=t||!e,i=this.visibleElements.cancelAddButton?g(\"button\",{type:\"button\",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(v.esriButton,v.esriButtonTertiary,v.esriButtonSmall,v.esriButtonHalf,t&&v.buttonDisabled)},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?g(\"button\",{type:\"submit\",disabled:s,class:this.classes(v.esriButton,v.esriButtonSecondary,v.esriButtonSmall,v.esriButtonHalf,{[v.buttonDisabled]:s})},this.messages.add):null,n=e?g(\"span\",{key:\"file-name\",class:v.fileName},e.name):null,r=g(\"form\",{bind:this,afterCreate:u,afterRemoved:p,\"data-node-ref\":\"_addAttachmentForm\",onsubmit:this._submitAddAttachment},g(\"fieldset\",{class:v.fileFieldset},n,g(\"label\",{class:this.classes(v.fileLabel,v.esriButton,v.esriButtonSecondary)},e?this.messages.changeFile:this.messages.selectFile,g(\"input\",{class:v.fileInput,type:\"file\",name:\"attachment\",bind:this,onchange:this._handleFileInputChange}))),a,i);return g(\"div\",{key:\"add-form-container\",class:v.formNode},r)}renderDetailsForm(t){const{visibleElements:e,viewModel:i,selectedFile:a,submitting:n}=this,{contentType:r,size:o,url:l}=t,{abilities:m}=i,d=n||!a,c=m.editing&&m.operations.delete&&e.deleteButton?g(\"button\",{key:\"delete-button\",type:\"button\",disabled:n,bind:this,onclick:e=>this._submitDeleteAttachment(e,t),class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonTertiary,v.deleteButton,{[v.buttonDisabled]:n})},this.messages.delete):null,h=m.editing&&m.operations.update&&e.updateButton?g(\"button\",{disabled:d,key:\"update-button\",type:\"submit\",class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonThird,{[v.buttonDisabled]:d})},this.messages.update):null,b=this.visibleElements.cancelUpdateButton?g(\"button\",{disabled:n,key:\"cancel-button\",type:\"button\",bind:this,onclick:this._cancelForm,class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonTertiary,v.esriButtonThird,{[v.buttonDisabled]:n})},this.messages.cancel):null,_=a?g(\"span\",{key:\"file-name\",class:v.fileName},a.name):null,f=m.editing&&m.operations.update?g(\"fieldset\",{key:\"file\",class:v.fileFieldset},_,g(\"label\",{class:this.classes(v.fileLabel,v.esriButton,v.esriButtonSecondary)},this.messages.changeFile,g(\"input\",{class:v.fileInput,type:\"file\",name:\"attachment\",bind:this,onchange:this._handleFileInputChange}))):null,y=g(\"fieldset\",{key:\"size\",class:v.metadataFieldset},g(\"label\",null,s(this.messagesUnits,o))),B=g(\"fieldset\",{key:\"content-type\",class:v.metadataFieldset},g(\"label\",null,r)),A=g(\"form\",{bind:this,afterCreate:u,afterRemoved:p,\"data-node-ref\":\"_updateAttachmentForm\",onsubmit:this._submitUpdateAttachment},g(\"div\",{class:v.metadata},y,B),f,g(\"div\",{class:v.actions},c,b,h));return g(\"div\",{key:\"edit-form-container\",class:v.formNode},g(\"a\",{class:v.itemLink,href:l,rel:\"noreferrer\",target:\"_blank\"},this.renderImageMask({attachmentInfo:t,size:400}),g(\"div\",{class:v.itemLinkOverlay},g(\"span\",{class:v.itemLinkOverlayIcon},g(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"32\",height:\"32\",viewBox:\"0 0 32 32\"},g(\"path\",{d:\"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z\"}),g(\"path\",{fill:\"none\",d:\"M0 0h32v32H0z\"}))))),A)}renderImageMask({attachmentInfo:t,size:e}){const{supportsResizeAttachments:s}=this.viewModel,{contentType:i,name:a,url:n}=t,r=s&&c(i),o=this._getCSSTransform(t,r),l=o?{transform:o,\"image-orientation\":\"none\"}:{},m=-1===n.indexOf(\"?\")?\"?\":\"&\",d=r?`${n}${m}w=${e}`:h(i),u={[v.itemMaskIcon]:!r},p={[v.itemImageResizable]:s};return g(\"div\",{class:this.classes(u,v.itemMask)},g(\"img\",{styles:l,alt:a,src:d,class:this.classes(p,v.itemImage)}))}renderAttachmentInfo({attachmentInfo:t,displayType:e}){const{viewModel:s}=this,{abilities:i}=s,{name:a,url:n}=t,r=this.renderImageMask({attachmentInfo:t,size:\"list\"===e?48:400}),o=i.editing?g(\"span\",{\"aria-hidden\":\"true\",class:this.classes(v.itemChevronIcon,b()?v.iconLeft:v.iconRight)}):null,l=[r,g(\"label\",{class:v.itemLabel},g(\"span\",{class:v.itemFilename},a||this.messages.noTitle),o)],m=i.editing?g(\"button\",{key:\"details-button\",bind:this,class:v.itemButton,title:this.messages.attachmentDetails,\"aria-label\":this.messages.attachmentDetails,\"data-attachment-info-id\":t.id,onclick:()=>this._startEditAttachment(t),type:\"button\"},l):g(\"a\",{key:\"details-link\",class:v.itemButton,href:n,target:\"_blank\"},l);return g(\"li\",{class:v.item,key:t},m)}renderAttachmentContainer(){const{displayType:t,viewModel:e,visibleElements:s}=this,{attachmentInfos:i,abilities:a}=e,n=i&&i.length,r={[v.containerList]:\"preview\"!==t,[v.containerPreview]:\"preview\"===t},o=a.editing&&a.operations.add&&s.addButton?g(\"button\",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(v.esriButton,v.esriButtonTertiary,v.addAttachmentButton),type:\"button\"},g(\"span\",{\"aria-hidden\":\"true\",class:this.classes(v.itemAddIcon,v.iconPlus)}),this.messages.add):null,l=n?g(\"ul\",{class:v.items},i.toArray().map((e=>this.renderAttachmentInfo({attachmentInfo:e,displayType:t})))):g(\"div\",{class:v.empty},this.messages.noAttachments);return g(\"div\",{key:\"attachments-container\",class:this.classes(v.container,r)},l,o)}_modeChanged(){this._set(\"error\",null),this._set(\"selectedFile\",null)}_handleFileInputChange(t){const e=t.target,s=e&&e.files&&e.files.item(0);this._set(\"selectedFile\",s)}_submitDeleteAttachment(t,e){t.preventDefault(),this.deleteAttachment(e)}_submitAddAttachment(t){t.preventDefault(),this.addAttachment()}_submitUpdateAttachment(t){t.preventDefault(),this.updateAttachment()}_startEditAttachment(t){const{viewModel:e}=this;e.activeAttachmentInfo=t,e.mode=\"edit\"}_startAddAttachment(){this.viewModel.mode=\"add\"}_cancelForm(t){t.preventDefault(),this.viewModel.mode=\"view\"}_getCSSTransform(t,e){const{orientationInfo:s}=t;return!this._supportsImageOrientation&&e&&s?[s.rotation?`rotate(${s.rotation}deg)`:\"\",s.mirrored?\"scaleX(-1)\":\"\"].join(\" \"):\"\"}};t([n(\"viewModel.abilities\")],B.prototype,\"abilities\",void 0),t([o()],B.prototype,\"displayType\",void 0),t([n(\"viewModel.graphic\")],B.prototype,\"graphic\",void 0),t([o({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],B.prototype,\"label\",void 0),t([o(),_(\"esri/widgets/Attachments/t9n/Attachments\")],B.prototype,\"messages\",void 0),t([o(),_(\"esri/core/t9n/Units\")],B.prototype,\"messagesUnits\",void 0),t([o({readOnly:!0})],B.prototype,\"selectedFile\",void 0),t([o({readOnly:!0})],B.prototype,\"submitting\",void 0),t([o({readOnly:!0})],B.prototype,\"error\",void 0),t([o({type:d})],B.prototype,\"viewModel\",void 0),t([o()],B.prototype,\"visibleElements\",void 0),t([r(\"visibleElements\")],B.prototype,\"castVisibleElements\",null),B=t([l(\"esri.widgets.Attachments\")],B);var A=B;export default A;\n"]},"metadata":{},"sourceType":"module"}