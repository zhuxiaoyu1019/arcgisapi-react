{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../core/maybe.js\";\n\nfunction e(e) {\n  const u = e.capabilities.disjointTimerQuery;\n  return t(u) ? null : u.timestampBits() > 0 ? new i(u) : r ? null : new s(u);\n}\n\nclass i {\n  constructor(t) {\n    this.timer = t, this.start = t.createQuery(), t.createTimestamp(this.start);\n  }\n\n  stop(t, e = 50) {\n    this.end = this.timer.createQuery(), this.timer.createTimestamp(this.end), this.checkQueryResult(t, e);\n  }\n\n  checkQueryResult(t, e) {\n    if (!this.timer.resultAvailable(this.end)) return void setTimeout(() => this.checkQueryResult(t, e), e);\n    if (this.timer.disjoint()) return void t(null);\n    const i = this.timer.getResult(this.start),\n          s = this.timer.getResult(this.end);\n    t((s - i) / 1e6);\n  }\n\n}\n\nclass s {\n  constructor(t) {\n    this.timer = t, this.query = t.createQuery(), r = !0, this.timer.beginTimeElapsed(this.query);\n  }\n\n  stop(t, e = 50) {\n    this.timer.endTimeElapsed(), r = !1, this.checkQueryResult(t, e);\n  }\n\n  checkQueryResult(t, e) {\n    const i = this.timer.resultAvailable(this.query),\n          s = this.timer.disjoint();\n    if (!i || s) s ? t(null) : setTimeout(() => this.checkQueryResult(t, e), e);else {\n      const e = this.timer.getResult(this.query);\n      t(e / 1e6);\n    }\n  }\n\n}\n\nlet r = !1;\nexport { e as startMeasurement };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/webgl/Measurement.js"],"names":["isNone","t","e","u","capabilities","disjointTimerQuery","timestampBits","i","r","s","constructor","timer","start","createQuery","createTimestamp","stop","end","checkQueryResult","resultAvailable","setTimeout","disjoint","getResult","query","beginTimeElapsed","endTimeElapsed","startMeasurement"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../core/maybe.js\";function e(e){const u=e.capabilities.disjointTimerQuery;return t(u)?null:u.timestampBits()>0?new i(u):r?null:new s(u)}class i{constructor(t){this.timer=t,this.start=t.createQuery(),t.createTimestamp(this.start)}stop(t,e=50){this.end=this.timer.createQuery(),this.timer.createTimestamp(this.end),this.checkQueryResult(t,e)}checkQueryResult(t,e){if(!this.timer.resultAvailable(this.end))return void setTimeout((()=>this.checkQueryResult(t,e)),e);if(this.timer.disjoint())return void t(null);const i=this.timer.getResult(this.start),s=this.timer.getResult(this.end);t((s-i)/1e6)}}class s{constructor(t){this.timer=t,this.query=t.createQuery(),r=!0,this.timer.beginTimeElapsed(this.query)}stop(t,e=50){this.timer.endTimeElapsed(),r=!1,this.checkQueryResult(t,e)}checkQueryResult(t,e){const i=this.timer.resultAvailable(this.query),s=this.timer.disjoint();if(!i||s)s?t(null):setTimeout((()=>this.checkQueryResult(t,e)),e);else{const e=this.timer.getResult(this.query);t(e/1e6)}}}let r=!1;export{e as startMeasurement};\n"]},"metadata":{},"sourceType":"module"}