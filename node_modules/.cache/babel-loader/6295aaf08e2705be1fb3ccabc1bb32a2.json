{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { bindSliceUniformsWithOrigin as r } from \"../core/shaderLibrary/Slice.glsl.js\";\nimport { bindVerticalOffsetUniforms as t } from \"../core/shaderLibrary/attributes/VerticalOffset.glsl.js\";\nimport { bindHUDUniforms as i } from \"../core/shaderLibrary/hud/HUD.glsl.js\";\nimport { bindOutputHighlight as o } from \"../core/shaderLibrary/output/OutputHighlight.glsl.js\";\nimport { bindMultipassGeometryTexture as s } from \"../core/shaderLibrary/shading/MultipassGeometryTest.glsl.js\";\nimport { bindMultipassTerrainTexture as a } from \"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { bindVisualVariablesUniforms as n } from \"../core/shaderLibrary/shading/VisualVariables.glsl.js\";\nimport { bindScreenSizePerspectiveUniforms as l } from \"../core/shaderLibrary/util/ScreenSizePerspective.glsl.js\";\nimport { bindProjectionMatrix as p, bindViewport as d, bindView as c, bindCameraPosition as u } from \"../core/shaderLibrary/util/View.glsl.js\";\nimport { ReloadableShaderModule as h } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as m } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { ShaderTechniqueConfiguration as g, parameter as f } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { Default3D as b } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { OITBlending as v } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as y } from \"../lib/Program.js\";\nimport { b as E, H as T } from \"../../../../chunks/HUDMaterial.glsl.js\";\nimport { defaultDepthWriteParams as P, makePipelineState as x, defaultColorWriteParams as O, simpleBlendingParams as S } from \"../../../webgl/renderState.js\";\n\nclass j extends m {\n  initializeProgram(e) {\n    const r = j.shader.get(),\n          t = this.configuration,\n          i = r.build({\n      output: t.output,\n      FrontFacePass: 2 === t.transparencyPassType,\n      viewingMode: e.viewingMode,\n      occlusionTestEnabled: t.occlusionTestEnabled,\n      signedDistanceFieldEnabled: t.sdf,\n      slicePlaneEnabled: t.slicePlaneEnabled,\n      sliceHighlightDisabled: !1,\n      sliceEnabledForVertexPrograms: !0,\n      debugDrawBorder: t.debugDrawBorder,\n      binaryHighlightOcclusionEnabled: t.binaryHighlightOcclusion,\n      screenCenterOffsetUnitsEnabled: t.screenCenterOffsetUnitsEnabled,\n      screenSizePerspectiveEnabled: t.screenSizePerspective,\n      verticalOffsetEnabled: t.verticalOffset,\n      pixelSnappingEnabled: t.pixelSnappingEnabled,\n      vvSize: t.vvSize,\n      vvColor: t.vvColor,\n      vvInstancingEnabled: !1,\n      isDraped: t.isDraped,\n      multipassGeometryEnabled: t.multipassGeometryEnabled,\n      multipassTerrainEnabled: t.multipassTerrainEnabled,\n      cullAboveGround: t.cullAboveGround\n    });\n    return new y(e.rctx, i, b);\n  }\n\n  bindPass(e, r) {\n    p(this.program, r.camera.projectionMatrix), this.program.setUniform1f(\"cameraGroundRelative\", r.camera.aboveGround ? 1 : -1), this.program.setUniform1f(\"perDistancePixelRatio\", Math.tan(r.camera.fovY / 2) / (r.camera.fullViewport[2] / 2)), this.program.setUniformMatrix4fv(\"viewNormal\", r.camera.viewInverseTransposeMatrix), this.program.setUniform1f(\"polygonOffset\", e.shaderPolygonOffset), t(this.program, e, r), l(this.program, e), this.program.setUniform1f(\"pixelRatio\", r.camera.pixelRatio || 1), d(this.program, r), 6 === this.configuration.output ? (this.program.setUniform2fv(\"cameraNearFar\", r.camera.nearFar), this.program.setUniform2fv(\"inverseViewport\", r.inverseViewport), s(this.program, r), a(this.program, r)) : (i(this.program, r), E(this.program, e, r.camera.pixelRatio || 1), n(this.program, e), this.configuration.occlusionTestEnabled && this.program.bindTexture(r.hudVisibilityTexture, \"hudVisibilityTexture\")), 4 === this.configuration.output && o(this.program, r);\n  }\n\n  bindDraw(e) {\n    c(this.program, e), u(this.program, e.origin, e.camera.viewInverseTransposeMatrix), r(this.program, this.configuration, e), this.program.rebindTextures();\n  }\n\n  setPipelineState(e) {\n    const r = this.configuration,\n          t = 3 === e,\n          i = 2 === e,\n          o = 515,\n          s = this.configuration.polygonOffsetEnabled && w,\n          a = (t || i) && 4 !== r.output ? (r.depthEnabled || 6 === r.output) && P : null;\n    return x({\n      blending: 0 === r.output || 7 === r.output || 4 === r.output ? t ? D : v(e) : null,\n      depthTest: {\n        func: o\n      },\n      depthWrite: a,\n      colorWrite: O,\n      polygonOffset: s\n    });\n  }\n\n  initializePipeline() {\n    return this.setPipelineState(this.configuration.transparencyPassType);\n  }\n\n  get primitiveType() {\n    return 6 === this.configuration.output ? 0 : 4;\n  }\n\n}\n\nj.shader = new h(T, () => import(\"./HUDMaterial.glsl.js\"));\nconst w = {\n  factor: 0,\n  units: -4\n},\n      D = S(1, 771);\n\nclass U extends g {\n  constructor() {\n    super(...arguments), this.output = 0, this.occlusionTestEnabled = !0, this.sdf = !1, this.vvSize = !1, this.vvColor = !1, this.verticalOffset = !1, this.screenSizePerspective = !1, this.screenCenterOffsetUnitsEnabled = 0, this.debugDrawBorder = !0, this.binaryHighlightOcclusion = !0, this.slicePlaneEnabled = !1, this.polygonOffsetEnabled = !1, this.depthEnabled = !0, this.transparencyPassType = 3, this.pixelSnappingEnabled = !0, this.isDraped = !1, this.multipassGeometryEnabled = !1, this.multipassTerrainEnabled = !1, this.cullAboveGround = !1;\n  }\n\n}\n\ne([f({\n  count: 8\n})], U.prototype, \"output\", void 0), e([f()], U.prototype, \"occlusionTestEnabled\", void 0), e([f()], U.prototype, \"sdf\", void 0), e([f()], U.prototype, \"vvSize\", void 0), e([f()], U.prototype, \"vvColor\", void 0), e([f()], U.prototype, \"verticalOffset\", void 0), e([f()], U.prototype, \"screenSizePerspective\", void 0), e([f({\n  count: 2\n})], U.prototype, \"screenCenterOffsetUnitsEnabled\", void 0), e([f()], U.prototype, \"debugDrawBorder\", void 0), e([f()], U.prototype, \"binaryHighlightOcclusion\", void 0), e([f()], U.prototype, \"slicePlaneEnabled\", void 0), e([f()], U.prototype, \"polygonOffsetEnabled\", void 0), e([f()], U.prototype, \"depthEnabled\", void 0), e([f({\n  count: 4\n})], U.prototype, \"transparencyPassType\", void 0), e([f()], U.prototype, \"pixelSnappingEnabled\", void 0), e([f()], U.prototype, \"isDraped\", void 0), e([f()], U.prototype, \"multipassGeometryEnabled\", void 0), e([f()], U.prototype, \"multipassTerrainEnabled\", void 0), e([f()], U.prototype, \"cullAboveGround\", void 0);\nexport { j as HUDMaterialTechnique, U as HUDMaterialTechniqueConfiguration };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechnique.js"],"names":["_","e","bindSliceUniformsWithOrigin","r","bindVerticalOffsetUniforms","t","bindHUDUniforms","i","bindOutputHighlight","o","bindMultipassGeometryTexture","s","bindMultipassTerrainTexture","a","bindVisualVariablesUniforms","n","bindScreenSizePerspectiveUniforms","l","bindProjectionMatrix","p","bindViewport","d","bindView","c","bindCameraPosition","u","ReloadableShaderModule","h","ShaderTechnique","m","ShaderTechniqueConfiguration","g","parameter","f","Default3D","b","OITBlending","v","Program","y","E","H","T","defaultDepthWriteParams","P","makePipelineState","x","defaultColorWriteParams","O","simpleBlendingParams","S","j","initializeProgram","shader","get","configuration","build","output","FrontFacePass","transparencyPassType","viewingMode","occlusionTestEnabled","signedDistanceFieldEnabled","sdf","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","debugDrawBorder","binaryHighlightOcclusionEnabled","binaryHighlightOcclusion","screenCenterOffsetUnitsEnabled","screenSizePerspectiveEnabled","screenSizePerspective","verticalOffsetEnabled","verticalOffset","pixelSnappingEnabled","vvSize","vvColor","vvInstancingEnabled","isDraped","multipassGeometryEnabled","multipassTerrainEnabled","cullAboveGround","rctx","bindPass","program","camera","projectionMatrix","setUniform1f","aboveGround","Math","tan","fovY","fullViewport","setUniformMatrix4fv","viewInverseTransposeMatrix","shaderPolygonOffset","pixelRatio","setUniform2fv","nearFar","inverseViewport","bindTexture","hudVisibilityTexture","bindDraw","origin","rebindTextures","setPipelineState","polygonOffsetEnabled","w","depthEnabled","blending","D","depthTest","func","depthWrite","colorWrite","polygonOffset","initializePipeline","primitiveType","factor","units","U","constructor","arguments","count","prototype","HUDMaterialTechnique","HUDMaterialTechniqueConfiguration"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{bindSliceUniformsWithOrigin as r}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindVerticalOffsetUniforms as t}from\"../core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{bindHUDUniforms as i}from\"../core/shaderLibrary/hud/HUD.glsl.js\";import{bindOutputHighlight as o}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{bindMultipassGeometryTexture as s}from\"../core/shaderLibrary/shading/MultipassGeometryTest.glsl.js\";import{bindMultipassTerrainTexture as a}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindVisualVariablesUniforms as n}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{bindScreenSizePerspectiveUniforms as l}from\"../core/shaderLibrary/util/ScreenSizePerspective.glsl.js\";import{bindProjectionMatrix as p,bindViewport as d,bindView as c,bindCameraPosition as u}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as h}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as m}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as g,parameter as f}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as b}from\"../lib/DefaultVertexAttributeLocations.js\";import{OITBlending as v}from\"../lib/OrderIndependentTransparency.js\";import{Program as y}from\"../lib/Program.js\";import{b as E,H as T}from\"../../../../chunks/HUDMaterial.glsl.js\";import{defaultDepthWriteParams as P,makePipelineState as x,defaultColorWriteParams as O,simpleBlendingParams as S}from\"../../../webgl/renderState.js\";class j extends m{initializeProgram(e){const r=j.shader.get(),t=this.configuration,i=r.build({output:t.output,FrontFacePass:2===t.transparencyPassType,viewingMode:e.viewingMode,occlusionTestEnabled:t.occlusionTestEnabled,signedDistanceFieldEnabled:t.sdf,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,debugDrawBorder:t.debugDrawBorder,binaryHighlightOcclusionEnabled:t.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:t.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:t.screenSizePerspective,verticalOffsetEnabled:t.verticalOffset,pixelSnappingEnabled:t.pixelSnappingEnabled,vvSize:t.vvSize,vvColor:t.vvColor,vvInstancingEnabled:!1,isDraped:t.isDraped,multipassGeometryEnabled:t.multipassGeometryEnabled,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new y(e.rctx,i,b)}bindPass(e,r){p(this.program,r.camera.projectionMatrix),this.program.setUniform1f(\"cameraGroundRelative\",r.camera.aboveGround?1:-1),this.program.setUniform1f(\"perDistancePixelRatio\",Math.tan(r.camera.fovY/2)/(r.camera.fullViewport[2]/2)),this.program.setUniformMatrix4fv(\"viewNormal\",r.camera.viewInverseTransposeMatrix),this.program.setUniform1f(\"polygonOffset\",e.shaderPolygonOffset),t(this.program,e,r),l(this.program,e),this.program.setUniform1f(\"pixelRatio\",r.camera.pixelRatio||1),d(this.program,r),6===this.configuration.output?(this.program.setUniform2fv(\"cameraNearFar\",r.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",r.inverseViewport),s(this.program,r),a(this.program,r)):(i(this.program,r),E(this.program,e,r.camera.pixelRatio||1),n(this.program,e),this.configuration.occlusionTestEnabled&&this.program.bindTexture(r.hudVisibilityTexture,\"hudVisibilityTexture\")),4===this.configuration.output&&o(this.program,r)}bindDraw(e){c(this.program,e),u(this.program,e.origin,e.camera.viewInverseTransposeMatrix),r(this.program,this.configuration,e),this.program.rebindTextures()}setPipelineState(e){const r=this.configuration,t=3===e,i=2===e,o=515,s=this.configuration.polygonOffsetEnabled&&w,a=(t||i)&&4!==r.output?(r.depthEnabled||6===r.output)&&P:null;return x({blending:0===r.output||7===r.output||4===r.output?t?D:v(e):null,depthTest:{func:o},depthWrite:a,colorWrite:O,polygonOffset:s})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}get primitiveType(){return 6===this.configuration.output?0:4}}j.shader=new h(T,(()=>import(\"./HUDMaterial.glsl.js\")));const w={factor:0,units:-4},D=S(1,771);class U extends g{constructor(){super(...arguments),this.output=0,this.occlusionTestEnabled=!0,this.sdf=!1,this.vvSize=!1,this.vvColor=!1,this.verticalOffset=!1,this.screenSizePerspective=!1,this.screenCenterOffsetUnitsEnabled=0,this.debugDrawBorder=!0,this.binaryHighlightOcclusion=!0,this.slicePlaneEnabled=!1,this.polygonOffsetEnabled=!1,this.depthEnabled=!0,this.transparencyPassType=3,this.pixelSnappingEnabled=!0,this.isDraped=!1,this.multipassGeometryEnabled=!1,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([f({count:8})],U.prototype,\"output\",void 0),e([f()],U.prototype,\"occlusionTestEnabled\",void 0),e([f()],U.prototype,\"sdf\",void 0),e([f()],U.prototype,\"vvSize\",void 0),e([f()],U.prototype,\"vvColor\",void 0),e([f()],U.prototype,\"verticalOffset\",void 0),e([f()],U.prototype,\"screenSizePerspective\",void 0),e([f({count:2})],U.prototype,\"screenCenterOffsetUnitsEnabled\",void 0),e([f()],U.prototype,\"debugDrawBorder\",void 0),e([f()],U.prototype,\"binaryHighlightOcclusion\",void 0),e([f()],U.prototype,\"slicePlaneEnabled\",void 0),e([f()],U.prototype,\"polygonOffsetEnabled\",void 0),e([f()],U.prototype,\"depthEnabled\",void 0),e([f({count:4})],U.prototype,\"transparencyPassType\",void 0),e([f()],U.prototype,\"pixelSnappingEnabled\",void 0),e([f()],U.prototype,\"isDraped\",void 0),e([f()],U.prototype,\"multipassGeometryEnabled\",void 0),e([f()],U.prototype,\"multipassTerrainEnabled\",void 0),e([f()],U.prototype,\"cullAboveGround\",void 0);export{j as HUDMaterialTechnique,U as HUDMaterialTechniqueConfiguration};\n"]},"metadata":{},"sourceType":"module"}