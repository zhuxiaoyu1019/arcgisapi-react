{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport { throwIfAborted as t } from \"../../core/promiseUtils.js\";\nimport { pt2px as r } from \"../../core/screenUtils.js\";\nimport { numericHash as a } from \"../../core/string.js\";\nimport { getJsonType as i, isPolygon as s, isPolyline as o } from \"../../geometry/support/jsonUtils.js\";\nimport { analyzeCIMSymbol as n, analyzeCIMResource as c } from \"./cimAnalyzer.js\";\nimport l from \"./Rasterizer.js\";\nimport { TextRasterizer as m } from \"./TextRasterizer.js\";\nimport { createLabelOverrideFunction as h, evaluateValueOrFunction as f, colorToArray as g } from \"./utils.js\";\nimport { scaleCIMMarker as y } from \"../support/cimSymbolUtils.js\";\nimport u from \"../support/Symbol3DAnchorPosition2D.js\";\nvar p;\n!function (e) {\n  e.Legend = \"legend\", e.Preview = \"preview\";\n}(p || (p = {}));\n\nconst d = (e, t, a) => {\n  if (e && e.targetSize) {\n    let i;\n\n    if (a) {\n      const t = Math.max(a.frame.xmax - a.frame.xmin, a.frame.ymax - a.frame.ymin);\n      i = e.targetSize / r(t);\n    } else i = e.targetSize / t.referenceSize;\n\n    return i;\n  }\n\n  return e && e.scaleFactor ? e.scaleFactor : 1;\n},\n      M = {\n  fill: {\n    legend: {\n      frame: {\n        xmax: 15,\n        xmin: 0,\n        ymax: 15,\n        ymin: 0\n      },\n      geometry: {\n        rings: [[[0, 15], [15, 7.5], [15, 0], [0, 0], [0, 15]]]\n      },\n      canvasPaths: {\n        rings: [[[0, 15], [0, 0], [15, 7.5], [15, 15], [0, 15]]]\n      }\n    },\n    preview: {\n      frame: {\n        xmax: 100,\n        xmin: 0,\n        ymax: 100,\n        ymin: 0\n      },\n      geometry: {\n        rings: [[[0, 100], [100, 100], [100, 0], [0, 0], [0, 100]]]\n      },\n      canvasPaths: {\n        rings: [[[0, 100], [0, 0], [100, 0], [100, 100], [0, 100]]]\n      }\n    }\n  },\n  stroke: {\n    legend: {\n      frame: {\n        xmax: 24,\n        xmin: 0,\n        ymax: -2,\n        ymin: 2\n      },\n      geometry: {\n        paths: [[[0, 0], [12, 0], [24, 0]]]\n      },\n      canvasPaths: {\n        paths: [[[0, 2], [12, 2], [24, 2]]]\n      }\n    },\n    preview: {\n      frame: {\n        xmax: 100,\n        xmin: 0,\n        ymax: -2,\n        ymin: 2\n      },\n      geometry: {\n        paths: [[[0, 0], [50, 0], [100, 0]]]\n      },\n      canvasPaths: {\n        paths: [[[0, 2], [50, 2], [100, 2]]]\n      }\n    }\n  }\n};\n\nclass C {\n  constructor(e, t) {\n    this._spatialReference = e, this._avoidSDF = t, this._resourceCache = new Map(), this._rasterizer = new l(), this._textRasterizer = new m(), this._pictureMarkerCache = new Map();\n  }\n\n  async rasterizeCIMSymbolAsync(e, t, r, a, s, o, n, c) {\n    a = a || (t ? null != t.centroid ? \"esriGeometryPolygon\" : i(t.geometry) : null) || z(e);\n    const l = await this.analyzeCIMSymbol(e, t ? I(t.attributes) : null, r, a, c);\n    return this.rasterizeCIMSymbol(l, t, a, s, o, n);\n  }\n\n  async analyzeCIMSymbol(e, r, a, i, s) {\n    const o = [],\n          c = r ? {\n      geometryType: i,\n      spatialReference: this._spatialReference,\n      fields: r\n    } : null;\n    let l;\n    await n(e.data, c, o, this._avoidSDF), t(s);\n\n    for (const t of o) \"CIMPictureMarker\" !== t.cim.type && \"CIMPictureFill\" !== t.cim.type && \"CIMPictureStroke\" !== t.cim.type || (l || (l = []), l.push(this.fetchPictureMarkerResource(t, s))), a && \"text\" === t.type && \"string\" == typeof t.text && t.text.indexOf(\"[\") > -1 && (t.text = h(a, t.text, t.cim.textCase));\n\n    return l && (await Promise.all(l)), o;\n  }\n\n  async fetchPictureMarkerResource(t, r) {\n    const a = t.materialHash;\n\n    if (!this._pictureMarkerCache.get(a)) {\n      const i = (await e(t.cim.url, {\n        responseType: \"image\",\n        signal: r && r.signal\n      })).data;\n\n      this._pictureMarkerCache.set(a, i);\n    }\n  }\n\n  rasterizeCIMSymbol(e, t, r, a, i, s) {\n    const o = [];\n\n    for (const n of e) {\n      a && \"function\" == typeof a.scaleFactor && (a.scaleFactor = a.scaleFactor(t, i, s));\n\n      const e = this._getRasterizedResource(n, t, r, a, i, s);\n\n      if (!e) continue;\n      let c = 0,\n          l = e.anchorX || 0,\n          m = e.anchorY || 0,\n          h = !1,\n          g = 0,\n          y = 0;\n\n      if (\"esriGeometryPoint\" === r) {\n        const e = d(a, n, null);\n        if (g = f(n.offsetX, t, i, s) * e || 0, y = f(n.offsetY, t, i, s) * e || 0, \"marker\" === n.type) c = f(n.rotation, t, i, s) || 0, h = !!n.rotateClockwise && n.rotateClockwise;else if (\"text\" === n.type) {\n          if (c = f(n.angle, t, i, s) || 0, void 0 !== n.horizontalAlignment) switch (n.horizontalAlignment) {\n            case \"left\":\n              l = -.5;\n              break;\n\n            case \"right\":\n              l = .5;\n              break;\n\n            default:\n              l = 0;\n          }\n          if (void 0 !== n.verticalAlignment) switch (n.verticalAlignment) {\n            case \"top\":\n              m = .5;\n              break;\n\n            case \"bottom\":\n              m = -.5;\n              break;\n\n            case \"baseline\":\n              m = -.25;\n              break;\n\n            default:\n              m = 0;\n          }\n        }\n      }\n\n      null != e && o.push({\n        angle: c,\n        rotateClockWise: h,\n        anchorX: l,\n        anchorY: m,\n        offsetX: g,\n        offsetY: y,\n        rasterizedResource: e\n      });\n    }\n\n    return this.getSymbolImage(o);\n  }\n\n  getSymbolImage(e) {\n    const t = document.createElement(\"canvas\"),\n          a = t.getContext(\"2d\");\n    let i = 0,\n        s = 0,\n        o = 0,\n        n = 0;\n    const c = [];\n\n    for (let f = 0; f < e.length; f++) {\n      const t = e[f],\n            l = t.rasterizedResource;\n      if (!l) continue;\n      const m = l.size,\n            h = t.offsetX,\n            g = t.offsetY,\n            y = t.anchorX,\n            u = t.anchorY,\n            p = t.rotateClockWise || !1;\n      let d = t.angle,\n          M = r(h) - m[0] * (.5 + y),\n          C = r(g) - m[1] * (.5 + u),\n          I = M + m[0],\n          z = C + m[1];\n\n      if (d) {\n        p && (d = -d);\n        const e = Math.sin(d * Math.PI / 180),\n              t = Math.cos(d * Math.PI / 180),\n              r = M * t - C * e,\n              a = M * e + C * t,\n              i = M * t - z * e,\n              s = M * e + z * t,\n              o = I * t - z * e,\n              n = I * e + z * t,\n              c = I * t - C * e,\n              l = I * e + C * t;\n        M = Math.min(r, i, o, c), C = Math.min(a, s, n, l), I = Math.max(r, i, o, c), z = Math.max(a, s, n, l);\n      }\n\n      i = M < i ? M : i, s = C < s ? C : s, o = I > o ? I : o, n = z > n ? z : n;\n      const P = a.createImageData(l.size[0], l.size[1]);\n      P.data.set(new Uint8ClampedArray(l.image.buffer));\n      const x = {\n        offsetX: h,\n        offsetY: g,\n        rotateClockwise: p,\n        angle: d,\n        rasterizedImage: P,\n        anchorX: y,\n        anchorY: u\n      };\n      c.push(x);\n    }\n\n    t.width = o - i, t.height = n - s;\n    const l = -i,\n          m = n;\n\n    for (let f = 0; f < c.length; f++) {\n      const e = c[f],\n            t = this._imageDataToCanvas(e.rasterizedImage),\n            i = e.rasterizedImage.width,\n            s = e.rasterizedImage.height,\n            o = l - i * (.5 + e.anchorX),\n            n = m - s * (.5 - e.anchorY);\n\n      if (e.angle) {\n        const i = (360 - e.angle) * Math.PI / 180;\n        a.save(), a.translate(r(e.offsetX), -r(e.offsetY)), a.translate(l, m), a.rotate(i), a.translate(-l, -m), a.drawImage(t, o, n), a.restore();\n      } else a.drawImage(t, o + r(e.offsetX), n - r(e.offsetY));\n    }\n\n    const h = new u({\n      x: l / t.width - .5,\n      y: m / t.height - .5\n    });\n    return {\n      imageData: 0 !== t.width && 0 !== t.height ? a.getImageData(0, 0, t.width, t.height) : a.createImageData(1, 1),\n      anchorPosition: h\n    };\n  }\n\n  _imageDataToCanvas(e) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const t = this._imageDataCanvas,\n          r = t.getContext(\"2d\");\n    return t.width = e.width, t.height = e.height, r.putImageData(e, 0, 0), t;\n  }\n\n  _imageTo32Array(e, t, r) {\n    this._imageDataCanvas || (this._imageDataCanvas = document.createElement(\"canvas\"));\n    const a = this._imageDataCanvas,\n          i = a.getContext(\"2d\");\n    return a.width = t, a.height = r, i.drawImage(e, 0, 0, t, r), new Uint32Array(i.getImageData(0, 0, t, r).data.buffer);\n  }\n\n  _getRasterizedResource(e, t, r, i, s, o) {\n    let n, c, l, m;\n\n    if (\"esriGeometryPolyline\" === r || \"esriGeometryPolygon\" === r) {\n      const m = i && i.style ? i.style : p.Legend,\n            h = \"esriGeometryPolyline\" === r ? M.stroke[m] : M.fill[m];\n\n      if (\"line\" === e.type) {\n        if (\"CIMSolidStroke\" !== e.cim.type) {\n          if (\"CIMPictureStroke\" === e.cim.type) {\n            const r = f(e.width, t, s, o),\n                  {\n              image: a,\n              width: i,\n              height: n\n            } = this._getPictureResource(e, r);\n\n            return this._rasterizePictureResource(e, a, i, n, h, r);\n          }\n\n          return null;\n        }\n\n        ({\n          analyzedCIM: n,\n          hash: l\n        } = P(e, t, s, o)), c = this._embedCIMLayerInVectorMarker(n, h);\n      } else if (\"marker\" === e.type) {\n        if (\"CIMPictureMarker\" === e.cim.type) return null;\n        if (\"CIMVectorMarker\" !== e.cim.type) return null;\n        e.cim.offsetX = f(e.offsetX, t, s, o), e.cim.offsetY = f(e.offsetY, t, s, o), e.cim.rotation = f(e.rotation, t, s, o), e.cim.markerPlacement = e.markerPlacement, ({\n          analyzedCIM: n\n        } = P(e, t, s, o)), l = a(JSON.stringify(n)).toString(), c = this._embedCIMLayerInVectorMarker(n, h);\n      } else {\n        if (\"text\" === e.type) return null;\n\n        if (\"fill\" === e.type) {\n          if (\"CIMHatchFill\" === e.cim.type || \"CIMVectorMarker\" === e.cim.type || \"CIMPictureMarker\" === e.cim.type || \"CIMPictureFill\" === e.cim.type) {\n            const r = e.cim.size || e.cim.height;\n            let a, i, c;\n            if (\"CIMPictureMarker\" === e.cim.type || \"CIMPictureFill\" === e.cim.type) ({\n              image: a,\n              width: i,\n              height: c\n            } = this._getPictureResource(e, r));else {\n              ({\n                analyzedCIM: n,\n                hash: l\n              } = P(e, t, s, o));\n\n              const r = this._rasterizer.rasterizeJSONResource(n, 1, this._avoidSDF);\n\n              a = r.image, i = r.size[0], c = r.size[1];\n            }\n            return this._rasterizePictureResource(e, a, i, c, h, null);\n          }\n\n          if (\"CIMSolidFill\" !== e.cim.type) return null;\n          ({\n            analyzedCIM: n,\n            hash: l\n          } = P(e, t, s, o)), c = this._embedCIMLayerInVectorMarker(n, h);\n        }\n      }\n    } else {\n      if (\"text\" === e.type) return m = this._rasterizeTextResource(e, t, i, s, o), m;\n      ({\n        analyzedCIM: n,\n        hash: l\n      } = P(e, t, s, o));\n      const r = d(i, e, null);\n\n      if (\"CIMPictureMarker\" === e.cim.type) {\n        const a = f(e.size, t, s, o) * r,\n              {\n          image: i,\n          width: n,\n          height: c\n        } = this._getPictureResource(e, a);\n\n        return m = {\n          image: i,\n          size: [n, c],\n          sdf: !1,\n          simplePattern: !1,\n          anchorX: e.anchorPoint ? e.anchorPoint.x : 0,\n          anchorY: e.anchorPoint ? e.anchorPoint.y : 0\n        }, m;\n      }\n\n      y(n, r, {\n        preserveOutlineWidth: !1\n      }), c = n;\n    }\n\n    l += r, i && (l += JSON.stringify(i));\n    const h = this._resourceCache;\n    return h.has(l) ? h.get(l) : (m = this._rasterizer.rasterizeJSONResource(c, window.devicePixelRatio || 1, this._avoidSDF), h.set(l, m), m);\n  }\n\n  _rasterizeTextResource(e, t, r, a, i) {\n    const s = d(r, e, null),\n          o = f(e.text, t, a, i);\n    if (!o || 0 === o.length) return null;\n    const n = f(e.fontName, t, a, i),\n          c = f(e.style, t, a, i),\n          l = f(e.weight, t, a, i),\n          m = f(e.decoration, t, a, i),\n          h = f(e.size, t, a, i) * s,\n          y = f(e.horizontalAlignment, t, a, i),\n          u = f(e.verticalAlignment, t, a, i),\n          p = g(f(e.color, t, a, i)),\n          M = g(f(e.outlineColor, t, a, i)),\n          C = {\n      color: p,\n      size: h,\n      horizontalAlignment: y,\n      verticalAlignment: u,\n      font: {\n        family: n,\n        style: c,\n        weight: l,\n        decoration: m\n      },\n      halo: {\n        size: f(e.outlineSize, t, a, i) || 0,\n        color: M,\n        style: c\n      },\n      pixelRatio: 1,\n      premultiplyColors: !this._avoidSDF\n    };\n    return this._textRasterizer.rasterizeText(o, C);\n  }\n\n  _rasterizePictureResource(e, t, a, i, n, c) {\n    const l = document.createElement(\"canvas\"),\n          m = l.getContext(\"2d\");\n    l.height = r(Math.max(Math.abs(n.frame.ymax - n.frame.ymin), c)), l.width = r(Math.abs(n.frame.xmax - n.frame.xmin));\n    const h = m.createImageData(a, i);\n    h.data.set(new Uint8ClampedArray(t.buffer));\n\n    const f = this._imageDataToCanvas(h),\n          g = m.createPattern(f, \"repeat\"),\n          y = Math.cos((-e.cim.rotation || 0) * Math.PI / 180),\n          u = Math.sin((-e.cim.rotation || 0) * Math.PI / 180);\n\n    g.setTransform({\n      m11: y,\n      m12: u,\n      m21: -u,\n      m22: y,\n      m41: r(e.cim.offsetX) || 0,\n      m42: r(e.cim.offsetY) || 0\n    });\n    const p = n.canvasPaths;\n    let d, M, C;\n    s(p) ? (d = p.rings, m.fillStyle = g, M = m.fill, C = [\"evenodd\"]) : o(p) && (d = p.paths, m.strokeStyle = g, m.lineWidth = c, M = m.stroke, d[0][0][1] = l.height / 2, d[0][1][1] = l.height / 2), m.beginPath();\n\n    for (const s of d) {\n      const e = s ? s.length : 0;\n\n      if (e > 1) {\n        let t = s[0];\n        m.moveTo(r(t[0]), r(t[1]));\n\n        for (let a = 1; a < e; ++a) t = s[a], m.lineTo(r(t[0]), r(t[1]));\n\n        m.closePath();\n      }\n    }\n\n    M.apply(m, C);\n    const I = m.getImageData(0, 0, l.width, l.height),\n          z = new Uint8Array(I.data);\n    return {\n      size: [l.width, l.height],\n      image: new Uint32Array(z.buffer),\n      sdf: !1,\n      simplePattern: !1,\n      anchorX: 0,\n      anchorY: 0\n    };\n  }\n\n  _getPictureResource(e, t) {\n    const a = this._pictureMarkerCache.get(e.materialHash);\n\n    if (!a) return null;\n    const i = a.height / a.width,\n          s = t ? i > 1 ? r(t) : r(t) / i : a.width,\n          o = t ? i > 1 ? r(t) * i : r(t) : a.height;\n    return {\n      image: this._imageTo32Array(a, s, o),\n      width: s,\n      height: o\n    };\n  }\n\n  _embedCIMLayerInVectorMarker(e, t) {\n    const r = s(t.geometry) ? \"CIMPolygonSymbol\" : \"CIMLineSymbol\";\n    return {\n      type: \"CIMVectorMarker\",\n      frame: t.frame,\n      markerGraphics: [{\n        type: \"CIMMarkerGraphic\",\n        geometry: t.geometry,\n        symbol: {\n          type: r,\n          symbolLayers: [e]\n        }\n      }]\n    };\n  }\n\n}\n\nfunction I(e) {\n  return (e ? Object.keys(e) : []).map(t => ({\n    name: t,\n    alias: t,\n    type: \"string\" == typeof e[t] ? \"esriFieldTypeString\" : \"esriFieldTypeDouble\"\n  }));\n}\n\nfunction z(e) {\n  if (!(e && e.data && e.data.symbol)) return null;\n\n  switch (e.data.symbol.type) {\n    case \"CIMPointSymbol\":\n    case \"CIMTextSymbol\":\n      return \"esriGeometryPoint\";\n\n    case \"CIMLineSymbol\":\n      return \"esriGeometryPolyline\";\n\n    case \"CIMPolygonSymbol\":\n      return \"esriGeometryPolygon\";\n\n    default:\n      return null;\n  }\n}\n\nfunction P(e, t, r, a) {\n  let i, s;\n\n  if (\"function\" == typeof e.materialHash) {\n    i = (0, e.materialHash)(t, r, a), s = c(e.cim, e.materialOverrides);\n  } else i = e.materialHash, s = e.cim;\n\n  return {\n    analyzedCIM: s,\n    hash: i\n  };\n}\n\nexport { C as CIMSymbolRasterizer, p as GeometryStyle };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js"],"names":["e","throwIfAborted","t","pt2px","r","numericHash","a","getJsonType","i","isPolygon","s","isPolyline","o","analyzeCIMSymbol","n","analyzeCIMResource","c","l","TextRasterizer","m","createLabelOverrideFunction","h","evaluateValueOrFunction","f","colorToArray","g","scaleCIMMarker","y","u","p","Legend","Preview","d","targetSize","Math","max","frame","xmax","xmin","ymax","ymin","referenceSize","scaleFactor","M","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","C","constructor","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","rasterizeCIMSymbolAsync","centroid","z","I","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","data","cim","type","push","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","materialHash","get","url","responseType","signal","set","_getRasterizedResource","anchorX","anchorY","offsetX","offsetY","rotation","rotateClockwise","angle","horizontalAlignment","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","document","createElement","getContext","length","size","sin","PI","cos","min","P","createImageData","Uint8ClampedArray","image","buffer","x","rasterizedImage","width","height","_imageDataToCanvas","save","translate","rotate","drawImage","restore","imageData","getImageData","anchorPosition","_imageDataCanvas","putImageData","_imageTo32Array","Uint32Array","style","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","_embedCIMLayerInVectorMarker","markerPlacement","JSON","stringify","toString","rasterizeJSONResource","_rasterizeTextResource","sdf","simplePattern","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","weight","decoration","color","outlineColor","font","family","halo","outlineSize","pixelRatio","premultiplyColors","rasterizeText","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","fillStyle","strokeStyle","lineWidth","beginPath","moveTo","lineTo","closePath","apply","Uint8Array","markerGraphics","symbol","symbolLayers","Object","keys","map","name","alias","materialOverrides","CIMSymbolRasterizer","GeometryStyle"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,kBAAb;AAAgC,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,4BAA/B;AAA4D,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,2BAAtB;AAAkD,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,sBAA5B;AAAmD,SAAOC,WAAW,IAAIC,CAAtB,EAAwBC,SAAS,IAAIC,CAArC,EAAuCC,UAAU,IAAIC,CAArD,QAA2D,qCAA3D;AAAiG,SAAOC,gBAAgB,IAAIC,CAA3B,EAA6BC,kBAAkB,IAAIC,CAAnD,QAAyD,kBAAzD;AAA4E,OAAOC,CAAP,MAAa,iBAAb;AAA+B,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,qBAA/B;AAAqD,SAAOC,2BAA2B,IAAIC,CAAtC,EAAwCC,uBAAuB,IAAIC,CAAnE,EAAqEC,YAAY,IAAIC,CAArF,QAA2F,YAA3F;AAAwG,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,8BAA/B;AAA8D,OAAOC,CAAP,MAAa,wCAAb;AAAsD,IAAIC,CAAJ;AAAM,CAAC,UAAS7B,CAAT,EAAW;AAACA,EAAAA,CAAC,CAAC8B,MAAF,GAAS,QAAT,EAAkB9B,CAAC,CAAC+B,OAAF,GAAU,SAA5B;AAAsC,CAAlD,CAAmDF,CAAC,KAAGA,CAAC,GAAC,EAAL,CAApD,CAAD;;AAA+D,MAAMG,CAAC,GAAC,CAAChC,CAAD,EAAGE,CAAH,EAAKI,CAAL,KAAS;AAAC,MAAGN,CAAC,IAAEA,CAAC,CAACiC,UAAR,EAAmB;AAAC,QAAIzB,CAAJ;;AAAM,QAAGF,CAAH,EAAK;AAAC,YAAMJ,CAAC,GAACgC,IAAI,CAACC,GAAL,CAAS7B,CAAC,CAAC8B,KAAF,CAAQC,IAAR,GAAa/B,CAAC,CAAC8B,KAAF,CAAQE,IAA9B,EAAmChC,CAAC,CAAC8B,KAAF,CAAQG,IAAR,GAAajC,CAAC,CAAC8B,KAAF,CAAQI,IAAxD,CAAR;AAAsEhC,MAAAA,CAAC,GAACR,CAAC,CAACiC,UAAF,GAAa7B,CAAC,CAACF,CAAD,CAAhB;AAAoB,KAAhG,MAAqGM,CAAC,GAACR,CAAC,CAACiC,UAAF,GAAa/B,CAAC,CAACuC,aAAjB;;AAA+B,WAAOjC,CAAP;AAAS;;AAAA,SAAOR,CAAC,IAAEA,CAAC,CAAC0C,WAAL,GAAiB1C,CAAC,CAAC0C,WAAnB,GAA+B,CAAtC;AAAwC,CAAjO;AAAA,MAAkOC,CAAC,GAAC;AAACC,EAAAA,IAAI,EAAC;AAACC,IAAAA,MAAM,EAAC;AAACT,MAAAA,KAAK,EAAC;AAACC,QAAAA,IAAI,EAAC,EAAN;AAASC,QAAAA,IAAI,EAAC,CAAd;AAAgBC,QAAAA,IAAI,EAAC,EAArB;AAAwBC,QAAAA,IAAI,EAAC;AAA7B,OAAP;AAAuCM,MAAAA,QAAQ,EAAC;AAACC,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,EAAH,CAAD,EAAQ,CAAC,EAAD,EAAI,GAAJ,CAAR,EAAiB,CAAC,EAAD,EAAI,CAAJ,CAAjB,EAAwB,CAAC,CAAD,EAAG,CAAH,CAAxB,EAA8B,CAAC,CAAD,EAAG,EAAH,CAA9B,CAAD;AAAP,OAAhD;AAAgGC,MAAAA,WAAW,EAAC;AAACD,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,EAAH,CAAD,EAAQ,CAAC,CAAD,EAAG,CAAH,CAAR,EAAc,CAAC,EAAD,EAAI,GAAJ,CAAd,EAAuB,CAAC,EAAD,EAAI,EAAJ,CAAvB,EAA+B,CAAC,CAAD,EAAG,EAAH,CAA/B,CAAD;AAAP;AAA5G,KAAR;AAAsKE,IAAAA,OAAO,EAAC;AAACb,MAAAA,KAAK,EAAC;AAACC,QAAAA,IAAI,EAAC,GAAN;AAAUC,QAAAA,IAAI,EAAC,CAAf;AAAiBC,QAAAA,IAAI,EAAC,GAAtB;AAA0BC,QAAAA,IAAI,EAAC;AAA/B,OAAP;AAAyCM,MAAAA,QAAQ,EAAC;AAACC,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,GAAH,CAAD,EAAS,CAAC,GAAD,EAAK,GAAL,CAAT,EAAmB,CAAC,GAAD,EAAK,CAAL,CAAnB,EAA2B,CAAC,CAAD,EAAG,CAAH,CAA3B,EAAiC,CAAC,CAAD,EAAG,GAAH,CAAjC,CAAD;AAAP,OAAlD;AAAsGC,MAAAA,WAAW,EAAC;AAACD,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,GAAH,CAAD,EAAS,CAAC,CAAD,EAAG,CAAH,CAAT,EAAe,CAAC,GAAD,EAAK,CAAL,CAAf,EAAuB,CAAC,GAAD,EAAK,GAAL,CAAvB,EAAiC,CAAC,CAAD,EAAG,GAAH,CAAjC,CAAD;AAAP;AAAlH;AAA9K,GAAN;AAA4VG,EAAAA,MAAM,EAAC;AAACL,IAAAA,MAAM,EAAC;AAACT,MAAAA,KAAK,EAAC;AAACC,QAAAA,IAAI,EAAC,EAAN;AAASC,QAAAA,IAAI,EAAC,CAAd;AAAgBC,QAAAA,IAAI,EAAC,CAAC,CAAtB;AAAwBC,QAAAA,IAAI,EAAC;AAA7B,OAAP;AAAuCM,MAAAA,QAAQ,EAAC;AAACK,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,CAAH,CAAD,EAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAc,CAAC,EAAD,EAAI,CAAJ,CAAd,CAAD;AAAP,OAAhD;AAAgFH,MAAAA,WAAW,EAAC;AAACG,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,CAAH,CAAD,EAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAc,CAAC,EAAD,EAAI,CAAJ,CAAd,CAAD;AAAP;AAA5F,KAAR;AAAqIF,IAAAA,OAAO,EAAC;AAACb,MAAAA,KAAK,EAAC;AAACC,QAAAA,IAAI,EAAC,GAAN;AAAUC,QAAAA,IAAI,EAAC,CAAf;AAAiBC,QAAAA,IAAI,EAAC,CAAC,CAAvB;AAAyBC,QAAAA,IAAI,EAAC;AAA9B,OAAP;AAAwCM,MAAAA,QAAQ,EAAC;AAACK,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,CAAH,CAAD,EAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAc,CAAC,GAAD,EAAK,CAAL,CAAd,CAAD;AAAP,OAAjD;AAAkFH,MAAAA,WAAW,EAAC;AAACG,QAAAA,KAAK,EAAC,CAAC,CAAC,CAAC,CAAD,EAAG,CAAH,CAAD,EAAO,CAAC,EAAD,EAAI,CAAJ,CAAP,EAAc,CAAC,GAAD,EAAK,CAAL,CAAd,CAAD;AAAP;AAA9F;AAA7I;AAAnW,CAApO;;AAAs1B,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACrD,CAAD,EAAGE,CAAH,EAAK;AAAC,SAAKoD,iBAAL,GAAuBtD,CAAvB,EAAyB,KAAKuD,SAAL,GAAerD,CAAxC,EAA0C,KAAKsD,cAAL,GAAoB,IAAIC,GAAJ,EAA9D,EAAsE,KAAKC,WAAL,GAAiB,IAAIzC,CAAJ,EAAvF,EAA6F,KAAK0C,eAAL,GAAqB,IAAIxC,CAAJ,EAAlH,EAAwH,KAAKyC,mBAAL,GAAyB,IAAIH,GAAJ,EAAjJ;AAAyJ;;AAA6B,QAAvBI,uBAAuB,CAAC7D,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASI,CAAT,EAAWE,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;AAACV,IAAAA,CAAC,GAACA,CAAC,KAAGJ,CAAC,GAAC,QAAMA,CAAC,CAAC4D,QAAR,GAAiB,qBAAjB,GAAuCtD,CAAC,CAACN,CAAC,CAAC4C,QAAH,CAAzC,GAAsD,IAA1D,CAAD,IAAkEiB,CAAC,CAAC/D,CAAD,CAArE;AAAyE,UAAMiB,CAAC,GAAC,MAAM,KAAKJ,gBAAL,CAAsBb,CAAtB,EAAwBE,CAAC,GAAC8D,CAAC,CAAC9D,CAAC,CAAC+D,UAAH,CAAF,GAAiB,IAA1C,EAA+C7D,CAA/C,EAAiDE,CAAjD,EAAmDU,CAAnD,CAAd;AAAoE,WAAO,KAAKkD,kBAAL,CAAwBjD,CAAxB,EAA0Bf,CAA1B,EAA4BI,CAA5B,EAA8BI,CAA9B,EAAgCE,CAAhC,EAAkCE,CAAlC,CAAP;AAA4C;;AAAsB,QAAhBD,gBAAgB,CAACb,CAAD,EAAGI,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAW;AAAC,UAAME,CAAC,GAAC,EAAR;AAAA,UAAWI,CAAC,GAACZ,CAAC,GAAC;AAAC+D,MAAAA,YAAY,EAAC3D,CAAd;AAAgB4D,MAAAA,gBAAgB,EAAC,KAAKd,iBAAtC;AAAwDe,MAAAA,MAAM,EAACjE;AAA/D,KAAD,GAAmE,IAAjF;AAAsF,QAAIa,CAAJ;AAAM,UAAMH,CAAC,CAACd,CAAC,CAACsE,IAAH,EAAQtD,CAAR,EAAUJ,CAAV,EAAY,KAAK2C,SAAjB,CAAP,EAAmCrD,CAAC,CAACQ,CAAD,CAApC;;AAAwC,SAAI,MAAMR,CAAV,IAAeU,CAAf,EAAiB,uBAAqBV,CAAC,CAACqE,GAAF,CAAMC,IAA3B,IAAiC,qBAAmBtE,CAAC,CAACqE,GAAF,CAAMC,IAA1D,IAAgE,uBAAqBtE,CAAC,CAACqE,GAAF,CAAMC,IAA3F,KAAkGvD,CAAC,KAAGA,CAAC,GAAC,EAAL,CAAD,EAAUA,CAAC,CAACwD,IAAF,CAAO,KAAKC,0BAAL,CAAgCxE,CAAhC,EAAkCQ,CAAlC,CAAP,CAA5G,GAA0JJ,CAAC,IAAE,WAASJ,CAAC,CAACsE,IAAd,IAAoB,YAAU,OAAOtE,CAAC,CAACyE,IAAvC,IAA6CzE,CAAC,CAACyE,IAAF,CAAOC,OAAP,CAAe,GAAf,IAAoB,CAAC,CAAlE,KAAsE1E,CAAC,CAACyE,IAAF,GAAOtD,CAAC,CAACf,CAAD,EAAGJ,CAAC,CAACyE,IAAL,EAAUzE,CAAC,CAACqE,GAAF,CAAMM,QAAhB,CAA9E,CAA1J;;AAAmQ,WAAO5D,CAAC,KAAE,MAAM6D,OAAO,CAACC,GAAR,CAAY9D,CAAZ,CAAR,CAAD,EAAwBL,CAA/B;AAAiC;;AAAgC,QAA1B8D,0BAA0B,CAACxE,CAAD,EAAGE,CAAH,EAAK;AAAC,UAAME,CAAC,GAACJ,CAAC,CAAC8E,YAAV;;AAAuB,QAAG,CAAC,KAAKpB,mBAAL,CAAyBqB,GAAzB,CAA6B3E,CAA7B,CAAJ,EAAoC;AAAC,YAAME,CAAC,GAAC,CAAC,MAAMR,CAAC,CAACE,CAAC,CAACqE,GAAF,CAAMW,GAAP,EAAW;AAACC,QAAAA,YAAY,EAAC,OAAd;AAAsBC,QAAAA,MAAM,EAAChF,CAAC,IAAEA,CAAC,CAACgF;AAAlC,OAAX,CAAR,EAA+Dd,IAAvE;;AAA4E,WAAKV,mBAAL,CAAyByB,GAAzB,CAA6B/E,CAA7B,EAA+BE,CAA/B;AAAkC;AAAC;;AAAA0D,EAAAA,kBAAkB,CAAClE,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAME,CAAC,GAAC,EAAR;;AAAW,SAAI,MAAME,CAAV,IAAed,CAAf,EAAiB;AAACM,MAAAA,CAAC,IAAE,cAAY,OAAOA,CAAC,CAACoC,WAAxB,KAAsCpC,CAAC,CAACoC,WAAF,GAAcpC,CAAC,CAACoC,WAAF,CAAcxC,CAAd,EAAgBM,CAAhB,EAAkBE,CAAlB,CAApD;;AAA0E,YAAMV,CAAC,GAAC,KAAKsF,sBAAL,CAA4BxE,CAA5B,EAA8BZ,CAA9B,EAAgCE,CAAhC,EAAkCE,CAAlC,EAAoCE,CAApC,EAAsCE,CAAtC,CAAR;;AAAiD,UAAG,CAACV,CAAJ,EAAM;AAAS,UAAIgB,CAAC,GAAC,CAAN;AAAA,UAAQC,CAAC,GAACjB,CAAC,CAACuF,OAAF,IAAW,CAArB;AAAA,UAAuBpE,CAAC,GAACnB,CAAC,CAACwF,OAAF,IAAW,CAApC;AAAA,UAAsCnE,CAAC,GAAC,CAAC,CAAzC;AAAA,UAA2CI,CAAC,GAAC,CAA7C;AAAA,UAA+CE,CAAC,GAAC,CAAjD;;AAAmD,UAAG,wBAAsBvB,CAAzB,EAA2B;AAAC,cAAMJ,CAAC,GAACgC,CAAC,CAAC1B,CAAD,EAAGQ,CAAH,EAAK,IAAL,CAAT;AAAoB,YAAGW,CAAC,GAACF,CAAC,CAACT,CAAC,CAAC2E,OAAH,EAAWvF,CAAX,EAAaM,CAAb,EAAeE,CAAf,CAAD,GAAmBV,CAAnB,IAAsB,CAAxB,EAA0B2B,CAAC,GAACJ,CAAC,CAACT,CAAC,CAAC4E,OAAH,EAAWxF,CAAX,EAAaM,CAAb,EAAeE,CAAf,CAAD,GAAmBV,CAAnB,IAAsB,CAAlD,EAAoD,aAAWc,CAAC,CAAC0D,IAApE,EAAyExD,CAAC,GAACO,CAAC,CAACT,CAAC,CAAC6E,QAAH,EAAYzF,CAAZ,EAAcM,CAAd,EAAgBE,CAAhB,CAAD,IAAqB,CAAvB,EAAyBW,CAAC,GAAC,CAAC,CAACP,CAAC,CAAC8E,eAAJ,IAAqB9E,CAAC,CAAC8E,eAAlD,CAAzE,KAAgJ,IAAG,WAAS9E,CAAC,CAAC0D,IAAd,EAAmB;AAAC,cAAGxD,CAAC,GAACO,CAAC,CAACT,CAAC,CAAC+E,KAAH,EAAS3F,CAAT,EAAWM,CAAX,EAAaE,CAAb,CAAD,IAAkB,CAApB,EAAsB,KAAK,CAAL,KAASI,CAAC,CAACgF,mBAApC,EAAwD,QAAOhF,CAAC,CAACgF,mBAAT;AAA8B,iBAAI,MAAJ;AAAW7E,cAAAA,CAAC,GAAC,CAAC,EAAH;AAAM;;AAAM,iBAAI,OAAJ;AAAYA,cAAAA,CAAC,GAAC,EAAF;AAAK;;AAAM;AAAQA,cAAAA,CAAC,GAAC,CAAF;AAApF;AAAwF,cAAG,KAAK,CAAL,KAASH,CAAC,CAACiF,iBAAd,EAAgC,QAAOjF,CAAC,CAACiF,iBAAT;AAA4B,iBAAI,KAAJ;AAAU5E,cAAAA,CAAC,GAAC,EAAF;AAAK;;AAAM,iBAAI,QAAJ;AAAaA,cAAAA,CAAC,GAAC,CAAC,EAAH;AAAM;;AAAM,iBAAI,UAAJ;AAAeA,cAAAA,CAAC,GAAC,CAAC,GAAH;AAAO;;AAAM;AAAQA,cAAAA,CAAC,GAAC,CAAF;AAA9G;AAAmH;AAAC;;AAAA,cAAMnB,CAAN,IAASY,CAAC,CAAC6D,IAAF,CAAO;AAACoB,QAAAA,KAAK,EAAC7E,CAAP;AAASgF,QAAAA,eAAe,EAAC3E,CAAzB;AAA2BkE,QAAAA,OAAO,EAACtE,CAAnC;AAAqCuE,QAAAA,OAAO,EAACrE,CAA7C;AAA+CsE,QAAAA,OAAO,EAAChE,CAAvD;AAAyDiE,QAAAA,OAAO,EAAC/D,CAAjE;AAAmEsE,QAAAA,kBAAkB,EAACjG;AAAtF,OAAP,CAAT;AAA0G;;AAAA,WAAO,KAAKkG,cAAL,CAAoBtF,CAApB,CAAP;AAA8B;;AAAAsF,EAAAA,cAAc,CAAClG,CAAD,EAAG;AAAC,UAAME,CAAC,GAACiG,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAR;AAAA,UAAyC9F,CAAC,GAACJ,CAAC,CAACmG,UAAF,CAAa,IAAb,CAA3C;AAA8D,QAAI7F,CAAC,GAAC,CAAN;AAAA,QAAQE,CAAC,GAAC,CAAV;AAAA,QAAYE,CAAC,GAAC,CAAd;AAAA,QAAgBE,CAAC,GAAC,CAAlB;AAAoB,UAAME,CAAC,GAAC,EAAR;;AAAW,SAAI,IAAIO,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACvB,CAAC,CAACsG,MAAhB,EAAuB/E,CAAC,EAAxB,EAA2B;AAAC,YAAMrB,CAAC,GAACF,CAAC,CAACuB,CAAD,CAAT;AAAA,YAAaN,CAAC,GAACf,CAAC,CAAC+F,kBAAjB;AAAoC,UAAG,CAAChF,CAAJ,EAAM;AAAS,YAAME,CAAC,GAACF,CAAC,CAACsF,IAAV;AAAA,YAAelF,CAAC,GAACnB,CAAC,CAACuF,OAAnB;AAAA,YAA2BhE,CAAC,GAACvB,CAAC,CAACwF,OAA/B;AAAA,YAAuC/D,CAAC,GAACzB,CAAC,CAACqF,OAA3C;AAAA,YAAmD3D,CAAC,GAAC1B,CAAC,CAACsF,OAAvD;AAAA,YAA+D3D,CAAC,GAAC3B,CAAC,CAAC8F,eAAF,IAAmB,CAAC,CAArF;AAAuF,UAAIhE,CAAC,GAAC9B,CAAC,CAAC2F,KAAR;AAAA,UAAclD,CAAC,GAACvC,CAAC,CAACiB,CAAD,CAAD,GAAKF,CAAC,CAAC,CAAD,CAAD,IAAM,KAAGQ,CAAT,CAArB;AAAA,UAAiCyB,CAAC,GAAChD,CAAC,CAACqB,CAAD,CAAD,GAAKN,CAAC,CAAC,CAAD,CAAD,IAAM,KAAGS,CAAT,CAAxC;AAAA,UAAoDoC,CAAC,GAACrB,CAAC,GAACxB,CAAC,CAAC,CAAD,CAAzD;AAAA,UAA6D4C,CAAC,GAACX,CAAC,GAACjC,CAAC,CAAC,CAAD,CAAlE;;AAAsE,UAAGa,CAAH,EAAK;AAACH,QAAAA,CAAC,KAAGG,CAAC,GAAC,CAACA,CAAN,CAAD;AAAU,cAAMhC,CAAC,GAACkC,IAAI,CAACsE,GAAL,CAASxE,CAAC,GAACE,IAAI,CAACuE,EAAP,GAAU,GAAnB,CAAR;AAAA,cAAgCvG,CAAC,GAACgC,IAAI,CAACwE,GAAL,CAAS1E,CAAC,GAACE,IAAI,CAACuE,EAAP,GAAU,GAAnB,CAAlC;AAAA,cAA0DrG,CAAC,GAACuC,CAAC,GAACzC,CAAF,GAAIkD,CAAC,GAACpD,CAAlE;AAAA,cAAoEM,CAAC,GAACqC,CAAC,GAAC3C,CAAF,GAAIoD,CAAC,GAAClD,CAA5E;AAAA,cAA8EM,CAAC,GAACmC,CAAC,GAACzC,CAAF,GAAI6D,CAAC,GAAC/D,CAAtF;AAAA,cAAwFU,CAAC,GAACiC,CAAC,GAAC3C,CAAF,GAAI+D,CAAC,GAAC7D,CAAhG;AAAA,cAAkGU,CAAC,GAACoD,CAAC,GAAC9D,CAAF,GAAI6D,CAAC,GAAC/D,CAA1G;AAAA,cAA4Gc,CAAC,GAACkD,CAAC,GAAChE,CAAF,GAAI+D,CAAC,GAAC7D,CAApH;AAAA,cAAsHc,CAAC,GAACgD,CAAC,GAAC9D,CAAF,GAAIkD,CAAC,GAACpD,CAA9H;AAAA,cAAgIiB,CAAC,GAAC+C,CAAC,GAAChE,CAAF,GAAIoD,CAAC,GAAClD,CAAxI;AAA0IyC,QAAAA,CAAC,GAACT,IAAI,CAACyE,GAAL,CAASvG,CAAT,EAAWI,CAAX,EAAaI,CAAb,EAAeI,CAAf,CAAF,EAAoBoC,CAAC,GAAClB,IAAI,CAACyE,GAAL,CAASrG,CAAT,EAAWI,CAAX,EAAaI,CAAb,EAAeG,CAAf,CAAtB,EAAwC+C,CAAC,GAAC9B,IAAI,CAACC,GAAL,CAAS/B,CAAT,EAAWI,CAAX,EAAaI,CAAb,EAAeI,CAAf,CAA1C,EAA4D+C,CAAC,GAAC7B,IAAI,CAACC,GAAL,CAAS7B,CAAT,EAAWI,CAAX,EAAaI,CAAb,EAAeG,CAAf,CAA9D;AAAgF;;AAAAT,MAAAA,CAAC,GAACmC,CAAC,GAACnC,CAAF,GAAImC,CAAJ,GAAMnC,CAAR,EAAUE,CAAC,GAAC0C,CAAC,GAAC1C,CAAF,GAAI0C,CAAJ,GAAM1C,CAAlB,EAAoBE,CAAC,GAACoD,CAAC,GAACpD,CAAF,GAAIoD,CAAJ,GAAMpD,CAA5B,EAA8BE,CAAC,GAACiD,CAAC,GAACjD,CAAF,GAAIiD,CAAJ,GAAMjD,CAAtC;AAAwC,YAAM8F,CAAC,GAACtG,CAAC,CAACuG,eAAF,CAAkB5F,CAAC,CAACsF,IAAF,CAAO,CAAP,CAAlB,EAA4BtF,CAAC,CAACsF,IAAF,CAAO,CAAP,CAA5B,CAAR;AAA+CK,MAAAA,CAAC,CAACtC,IAAF,CAAOe,GAAP,CAAW,IAAIyB,iBAAJ,CAAsB7F,CAAC,CAAC8F,KAAF,CAAQC,MAA9B,CAAX;AAAkD,YAAMC,CAAC,GAAC;AAACxB,QAAAA,OAAO,EAACpE,CAAT;AAAWqE,QAAAA,OAAO,EAACjE,CAAnB;AAAqBmE,QAAAA,eAAe,EAAC/D,CAArC;AAAuCgE,QAAAA,KAAK,EAAC7D,CAA7C;AAA+CkF,QAAAA,eAAe,EAACN,CAA/D;AAAiErB,QAAAA,OAAO,EAAC5D,CAAzE;AAA2E6D,QAAAA,OAAO,EAAC5D;AAAnF,OAAR;AAA8FZ,MAAAA,CAAC,CAACyD,IAAF,CAAOwC,CAAP;AAAU;;AAAA/G,IAAAA,CAAC,CAACiH,KAAF,GAAQvG,CAAC,GAACJ,CAAV,EAAYN,CAAC,CAACkH,MAAF,GAAStG,CAAC,GAACJ,CAAvB;AAAyB,UAAMO,CAAC,GAAC,CAACT,CAAT;AAAA,UAAWW,CAAC,GAACL,CAAb;;AAAe,SAAI,IAAIS,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACP,CAAC,CAACsF,MAAhB,EAAuB/E,CAAC,EAAxB,EAA2B;AAAC,YAAMvB,CAAC,GAACgB,CAAC,CAACO,CAAD,CAAT;AAAA,YAAarB,CAAC,GAAC,KAAKmH,kBAAL,CAAwBrH,CAAC,CAACkH,eAA1B,CAAf;AAAA,YAA0D1G,CAAC,GAACR,CAAC,CAACkH,eAAF,CAAkBC,KAA9E;AAAA,YAAoFzG,CAAC,GAACV,CAAC,CAACkH,eAAF,CAAkBE,MAAxG;AAAA,YAA+GxG,CAAC,GAACK,CAAC,GAACT,CAAC,IAAE,KAAGR,CAAC,CAACuF,OAAP,CAApH;AAAA,YAAoIzE,CAAC,GAACK,CAAC,GAACT,CAAC,IAAE,KAAGV,CAAC,CAACwF,OAAP,CAAzI;;AAAyJ,UAAGxF,CAAC,CAAC6F,KAAL,EAAW;AAAC,cAAMrF,CAAC,GAAC,CAAC,MAAIR,CAAC,CAAC6F,KAAP,IAAc3D,IAAI,CAACuE,EAAnB,GAAsB,GAA9B;AAAkCnG,QAAAA,CAAC,CAACgH,IAAF,IAAShH,CAAC,CAACiH,SAAF,CAAYnH,CAAC,CAACJ,CAAC,CAACyF,OAAH,CAAb,EAAyB,CAACrF,CAAC,CAACJ,CAAC,CAAC0F,OAAH,CAA3B,CAAT,EAAiDpF,CAAC,CAACiH,SAAF,CAAYtG,CAAZ,EAAcE,CAAd,CAAjD,EAAkEb,CAAC,CAACkH,MAAF,CAAShH,CAAT,CAAlE,EAA8EF,CAAC,CAACiH,SAAF,CAAY,CAACtG,CAAb,EAAe,CAACE,CAAhB,CAA9E,EAAiGb,CAAC,CAACmH,SAAF,CAAYvH,CAAZ,EAAcU,CAAd,EAAgBE,CAAhB,CAAjG,EAAoHR,CAAC,CAACoH,OAAF,EAApH;AAAgI,OAA9K,MAAmLpH,CAAC,CAACmH,SAAF,CAAYvH,CAAZ,EAAcU,CAAC,GAACR,CAAC,CAACJ,CAAC,CAACyF,OAAH,CAAjB,EAA6B3E,CAAC,GAACV,CAAC,CAACJ,CAAC,CAAC0F,OAAH,CAAhC;AAA6C;;AAAA,UAAMrE,CAAC,GAAC,IAAIO,CAAJ,CAAM;AAACqF,MAAAA,CAAC,EAAChG,CAAC,GAACf,CAAC,CAACiH,KAAJ,GAAU,EAAb;AAAgBxF,MAAAA,CAAC,EAACR,CAAC,GAACjB,CAAC,CAACkH,MAAJ,GAAW;AAA7B,KAAN,CAAR;AAAgD,WAAM;AAACO,MAAAA,SAAS,EAAC,MAAIzH,CAAC,CAACiH,KAAN,IAAa,MAAIjH,CAAC,CAACkH,MAAnB,GAA0B9G,CAAC,CAACsH,YAAF,CAAe,CAAf,EAAiB,CAAjB,EAAmB1H,CAAC,CAACiH,KAArB,EAA2BjH,CAAC,CAACkH,MAA7B,CAA1B,GAA+D9G,CAAC,CAACuG,eAAF,CAAkB,CAAlB,EAAoB,CAApB,CAA1E;AAAiGgB,MAAAA,cAAc,EAACxG;AAAhH,KAAN;AAAyH;;AAAAgG,EAAAA,kBAAkB,CAACrH,CAAD,EAAG;AAAC,SAAK8H,gBAAL,KAAwB,KAAKA,gBAAL,GAAsB3B,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAA9C;AAAgF,UAAMlG,CAAC,GAAC,KAAK4H,gBAAb;AAAA,UAA8B1H,CAAC,GAACF,CAAC,CAACmG,UAAF,CAAa,IAAb,CAAhC;AAAmD,WAAOnG,CAAC,CAACiH,KAAF,GAAQnH,CAAC,CAACmH,KAAV,EAAgBjH,CAAC,CAACkH,MAAF,GAASpH,CAAC,CAACoH,MAA3B,EAAkChH,CAAC,CAAC2H,YAAF,CAAe/H,CAAf,EAAiB,CAAjB,EAAmB,CAAnB,CAAlC,EAAwDE,CAA/D;AAAiE;;AAAA8H,EAAAA,eAAe,CAAChI,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,SAAK0H,gBAAL,KAAwB,KAAKA,gBAAL,GAAsB3B,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAA9C;AAAgF,UAAM9F,CAAC,GAAC,KAAKwH,gBAAb;AAAA,UAA8BtH,CAAC,GAACF,CAAC,CAAC+F,UAAF,CAAa,IAAb,CAAhC;AAAmD,WAAO/F,CAAC,CAAC6G,KAAF,GAAQjH,CAAR,EAAUI,CAAC,CAAC8G,MAAF,GAAShH,CAAnB,EAAqBI,CAAC,CAACiH,SAAF,CAAYzH,CAAZ,EAAc,CAAd,EAAgB,CAAhB,EAAkBE,CAAlB,EAAoBE,CAApB,CAArB,EAA4C,IAAI6H,WAAJ,CAAgBzH,CAAC,CAACoH,YAAF,CAAe,CAAf,EAAiB,CAAjB,EAAmB1H,CAAnB,EAAqBE,CAArB,EAAwBkE,IAAxB,CAA6B0C,MAA7C,CAAnD;AAAwG;;AAAA1B,EAAAA,sBAAsB,CAACtF,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOI,CAAP,EAASE,CAAT,EAAWE,CAAX,EAAa;AAAC,QAAIE,CAAJ,EAAME,CAAN,EAAQC,CAAR,EAAUE,CAAV;;AAAY,QAAG,2BAAyBf,CAAzB,IAA4B,0BAAwBA,CAAvD,EAAyD;AAAC,YAAMe,CAAC,GAACX,CAAC,IAAEA,CAAC,CAAC0H,KAAL,GAAW1H,CAAC,CAAC0H,KAAb,GAAmBrG,CAAC,CAACC,MAA7B;AAAA,YAAoCT,CAAC,GAAC,2BAAyBjB,CAAzB,GAA2BuC,CAAC,CAACO,MAAF,CAAS/B,CAAT,CAA3B,GAAuCwB,CAAC,CAACC,IAAF,CAAOzB,CAAP,CAA7E;;AAAuF,UAAG,WAASnB,CAAC,CAACwE,IAAd,EAAmB;AAAC,YAAG,qBAAmBxE,CAAC,CAACuE,GAAF,CAAMC,IAA5B,EAAiC;AAAC,cAAG,uBAAqBxE,CAAC,CAACuE,GAAF,CAAMC,IAA9B,EAAmC;AAAC,kBAAMpE,CAAC,GAACmB,CAAC,CAACvB,CAAC,CAACmH,KAAH,EAASjH,CAAT,EAAWQ,CAAX,EAAaE,CAAb,CAAT;AAAA,kBAAyB;AAACmG,cAAAA,KAAK,EAACzG,CAAP;AAAS6G,cAAAA,KAAK,EAAC3G,CAAf;AAAiB4G,cAAAA,MAAM,EAACtG;AAAxB,gBAA2B,KAAKqH,mBAAL,CAAyBnI,CAAzB,EAA2BI,CAA3B,CAApD;;AAAkF,mBAAO,KAAKgI,yBAAL,CAA+BpI,CAA/B,EAAiCM,CAAjC,EAAmCE,CAAnC,EAAqCM,CAArC,EAAuCO,CAAvC,EAAyCjB,CAAzC,CAAP;AAAmD;;AAAA,iBAAO,IAAP;AAAY;;AAAA,SAAC;AAACiI,UAAAA,WAAW,EAACvH,CAAb;AAAewH,UAAAA,IAAI,EAACrH;AAApB,YAAuB2F,CAAC,CAAC5G,CAAD,EAAGE,CAAH,EAAKQ,CAAL,EAAOE,CAAP,CAAzB,GAAoCI,CAAC,GAAC,KAAKuH,4BAAL,CAAkCzH,CAAlC,EAAoCO,CAApC,CAAtC;AAA6E,OAAxT,MAA6T,IAAG,aAAWrB,CAAC,CAACwE,IAAhB,EAAqB;AAAC,YAAG,uBAAqBxE,CAAC,CAACuE,GAAF,CAAMC,IAA9B,EAAmC,OAAO,IAAP;AAAY,YAAG,sBAAoBxE,CAAC,CAACuE,GAAF,CAAMC,IAA7B,EAAkC,OAAO,IAAP;AAAYxE,QAAAA,CAAC,CAACuE,GAAF,CAAMkB,OAAN,GAAclE,CAAC,CAACvB,CAAC,CAACyF,OAAH,EAAWvF,CAAX,EAAaQ,CAAb,EAAeE,CAAf,CAAf,EAAiCZ,CAAC,CAACuE,GAAF,CAAMmB,OAAN,GAAcnE,CAAC,CAACvB,CAAC,CAAC0F,OAAH,EAAWxF,CAAX,EAAaQ,CAAb,EAAeE,CAAf,CAAhD,EAAkEZ,CAAC,CAACuE,GAAF,CAAMoB,QAAN,GAAepE,CAAC,CAACvB,CAAC,CAAC2F,QAAH,EAAYzF,CAAZ,EAAcQ,CAAd,EAAgBE,CAAhB,CAAlF,EAAqGZ,CAAC,CAACuE,GAAF,CAAMiE,eAAN,GAAsBxI,CAAC,CAACwI,eAA7H,GAA8I;AAACH,UAAAA,WAAW,EAACvH;AAAb,YAAgB8F,CAAC,CAAC5G,CAAD,EAAGE,CAAH,EAAKQ,CAAL,EAAOE,CAAP,CAA/J,GAA0KK,CAAC,GAACX,CAAC,CAACmI,IAAI,CAACC,SAAL,CAAe5H,CAAf,CAAD,CAAD,CAAqB6H,QAArB,EAA5K,EAA4M3H,CAAC,GAAC,KAAKuH,4BAAL,CAAkCzH,CAAlC,EAAoCO,CAApC,CAA9M;AAAqP,OAAxW,MAA4W;AAAC,YAAG,WAASrB,CAAC,CAACwE,IAAd,EAAmB,OAAO,IAAP;;AAAY,YAAG,WAASxE,CAAC,CAACwE,IAAd,EAAmB;AAAC,cAAG,mBAAiBxE,CAAC,CAACuE,GAAF,CAAMC,IAAvB,IAA6B,sBAAoBxE,CAAC,CAACuE,GAAF,CAAMC,IAAvD,IAA6D,uBAAqBxE,CAAC,CAACuE,GAAF,CAAMC,IAAxF,IAA8F,qBAAmBxE,CAAC,CAACuE,GAAF,CAAMC,IAA1H,EAA+H;AAAC,kBAAMpE,CAAC,GAACJ,CAAC,CAACuE,GAAF,CAAMgC,IAAN,IAAYvG,CAAC,CAACuE,GAAF,CAAM6C,MAA1B;AAAiC,gBAAI9G,CAAJ,EAAME,CAAN,EAAQQ,CAAR;AAAU,gBAAG,uBAAqBhB,CAAC,CAACuE,GAAF,CAAMC,IAA3B,IAAiC,qBAAmBxE,CAAC,CAACuE,GAAF,CAAMC,IAA7D,EAAkE,CAAC;AAACuC,cAAAA,KAAK,EAACzG,CAAP;AAAS6G,cAAAA,KAAK,EAAC3G,CAAf;AAAiB4G,cAAAA,MAAM,EAACpG;AAAxB,gBAA2B,KAAKmH,mBAAL,CAAyBnI,CAAzB,EAA2BI,CAA3B,CAA5B,EAAlE,KAAiI;AAAC,eAAC;AAACiI,gBAAAA,WAAW,EAACvH,CAAb;AAAewH,gBAAAA,IAAI,EAACrH;AAApB,kBAAuB2F,CAAC,CAAC5G,CAAD,EAAGE,CAAH,EAAKQ,CAAL,EAAOE,CAAP,CAAzB;;AAAoC,oBAAMR,CAAC,GAAC,KAAKsD,WAAL,CAAiBkF,qBAAjB,CAAuC9H,CAAvC,EAAyC,CAAzC,EAA2C,KAAKyC,SAAhD,CAAR;;AAAmEjD,cAAAA,CAAC,GAACF,CAAC,CAAC2G,KAAJ,EAAUvG,CAAC,GAACJ,CAAC,CAACmG,IAAF,CAAO,CAAP,CAAZ,EAAsBvF,CAAC,GAACZ,CAAC,CAACmG,IAAF,CAAO,CAAP,CAAxB;AAAkC;AAAA,mBAAO,KAAK6B,yBAAL,CAA+BpI,CAA/B,EAAiCM,CAAjC,EAAmCE,CAAnC,EAAqCQ,CAArC,EAAuCK,CAAvC,EAAyC,IAAzC,CAAP;AAAsD;;AAAA,cAAG,mBAAiBrB,CAAC,CAACuE,GAAF,CAAMC,IAA1B,EAA+B,OAAO,IAAP;AAAY,WAAC;AAAC6D,YAAAA,WAAW,EAACvH,CAAb;AAAewH,YAAAA,IAAI,EAACrH;AAApB,cAAuB2F,CAAC,CAAC5G,CAAD,EAAGE,CAAH,EAAKQ,CAAL,EAAOE,CAAP,CAAzB,GAAoCI,CAAC,GAAC,KAAKuH,4BAAL,CAAkCzH,CAAlC,EAAoCO,CAApC,CAAtC;AAA6E;AAAC;AAAC,KAAp9C,MAAw9C;AAAC,UAAG,WAASrB,CAAC,CAACwE,IAAd,EAAmB,OAAOrD,CAAC,GAAC,KAAK0H,sBAAL,CAA4B7I,CAA5B,EAA8BE,CAA9B,EAAgCM,CAAhC,EAAkCE,CAAlC,EAAoCE,CAApC,CAAF,EAAyCO,CAAhD;AAAkD,OAAC;AAACkH,QAAAA,WAAW,EAACvH,CAAb;AAAewH,QAAAA,IAAI,EAACrH;AAApB,UAAuB2F,CAAC,CAAC5G,CAAD,EAAGE,CAAH,EAAKQ,CAAL,EAAOE,CAAP,CAAzB;AAAoC,YAAMR,CAAC,GAAC4B,CAAC,CAACxB,CAAD,EAAGR,CAAH,EAAK,IAAL,CAAT;;AAAoB,UAAG,uBAAqBA,CAAC,CAACuE,GAAF,CAAMC,IAA9B,EAAmC;AAAC,cAAMlE,CAAC,GAACiB,CAAC,CAACvB,CAAC,CAACuG,IAAH,EAAQrG,CAAR,EAAUQ,CAAV,EAAYE,CAAZ,CAAD,GAAgBR,CAAxB;AAAA,cAA0B;AAAC2G,UAAAA,KAAK,EAACvG,CAAP;AAAS2G,UAAAA,KAAK,EAACrG,CAAf;AAAiBsG,UAAAA,MAAM,EAACpG;AAAxB,YAA2B,KAAKmH,mBAAL,CAAyBnI,CAAzB,EAA2BM,CAA3B,CAArD;;AAAmF,eAAOa,CAAC,GAAC;AAAC4F,UAAAA,KAAK,EAACvG,CAAP;AAAS+F,UAAAA,IAAI,EAAC,CAACzF,CAAD,EAAGE,CAAH,CAAd;AAAoB8H,UAAAA,GAAG,EAAC,CAAC,CAAzB;AAA2BC,UAAAA,aAAa,EAAC,CAAC,CAA1C;AAA4CxD,UAAAA,OAAO,EAACvF,CAAC,CAACgJ,WAAF,GAAchJ,CAAC,CAACgJ,WAAF,CAAc/B,CAA5B,GAA8B,CAAlF;AAAoFzB,UAAAA,OAAO,EAACxF,CAAC,CAACgJ,WAAF,GAAchJ,CAAC,CAACgJ,WAAF,CAAcrH,CAA5B,GAA8B;AAA1H,SAAF,EAA+HR,CAAtI;AAAwI;;AAAAQ,MAAAA,CAAC,CAACb,CAAD,EAAGV,CAAH,EAAK;AAAC6I,QAAAA,oBAAoB,EAAC,CAAC;AAAvB,OAAL,CAAD,EAAiCjI,CAAC,GAACF,CAAnC;AAAqC;;AAAAG,IAAAA,CAAC,IAAEb,CAAH,EAAKI,CAAC,KAAGS,CAAC,IAAEwH,IAAI,CAACC,SAAL,CAAelI,CAAf,CAAN,CAAN;AAA+B,UAAMa,CAAC,GAAC,KAAKmC,cAAb;AAA4B,WAAOnC,CAAC,CAAC6H,GAAF,CAAMjI,CAAN,IAASI,CAAC,CAAC4D,GAAF,CAAMhE,CAAN,CAAT,IAAmBE,CAAC,GAAC,KAAKuC,WAAL,CAAiBkF,qBAAjB,CAAuC5H,CAAvC,EAAyCmI,MAAM,CAACC,gBAAP,IAAyB,CAAlE,EAAoE,KAAK7F,SAAzE,CAAF,EAAsFlC,CAAC,CAACgE,GAAF,CAAMpE,CAAN,EAAQE,CAAR,CAAtF,EAAiGA,CAApH,CAAP;AAA8H;;AAAA0H,EAAAA,sBAAsB,CAAC7I,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAW;AAAC,UAAME,CAAC,GAACsB,CAAC,CAAC5B,CAAD,EAAGJ,CAAH,EAAK,IAAL,CAAT;AAAA,UAAoBY,CAAC,GAACW,CAAC,CAACvB,CAAC,CAAC2E,IAAH,EAAQzE,CAAR,EAAUI,CAAV,EAAYE,CAAZ,CAAvB;AAAsC,QAAG,CAACI,CAAD,IAAI,MAAIA,CAAC,CAAC0F,MAAb,EAAoB,OAAO,IAAP;AAAY,UAAMxF,CAAC,GAACS,CAAC,CAACvB,CAAC,CAACqJ,QAAH,EAAYnJ,CAAZ,EAAcI,CAAd,EAAgBE,CAAhB,CAAT;AAAA,UAA4BQ,CAAC,GAACO,CAAC,CAACvB,CAAC,CAACkI,KAAH,EAAShI,CAAT,EAAWI,CAAX,EAAaE,CAAb,CAA/B;AAAA,UAA+CS,CAAC,GAACM,CAAC,CAACvB,CAAC,CAACsJ,MAAH,EAAUpJ,CAAV,EAAYI,CAAZ,EAAcE,CAAd,CAAlD;AAAA,UAAmEW,CAAC,GAACI,CAAC,CAACvB,CAAC,CAACuJ,UAAH,EAAcrJ,CAAd,EAAgBI,CAAhB,EAAkBE,CAAlB,CAAtE;AAAA,UAA2Fa,CAAC,GAACE,CAAC,CAACvB,CAAC,CAACuG,IAAH,EAAQrG,CAAR,EAAUI,CAAV,EAAYE,CAAZ,CAAD,GAAgBE,CAA7G;AAAA,UAA+GiB,CAAC,GAACJ,CAAC,CAACvB,CAAC,CAAC8F,mBAAH,EAAuB5F,CAAvB,EAAyBI,CAAzB,EAA2BE,CAA3B,CAAlH;AAAA,UAAgJoB,CAAC,GAACL,CAAC,CAACvB,CAAC,CAAC+F,iBAAH,EAAqB7F,CAArB,EAAuBI,CAAvB,EAAyBE,CAAzB,CAAnJ;AAAA,UAA+KqB,CAAC,GAACJ,CAAC,CAACF,CAAC,CAACvB,CAAC,CAACwJ,KAAH,EAAStJ,CAAT,EAAWI,CAAX,EAAaE,CAAb,CAAF,CAAlL;AAAA,UAAqMmC,CAAC,GAAClB,CAAC,CAACF,CAAC,CAACvB,CAAC,CAACyJ,YAAH,EAAgBvJ,CAAhB,EAAkBI,CAAlB,EAAoBE,CAApB,CAAF,CAAxM;AAAA,UAAkO4C,CAAC,GAAC;AAACoG,MAAAA,KAAK,EAAC3H,CAAP;AAAS0E,MAAAA,IAAI,EAAClF,CAAd;AAAgByE,MAAAA,mBAAmB,EAACnE,CAApC;AAAsCoE,MAAAA,iBAAiB,EAACnE,CAAxD;AAA0D8H,MAAAA,IAAI,EAAC;AAACC,QAAAA,MAAM,EAAC7I,CAAR;AAAUoH,QAAAA,KAAK,EAAClH,CAAhB;AAAkBsI,QAAAA,MAAM,EAACrI,CAAzB;AAA2BsI,QAAAA,UAAU,EAACpI;AAAtC,OAA/D;AAAwGyI,MAAAA,IAAI,EAAC;AAACrD,QAAAA,IAAI,EAAChF,CAAC,CAACvB,CAAC,CAAC6J,WAAH,EAAe3J,CAAf,EAAiBI,CAAjB,EAAmBE,CAAnB,CAAD,IAAwB,CAA9B;AAAgCgJ,QAAAA,KAAK,EAAC7G,CAAtC;AAAwCuF,QAAAA,KAAK,EAAClH;AAA9C,OAA7G;AAA8J8I,MAAAA,UAAU,EAAC,CAAzK;AAA2KC,MAAAA,iBAAiB,EAAC,CAAC,KAAKxG;AAAnM,KAApO;AAAkb,WAAO,KAAKI,eAAL,CAAqBqG,aAArB,CAAmCpJ,CAAnC,EAAqCwC,CAArC,CAAP;AAA+C;;AAAAgF,EAAAA,yBAAyB,CAACpI,CAAD,EAAGE,CAAH,EAAKI,CAAL,EAAOE,CAAP,EAASM,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAMC,CAAC,GAACkF,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAR;AAAA,UAAyCjF,CAAC,GAACF,CAAC,CAACoF,UAAF,CAAa,IAAb,CAA3C;AAA8DpF,IAAAA,CAAC,CAACmG,MAAF,GAAShH,CAAC,CAAC8B,IAAI,CAACC,GAAL,CAASD,IAAI,CAAC+H,GAAL,CAASnJ,CAAC,CAACsB,KAAF,CAAQG,IAAR,GAAazB,CAAC,CAACsB,KAAF,CAAQI,IAA9B,CAAT,EAA6CxB,CAA7C,CAAD,CAAV,EAA4DC,CAAC,CAACkG,KAAF,GAAQ/G,CAAC,CAAC8B,IAAI,CAAC+H,GAAL,CAASnJ,CAAC,CAACsB,KAAF,CAAQC,IAAR,GAAavB,CAAC,CAACsB,KAAF,CAAQE,IAA9B,CAAD,CAArE;AAA2G,UAAMjB,CAAC,GAACF,CAAC,CAAC0F,eAAF,CAAkBvG,CAAlB,EAAoBE,CAApB,CAAR;AAA+Ba,IAAAA,CAAC,CAACiD,IAAF,CAAOe,GAAP,CAAW,IAAIyB,iBAAJ,CAAsB5G,CAAC,CAAC8G,MAAxB,CAAX;;AAA4C,UAAMzF,CAAC,GAAC,KAAK8F,kBAAL,CAAwBhG,CAAxB,CAAR;AAAA,UAAmCI,CAAC,GAACN,CAAC,CAAC+I,aAAF,CAAgB3I,CAAhB,EAAkB,QAAlB,CAArC;AAAA,UAAiEI,CAAC,GAACO,IAAI,CAACwE,GAAL,CAAS,CAAC,CAAC1G,CAAC,CAACuE,GAAF,CAAMoB,QAAP,IAAiB,CAAlB,IAAqBzD,IAAI,CAACuE,EAA1B,GAA6B,GAAtC,CAAnE;AAAA,UAA8G7E,CAAC,GAACM,IAAI,CAACsE,GAAL,CAAS,CAAC,CAACxG,CAAC,CAACuE,GAAF,CAAMoB,QAAP,IAAiB,CAAlB,IAAqBzD,IAAI,CAACuE,EAA1B,GAA6B,GAAtC,CAAhH;;AAA2JhF,IAAAA,CAAC,CAAC0I,YAAF,CAAe;AAACC,MAAAA,GAAG,EAACzI,CAAL;AAAO0I,MAAAA,GAAG,EAACzI,CAAX;AAAa0I,MAAAA,GAAG,EAAC,CAAC1I,CAAlB;AAAoB2I,MAAAA,GAAG,EAAC5I,CAAxB;AAA0B6I,MAAAA,GAAG,EAACpK,CAAC,CAACJ,CAAC,CAACuE,GAAF,CAAMkB,OAAP,CAAD,IAAkB,CAAhD;AAAkDgF,MAAAA,GAAG,EAACrK,CAAC,CAACJ,CAAC,CAACuE,GAAF,CAAMmB,OAAP,CAAD,IAAkB;AAAxE,KAAf;AAA2F,UAAM7D,CAAC,GAACf,CAAC,CAACkC,WAAV;AAAsB,QAAIhB,CAAJ,EAAMW,CAAN,EAAQS,CAAR;AAAU1C,IAAAA,CAAC,CAACmB,CAAD,CAAD,IAAMG,CAAC,GAACH,CAAC,CAACkB,KAAJ,EAAU5B,CAAC,CAACuJ,SAAF,GAAYjJ,CAAtB,EAAwBkB,CAAC,GAACxB,CAAC,CAACyB,IAA5B,EAAiCQ,CAAC,GAAC,CAAC,SAAD,CAAzC,IAAsDxC,CAAC,CAACiB,CAAD,CAAD,KAAOG,CAAC,GAACH,CAAC,CAACsB,KAAJ,EAAUhC,CAAC,CAACwJ,WAAF,GAAclJ,CAAxB,EAA0BN,CAAC,CAACyJ,SAAF,GAAY5J,CAAtC,EAAwC2B,CAAC,GAACxB,CAAC,CAAC+B,MAA5C,EAAmDlB,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,EAAQ,CAAR,IAAWf,CAAC,CAACmG,MAAF,GAAS,CAAvE,EAAyEpF,CAAC,CAAC,CAAD,CAAD,CAAK,CAAL,EAAQ,CAAR,IAAWf,CAAC,CAACmG,MAAF,GAAS,CAApG,CAAtD,EAA6JjG,CAAC,CAAC0J,SAAF,EAA7J;;AAA2K,SAAI,MAAMnK,CAAV,IAAesB,CAAf,EAAiB;AAAC,YAAMhC,CAAC,GAACU,CAAC,GAACA,CAAC,CAAC4F,MAAH,GAAU,CAAnB;;AAAqB,UAAGtG,CAAC,GAAC,CAAL,EAAO;AAAC,YAAIE,CAAC,GAACQ,CAAC,CAAC,CAAD,CAAP;AAAWS,QAAAA,CAAC,CAAC2J,MAAF,CAAS1K,CAAC,CAACF,CAAC,CAAC,CAAD,CAAF,CAAV,EAAiBE,CAAC,CAACF,CAAC,CAAC,CAAD,CAAF,CAAlB;;AAA0B,aAAI,IAAII,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACN,CAAd,EAAgB,EAAEM,CAAlB,EAAoBJ,CAAC,GAACQ,CAAC,CAACJ,CAAD,CAAH,EAAOa,CAAC,CAAC4J,MAAF,CAAS3K,CAAC,CAACF,CAAC,CAAC,CAAD,CAAF,CAAV,EAAiBE,CAAC,CAACF,CAAC,CAAC,CAAD,CAAF,CAAlB,CAAP;;AAAiCiB,QAAAA,CAAC,CAAC6J,SAAF;AAAc;AAAC;;AAAArI,IAAAA,CAAC,CAACsI,KAAF,CAAQ9J,CAAR,EAAUiC,CAAV;AAAa,UAAMY,CAAC,GAAC7C,CAAC,CAACyG,YAAF,CAAe,CAAf,EAAiB,CAAjB,EAAmB3G,CAAC,CAACkG,KAArB,EAA2BlG,CAAC,CAACmG,MAA7B,CAAR;AAAA,UAA6CrD,CAAC,GAAC,IAAImH,UAAJ,CAAelH,CAAC,CAACM,IAAjB,CAA/C;AAAsE,WAAM;AAACiC,MAAAA,IAAI,EAAC,CAACtF,CAAC,CAACkG,KAAH,EAASlG,CAAC,CAACmG,MAAX,CAAN;AAAyBL,MAAAA,KAAK,EAAC,IAAIkB,WAAJ,CAAgBlE,CAAC,CAACiD,MAAlB,CAA/B;AAAyD8B,MAAAA,GAAG,EAAC,CAAC,CAA9D;AAAgEC,MAAAA,aAAa,EAAC,CAAC,CAA/E;AAAiFxD,MAAAA,OAAO,EAAC,CAAzF;AAA2FC,MAAAA,OAAO,EAAC;AAAnG,KAAN;AAA4G;;AAAA2C,EAAAA,mBAAmB,CAACnI,CAAD,EAAGE,CAAH,EAAK;AAAC,UAAMI,CAAC,GAAC,KAAKsD,mBAAL,CAAyBqB,GAAzB,CAA6BjF,CAAC,CAACgF,YAA/B,CAAR;;AAAqD,QAAG,CAAC1E,CAAJ,EAAM,OAAO,IAAP;AAAY,UAAME,CAAC,GAACF,CAAC,CAAC8G,MAAF,GAAS9G,CAAC,CAAC6G,KAAnB;AAAA,UAAyBzG,CAAC,GAACR,CAAC,GAACM,CAAC,GAAC,CAAF,GAAIJ,CAAC,CAACF,CAAD,CAAL,GAASE,CAAC,CAACF,CAAD,CAAD,GAAKM,CAAf,GAAiBF,CAAC,CAAC6G,KAA/C;AAAA,UAAqDvG,CAAC,GAACV,CAAC,GAACM,CAAC,GAAC,CAAF,GAAIJ,CAAC,CAACF,CAAD,CAAD,GAAKM,CAAT,GAAWJ,CAAC,CAACF,CAAD,CAAb,GAAiBI,CAAC,CAAC8G,MAA3E;AAAkF,WAAM;AAACL,MAAAA,KAAK,EAAC,KAAKiB,eAAL,CAAqB1H,CAArB,EAAuBI,CAAvB,EAAyBE,CAAzB,CAAP;AAAmCuG,MAAAA,KAAK,EAACzG,CAAzC;AAA2C0G,MAAAA,MAAM,EAACxG;AAAlD,KAAN;AAA2D;;AAAA2H,EAAAA,4BAA4B,CAACvI,CAAD,EAAGE,CAAH,EAAK;AAAC,UAAME,CAAC,GAACM,CAAC,CAACR,CAAC,CAAC4C,QAAH,CAAD,GAAc,kBAAd,GAAiC,eAAzC;AAAyD,WAAM;AAAC0B,MAAAA,IAAI,EAAC,iBAAN;AAAwBpC,MAAAA,KAAK,EAAClC,CAAC,CAACkC,KAAhC;AAAsC+I,MAAAA,cAAc,EAAC,CAAC;AAAC3G,QAAAA,IAAI,EAAC,kBAAN;AAAyB1B,QAAAA,QAAQ,EAAC5C,CAAC,CAAC4C,QAApC;AAA6CsI,QAAAA,MAAM,EAAC;AAAC5G,UAAAA,IAAI,EAACpE,CAAN;AAAQiL,UAAAA,YAAY,EAAC,CAACrL,CAAD;AAArB;AAApD,OAAD;AAArD,KAAN;AAA6I;;AAAr+P;;AAAs+P,SAASgE,CAAT,CAAWhE,CAAX,EAAa;AAAC,SAAM,CAACA,CAAC,GAACsL,MAAM,CAACC,IAAP,CAAYvL,CAAZ,CAAD,GAAgB,EAAlB,EAAsBwL,GAAtB,CAA2BtL,CAAC,KAAG;AAACuL,IAAAA,IAAI,EAACvL,CAAN;AAAQwL,IAAAA,KAAK,EAACxL,CAAd;AAAgBsE,IAAAA,IAAI,EAAC,YAAU,OAAOxE,CAAC,CAACE,CAAD,CAAlB,GAAsB,qBAAtB,GAA4C;AAAjE,GAAH,CAA5B,CAAN;AAAgI;;AAAA,SAAS6D,CAAT,CAAW/D,CAAX,EAAa;AAAC,MAAG,EAAEA,CAAC,IAAEA,CAAC,CAACsE,IAAL,IAAWtE,CAAC,CAACsE,IAAF,CAAO8G,MAApB,CAAH,EAA+B,OAAO,IAAP;;AAAY,UAAOpL,CAAC,CAACsE,IAAF,CAAO8G,MAAP,CAAc5G,IAArB;AAA2B,SAAI,gBAAJ;AAAqB,SAAI,eAAJ;AAAoB,aAAM,mBAAN;;AAA0B,SAAI,eAAJ;AAAoB,aAAM,sBAAN;;AAA6B,SAAI,kBAAJ;AAAuB,aAAM,qBAAN;;AAA4B;AAAQ,aAAO,IAAP;AAA1M;AAAuN;;AAAA,SAASoC,CAAT,CAAW5G,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiBE,CAAjB,EAAmB;AAAC,MAAIE,CAAJ,EAAME,CAAN;;AAAQ,MAAG,cAAY,OAAOV,CAAC,CAACgF,YAAxB,EAAqC;AAACxE,IAAAA,CAAC,GAAC,CAAC,GAAER,CAAC,CAACgF,YAAL,EAAmB9E,CAAnB,EAAqBE,CAArB,EAAuBE,CAAvB,CAAF,EAA4BI,CAAC,GAACM,CAAC,CAAChB,CAAC,CAACuE,GAAH,EAAOvE,CAAC,CAAC2L,iBAAT,CAA/B;AAA2D,GAAjG,MAAsGnL,CAAC,GAACR,CAAC,CAACgF,YAAJ,EAAiBtE,CAAC,GAACV,CAAC,CAACuE,GAArB;;AAAyB,SAAM;AAAC8D,IAAAA,WAAW,EAAC3H,CAAb;AAAe4H,IAAAA,IAAI,EAAC9H;AAApB,GAAN;AAA6B;;AAAA,SAAO4C,CAAC,IAAIwI,mBAAZ,EAAgC/J,CAAC,IAAIgK,aAArC","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{numericHash as a}from\"../../core/string.js\";import{getJsonType as i,isPolygon as s,isPolyline as o}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as n,analyzeCIMResource as c}from\"./cimAnalyzer.js\";import l from\"./Rasterizer.js\";import{TextRasterizer as m}from\"./TextRasterizer.js\";import{createLabelOverrideFunction as h,evaluateValueOrFunction as f,colorToArray as g}from\"./utils.js\";import{scaleCIMMarker as y}from\"../support/cimSymbolUtils.js\";import u from\"../support/Symbol3DAnchorPosition2D.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,a)=>{if(e&&e.targetSize){let i;if(a){const t=Math.max(a.frame.xmax-a.frame.xmin,a.frame.ymax-a.frame.ymin);i=e.targetSize/r(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new l,this._textRasterizer=new m,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,a,s,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":i(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],c=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await n(e.data,c,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=h(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(t,r){const a=t.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await e(t.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=f(n.offsetX,t,i,s)*e||0,y=f(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=f(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=f(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),a=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=r(h)-m[0]*(.5+y),C=r(g)-m[1]*(.5+u),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const P=a.createImageData(l.size[0],l.size[1]);P.data.set(new Uint8ClampedArray(l.image.buffer));const x={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};c.push(x)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;a.save(),a.translate(r(e.offsetX),-r(e.offsetY)),a.translate(l,m),a.rotate(i),a.translate(-l,-m),a.drawImage(t,o,n),a.restore()}else a.drawImage(t,o+r(e.offsetX),n-r(e.offsetY))}const h=new u({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?a.getImageData(0,0,t.width,t.height):a.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(e,t,r,i,s,o){let n,c,l,m;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=i&&i.style?i.style:p.Legend,h=\"esriGeometryPolyline\"===r?M.stroke[m]:M.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=f(e.width,t,s,o),{image:a,width:i,height:n}=this._getPictureResource(e,r);return this._rasterizePictureResource(e,a,i,n,h,r)}return null}({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type)return null;if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=f(e.offsetX,t,s,o),e.cim.offsetY=f(e.offsetY,t,s,o),e.cim.rotation=f(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=P(e,t,s,o)),l=a(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,h)}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r));else{({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=r.image,i=r.size[0],c=r.size[1]}return this._rasterizePictureResource(e,a,i,c,h,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,i,s,o),m;({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=d(i,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=f(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a);return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}y(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,i&&(l+=JSON.stringify(i));const h=this._resourceCache;return h.has(l)?h.get(l):(m=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),h.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=f(e.text,t,a,i);if(!o||0===o.length)return null;const n=f(e.fontName,t,a,i),c=f(e.style,t,a,i),l=f(e.weight,t,a,i),m=f(e.decoration,t,a,i),h=f(e.size,t,a,i)*s,y=f(e.horizontalAlignment,t,a,i),u=f(e.verticalAlignment,t,a,i),p=g(f(e.color,t,a,i)),M=g(f(e.outlineColor,t,a,i)),C={color:p,size:h,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:m},halo:{size:f(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,a,i,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=r(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=r(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(a,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:r(e.cim.offsetX)||0,m42:r(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;s(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):o(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const s of d){const e=s?s.length:0;if(e>1){let t=s[0];m.moveTo(r(t[0]),r(t[1]));for(let a=1;a<e;++a)t=s[a],m.lineTo(r(t[0]),r(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;const i=a.height/a.width,s=t?i>1?r(t):r(t)/i:a.width,o=t?i>1?r(t)*i:r(t):a.height;return{image:this._imageTo32Array(a,s,o),width:s,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=s(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=c(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n"]},"metadata":{},"sourceType":"module"}