{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../Color.js\";\nimport { toLCH as e, toRGB as r, toLAB as s } from \"../../../../../core/colorUtils.js\";\nimport { unitBezier as n } from \"../../../unitBezier.js\";\nimport { interpolate as a } from \"../GeometryUtils.js\";\nimport { ValueType as o, StringType as i, ObjectType as l, NumberType as u, BooleanType as c, ColorType as h, typeToString as p, arrayType as g, getType as f, matchType as w, valueToString as m } from \"./types.js\";\n\nclass y {\n  constructor(t) {\n    this.parent = t, this.vars = {};\n  }\n\n  add(t, e) {\n    this.vars[t] = e;\n  }\n\n  get(t) {\n    return this.vars[t] ? this.vars[t] : this.parent ? this.parent.get(t) : null;\n  }\n\n}\n\nclass v {\n  constructor() {\n    this.type = o;\n  }\n\n  static parse(t) {\n    if (t.length > 1) throw new Error('\"id\" does not expect arguments');\n    return new v();\n  }\n\n  evaluate(t, e) {\n    return null == t ? void 0 : t.id;\n  }\n\n}\n\nclass b {\n  constructor() {\n    this.type = i;\n  }\n\n  static parse(t) {\n    if (t.length > 1) throw new Error('\"geometry-type\" does not expect arguments');\n    return new b();\n  }\n\n  evaluate(t, e) {\n    if (!t) return null;\n\n    switch (t.type) {\n      case 1:\n        return \"Point\";\n\n      case 2:\n        return \"LineString\";\n\n      case 3:\n        return \"Polygon\";\n\n      default:\n        return null;\n    }\n  }\n\n}\n\nclass d {\n  constructor() {\n    this.type = l;\n  }\n\n  static parse(t) {\n    if (t.length > 1) throw new Error('\"properties\" does not expect arguments');\n    return new d();\n  }\n\n  evaluate(t, e) {\n    return null == t ? void 0 : t.values;\n  }\n\n}\n\nclass x {\n  constructor() {\n    this.type = u;\n  }\n\n  static parse(t) {\n    if (t.length > 1) throw new Error('\"zoom\" does not expect arguments');\n    return new x();\n  }\n\n  evaluate(t, e) {\n    return e;\n  }\n\n}\n\nclass E {\n  constructor(t, e, r) {\n    this.lhs = t, this.rhs = e, this.compare = r, this.type = c;\n  }\n\n  static parse(t, e, r) {\n    if (3 !== t.length && 4 !== t.length) throw new Error(`\"${t[0]}\" expects 2 or 3 arguments`);\n    if (4 === t.length) throw new Error(`\"${t[0]}\" collator not supported`);\n    return new E(ht(t[1], e), ht(t[2], e), r);\n  }\n\n  evaluate(t, e) {\n    return this.compare(this.lhs.evaluate(t, e), this.rhs.evaluate(t, e));\n  }\n\n}\n\nclass $ extends E {\n  static parse(t, e) {\n    return E.parse(t, e, (t, e) => t === e);\n  }\n\n}\n\nclass M extends E {\n  static parse(t, e) {\n    return E.parse(t, e, (t, e) => t !== e);\n  }\n\n}\n\nclass k extends E {\n  static parse(t, e) {\n    return E.parse(t, e, (t, e) => t < e);\n  }\n\n}\n\nclass A extends E {\n  static parse(t, e) {\n    return E.parse(t, e, (t, e) => t <= e);\n  }\n\n}\n\nclass j extends E {\n  static parse(t, e) {\n    return E.parse(t, e, (t, e) => t > e);\n  }\n\n}\n\nclass q extends E {\n  static parse(t, e) {\n    return E.parse(t, e, (t, e) => t >= e);\n  }\n\n}\n\nclass N {\n  constructor(t) {\n    this.arg = t, this.type = c;\n  }\n\n  static parse(t, e) {\n    if (2 !== t.length) throw new Error('\"!\" expects 1 argument');\n    return new N(ht(t[1], e));\n  }\n\n  evaluate(t, e) {\n    return !this.arg.evaluate(t, e);\n  }\n\n}\n\nclass _ {\n  constructor(t) {\n    this.args = t, this.type = c;\n  }\n\n  static parse(t, e) {\n    const r = [];\n\n    for (let s = 1; s < t.length; s++) r.push(ht(t[s], e));\n\n    return new _(r);\n  }\n\n  evaluate(t, e) {\n    for (const r of this.args) if (!r.evaluate(t, e)) return !1;\n\n    return !0;\n  }\n\n}\n\nclass R {\n  constructor(t) {\n    this.args = t, this.type = c;\n  }\n\n  static parse(t, e) {\n    const r = [];\n\n    for (let s = 1; s < t.length; s++) r.push(ht(t[s], e));\n\n    return new R(r);\n  }\n\n  evaluate(t, e) {\n    for (const r of this.args) if (r.evaluate(t, e)) return !0;\n\n    return !1;\n  }\n\n}\n\nclass C {\n  constructor(t) {\n    this.args = t, this.type = c;\n  }\n\n  static parse(t, e) {\n    const r = [];\n\n    for (let s = 1; s < t.length; s++) r.push(ht(t[s], e));\n\n    return new C(r);\n  }\n\n  evaluate(t, e) {\n    for (const r of this.args) if (r.evaluate(t, e)) return !1;\n\n    return !0;\n  }\n\n}\n\nclass z {\n  constructor(t, e, r) {\n    this.type = t, this.args = e, this.fallback = r;\n  }\n\n  static parse(t, e, r) {\n    if (t.length < 4) throw new Error('\"case\" expects at least 3 arguments');\n    if (t.length % 2 == 1) throw new Error('\"case\" expects an odd number of arguments');\n    let s;\n    const n = [];\n\n    for (let o = 1; o < t.length - 1; o += 2) {\n      const a = ht(t[o], e),\n            i = ht(t[o + 1], e, r);\n      s || (s = i.type), n.push({\n        condition: a,\n        output: i\n      });\n    }\n\n    const a = ht(t[t.length - 1], e, r);\n    return s || (s = a.type), new z(s, n, a);\n  }\n\n  evaluate(t, e) {\n    for (const r of this.args) if (r.condition.evaluate(t, e)) return r.output.evaluate(t, e);\n\n    return this.fallback.evaluate(t, e);\n  }\n\n}\n\nclass I {\n  constructor(t, e) {\n    this.type = t, this.args = e;\n  }\n\n  static parse(t, e) {\n    if (t.length < 2) throw new Error('\"coalesce\" expects at least 1 argument');\n    let r;\n    const s = [];\n\n    for (let n = 1; n < t.length; n++) {\n      const a = ht(t[n], e);\n      r || (r = a.type), s.push(a);\n    }\n\n    return new I(r, s);\n  }\n\n  evaluate(t, e) {\n    for (const r of this.args) {\n      const s = r.evaluate(t, e);\n      if (null !== s) return s;\n    }\n\n    return null;\n  }\n\n}\n\nclass L {\n  constructor(t, e, r, s, n) {\n    this.type = t, this.input = e, this.labels = r, this.outputs = s, this.fallback = n;\n  }\n\n  static parse(t, e) {\n    if (t.length < 3) throw new Error('\"match\" expects at least 3 arguments');\n    if (t.length % 2 == 0) throw new Error('\"case\" expects an even number of arguments');\n    let r;\n    const s = ht(t[1], e),\n          n = [],\n          a = {};\n    let o;\n\n    for (let i = 2; i < t.length - 1; i += 2) {\n      let s = t[i];\n      Array.isArray(s) || (s = [s]);\n\n      for (const t of s) {\n        const e = typeof t;\n        if (\"string\" !== e && \"number\" !== e) throw new Error('\"match\" requires string or number literal as labels');\n\n        if (o) {\n          if (e !== o) throw new Error('\"match\" requires labels to have the same type');\n        } else o = e;\n\n        a[t] = n.length;\n      }\n\n      const l = ht(t[i + 1], e);\n      r || (r = l.type), n.push(l);\n    }\n\n    return new L(r, s, a, n, ht(t[t.length - 1], e));\n  }\n\n  evaluate(t, e) {\n    const r = this.input.evaluate(t, e);\n    return (this.outputs[this.labels[r]] || this.fallback).evaluate(t, e);\n  }\n\n}\n\nclass U {\n  constructor(t, e, r, s, n) {\n    this.operator = t, this.type = e, this.interpolation = r, this.input = s, this.stops = n;\n  }\n\n  static parse(t, e, r) {\n    const s = t[0];\n    if (t.length < 5) throw new Error(`\"${s}\" expects at least 4 arguments`);\n    const n = t[1];\n    if (!Array.isArray(n) || 0 === n.length) throw new Error(`\"${n}\" is not a valid interpolation`);\n\n    switch (n[0]) {\n      case \"linear\":\n        if (1 !== n.length) throw new Error(\"Linear interpolation cannot have parameters\");\n        break;\n\n      case \"exponential\":\n        if (2 !== n.length || \"number\" != typeof n[1]) throw new Error(\"Exponential interpolation requires one numeric argument\");\n        break;\n\n      case \"cubic-bezier\":\n        if (5 !== n.length) throw new Error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1\");\n\n        for (let t = 1; t < 5; t++) {\n          const e = n[t];\n          if (\"number\" != typeof e || e < 0 || e > 1) throw new Error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1\");\n        }\n\n        break;\n\n      default:\n        throw new Error(`\"${t[0]}\" unknown interpolation type \"${n[0]}\"`);\n    }\n\n    if (t.length % 2 != 1) throw new Error(`\"${s}\" expects an even number of arguments`);\n    const a = ht(t[2], e, u);\n    let o;\n    \"interpolate-hcl\" === s || \"interpolate-lab\" === s ? o = h : r && \"value\" !== r.kind && (o = r);\n    const i = [];\n\n    for (let l = 3; l < t.length; l += 2) {\n      const r = t[l];\n      if (\"number\" != typeof r) throw new Error(`\"${s}\" requires stop inputs as literal numbers`);\n      if (i.length && i[i.length - 1][0] >= r) throw new Error(`\"${s}\" requires strictly ascending stop inputs`);\n      const n = ht(t[l + 1], e, o);\n      o || (o = n.type), i.push([r, n]);\n    }\n\n    if (o && o !== h && o !== u && (\"array\" !== o.kind || o.itemType !== u)) throw new Error(`\"${s}\" cannot interpolate type ${p(o)}`);\n    return new U(s, o, n, a, i);\n  }\n\n  evaluate(n, o) {\n    const i = this.stops;\n    if (1 === i.length) return i[0][1].evaluate(n, o);\n    const l = this.input.evaluate(n, o);\n    if (l <= i[0][0]) return i[0][1].evaluate(n, o);\n    if (l >= i[i.length - 1][0]) return i[i.length - 1][1].evaluate(n, o);\n    let u = 0;\n\n    for (; ++u < i.length && !(l < i[u][0]););\n\n    const c = i[u - 1][0],\n          h = i[u][0],\n          g = U.interpolationRatio(this.interpolation, l, c, h),\n          f = i[u - 1][1].evaluate(n, o),\n          w = i[u][1].evaluate(n, o);\n\n    if (\"interpolate\" === this.operator) {\n      if (\"array\" === this.type.kind && Array.isArray(f) && Array.isArray(w)) return f.map((t, e) => a(t, w[e], g));\n\n      if (\"color\" === this.type.kind && f instanceof t && w instanceof t) {\n        const e = new t(f),\n              r = new t(w);\n        return new t([a(e.r, r.r, g), a(e.g, r.g, g), a(e.b, r.b, g), a(e.a, r.a, g)]);\n      }\n\n      if (\"number\" === this.type.kind && \"number\" == typeof f && \"number\" == typeof w) return a(f, w, g);\n      throw new Error(`\"${this.operator}\" cannot interpolate type ${p(this.type)}`);\n    }\n\n    if (\"interpolate-hcl\" === this.operator) {\n      const s = e(f),\n            n = e(w),\n            o = n.h - s.h,\n            i = r({\n        h: s.h + g * (o > 180 || o < -180 ? o - 360 * Math.round(o / 360) : o),\n        c: a(s.c, n.c, g),\n        l: a(s.l, n.l, g)\n      });\n      return new t({\n        a: a(f.a, w.a, g),\n        ...i\n      });\n    }\n\n    if (\"interpolate-lab\" === this.operator) {\n      const e = s(f),\n            n = s(w),\n            o = r({\n        l: a(e.l, n.l, g),\n        a: a(e.a, n.a, g),\n        b: a(e.b, n.b, g)\n      });\n      return new t({\n        a: a(f.a, w.a, g),\n        ...o\n      });\n    }\n\n    throw new Error(`Unexpected operator \"${this.operator}\"`);\n  }\n\n  interpolationUniformValue(t, e) {\n    const r = this.stops;\n    if (1 === r.length) return 0;\n    if (t >= r[r.length - 1][0]) return 0;\n    let s = 0;\n\n    for (; ++s < r.length && !(t < r[s][0]););\n\n    const n = r[s - 1][0],\n          a = r[s][0];\n    return U.interpolationRatio(this.interpolation, e, n, a);\n  }\n\n  getInterpolationRange(t) {\n    const e = this.stops;\n\n    if (1 === e.length) {\n      const t = e[0][0];\n      return [t, t];\n    }\n\n    const r = e[e.length - 1][0];\n    if (t >= r) return [r, r];\n    let s = 0;\n\n    for (; ++s < e.length && !(t < e[s][0]););\n\n    return [e[s - 1][0], e[s][0]];\n  }\n\n  static interpolationRatio(t, e, r, s) {\n    let a = 0;\n    if (\"linear\" === t[0]) a = U.exponentialInterpolationRatio(e, 1, r, s);else if (\"exponential\" === t[0]) a = U.exponentialInterpolationRatio(e, t[1], r, s);else if (\"cubic-bezier\" === t[0]) {\n      a = n(t[1], t[2], t[3], t[4])(U.exponentialInterpolationRatio(e, 1, r, s), 1e-5);\n    }\n    return a < 0 ? a = 0 : a > 1 && (a = 1), a;\n  }\n\n  static exponentialInterpolationRatio(t, e, r, s) {\n    const n = s - r;\n    if (0 === n) return 0;\n    const a = t - r;\n    return 1 === e ? a / n : (e ** a - 1) / (e ** n - 1);\n  }\n\n}\n\nclass B {\n  constructor(t, e, r) {\n    this.type = t, this.input = e, this.stops = r;\n  }\n\n  static parse(t, e) {\n    if (t.length < 5) throw new Error('\"step\" expects at least 4 arguments');\n    if (t.length % 2 != 1) throw new Error('\"step\" expects an even number of arguments');\n    const r = ht(t[1], e, u);\n    let s;\n    const n = [];\n    n.push([-1 / 0, ht(t[2], e)]);\n\n    for (let a = 3; a < t.length; a += 2) {\n      const r = t[a];\n      if (\"number\" != typeof r) throw new Error('\"step\" requires stop inputs as literal numbers');\n      if (n.length && n[n.length - 1][0] >= r) throw new Error('\"step\" requires strictly ascending stop inputs');\n      const o = ht(t[a + 1], e);\n      s || (s = o.type), n.push([r, o]);\n    }\n\n    return new B(s, r, n);\n  }\n\n  evaluate(t, e) {\n    const r = this.stops;\n    if (1 === r.length) return r[0][1].evaluate(t, e);\n    const s = this.input.evaluate(t, e);\n    let n = 0;\n\n    for (; ++n < r.length && !(s < r[n][0]););\n\n    return this.stops[n - 1][1].evaluate(t, e);\n  }\n\n}\n\nclass S {\n  constructor(t, e) {\n    this.type = t, this.output = e;\n  }\n\n  static parse(t, e, r) {\n    if (t.length < 4) throw new Error('\"let\" expects at least 3 arguments');\n    if (t.length % 2 == 1) throw new Error('\"let\" expects an odd number of arguments');\n    const s = new y(e);\n\n    for (let a = 1; a < t.length - 1; a += 2) {\n      const r = t[a];\n      if (\"string\" != typeof r) throw new Error(`\"let\" requires a string to define variable names - found ${r}`);\n      s.add(r, ht(t[a + 1], e));\n    }\n\n    const n = ht(t[t.length - 1], s, r);\n    return new S(n.type, n);\n  }\n\n  evaluate(t, e) {\n    return this.output.evaluate(t, e);\n  }\n\n}\n\nclass O {\n  constructor(t, e) {\n    this.type = t, this.output = e;\n  }\n\n  static parse(t, e, r) {\n    if (2 !== t.length || \"string\" != typeof t[1]) throw new Error('\"var\" requires just one literal string argument');\n    const s = e.get(t[1]);\n    if (!s) throw new Error(`${t[1]} must be defined before being used in a \"var\" expression`);\n    return new O(r || o, s);\n  }\n\n  evaluate(t, e) {\n    return this.output.evaluate(t, e);\n  }\n\n}\n\nclass P {\n  constructor(t, e, r) {\n    this.type = t, this.index = e, this.array = r;\n  }\n\n  static parse(t, e) {\n    if (3 !== t.length) throw new Error('\"at\" expects 2 arguments');\n    const r = ht(t[1], e, u),\n          s = ht(t[2], e);\n    return new P(s.type.itemType, r, s);\n  }\n\n  evaluate(t, e) {\n    const r = this.index.evaluate(t, e),\n          s = this.array.evaluate(t, e);\n    if (r < 0 || r >= s.length) throw new Error('\"at\" index out of bounds');\n    if (r !== Math.floor(r)) throw new Error('\"at\" index must be an integer');\n    return s[r];\n  }\n\n}\n\nclass T {\n  constructor(t, e) {\n    this.key = t, this.obj = e, this.type = o;\n  }\n\n  static parse(t, e) {\n    let r, s;\n\n    switch (t.length) {\n      case 2:\n        return r = ht(t[1], e), new T(r);\n\n      case 3:\n        return r = ht(t[1], e), s = ht(t[2], e), new T(r, s);\n\n      default:\n        throw new Error('\"get\" expects 1 or 2 arguments');\n    }\n  }\n\n  evaluate(t, e) {\n    const r = this.key.evaluate(t, e);\n\n    if (this.obj) {\n      return this.obj.evaluate(t, e)[r];\n    }\n\n    return null == t ? void 0 : t.values[r];\n  }\n\n}\n\nclass F {\n  constructor(t, e) {\n    this.key = t, this.obj = e, this.type = c;\n  }\n\n  static parse(t, e) {\n    let r, s;\n\n    switch (t.length) {\n      case 2:\n        return r = ht(t[1], e), new F(r);\n\n      case 3:\n        return r = ht(t[1], e), s = ht(t[2], e), new F(r, s);\n\n      default:\n        throw new Error('\"has\" expects 1 or 2 arguments');\n    }\n  }\n\n  evaluate(t, e) {\n    const r = this.key.evaluate(t, e);\n\n    if (this.obj) {\n      return r in this.obj.evaluate(t, e);\n    }\n\n    return !(null == t || !t.values[r]);\n  }\n\n}\n\nclass G {\n  constructor(t, e) {\n    this.key = t, this.vals = e, this.type = c;\n  }\n\n  static parse(t, e) {\n    if (3 !== t.length) throw new Error('\"in\" expects 2 arguments');\n    return new G(ht(t[1], e), ht(t[2], e));\n  }\n\n  evaluate(t, e) {\n    const r = this.key.evaluate(t, e);\n    return -1 !== this.vals.evaluate(t, e).indexOf(r);\n  }\n\n}\n\nclass V {\n  constructor(t, e, r) {\n    this.item = t, this.array = e, this.from = r, this.type = u;\n  }\n\n  static parse(t, e) {\n    if (t.length < 3 || t.length > 4) throw new Error('\"index-of\" expects 3 or 4 arguments');\n    const r = ht(t[1], e),\n          s = ht(t[2], e);\n\n    if (4 === t.length) {\n      const n = ht(t[3], e, u);\n      return new V(r, s, n);\n    }\n\n    return new V(r, s);\n  }\n\n  evaluate(t, e) {\n    const r = this.item.evaluate(t, e),\n          s = this.array.evaluate(t, e);\n\n    if (this.from) {\n      const n = this.from.evaluate(t, e);\n      if (n !== Math.floor(n)) throw new Error('\"index-of\" index must be an integer');\n      return s.indexOf(r, n);\n    }\n\n    return s.indexOf(r);\n  }\n\n}\n\nclass D {\n  constructor(t) {\n    this.arg = t, this.type = u;\n  }\n\n  static parse(t, e) {\n    if (2 !== t.length) throw new Error('\"length\" expects 2 arguments');\n    const r = ht(t[1], e);\n    return new D(r);\n  }\n\n  evaluate(t, e) {\n    const r = this.arg.evaluate(t, e);\n    if (\"string\" == typeof r) return r.length;\n    if (Array.isArray(r)) return r.length;\n    throw new Error('\"length\" expects string or array');\n  }\n\n}\n\nclass H {\n  constructor(t, e, r, s) {\n    this.type = t, this.array = e, this.from = r, this.to = s;\n  }\n\n  static parse(t, e) {\n    if (t.length < 3 || t.length > 4) throw new Error('\"slice\" expects 2 or 3 arguments');\n    const r = ht(t[1], e),\n          s = ht(t[2], e, u);\n    if (s.type !== u) throw new Error('\"slice\" index must return a number');\n\n    if (4 === t.length) {\n      const n = ht(t[3], e, u);\n      if (n.type !== u) throw new Error('\"slice\" index must return a number');\n      return new H(r.type, r, s, n);\n    }\n\n    return new H(r.type, r, s);\n  }\n\n  evaluate(t, e) {\n    const r = this.array.evaluate(t, e);\n    if (!Array.isArray(r) && \"string\" != typeof r) throw new Error('\"slice\" input must be an array or a string');\n    const s = this.from.evaluate(t, e);\n    if (s < 0 || s >= r.length) throw new Error('\"slice\" index out of bounds');\n    if (s !== Math.floor(s)) throw new Error('\"slice\" index must be an integer');\n\n    if (this.to) {\n      const n = this.to.evaluate(t, e);\n      if (n < 0 || n >= r.length) throw new Error('\"slice\" index out of bounds');\n      if (n !== Math.floor(n)) throw new Error('\"slice\" index must be an integer');\n      return r.slice(s, n);\n    }\n\n    return r.slice(s);\n  }\n\n}\n\nclass J {\n  constructor() {\n    this.type = c;\n  }\n\n  static parse(t) {\n    if (1 !== t.length) throw new Error('\"has-id\" expects no arguments');\n    return new J();\n  }\n\n  evaluate(t, e) {\n    return t && void 0 !== t.id;\n  }\n\n}\n\nclass K {\n  constructor(t, e) {\n    this.args = t, this.calculate = e, this.type = u;\n  }\n\n  static parse(t, e, r) {\n    const s = t.slice(1).map(t => ht(t, e));\n    return new K(s, r);\n  }\n\n  evaluate(t, e) {\n    let r;\n    return this.args && (r = this.args.map(r => r.evaluate(t, e))), this.calculate(r);\n  }\n\n}\n\nclass Q extends K {\n  static parse(t, e) {\n    switch (t.length) {\n      case 2:\n        return K.parse(t, e, t => -t[0]);\n\n      case 3:\n        return K.parse(t, e, t => t[0] - t[1]);\n\n      default:\n        throw new Error('\"-\" expects 1 or 2 arguments');\n    }\n  }\n\n}\n\nclass W extends K {\n  static parse(t, e) {\n    return K.parse(t, e, t => {\n      let e = 1;\n\n      for (const r of t) e *= r;\n\n      return e;\n    });\n  }\n\n}\n\nclass X extends K {\n  static parse(t, e) {\n    if (3 === t.length) return K.parse(t, e, t => t[0] / t[1]);\n    throw new Error('\"/\" expects 2 arguments');\n  }\n\n}\n\nclass Y extends K {\n  static parse(t, e) {\n    if (3 === t.length) return K.parse(t, e, t => t[0] % t[1]);\n    throw new Error('\"%\" expects 2 arguments');\n  }\n\n}\n\nclass Z extends K {\n  static parse(t, e) {\n    if (3 === t.length) return K.parse(t, e, t => t[0] ** t[1]);\n    throw new Error('\"^\" expects 1 or 2 arguments');\n  }\n\n}\n\nclass tt extends K {\n  static parse(t, e) {\n    return K.parse(t, e, t => {\n      let e = 0;\n\n      for (const r of t) e += r;\n\n      return e;\n    });\n  }\n\n}\n\nclass et {\n  constructor(t, e) {\n    this.args = t, this.calculate = e, this.type = u;\n  }\n\n  static parse(t, e) {\n    const r = t.slice(1).map(t => ht(t, e));\n    return new et(r, et.ops[t[0]]);\n  }\n\n  evaluate(t, e) {\n    let r;\n    return this.args && (r = this.args.map(r => r.evaluate(t, e))), this.calculate(r);\n  }\n\n}\n\net.ops = {\n  abs: t => Math.abs(t[0]),\n  acos: t => Math.acos(t[0]),\n  asin: t => Math.asin(t[0]),\n  atan: t => Math.atan(t[0]),\n  ceil: t => Math.ceil(t[0]),\n  cos: t => Math.cos(t[0]),\n  e: () => Math.E,\n  floor: t => Math.floor(t[0]),\n  ln: t => Math.log(t[0]),\n  ln2: () => Math.LN2,\n  log10: t => Math.log(t[0]) / Math.LN10,\n  log2: t => Math.log(t[0]) / Math.LN2,\n  max: t => Math.max(...t),\n  min: t => Math.min(...t),\n  pi: () => Math.PI,\n  round: t => Math.round(t[0]),\n  sin: t => Math.sin(t[0]),\n  sqrt: t => Math.sqrt(t[0]),\n  tan: t => Math.tan(t[0])\n};\n\nclass rt {\n  constructor(t) {\n    this.args = t, this.type = i;\n  }\n\n  static parse(t, e) {\n    return new rt(t.slice(1).map(t => ht(t, e)));\n  }\n\n  evaluate(t, e) {\n    return this.args.map(r => r.evaluate(t, e)).join(\"\");\n  }\n\n}\n\nclass st {\n  constructor(t, e) {\n    this.arg = t, this.calculate = e, this.type = i;\n  }\n\n  static parse(t, e) {\n    if (2 !== t.length) throw new Error(`${t[0]} expects 1 argument`);\n    const r = ht(t[1], e);\n    return new st(r, st.ops[t[0]]);\n  }\n\n  evaluate(t, e) {\n    return this.calculate(this.arg.evaluate(t, e));\n  }\n\n}\n\nst.ops = {\n  downcase: t => t.toLowerCase(),\n  upcase: t => t.toUpperCase()\n};\n\nclass nt {\n  constructor(t) {\n    this.args = t, this.type = h;\n  }\n\n  static parse(t, e) {\n    if (4 !== t.length) throw new Error('\"rgb\" expects 3 arguments');\n    const r = t.slice(1).map(t => ht(t, e));\n    return new nt(r);\n  }\n\n  evaluate(e, r) {\n    const s = this._validate(this.args[0].evaluate(e, r)),\n          n = this._validate(this.args[1].evaluate(e, r)),\n          a = this._validate(this.args[2].evaluate(e, r));\n\n    return new t({\n      r: s,\n      g: n,\n      b: a\n    });\n  }\n\n  _validate(t) {\n    if (\"number\" != typeof t || t < 0 || t > 255) throw new Error(`${t}: invalid color component`);\n    return Math.round(t);\n  }\n\n}\n\nclass at {\n  constructor(t) {\n    this.args = t, this.type = h;\n  }\n\n  static parse(t, e) {\n    if (5 !== t.length) throw new Error('\"rgba\" expects 4 arguments');\n    const r = t.slice(1).map(t => ht(t, e));\n    return new at(r);\n  }\n\n  evaluate(e, r) {\n    const s = this._validate(this.args[0].evaluate(e, r)),\n          n = this._validate(this.args[1].evaluate(e, r)),\n          a = this._validate(this.args[2].evaluate(e, r)),\n          o = this._validateAlpha(this.args[3].evaluate(e, r));\n\n    return new t({\n      r: s,\n      g: n,\n      b: a,\n      a: o\n    });\n  }\n\n  _validate(t) {\n    if (\"number\" != typeof t || t < 0 || t > 255) throw new Error(`${t}: invalid color component`);\n    return Math.round(t);\n  }\n\n  _validateAlpha(t) {\n    if (\"number\" != typeof t || t < 0 || t > 1) throw new Error(`${t}: invalid alpha color component`);\n    return t;\n  }\n\n}\n\nclass ot {\n  constructor(t) {\n    this.color = t, this.type = g(u, 4);\n  }\n\n  static parse(t, e) {\n    if (2 !== t.length) throw new Error('\"to-rgba\" expects 1 argument');\n    const r = ht(t[1], e);\n    return new ot(r);\n  }\n\n  evaluate(e, r) {\n    return new t(this.color.evaluate(e, r)).toRgba();\n  }\n\n}\n\nclass it {\n  constructor(t, e) {\n    this.type = t, this.args = e;\n  }\n\n  static parse(t, e) {\n    const r = t[0];\n    if (t.length < 2) throw new Error(`${r} expects at least one argument`);\n    let s,\n        n = 1;\n\n    if (\"array\" === r) {\n      if (t.length > 2) {\n        switch (t[1]) {\n          case \"string\":\n            s = i;\n            break;\n\n          case \"number\":\n            s = u;\n            break;\n\n          case \"boolean\":\n            s = c;\n            break;\n\n          default:\n            throw new Error('\"array\" type argument must be string, number or boolean');\n        }\n\n        n++;\n      } else s = o;\n\n      let e;\n\n      if (t.length > 3) {\n        if (e = t[2], null !== e && (\"number\" != typeof e || e < 0 || e !== Math.floor(e))) throw new Error('\"array\" length argument must be a positive integer literal');\n        n++;\n      }\n\n      s = g(s, e);\n    } else switch (r) {\n      case \"string\":\n        s = i;\n        break;\n\n      case \"number\":\n        s = u;\n        break;\n\n      case \"boolean\":\n        s = c;\n        break;\n\n      case \"object\":\n        s = l;\n    }\n\n    const a = [];\n\n    for (; n < t.length; n++) {\n      const r = ht(t[n], e);\n      a.push(r);\n    }\n\n    return new it(s, a);\n  }\n\n  evaluate(t, e) {\n    let r;\n\n    for (const s of this.args) {\n      const n = s.evaluate(t, e);\n      if (r = f(n), w(r, this.type)) return n;\n    }\n\n    throw new Error(`Expected ${p(this.type)} but got ${p(r)}`);\n  }\n\n}\n\nclass lt {\n  constructor(t, e) {\n    this.type = t, this.args = e;\n  }\n\n  static parse(t, e) {\n    const r = t[0],\n          s = lt.types[r];\n\n    if (s === c || s === i) {\n      if (2 !== t.length) throw new Error(`${r} expects one argument`);\n    } else if (t.length < 2) throw new Error(`${r} expects at least one argument`);\n\n    const n = [];\n\n    for (let a = 1; a < t.length; a++) {\n      const r = ht(t[a], e);\n      n.push(r);\n    }\n\n    return new lt(s, n);\n  }\n\n  evaluate(e, r) {\n    if (this.type === c) return Boolean(this.args[0].evaluate(e, r));\n    if (this.type === i) return m(this.args[0].evaluate(e, r));\n\n    if (this.type === u) {\n      for (const t of this.args) {\n        const s = Number(t.evaluate(e, r));\n        if (!isNaN(s)) return s;\n      }\n\n      return null;\n    }\n\n    if (this.type === h) {\n      for (const s of this.args) try {\n        const n = lt.toColor(s.evaluate(e, r));\n        if (n instanceof t) return n;\n      } catch {}\n\n      return null;\n    }\n  }\n\n  static toBoolean(t) {\n    return Boolean(t);\n  }\n\n  static toString(t) {\n    return m(t);\n  }\n\n  static toNumber(t) {\n    const e = Number(t);\n    if (isNaN(e)) throw new Error(`\"${t}\" is not a number`);\n    return e;\n  }\n\n  static toColor(e) {\n    if (e instanceof t) return e;\n\n    if (\"string\" == typeof e) {\n      const r = t.fromString(e);\n      if (r) return r;\n      throw new Error(`\"${e}\" is not a color`);\n    }\n\n    if (Array.isArray(e)) return t.fromArray(e);\n    throw new Error(`\"${e}\" is not a color`);\n  }\n\n}\n\nlt.types = {\n  \"to-boolean\": c,\n  \"to-color\": h,\n  \"to-number\": u,\n  \"to-string\": i\n};\n\nclass ut {\n  constructor(t) {\n    this.val = t, this.type = f(t);\n  }\n\n  static parse(t) {\n    if (2 !== t.length) throw new Error('\"literal\" expects 1 argument');\n    return new ut(t[1]);\n  }\n\n  evaluate(t, e) {\n    return this.val;\n  }\n\n}\n\nclass ct {\n  constructor(t) {\n    this.arg = t, this.type = i;\n  }\n\n  static parse(t, e) {\n    if (2 !== t.length) throw new Error('\"typeof\" expects 1 argument');\n    return new ct(ht(t[1], e));\n  }\n\n  evaluate(t, e) {\n    return p(f(this.arg.evaluate(t, e)));\n  }\n\n}\n\nfunction ht(t, e, r) {\n  const s = typeof t;\n\n  if (\"string\" === s || \"boolean\" === s || \"number\" === s || null === t) {\n    if (r) switch (r.kind) {\n      case \"string\":\n        \"string\" !== s && (t = lt.toString(t));\n        break;\n\n      case \"number\":\n        \"number\" !== s && (t = lt.toNumber(t));\n        break;\n\n      case \"color\":\n        t = lt.toColor(t);\n    }\n    t = [\"literal\", t];\n  }\n\n  if (!Array.isArray(t) || 0 === t.length) throw new Error(\"Expression must be a non empty array\");\n  const n = t[0];\n  if (\"string\" != typeof n) throw new Error(\"First element of expression must be a string\");\n  const a = pt[n];\n  if (void 0 === a) throw new Error(`Invalid expression operator \"${n}\"`);\n  if (!a) throw new Error(`Unimplemented expression operator \"${n}\"`);\n  return a.parse(t, e, r);\n}\n\nconst pt = {\n  array: it,\n  boolean: it,\n  collator: null,\n  format: null,\n  image: null,\n  literal: ut,\n  number: it,\n  \"number-format\": null,\n  object: it,\n  string: it,\n  \"to-boolean\": lt,\n  \"to-color\": lt,\n  \"to-number\": lt,\n  \"to-string\": lt,\n  typeof: ct,\n  accumulated: null,\n  \"feature-state\": null,\n  \"geometry-type\": b,\n  id: v,\n  \"line-progress\": null,\n  properties: d,\n  at: P,\n  get: T,\n  has: F,\n  in: G,\n  \"index-of\": V,\n  length: D,\n  slice: H,\n  \"!\": N,\n  \"!=\": M,\n  \"<\": k,\n  \"<=\": A,\n  \"==\": $,\n  \">\": j,\n  \">=\": q,\n  all: _,\n  any: R,\n  case: z,\n  coalesce: I,\n  match: L,\n  within: null,\n  interpolate: U,\n  \"interpolate-hcl\": U,\n  \"interpolate-lab\": U,\n  step: B,\n  let: S,\n  var: O,\n  concat: rt,\n  downcase: st,\n  \"is-supported-script\": null,\n  \"resolved-locale\": null,\n  upcase: st,\n  rgb: nt,\n  rgba: at,\n  \"to-rgba\": ot,\n  \"-\": Q,\n  \"*\": W,\n  \"/\": X,\n  \"%\": Y,\n  \"^\": Z,\n  \"+\": tt,\n  abs: et,\n  acos: et,\n  asin: et,\n  atan: et,\n  ceil: et,\n  cos: et,\n  e: et,\n  floor: et,\n  ln: et,\n  ln2: et,\n  log10: et,\n  log2: et,\n  max: et,\n  min: et,\n  pi: et,\n  round: et,\n  sin: et,\n  sqrt: et,\n  tan: et,\n  zoom: x,\n  \"heatmap-density\": null,\n  \"has-id\": J,\n  none: C\n};\nexport { _ as ALL, R as ANY, tt as Add, it as Assert, P as At, et as Calculate, z as Case, I as Coalesce, lt as Coerce, rt as Concat, X as Div, $ as EQ, q as GE, j as GT, b as GeomType, T as Get, F as Has, J as HasID, v as ID, G as In, V as IndexOf, U as Interpolate, A as LE, k as LT, D as Length, S as Let, ut as Literal, L as Match, Y as Mod, W as Mul, M as NE, C as NONE, N as NOT, Z as Pow, d as Properties, nt as Rgb, at as Rgba, H as Slice, B as Step, st as String, Q as Sub, ot as ToRgba, ct as TypeOf, O as Var, x as Zoom, ht as createExpression, pt as ops };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/vectorTiles/expression/expression.js"],"names":["t","toLCH","e","toRGB","r","toLAB","s","unitBezier","n","interpolate","a","ValueType","o","StringType","i","ObjectType","l","NumberType","u","BooleanType","c","ColorType","h","typeToString","p","arrayType","g","getType","f","matchType","w","valueToString","m","y","constructor","parent","vars","add","get","v","type","parse","length","Error","evaluate","id","b","d","values","x","E","lhs","rhs","compare","ht","$","M","k","A","j","q","N","arg","_","args","push","R","C","z","fallback","condition","output","I","L","input","labels","outputs","Array","isArray","U","operator","interpolation","stops","kind","itemType","interpolationRatio","map","Math","round","interpolationUniformValue","getInterpolationRange","exponentialInterpolationRatio","B","S","O","P","index","array","floor","T","key","obj","F","G","vals","indexOf","V","item","from","D","H","to","slice","J","K","calculate","Q","W","X","Y","Z","tt","et","ops","abs","acos","asin","atan","ceil","cos","ln","log","ln2","LN2","log10","LN10","log2","max","min","pi","PI","sin","sqrt","tan","rt","join","st","downcase","toLowerCase","upcase","toUpperCase","nt","_validate","at","_validateAlpha","ot","color","toRgba","it","lt","types","Boolean","Number","isNaN","toColor","toBoolean","toString","toNumber","fromString","fromArray","ut","val","ct","pt","boolean","collator","format","image","literal","number","object","string","typeof","accumulated","properties","has","in","all","any","case","coalesce","match","within","step","let","var","concat","rgb","rgba","zoom","none","ALL","ANY","Add","Assert","At","Calculate","Case","Coalesce","Coerce","Concat","Div","EQ","GE","GT","GeomType","Get","Has","HasID","ID","In","IndexOf","Interpolate","LE","LT","Length","Let","Literal","Match","Mod","Mul","NE","NONE","NOT","Pow","Properties","Rgb","Rgba","Slice","Step","String","Sub","ToRgba","TypeOf","Var","Zoom","createExpression"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../Color.js\";import{toLCH as e,toRGB as r,toLAB as s}from\"../../../../../core/colorUtils.js\";import{unitBezier as n}from\"../../../unitBezier.js\";import{interpolate as a}from\"../GeometryUtils.js\";import{ValueType as o,StringType as i,ObjectType as l,NumberType as u,BooleanType as c,ColorType as h,typeToString as p,arrayType as g,getType as f,matchType as w,valueToString as m}from\"./types.js\";class y{constructor(t){this.parent=t,this.vars={}}add(t,e){this.vars[t]=e}get(t){return this.vars[t]?this.vars[t]:this.parent?this.parent.get(t):null}}class v{constructor(){this.type=o}static parse(t){if(t.length>1)throw new Error('\"id\" does not expect arguments');return new v}evaluate(t,e){return null==t?void 0:t.id}}class b{constructor(){this.type=i}static parse(t){if(t.length>1)throw new Error('\"geometry-type\" does not expect arguments');return new b}evaluate(t,e){if(!t)return null;switch(t.type){case 1:return\"Point\";case 2:return\"LineString\";case 3:return\"Polygon\";default:return null}}}class d{constructor(){this.type=l}static parse(t){if(t.length>1)throw new Error('\"properties\" does not expect arguments');return new d}evaluate(t,e){return null==t?void 0:t.values}}class x{constructor(){this.type=u}static parse(t){if(t.length>1)throw new Error('\"zoom\" does not expect arguments');return new x}evaluate(t,e){return e}}class E{constructor(t,e,r){this.lhs=t,this.rhs=e,this.compare=r,this.type=c}static parse(t,e,r){if(3!==t.length&&4!==t.length)throw new Error(`\"${t[0]}\" expects 2 or 3 arguments`);if(4===t.length)throw new Error(`\"${t[0]}\" collator not supported`);return new E(ht(t[1],e),ht(t[2],e),r)}evaluate(t,e){return this.compare(this.lhs.evaluate(t,e),this.rhs.evaluate(t,e))}}class $ extends E{static parse(t,e){return E.parse(t,e,((t,e)=>t===e))}}class M extends E{static parse(t,e){return E.parse(t,e,((t,e)=>t!==e))}}class k extends E{static parse(t,e){return E.parse(t,e,((t,e)=>t<e))}}class A extends E{static parse(t,e){return E.parse(t,e,((t,e)=>t<=e))}}class j extends E{static parse(t,e){return E.parse(t,e,((t,e)=>t>e))}}class q extends E{static parse(t,e){return E.parse(t,e,((t,e)=>t>=e))}}class N{constructor(t){this.arg=t,this.type=c}static parse(t,e){if(2!==t.length)throw new Error('\"!\" expects 1 argument');return new N(ht(t[1],e))}evaluate(t,e){return!this.arg.evaluate(t,e)}}class _{constructor(t){this.args=t,this.type=c}static parse(t,e){const r=[];for(let s=1;s<t.length;s++)r.push(ht(t[s],e));return new _(r)}evaluate(t,e){for(const r of this.args)if(!r.evaluate(t,e))return!1;return!0}}class R{constructor(t){this.args=t,this.type=c}static parse(t,e){const r=[];for(let s=1;s<t.length;s++)r.push(ht(t[s],e));return new R(r)}evaluate(t,e){for(const r of this.args)if(r.evaluate(t,e))return!0;return!1}}class C{constructor(t){this.args=t,this.type=c}static parse(t,e){const r=[];for(let s=1;s<t.length;s++)r.push(ht(t[s],e));return new C(r)}evaluate(t,e){for(const r of this.args)if(r.evaluate(t,e))return!1;return!0}}class z{constructor(t,e,r){this.type=t,this.args=e,this.fallback=r}static parse(t,e,r){if(t.length<4)throw new Error('\"case\" expects at least 3 arguments');if(t.length%2==1)throw new Error('\"case\" expects an odd number of arguments');let s;const n=[];for(let o=1;o<t.length-1;o+=2){const a=ht(t[o],e),i=ht(t[o+1],e,r);s||(s=i.type),n.push({condition:a,output:i})}const a=ht(t[t.length-1],e,r);return s||(s=a.type),new z(s,n,a)}evaluate(t,e){for(const r of this.args)if(r.condition.evaluate(t,e))return r.output.evaluate(t,e);return this.fallback.evaluate(t,e)}}class I{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)throw new Error('\"coalesce\" expects at least 1 argument');let r;const s=[];for(let n=1;n<t.length;n++){const a=ht(t[n],e);r||(r=a.type),s.push(a)}return new I(r,s)}evaluate(t,e){for(const r of this.args){const s=r.evaluate(t,e);if(null!==s)return s}return null}}class L{constructor(t,e,r,s,n){this.type=t,this.input=e,this.labels=r,this.outputs=s,this.fallback=n}static parse(t,e){if(t.length<3)throw new Error('\"match\" expects at least 3 arguments');if(t.length%2==0)throw new Error('\"case\" expects an even number of arguments');let r;const s=ht(t[1],e),n=[],a={};let o;for(let i=2;i<t.length-1;i+=2){let s=t[i];Array.isArray(s)||(s=[s]);for(const t of s){const e=typeof t;if(\"string\"!==e&&\"number\"!==e)throw new Error('\"match\" requires string or number literal as labels');if(o){if(e!==o)throw new Error('\"match\" requires labels to have the same type')}else o=e;a[t]=n.length}const l=ht(t[i+1],e);r||(r=l.type),n.push(l)}return new L(r,s,a,n,ht(t[t.length-1],e))}evaluate(t,e){const r=this.input.evaluate(t,e);return(this.outputs[this.labels[r]]||this.fallback).evaluate(t,e)}}class U{constructor(t,e,r,s,n){this.operator=t,this.type=e,this.interpolation=r,this.input=s,this.stops=n}static parse(t,e,r){const s=t[0];if(t.length<5)throw new Error(`\"${s}\" expects at least 4 arguments`);const n=t[1];if(!Array.isArray(n)||0===n.length)throw new Error(`\"${n}\" is not a valid interpolation`);switch(n[0]){case\"linear\":if(1!==n.length)throw new Error(\"Linear interpolation cannot have parameters\");break;case\"exponential\":if(2!==n.length||\"number\"!=typeof n[1])throw new Error(\"Exponential interpolation requires one numeric argument\");break;case\"cubic-bezier\":if(5!==n.length)throw new Error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1\");for(let t=1;t<5;t++){const e=n[t];if(\"number\"!=typeof e||e<0||e>1)throw new Error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1\")}break;default:throw new Error(`\"${t[0]}\" unknown interpolation type \"${n[0]}\"`)}if(t.length%2!=1)throw new Error(`\"${s}\" expects an even number of arguments`);const a=ht(t[2],e,u);let o;\"interpolate-hcl\"===s||\"interpolate-lab\"===s?o=h:r&&\"value\"!==r.kind&&(o=r);const i=[];for(let l=3;l<t.length;l+=2){const r=t[l];if(\"number\"!=typeof r)throw new Error(`\"${s}\" requires stop inputs as literal numbers`);if(i.length&&i[i.length-1][0]>=r)throw new Error(`\"${s}\" requires strictly ascending stop inputs`);const n=ht(t[l+1],e,o);o||(o=n.type),i.push([r,n])}if(o&&o!==h&&o!==u&&(\"array\"!==o.kind||o.itemType!==u))throw new Error(`\"${s}\" cannot interpolate type ${p(o)}`);return new U(s,o,n,a,i)}evaluate(n,o){const i=this.stops;if(1===i.length)return i[0][1].evaluate(n,o);const l=this.input.evaluate(n,o);if(l<=i[0][0])return i[0][1].evaluate(n,o);if(l>=i[i.length-1][0])return i[i.length-1][1].evaluate(n,o);let u=0;for(;++u<i.length&&!(l<i[u][0]););const c=i[u-1][0],h=i[u][0],g=U.interpolationRatio(this.interpolation,l,c,h),f=i[u-1][1].evaluate(n,o),w=i[u][1].evaluate(n,o);if(\"interpolate\"===this.operator){if(\"array\"===this.type.kind&&Array.isArray(f)&&Array.isArray(w))return f.map(((t,e)=>a(t,w[e],g)));if(\"color\"===this.type.kind&&f instanceof t&&w instanceof t){const e=new t(f),r=new t(w);return new t([a(e.r,r.r,g),a(e.g,r.g,g),a(e.b,r.b,g),a(e.a,r.a,g)])}if(\"number\"===this.type.kind&&\"number\"==typeof f&&\"number\"==typeof w)return a(f,w,g);throw new Error(`\"${this.operator}\" cannot interpolate type ${p(this.type)}`)}if(\"interpolate-hcl\"===this.operator){const s=e(f),n=e(w),o=n.h-s.h,i=r({h:s.h+g*(o>180||o<-180?o-360*Math.round(o/360):o),c:a(s.c,n.c,g),l:a(s.l,n.l,g)});return new t({a:a(f.a,w.a,g),...i})}if(\"interpolate-lab\"===this.operator){const e=s(f),n=s(w),o=r({l:a(e.l,n.l,g),a:a(e.a,n.a,g),b:a(e.b,n.b,g)});return new t({a:a(f.a,w.a,g),...o})}throw new Error(`Unexpected operator \"${this.operator}\"`)}interpolationUniformValue(t,e){const r=this.stops;if(1===r.length)return 0;if(t>=r[r.length-1][0])return 0;let s=0;for(;++s<r.length&&!(t<r[s][0]););const n=r[s-1][0],a=r[s][0];return U.interpolationRatio(this.interpolation,e,n,a)}getInterpolationRange(t){const e=this.stops;if(1===e.length){const t=e[0][0];return[t,t]}const r=e[e.length-1][0];if(t>=r)return[r,r];let s=0;for(;++s<e.length&&!(t<e[s][0]););return[e[s-1][0],e[s][0]]}static interpolationRatio(t,e,r,s){let a=0;if(\"linear\"===t[0])a=U.exponentialInterpolationRatio(e,1,r,s);else if(\"exponential\"===t[0])a=U.exponentialInterpolationRatio(e,t[1],r,s);else if(\"cubic-bezier\"===t[0]){a=n(t[1],t[2],t[3],t[4])(U.exponentialInterpolationRatio(e,1,r,s),1e-5)}return a<0?a=0:a>1&&(a=1),a}static exponentialInterpolationRatio(t,e,r,s){const n=s-r;if(0===n)return 0;const a=t-r;return 1===e?a/n:(e**a-1)/(e**n-1)}}class B{constructor(t,e,r){this.type=t,this.input=e,this.stops=r}static parse(t,e){if(t.length<5)throw new Error('\"step\" expects at least 4 arguments');if(t.length%2!=1)throw new Error('\"step\" expects an even number of arguments');const r=ht(t[1],e,u);let s;const n=[];n.push([-1/0,ht(t[2],e)]);for(let a=3;a<t.length;a+=2){const r=t[a];if(\"number\"!=typeof r)throw new Error('\"step\" requires stop inputs as literal numbers');if(n.length&&n[n.length-1][0]>=r)throw new Error('\"step\" requires strictly ascending stop inputs');const o=ht(t[a+1],e);s||(s=o.type),n.push([r,o])}return new B(s,r,n)}evaluate(t,e){const r=this.stops;if(1===r.length)return r[0][1].evaluate(t,e);const s=this.input.evaluate(t,e);let n=0;for(;++n<r.length&&!(s<r[n][0]););return this.stops[n-1][1].evaluate(t,e)}}class S{constructor(t,e){this.type=t,this.output=e}static parse(t,e,r){if(t.length<4)throw new Error('\"let\" expects at least 3 arguments');if(t.length%2==1)throw new Error('\"let\" expects an odd number of arguments');const s=new y(e);for(let a=1;a<t.length-1;a+=2){const r=t[a];if(\"string\"!=typeof r)throw new Error(`\"let\" requires a string to define variable names - found ${r}`);s.add(r,ht(t[a+1],e))}const n=ht(t[t.length-1],s,r);return new S(n.type,n)}evaluate(t,e){return this.output.evaluate(t,e)}}class O{constructor(t,e){this.type=t,this.output=e}static parse(t,e,r){if(2!==t.length||\"string\"!=typeof t[1])throw new Error('\"var\" requires just one literal string argument');const s=e.get(t[1]);if(!s)throw new Error(`${t[1]} must be defined before being used in a \"var\" expression`);return new O(r||o,s)}evaluate(t,e){return this.output.evaluate(t,e)}}class P{constructor(t,e,r){this.type=t,this.index=e,this.array=r}static parse(t,e){if(3!==t.length)throw new Error('\"at\" expects 2 arguments');const r=ht(t[1],e,u),s=ht(t[2],e);return new P(s.type.itemType,r,s)}evaluate(t,e){const r=this.index.evaluate(t,e),s=this.array.evaluate(t,e);if(r<0||r>=s.length)throw new Error('\"at\" index out of bounds');if(r!==Math.floor(r))throw new Error('\"at\" index must be an integer');return s[r]}}class T{constructor(t,e){this.key=t,this.obj=e,this.type=o}static parse(t,e){let r,s;switch(t.length){case 2:return r=ht(t[1],e),new T(r);case 3:return r=ht(t[1],e),s=ht(t[2],e),new T(r,s);default:throw new Error('\"get\" expects 1 or 2 arguments')}}evaluate(t,e){const r=this.key.evaluate(t,e);if(this.obj){return this.obj.evaluate(t,e)[r]}return null==t?void 0:t.values[r]}}class F{constructor(t,e){this.key=t,this.obj=e,this.type=c}static parse(t,e){let r,s;switch(t.length){case 2:return r=ht(t[1],e),new F(r);case 3:return r=ht(t[1],e),s=ht(t[2],e),new F(r,s);default:throw new Error('\"has\" expects 1 or 2 arguments')}}evaluate(t,e){const r=this.key.evaluate(t,e);if(this.obj){return r in this.obj.evaluate(t,e)}return!(null==t||!t.values[r])}}class G{constructor(t,e){this.key=t,this.vals=e,this.type=c}static parse(t,e){if(3!==t.length)throw new Error('\"in\" expects 2 arguments');return new G(ht(t[1],e),ht(t[2],e))}evaluate(t,e){const r=this.key.evaluate(t,e);return-1!==this.vals.evaluate(t,e).indexOf(r)}}class V{constructor(t,e,r){this.item=t,this.array=e,this.from=r,this.type=u}static parse(t,e){if(t.length<3||t.length>4)throw new Error('\"index-of\" expects 3 or 4 arguments');const r=ht(t[1],e),s=ht(t[2],e);if(4===t.length){const n=ht(t[3],e,u);return new V(r,s,n)}return new V(r,s)}evaluate(t,e){const r=this.item.evaluate(t,e),s=this.array.evaluate(t,e);if(this.from){const n=this.from.evaluate(t,e);if(n!==Math.floor(n))throw new Error('\"index-of\" index must be an integer');return s.indexOf(r,n)}return s.indexOf(r)}}class D{constructor(t){this.arg=t,this.type=u}static parse(t,e){if(2!==t.length)throw new Error('\"length\" expects 2 arguments');const r=ht(t[1],e);return new D(r)}evaluate(t,e){const r=this.arg.evaluate(t,e);if(\"string\"==typeof r)return r.length;if(Array.isArray(r))return r.length;throw new Error('\"length\" expects string or array')}}class H{constructor(t,e,r,s){this.type=t,this.array=e,this.from=r,this.to=s}static parse(t,e){if(t.length<3||t.length>4)throw new Error('\"slice\" expects 2 or 3 arguments');const r=ht(t[1],e),s=ht(t[2],e,u);if(s.type!==u)throw new Error('\"slice\" index must return a number');if(4===t.length){const n=ht(t[3],e,u);if(n.type!==u)throw new Error('\"slice\" index must return a number');return new H(r.type,r,s,n)}return new H(r.type,r,s)}evaluate(t,e){const r=this.array.evaluate(t,e);if(!Array.isArray(r)&&\"string\"!=typeof r)throw new Error('\"slice\" input must be an array or a string');const s=this.from.evaluate(t,e);if(s<0||s>=r.length)throw new Error('\"slice\" index out of bounds');if(s!==Math.floor(s))throw new Error('\"slice\" index must be an integer');if(this.to){const n=this.to.evaluate(t,e);if(n<0||n>=r.length)throw new Error('\"slice\" index out of bounds');if(n!==Math.floor(n))throw new Error('\"slice\" index must be an integer');return r.slice(s,n)}return r.slice(s)}}class J{constructor(){this.type=c}static parse(t){if(1!==t.length)throw new Error('\"has-id\" expects no arguments');return new J}evaluate(t,e){return t&&void 0!==t.id}}class K{constructor(t,e){this.args=t,this.calculate=e,this.type=u}static parse(t,e,r){const s=t.slice(1).map((t=>ht(t,e)));return new K(s,r)}evaluate(t,e){let r;return this.args&&(r=this.args.map((r=>r.evaluate(t,e)))),this.calculate(r)}}class Q extends K{static parse(t,e){switch(t.length){case 2:return K.parse(t,e,(t=>-t[0]));case 3:return K.parse(t,e,(t=>t[0]-t[1]));default:throw new Error('\"-\" expects 1 or 2 arguments')}}}class W extends K{static parse(t,e){return K.parse(t,e,(t=>{let e=1;for(const r of t)e*=r;return e}))}}class X extends K{static parse(t,e){if(3===t.length)return K.parse(t,e,(t=>t[0]/t[1]));throw new Error('\"/\" expects 2 arguments')}}class Y extends K{static parse(t,e){if(3===t.length)return K.parse(t,e,(t=>t[0]%t[1]));throw new Error('\"%\" expects 2 arguments')}}class Z extends K{static parse(t,e){if(3===t.length)return K.parse(t,e,(t=>t[0]**t[1]));throw new Error('\"^\" expects 1 or 2 arguments')}}class tt extends K{static parse(t,e){return K.parse(t,e,(t=>{let e=0;for(const r of t)e+=r;return e}))}}class et{constructor(t,e){this.args=t,this.calculate=e,this.type=u}static parse(t,e){const r=t.slice(1).map((t=>ht(t,e)));return new et(r,et.ops[t[0]])}evaluate(t,e){let r;return this.args&&(r=this.args.map((r=>r.evaluate(t,e)))),this.calculate(r)}}et.ops={abs:t=>Math.abs(t[0]),acos:t=>Math.acos(t[0]),asin:t=>Math.asin(t[0]),atan:t=>Math.atan(t[0]),ceil:t=>Math.ceil(t[0]),cos:t=>Math.cos(t[0]),e:()=>Math.E,floor:t=>Math.floor(t[0]),ln:t=>Math.log(t[0]),ln2:()=>Math.LN2,log10:t=>Math.log(t[0])/Math.LN10,log2:t=>Math.log(t[0])/Math.LN2,max:t=>Math.max(...t),min:t=>Math.min(...t),pi:()=>Math.PI,round:t=>Math.round(t[0]),sin:t=>Math.sin(t[0]),sqrt:t=>Math.sqrt(t[0]),tan:t=>Math.tan(t[0])};class rt{constructor(t){this.args=t,this.type=i}static parse(t,e){return new rt(t.slice(1).map((t=>ht(t,e))))}evaluate(t,e){return this.args.map((r=>r.evaluate(t,e))).join(\"\")}}class st{constructor(t,e){this.arg=t,this.calculate=e,this.type=i}static parse(t,e){if(2!==t.length)throw new Error(`${t[0]} expects 1 argument`);const r=ht(t[1],e);return new st(r,st.ops[t[0]])}evaluate(t,e){return this.calculate(this.arg.evaluate(t,e))}}st.ops={downcase:t=>t.toLowerCase(),upcase:t=>t.toUpperCase()};class nt{constructor(t){this.args=t,this.type=h}static parse(t,e){if(4!==t.length)throw new Error('\"rgb\" expects 3 arguments');const r=t.slice(1).map((t=>ht(t,e)));return new nt(r)}evaluate(e,r){const s=this._validate(this.args[0].evaluate(e,r)),n=this._validate(this.args[1].evaluate(e,r)),a=this._validate(this.args[2].evaluate(e,r));return new t({r:s,g:n,b:a})}_validate(t){if(\"number\"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class at{constructor(t){this.args=t,this.type=h}static parse(t,e){if(5!==t.length)throw new Error('\"rgba\" expects 4 arguments');const r=t.slice(1).map((t=>ht(t,e)));return new at(r)}evaluate(e,r){const s=this._validate(this.args[0].evaluate(e,r)),n=this._validate(this.args[1].evaluate(e,r)),a=this._validate(this.args[2].evaluate(e,r)),o=this._validateAlpha(this.args[3].evaluate(e,r));return new t({r:s,g:n,b:a,a:o})}_validate(t){if(\"number\"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if(\"number\"!=typeof t||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class ot{constructor(t){this.color=t,this.type=g(u,4)}static parse(t,e){if(2!==t.length)throw new Error('\"to-rgba\" expects 1 argument');const r=ht(t[1],e);return new ot(r)}evaluate(e,r){return new t(this.color.evaluate(e,r)).toRgba()}}class it{constructor(t,e){this.type=t,this.args=e}static parse(t,e){const r=t[0];if(t.length<2)throw new Error(`${r} expects at least one argument`);let s,n=1;if(\"array\"===r){if(t.length>2){switch(t[1]){case\"string\":s=i;break;case\"number\":s=u;break;case\"boolean\":s=c;break;default:throw new Error('\"array\" type argument must be string, number or boolean')}n++}else s=o;let e;if(t.length>3){if(e=t[2],null!==e&&(\"number\"!=typeof e||e<0||e!==Math.floor(e)))throw new Error('\"array\" length argument must be a positive integer literal');n++}s=g(s,e)}else switch(r){case\"string\":s=i;break;case\"number\":s=u;break;case\"boolean\":s=c;break;case\"object\":s=l}const a=[];for(;n<t.length;n++){const r=ht(t[n],e);a.push(r)}return new it(s,a)}evaluate(t,e){let r;for(const s of this.args){const n=s.evaluate(t,e);if(r=f(n),w(r,this.type))return n}throw new Error(`Expected ${p(this.type)} but got ${p(r)}`)}}class lt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){const r=t[0],s=lt.types[r];if(s===c||s===i){if(2!==t.length)throw new Error(`${r} expects one argument`)}else if(t.length<2)throw new Error(`${r} expects at least one argument`);const n=[];for(let a=1;a<t.length;a++){const r=ht(t[a],e);n.push(r)}return new lt(s,n)}evaluate(e,r){if(this.type===c)return Boolean(this.args[0].evaluate(e,r));if(this.type===i)return m(this.args[0].evaluate(e,r));if(this.type===u){for(const t of this.args){const s=Number(t.evaluate(e,r));if(!isNaN(s))return s}return null}if(this.type===h){for(const s of this.args)try{const n=lt.toColor(s.evaluate(e,r));if(n instanceof t)return n}catch{}return null}}static toBoolean(t){return Boolean(t)}static toString(t){return m(t)}static toNumber(t){const e=Number(t);if(isNaN(e))throw new Error(`\"${t}\" is not a number`);return e}static toColor(e){if(e instanceof t)return e;if(\"string\"==typeof e){const r=t.fromString(e);if(r)return r;throw new Error(`\"${e}\" is not a color`)}if(Array.isArray(e))return t.fromArray(e);throw new Error(`\"${e}\" is not a color`)}}lt.types={\"to-boolean\":c,\"to-color\":h,\"to-number\":u,\"to-string\":i};class ut{constructor(t){this.val=t,this.type=f(t)}static parse(t){if(2!==t.length)throw new Error('\"literal\" expects 1 argument');return new ut(t[1])}evaluate(t,e){return this.val}}class ct{constructor(t){this.arg=t,this.type=i}static parse(t,e){if(2!==t.length)throw new Error('\"typeof\" expects 1 argument');return new ct(ht(t[1],e))}evaluate(t,e){return p(f(this.arg.evaluate(t,e)))}}function ht(t,e,r){const s=typeof t;if(\"string\"===s||\"boolean\"===s||\"number\"===s||null===t){if(r)switch(r.kind){case\"string\":\"string\"!==s&&(t=lt.toString(t));break;case\"number\":\"number\"!==s&&(t=lt.toNumber(t));break;case\"color\":t=lt.toColor(t)}t=[\"literal\",t]}if(!Array.isArray(t)||0===t.length)throw new Error(\"Expression must be a non empty array\");const n=t[0];if(\"string\"!=typeof n)throw new Error(\"First element of expression must be a string\");const a=pt[n];if(void 0===a)throw new Error(`Invalid expression operator \"${n}\"`);if(!a)throw new Error(`Unimplemented expression operator \"${n}\"`);return a.parse(t,e,r)}const pt={array:it,boolean:it,collator:null,format:null,image:null,literal:ut,number:it,\"number-format\":null,object:it,string:it,\"to-boolean\":lt,\"to-color\":lt,\"to-number\":lt,\"to-string\":lt,typeof:ct,accumulated:null,\"feature-state\":null,\"geometry-type\":b,id:v,\"line-progress\":null,properties:d,at:P,get:T,has:F,in:G,\"index-of\":V,length:D,slice:H,\"!\":N,\"!=\":M,\"<\":k,\"<=\":A,\"==\":$,\">\":j,\">=\":q,all:_,any:R,case:z,coalesce:I,match:L,within:null,interpolate:U,\"interpolate-hcl\":U,\"interpolate-lab\":U,step:B,let:S,var:O,concat:rt,downcase:st,\"is-supported-script\":null,\"resolved-locale\":null,upcase:st,rgb:nt,rgba:at,\"to-rgba\":ot,\"-\":Q,\"*\":W,\"/\":X,\"%\":Y,\"^\":Z,\"+\":tt,abs:et,acos:et,asin:et,atan:et,ceil:et,cos:et,e:et,floor:et,ln:et,ln2:et,log10:et,log2:et,max:et,min:et,pi:et,round:et,sin:et,sqrt:et,tan:et,zoom:x,\"heatmap-density\":null,\"has-id\":J,none:C};export{_ as ALL,R as ANY,tt as Add,it as Assert,P as At,et as Calculate,z as Case,I as Coalesce,lt as Coerce,rt as Concat,X as Div,$ as EQ,q as GE,j as GT,b as GeomType,T as Get,F as Has,J as HasID,v as ID,G as In,V as IndexOf,U as Interpolate,A as LE,k as LT,D as Length,S as Let,ut as Literal,L as Match,Y as Mod,W as Mul,M as NE,C as NONE,N as NOT,Z as Pow,d as Properties,nt as Rgb,at as Rgba,H as Slice,B as Step,st as String,Q as Sub,ot as ToRgba,ct as TypeOf,O as Var,x as Zoom,ht as createExpression,pt as ops};\n"]},"metadata":{},"sourceType":"module"}