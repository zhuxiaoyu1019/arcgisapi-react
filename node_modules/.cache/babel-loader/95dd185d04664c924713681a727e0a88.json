{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Evented.js\";\nimport { nextHighestPowerOfTwo as t } from \"../../../../core/mathUtils.js\";\nimport { isSome as r } from \"../../../../core/maybe.js\";\nimport { ContentObject as i } from \"./ContentObject.js\";\nimport { TextRenderer as s, getTextHelperCanvas as h } from \"./TextRenderer.js\";\nimport n from \"../../../webgl/Texture.js\";\nimport d from \"../../../webgl/capabilities/isWebGL2Context.js\";\n\nclass o extends i {\n  constructor(t, r, i) {\n    super(), this.type = 4, this._glTexture = null, this.events = new e(), this._requiresPowerOfTwo = !d(t.gl), this._renderer = new s(r, i);\n  }\n\n  get width() {\n    return this._renderer.renderedWidth;\n  }\n\n  get height() {\n    return this._renderer.renderedHeight;\n  }\n\n  get textureWidth() {\n    const e = this.width;\n    return this._requiresPowerOfTwo ? t(e) : e;\n  }\n\n  get textureHeight() {\n    const e = this.height;\n    return this._requiresPowerOfTwo ? t(e) : e;\n  }\n\n  get displayWidth() {\n    return this._renderer.displayWidth;\n  }\n\n  get displayHeight() {\n    return this._renderer.displayHeight;\n  }\n\n  get texcoordScale() {\n    return [this._renderer.renderedWidth / this.textureWidth, this._renderer.renderedHeight / this.textureHeight];\n  }\n\n  get requiresFrameUpdates() {\n    return !1;\n  }\n\n  createDescriptor(e) {\n    return {\n      target: 3553,\n      pixelFormat: 6408,\n      dataType: 5121,\n      wrapMode: 33071,\n      flipped: !0,\n      samplingMode: 9987,\n      hasMipmap: !0,\n      preMultiplyAlpha: !0,\n      maxAnisotropy: e.parameters.maxMaxAnisotropy\n    };\n  }\n\n  load(e) {\n    if (r(this._glTexture)) return this._glTexture;\n    const t = h(u, this.textureWidth, this.textureHeight),\n          i = t.getContext(\"2d\");\n    return i.save(), this._renderer.render(i, 0, this.textureHeight - this._renderer.renderedHeight), this._glTexture = new n(e, this.createDescriptor(e), t), i.restore(), this._glTexture;\n  }\n\n  unload() {\n    r(this._glTexture) && (this._glTexture.dispose(), this._glTexture = null), this.events.emit(\"unloaded\");\n  }\n\n}\n\nconst u = {\n  canvas: null\n};\nexport default o;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTexture.js"],"names":["e","nextHighestPowerOfTwo","t","isSome","r","ContentObject","i","TextRenderer","s","getTextHelperCanvas","h","n","d","o","constructor","type","_glTexture","events","_requiresPowerOfTwo","gl","_renderer","width","renderedWidth","height","renderedHeight","textureWidth","textureHeight","displayWidth","displayHeight","texcoordScale","requiresFrameUpdates","createDescriptor","target","pixelFormat","dataType","wrapMode","flipped","samplingMode","hasMipmap","preMultiplyAlpha","maxAnisotropy","parameters","maxMaxAnisotropy","load","u","getContext","save","render","restore","unload","dispose","emit","canvas"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Evented.js\";import{nextHighestPowerOfTwo as t}from\"../../../../core/mathUtils.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{ContentObject as i}from\"./ContentObject.js\";import{TextRenderer as s,getTextHelperCanvas as h}from\"./TextRenderer.js\";import n from\"../../../webgl/Texture.js\";import d from\"../../../webgl/capabilities/isWebGL2Context.js\";class o extends i{constructor(t,r,i){super(),this.type=4,this._glTexture=null,this.events=new e,this._requiresPowerOfTwo=!d(t.gl),this._renderer=new s(r,i)}get width(){return this._renderer.renderedWidth}get height(){return this._renderer.renderedHeight}get textureWidth(){const e=this.width;return this._requiresPowerOfTwo?t(e):e}get textureHeight(){const e=this.height;return this._requiresPowerOfTwo?t(e):e}get displayWidth(){return this._renderer.displayWidth}get displayHeight(){return this._renderer.displayHeight}get texcoordScale(){return[this._renderer.renderedWidth/this.textureWidth,this._renderer.renderedHeight/this.textureHeight]}get requiresFrameUpdates(){return!1}createDescriptor(e){return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,flipped:!0,samplingMode:9987,hasMipmap:!0,preMultiplyAlpha:!0,maxAnisotropy:e.parameters.maxMaxAnisotropy}}load(e){if(r(this._glTexture))return this._glTexture;const t=h(u,this.textureWidth,this.textureHeight),i=t.getContext(\"2d\");return i.save(),this._renderer.render(i,0,this.textureHeight-this._renderer.renderedHeight),this._glTexture=new n(e,this.createDescriptor(e),t),i.restore(),this._glTexture}unload(){r(this._glTexture)&&(this._glTexture.dispose(),this._glTexture=null),this.events.emit(\"unloaded\")}}const u={canvas:null};export default o;\n"]},"metadata":{},"sourceType":"module"}