{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { requestImage as e } from \"../../../../support/requestImageUtils.js\";\nimport { createScreenSizeTriangleVAO as t } from \"./glUtil3D.js\";\nimport { SMAATechniqueConfiguration as r, SMAATechnique as i } from \"./SMAATechnique.js\";\nimport s from \"../../../webgl/FramebufferObject.js\";\nimport h from \"../../../webgl/Texture.js\";\n\nclass o {\n  constructor(e, t) {\n    this.rctx = e, this._techniqueRep = t, this.resourceLoadingPromise = null, this.isEnabled = !1;\n  }\n\n  loadResources(e) {\n    if (!this.data || !this.textureArea || !this.textureSearch) {\n      const t = this.resourceLoadingPromise || this.loadDataModule().then(() => this.loadTextures());\n      return e && t.then(e), this.resourceLoadingPromise || (this.resourceLoadingPromise = t, t.then(() => this.resourceLoadingPromise = null)), !1;\n    }\n\n    return !0;\n  }\n\n  loadDataModule() {\n    return this.data ? Promise.resolve() : import(\"./SmaaRenderPassData.js\").then(e => {\n      this.data = e;\n    });\n  }\n\n  loadTextures() {\n    return Promise.all([this.loadTextureFromBase64(this.data.areaTexture, 9729, 6407), this.loadTextureFromBase64(this.data.searchTexure, 9728, 6409)]).then(([e, t]) => {\n      this.textureArea = e, this.textureSearch = t;\n    });\n  }\n\n  get isLoadingResources() {\n    return null != this.resourceLoadingPromise;\n  }\n\n  enable() {\n    if (this.isEnabled) return !0;\n\n    if (!this._edgeDetectTechnique || !this._blendWeights || !this._blur) {\n      const e = new r(),\n            t = (e, t) => this._techniqueRep.releaseAndAcquire(i, e, t);\n\n      e.output = 0, this._edgeDetectTechnique = t(e, this._edgeDetectTechnique), e.output = 1, this._blendWeights = t(e, this._blendWeights), e.output = 2, this._blur = t(e, this._blur);\n    }\n\n    return !!this.loadResources() && (this.vao = t(this.rctx), this.edges = new s(this.rctx, {\n      colorTarget: 0,\n      depthStencilTarget: 0\n    }, {\n      target: 3553,\n      pixelFormat: 6407,\n      dataType: 5121,\n      samplingMode: 9729,\n      wrapMode: 33071,\n      width: 4,\n      height: 4\n    }), this.blend = new s(this.rctx, {\n      colorTarget: 0,\n      depthStencilTarget: 0\n    }, {\n      target: 3553,\n      pixelFormat: 6408,\n      dataType: 5121,\n      samplingMode: 9729,\n      wrapMode: 33071,\n      width: 4,\n      height: 4\n    }), this.isEnabled = !0, !0);\n  }\n\n  disable() {\n    this.isEnabled && (this.vao.dispose(), this.vao = null, this.textureArea.dispose(), this.textureArea = null, this.textureSearch.dispose(), this.textureSearch = null, this.blend.dispose(), this.blend = null, this.edges.dispose(), this.edges = null, this.isEnabled = !1);\n  }\n\n  render(e) {\n    this.enable();\n    const t = this.rctx,\n          r = t.getBoundFramebufferObject(),\n          i = {\n      x: 0,\n      y: 0,\n      width: e.colorTexture.descriptor.width,\n      height: e.colorTexture.descriptor.height\n    };\n    t.bindVAO(this.vao), t.setPipelineState(this._edgeDetectTechnique.pipeline), t.setViewport(i.x, i.y, i.width, i.height), this.edges.resize(i.width, i.height), t.bindFramebuffer(this.edges), t.setClearColor(0, 0, 0, 1), t.clear(16384), t.useProgram(this._edgeDetectTechnique.program), this._edgeDetectTechnique.program.bindTexture(e.colorTexture, \"tColor\"), this._edgeDetectTechnique.program.setUniform4f(\"uResolution\", 1 / i.width, 1 / i.height, i.width, i.height), t.drawArrays(4, 0, 3), this.blend.resize(i.width, i.height), t.bindFramebuffer(this.blend), t.setClearColor(0, 0, 1, 1), t.clear(16384), t.useProgram(this._blendWeights.program), this._blendWeights.program.setUniform4f(\"uResolution\", 1 / i.width, 1 / i.height, i.width, i.height), this._blendWeights.program.bindTexture(this.textureSearch, \"tSearch\"), this._blendWeights.program.bindTexture(this.textureArea, \"tArea\"), this._blendWeights.program.bindTexture(this.edges.colorTexture, \"tEdges\"), t.drawArrays(4, 0, 3), t.bindFramebuffer(r), t.setClearColor(0, 1, 0, 1), t.clear(16384), t.useProgram(this._blur.program), this._blur.program.setUniform4f(\"uResolution\", 1 / i.width, 1 / i.height, i.width, i.height), this._blur.program.bindTexture(e.colorTexture, \"tColor\"), this._blur.program.bindTexture(this.blend.colorTexture, \"tBlendWeights\"), t.drawArrays(4, 0, 3);\n  }\n\n  loadTextureFromBase64(t, r, i) {\n    const s = new h(this.rctx, {\n      pixelFormat: i,\n      dataType: 5121,\n      wrapMode: 33071,\n      samplingMode: r\n    }, null);\n    return e(t).then(e => (s.resize(e.width, e.height), s.setData(e), s));\n  }\n\n}\n\nexport { o as SmaaRenderPass };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/SmaaRenderPass.js"],"names":["requestImage","e","createScreenSizeTriangleVAO","t","SMAATechniqueConfiguration","r","SMAATechnique","i","s","h","o","constructor","rctx","_techniqueRep","resourceLoadingPromise","isEnabled","loadResources","data","textureArea","textureSearch","loadDataModule","then","loadTextures","Promise","resolve","all","loadTextureFromBase64","areaTexture","searchTexure","isLoadingResources","enable","_edgeDetectTechnique","_blendWeights","_blur","releaseAndAcquire","output","vao","edges","colorTarget","depthStencilTarget","target","pixelFormat","dataType","samplingMode","wrapMode","width","height","blend","disable","dispose","render","getBoundFramebufferObject","x","y","colorTexture","descriptor","bindVAO","setPipelineState","pipeline","setViewport","resize","bindFramebuffer","setClearColor","clear","useProgram","program","bindTexture","setUniform4f","drawArrays","setData","SmaaRenderPass"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{requestImage as e}from\"../../../../support/requestImageUtils.js\";import{createScreenSizeTriangleVAO as t}from\"./glUtil3D.js\";import{SMAATechniqueConfiguration as r,SMAATechnique as i}from\"./SMAATechnique.js\";import s from\"../../../webgl/FramebufferObject.js\";import h from\"../../../webgl/Texture.js\";class o{constructor(e,t){this.rctx=e,this._techniqueRep=t,this.resourceLoadingPromise=null,this.isEnabled=!1}loadResources(e){if(!this.data||!this.textureArea||!this.textureSearch){const t=this.resourceLoadingPromise||this.loadDataModule().then((()=>this.loadTextures()));return e&&t.then(e),this.resourceLoadingPromise||(this.resourceLoadingPromise=t,t.then((()=>this.resourceLoadingPromise=null))),!1}return!0}loadDataModule(){return this.data?Promise.resolve():import(\"./SmaaRenderPassData.js\").then((e=>{this.data=e}))}loadTextures(){return Promise.all([this.loadTextureFromBase64(this.data.areaTexture,9729,6407),this.loadTextureFromBase64(this.data.searchTexure,9728,6409)]).then((([e,t])=>{this.textureArea=e,this.textureSearch=t}))}get isLoadingResources(){return null!=this.resourceLoadingPromise}enable(){if(this.isEnabled)return!0;if(!this._edgeDetectTechnique||!this._blendWeights||!this._blur){const e=new r,t=(e,t)=>this._techniqueRep.releaseAndAcquire(i,e,t);e.output=0,this._edgeDetectTechnique=t(e,this._edgeDetectTechnique),e.output=1,this._blendWeights=t(e,this._blendWeights),e.output=2,this._blur=t(e,this._blur)}return!!this.loadResources()&&(this.vao=t(this.rctx),this.edges=new s(this.rctx,{colorTarget:0,depthStencilTarget:0},{target:3553,pixelFormat:6407,dataType:5121,samplingMode:9729,wrapMode:33071,width:4,height:4}),this.blend=new s(this.rctx,{colorTarget:0,depthStencilTarget:0},{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9729,wrapMode:33071,width:4,height:4}),this.isEnabled=!0,!0)}disable(){this.isEnabled&&(this.vao.dispose(),this.vao=null,this.textureArea.dispose(),this.textureArea=null,this.textureSearch.dispose(),this.textureSearch=null,this.blend.dispose(),this.blend=null,this.edges.dispose(),this.edges=null,this.isEnabled=!1)}render(e){this.enable();const t=this.rctx,r=t.getBoundFramebufferObject(),i={x:0,y:0,width:e.colorTexture.descriptor.width,height:e.colorTexture.descriptor.height};t.bindVAO(this.vao),t.setPipelineState(this._edgeDetectTechnique.pipeline),t.setViewport(i.x,i.y,i.width,i.height),this.edges.resize(i.width,i.height),t.bindFramebuffer(this.edges),t.setClearColor(0,0,0,1),t.clear(16384),t.useProgram(this._edgeDetectTechnique.program),this._edgeDetectTechnique.program.bindTexture(e.colorTexture,\"tColor\"),this._edgeDetectTechnique.program.setUniform4f(\"uResolution\",1/i.width,1/i.height,i.width,i.height),t.drawArrays(4,0,3),this.blend.resize(i.width,i.height),t.bindFramebuffer(this.blend),t.setClearColor(0,0,1,1),t.clear(16384),t.useProgram(this._blendWeights.program),this._blendWeights.program.setUniform4f(\"uResolution\",1/i.width,1/i.height,i.width,i.height),this._blendWeights.program.bindTexture(this.textureSearch,\"tSearch\"),this._blendWeights.program.bindTexture(this.textureArea,\"tArea\"),this._blendWeights.program.bindTexture(this.edges.colorTexture,\"tEdges\"),t.drawArrays(4,0,3),t.bindFramebuffer(r),t.setClearColor(0,1,0,1),t.clear(16384),t.useProgram(this._blur.program),this._blur.program.setUniform4f(\"uResolution\",1/i.width,1/i.height,i.width,i.height),this._blur.program.bindTexture(e.colorTexture,\"tColor\"),this._blur.program.bindTexture(this.blend.colorTexture,\"tBlendWeights\"),t.drawArrays(4,0,3)}loadTextureFromBase64(t,r,i){const s=new h(this.rctx,{pixelFormat:i,dataType:5121,wrapMode:33071,samplingMode:r},null);return e(t).then((e=>(s.resize(e.width,e.height),s.setData(e),s)))}}export{o as SmaaRenderPass};\n"]},"metadata":{},"sourceType":"module"}