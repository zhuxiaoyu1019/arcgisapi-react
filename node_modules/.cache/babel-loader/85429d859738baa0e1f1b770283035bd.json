{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport r from \"../../../core/Logger.js\";\nimport { isNone as e } from \"../../../core/maybe.js\";\nimport { a as o, i as t, f as n, t as f } from \"../../../chunks/mat3.js\";\nimport { c as a } from \"../../../chunks/mat3f64.js\";\nimport { c as m } from \"../../../chunks/mat4f64.js\";\nimport { t as c, n as s } from \"../../../chunks/vec3.js\";\nimport { c as i } from \"../../../chunks/vec3f64.js\";\nimport { projectBuffer as y, computeLinearTransformation as p } from \"../../projection.js\";\nimport { getSphericalPCPF as u } from \"../../projectionEllipsoid.js\";\nimport { isCGCS2000 as T, isMars as l, isMoon as A } from \"../spatialReferenceUtils.js\";\nimport { y2lat as d } from \"../webMercatorUtils.js\";\nimport { BufferViewVec3f as E, BufferViewVec3f64 as g } from \"../buffer/BufferView.js\";\nimport { t as j, a as h, n as P } from \"../../../chunks/vec32.js\";\nconst C = r.getLogger(\"esri.geometry.support.meshUtils.normalProjection\");\n\nfunction F(r, e, o, t, n) {\n  return b(t) ? (S(0, E.fromTypedArray(r), g.fromTypedArray(e), g.fromTypedArray(o), t, E.fromTypedArray(n)), n) : (C.error(\"Cannot convert spatial reference to PCPF\"), n);\n}\n\nfunction _(r, e, o, t, n) {\n  return b(t) ? (S(1, E.fromTypedArray(r), g.fromTypedArray(e), g.fromTypedArray(o), t, E.fromTypedArray(n)), n) : (C.error(\"Cannot convert to spatial reference from PCPF\"), n);\n}\n\nfunction v(r, e, o) {\n  return y(r, e, 0, o, u(e), 0, r.length / 3), o;\n}\n\nfunction M(r, e, o) {\n  return y(r, u(o), 0, e, o, 0, r.length / 3), e;\n}\n\nfunction V(r, o, t) {\n  if (e(r)) return o;\n  const n = g.fromTypedArray(r),\n        f = g.fromTypedArray(o);\n  return j(f, n, t), o;\n}\n\nfunction k(r, n, f) {\n  if (e(r)) return n;\n  o(x, f);\n  const a = E.fromTypedArray(r),\n        m = E.fromTypedArray(n);\n  return h(m, a, x), t(x) || P(m, m), n;\n}\n\nfunction L(r, n, f) {\n  if (e(r)) return n;\n  o(x, f);\n  const a = E.fromTypedArray(r, 4 * Float32Array.BYTES_PER_ELEMENT),\n        m = E.fromTypedArray(n, 4 * Float32Array.BYTES_PER_ELEMENT);\n  if (h(m, a, x), t(x) || P(m, m), r !== n) for (let e = 3; e < r.length; e += 4) n[e] = r[e];\n  return n;\n}\n\nfunction B(r, e, o, t, n) {\n  if (!b(t)) return C.error(\"Cannot convert spatial reference to PCPF\"), n;\n  S(0, E.fromTypedArray(r, 4 * Float32Array.BYTES_PER_ELEMENT), g.fromTypedArray(e), g.fromTypedArray(o), t, E.fromTypedArray(n, 4 * Float32Array.BYTES_PER_ELEMENT));\n\n  for (let f = 3; f < r.length; f += 4) n[f] = r[f];\n\n  return n;\n}\n\nfunction R(r, e, o, t, n) {\n  if (!b(t)) return C.error(\"Cannot convert to spatial reference from PCPF\"), n;\n  S(1, E.fromTypedArray(r, 16), g.fromTypedArray(e), g.fromTypedArray(o), t, E.fromTypedArray(n, 16));\n\n  for (let f = 3; f < r.length; f += 4) n[f] = r[f];\n\n  return n;\n}\n\nfunction S(r, e, o, t, a, m) {\n  if (!e) return;\n  const i = o.count,\n        y = u(a);\n  if (N(a)) for (let s = 0; s < i; s++) t.getVec(s, U), e.getVec(s, w), p(y, U, W, y), n(x, W), 1 === r && f(x, x), c(w, w, x), m.setVec(s, w);else for (let u = 0; u < i; u++) {\n    t.getVec(u, U), e.getVec(u, w), p(y, U, W, y), n(x, W);\n    const a = d(o.get(u, 1));\n    let i = Math.cos(a);\n    0 === r && (i = 1 / i), x[0] *= i, x[1] *= i, x[2] *= i, x[3] *= i, x[4] *= i, x[5] *= i, 1 === r && f(x, x), c(w, w, x), s(w, w), m.setVec(u, w);\n  }\n  return m;\n}\n\nfunction b(r) {\n  return N(r) || Y(r);\n}\n\nfunction N(r) {\n  return r.isWGS84 || T(r) || l(r) || A(r);\n}\n\nfunction Y(r) {\n  return r.isWebMercator;\n}\n\nconst U = i(),\n      w = i(),\n      W = m(),\n      x = a();\nexport { M as projectFromPCPF, _ as projectNormalFromPCPF, F as projectNormalToPCPF, R as projectTangentFromPCPF, B as projectTangentToPCPF, v as projectToPCPF, k as transformNormal, V as transformPosition, L as transformTangent };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/support/meshUtils/projection.js"],"names":["r","isNone","e","a","o","i","t","f","n","c","m","s","projectBuffer","y","computeLinearTransformation","p","getSphericalPCPF","u","isCGCS2000","T","isMars","l","isMoon","A","y2lat","d","BufferViewVec3f","E","BufferViewVec3f64","g","j","h","P","C","getLogger","F","b","S","fromTypedArray","error","_","v","length","M","V","k","x","L","Float32Array","BYTES_PER_ELEMENT","B","R","count","N","getVec","U","w","W","setVec","get","Math","cos","Y","isWGS84","isWebMercator","projectFromPCPF","projectNormalFromPCPF","projectNormalToPCPF","projectTangentFromPCPF","projectTangentToPCPF","projectToPCPF","transformNormal","transformPosition","transformTangent"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport r from\"../../../core/Logger.js\";import{isNone as e}from\"../../../core/maybe.js\";import{a as o,i as t,f as n,t as f}from\"../../../chunks/mat3.js\";import{c as a}from\"../../../chunks/mat3f64.js\";import{c as m}from\"../../../chunks/mat4f64.js\";import{t as c,n as s}from\"../../../chunks/vec3.js\";import{c as i}from\"../../../chunks/vec3f64.js\";import{projectBuffer as y,computeLinearTransformation as p}from\"../../projection.js\";import{getSphericalPCPF as u}from\"../../projectionEllipsoid.js\";import{isCGCS2000 as T,isMars as l,isMoon as A}from\"../spatialReferenceUtils.js\";import{y2lat as d}from\"../webMercatorUtils.js\";import{BufferViewVec3f as E,BufferViewVec3f64 as g}from\"../buffer/BufferView.js\";import{t as j,a as h,n as P}from\"../../../chunks/vec32.js\";const C=r.getLogger(\"esri.geometry.support.meshUtils.normalProjection\");function F(r,e,o,t,n){return b(t)?(S(0,E.fromTypedArray(r),g.fromTypedArray(e),g.fromTypedArray(o),t,E.fromTypedArray(n)),n):(C.error(\"Cannot convert spatial reference to PCPF\"),n)}function _(r,e,o,t,n){return b(t)?(S(1,E.fromTypedArray(r),g.fromTypedArray(e),g.fromTypedArray(o),t,E.fromTypedArray(n)),n):(C.error(\"Cannot convert to spatial reference from PCPF\"),n)}function v(r,e,o){return y(r,e,0,o,u(e),0,r.length/3),o}function M(r,e,o){return y(r,u(o),0,e,o,0,r.length/3),e}function V(r,o,t){if(e(r))return o;const n=g.fromTypedArray(r),f=g.fromTypedArray(o);return j(f,n,t),o}function k(r,n,f){if(e(r))return n;o(x,f);const a=E.fromTypedArray(r),m=E.fromTypedArray(n);return h(m,a,x),t(x)||P(m,m),n}function L(r,n,f){if(e(r))return n;o(x,f);const a=E.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),m=E.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT);if(h(m,a,x),t(x)||P(m,m),r!==n)for(let e=3;e<r.length;e+=4)n[e]=r[e];return n}function B(r,e,o,t,n){if(!b(t))return C.error(\"Cannot convert spatial reference to PCPF\"),n;S(0,E.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),g.fromTypedArray(e),g.fromTypedArray(o),t,E.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function R(r,e,o,t,n){if(!b(t))return C.error(\"Cannot convert to spatial reference from PCPF\"),n;S(1,E.fromTypedArray(r,16),g.fromTypedArray(e),g.fromTypedArray(o),t,E.fromTypedArray(n,16));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function S(r,e,o,t,a,m){if(!e)return;const i=o.count,y=u(a);if(N(a))for(let s=0;s<i;s++)t.getVec(s,U),e.getVec(s,w),p(y,U,W,y),n(x,W),1===r&&f(x,x),c(w,w,x),m.setVec(s,w);else for(let u=0;u<i;u++){t.getVec(u,U),e.getVec(u,w),p(y,U,W,y),n(x,W);const a=d(o.get(u,1));let i=Math.cos(a);0===r&&(i=1/i),x[0]*=i,x[1]*=i,x[2]*=i,x[3]*=i,x[4]*=i,x[5]*=i,1===r&&f(x,x),c(w,w,x),s(w,w),m.setVec(u,w)}return m}function b(r){return N(r)||Y(r)}function N(r){return r.isWGS84||T(r)||l(r)||A(r)}function Y(r){return r.isWebMercator}const U=i(),w=i(),W=m(),x=a();export{M as projectFromPCPF,_ as projectNormalFromPCPF,F as projectNormalToPCPF,R as projectTangentFromPCPF,B as projectTangentToPCPF,v as projectToPCPF,k as transformNormal,V as transformPosition,L as transformTangent};\n"]},"metadata":{},"sourceType":"module"}