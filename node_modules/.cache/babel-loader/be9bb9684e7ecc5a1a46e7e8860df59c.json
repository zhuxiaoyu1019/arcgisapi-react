{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../../../webgl/BufferObject.js\";\nimport \"../../../../webgl/FramebufferObject.js\";\nimport { Program as e } from \"../../../../webgl/Program.js\";\nimport \"../../../../webgl/enums.js\";\nimport \"../../../../webgl/RenderingContext.js\";\nimport \"../../../../webgl/Texture.js\";\nimport \"../../../../webgl/VertexArrayObject.js\";\nimport { text as r, outline as t, line as a, icon as s, fill as n, circle as i, background as o } from \"./Programs.js\";\n\nclass c {\n  constructor() {\n    this._programByKey = new Map();\n  }\n\n  dispose() {\n    this._programByKey.forEach(e => e.dispose()), this._programByKey.clear();\n  }\n\n  getMaterialProgram(r, t, a) {\n    const s = t.key << 3 | this._getMaterialOptionsValue(t.type, a);\n\n    if (this._programByKey.has(s)) return this._programByKey.get(s);\n\n    const n = this._getProgramTemplate(t.type),\n          {\n      shaders: i\n    } = n,\n          {\n      vertexShader: o,\n      fragmentShader: c\n    } = i(a),\n          g = t.getShaderHeader(),\n          p = t.getShaderMain(),\n          u = o.replace(\"#pragma header\", g).replace(\"#pragma main\", p),\n          m = new e(r, u, c, t.getAttributeLocations());\n\n    return this._programByKey.set(s, m), m;\n  }\n\n  _getMaterialOptionsValue(e, r) {\n    switch (e) {\n      case 0:\n        {\n          const e = r;\n          return (e.pattern ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case 1:\n        {\n          const e = r;\n          return (e.pattern ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case 2:\n        return r.id ? 1 : 0;\n\n      case 3:\n        {\n          const e = r;\n          return (e.sdf ? 1 : 0) << 2 | (e.pattern ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case 4:\n        {\n          const e = r;\n          return (e.sdf ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case 5:\n        return r.id ? 1 : 0;\n\n      case 6:\n        return r.id ? 1 : 0;\n\n      default:\n        return 0;\n    }\n  }\n\n  _getProgramTemplate(e) {\n    switch (e) {\n      case 0:\n        return o;\n\n      case 5:\n        return i;\n\n      case 1:\n        return n;\n\n      case 4:\n        return s;\n\n      case 3:\n        return a;\n\n      case 2:\n        return t;\n\n      case 6:\n        return r;\n\n      default:\n        return null;\n    }\n  }\n\n}\n\nexport default c;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/VTLMaterialManager.js"],"names":["Program","e","text","r","outline","t","line","a","icon","s","fill","n","circle","i","background","o","c","constructor","_programByKey","Map","dispose","forEach","clear","getMaterialProgram","key","_getMaterialOptionsValue","type","has","get","_getProgramTemplate","shaders","vertexShader","fragmentShader","g","getShaderHeader","p","getShaderMain","u","replace","m","getAttributeLocations","set","pattern","id","sdf"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import{Program as e}from\"../../../../webgl/Program.js\";import\"../../../../webgl/enums.js\";import\"../../../../webgl/RenderingContext.js\";import\"../../../../webgl/Texture.js\";import\"../../../../webgl/VertexArrayObject.js\";import{text as r,outline as t,line as a,icon as s,fill as n,circle as i,background as o}from\"./Programs.js\";class c{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(r,t,a){const s=t.key<<3|this._getMaterialOptionsValue(t.type,a);if(this._programByKey.has(s))return this._programByKey.get(s);const n=this._getProgramTemplate(t.type),{shaders:i}=n,{vertexShader:o,fragmentShader:c}=i(a),g=t.getShaderHeader(),p=t.getShaderMain(),u=o.replace(\"#pragma header\",g).replace(\"#pragma main\",p),m=new e(r,u,c,t.getAttributeLocations());return this._programByKey.set(s,m),m}_getMaterialOptionsValue(e,r){switch(e){case 0:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 1:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 2:return r.id?1:0;case 3:{const e=r;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1|(e.id?1:0)}case 4:{const e=r;return(e.sdf?1:0)<<1|(e.id?1:0)}case 5:return r.id?1:0;case 6:return r.id?1:0;default:return 0}}_getProgramTemplate(e){switch(e){case 0:return o;case 5:return i;case 1:return n;case 4:return s;case 3:return a;case 2:return t;case 6:return r;default:return null}}}export default c;\n"]},"metadata":{},"sourceType":"module"}