{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { initializeProjection as s, projectMany as t } from \"../../../geometry/projection.js\";\nimport { jsonAdapter as n } from \"../../../geometry/geometryAdapters/json.js\";\nimport { isValid as e, equals as r, isWebMercator as i } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { lngLatToXY as o, xyToLngLat as a, canProject as m } from \"../../../geometry/support/webMercatorUtils.js\";\nconst u = [0, 0];\n\nfunction h(s, t) {\n  if (!t) return null;\n\n  if (\"x\" in t) {\n    const n = {\n      x: 0,\n      y: 0\n    };\n    return [n.x, n.y] = s(t.x, t.y, u), null != t.z && (n.z = t.z), null != t.m && (n.m = t.m), n;\n  }\n\n  if (\"xmin\" in t) {\n    const n = {\n      xmin: 0,\n      ymin: 0,\n      xmax: 0,\n      ymax: 0\n    };\n    return [n.xmin, n.ymin] = s(t.xmin, t.ymin, u), [n.xmax, n.ymax] = s(t.xmax, t.ymax, u), t.hasZ && (n.zmin = t.zmin, n.zmax = t.zmax, n.hasZ = !0), t.hasM && (n.mmin = t.mmin, n.mmax = t.mmax, n.hasM = !0), n;\n  }\n\n  return \"rings\" in t ? {\n    rings: c(t.rings, s),\n    hasM: t.hasM,\n    hasZ: t.hasZ\n  } : \"paths\" in t ? {\n    paths: c(t.paths, s),\n    hasM: t.hasM,\n    hasZ: t.hasZ\n  } : \"points\" in t ? {\n    points: l(t.points, s),\n    hasM: t.hasM,\n    hasZ: t.hasZ\n  } : void 0;\n}\n\nfunction c(s, t) {\n  const n = [];\n\n  for (const e of s) n.push(l(e, t));\n\n  return n;\n}\n\nfunction l(s, t) {\n  const n = [];\n\n  for (const e of s) {\n    const s = t(e[0], e[1], [0, 0]);\n    n.push(s), e.length > 2 && s.push(e[2]), e.length > 3 && s.push(e[3]);\n  }\n\n  return n;\n}\n\nasync function p(t, n) {\n  if (!n) return;\n  const e = Array.isArray(t) ? t.map(s => {\n    var t;\n    return null == (t = s.geometry) ? void 0 : t.spatialReference;\n  }) : [t];\n  await s(e.map(s => ({\n    source: s,\n    dest: n\n  })));\n}\n\nconst f = h.bind(null, o),\n      x = h.bind(null, a);\n\nfunction y(s, o, a) {\n  return s ? (a || (a = o, o = s.spatialReference), e(o) && e(a) && !r(o, a) ? m(o, a) ? i(a) ? f(s) : x(s) : t(n, [s], o, a, null)[0] : s) : s;\n}\n\nclass g {\n  constructor() {\n    this._jobs = [], this._timer = null, this._process = this._process.bind(this);\n  }\n\n  async push(s, t, n) {\n    if (!s || !s.length || !t || !n || r(t, n)) return s;\n    const e = {\n      geometries: s,\n      inSpatialReference: t,\n      outSpatialReference: n,\n      resolve: null\n    };\n    return this._jobs.push(e), new Promise(s => {\n      e.resolve = s, null === this._timer && (this._timer = setTimeout(this._process, 10));\n    });\n  }\n\n  _process() {\n    this._timer = null;\n\n    const s = this._jobs.shift();\n\n    if (!s) return;\n    const {\n      geometries: e,\n      inSpatialReference: r,\n      outSpatialReference: o,\n      resolve: a\n    } = s;\n    m(r, o) ? i(o) ? a(e.map(f)) : a(e.map(x)) : a(t(n, e, r, o, null)), this._jobs.length > 0 && (this._timer = setTimeout(this._process, 10));\n  }\n\n}\n\nconst _ = new g();\n\nfunction j(s, t, n) {\n  return _.push(s, t, n);\n}\n\nexport { p as checkProjectionSupport, y as project, j as projectMany };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js"],"names":["initializeProjection","s","projectMany","t","jsonAdapter","n","isValid","e","equals","r","isWebMercator","i","lngLatToXY","o","xyToLngLat","a","canProject","m","u","h","x","y","z","xmin","ymin","xmax","ymax","hasZ","zmin","zmax","hasM","mmin","mmax","rings","c","paths","points","l","push","length","p","Array","isArray","map","geometry","spatialReference","source","dest","f","bind","g","constructor","_jobs","_timer","_process","geometries","inSpatialReference","outSpatialReference","resolve","Promise","setTimeout","shift","_","j","checkProjectionSupport","project"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{initializeProjection as s,projectMany as t}from\"../../../geometry/projection.js\";import{jsonAdapter as n}from\"../../../geometry/geometryAdapters/json.js\";import{isValid as e,equals as r,isWebMercator as i}from\"../../../geometry/support/spatialReferenceUtils.js\";import{lngLatToXY as o,xyToLngLat as a,canProject as m}from\"../../../geometry/support/webMercatorUtils.js\";const u=[0,0];function h(s,t){if(!t)return null;if(\"x\"in t){const n={x:0,y:0};return[n.x,n.y]=s(t.x,t.y,u),null!=t.z&&(n.z=t.z),null!=t.m&&(n.m=t.m),n}if(\"xmin\"in t){const n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=s(t.xmin,t.ymin,u),[n.xmax,n.ymax]=s(t.xmax,t.ymax,u),t.hasZ&&(n.zmin=t.zmin,n.zmax=t.zmax,n.hasZ=!0),t.hasM&&(n.mmin=t.mmin,n.mmax=t.mmax,n.hasM=!0),n}return\"rings\"in t?{rings:c(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:\"paths\"in t?{paths:c(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:\"points\"in t?{points:l(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:void 0}function c(s,t){const n=[];for(const e of s)n.push(l(e,t));return n}function l(s,t){const n=[];for(const e of s){const s=t(e[0],e[1],[0,0]);n.push(s),e.length>2&&s.push(e[2]),e.length>3&&s.push(e[3])}return n}async function p(t,n){if(!n)return;const e=Array.isArray(t)?t.map((s=>{var t;return null==(t=s.geometry)?void 0:t.spatialReference})):[t];await s(e.map((s=>({source:s,dest:n}))))}const f=h.bind(null,o),x=h.bind(null,a);function y(s,o,a){return s?(a||(a=o,o=s.spatialReference),e(o)&&e(a)&&!r(o,a)?m(o,a)?i(a)?f(s):x(s):t(n,[s],o,a,null)[0]:s):s}class g{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,t,n){if(!s||!s.length||!t||!n||r(t,n))return s;const e={geometries:s,inSpatialReference:t,outSpatialReference:n,resolve:null};return this._jobs.push(e),new Promise((s=>{e.resolve=s,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:e,inSpatialReference:r,outSpatialReference:o,resolve:a}=s;m(r,o)?i(o)?a(e.map(f)):a(e.map(x)):a(t(n,e,r,o,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const _=new g;function j(s,t,n){return _.push(s,t,n)}export{p as checkProjectionSupport,y as project,j as projectMany};\n"]},"metadata":{},"sourceType":"module"}