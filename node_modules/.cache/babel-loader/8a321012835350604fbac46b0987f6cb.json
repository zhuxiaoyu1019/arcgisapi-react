{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { compileScript as e, extend as t, enableAsyncSupport as r } from \"../arcade/arcadeCompiler.js\";\nimport { extend as n, executeScript as s, referencesMember as i, referencesFunction as c } from \"../arcade/arcadeRuntime.js\";\nimport { M as u } from \"./languageUtils.js\";\nimport { parseScript as o, validateScript as a, scriptCheck as f, extractFieldLiterals as p } from \"../arcade/parser.js\";\nimport { findScriptDependencies as l, findFunctionCalls as m } from \"../arcade/treeAnalysis.js\";\nimport d from \"../core/has.js\";\nimport { all as y, create as S } from \"../core/promiseUtils.js\";\nimport { loadMoment as h } from \"../intl/moment.js\";\nconst b = [\"feature\", \"angle\", \"bearing\", \"centroid\", \"envelopeintersects\", \"extent\", \"geometry\", \"isselfintersecting\", \"ringisclockwise\"];\n\nfunction g() {\n  if (d(\"csp-restrictions\")) return !1;\n\n  try {\n    return new Function(\"function* test() {}; return true\")();\n  } catch (e) {\n    return !1;\n  }\n}\n\nconst j = g();\nlet A = !1,\n    x = !1,\n    F = null,\n    E = [];\n\nfunction v(t, r) {\n  if (!0 === r.useAsync || !0 === t.isAsync) return w(t, r);\n\n  if (d(\"csp-restrictions\")) {\n    return function (e) {\n      return s(t, e);\n    };\n  }\n\n  return e(t, r);\n}\n\nfunction w(t, r) {\n  if (null === F) throw new Error(\"Async Arcade must be enabled for this script\");\n\n  if (d(\"csp-restrictions\") || !1 === j) {\n    return function (e) {\n      return F.executeScript(t, e);\n    };\n  }\n\n  return e(t, r, !0);\n}\n\nfunction G(e) {\n  n(e), t(e, \"sync\"), null === F ? E.push(e) : (t(e, \"async\"), F.extend(e));\n}\n\nfunction U(e, t = []) {\n  return o(e, t);\n}\n\nfunction k(e, t, r = \"\") {\n  return a(e, t, r);\n}\n\nfunction M(e, t, r, n = \"\") {\n  return f(e, t, r, n);\n}\n\nfunction _(e, t, r = []) {\n  return C(o(e, r), t);\n}\n\nfunction C(e, t) {\n  if (!0 === t.useAsync || !0 === e.isAsync) {\n    if (null === F) throw new Error(\"Async Arcade must be enabled for this script\");\n    return F.executeScript(e, t);\n  }\n\n  return s(e, t);\n}\n\nfunction L(e, t) {\n  return i(e, t);\n}\n\nfunction O(e, t) {\n  return c(e, t);\n}\n\nfunction R(e, t = !1) {\n  return p(e);\n}\n\nfunction q(e, t = []) {\n  return void 0 === e.usesGeometry && l(e, t), !0 === e.usesGeometry;\n}\n\nlet z = null;\n\nfunction D() {\n  return z || (z = y([import(\"../geometry/geometryEngine.js\"), import(\"../arcade/functions/geomsync.js\")]).then(([e, t]) => (x = !0, t.setGeometryEngine(e), !0)), z);\n}\n\nlet I = null;\n\nfunction T() {\n  return null !== I || (I = r().then(() => import(\"../arcade/arcadeAsyncRuntime.js\")).then(e => {\n    F = e;\n\n    for (const r of E) F.extend(r), t(r, \"async\");\n\n    return E = null, !0;\n  })), I;\n}\n\nfunction B() {\n  return A;\n}\n\nfunction H() {\n  return !!F;\n}\n\nfunction J() {\n  return x;\n}\n\nlet K = null;\n\nfunction N() {\n  return K || (K = T().then(() => y([import(\"../arcade/featureSetUtils.js\"), import(\"../arcade/functions/featuresetbase.js\"), import(\"../arcade/functions/featuresetgeom.js\"), import(\"../arcade/functions/featuresetstats.js\"), import(\"../arcade/functions/featuresetstring.js\")]).then(([e, r, n, s, i]) => (Y = e, F.extend([r, n, s, i]), t([r, n, s, i], \"async\"), A = !0, !0))), K);\n}\n\nfunction P(e, t = []) {\n  return void 0 === e.usesFeatureSet && l(e, t), !0 === e.usesFeatureSet;\n}\n\nfunction Q(e, t = []) {\n  return void 0 === e.isAsync && l(e, t), !0 === e.isAsync;\n}\n\nfunction V(e, t) {\n  if (t) {\n    for (const r of t) if (L(e, r)) return !0;\n\n    return !1;\n  }\n\n  return !1;\n}\n\nfunction W(e, t, r = [], n = !1) {\n  return S((s, i) => {\n    const c = \"string\" == typeof e ? U(e) : e,\n          u = [];\n    u.push($()), c && (!1 === J() && (q(c) || n) && u.push(D()), !1 === H() && (!0 === c.isAsync || t) && u.push(T()), !1 === B() && (P(c) || V(c, r)) && u.push(N())), u ? y(u).then(() => {\n      s(!0);\n    }, i) : s(!0);\n  });\n}\n\nfunction X(e) {\n  if (q(e)) return !0;\n  const t = m(e);\n  let r = !1;\n\n  for (let n = 0; n < t.length; n++) if (b.indexOf(t[n]) > -1) {\n    r = !0;\n    break;\n  }\n\n  return r;\n}\n\nlet Y = null;\n\nfunction Z() {\n  return Y;\n}\n\nfunction $() {\n  return null !== ee || (ee = h().then(e => (u.Moment = e, !0))), ee;\n}\n\nlet ee = null;\nvar te = Object.freeze({\n  __proto__: null,\n  compileScript: v,\n  extend: G,\n  parseScript: U,\n  validateScript: k,\n  scriptCheck: M,\n  parseAndExecuteScript: _,\n  executeScript: C,\n  referencesMember: L,\n  referencesFunction: O,\n  extractFieldLiterals: R,\n  scriptUsesGeometryEngine: q,\n  enableGeometrySupport: D,\n  enableAsyncSupport: T,\n  isFeatureSetSupportEnabled: B,\n  isAsyncEnabled: H,\n  isGeometryEnabled: J,\n  enableFeatureSetSupport: N,\n  scriptUsesFeatureSet: P,\n  scriptIsAsync: Q,\n  loadScriptDependencies: W,\n  scriptTouchesGeometry: X,\n  featureSetUtils: Z,\n  load: $\n});\nexport { R as a, D as b, v as c, N as d, C as e, Z as f, q as g, te as h, G as i, M as j, _ as k, W as l, O as m, T as n, B as o, U as p, H as q, L as r, X as s, J as t, P as u, k as v, Q as w, $ as x };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/chunks/arcade.js"],"names":["compileScript","e","extend","t","enableAsyncSupport","r","n","executeScript","s","referencesMember","i","referencesFunction","c","M","u","parseScript","o","validateScript","a","scriptCheck","f","extractFieldLiterals","p","findScriptDependencies","l","findFunctionCalls","m","d","all","y","create","S","loadMoment","h","b","g","Function","j","A","x","F","E","v","useAsync","isAsync","w","Error","G","push","U","k","_","C","L","O","R","q","usesGeometry","z","D","then","setGeometryEngine","I","T","B","H","J","K","N","Y","P","usesFeatureSet","Q","V","W","$","X","length","indexOf","Z","ee","Moment","te","Object","freeze","__proto__","parseAndExecuteScript","scriptUsesGeometryEngine","enableGeometrySupport","isFeatureSetSupportEnabled","isAsyncEnabled","isGeometryEnabled","enableFeatureSetSupport","scriptUsesFeatureSet","scriptIsAsync","loadScriptDependencies","scriptTouchesGeometry","featureSetUtils","load"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{compileScript as e,extend as t,enableAsyncSupport as r}from\"../arcade/arcadeCompiler.js\";import{extend as n,executeScript as s,referencesMember as i,referencesFunction as c}from\"../arcade/arcadeRuntime.js\";import{M as u}from\"./languageUtils.js\";import{parseScript as o,validateScript as a,scriptCheck as f,extractFieldLiterals as p}from\"../arcade/parser.js\";import{findScriptDependencies as l,findFunctionCalls as m}from\"../arcade/treeAnalysis.js\";import d from\"../core/has.js\";import{all as y,create as S}from\"../core/promiseUtils.js\";import{loadMoment as h}from\"../intl/moment.js\";const b=[\"feature\",\"angle\",\"bearing\",\"centroid\",\"envelopeintersects\",\"extent\",\"geometry\",\"isselfintersecting\",\"ringisclockwise\"];function g(){if(d(\"csp-restrictions\"))return!1;try{return new Function(\"function* test() {}; return true\")()}catch(e){return!1}}const j=g();let A=!1,x=!1,F=null,E=[];function v(t,r){if(!0===r.useAsync||!0===t.isAsync)return w(t,r);if(d(\"csp-restrictions\")){return function(e){return s(t,e)}}return e(t,r)}function w(t,r){if(null===F)throw new Error(\"Async Arcade must be enabled for this script\");if(d(\"csp-restrictions\")||!1===j){return function(e){return F.executeScript(t,e)}}return e(t,r,!0)}function G(e){n(e),t(e,\"sync\"),null===F?E.push(e):(t(e,\"async\"),F.extend(e))}function U(e,t=[]){return o(e,t)}function k(e,t,r=\"\"){return a(e,t,r)}function M(e,t,r,n=\"\"){return f(e,t,r,n)}function _(e,t,r=[]){return C(o(e,r),t)}function C(e,t){if(!0===t.useAsync||!0===e.isAsync){if(null===F)throw new Error(\"Async Arcade must be enabled for this script\");return F.executeScript(e,t)}return s(e,t)}function L(e,t){return i(e,t)}function O(e,t){return c(e,t)}function R(e,t=!1){return p(e)}function q(e,t=[]){return void 0===e.usesGeometry&&l(e,t),!0===e.usesGeometry}let z=null;function D(){return z||(z=y([import(\"../geometry/geometryEngine.js\"),import(\"../arcade/functions/geomsync.js\")]).then((([e,t])=>(x=!0,t.setGeometryEngine(e),!0))),z)}let I=null;function T(){return null!==I||(I=r().then((()=>import(\"../arcade/arcadeAsyncRuntime.js\"))).then((e=>{F=e;for(const r of E)F.extend(r),t(r,\"async\");return E=null,!0}))),I}function B(){return A}function H(){return!!F}function J(){return x}let K=null;function N(){return K||(K=T().then((()=>y([import(\"../arcade/featureSetUtils.js\"),import(\"../arcade/functions/featuresetbase.js\"),import(\"../arcade/functions/featuresetgeom.js\"),import(\"../arcade/functions/featuresetstats.js\"),import(\"../arcade/functions/featuresetstring.js\")]).then((([e,r,n,s,i])=>(Y=e,F.extend([r,n,s,i]),t([r,n,s,i],\"async\"),A=!0,!0))))),K)}function P(e,t=[]){return void 0===e.usesFeatureSet&&l(e,t),!0===e.usesFeatureSet}function Q(e,t=[]){return void 0===e.isAsync&&l(e,t),!0===e.isAsync}function V(e,t){if(t){for(const r of t)if(L(e,r))return!0;return!1}return!1}function W(e,t,r=[],n=!1){return S(((s,i)=>{const c=\"string\"==typeof e?U(e):e,u=[];u.push($()),c&&(!1===J()&&(q(c)||n)&&u.push(D()),!1===H()&&(!0===c.isAsync||t)&&u.push(T()),!1===B()&&(P(c)||V(c,r))&&u.push(N())),u?y(u).then((()=>{s(!0)}),i):s(!0)}))}function X(e){if(q(e))return!0;const t=m(e);let r=!1;for(let n=0;n<t.length;n++)if(b.indexOf(t[n])>-1){r=!0;break}return r}let Y=null;function Z(){return Y}function $(){return null!==ee||(ee=h().then((e=>(u.Moment=e,!0)))),ee}let ee=null;var te=Object.freeze({__proto__:null,compileScript:v,extend:G,parseScript:U,validateScript:k,scriptCheck:M,parseAndExecuteScript:_,executeScript:C,referencesMember:L,referencesFunction:O,extractFieldLiterals:R,scriptUsesGeometryEngine:q,enableGeometrySupport:D,enableAsyncSupport:T,isFeatureSetSupportEnabled:B,isAsyncEnabled:H,isGeometryEnabled:J,enableFeatureSetSupport:N,scriptUsesFeatureSet:P,scriptIsAsync:Q,loadScriptDependencies:W,scriptTouchesGeometry:X,featureSetUtils:Z,load:$});export{R as a,D as b,v as c,N as d,C as e,Z as f,q as g,te as h,G as i,M as j,_ as k,W as l,O as m,T as n,B as o,U as p,H as q,L as r,X as s,J as t,P as u,k as v,Q as w,$ as x};\n"]},"metadata":{},"sourceType":"module"}