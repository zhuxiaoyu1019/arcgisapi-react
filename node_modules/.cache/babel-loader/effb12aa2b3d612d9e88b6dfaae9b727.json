{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { bindSliceUniformsWithOrigin as t } from \"../core/shaderLibrary/Slice.glsl.js\";\nimport { bindMultipassTerrainTexture as r } from \"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { bindProjectionMatrix as i, bindView as s } from \"../core/shaderLibrary/util/View.glsl.js\";\nimport { ReloadableShaderModule as a } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as o } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { ShaderTechniqueConfiguration as n, parameter as l } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { Default3D as p } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { OITBlending as c, OITDepthTest as u, OITDepthWrite as d, getOITPolygonOffset as h } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as m } from \"../lib/Program.js\";\nimport { stencilWriteMaskOn as b, stencilToolMaskBaseParams as f, stencilBaseAllZerosParams as g } from \"../lib/StencilUtils.js\";\nimport { I as y } from \"../../../../chunks/ImageMaterial.glsl.js\";\nimport { makePipelineState as T, cullingParams as P, defaultDepthWriteParams as v, defaultColorWriteParams as j, simpleBlendingParams as S } from \"../../../webgl/renderState.js\";\n\nclass E extends o {\n  initializeProgram(e) {\n    const t = E.shader.get(),\n          r = this.configuration,\n          i = t.build({\n      output: r.output,\n      slicePlaneEnabled: r.slicePlaneEnabled,\n      sliceHighlightDisabled: !1,\n      sliceEnabledForVertexPrograms: !1,\n      OITEnabled: 0 === r.transparencyPassType,\n      multipassTerrainEnabled: r.multipassTerrainEnabled,\n      cullAboveGround: r.cullAboveGround\n    });\n    return new m(e.rctx, i, p);\n  }\n\n  bindPass(e, t) {\n    i(this.program, t.camera.projectionMatrix), this.program.setUniform1f(\"opacity\", e.opacity), t.multipassTerrainEnabled && (this.program.setUniform2fv(\"cameraNearFar\", t.camera.nearFar), this.program.setUniform2fv(\"inverseViewport\", t.inverseViewport), r(this.program, t));\n  }\n\n  bindDraw(e) {\n    s(this.program, e), t(this.program, this.configuration, e), this.program.rebindTextures();\n  }\n\n  setPipelineState(e, t) {\n    const r = this.configuration,\n          i = 3 === e,\n          s = 2 === e;\n    return T({\n      blending: 0 !== r.output && 7 !== r.output || !r.transparent ? null : i ? w : c(e),\n      culling: P(r.cullFace),\n      depthTest: {\n        func: u(e)\n      },\n      depthWrite: i ? r.writeDepth && v : d(e),\n      colorWrite: j,\n      stencilWrite: r.sceneHasOcludees ? b : null,\n      stencilTest: r.sceneHasOcludees ? t ? f : g : null,\n      polygonOffset: i || s ? null : h(r.enableOffset)\n    });\n  }\n\n  initializePipeline() {\n    return this._occludeePipelineState = this.setPipelineState(this.configuration.transparencyPassType, !0), this.setPipelineState(this.configuration.transparencyPassType, !1);\n  }\n\n  getPipelineState(e) {\n    return e ? this._occludeePipelineState : this.pipeline;\n  }\n\n}\n\nE.shader = new a(y, () => import(\"./ImageMaterial.glsl.js\"));\nconst w = S(1, 771);\n\nclass O extends n {\n  constructor() {\n    super(...arguments), this.output = 0, this.cullFace = 0, this.slicePlaneEnabled = !1, this.transparent = !1, this.enableOffset = !0, this.writeDepth = !0, this.sceneHasOcludees = !1, this.transparencyPassType = 3, this.multipassTerrainEnabled = !1, this.cullAboveGround = !1;\n  }\n\n}\n\ne([l({\n  count: 8\n})], O.prototype, \"output\", void 0), e([l({\n  count: 3\n})], O.prototype, \"cullFace\", void 0), e([l()], O.prototype, \"slicePlaneEnabled\", void 0), e([l()], O.prototype, \"transparent\", void 0), e([l()], O.prototype, \"enableOffset\", void 0), e([l()], O.prototype, \"writeDepth\", void 0), e([l()], O.prototype, \"sceneHasOcludees\", void 0), e([l({\n  count: 4\n})], O.prototype, \"transparencyPassType\", void 0), e([l()], O.prototype, \"multipassTerrainEnabled\", void 0), e([l()], O.prototype, \"cullAboveGround\", void 0);\nexport { E as ImageMaterialTechnique, O as ImageMaterialTechniqueConfiguration };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js"],"names":["_","e","bindSliceUniformsWithOrigin","t","bindMultipassTerrainTexture","r","bindProjectionMatrix","i","bindView","s","ReloadableShaderModule","a","ShaderTechnique","o","ShaderTechniqueConfiguration","n","parameter","l","Default3D","p","OITBlending","c","OITDepthTest","u","OITDepthWrite","d","getOITPolygonOffset","h","Program","m","stencilWriteMaskOn","b","stencilToolMaskBaseParams","f","stencilBaseAllZerosParams","g","I","y","makePipelineState","T","cullingParams","P","defaultDepthWriteParams","v","defaultColorWriteParams","j","simpleBlendingParams","S","E","initializeProgram","shader","get","configuration","build","output","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","OITEnabled","transparencyPassType","multipassTerrainEnabled","cullAboveGround","rctx","bindPass","program","camera","projectionMatrix","setUniform1f","opacity","setUniform2fv","nearFar","inverseViewport","bindDraw","rebindTextures","setPipelineState","blending","transparent","w","culling","cullFace","depthTest","func","depthWrite","writeDepth","colorWrite","stencilWrite","sceneHasOcludees","stencilTest","polygonOffset","enableOffset","initializePipeline","_occludeePipelineState","getPipelineState","pipeline","O","constructor","arguments","count","prototype","ImageMaterialTechnique","ImageMaterialTechniqueConfiguration"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{bindSliceUniformsWithOrigin as t}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as r}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as i,bindView as s}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as a}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as n,parameter as l}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as p}from\"../lib/DefaultVertexAttributeLocations.js\";import{OITBlending as c,OITDepthTest as u,OITDepthWrite as d,getOITPolygonOffset as h}from\"../lib/OrderIndependentTransparency.js\";import{Program as m}from\"../lib/Program.js\";import{stencilWriteMaskOn as b,stencilToolMaskBaseParams as f,stencilBaseAllZerosParams as g}from\"../lib/StencilUtils.js\";import{I as y}from\"../../../../chunks/ImageMaterial.glsl.js\";import{makePipelineState as T,cullingParams as P,defaultDepthWriteParams as v,defaultColorWriteParams as j,simpleBlendingParams as S}from\"../../../webgl/renderState.js\";class E extends o{initializeProgram(e){const t=E.shader.get(),r=this.configuration,i=t.build({output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,OITEnabled:0===r.transparencyPassType,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new m(e.rctx,i,p)}bindPass(e,t){i(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"opacity\",e.opacity),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),r(this.program,t))}bindDraw(e){s(this.program,e),t(this.program,this.configuration,e),this.program.rebindTextures()}setPipelineState(e,t){const r=this.configuration,i=3===e,s=2===e;return T({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?w:c(e),culling:P(r.cullFace),depthTest:{func:u(e)},depthWrite:i?r.writeDepth&&v:d(e),colorWrite:j,stencilWrite:r.sceneHasOcludees?b:null,stencilTest:r.sceneHasOcludees?t?f:g:null,polygonOffset:i||s?null:h(r.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}E.shader=new a(y,(()=>import(\"./ImageMaterial.glsl.js\")));const w=S(1,771);class O extends n{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([l({count:8})],O.prototype,\"output\",void 0),e([l({count:3})],O.prototype,\"cullFace\",void 0),e([l()],O.prototype,\"slicePlaneEnabled\",void 0),e([l()],O.prototype,\"transparent\",void 0),e([l()],O.prototype,\"enableOffset\",void 0),e([l()],O.prototype,\"writeDepth\",void 0),e([l()],O.prototype,\"sceneHasOcludees\",void 0),e([l({count:4})],O.prototype,\"transparencyPassType\",void 0),e([l()],O.prototype,\"multipassTerrainEnabled\",void 0),e([l()],O.prototype,\"cullAboveGround\",void 0);export{E as ImageMaterialTechnique,O as ImageMaterialTechniqueConfiguration};\n"]},"metadata":{},"sourceType":"module"}