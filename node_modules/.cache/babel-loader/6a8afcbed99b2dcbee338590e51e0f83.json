{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { createScreenPointArray as t } from \"../../../../core/screenUtils.js\";\nimport { RotateController as r } from \"../../state/controllers/RotateController.js\";\nimport { InputHandler as e } from \"../../../input/InputHandler.js\";\nimport { eventMatchesMousePointerAction as o } from \"../../../input/handlers/support.js\";\n\nclass a extends e {\n  constructor(t, r, e, o) {\n    super(!0), this.view = t, this.pointerAction = r, this.pivot = e, this.registerIncoming(\"drag\", o, t => this.handleDrag(t));\n  }\n\n  handleDrag(e) {\n    const a = e.data;\n    if (a.pointers.size > 1) return;\n    if (!o(e.data, this.pointerAction)) return;\n    const i = t(a.center.x, a.center.y);\n\n    switch (a.action) {\n      case \"start\":\n        this.cameraController && (this.cameraController.end(), this.cameraController = null), this.cameraController = new r({\n          view: this.view,\n          pivot: this.pivot\n        }), this.view.state.switchCameraController(this.cameraController), this.cameraController.begin(i);\n        break;\n\n      case \"update\":\n        this.cameraController && this.cameraController.update(i);\n        break;\n\n      case \"end\":\n        this.cameraController && (this.cameraController.end(), this.cameraController = null);\n    }\n\n    e.stopPropagation();\n  }\n\n}\n\nexport { a as DragRotate };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/input/handlers/DragRotate.js"],"names":["createScreenPointArray","t","RotateController","r","InputHandler","e","eventMatchesMousePointerAction","o","a","constructor","view","pointerAction","pivot","registerIncoming","handleDrag","data","pointers","size","i","center","x","y","action","cameraController","end","state","switchCameraController","begin","update","stopPropagation","DragRotate"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,sBAAsB,IAAIC,CAAjC,QAAuC,iCAAvC;AAAyE,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,6CAAjC;AAA+E,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,gCAA7B;AAA8D,SAAOC,8BAA8B,IAAIC,CAAzC,QAA+C,oCAA/C;;AAAoF,MAAMC,CAAN,SAAgBH,CAAhB,CAAiB;AAACI,EAAAA,WAAW,CAACR,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;AAAC,UAAM,CAAC,CAAP,GAAU,KAAKG,IAAL,GAAUT,CAApB,EAAsB,KAAKU,aAAL,GAAmBR,CAAzC,EAA2C,KAAKS,KAAL,GAAWP,CAAtD,EAAwD,KAAKQ,gBAAL,CAAsB,MAAtB,EAA6BN,CAA7B,EAAgCN,CAAC,IAAE,KAAKa,UAAL,CAAgBb,CAAhB,CAAnC,CAAxD;AAAgH;;AAAAa,EAAAA,UAAU,CAACT,CAAD,EAAG;AAAC,UAAMG,CAAC,GAACH,CAAC,CAACU,IAAV;AAAe,QAAGP,CAAC,CAACQ,QAAF,CAAWC,IAAX,GAAgB,CAAnB,EAAqB;AAAO,QAAG,CAACV,CAAC,CAACF,CAAC,CAACU,IAAH,EAAQ,KAAKJ,aAAb,CAAL,EAAiC;AAAO,UAAMO,CAAC,GAACjB,CAAC,CAACO,CAAC,CAACW,MAAF,CAASC,CAAV,EAAYZ,CAAC,CAACW,MAAF,CAASE,CAArB,CAAT;;AAAiC,YAAOb,CAAC,CAACc,MAAT;AAAiB,WAAI,OAAJ;AAAY,aAAKC,gBAAL,KAAwB,KAAKA,gBAAL,CAAsBC,GAAtB,IAA4B,KAAKD,gBAAL,GAAsB,IAA1E,GAAgF,KAAKA,gBAAL,GAAsB,IAAIpB,CAAJ,CAAM;AAACO,UAAAA,IAAI,EAAC,KAAKA,IAAX;AAAgBE,UAAAA,KAAK,EAAC,KAAKA;AAA3B,SAAN,CAAtG,EAA+I,KAAKF,IAAL,CAAUe,KAAV,CAAgBC,sBAAhB,CAAuC,KAAKH,gBAA5C,CAA/I,EAA6M,KAAKA,gBAAL,CAAsBI,KAAtB,CAA4BT,CAA5B,CAA7M;AAA4O;;AAAM,WAAI,QAAJ;AAAa,aAAKK,gBAAL,IAAuB,KAAKA,gBAAL,CAAsBK,MAAtB,CAA6BV,CAA7B,CAAvB;AAAuD;;AAAM,WAAI,KAAJ;AAAU,aAAKK,gBAAL,KAAwB,KAAKA,gBAAL,CAAsBC,GAAtB,IAA4B,KAAKD,gBAAL,GAAsB,IAA1E;AAAnW;;AAAmblB,IAAAA,CAAC,CAACwB,eAAF;AAAoB;;AAA/sB;;AAAgtB,SAAOrB,CAAC,IAAIsB,UAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{createScreenPointArray as t}from\"../../../../core/screenUtils.js\";import{RotateController as r}from\"../../state/controllers/RotateController.js\";import{InputHandler as e}from\"../../../input/InputHandler.js\";import{eventMatchesMousePointerAction as o}from\"../../../input/handlers/support.js\";class a extends e{constructor(t,r,e,o){super(!0),this.view=t,this.pointerAction=r,this.pivot=e,this.registerIncoming(\"drag\",o,(t=>this.handleDrag(t)))}handleDrag(e){const a=e.data;if(a.pointers.size>1)return;if(!o(e.data,this.pointerAction))return;const i=t(a.center.x,a.center.y);switch(a.action){case\"start\":this.cameraController&&(this.cameraController.end(),this.cameraController=null),this.cameraController=new r({view:this.view,pivot:this.pivot}),this.view.state.switchCameraController(this.cameraController),this.cameraController.begin(i);break;case\"update\":this.cameraController&&this.cameraController.update(i);break;case\"end\":this.cameraController&&(this.cameraController.end(),this.cameraController=null)}e.stopPropagation()}}export{a as DragRotate};\n"]},"metadata":{},"sourceType":"module"}