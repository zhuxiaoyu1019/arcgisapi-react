{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Evented.js\";\nimport t from \"../../../../core/Logger.js\";\nimport { isSome as r, isNone as a } from \"../../../../core/maybe.js\";\nimport { isPromiseLike as s, isAbortError as i } from \"../../../../core/promiseUtils.js\";\nimport { TextureTechnique as n, TextureTechniqueConfiguration as o } from \"./TextureTechnique.js\";\nimport { assert as u } from \"./Util.js\";\nimport { TaskPriority as l } from \"../../../support/Scheduler.js\";\nimport h from \"../../../webgl/Texture.js\";\nconst c = t.getLogger(\"esri.views.3d.webgl-engine.lib.TextureRepository\"),\n      T = 8;\n\nclass f {\n  constructor(t, r, a) {\n    this._stage = t, this._rctx = a, this._idToRefCountedTexture = new Map(), this._loadingCount = 0, this._frameUpdates = new Map(), this._fallbackTextureData = new Uint8Array(T * T * 4), this._fallbackTextureTransparentData = new Uint8Array(T * T * 4), this.events = new e(), this._textureTechnique = r.acquire(n, new o());\n\n    for (let e = 0; e < this._fallbackTextureData.length; ++e) this._fallbackTextureData[e] = 255, this._fallbackTextureTransparentData[e] = (e + 1) % 4 != 0 ? 255 : 0;\n\n    this._fallbackTextureDesc = {\n      target: 3553,\n      pixelFormat: 6408,\n      dataType: 5121,\n      samplingMode: 9728,\n      width: T,\n      height: T,\n      maxAnisotropy: this._rctx.parameters.maxMaxAnisotropy\n    }, this._frameTask = t.resourceController.scheduler.registerTask(l.TEXTURE_UNLOAD);\n  }\n\n  dispose() {\n    this._frameTask.remove(), r(this._fallbackTexture) && (this._fallbackTexture.dispose(), this._fallbackTexture = null), r(this._fallbackTextureTransparent) && (this._fallbackTextureTransparent.dispose(), this._fallbackTextureTransparent = null), this._stage.forEachOfType(4, e => e.unload());\n  }\n\n  get updating() {\n    return this.loadingCount > 0 || this._frameTask.updating;\n  }\n\n  acquire(e, t = !1, r) {\n    const a = this._getOrCreateRef(e, t, r);\n\n    return a.ref(), a;\n  }\n\n  update() {\n    let e = !1;\n    this._frameUpdates.forEach(t => {\n      const r = t.texture.frameUpdate(this._rctx, this._textureTechnique, t.previousToken);\n      r >= 0 && r !== t.previousToken && (t.previousToken = r, e = !0);\n    }), e && this.events.emit(\"changed\", 0);\n  }\n\n  _getOrCreateRef(e, t, r) {\n    const a = this._idToRefCountedTexture.get(e);\n\n    return a || this._createNewRef(e, t, r);\n  }\n\n  _createNewRef(e, t, r) {\n    const a = this._stage.getObject(e);\n\n    u(void 0 !== a);\n    const n = a.events.on(\"unloaded\", () => {\n      n.remove(), this._onTextureUnloaded(e);\n    }),\n          o = new _();\n\n    this._idToRefCountedTexture.set(e, o);\n\n    const l = a.load(this._rctx, this._textureTechnique);\n    this._loadingCount++;\n\n    const h = t => (this._loadingCount--, this._updateGLTexture(o, t), r && r(o), a.requiresFrameUpdates && this._frameUpdates.set(e, {\n      texture: a,\n      previousToken: -1\n    }), o),\n          T = e => {\n      this._loadingCount--, i(e) || c.error(e);\n    };\n\n    return s(l) ? (this._updateGLTexture(o, t ? this.fallbackTextureTransparent : this.fallbackTexture), l.then(h, T)) : h(l), o;\n  }\n\n  _updateGLTexture(e, t) {\n    e.glTexture = t, this.events.emit(\"changed\", 1);\n  }\n\n  release(e) {\n    const t = this._idToRefCountedTexture.get(e);\n\n    if (t && (t.unref(), t.isUnreferenced)) {\n      const r = this._stage.getObject(e);\n\n      this._frameTask.schedule(() => {\n        t.isUnreferenced && r.unload();\n      });\n    }\n  }\n\n  getTexture(e) {\n    return this._stage.getObject(e);\n  }\n\n  get loadingCount() {\n    return this._loadingCount;\n  }\n\n  _onTextureUnloaded(e) {\n    this._idToRefCountedTexture.delete(e), this._frameUpdates.delete(e);\n  }\n\n  get fallbackTexture() {\n    return a(this._fallbackTexture) && (this._fallbackTexture = new h(this._rctx, this._fallbackTextureDesc, this._fallbackTextureData)), this._fallbackTexture;\n  }\n\n  get fallbackTextureTransparent() {\n    return a(this._fallbackTextureTransparent) && (this._fallbackTextureTransparent = new h(this._rctx, this._fallbackTextureDesc, this._fallbackTextureTransparentData)), this._fallbackTextureTransparent;\n  }\n\n}\n\nclass _ {\n  constructor() {\n    this._refCount = 0, this.glTexture = null;\n  }\n\n  get isUnreferenced() {\n    return 0 === this._refCount;\n  }\n\n  ref() {\n    ++this._refCount;\n  }\n\n  unref() {\n    0 !== this._refCount ? --this._refCount : c.error(\"Cannot dereference texture that has no references!\");\n  }\n\n}\n\nexport { _ as RefCountedTexture, f as TextureRepository };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureRepository.js"],"names":["e","t","isSome","r","isNone","a","isPromiseLike","s","isAbortError","i","TextureTechnique","n","TextureTechniqueConfiguration","o","assert","u","TaskPriority","l","h","c","getLogger","T","f","constructor","_stage","_rctx","_idToRefCountedTexture","Map","_loadingCount","_frameUpdates","_fallbackTextureData","Uint8Array","_fallbackTextureTransparentData","events","_textureTechnique","acquire","length","_fallbackTextureDesc","target","pixelFormat","dataType","samplingMode","width","height","maxAnisotropy","parameters","maxMaxAnisotropy","_frameTask","resourceController","scheduler","registerTask","TEXTURE_UNLOAD","dispose","remove","_fallbackTexture","_fallbackTextureTransparent","forEachOfType","unload","updating","loadingCount","_getOrCreateRef","ref","update","forEach","texture","frameUpdate","previousToken","emit","get","_createNewRef","getObject","on","_onTextureUnloaded","_","set","load","_updateGLTexture","requiresFrameUpdates","error","fallbackTextureTransparent","fallbackTexture","then","glTexture","release","unref","isUnreferenced","schedule","getTexture","delete","_refCount","RefCountedTexture","TextureRepository"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Evented.js\";import t from\"../../../../core/Logger.js\";import{isSome as r,isNone as a}from\"../../../../core/maybe.js\";import{isPromiseLike as s,isAbortError as i}from\"../../../../core/promiseUtils.js\";import{TextureTechnique as n,TextureTechniqueConfiguration as o}from\"./TextureTechnique.js\";import{assert as u}from\"./Util.js\";import{TaskPriority as l}from\"../../../support/Scheduler.js\";import h from\"../../../webgl/Texture.js\";const c=t.getLogger(\"esri.views.3d.webgl-engine.lib.TextureRepository\"),T=8;class f{constructor(t,r,a){this._stage=t,this._rctx=a,this._idToRefCountedTexture=new Map,this._loadingCount=0,this._frameUpdates=new Map,this._fallbackTextureData=new Uint8Array(T*T*4),this._fallbackTextureTransparentData=new Uint8Array(T*T*4),this.events=new e,this._textureTechnique=r.acquire(n,new o);for(let e=0;e<this._fallbackTextureData.length;++e)this._fallbackTextureData[e]=255,this._fallbackTextureTransparentData[e]=(e+1)%4!=0?255:0;this._fallbackTextureDesc={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:T,height:T,maxAnisotropy:this._rctx.parameters.maxMaxAnisotropy},this._frameTask=t.resourceController.scheduler.registerTask(l.TEXTURE_UNLOAD)}dispose(){this._frameTask.remove(),r(this._fallbackTexture)&&(this._fallbackTexture.dispose(),this._fallbackTexture=null),r(this._fallbackTextureTransparent)&&(this._fallbackTextureTransparent.dispose(),this._fallbackTextureTransparent=null),this._stage.forEachOfType(4,(e=>e.unload()))}get updating(){return this.loadingCount>0||this._frameTask.updating}acquire(e,t=!1,r){const a=this._getOrCreateRef(e,t,r);return a.ref(),a}update(){let e=!1;this._frameUpdates.forEach((t=>{const r=t.texture.frameUpdate(this._rctx,this._textureTechnique,t.previousToken);r>=0&&r!==t.previousToken&&(t.previousToken=r,e=!0)})),e&&this.events.emit(\"changed\",0)}_getOrCreateRef(e,t,r){const a=this._idToRefCountedTexture.get(e);return a||this._createNewRef(e,t,r)}_createNewRef(e,t,r){const a=this._stage.getObject(e);u(void 0!==a);const n=a.events.on(\"unloaded\",(()=>{n.remove(),this._onTextureUnloaded(e)})),o=new _;this._idToRefCountedTexture.set(e,o);const l=a.load(this._rctx,this._textureTechnique);this._loadingCount++;const h=t=>(this._loadingCount--,this._updateGLTexture(o,t),r&&r(o),a.requiresFrameUpdates&&this._frameUpdates.set(e,{texture:a,previousToken:-1}),o),T=e=>{this._loadingCount--,i(e)||c.error(e)};return s(l)?(this._updateGLTexture(o,t?this.fallbackTextureTransparent:this.fallbackTexture),l.then(h,T)):h(l),o}_updateGLTexture(e,t){e.glTexture=t,this.events.emit(\"changed\",1)}release(e){const t=this._idToRefCountedTexture.get(e);if(t&&(t.unref(),t.isUnreferenced)){const r=this._stage.getObject(e);this._frameTask.schedule((()=>{t.isUnreferenced&&r.unload()}))}}getTexture(e){return this._stage.getObject(e)}get loadingCount(){return this._loadingCount}_onTextureUnloaded(e){this._idToRefCountedTexture.delete(e),this._frameUpdates.delete(e)}get fallbackTexture(){return a(this._fallbackTexture)&&(this._fallbackTexture=new h(this._rctx,this._fallbackTextureDesc,this._fallbackTextureData)),this._fallbackTexture}get fallbackTextureTransparent(){return a(this._fallbackTextureTransparent)&&(this._fallbackTextureTransparent=new h(this._rctx,this._fallbackTextureDesc,this._fallbackTextureTransparentData)),this._fallbackTextureTransparent}}class _{constructor(){this._refCount=0,this.glTexture=null}get isUnreferenced(){return 0===this._refCount}ref(){++this._refCount}unref(){0!==this._refCount?--this._refCount:c.error(\"Cannot dereference texture that has no references!\")}}export{_ as RefCountedTexture,f as TextureRepository};\n"]},"metadata":{},"sourceType":"module"}