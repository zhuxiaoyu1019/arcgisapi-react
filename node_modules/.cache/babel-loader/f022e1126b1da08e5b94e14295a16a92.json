{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { Milliseconds as t, MillisecondsFromSeconds as i } from \"../../../../core/time.js\";\nimport { f as e, l as r, g as n } from \"../../../../chunks/vec3.js\";\nimport { c as m } from \"../../../../chunks/vec3f64.js\";\nimport o from \"./Camera.js\";\nimport s from \"../../webgl-engine/lib/Camera.js\";\nimport { Animation as a } from \"../../../animation/pointToPoint/Animation.js\";\nconst c = m();\n\nclass h {\n  constructor(i) {\n    this.currentTime = t(0), this._animation = new a(() => new o(i)), this._current = new o(i);\n  }\n\n  get finished() {\n    return this.currentTime >= this._animation.time;\n  }\n\n  get time() {\n    return this._animation.time;\n  }\n\n  update(i, m, o) {\n    const s = this._animation.definition.source,\n          a = this._animation.definition.target,\n          h = e(c, m.center, i.center),\n          u = r(h);\n    u >= 1e-5 ? (h[0] /= u, h[1] /= u, h[2] /= u) : (h[0] = 0, h[1] = 1, h[0] = 0), n(s.lookAtDirection, h), n(a.lookAtDirection, h), s.copyFromRenderCamera(i), a.copyFromRenderCamera(m), this._current.copyFrom(s), this._animation.update(s, a, o), this.currentTime = t(0), i.almostEquals(m) && (this.currentTime = this._animation.time);\n  }\n\n  cameraAt(t, i) {\n    return this._animation.cameraAt(t, this._current), i = i || new s(), this._current.copyToRenderCamera(i), i;\n  }\n\n  step(e, r) {\n    return this.finished || (this.currentTime = t(this.currentTime + i(e)), this.currentTime >= this.time && (this.currentTime = this.time)), this.cameraAt(this.currentTime / this.time, r);\n  }\n\n}\n\nexport default h;\nexport { h as Animation };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/animation/pointToPoint/Animation.js"],"names":["Milliseconds","t","MillisecondsFromSeconds","i","f","e","l","r","g","n","c","m","o","s","Animation","a","h","constructor","currentTime","_animation","_current","finished","time","update","definition","source","target","center","u","lookAtDirection","copyFromRenderCamera","copyFrom","almostEquals","cameraAt","copyToRenderCamera","step"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Milliseconds as t,MillisecondsFromSeconds as i}from\"../../../../core/time.js\";import{f as e,l as r,g as n}from\"../../../../chunks/vec3.js\";import{c as m}from\"../../../../chunks/vec3f64.js\";import o from\"./Camera.js\";import s from\"../../webgl-engine/lib/Camera.js\";import{Animation as a}from\"../../../animation/pointToPoint/Animation.js\";const c=m();class h{constructor(i){this.currentTime=t(0),this._animation=new a((()=>new o(i))),this._current=new o(i)}get finished(){return this.currentTime>=this._animation.time}get time(){return this._animation.time}update(i,m,o){const s=this._animation.definition.source,a=this._animation.definition.target,h=e(c,m.center,i.center),u=r(h);u>=1e-5?(h[0]/=u,h[1]/=u,h[2]/=u):(h[0]=0,h[1]=1,h[0]=0),n(s.lookAtDirection,h),n(a.lookAtDirection,h),s.copyFromRenderCamera(i),a.copyFromRenderCamera(m),this._current.copyFrom(s),this._animation.update(s,a,o),this.currentTime=t(0),i.almostEquals(m)&&(this.currentTime=this._animation.time)}cameraAt(t,i){return this._animation.cameraAt(t,this._current),i=i||new s,this._current.copyToRenderCamera(i),i}step(e,r){return this.finished||(this.currentTime=t(this.currentTime+i(e)),this.currentTime>=this.time&&(this.currentTime=this.time)),this.cameraAt(this.currentTime/this.time,r)}}export default h;export{h as Animation};\n"]},"metadata":{},"sourceType":"module"}