{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../chunks/tslib.es6.js\";\nimport { makeHandle as e } from \"../core/handleUtils.js\";\nimport { property as o } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { subclass as s } from \"../core/accessorSupport/decorators/subclass.js\";\nimport i from \"../widgets/Widget.js\";\nimport { isWidget as r } from \"../widgets/support/widget.js\";\nimport { createFocusTrap as n } from \"focus-trap\";\nimport { tsx as a } from \"../widgets/support/jsxFactory.js\";\nimport { messageBundle as c } from \"../widgets/support/decorators/messageBundle.js\";\nconst d = {\n  base: \"esri-identity-modal\",\n  open: \"esri-identity-modal--open\",\n  closed: \"esri-identity-modal--closed\",\n  title: \"esri-identity-modal__title\",\n  dialog: \"esri-identity-modal__dialog\",\n  content: \"esri-identity-modal__content\",\n  closeButton: \"esri-identity-modal__close-button\",\n  iconClose: \"esri-icon-close\"\n};\nlet l = class extends i {\n  constructor(t, e) {\n    super(t, e), this.container = document.createElement(\"div\"), this.content = null, this.open = !1, this._close = () => {\n      this.open = !1;\n    }, document.body.appendChild(this.container), this.own(this.watch(\"open\", () => this._toggleFocusTrap()));\n  }\n\n  destroy() {\n    this._destroyFocusTrap();\n  }\n\n  render() {\n    const t = this.id,\n          {\n      open: e,\n      content: o,\n      title: s,\n      messages: i\n    } = this,\n          r = e && !!o,\n          n = {\n      [d.open]: r,\n      [d.closed]: !r\n    },\n          c = a(\"button\", {\n      class: d.closeButton,\n      \"aria-label\": i.close,\n      title: i.close,\n      bind: this,\n      onclick: this._close\n    }, a(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: d.iconClose\n    })),\n          l = `${t}_title`,\n          p = `${t}_content`,\n          u = s ? a(\"h1\", {\n      id: l,\n      class: d.title\n    }, s) : null,\n          m = r ? a(\"div\", {\n      bind: this,\n      class: d.dialog,\n      role: \"dialog\",\n      \"aria-labelledby\": l,\n      \"aria-describedby\": p,\n      afterCreate: this._createFocusTrap\n    }, c, u, this._renderContent(p)) : null;\n    return a(\"div\", {\n      tabIndex: -1,\n      class: this.classes(d.base, n)\n    }, m);\n  }\n\n  _destroyFocusTrap() {\n    var t;\n    null == (t = this._focusTrap) || t.deactivate({\n      onDeactivate: null\n    }), this._focusTrap = null;\n  }\n\n  _toggleFocusTrap() {\n    const {\n      _focusTrap: t,\n      open: e\n    } = this;\n    t && (e ? t.activate() : t.deactivate());\n  }\n\n  _createFocusTrap(t) {\n    this._destroyFocusTrap();\n\n    const o = requestAnimationFrame(() => {\n      this._focusTrap = n(t, {\n        initialFocus: \"input\",\n        onDeactivate: this._close\n      }), this._toggleFocusTrap();\n    });\n    this.own(e(() => cancelAnimationFrame(o)));\n  }\n\n  _renderContent(t) {\n    const e = this.content;\n    return \"string\" == typeof e ? a(\"div\", {\n      class: d.content,\n      id: t,\n      innerHTML: e\n    }) : r(e) ? a(\"div\", {\n      class: d.content,\n      id: t\n    }, e.render()) : e instanceof HTMLElement ? a(\"div\", {\n      class: d.content,\n      id: t,\n      bind: e,\n      afterCreate: this._attachToNode\n    }) : null;\n  }\n\n  _attachToNode(t) {\n    const e = this;\n    t.appendChild(e);\n  }\n\n};\nt([o({\n  readOnly: !0\n})], l.prototype, \"container\", void 0), t([o()], l.prototype, \"content\", void 0), t([o()], l.prototype, \"open\", void 0), t([o(), c(\"esri/t9n/common\")], l.prototype, \"messages\", void 0), t([o({\n  aliasOf: \"messages.auth.signIn\"\n})], l.prototype, \"title\", void 0), l = t([s(\"esri.identity.IdentityModal\")], l);\nvar p = l;\nexport default p;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/identity/IdentityModal.js"],"names":["_","t","makeHandle","e","property","o","subclass","s","i","isWidget","r","createFocusTrap","n","tsx","a","messageBundle","c","d","base","open","closed","title","dialog","content","closeButton","iconClose","l","constructor","container","document","createElement","_close","body","appendChild","own","watch","_toggleFocusTrap","destroy","_destroyFocusTrap","render","id","messages","class","close","bind","onclick","p","u","m","role","afterCreate","_createFocusTrap","_renderContent","tabIndex","classes","_focusTrap","deactivate","onDeactivate","activate","requestAnimationFrame","initialFocus","cancelAnimationFrame","innerHTML","HTMLElement","_attachToNode","readOnly","prototype","aliasOf"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import{makeHandle as e}from\"../core/handleUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import i from\"../widgets/Widget.js\";import{isWidget as r}from\"../widgets/support/widget.js\";import{createFocusTrap as n}from\"focus-trap\";import{tsx as a}from\"../widgets/support/jsxFactory.js\";import{messageBundle as c}from\"../widgets/support/decorators/messageBundle.js\";const d={base:\"esri-identity-modal\",open:\"esri-identity-modal--open\",closed:\"esri-identity-modal--closed\",title:\"esri-identity-modal__title\",dialog:\"esri-identity-modal__dialog\",content:\"esri-identity-modal__content\",closeButton:\"esri-identity-modal__close-button\",iconClose:\"esri-icon-close\"};let l=class extends i{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:o,title:s,messages:i}=this,r=e&&!!o,n={[d.open]:r,[d.closed]:!r},c=a(\"button\",{class:d.closeButton,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},a(\"span\",{\"aria-hidden\":\"true\",class:d.iconClose})),l=`${t}_title`,p=`${t}_content`,u=s?a(\"h1\",{id:l,class:d.title},s):null,m=r?a(\"div\",{bind:this,class:d.dialog,role:\"dialog\",\"aria-labelledby\":l,\"aria-describedby\":p,afterCreate:this._createFocusTrap},c,u,this._renderContent(p)):null;return a(\"div\",{tabIndex:-1,class:this.classes(d.base,n)},m)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap();const o=requestAnimationFrame((()=>{this._focusTrap=n(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}));this.own(e((()=>cancelAnimationFrame(o))))}_renderContent(t){const e=this.content;return\"string\"==typeof e?a(\"div\",{class:d.content,id:t,innerHTML:e}):r(e)?a(\"div\",{class:d.content,id:t},e.render()):e instanceof HTMLElement?a(\"div\",{class:d.content,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){const e=this;t.appendChild(e)}};t([o({readOnly:!0})],l.prototype,\"container\",void 0),t([o()],l.prototype,\"content\",void 0),t([o()],l.prototype,\"open\",void 0),t([o(),c(\"esri/t9n/common\")],l.prototype,\"messages\",void 0),t([o({aliasOf:\"messages.auth.signIn\"})],l.prototype,\"title\",void 0),l=t([s(\"esri.identity.IdentityModal\")],l);var p=l;export default p;\n"]},"metadata":{},"sourceType":"module"}