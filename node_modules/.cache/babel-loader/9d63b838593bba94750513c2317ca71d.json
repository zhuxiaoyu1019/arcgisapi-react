{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport { isSymbol3D as t } from \"../../symbols.js\";\nimport { isDevEnvironment as r, adjustStaticAGOUrl as o } from \"../../core/devEnvironmentUtils.js\";\nimport s from \"../../core/Error.js\";\nimport { normalize as n, removeFile as l, urlToObject as a } from \"../../core/urlUtils.js\";\nimport i from \"../../portal/Portal.js\";\nimport m from \"../../portal/PortalQueryParams.js\";\nimport { enableWebStyleForceWOSR as u } from \"../../support/featureFlags.js\";\nimport { f as y } from \"../../chunks/persistableUrlUtils.js\";\nimport { fromJSON as f } from \"./jsonUtils.js\";\nimport c from \"./StyleOrigin.js\";\nimport p from \"./Thumbnail.js\";\nconst b = {};\n\nfunction d(e, t) {\n  return P(e, t).then(t => ({\n    data: t.data,\n    baseUrl: l(e),\n    styleUrl: e\n  }));\n}\n\nfunction h(e, t, r) {\n  const o = t.portal || i.getDefault();\n  let s;\n  const n = `${o.url} - ${o.user && o.user.username} - ${e}`;\n  return b[n] || (b[n] = j(e, o, r).then(e => (s = e, e.fetchData())).then(t => ({\n    data: t,\n    baseUrl: s.itemUrl,\n    styleName: e\n  }))), b[n];\n}\n\nfunction j(e, t, r) {\n  return t.load(r).then(() => {\n    const o = new m({\n      disableExtraQuery: !0,\n      query: `owner:${D} AND type:${R} AND typekeywords:\"${e}\"`\n    });\n    return t.queryItems(o, r);\n  }).then(({\n    results: t\n  }) => {\n    let o = null;\n    const n = e.toLowerCase();\n    if (t && Array.isArray(t)) for (const e of t) {\n      if (e.typeKeywords.some(e => e.toLowerCase() === n) && e.type === R && e.owner === D) {\n        o = e;\n        break;\n      }\n    }\n    if (!o) throw new s(\"symbolstyleutils:style-not-found\", `The style '${e}' could not be found`, {\n      styleName: e\n    });\n    return o.load(r);\n  });\n}\n\nfunction g(e, t, r) {\n  return e.styleUrl ? d(e.styleUrl, r) : e.styleName ? h(e.styleName, t, r) : Promise.reject(new s(\"symbolstyleutils:style-url-and-name-missing\", \"Either styleUrl or styleName is required to resolve a style\"));\n}\n\nfunction w(e, t, r, o) {\n  return e.name ? e.styleName && \"Esri2DPointSymbolsStyle\" === e.styleName ? E(e, t, o) : g(e, t, o).then(s => U(s, e.name, t, r, o)) : Promise.reject(new s(\"symbolstyleutils:style-symbol-reference-name-missing\", \"Missing name in style symbol reference\"));\n}\n\nfunction U(e, n, i, m, u) {\n  const b = e.data,\n        d = {\n    portal: i.portal,\n    url: a(e.baseUrl),\n    origin: \"portal-item\"\n  },\n        h = b.items.find(e => e.name === n);\n\n  if (!h) {\n    const e = `The symbol name '${n}' could not be found`;\n    return Promise.reject(new s(\"symbolstyleutils:symbol-name-not-found\", e, {\n      symbolName: n\n    }));\n  }\n\n  let j = y(S(h, m), d),\n      g = h.thumbnail && h.thumbnail.href;\n  const w = h.thumbnail && h.thumbnail.imageData;\n  r() && (j = o(j), g = o(g));\n  const U = {\n    portal: i.portal,\n    url: a(l(j)),\n    origin: \"portal-item\"\n  };\n  return P(j, u).then(r => {\n    const o = \"cimRef\" === m ? N(r.data) : r.data,\n          s = f(o, U);\n\n    if (s && t(s)) {\n      if (g) {\n        const e = y(g, d);\n        s.thumbnail = new p({\n          url: e\n        });\n      } else w && (s.thumbnail = new p({\n        url: `data:image/png;base64,${w}`\n      }));\n\n      e.styleUrl ? s.styleOrigin = new c({\n        portal: i.portal,\n        styleUrl: e.styleUrl,\n        name: n\n      }) : e.styleName && (s.styleOrigin = new c({\n        portal: i.portal,\n        styleName: e.styleName,\n        name: n\n      }));\n    }\n\n    return s;\n  });\n}\n\nfunction N(e) {\n  return null === e || \"CIMSymbolReference\" === e.type ? e : {\n    type: \"CIMSymbolReference\",\n    symbol: e\n  };\n}\n\nfunction S(e, t) {\n  if (\"cimRef\" === t) return e.cimRef;\n  if (e.formatInfos && !u()) for (const r of e.formatInfos) if (\"gltf\" === r.type) return r.href;\n  return e.webRef;\n}\n\nfunction $(e) {\n  for (const t of e.typeKeywords) if (/^Esri.*Style$/.test(t) && \"Esri Style\" !== t) return t;\n}\n\nfunction E(e, t, r) {\n  const o = q.replace(/\\{SymbolName\\}/gi, e.name);\n  return P(o, r).then(e => {\n    const r = N(e.data);\n    return f(r, {\n      portal: t.portal,\n      url: a(l(o)),\n      origin: \"portal-item\"\n    });\n  });\n}\n\nfunction P(t, r) {\n  const o = {\n    responseType: \"json\",\n    query: {\n      f: \"json\"\n    },\n    ...r\n  };\n  return e(n(t), o);\n}\n\nconst D = \"esri_en\",\n      R = \"Style\",\n      q = \"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";\nexport { g as fetchStyle, U as fetchSymbolFromStyle, w as resolveWebStyleSymbol, $ as styleNameFromItem };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/symbols/support/styleUtils.js"],"names":["e","isSymbol3D","t","isDevEnvironment","r","adjustStaticAGOUrl","o","s","normalize","n","removeFile","l","urlToObject","a","i","m","enableWebStyleForceWOSR","u","f","y","fromJSON","c","p","b","d","P","then","data","baseUrl","styleUrl","h","portal","getDefault","url","user","username","j","fetchData","itemUrl","styleName","load","disableExtraQuery","query","D","R","queryItems","results","toLowerCase","Array","isArray","typeKeywords","some","type","owner","g","Promise","reject","w","name","E","U","origin","items","find","symbolName","S","thumbnail","href","imageData","N","styleOrigin","symbol","cimRef","formatInfos","webRef","$","test","q","replace","responseType","fetchStyle","fetchSymbolFromStyle","resolveWebStyleSymbol","styleNameFromItem"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as r,adjustStaticAGOUrl as o}from\"../../core/devEnvironmentUtils.js\";import s from\"../../core/Error.js\";import{normalize as n,removeFile as l,urlToObject as a}from\"../../core/urlUtils.js\";import i from\"../../portal/Portal.js\";import m from\"../../portal/PortalQueryParams.js\";import{enableWebStyleForceWOSR as u}from\"../../support/featureFlags.js\";import{f as y}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as f}from\"./jsonUtils.js\";import c from\"./StyleOrigin.js\";import p from\"./Thumbnail.js\";const b={};function d(e,t){return P(e,t).then((t=>({data:t.data,baseUrl:l(e),styleUrl:e})))}function h(e,t,r){const o=t.portal||i.getDefault();let s;const n=`${o.url} - ${o.user&&o.user.username} - ${e}`;return b[n]||(b[n]=j(e,o,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl,styleName:e})))),b[n]}function j(e,t,r){return t.load(r).then((()=>{const o=new m({disableExtraQuery:!0,query:`owner:${D} AND type:${R} AND typekeywords:\"${e}\"`});return t.queryItems(o,r)})).then((({results:t})=>{let o=null;const n=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){if(e.typeKeywords.some((e=>e.toLowerCase()===n))&&e.type===R&&e.owner===D){o=e;break}}if(!o)throw new s(\"symbolstyleutils:style-not-found\",`The style '${e}' could not be found`,{styleName:e});return o.load(r)}))}function g(e,t,r){return e.styleUrl?d(e.styleUrl,r):e.styleName?h(e.styleName,t,r):Promise.reject(new s(\"symbolstyleutils:style-url-and-name-missing\",\"Either styleUrl or styleName is required to resolve a style\"))}function w(e,t,r,o){return e.name?e.styleName&&\"Esri2DPointSymbolsStyle\"===e.styleName?E(e,t,o):g(e,t,o).then((s=>U(s,e.name,t,r,o))):Promise.reject(new s(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\"))}function U(e,n,i,m,u){const b=e.data,d={portal:i.portal,url:a(e.baseUrl),origin:\"portal-item\"},h=b.items.find((e=>e.name===n));if(!h){const e=`The symbol name '${n}' could not be found`;return Promise.reject(new s(\"symbolstyleutils:symbol-name-not-found\",e,{symbolName:n}))}let j=y(S(h,m),d),g=h.thumbnail&&h.thumbnail.href;const w=h.thumbnail&&h.thumbnail.imageData;r()&&(j=o(j),g=o(g));const U={portal:i.portal,url:a(l(j)),origin:\"portal-item\"};return P(j,u).then((r=>{const o=\"cimRef\"===m?N(r.data):r.data,s=f(o,U);if(s&&t(s)){if(g){const e=y(g,d);s.thumbnail=new p({url:e})}else w&&(s.thumbnail=new p({url:`data:image/png;base64,${w}`}));e.styleUrl?s.styleOrigin=new c({portal:i.portal,styleUrl:e.styleUrl,name:n}):e.styleName&&(s.styleOrigin=new c({portal:i.portal,styleName:e.styleName,name:n}))}return s}))}function N(e){return null===e||\"CIMSymbolReference\"===e.type?e:{type:\"CIMSymbolReference\",symbol:e}}function S(e,t){if(\"cimRef\"===t)return e.cimRef;if(e.formatInfos&&!u())for(const r of e.formatInfos)if(\"gltf\"===r.type)return r.href;return e.webRef}function $(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&\"Esri Style\"!==t)return t}function E(e,t,r){const o=q.replace(/\\{SymbolName\\}/gi,e.name);return P(o,r).then((e=>{const r=N(e.data);return f(r,{portal:t.portal,url:a(l(o)),origin:\"portal-item\"})}))}function P(t,r){const o={responseType:\"json\",query:{f:\"json\"},...r};return e(n(t),o)}const D=\"esri_en\",R=\"Style\",q=\"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";export{g as fetchStyle,U as fetchSymbolFromStyle,w as resolveWebStyleSymbol,$ as styleNameFromItem};\n"]},"metadata":{},"sourceType":"module"}