{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as r } from \"../core/maybe.js\";\nimport { makeAbsolute as e, makeRelative as t, isAbsolute as o, normalize as s, isDataProtocol as l, changeDomain as a, hasSameOrigin as u, appUrl as n } from \"../core/urlUtils.js\";\n\nfunction c(r, o) {\n  const s = o && o.url && o.url.path;\n\n  if (r && s && (r = e(r, s, {\n    preserveProtocolRelative: !0\n  }), o.portalItem && o.readResourcePaths)) {\n    const e = t(r, o.portalItem.itemUrl);\n    h.test(e) && o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path);\n  }\n\n  return I(r, o && o.portal);\n}\n\nfunction i(r, a, u = 0) {\n  if (!r) return r;\n  !o(r) && a && a.blockedRelativeUrls && a.blockedRelativeUrls.push(r);\n  let n = e(r);\n\n  if (a) {\n    const e = a.verifyItemRelativeUrls && a.verifyItemRelativeUrls.rootPath || a.url && a.url.path;\n\n    if (e) {\n      const o = I(e, a.portal);\n      n = t(I(n, a.portal), o, o), n !== r && a.verifyItemRelativeUrls && a.verifyItemRelativeUrls.writtenUrls.push(n);\n    }\n  }\n\n  return n = U(n, a && a.portal), o(n) && (n = s(n)), null != a && a.resources && null != a && a.portalItem && !o(n) && !l(n) && 0 === u && a.resources.toKeep.push({\n    resource: a.portalItem.resourceFromPath(n)\n  }), n;\n}\n\nfunction m(r, e, t) {\n  return c(r, t);\n}\n\nfunction p(r, e, t, o) {\n  const s = i(r, o);\n  void 0 !== s && (e[t] = s);\n}\n\nconst f = /\\/items\\/([^\\/]+)\\/resources\\//,\n      h = /^\\.\\/resources\\//;\n\nfunction v(e) {\n  const t = r(e) ? e.match(f) : null;\n  return r(t) ? t[1] : null;\n}\n\nfunction U(r, e) {\n  return e && !e.isPortal && e.urlKey && e.customBaseUrl ? a(r, `${e.urlKey}.${e.customBaseUrl}`, e.portalHostname) : r;\n}\n\nfunction I(r, e) {\n  if (!e || e.isPortal || !e.urlKey || !e.customBaseUrl) return r;\n  const t = `${e.urlKey}.${e.customBaseUrl}`;\n  return u(n, `${n.scheme}://${t}`) ? a(r, e.portalHostname, t) : a(r, t, e.portalHostname);\n}\n\nvar R = Object.freeze({\n  __proto__: null,\n  fromJSON: c,\n  toJSON: i,\n  read: m,\n  write: p,\n  itemIdFromResourceUrl: v\n});\nexport { c as f, v as i, R as p, m as r, i as t, p as w };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/chunks/persistableUrlUtils.js"],"names":["isSome","r","makeAbsolute","e","makeRelative","t","isAbsolute","o","normalize","s","isDataProtocol","l","changeDomain","a","hasSameOrigin","u","appUrl","n","c","url","path","preserveProtocolRelative","portalItem","readResourcePaths","itemUrl","h","test","push","resourceFromPath","I","portal","i","blockedRelativeUrls","verifyItemRelativeUrls","rootPath","writtenUrls","U","resources","toKeep","resource","m","p","f","v","match","isPortal","urlKey","customBaseUrl","portalHostname","scheme","R","Object","freeze","__proto__","fromJSON","toJSON","read","write","itemIdFromResourceUrl","w"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../core/maybe.js\";import{makeAbsolute as e,makeRelative as t,isAbsolute as o,normalize as s,isDataProtocol as l,changeDomain as a,hasSameOrigin as u,appUrl as n}from\"../core/urlUtils.js\";function c(r,o){const s=o&&o.url&&o.url.path;if(r&&s&&(r=e(r,s,{preserveProtocolRelative:!0}),o.portalItem&&o.readResourcePaths)){const e=t(r,o.portalItem.itemUrl);h.test(e)&&o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path)}return I(r,o&&o.portal)}function i(r,a,u=0){if(!r)return r;!o(r)&&a&&a.blockedRelativeUrls&&a.blockedRelativeUrls.push(r);let n=e(r);if(a){const e=a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.rootPath||a.url&&a.url.path;if(e){const o=I(e,a.portal);n=t(I(n,a.portal),o,o),n!==r&&a.verifyItemRelativeUrls&&a.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=U(n,a&&a.portal),o(n)&&(n=s(n)),null!=a&&a.resources&&null!=a&&a.portalItem&&!o(n)&&!l(n)&&0===u&&a.resources.toKeep.push({resource:a.portalItem.resourceFromPath(n)}),n}function m(r,e,t){return c(r,t)}function p(r,e,t,o){const s=i(r,o);void 0!==s&&(e[t]=s)}const f=/\\/items\\/([^\\/]+)\\/resources\\//,h=/^\\.\\/resources\\//;function v(e){const t=r(e)?e.match(f):null;return r(t)?t[1]:null}function U(r,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?a(r,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):r}function I(r,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return r;const t=`${e.urlKey}.${e.customBaseUrl}`;return u(n,`${n.scheme}://${t}`)?a(r,e.portalHostname,t):a(r,t,e.portalHostname)}var R=Object.freeze({__proto__:null,fromJSON:c,toJSON:i,read:m,write:p,itemIdFromResourceUrl:v});export{c as f,v as i,R as p,m as r,i as t,p as w};\n"]},"metadata":{},"sourceType":"module"}