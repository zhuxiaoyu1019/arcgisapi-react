{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { makeHandle as e } from \"../../../../core/handleUtils.js\";\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { Object3DStateID as i } from \"../../webgl-engine/lib/Object3DStateID.js\";\n\nclass h {\n  constructor(e) {\n    this.context = e, this.highlights = new Set();\n  }\n\n  get hasHighlights() {\n    return this.highlights.size > 0;\n  }\n\n  destroy() {\n    this.highlights = null;\n  }\n\n  add(t) {\n    const i = new s(t);\n    return this.highlights.add(i), this.enableSet(i), e(() => this.removeSet(i));\n  }\n\n  removeSet(e) {\n    this.disableSet(e), this.highlights.delete(e);\n  }\n\n  enableSet(e) {\n    e.enabled || (e.enabled = !0, this.context.forEachNode(t => this.enableSetForNode(e, t)));\n  }\n\n  enableSetForNode(e, t) {\n    if (!e.enabled) return;\n    const i = e.ids.get(t.id);\n    i && i.forEach(i => this.context.addHighlight(t, i, e.id));\n  }\n\n  disableSet(e) {\n    e.enabled && (e.enabled = !1, this.context.forEachNode(t => this.disableSetForNode(e, t)));\n  }\n\n  disableSetForNode(e, t) {\n    e.enabled || this.context.removeHighlight(t, e.id);\n  }\n\n  nodeAdded(e) {\n    this.highlights.forEach(t => this.enableSetForNode(t, e));\n  }\n\n  nodeRemoved(e) {\n    this.highlights.forEach(t => this.disableSetForNode(t, e));\n  }\n\n  removeAll() {\n    this.highlights.forEach(e => this.disableSet(e));\n  }\n\n}\n\nclass s {\n  constructor(e) {\n    this.id = new i(0), this.ids = new Map(), this.enabled = !1;\n\n    for (const i of e) t(i) && this.add(i.nodeId, i.pointId);\n  }\n\n  add(e, t) {\n    const i = this.ids.get(e);\n    i ? i.add(t) : this.ids.set(e, new Set([t]));\n  }\n\n}\n\nexport { h as PointHighlights };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/i3s/PointHighlights.js"],"names":["makeHandle","e","isSome","t","Object3DStateID","i","h","constructor","context","highlights","Set","hasHighlights","size","destroy","add","s","enableSet","removeSet","disableSet","delete","enabled","forEachNode","enableSetForNode","ids","get","id","forEach","addHighlight","disableSetForNode","removeHighlight","nodeAdded","nodeRemoved","removeAll","Map","nodeId","pointId","set","PointHighlights"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{makeHandle as e}from\"../../../../core/handleUtils.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{Object3DStateID as i}from\"../../webgl-engine/lib/Object3DStateID.js\";class h{constructor(e){this.context=e,this.highlights=new Set}get hasHighlights(){return this.highlights.size>0}destroy(){this.highlights=null}add(t){const i=new s(t);return this.highlights.add(i),this.enableSet(i),e((()=>this.removeSet(i)))}removeSet(e){this.disableSet(e),this.highlights.delete(e)}enableSet(e){e.enabled||(e.enabled=!0,this.context.forEachNode((t=>this.enableSetForNode(e,t))))}enableSetForNode(e,t){if(!e.enabled)return;const i=e.ids.get(t.id);i&&i.forEach((i=>this.context.addHighlight(t,i,e.id)))}disableSet(e){e.enabled&&(e.enabled=!1,this.context.forEachNode((t=>this.disableSetForNode(e,t))))}disableSetForNode(e,t){e.enabled||this.context.removeHighlight(t,e.id)}nodeAdded(e){this.highlights.forEach((t=>this.enableSetForNode(t,e)))}nodeRemoved(e){this.highlights.forEach((t=>this.disableSetForNode(t,e)))}removeAll(){this.highlights.forEach((e=>this.disableSet(e)))}}class s{constructor(e){this.id=new i(0),this.ids=new Map,this.enabled=!1;for(const i of e)t(i)&&this.add(i.nodeId,i.pointId)}add(e,t){const i=this.ids.get(e);i?i.add(t):this.ids.set(e,new Set([t]))}}export{h as PointHighlights};\n"]},"metadata":{},"sourceType":"module"}