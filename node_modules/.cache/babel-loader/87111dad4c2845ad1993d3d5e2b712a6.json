{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { eventKey as t } from \"../../core/events.js\";\nimport { init as i } from \"../../core/watchUtils.js\";\nimport { aliasOf as r } from \"../../core/accessorSupport/decorators/aliasOf.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport { subclass as o } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport s from \"../Widget.js\";\nimport n from \"./FeatureMedia/FeatureMediaViewModel.js\";\nimport l from \"./support/FeatureElementInfo.js\";\nimport { shouldOpenInNewTab as d } from \"./support/featureUtils.js\";\nimport { loadChartsModule as c, getColorSet as m } from \"../support/chartUtils.js\";\nimport { isDarkTheme as u, isRTL as h } from \"../support/widgetUtils.js\";\nimport { messageBundle as p } from \"../support/decorators/messageBundle.js\";\nimport { tsx as f } from \"../support/jsxFactory.js\";\nconst v = {\n  base: \"esri-feature-media\",\n  mediaContainer: \"esri-feature-media__container\",\n  mediaItemContainer: \"esri-feature-media__item-container\",\n  mediaItem: \"esri-feature-media__item\",\n  mediaItemTitle: \"esri-feature-media__item-title\",\n  mediaItemCaption: \"esri-feature-media__item-caption\",\n  mediaPrevious: \"esri-feature-media__previous\",\n  mediaPreviousIconLTR: \"esri-feature-media__previous-icon\",\n  mediaPreviousIconRTL: \"esri-feature-media__previous-icon--rtl\",\n  mediaNext: \"esri-feature-media__next\",\n  mediaNextIconLTR: \"esri-feature-media__next-icon\",\n  mediaNextIconRTL: \"esri-feature-media__next-icon--rtl\",\n  mediaChart: \"esri-feature-media__chart\",\n  mediaButton: \"esri-feature-media__button\",\n  mediaIcon: \"esri-feature-media__icon\",\n  iconLeftTriangleArrow: \"esri-icon-left-triangle-arrow\",\n  iconRightTriangleArrow: \"esri-icon-right-triangle-arrow\"\n},\n      _ = .05,\n      I = .95,\n      M = 15;\nlet w = class extends s {\n  constructor(e, t) {\n    super(e, t), this._refreshTimer = null, this._refreshIntervalInfo = null, this._featureElementInfo = null, this.attributes = null, this.activeMediaInfoIndex = null, this.description = null, this.fieldInfoMap = null, this.layer = null, this.mediaInfos = null, this.popupTemplate = null, this.relatedInfos = null, this.title = null, this.viewModel = new n(), this.messages = null;\n  }\n\n  initialize() {\n    this._featureElementInfo = new l(), this.own(i(this, [\"viewModel.activeMediaInfo\", \"viewModel.activeMediaInfoIndex\"], () => this._setupMediaRefreshTimer()), i(this, [\"viewModel.description\", \"viewModel.title\"], () => this._setupFeatureElementInfo()));\n  }\n\n  destroy() {\n    this._clearMediaRefreshTimer(), this._featureElementInfo.destroy();\n  }\n\n  render() {\n    var e;\n    return f(\"div\", {\n      bind: this,\n      class: v.base,\n      onkeyup: this._handleMediaKeyup\n    }, null == (e = this._featureElementInfo) ? void 0 : e.render(), this.renderMedia());\n  }\n\n  renderMedia() {\n    const {\n      formattedMediaInfoCount: e\n    } = this.viewModel;\n    return e ? f(\"div\", {\n      key: \"media-element-container\",\n      class: v.mediaContainer\n    }, this.renderMediaPageButton(\"previous\"), this.renderMediaInfo(), this.renderMediaPageButton(\"next\")) : null;\n  }\n\n  renderImageMediaInfo(e) {\n    const {\n      _refreshIntervalInfo: t\n    } = this,\n          {\n      activeMediaInfoIndex: i,\n      formattedMediaInfoCount: r\n    } = this.viewModel,\n          {\n      value: a,\n      refreshInterval: o,\n      altText: s,\n      title: n,\n      type: l\n    } = e,\n          {\n      sourceURL: c,\n      linkURL: m\n    } = a,\n          u = d(m) ? \"_blank\" : \"_self\",\n          h = \"_blank\" === u ? \"noreferrer\" : \"\",\n          p = o ? t : null,\n          v = p ? p.timestamp : 0,\n          _ = p ? p.sourceURL : c,\n          I = f(\"img\", {\n      alt: s || n,\n      key: `media-${l}-${i}-${r}-${v}`,\n      src: _\n    }),\n          M = m ? f(\"a\", {\n      title: n,\n      href: m,\n      rel: h,\n      target: u\n    }, I) : null;\n\n    return M || I;\n  }\n\n  renderChartMediaInfo(e) {\n    const {\n      activeMediaInfoIndex: t,\n      formattedMediaInfoCount: i\n    } = this.viewModel;\n    return f(\"div\", {\n      key: `media-${e.type}-${t}-${i}`,\n      bind: this,\n      class: v.mediaChart,\n      afterCreate: this._getChartDependencies\n    });\n  }\n\n  renderMediaInfoType() {\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    return e ? \"image\" === e.type ? this.renderImageMediaInfo(e) : -1 !== e.type.indexOf(\"chart\") ? this.renderChartMediaInfo(e) : null : null;\n  }\n\n  renderMediaInfo() {\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    if (!e) return null;\n    const t = e.title ? f(\"div\", {\n      key: \"media-title\",\n      class: v.mediaItemTitle,\n      innerHTML: e.title\n    }) : null,\n          i = e.caption ? f(\"div\", {\n      key: \"media-caption\",\n      class: v.mediaItemCaption,\n      innerHTML: e.caption\n    }) : null;\n    return f(\"div\", {\n      key: \"media-container\",\n      class: v.mediaItemContainer\n    }, f(\"div\", {\n      key: \"media-item-container\",\n      class: v.mediaItem\n    }, this.renderMediaInfoType()), t, i);\n  }\n\n  renderMediaPageButton(e) {\n    if (this.viewModel.formattedMediaInfoCount < 2) return null;\n    const t = \"previous\" === e,\n          i = t ? this.messages.previous : this.messages.next,\n          r = t ? this.classes(v.mediaButton, v.mediaPrevious) : this.classes(v.mediaButton, v.mediaNext),\n          a = t ? this.classes(v.mediaIcon, v.mediaPreviousIconLTR, v.iconLeftTriangleArrow) : this.classes(v.mediaIcon, v.mediaNextIconLTR, v.iconRightTriangleArrow),\n          o = t ? this.classes(v.mediaIcon, v.mediaPreviousIconRTL, v.iconRightTriangleArrow) : this.classes(v.mediaIcon, v.mediaNextIconRTL, v.iconLeftTriangleArrow),\n          s = t ? \"media-previous\" : \"media-next\",\n          n = t ? this._previous : this._next;\n    return f(\"button\", {\n      type: \"button\",\n      key: s,\n      title: i,\n      \"aria-label\": i,\n      tabIndex: 0,\n      class: r,\n      bind: this,\n      onclick: n\n    }, f(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: a\n    }), f(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: o\n    }));\n  }\n\n  _setupFeatureElementInfo() {\n    const {\n      description: e,\n      title: t\n    } = this;\n\n    this._featureElementInfo.set({\n      description: e,\n      title: t\n    });\n  }\n\n  _next() {\n    this.viewModel.next();\n  }\n\n  _previous() {\n    this.viewModel.previous();\n  }\n\n  async _getChartDependencies(e) {\n    const t = await c(),\n          {\n      activeMediaInfo: i\n    } = this.viewModel;\n\n    this._renderChart({\n      chartDiv: e,\n      mediaInfo: i,\n      chartsModule: t\n    });\n  }\n\n  _handleMediaKeyup(e) {\n    const i = t(e);\n    \"ArrowLeft\" === i && (e.stopPropagation(), this.viewModel.previous()), \"ArrowRight\" === i && (e.stopPropagation(), this.viewModel.next());\n  }\n\n  _renderChart(e) {\n    const {\n      chartsModule: t,\n      chartDiv: i,\n      mediaInfo: r\n    } = e,\n          {\n      value: a,\n      type: o\n    } = r,\n          {\n      am4core: s\n    } = t,\n          n = m(s);\n\n    function l(e) {\n      e instanceof s.ColorSet && n && (e.list = n);\n    }\n\n    u() && s.useTheme(t.am4themes_dark), s.useTheme(t.am4themes_animated), s.useTheme(l);\n    const d = \"pie-chart\" === o ? this._createPieChart(e) : this._createXYChart(e);\n    i.setAttribute(\"aria-label\", r.altText || r.title), d.data = a.series.map(e => ({\n      tooltip: e.tooltip,\n      value: e.value\n    })).filter(e => \"pie-chart\" !== o || e.value > 0);\n  }\n\n  _customizeChartTooltip(e, t) {\n    e.label.wrap = !0, e.label.maxWidth = 200, e.autoTextColor = !1, e.getFillFromObject = !1, e.label.fill = t.color(\"#ffffff\"), e.background.fill = t.color({\n      r: 0,\n      g: 0,\n      b: 0,\n      a: .7\n    });\n  }\n\n  _createPieChart(e) {\n    const {\n      chartDiv: t,\n      chartsModule: i\n    } = e,\n          {\n      am4core: r,\n      am4charts: a\n    } = i,\n          o = r.create(t, a.PieChart);\n    o.rtl = h();\n    const s = o.series.push(new a.PieSeries());\n    return s.labels.template.disabled = !0, s.ticks.template.disabled = !0, s.dataFields.value = \"value\", s.dataFields.category = \"tooltip\", this._customizeChartTooltip(s.tooltip, r), o;\n  }\n\n  _getMinSeriesValue(e) {\n    let t = 0;\n    return e.forEach(e => t = Math.min(e.value, t)), t;\n  }\n\n  _createColumnChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r\n    } = t,\n          {\n      value: a\n    } = r,\n          {\n      am4core: o,\n      am4charts: s\n    } = i,\n          n = e.xAxes.push(new s.CategoryAxis());\n    n.dataFields.category = \"tooltip\", n.renderer.labels.template.disabled = !0, this._customizeChartTooltip(n.tooltip, o), n.tooltip.events.on(\"sizechanged\", () => {\n      n.tooltip.dy = -n.tooltip.contentHeight;\n    });\n    const l = e.yAxes.push(new s.ValueAxis()),\n          d = l.renderer.labels.template;\n    l.renderer.minLabelPosition = _, l.renderer.maxLabelPosition = I, l.min = this._getMinSeriesValue(a.series), this._customizeChartTooltip(l.tooltip, o), d.wrap = !0;\n    const c = e.series.push(new s.ColumnSeries());\n    c.dataFields.valueY = \"value\", c.dataFields.categoryX = \"tooltip\", e.cursor = new s.XYCursor(), a.series.length > M && (e.scrollbarX = new o.Scrollbar());\n  }\n\n  _createBarChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r\n    } = t,\n          {\n      value: a\n    } = r,\n          {\n      am4core: o,\n      am4charts: s\n    } = i,\n          n = e.yAxes.push(new s.CategoryAxis());\n    n.dataFields.category = \"tooltip\", n.renderer.inversed = !0, n.renderer.labels.template.disabled = !0, this._customizeChartTooltip(n.tooltip, o), n.tooltip.events.on(\"sizechanged\", () => {\n      n.tooltip.dx = n.tooltip.contentWidth;\n    });\n    const l = e.xAxes.push(new s.ValueAxis()),\n          d = l.renderer.labels.template;\n    l.renderer.minLabelPosition = _, l.renderer.maxLabelPosition = I, l.min = this._getMinSeriesValue(a.series), this._customizeChartTooltip(l.tooltip, o), d.wrap = !0;\n    const c = e.series.push(new s.ColumnSeries());\n    c.dataFields.valueX = \"value\", c.dataFields.categoryY = \"tooltip\", e.cursor = new s.XYCursor(), a.series.length > M && (e.scrollbarY = new o.Scrollbar());\n  }\n\n  _createLineChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r\n    } = t,\n          {\n      value: a\n    } = r,\n          {\n      am4core: o,\n      am4charts: s\n    } = i,\n          n = e.xAxes.push(new s.CategoryAxis());\n    n.dataFields.category = \"tooltip\", n.renderer.labels.template.disabled = !0, this._customizeChartTooltip(n.tooltip, o), n.tooltip.events.on(\"sizechanged\", () => {\n      n.tooltip.dy = -n.tooltip.contentHeight;\n    });\n    const l = e.yAxes.push(new s.ValueAxis()),\n          d = l.renderer.labels.template;\n    l.renderer.minLabelPosition = _, l.renderer.maxLabelPosition = I, l.min = this._getMinSeriesValue(a.series), this._customizeChartTooltip(l.tooltip, o), d.wrap = !0;\n    const c = e.series.push(new s.LineSeries());\n    c.dataFields.categoryX = \"tooltip\", c.dataFields.valueY = \"value\", e.cursor = new s.XYCursor(), a.series.length > M && (e.scrollbarX = new o.Scrollbar());\n  }\n\n  _createXYChart(e) {\n    const {\n      chartDiv: t,\n      chartsModule: i,\n      mediaInfo: r\n    } = e,\n          {\n      type: a\n    } = r,\n          {\n      am4core: o,\n      am4charts: s\n    } = i,\n          n = o.create(t, s.XYChart);\n    return n.rtl = h(), \"column-chart\" === a && this._createColumnChart(n, e), \"bar-chart\" === a && this._createBarChart(n, e), \"line-chart\" === a && this._createLineChart(n, e), n;\n  }\n\n  _clearMediaRefreshTimer() {\n    const {\n      _refreshTimer: e\n    } = this;\n    e && (clearTimeout(e), this._refreshTimer = null);\n  }\n\n  _updateMediaInfoTimestamp(e) {\n    const t = Date.now();\n    this._refreshIntervalInfo = {\n      timestamp: t,\n      sourceURL: this._getImageSource(e, t)\n    }, this.scheduleRender();\n  }\n\n  _setupMediaRefreshTimer() {\n    this._clearMediaRefreshTimer();\n\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    e && \"image\" === e.type && e.refreshInterval && this._setRefreshTimeout(e);\n  }\n\n  _setRefreshTimeout(e) {\n    const {\n      refreshInterval: t,\n      value: i\n    } = e;\n    if (!t) return;\n    const r = 6e4 * t;\n\n    this._updateMediaInfoTimestamp(i.sourceURL);\n\n    const a = setInterval(() => {\n      this._updateMediaInfoTimestamp(i.sourceURL);\n    }, r);\n    this._refreshTimer = a;\n  }\n\n  _getImageSource(e, t) {\n    const i = -1 !== e.indexOf(\"?\") ? \"&\" : \"?\",\n          [r, a = \"\"] = e.split(\"#\");\n    return `${r}${i}timestamp=${t}${a ? \"#\" : \"\"}${a}`;\n  }\n\n};\ne([r(\"viewModel.attributes\")], w.prototype, \"attributes\", void 0), e([r(\"viewModel.activeMediaInfoIndex\")], w.prototype, \"activeMediaInfoIndex\", void 0), e([r(\"viewModel.description\")], w.prototype, \"description\", void 0), e([r(\"viewModel.fieldInfoMap\")], w.prototype, \"fieldInfoMap\", void 0), e([r(\"viewModel.layer\")], w.prototype, \"layer\", void 0), e([r(\"viewModel.mediaInfos\")], w.prototype, \"mediaInfos\", void 0), e([r(\"viewModel.popupTemplate\")], w.prototype, \"popupTemplate\", void 0), e([r(\"viewModel.relatedInfos\")], w.prototype, \"relatedInfos\", void 0), e([r(\"viewModel.title\")], w.prototype, \"title\", void 0), e([a({\n  type: n\n})], w.prototype, \"viewModel\", void 0), e([a(), p(\"esri/widgets/Feature/t9n/Feature\")], w.prototype, \"messages\", void 0), w = e([o(\"esri.widgets.Feature.FeatureMedia\")], w);\nvar g = w;\nexport default g;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/widgets/Feature/FeatureMedia.js"],"names":["_","e","eventKey","t","init","i","aliasOf","r","property","a","subclass","o","s","n","l","shouldOpenInNewTab","d","loadChartsModule","c","getColorSet","m","isDarkTheme","u","isRTL","h","messageBundle","p","tsx","f","v","base","mediaContainer","mediaItemContainer","mediaItem","mediaItemTitle","mediaItemCaption","mediaPrevious","mediaPreviousIconLTR","mediaPreviousIconRTL","mediaNext","mediaNextIconLTR","mediaNextIconRTL","mediaChart","mediaButton","mediaIcon","iconLeftTriangleArrow","iconRightTriangleArrow","I","M","w","constructor","_refreshTimer","_refreshIntervalInfo","_featureElementInfo","attributes","activeMediaInfoIndex","description","fieldInfoMap","layer","mediaInfos","popupTemplate","relatedInfos","title","viewModel","messages","initialize","own","_setupMediaRefreshTimer","_setupFeatureElementInfo","destroy","_clearMediaRefreshTimer","render","bind","class","onkeyup","_handleMediaKeyup","renderMedia","formattedMediaInfoCount","key","renderMediaPageButton","renderMediaInfo","renderImageMediaInfo","value","refreshInterval","altText","type","sourceURL","linkURL","timestamp","alt","src","href","rel","target","renderChartMediaInfo","afterCreate","_getChartDependencies","renderMediaInfoType","activeMediaInfo","indexOf","innerHTML","caption","previous","next","classes","_previous","_next","tabIndex","onclick","set","_renderChart","chartDiv","mediaInfo","chartsModule","stopPropagation","am4core","ColorSet","list","useTheme","am4themes_dark","am4themes_animated","_createPieChart","_createXYChart","setAttribute","data","series","map","tooltip","filter","_customizeChartTooltip","label","wrap","maxWidth","autoTextColor","getFillFromObject","fill","color","background","g","b","am4charts","create","PieChart","rtl","push","PieSeries","labels","template","disabled","ticks","dataFields","category","_getMinSeriesValue","forEach","Math","min","_createColumnChart","xAxes","CategoryAxis","renderer","events","on","dy","contentHeight","yAxes","ValueAxis","minLabelPosition","maxLabelPosition","ColumnSeries","valueY","categoryX","cursor","XYCursor","length","scrollbarX","Scrollbar","_createBarChart","inversed","dx","contentWidth","valueX","categoryY","scrollbarY","_createLineChart","LineSeries","XYChart","clearTimeout","_updateMediaInfoTimestamp","Date","now","_getImageSource","scheduleRender","_setRefreshTimeout","setInterval","split","prototype"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{eventKey as t}from\"../../core/events.js\";import{init as i}from\"../../core/watchUtils.js\";import{aliasOf as r}from\"../../core/accessorSupport/decorators/aliasOf.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../Widget.js\";import n from\"./FeatureMedia/FeatureMediaViewModel.js\";import l from\"./support/FeatureElementInfo.js\";import{shouldOpenInNewTab as d}from\"./support/featureUtils.js\";import{loadChartsModule as c,getColorSet as m}from\"../support/chartUtils.js\";import{isDarkTheme as u,isRTL as h}from\"../support/widgetUtils.js\";import{messageBundle as p}from\"../support/decorators/messageBundle.js\";import{tsx as f}from\"../support/jsxFactory.js\";const v={base:\"esri-feature-media\",mediaContainer:\"esri-feature-media__container\",mediaItemContainer:\"esri-feature-media__item-container\",mediaItem:\"esri-feature-media__item\",mediaItemTitle:\"esri-feature-media__item-title\",mediaItemCaption:\"esri-feature-media__item-caption\",mediaPrevious:\"esri-feature-media__previous\",mediaPreviousIconLTR:\"esri-feature-media__previous-icon\",mediaPreviousIconRTL:\"esri-feature-media__previous-icon--rtl\",mediaNext:\"esri-feature-media__next\",mediaNextIconLTR:\"esri-feature-media__next-icon\",mediaNextIconRTL:\"esri-feature-media__next-icon--rtl\",mediaChart:\"esri-feature-media__chart\",mediaButton:\"esri-feature-media__button\",mediaIcon:\"esri-feature-media__icon\",iconLeftTriangleArrow:\"esri-icon-left-triangle-arrow\",iconRightTriangleArrow:\"esri-icon-right-triangle-arrow\"},_=.05,I=.95,M=15;let w=class extends s{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new n,this.messages=null}initialize(){this._featureElementInfo=new l,this.own(i(this,[\"viewModel.activeMediaInfo\",\"viewModel.activeMediaInfoIndex\"],(()=>this._setupMediaRefreshTimer())),i(this,[\"viewModel.description\",\"viewModel.title\"],(()=>this._setupFeatureElementInfo())))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return f(\"div\",{bind:this,class:v.base,onkeyup:this._handleMediaKeyup},null==(e=this._featureElementInfo)?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?f(\"div\",{key:\"media-element-container\",class:v.mediaContainer},this.renderMediaPageButton(\"previous\"),this.renderMediaInfo(),this.renderMediaPageButton(\"next\")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:a,refreshInterval:o,altText:s,title:n,type:l}=e,{sourceURL:c,linkURL:m}=a,u=d(m)?\"_blank\":\"_self\",h=\"_blank\"===u?\"noreferrer\":\"\",p=o?t:null,v=p?p.timestamp:0,_=p?p.sourceURL:c,I=f(\"img\",{alt:s||n,key:`media-${l}-${i}-${r}-${v}`,src:_}),M=m?f(\"a\",{title:n,href:m,rel:h,target:u},I):null;return M||I}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return f(\"div\",{key:`media-${e.type}-${t}-${i}`,bind:this,class:v.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?\"image\"===e.type?this.renderImageMediaInfo(e):-1!==e.type.indexOf(\"chart\")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?f(\"div\",{key:\"media-title\",class:v.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?f(\"div\",{key:\"media-caption\",class:v.mediaItemCaption,innerHTML:e.caption}):null;return f(\"div\",{key:\"media-container\",class:v.mediaItemContainer},f(\"div\",{key:\"media-item-container\",class:v.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=\"previous\"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(v.mediaButton,v.mediaPrevious):this.classes(v.mediaButton,v.mediaNext),a=t?this.classes(v.mediaIcon,v.mediaPreviousIconLTR,v.iconLeftTriangleArrow):this.classes(v.mediaIcon,v.mediaNextIconLTR,v.iconRightTriangleArrow),o=t?this.classes(v.mediaIcon,v.mediaPreviousIconRTL,v.iconRightTriangleArrow):this.classes(v.mediaIcon,v.mediaNextIconRTL,v.iconLeftTriangleArrow),s=t?\"media-previous\":\"media-next\",n=t?this._previous:this._next;return f(\"button\",{type:\"button\",key:s,title:i,\"aria-label\":i,tabIndex:0,class:r,bind:this,onclick:n},f(\"span\",{\"aria-hidden\":\"true\",class:a}),f(\"span\",{\"aria-hidden\":\"true\",class:o}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getChartDependencies(e){const t=await c(),{activeMediaInfo:i}=this.viewModel;this._renderChart({chartDiv:e,mediaInfo:i,chartsModule:t})}_handleMediaKeyup(e){const i=t(e);\"ArrowLeft\"===i&&(e.stopPropagation(),this.viewModel.previous()),\"ArrowRight\"===i&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{chartsModule:t,chartDiv:i,mediaInfo:r}=e,{value:a,type:o}=r,{am4core:s}=t,n=m(s);function l(e){e instanceof s.ColorSet&&n&&(e.list=n)}u()&&s.useTheme(t.am4themes_dark),s.useTheme(t.am4themes_animated),s.useTheme(l);const d=\"pie-chart\"===o?this._createPieChart(e):this._createXYChart(e);i.setAttribute(\"aria-label\",r.altText||r.title),d.data=a.series.map((e=>({tooltip:e.tooltip,value:e.value}))).filter((e=>\"pie-chart\"!==o||e.value>0))}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color(\"#ffffff\"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:a}=i,o=r.create(t,a.PieChart);o.rtl=h();const s=o.series.push(new a.PieSeries);return s.labels.template.disabled=!0,s.ticks.template.disabled=!0,s.dataFields.value=\"value\",s.dataFields.category=\"tooltip\",this._customizeChartTooltip(s.tooltip,r),o}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.xAxes.push(new s.CategoryAxis);n.dataFields.category=\"tooltip\",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on(\"sizechanged\",(()=>{n.tooltip.dy=-n.tooltip.contentHeight}));const l=e.yAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_,l.renderer.maxLabelPosition=I,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueY=\"value\",c.dataFields.categoryX=\"tooltip\",e.cursor=new s.XYCursor,a.series.length>M&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.yAxes.push(new s.CategoryAxis);n.dataFields.category=\"tooltip\",n.renderer.inversed=!0,n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on(\"sizechanged\",(()=>{n.tooltip.dx=n.tooltip.contentWidth}));const l=e.xAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_,l.renderer.maxLabelPosition=I,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.ColumnSeries);c.dataFields.valueX=\"value\",c.dataFields.categoryY=\"tooltip\",e.cursor=new s.XYCursor,a.series.length>M&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:a}=r,{am4core:o,am4charts:s}=i,n=e.xAxes.push(new s.CategoryAxis);n.dataFields.category=\"tooltip\",n.renderer.labels.template.disabled=!0,this._customizeChartTooltip(n.tooltip,o),n.tooltip.events.on(\"sizechanged\",(()=>{n.tooltip.dy=-n.tooltip.contentHeight}));const l=e.yAxes.push(new s.ValueAxis),d=l.renderer.labels.template;l.renderer.minLabelPosition=_,l.renderer.maxLabelPosition=I,l.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(l.tooltip,o),d.wrap=!0;const c=e.series.push(new s.LineSeries);c.dataFields.categoryX=\"tooltip\",c.dataFields.valueY=\"value\",e.cursor=new s.XYCursor,a.series.length>M&&(e.scrollbarX=new o.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:a}=r,{am4core:o,am4charts:s}=i,n=o.create(t,s.XYChart);return n.rtl=h(),\"column-chart\"===a&&this._createColumnChart(n,e),\"bar-chart\"===a&&this._createBarChart(n,e),\"line-chart\"===a&&this._createLineChart(n,e),n}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&\"image\"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const a=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL)}),r);this._refreshTimer=a}_getImageSource(e,t){const i=-1!==e.indexOf(\"?\")?\"&\":\"?\",[r,a=\"\"]=e.split(\"#\");return`${r}${i}timestamp=${t}${a?\"#\":\"\"}${a}`}};e([r(\"viewModel.attributes\")],w.prototype,\"attributes\",void 0),e([r(\"viewModel.activeMediaInfoIndex\")],w.prototype,\"activeMediaInfoIndex\",void 0),e([r(\"viewModel.description\")],w.prototype,\"description\",void 0),e([r(\"viewModel.fieldInfoMap\")],w.prototype,\"fieldInfoMap\",void 0),e([r(\"viewModel.layer\")],w.prototype,\"layer\",void 0),e([r(\"viewModel.mediaInfos\")],w.prototype,\"mediaInfos\",void 0),e([r(\"viewModel.popupTemplate\")],w.prototype,\"popupTemplate\",void 0),e([r(\"viewModel.relatedInfos\")],w.prototype,\"relatedInfos\",void 0),e([r(\"viewModel.title\")],w.prototype,\"title\",void 0),e([a({type:n})],w.prototype,\"viewModel\",void 0),e([a(),p(\"esri/widgets/Feature/t9n/Feature\")],w.prototype,\"messages\",void 0),w=e([o(\"esri.widgets.Feature.FeatureMedia\")],w);var g=w;export default g;\n"]},"metadata":{},"sourceType":"module"}