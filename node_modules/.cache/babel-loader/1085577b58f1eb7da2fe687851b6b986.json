{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { ReadLinearDepth as e } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { multipassTerrainTest as a } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { ColorConversion as r } from \"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";\nimport { glsl as i } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as d } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\n\nfunction o(o) {\n  const t = new d();\n  return t.extensions.add(\"GL_OES_standard_derivatives\"), t.attributes.add(\"position\", \"vec3\"), t.attributes.add(\"uv0\", \"vec2\"), t.vertex.uniforms.add(\"proj\", \"mat4\").add(\"view\", \"mat4\"), t.varyings.add(\"vUV\", \"vec2\"), o.multipassTerrainEnabled && t.varyings.add(\"depth\", \"float\"), t.vertex.code.add(i`\n    void main(void) {\n      vUV = uv0;\n      ${o.multipassTerrainEnabled ? \"depth = (view * vec4(position, 1.0)).z;\" : \"\"}\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  `), o.multipassTerrainEnabled && (t.fragment.include(e), t.include(a, o)), t.fragment.uniforms.add(\"size\", \"vec2\").add(\"color1\", \"vec4\").add(\"color2\", \"vec4\"), t.fragment.include(r), t.fragment.code.add(i`\n    void main() {\n      ${o.multipassTerrainEnabled ? \"terrainDepthTest(gl_FragCoord, depth);\" : \"\"}\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ${o.OITEnabled ? \"gl_FragColor = premultiplyAlpha(gl_FragColor);\" : \"\"}\n    }\n  `), t;\n}\n\nvar t = Object.freeze({\n  __proto__: null,\n  build: o\n});\nexport { t as C, o as b };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/chunks/CheckerBoard.glsl.js"],"names":["ReadLinearDepth","e","multipassTerrainTest","a","ColorConversion","r","glsl","i","ShaderBuilder","d","o","t","extensions","add","attributes","vertex","uniforms","varyings","multipassTerrainEnabled","code","fragment","include","OITEnabled","Object","freeze","__proto__","build","C","b"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,eAAe,IAAIC,CAA1B,QAAgC,4EAAhC;AAA6G,SAAOC,oBAAoB,IAAIC,CAA/B,QAAqC,kFAArC;AAAwH,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,0EAAhC;AAA2G,SAAOC,IAAI,IAAIC,CAAf,QAAqB,2DAArB;AAAiF,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,8DAA9B;;AAA6F,SAASC,CAAT,CAAWA,CAAX,EAAa;AAAC,QAAMC,CAAC,GAAC,IAAIF,CAAJ,EAAR;AAAc,SAAOE,CAAC,CAACC,UAAF,CAAaC,GAAb,CAAiB,6BAAjB,GAAgDF,CAAC,CAACG,UAAF,CAAaD,GAAb,CAAiB,UAAjB,EAA4B,MAA5B,CAAhD,EAAoFF,CAAC,CAACG,UAAF,CAAaD,GAAb,CAAiB,KAAjB,EAAuB,MAAvB,CAApF,EAAmHF,CAAC,CAACI,MAAF,CAASC,QAAT,CAAkBH,GAAlB,CAAsB,MAAtB,EAA6B,MAA7B,EAAqCA,GAArC,CAAyC,MAAzC,EAAgD,MAAhD,CAAnH,EAA2KF,CAAC,CAACM,QAAF,CAAWJ,GAAX,CAAe,KAAf,EAAqB,MAArB,CAA3K,EAAwMH,CAAC,CAACQ,uBAAF,IAA2BP,CAAC,CAACM,QAAF,CAAWJ,GAAX,CAAe,OAAf,EAAuB,OAAvB,CAAnO,EAAmQF,CAAC,CAACI,MAAF,CAASI,IAAT,CAAcN,GAAd,CAAkBN,CAAE;AACxzB;AACA;AACA,QAAQG,CAAC,CAACQ,uBAAF,GAA0B,yCAA1B,GAAoE,EAAG;AAC/E;AACA;AACA,GANoyB,CAAnQ,EAM5hBR,CAAC,CAACQ,uBAAF,KAA4BP,CAAC,CAACS,QAAF,CAAWC,OAAX,CAAmBpB,CAAnB,GAAsBU,CAAC,CAACU,OAAF,CAAUlB,CAAV,EAAYO,CAAZ,CAAlD,CAN4hB,EAM1dC,CAAC,CAACS,QAAF,CAAWJ,QAAX,CAAoBH,GAApB,CAAwB,MAAxB,EAA+B,MAA/B,EAAuCA,GAAvC,CAA2C,QAA3C,EAAoD,MAApD,EAA4DA,GAA5D,CAAgE,QAAhE,EAAyE,MAAzE,CAN0d,EAMzYF,CAAC,CAACS,QAAF,CAAWC,OAAX,CAAmBhB,CAAnB,CANyY,EAMnXM,CAAC,CAACS,QAAF,CAAWD,IAAX,CAAgBN,GAAhB,CAAoBN,CAAE;AACpM;AACA,QAAQG,CAAC,CAACQ,uBAAF,GAA0B,wCAA1B,GAAmE,EAAG;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQR,CAAC,CAACY,UAAF,GAAa,gDAAb,GAA8D,EAAG;AACzE;AACA,GAb8K,CANmX,EAmB5hBX,CAnBqhB;AAmBnhB;;AAAA,IAAIA,CAAC,GAACY,MAAM,CAACC,MAAP,CAAc;AAACC,EAAAA,SAAS,EAAC,IAAX;AAAgBC,EAAAA,KAAK,EAAChB;AAAtB,CAAd,CAAN;AAA8C,SAAOC,CAAC,IAAIgB,CAAZ,EAAcjB,CAAC,IAAIkB,CAAnB","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ReadLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ColorConversion as r}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as i}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as d}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(o){const t=new d;return t.extensions.add(\"GL_OES_standard_derivatives\"),t.attributes.add(\"position\",\"vec3\"),t.attributes.add(\"uv0\",\"vec2\"),t.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),t.varyings.add(\"vUV\",\"vec2\"),o.multipassTerrainEnabled&&t.varyings.add(\"depth\",\"float\"),t.vertex.code.add(i`\n    void main(void) {\n      vUV = uv0;\n      ${o.multipassTerrainEnabled?\"depth = (view * vec4(position, 1.0)).z;\":\"\"}\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  `),o.multipassTerrainEnabled&&(t.fragment.include(e),t.include(a,o)),t.fragment.uniforms.add(\"size\",\"vec2\").add(\"color1\",\"vec4\").add(\"color2\",\"vec4\"),t.fragment.include(r),t.fragment.code.add(i`\n    void main() {\n      ${o.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ${o.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n  `),t}var t=Object.freeze({__proto__:null,build:o});export{t as C,o as b};\n"]},"metadata":{},"sourceType":"module"}