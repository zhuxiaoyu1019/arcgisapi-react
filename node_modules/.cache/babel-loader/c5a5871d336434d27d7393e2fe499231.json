{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../core/maybe.js\";\nimport { getMetersPerUnitForSR as e } from \"../../../core/unitUtils.js\";\nimport { h as s } from \"../../../chunks/mat4.js\";\nimport { g as i } from \"../../../chunks/vec3.js\";\nimport { projectPointToVector as r, projectVectorToVector as o, projectVectorToDehydratedPoint as n, projectVectorToPoint as a } from \"../../../geometry/projection.js\";\nimport c from \"../../../geometry/SpatialReference.js\";\nimport { create as m, setExtent as d, altitudeAt as h, setAltitudeAt as l, setAltitudeOfTransformation as u, normalAt as p, axisAt as f, elevate as y, intersectRayClosestSilhouette as S, intersectRay as g, createGlobal as j, createLocal as R } from \"../../../geometry/support/coordinateSystem.js\";\nimport { intersectRay as w } from \"../../../geometry/support/plane.js\";\nimport { sv3d as A } from \"../../../geometry/support/vectorStacks.js\";\nimport { isDehydratedPoint as M } from \"../../../layers/graphics/dehydratedFeatureUtils.js\";\n\nclass _ {\n  constructor(t, e, s, i) {\n    this.viewingMode = t, this.spatialReference = e, this.unitInMeters = s, this.coordinateSystem = i, this._coordinateSystem = m(i);\n  }\n\n  set extent(t) {\n    t && d(this.coordinateSystem, t, this.coordinateSystem);\n  }\n\n  getAltitude(t) {\n    return h(this.coordinateSystem, t);\n  }\n\n  setAltitude(t, e, s = t) {\n    return l(this.coordinateSystem, s, e, t);\n  }\n\n  setAltitudeOfTransformation(t, e) {\n    u(this.coordinateSystem, e, t, e);\n  }\n\n  worldUpAtPosition(t, e) {\n    return p(this.coordinateSystem, t, e);\n  }\n\n  worldBasisAtPosition(t, e, s) {\n    return f(this.coordinateSystem, t, e, s);\n  }\n\n  basisMatrixAtPosition(t, e) {\n    const i = this.worldBasisAtPosition(t, 0, A.get()),\n          r = this.worldBasisAtPosition(t, 1, A.get()),\n          o = this.worldBasisAtPosition(t, 2, A.get());\n    return s(e, i[0], i[1], i[2], 0, r[0], r[1], r[2], 0, o[0], o[1], o[2], 0, 0, 0, 0, 1), e;\n  }\n\n  intersectManifoldClosestSilhouette(t, e, s) {\n    return y(this.coordinateSystem, e, this._coordinateSystem), S(this._coordinateSystem, t, s), s;\n  }\n\n  intersectManifold(t, e, s) {\n    y(this.coordinateSystem, e, this._coordinateSystem);\n    const r = A.get();\n    return g(this._coordinateSystem, t, r) ? i(s, r) : null;\n  }\n\n  intersectInfiniteManifold(t, e, s) {\n    if (1 === this.viewingMode) return this.intersectManifold(t, e, s);\n    y(this.coordinateSystem, e, this._coordinateSystem);\n    const r = this._coordinateSystem.value,\n          o = A.get();\n    return w(r.plane, t, o) ? i(s, o) : null;\n  }\n\n  toRenderCoords(t, e, s) {\n    return M(t) ? r(t, e, this.spatialReference) : o(t, e, s, this.spatialReference);\n  }\n\n  fromRenderCoords(e, s, i = null) {\n    return M(s) ? (t(i) && (s.spatialReference = i), n(e, this.spatialReference, s)) : s instanceof c ? a(e, this.spatialReference, s) : o(e, this.spatialReference, s, i) ? s : null;\n  }\n\n  static create(t, s) {\n    switch (t) {\n      case 2:\n        return new _(2, s, e(s), R());\n\n      case 1:\n        return new _(1, s, 1, j(s));\n    }\n  }\n\n}\n\nexport { _ as RenderCoordsHelper };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js"],"names":["isSome","t","getMetersPerUnitForSR","e","h","s","g","i","projectPointToVector","r","projectVectorToVector","o","projectVectorToDehydratedPoint","n","projectVectorToPoint","a","c","create","m","setExtent","d","altitudeAt","setAltitudeAt","l","setAltitudeOfTransformation","u","normalAt","p","axisAt","f","elevate","y","intersectRayClosestSilhouette","S","intersectRay","createGlobal","j","createLocal","R","w","sv3d","A","isDehydratedPoint","M","_","constructor","viewingMode","spatialReference","unitInMeters","coordinateSystem","_coordinateSystem","extent","getAltitude","setAltitude","worldUpAtPosition","worldBasisAtPosition","basisMatrixAtPosition","get","intersectManifoldClosestSilhouette","intersectManifold","intersectInfiniteManifold","value","plane","toRenderCoords","fromRenderCoords","RenderCoordsHelper"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as e}from\"../../../core/unitUtils.js\";import{h as s}from\"../../../chunks/mat4.js\";import{g as i}from\"../../../chunks/vec3.js\";import{projectPointToVector as r,projectVectorToVector as o,projectVectorToDehydratedPoint as n,projectVectorToPoint as a}from\"../../../geometry/projection.js\";import c from\"../../../geometry/SpatialReference.js\";import{create as m,setExtent as d,altitudeAt as h,setAltitudeAt as l,setAltitudeOfTransformation as u,normalAt as p,axisAt as f,elevate as y,intersectRayClosestSilhouette as S,intersectRay as g,createGlobal as j,createLocal as R}from\"../../../geometry/support/coordinateSystem.js\";import{intersectRay as w}from\"../../../geometry/support/plane.js\";import{sv3d as A}from\"../../../geometry/support/vectorStacks.js\";import{isDehydratedPoint as M}from\"../../../layers/graphics/dehydratedFeatureUtils.js\";class _{constructor(t,e,s,i){this.viewingMode=t,this.spatialReference=e,this.unitInMeters=s,this.coordinateSystem=i,this._coordinateSystem=m(i)}set extent(t){t&&d(this.coordinateSystem,t,this.coordinateSystem)}getAltitude(t){return h(this.coordinateSystem,t)}setAltitude(t,e,s=t){return l(this.coordinateSystem,s,e,t)}setAltitudeOfTransformation(t,e){u(this.coordinateSystem,e,t,e)}worldUpAtPosition(t,e){return p(this.coordinateSystem,t,e)}worldBasisAtPosition(t,e,s){return f(this.coordinateSystem,t,e,s)}basisMatrixAtPosition(t,e){const i=this.worldBasisAtPosition(t,0,A.get()),r=this.worldBasisAtPosition(t,1,A.get()),o=this.worldBasisAtPosition(t,2,A.get());return s(e,i[0],i[1],i[2],0,r[0],r[1],r[2],0,o[0],o[1],o[2],0,0,0,0,1),e}intersectManifoldClosestSilhouette(t,e,s){return y(this.coordinateSystem,e,this._coordinateSystem),S(this._coordinateSystem,t,s),s}intersectManifold(t,e,s){y(this.coordinateSystem,e,this._coordinateSystem);const r=A.get();return g(this._coordinateSystem,t,r)?i(s,r):null}intersectInfiniteManifold(t,e,s){if(1===this.viewingMode)return this.intersectManifold(t,e,s);y(this.coordinateSystem,e,this._coordinateSystem);const r=this._coordinateSystem.value,o=A.get();return w(r.plane,t,o)?i(s,o):null}toRenderCoords(t,e,s){return M(t)?r(t,e,this.spatialReference):o(t,e,s,this.spatialReference)}fromRenderCoords(e,s,i=null){return M(s)?(t(i)&&(s.spatialReference=i),n(e,this.spatialReference,s)):s instanceof c?a(e,this.spatialReference,s):o(e,this.spatialReference,s,i)?s:null}static create(t,s){switch(t){case 2:return new _(2,s,e(s),R());case 1:return new _(1,s,1,j(s))}}}export{_ as RenderCoordsHelper};\n"]},"metadata":{},"sourceType":"module"}