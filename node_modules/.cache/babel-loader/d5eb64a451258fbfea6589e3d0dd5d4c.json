{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { equals as r } from \"../arrayUtils.js\";\nimport e from \"../Error.js\";\nimport t from \"../Logger.js\";\nimport { idToReadableName as i, nameToId as o } from \"./PropertyOrigin.js\";\nimport { getProperties as n, merge as s } from \"./utils.js\";\nimport { originSpecificWritePropertyDefinition as u } from \"./extensions/serializableProperty.js\";\nconst l = t.getLogger(\"esri.core.accessorSupport.write\");\n\nfunction a(r, e, t, i, o) {\n  var n, s;\n  const u = {};\n  return null == (n = e.write) || null == (s = n.writer) || s.call(r, i, u, t, o), u;\n}\n\nfunction f(r, t, i, n, s, u) {\n  if (!n || !n.write) return !1;\n  const a = r.get(i);\n\n  if (!s && n.write.overridePolicy) {\n    const e = n.write.overridePolicy.call(r, a, i, u);\n    void 0 !== e && (s = e);\n  }\n\n  if (s || (s = n.write), !s || !1 === s.enabled) return !1;\n\n  if ((null === a && !s.allowNull || void 0 === a) && s.isRequired) {\n    const t = new e(\"web-document-write:property-required\", `Missing value for required property '${i}' on '${r.declaredClass}'`, {\n      propertyName: i,\n      target: r\n    });\n    return t && u && u.messages ? u.messages.push(t) : t && !u && l.error(t.name, t.message), !1;\n  }\n\n  if (void 0 === a) return !1;\n  if (null === a && !s.allowNull) return !1;\n  if (c(r, i, u, n, a)) return !1;\n  if (void 0 !== n.default) return !0;\n\n  if (!s.ignoreOrigin && u && u.origin) {\n    if (t.store.originOf(i) < o(u.origin)) return !1;\n  }\n\n  return !0;\n}\n\nfunction c(e, t, i, o, n) {\n  const s = o.default;\n  if (void 0 === s) return !1;\n  if (null != o.defaultEquals) return o.defaultEquals(n);\n\n  if (\"function\" == typeof s) {\n    if (Array.isArray(n)) {\n      const o = s.call(e, t, i);\n      return r(o, n);\n    }\n\n    return !1;\n  }\n\n  return s === n;\n}\n\nfunction p(r, e, t, i) {\n  const o = n(r),\n        s = o.metadatas,\n        l = u(s[e], i);\n  return !!l && f(r, o, e, l, t, i);\n}\n\nfunction g(r, e, t) {\n  if (r && \"function\" == typeof r.toJSON && (!r.toJSON.isDefaultToJSON || !r.write)) return s(e, r.toJSON());\n  const o = n(r),\n        l = o.metadatas;\n\n  for (const n in l) {\n    const g = u(l[n], t);\n    if (!f(r, o, n, g, void 0, t)) continue;\n    const d = r.get(n),\n          m = a(r, g, g.write && \"string\" == typeof g.write.target ? g.write.target : n, d, t);\n    var c, p;\n    if (Object.keys(m).length > 0) e = s(e, m), null != t && null != (c = t.resources) && null != (p = c.pendingOperations) && p.length && Promise.all(t.resources.pendingOperations).then(() => s(e, m)), t && t.writtenProperties && t.writtenProperties.push({\n      target: r,\n      propName: n,\n      oldOrigin: i(o.store.originOf(n)),\n      newOrigin: t.origin\n    });\n  }\n\n  return e;\n}\n\nexport default g;\nexport { p as willPropertyWrite, g as write };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/core/accessorSupport/write.js"],"names":["equals","r","e","t","idToReadableName","i","nameToId","o","getProperties","n","merge","s","originSpecificWritePropertyDefinition","u","l","getLogger","a","write","writer","call","f","get","overridePolicy","enabled","allowNull","isRequired","declaredClass","propertyName","target","messages","push","error","name","message","c","default","ignoreOrigin","origin","store","originOf","defaultEquals","Array","isArray","p","metadatas","g","toJSON","isDefaultToJSON","d","m","Object","keys","length","resources","pendingOperations","Promise","all","then","writtenProperties","propName","oldOrigin","newOrigin","willPropertyWrite"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{equals as r}from\"../arrayUtils.js\";import e from\"../Error.js\";import t from\"../Logger.js\";import{idToReadableName as i,nameToId as o}from\"./PropertyOrigin.js\";import{getProperties as n,merge as s}from\"./utils.js\";import{originSpecificWritePropertyDefinition as u}from\"./extensions/serializableProperty.js\";const l=t.getLogger(\"esri.core.accessorSupport.write\");function a(r,e,t,i,o){var n,s;const u={};return null==(n=e.write)||null==(s=n.writer)||s.call(r,i,u,t,o),u}function f(r,t,i,n,s,u){if(!n||!n.write)return!1;const a=r.get(i);if(!s&&n.write.overridePolicy){const e=n.write.overridePolicy.call(r,a,i,u);void 0!==e&&(s=e)}if(s||(s=n.write),!s||!1===s.enabled)return!1;if((null===a&&!s.allowNull||void 0===a)&&s.isRequired){const t=new e(\"web-document-write:property-required\",`Missing value for required property '${i}' on '${r.declaredClass}'`,{propertyName:i,target:r});return t&&u&&u.messages?u.messages.push(t):t&&!u&&l.error(t.name,t.message),!1}if(void 0===a)return!1;if(null===a&&!s.allowNull)return!1;if(c(r,i,u,n,a))return!1;if(void 0!==n.default)return!0;if(!s.ignoreOrigin&&u&&u.origin){if(t.store.originOf(i)<o(u.origin))return!1}return!0}function c(e,t,i,o,n){const s=o.default;if(void 0===s)return!1;if(null!=o.defaultEquals)return o.defaultEquals(n);if(\"function\"==typeof s){if(Array.isArray(n)){const o=s.call(e,t,i);return r(o,n)}return!1}return s===n}function p(r,e,t,i){const o=n(r),s=o.metadatas,l=u(s[e],i);return!!l&&f(r,o,e,l,t,i)}function g(r,e,t){if(r&&\"function\"==typeof r.toJSON&&(!r.toJSON.isDefaultToJSON||!r.write))return s(e,r.toJSON());const o=n(r),l=o.metadatas;for(const n in l){const g=u(l[n],t);if(!f(r,o,n,g,void 0,t))continue;const d=r.get(n),m=a(r,g,g.write&&\"string\"==typeof g.write.target?g.write.target:n,d,t);var c,p;if(Object.keys(m).length>0)e=s(e,m),null!=t&&null!=(c=t.resources)&&null!=(p=c.pendingOperations)&&p.length&&Promise.all(t.resources.pendingOperations).then((()=>s(e,m))),t&&t.writtenProperties&&t.writtenProperties.push({target:r,propName:n,oldOrigin:i(o.store.originOf(n)),newOrigin:t.origin})}return e}export default g;export{p as willPropertyWrite,g as write};\n"]},"metadata":{},"sourceType":"module"}