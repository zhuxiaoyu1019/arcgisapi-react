{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../chunks/tslib.es6.js\";\nimport { isNone as e } from \"../core/maybe.js\";\nimport { after as s } from \"../core/promiseUtils.js\";\nimport { watch as o } from \"../core/watchUtils.js\";\nimport { aliasOf as t } from \"../core/accessorSupport/decorators/aliasOf.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { property as r } from \"../core/accessorSupport/decorators/property.js\";\nimport { subclass as n } from \"../core/accessorSupport/decorators/subclass.js\";\nimport a from \"./Widget.js\";\nimport p from \"./Spinner/SpinnerViewModel.js\";\nimport \"./support/widgetUtils.js\";\nimport { tsx as l } from \"./support/jsxFactory.js\";\nconst c = {\n  base: \"esri-spinner\",\n  spinnerStart: \"esri-spinner--start\",\n  spinnerFinish: \"esri-spinner--finish\"\n};\nlet h = class extends a {\n  constructor(i, e) {\n    super(i, e), this._animationDelay = 500, this._animationPromise = null, this.location = null, this.view = null, this.viewModel = new p(), this.visible = !1;\n  }\n\n  initialize() {\n    this.own([o(this, \"visible\", i => this._visibleChange(i))]);\n  }\n\n  destroy() {\n    this._animationPromise = null;\n  }\n\n  show(i) {\n    const {\n      location: e,\n      promise: s\n    } = i;\n    e && (this.viewModel.location = e), this.visible = !0;\n\n    const o = () => this.hide();\n\n    s && s.catch(() => {}).then(o);\n  }\n\n  hide() {\n    this.visible = !1;\n  }\n\n  render() {\n    const {\n      visible: i\n    } = this,\n          {\n      screenLocation: e\n    } = this.viewModel,\n          s = !!e,\n          o = i && s,\n          t = !i && s,\n          r = {\n      [c.spinnerStart]: o,\n      [c.spinnerFinish]: t\n    },\n          n = this._getPositionStyles();\n\n    return l(\"div\", {\n      class: this.classes(c.base, r),\n      styles: n\n    });\n  }\n\n  _visibleChange(i) {\n    if (i) return void (this.viewModel.screenLocationEnabled = !0);\n    const e = s(this._animationDelay);\n    this._animationPromise = e, e.catch(() => {}).then(() => {\n      this._animationPromise === e && (this.viewModel.screenLocationEnabled = !1, this._animationPromise = null);\n    });\n  }\n\n  _getPositionStyles() {\n    const {\n      screenLocation: i,\n      view: s\n    } = this.viewModel;\n    if (!s || e(i)) return {};\n    const {\n      padding: o\n    } = s;\n    return {\n      left: i.x - o.left + \"px\",\n      top: i.y - o.top + \"px\"\n    };\n  }\n\n};\ni([t(\"viewModel.location\")], h.prototype, \"location\", void 0), i([t(\"viewModel.view\")], h.prototype, \"view\", void 0), i([r({\n  type: p\n})], h.prototype, \"viewModel\", void 0), i([t(\"viewModel.visible\")], h.prototype, \"visible\", void 0), h = i([n(\"esri.widgets.Spinner\")], h);\nvar m = h;\nexport default m;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/widgets/Spinner.js"],"names":["_","i","isNone","e","after","s","watch","o","aliasOf","t","property","r","subclass","n","a","p","tsx","l","c","base","spinnerStart","spinnerFinish","h","constructor","_animationDelay","_animationPromise","location","view","viewModel","visible","initialize","own","_visibleChange","destroy","show","promise","hide","catch","then","render","screenLocation","_getPositionStyles","class","classes","styles","screenLocationEnabled","padding","left","x","top","y","prototype","type","m"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../chunks/tslib.es6.js\";import{isNone as e}from\"../core/maybe.js\";import{after as s}from\"../core/promiseUtils.js\";import{watch as o}from\"../core/watchUtils.js\";import{aliasOf as t}from\"../core/accessorSupport/decorators/aliasOf.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"./Widget.js\";import p from\"./Spinner/SpinnerViewModel.js\";import\"./support/widgetUtils.js\";import{tsx as l}from\"./support/jsxFactory.js\";const c={base:\"esri-spinner\",spinnerStart:\"esri-spinner--start\",spinnerFinish:\"esri-spinner--finish\"};let h=class extends a{constructor(i,e){super(i,e),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new p,this.visible=!1}initialize(){this.own([o(this,\"visible\",(i=>this._visibleChange(i)))])}destroy(){this._animationPromise=null}show(i){const{location:e,promise:s}=i;e&&(this.viewModel.location=e),this.visible=!0;const o=()=>this.hide();s&&s.catch((()=>{})).then(o)}hide(){this.visible=!1}render(){const{visible:i}=this,{screenLocation:e}=this.viewModel,s=!!e,o=i&&s,t=!i&&s,r={[c.spinnerStart]:o,[c.spinnerFinish]:t},n=this._getPositionStyles();return l(\"div\",{class:this.classes(c.base,r),styles:n})}_visibleChange(i){if(i)return void(this.viewModel.screenLocationEnabled=!0);const e=s(this._animationDelay);this._animationPromise=e,e.catch((()=>{})).then((()=>{this._animationPromise===e&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)}))}_getPositionStyles(){const{screenLocation:i,view:s}=this.viewModel;if(!s||e(i))return{};const{padding:o}=s;return{left:i.x-o.left+\"px\",top:i.y-o.top+\"px\"}}};i([t(\"viewModel.location\")],h.prototype,\"location\",void 0),i([t(\"viewModel.view\")],h.prototype,\"view\",void 0),i([r({type:p})],h.prototype,\"viewModel\",void 0),i([t(\"viewModel.visible\")],h.prototype,\"visible\",void 0),h=i([n(\"esri.widgets.Spinner\")],h);var m=h;export default m;\n"]},"metadata":{},"sourceType":"module"}