{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../has.js\";\nimport e from \"../Logger.js\";\nconst n = e.getLogger(\"esri.core.Accessor\");\n\nfunction r(e) {\n  return null == e ? e : new Date(e);\n}\n\nfunction t(e) {\n  return null == e ? e : !!e;\n}\n\nfunction o(e) {\n  return null == e ? e : e.toString();\n}\n\nfunction u(e) {\n  return null == e ? e : (e = parseFloat(e), isNaN(e) ? 0 : e);\n}\n\nfunction a(e) {\n  return null == e ? e : Math.round(parseFloat(e));\n}\n\nfunction s(e) {\n  return e && e.constructor && void 0 !== e.constructor.__accessorMetadata__;\n}\n\nfunction l(e, n) {\n  return null != n && e && !(n instanceof e);\n}\n\nfunction i(e) {\n  return e && \"isCollection\" in e;\n}\n\nfunction c(e) {\n  return e && e.Type ? \"function\" == typeof e.Type ? e.Type : e.Type.base : null;\n}\n\nfunction f(e, n) {\n  if (!n || !n.constructor || !i(n.constructor)) return p(e, n) ? n : new e(n);\n  const r = c(e.prototype.itemType),\n        t = c(n.constructor.prototype.itemType);\n  return r ? t ? r === t ? n : r.prototype.isPrototypeOf(t.prototype) ? new e(n) : (p(e, n), n) : new e(n) : n;\n}\n\nfunction p(e, r) {\n  return !!s(r) && (n.error(\"Accessor#set\", \"Assigning an instance of '\" + (r.declaredClass || \"unknown\") + \"' which is not a subclass of '\" + v(e) + \"'\"), !0);\n}\n\nfunction y(e, n) {\n  return null == n ? n : i(e) ? f(e, n) : l(e, n) ? p(e, n) ? n : new e(n) : n;\n}\n\nfunction v(e) {\n  return e && e.prototype && e.prototype.declaredClass || \"unknown\";\n}\n\nfunction g(e) {\n  switch (e) {\n    case Number:\n      return u;\n\n    case N:\n      return a;\n\n    case Boolean:\n      return t;\n\n    case String:\n      return o;\n\n    case Date:\n      return r;\n\n    default:\n      return y.bind(null, e);\n  }\n}\n\nfunction d(e, n) {\n  const r = g(e);\n  return 1 === arguments.length ? r : r(n);\n}\n\nfunction h(e, n, r) {\n  return 1 === arguments.length ? h.bind(null, e) : n ? Array.isArray(n) ? n.map(n => e(n, r)) : [e(n, r)] : n;\n}\n\nfunction b(e, n) {\n  return 1 === arguments.length ? h(d.bind(null, e)) : h(d.bind(null, e), n);\n}\n\nfunction m(e, n, r) {\n  return 0 !== n && Array.isArray(r) ? r.map(r => m(e, n - 1, r)) : e(r);\n}\n\nfunction w(e, n, r) {\n  if (2 === arguments.length) return w.bind(null, e, n);\n  if (!r) return r;\n  let t = n,\n      o = r = m(e, n, r);\n\n  for (; t > 0 && Array.isArray(o);) t--, o = o[0];\n\n  if (void 0 !== o) for (let u = 0; u < t; u++) r = [r];\n  return r;\n}\n\nfunction A(e, n, r) {\n  return 2 === arguments.length ? w(d.bind(null, e), n) : w(d.bind(null, e), n, r);\n}\n\nfunction $(e) {\n  return !!Array.isArray(e) && !e.some(n => {\n    const r = typeof n;\n    return !(\"string\" === r || \"number\" === r || \"function\" === r && e.length > 1);\n  });\n}\n\nfunction j(e, r) {\n  if (2 === arguments.length) return j(e).call(null, r);\n  const t = new Set(),\n        o = e.filter(e => \"function\" != typeof e),\n        u = e.filter(e => \"function\" == typeof e);\n\n  for (const n of e) \"string\" != typeof n && \"number\" != typeof n || t.add(n);\n\n  let a = null,\n      s = null;\n  return (e, r) => {\n    if (null == e) return e;\n    const i = typeof e,\n          c = \"string\" === i || \"number\" === i;\n    return c && (t.has(e) || u.some(e => \"string\" === i && e === String || \"number\" === i && e === Number)) || \"object\" === i && u.some(n => !l(e, n)) ? e : (c && o.length ? (a || (a = o.map(e => \"string\" == typeof e ? `'${e}'` : `${e}`).join(\", \")), n.error(\"Accessor#set\", `'${e}' is not a valid value for this property, only the following values are valid: ${a}`)) : \"object\" == typeof e && u.length ? (s || (s = u.map(e => v(e)).join(\", \")), n.error(\"Accessor#set\", `'${e}' is not a valid value for this property, value must be one of ${s}`)) : n.error(\"Accessor#set\", `'${e}' is not a valid value for this property`), r && (r.valid = !1), null);\n  };\n}\n\nfunction k(e, r) {\n  if (2 === arguments.length) return k(e).call(null, r);\n  const t = {},\n        o = [],\n        u = [];\n\n  for (const n in e.typeMap) {\n    const r = e.typeMap[n];\n    t[n] = d(r), o.push(v(r)), u.push(n);\n  }\n\n  const a = () => `'${o.join(\"', '\")}'`,\n        i = () => `'${u.join(\"', '\")}'`,\n        c = \"string\" == typeof e.key ? n => n[e.key] : e.key;\n\n  return r => {\n    if (e.base && !l(e.base, r)) return r;\n    if (null == r) return r;\n    const o = c(r) || e.defaultKeyValue,\n          u = t[o];\n    if (!u) return n.error(\"Accessor#set\", `Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${i()})`), null;\n    if (!l(e.typeMap[o], r)) return r;\n\n    if (\"string\" == typeof e.key && !s(r)) {\n      const n = {};\n\n      for (const t in r) t !== e.key && (n[t] = r[t]);\n\n      return u(n);\n    }\n\n    return u(r);\n  };\n}\n\nclass N {}\n\nconst S = {\n  native: e => ({\n    type: \"native\",\n    value: e\n  }),\n  array: e => ({\n    type: \"array\",\n    value: e\n  }),\n  oneOf: e => ({\n    type: \"one-of\",\n    values: e\n  })\n};\n\nfunction T(e) {\n  if (!e || !(\"type\" in e)) return !1;\n\n  switch (e.type) {\n    case \"native\":\n    case \"array\":\n    case \"one-of\":\n      return !0;\n  }\n\n  return !1;\n}\n\nfunction M(e) {\n  switch (e.type) {\n    case \"native\":\n      return d(e.value);\n\n    case \"array\":\n      return h(M(e.value));\n\n    case \"one-of\":\n      return _(e);\n\n    default:\n      return null;\n  }\n}\n\nfunction _(e) {\n  let r = null;\n  return (t, o) => C(t, e) ? t : (null == r && (r = B(e)), n.error(\"Accessor#set\", `Invalid property value, value needs to be of type ${r}`), o && (o.valid = !1), null);\n}\n\nfunction B(e) {\n  switch (e.type) {\n    case \"native\":\n      switch (e.value) {\n        case Number:\n          return \"number\";\n\n        case String:\n          return \"string\";\n\n        case Boolean:\n          return \"boolean\";\n\n        case N:\n          return \"integer\";\n\n        case Date:\n          return \"date\";\n\n        default:\n          return v(e.value);\n      }\n\n    case \"array\":\n      return `array of ${B(e.value)}`;\n\n    case \"one-of\":\n      {\n        const n = e.values.map(e => B(e));\n        return `one of ${n.slice(0, n.length - 1)} or ${n[n.length - 1]}`;\n      }\n  }\n\n  return \"unknown\";\n}\n\nfunction C(e, n) {\n  if (null == e) return !0;\n\n  switch (n.type) {\n    case \"native\":\n      switch (n.value) {\n        case Number:\n        case N:\n          return \"number\" == typeof e;\n\n        case Boolean:\n          return \"boolean\" == typeof e;\n\n        case String:\n          return \"string\" == typeof e;\n      }\n\n      return e instanceof n.value;\n\n    case \"array\":\n      return !!Array.isArray(e) && !e.some(e => !C(e, n.value));\n\n    case \"one-of\":\n      return n.values.some(n => C(e, n));\n  }\n}\n\nexport default d;\nexport { N as Integer, b as ensureArray, h as ensureArrayTyped, t as ensureBoolean, y as ensureClass, r as ensureDate, a as ensureInteger, M as ensureLongFormType, A as ensureNArray, w as ensureNArrayTyped, u as ensureNumber, j as ensureOneOf, k as ensureOneOfType, o as ensureString, d as ensureType, s as isClassedType, T as isLongFormType, $ as isOneOf, l as requiresType, S as types };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/core/accessorSupport/ensureType.js"],"names":["e","n","getLogger","r","Date","t","o","toString","u","parseFloat","isNaN","a","Math","round","s","constructor","__accessorMetadata__","l","i","c","Type","base","f","p","prototype","itemType","isPrototypeOf","error","declaredClass","v","y","g","Number","N","Boolean","String","bind","d","arguments","length","h","Array","isArray","map","b","m","w","A","$","some","j","call","Set","filter","add","has","join","valid","k","typeMap","push","key","defaultKeyValue","S","native","type","value","array","oneOf","values","T","M","_","C","B","slice","Integer","ensureArray","ensureArrayTyped","ensureBoolean","ensureClass","ensureDate","ensureInteger","ensureLongFormType","ensureNArray","ensureNArrayTyped","ensureNumber","ensureOneOf","ensureOneOfType","ensureString","ensureType","isClassedType","isLongFormType","isOneOf","requiresType","types"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../has.js\";import e from\"../Logger.js\";const n=e.getLogger(\"esri.core.Accessor\");function r(e){return null==e?e:new Date(e)}function t(e){return null==e?e:!!e}function o(e){return null==e?e:e.toString()}function u(e){return null==e?e:(e=parseFloat(e),isNaN(e)?0:e)}function a(e){return null==e?e:Math.round(parseFloat(e))}function s(e){return e&&e.constructor&&void 0!==e.constructor.__accessorMetadata__}function l(e,n){return null!=n&&e&&!(n instanceof e)}function i(e){return e&&\"isCollection\"in e}function c(e){return e&&e.Type?\"function\"==typeof e.Type?e.Type:e.Type.base:null}function f(e,n){if(!n||!n.constructor||!i(n.constructor))return p(e,n)?n:new e(n);const r=c(e.prototype.itemType),t=c(n.constructor.prototype.itemType);return r?t?r===t?n:r.prototype.isPrototypeOf(t.prototype)?new e(n):(p(e,n),n):new e(n):n}function p(e,r){return!!s(r)&&(n.error(\"Accessor#set\",\"Assigning an instance of '\"+(r.declaredClass||\"unknown\")+\"' which is not a subclass of '\"+v(e)+\"'\"),!0)}function y(e,n){return null==n?n:i(e)?f(e,n):l(e,n)?p(e,n)?n:new e(n):n}function v(e){return e&&e.prototype&&e.prototype.declaredClass||\"unknown\"}function g(e){switch(e){case Number:return u;case N:return a;case Boolean:return t;case String:return o;case Date:return r;default:return y.bind(null,e)}}function d(e,n){const r=g(e);return 1===arguments.length?r:r(n)}function h(e,n,r){return 1===arguments.length?h.bind(null,e):n?Array.isArray(n)?n.map((n=>e(n,r))):[e(n,r)]:n}function b(e,n){return 1===arguments.length?h(d.bind(null,e)):h(d.bind(null,e),n)}function m(e,n,r){return 0!==n&&Array.isArray(r)?r.map((r=>m(e,n-1,r))):e(r)}function w(e,n,r){if(2===arguments.length)return w.bind(null,e,n);if(!r)return r;let t=n,o=r=m(e,n,r);for(;t>0&&Array.isArray(o);)t--,o=o[0];if(void 0!==o)for(let u=0;u<t;u++)r=[r];return r}function A(e,n,r){return 2===arguments.length?w(d.bind(null,e),n):w(d.bind(null,e),n,r)}function $(e){return!!Array.isArray(e)&&!e.some((n=>{const r=typeof n;return!(\"string\"===r||\"number\"===r||\"function\"===r&&e.length>1)}))}function j(e,r){if(2===arguments.length)return j(e).call(null,r);const t=new Set,o=e.filter((e=>\"function\"!=typeof e)),u=e.filter((e=>\"function\"==typeof e));for(const n of e)\"string\"!=typeof n&&\"number\"!=typeof n||t.add(n);let a=null,s=null;return(e,r)=>{if(null==e)return e;const i=typeof e,c=\"string\"===i||\"number\"===i;return c&&(t.has(e)||u.some((e=>\"string\"===i&&e===String||\"number\"===i&&e===Number)))||\"object\"===i&&u.some((n=>!l(e,n)))?e:(c&&o.length?(a||(a=o.map((e=>\"string\"==typeof e?`'${e}'`:`${e}`)).join(\", \")),n.error(\"Accessor#set\",`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):\"object\"==typeof e&&u.length?(s||(s=u.map((e=>v(e))).join(\", \")),n.error(\"Accessor#set\",`'${e}' is not a valid value for this property, value must be one of ${s}`)):n.error(\"Accessor#set\",`'${e}' is not a valid value for this property`),r&&(r.valid=!1),null)}}function k(e,r){if(2===arguments.length)return k(e).call(null,r);const t={},o=[],u=[];for(const n in e.typeMap){const r=e.typeMap[n];t[n]=d(r),o.push(v(r)),u.push(n)}const a=()=>`'${o.join(\"', '\")}'`,i=()=>`'${u.join(\"', '\")}'`,c=\"string\"==typeof e.key?n=>n[e.key]:e.key;return r=>{if(e.base&&!l(e.base,r))return r;if(null==r)return r;const o=c(r)||e.defaultKeyValue,u=t[o];if(!u)return n.error(\"Accessor#set\",`Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${i()})`),null;if(!l(e.typeMap[o],r))return r;if(\"string\"==typeof e.key&&!s(r)){const n={};for(const t in r)t!==e.key&&(n[t]=r[t]);return u(n)}return u(r)}}class N{}const S={native:e=>({type:\"native\",value:e}),array:e=>({type:\"array\",value:e}),oneOf:e=>({type:\"one-of\",values:e})};function T(e){if(!e||!(\"type\"in e))return!1;switch(e.type){case\"native\":case\"array\":case\"one-of\":return!0}return!1}function M(e){switch(e.type){case\"native\":return d(e.value);case\"array\":return h(M(e.value));case\"one-of\":return _(e);default:return null}}function _(e){let r=null;return(t,o)=>C(t,e)?t:(null==r&&(r=B(e)),n.error(\"Accessor#set\",`Invalid property value, value needs to be of type ${r}`),o&&(o.valid=!1),null)}function B(e){switch(e.type){case\"native\":switch(e.value){case Number:return\"number\";case String:return\"string\";case Boolean:return\"boolean\";case N:return\"integer\";case Date:return\"date\";default:return v(e.value)}case\"array\":return`array of ${B(e.value)}`;case\"one-of\":{const n=e.values.map((e=>B(e)));return`one of ${n.slice(0,n.length-1)} or ${n[n.length-1]}`}}return\"unknown\"}function C(e,n){if(null==e)return!0;switch(n.type){case\"native\":switch(n.value){case Number:case N:return\"number\"==typeof e;case Boolean:return\"boolean\"==typeof e;case String:return\"string\"==typeof e}return e instanceof n.value;case\"array\":return!!Array.isArray(e)&&!e.some((e=>!C(e,n.value)));case\"one-of\":return n.values.some((n=>C(e,n)))}}export default d;export{N as Integer,b as ensureArray,h as ensureArrayTyped,t as ensureBoolean,y as ensureClass,r as ensureDate,a as ensureInteger,M as ensureLongFormType,A as ensureNArray,w as ensureNArrayTyped,u as ensureNumber,j as ensureOneOf,k as ensureOneOfType,o as ensureString,d as ensureType,s as isClassedType,T as isLongFormType,$ as isOneOf,l as requiresType,S as types};\n"]},"metadata":{},"sourceType":"module"}