{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { ScreenSizeScaling as e } from \"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";\nimport { Slice as r } from \"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";\nimport { Transform as o } from \"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";\nimport { ReadLinearDepth as i } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { multipassTerrainTest as a } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { symbolAlphaCutoff as d } from \"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";\nimport { ColorConversion as l } from \"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";\nimport { glsl as n } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as s } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\n\nfunction t(t) {\n  const c = new s();\n  return c.include(o, {\n    linearDepth: !1\n  }), c.include(e, {}), c.include(r, t), c.fragment.include(l), c.vertex.uniforms.add(\"proj\", \"mat4\").add(\"view\", \"mat4\"), c.fragment.uniforms.add(\"color\", \"vec4\"), c.attributes.add(\"position\", \"vec3\"), c.varyings.add(\"vWorldPosition\", \"vec3\"), t.multipassTerrainEnabled && c.varyings.add(\"depth\", \"float\"), t.screenSizeEnabled && c.attributes.add(\"offset\", \"vec3\"), t.shadingEnabled && (c.vertex.uniforms.add(\"viewNormal\", \"mat4\"), c.fragment.uniforms.add(\"shadedColor\", \"vec4\").add(\"shadingDirection\", \"vec3\"), c.attributes.add(\"normal\", \"vec3\"), c.varyings.add(\"vViewNormal\", \"vec3\")), c.vertex.code.add(n`\n    void main(void) {\n      vWorldPosition = ${t.screenSizeEnabled ? \"screenSizeScaling(offset, position)\" : \"position\"};\n  `), t.shadingEnabled && c.vertex.code.add(n`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`), c.vertex.code.add(n`\n    ${t.multipassTerrainEnabled ? \"depth = (view * vec4(vWorldPosition, 1.0)).z;\" : \"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `), t.multipassTerrainEnabled && (c.fragment.include(i), c.include(a, t)), c.fragment.code.add(n`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${t.multipassTerrainEnabled ? \"terrainDepthTest(gl_FragCoord, depth);\" : \"\"}\n    `), t.shadingEnabled ? c.fragment.code.add(n`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(color, shadedColor, shadingFactor);`) : c.fragment.code.add(n`vec4 finalColor = color;`), c.fragment.code.add(n`\n      if (finalColor.a < ${n.float(d)}) {\n        discard;\n      }\n      ${7 === t.output ? n`gl_FragColor = vec4(finalColor.a);` : \"\"}\n\n      ${0 === t.output ? n`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${t.OITEnabled ? \"gl_FragColor = premultiplyAlpha(gl_FragColor);\" : \"\"}` : \"\"}\n    }\n    `), c;\n}\n\nvar c = Object.freeze({\n  __proto__: null,\n  build: t\n});\nexport { c as S, t as b };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js"],"names":["ScreenSizeScaling","e","Slice","r","Transform","o","ReadLinearDepth","i","multipassTerrainTest","a","symbolAlphaCutoff","d","ColorConversion","l","glsl","n","ShaderBuilder","s","t","c","include","linearDepth","fragment","vertex","uniforms","add","attributes","varyings","multipassTerrainEnabled","screenSizeEnabled","shadingEnabled","code","float","output","OITEnabled","Object","freeze","__proto__","build","S","b"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ScreenSizeScaling as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as n}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function t(t){const c=new s;return c.include(o,{linearDepth:!1}),c.include(e,{}),c.include(r,t),c.fragment.include(l),c.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),c.fragment.uniforms.add(\"color\",\"vec4\"),c.attributes.add(\"position\",\"vec3\"),c.varyings.add(\"vWorldPosition\",\"vec3\"),t.multipassTerrainEnabled&&c.varyings.add(\"depth\",\"float\"),t.screenSizeEnabled&&c.attributes.add(\"offset\",\"vec3\"),t.shadingEnabled&&(c.vertex.uniforms.add(\"viewNormal\",\"mat4\"),c.fragment.uniforms.add(\"shadedColor\",\"vec4\").add(\"shadingDirection\",\"vec3\"),c.attributes.add(\"normal\",\"vec3\"),c.varyings.add(\"vViewNormal\",\"vec3\")),c.vertex.code.add(n`\n    void main(void) {\n      vWorldPosition = ${t.screenSizeEnabled?\"screenSizeScaling(offset, position)\":\"position\"};\n  `),t.shadingEnabled&&c.vertex.code.add(n`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`),c.vertex.code.add(n`\n    ${t.multipassTerrainEnabled?\"depth = (view * vec4(vWorldPosition, 1.0)).z;\":\"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `),t.multipassTerrainEnabled&&(c.fragment.include(i),c.include(a,t)),c.fragment.code.add(n`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${t.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    `),t.shadingEnabled?c.fragment.code.add(n`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(color, shadedColor, shadingFactor);`):c.fragment.code.add(n`vec4 finalColor = color;`),c.fragment.code.add(n`\n      if (finalColor.a < ${n.float(d)}) {\n        discard;\n      }\n      ${7===t.output?n`gl_FragColor = vec4(finalColor.a);`:\"\"}\n\n      ${0===t.output?n`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${t.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    }\n    `),c}var c=Object.freeze({__proto__:null,build:t});export{c as S,t as b};\n"]},"metadata":{},"sourceType":"module"}