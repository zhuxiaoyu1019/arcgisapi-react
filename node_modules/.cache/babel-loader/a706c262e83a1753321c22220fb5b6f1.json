{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { makeHandle as t } from \"../../../../core/handleUtils.js\";\nimport { Graphics3DObjectStateSet as e } from \"./Graphics3DObjectStateSet.js\";\n\nclass s {\n  constructor(t) {\n    this._graphicsCore = t, this._stateSets = new Array();\n  }\n\n  destroy() {\n    this._stateSets && this._stateSets.forEach(t => t.objectStateSet.removeAll()), this._stateSets = null;\n  }\n\n  acquireSet(s, a) {\n    const i = new e(s, a);\n\n    this._stateSets.push(i);\n\n    const h = t(() => this.releaseSet(i));\n    return {\n      set: i,\n      handle: h\n    };\n  }\n\n  releaseSet(t) {\n    t.objectStateSet.removeAll();\n    const e = this._stateSets ? this._stateSets.indexOf(t) : -1;\n    -1 !== e && this._stateSets.splice(e, 1);\n  }\n\n  _addObjectStateSet(t, e) {\n    t.addObjectStateSet(e.stateType, e.objectStateSet);\n  }\n\n  _removeObjectStateSet(t, e) {\n    t.removeObjectState(e.objectStateSet);\n  }\n\n  setUid(t, e) {\n    t.ids.add(e);\n\n    const s = this._graphicsCore.graphics3DGraphics.get(e);\n\n    s && this._addObjectStateSet(s, t);\n  }\n\n  setUids(t, e) {\n    e.forEach(e => this.setUid(t, e));\n  }\n\n  setObjectIds(t, e) {\n    e.forEach(e => t.ids.add(e)), this.initializeSet(t);\n  }\n\n  addGraphic(t) {\n    this._stateSets.forEach(e => {\n      !e.paused && e.hasGraphic(t) && this._addObjectStateSet(t, e);\n    });\n  }\n\n  removeGraphic(t) {\n    this._stateSets.forEach(e => {\n      e.hasGraphic(t) && this._removeObjectStateSet(t, e);\n    });\n  }\n\n  allGraphicsDeleted() {\n    this._stateSets && this._stateSets.forEach(t => t.objectStateSet.removeAll());\n  }\n\n  initializeSet(t) {\n    const e = this._graphicsCore.graphics3DGraphics;\n    t.objectIdField ? e.forEach(e => {\n      e && t.hasGraphic(e) && this._addObjectStateSet(e, t);\n    }) : t.ids.forEach(s => {\n      const a = e.get(s);\n      a && this._addObjectStateSet(a, t);\n    });\n  }\n\n  get test() {\n    return {\n      states: this._stateSets\n    };\n  }\n\n}\n\nexport { s as Graphics3DObjectStates };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js"],"names":["makeHandle","t","Graphics3DObjectStateSet","e","s","constructor","_graphicsCore","_stateSets","Array","destroy","forEach","objectStateSet","removeAll","acquireSet","a","i","push","h","releaseSet","set","handle","indexOf","splice","_addObjectStateSet","addObjectStateSet","stateType","_removeObjectStateSet","removeObjectState","setUid","ids","add","graphics3DGraphics","get","setUids","setObjectIds","initializeSet","addGraphic","paused","hasGraphic","removeGraphic","allGraphicsDeleted","objectIdField","test","states","Graphics3DObjectStates"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n"]},"metadata":{},"sourceType":"module"}