{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../core/mathUtils.js\";\nimport { ObjectStack as r } from \"../../core/ObjectStack.js\";\nimport { g as n, f as o, d as i, a as e, b as c, p as u, h as s } from \"../../chunks/vec3.js\";\nimport { a, c as g } from \"../../chunks/vec3f64.js\";\nimport { sv3d as f } from \"./vectorStacks.js\";\n\nfunction v(t) {\n  return t ? {\n    origin: a(t.origin),\n    vector: a(t.vector)\n  } : {\n    origin: g(),\n    vector: g()\n  };\n}\n\nfunction p(t, r) {\n  const n = x.get();\n  return n.origin = t, n.vector = r, n;\n}\n\nfunction h(t, r = v()) {\n  return m(t.origin, t.vector, r);\n}\n\nfunction m(t, r, o = v()) {\n  return n(o.origin, t), n(o.vector, r), o;\n}\n\nfunction l(t, r, i = v()) {\n  return n(i.origin, t), o(i.vector, r, t), i;\n}\n\nfunction b(r, n) {\n  const c = o(f.get(), n, r.origin),\n        u = i(r.vector, c),\n        s = i(r.vector, r.vector),\n        a = t(u / s, 0, 1),\n        g = o(f.get(), e(f.get(), r.vector, a), c);\n  return i(g, g);\n}\n\nfunction M(t, r) {\n  return Math.sqrt(b(t, r));\n}\n\nfunction d(t, r, n) {\n  return A(t, r, 0, 1, n);\n}\n\nfunction j(t, r, n) {\n  return c(n, t.origin, e(n, t.vector, r));\n}\n\nfunction A(r, n, s, a, g) {\n  const {\n    vector: v,\n    origin: p\n  } = r,\n        h = o(f.get(), n, p),\n        m = i(v, h) / u(v);\n  return e(g, v, t(m, s, a)), c(g, g, r.origin);\n}\n\nfunction B(t, r) {\n  if (q(t, p(r.origin, r.direction), !1, w)) {\n    const {\n      tA: r,\n      pB: n,\n      distance2: o\n    } = w;\n    if (r >= 0 && r <= 1) return o;\n    if (r < 0) return s(t.origin, n);\n    if (r > 1) return s(c(f.get(), t.origin, t.vector), n);\n  }\n\n  return null;\n}\n\nfunction k(t, r, o) {\n  return !!q(t, r, !0, w) && (n(o, w.pA), !0);\n}\n\nfunction S(t, r) {\n  return q(t, r, !0, w) ? w.distance2 : null;\n}\n\nfunction q(r, n, o, i) {\n  const e = 1e-6,\n        u = r.origin,\n        a = c(f.get(), u, r.vector),\n        g = n.origin,\n        v = c(f.get(), g, n.vector),\n        p = f.get(),\n        h = f.get();\n  if (p[0] = u[0] - g[0], p[1] = u[1] - g[1], p[2] = u[2] - g[2], h[0] = v[0] - g[0], h[1] = v[1] - g[1], h[2] = v[2] - g[2], Math.abs(h[0]) < e && Math.abs(h[1]) < e && Math.abs(h[2]) < e) return !1;\n  const m = f.get();\n  if (m[0] = a[0] - u[0], m[1] = a[1] - u[1], m[2] = a[2] - u[2], Math.abs(m[0]) < e && Math.abs(m[1]) < e && Math.abs(m[2]) < e) return !1;\n  const l = p[0] * h[0] + p[1] * h[1] + p[2] * h[2],\n        b = h[0] * m[0] + h[1] * m[1] + h[2] * m[2],\n        M = p[0] * m[0] + p[1] * m[1] + p[2] * m[2],\n        d = h[0] * h[0] + h[1] * h[1] + h[2] * h[2],\n        j = (m[0] * m[0] + m[1] * m[1] + m[2] * m[2]) * d - b * b;\n  if (Math.abs(j) < e) return !1;\n  let A = (l * b - M * d) / j,\n      B = (l + b * A) / d;\n  o && (A = t(A, 0, 1), B = t(B, 0, 1));\n  const k = f.get(),\n        S = f.get();\n  return k[0] = u[0] + A * m[0], k[1] = u[1] + A * m[1], k[2] = u[2] + A * m[2], S[0] = g[0] + B * h[0], S[1] = g[1] + B * h[1], S[2] = g[2] + B * h[2], i.tA = A, i.tB = B, i.pA = k, i.pB = S, i.distance2 = s(k, S), !0;\n}\n\nconst w = {\n  tA: 0,\n  tB: 0,\n  pA: g(),\n  pB: g(),\n  distance2: 0\n},\n      x = new r(() => ({\n  origin: null,\n  vector: null\n}));\nexport { S as closestLineSegmentDistance2, k as closestLineSegmentPoint, B as closestRayDistance2, h as copy, v as create, M as distance, b as distance2, l as fromPoints, m as fromValues, j as pointAt, d as projectPoint, A as projectPointClamp, p as wrap };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/geometry/support/lineSegment.js"],"names":["clamp","t","ObjectStack","r","g","n","f","o","d","i","a","e","b","c","p","u","h","s","sv3d","v","origin","vector","x","get","m","l","M","Math","sqrt","A","j","B","q","direction","w","tA","pB","distance2","k","pA","S","abs","tB","closestLineSegmentDistance2","closestLineSegmentPoint","closestRayDistance2","copy","create","distance","fromPoints","fromValues","pointAt","projectPoint","projectPointClamp","wrap"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{g as n,f as o,d as i,a as e,b as c,p as u,h as s}from\"../../chunks/vec3.js\";import{a,c as g}from\"../../chunks/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function p(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function h(t,r=v()){return m(t.origin,t.vector,r)}function m(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function l(t,r,i=v()){return n(i.origin,t),o(i.vector,r,t),i}function b(r,n){const c=o(f.get(),n,r.origin),u=i(r.vector,c),s=i(r.vector,r.vector),a=t(u/s,0,1),g=o(f.get(),e(f.get(),r.vector,a),c);return i(g,g)}function M(t,r){return Math.sqrt(b(t,r))}function d(t,r,n){return A(t,r,0,1,n)}function j(t,r,n){return c(n,t.origin,e(n,t.vector,r))}function A(r,n,s,a,g){const{vector:v,origin:p}=r,h=o(f.get(),n,p),m=i(v,h)/u(v);return e(g,v,t(m,s,a)),c(g,g,r.origin)}function B(t,r){if(q(t,p(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return s(t.origin,n);if(r>1)return s(c(f.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&(n(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,i){const e=1e-6,u=r.origin,a=c(f.get(),u,r.vector),g=n.origin,v=c(f.get(),g,n.vector),p=f.get(),h=f.get();if(p[0]=u[0]-g[0],p[1]=u[1]-g[1],p[2]=u[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<e&&Math.abs(h[1])<e&&Math.abs(h[2])<e)return!1;const m=f.get();if(m[0]=a[0]-u[0],m[1]=a[1]-u[1],m[2]=a[2]-u[2],Math.abs(m[0])<e&&Math.abs(m[1])<e&&Math.abs(m[2])<e)return!1;const l=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],b=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],M=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],d=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],j=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*d-b*b;if(Math.abs(j)<e)return!1;let A=(l*b-M*d)/j,B=(l+b*A)/d;o&&(A=t(A,0,1),B=t(B,0,1));const k=f.get(),S=f.get();return k[0]=u[0]+A*m[0],k[1]=u[1]+A*m[1],k[2]=u[2]+A*m[2],S[0]=g[0]+B*h[0],S[1]=g[1]+B*h[1],S[2]=g[2]+B*h[2],i.tA=A,i.tB=B,i.pA=k,i.pB=S,i.distance2=s(k,S),!0}const w={tA:0,tB:0,pA:g(),pB:g(),distance2:0},x=new r((()=>({origin:null,vector:null})));export{S as closestLineSegmentDistance2,k as closestLineSegmentPoint,B as closestRayDistance2,h as copy,v as create,M as distance,b as distance2,l as fromPoints,m as fromValues,j as pointAt,d as projectPoint,A as projectPointClamp,p as wrap};\n"]},"metadata":{},"sourceType":"module"}