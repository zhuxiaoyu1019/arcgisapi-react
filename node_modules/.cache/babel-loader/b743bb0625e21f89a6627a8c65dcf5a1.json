{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../lib/GLMaterial.js\";\nimport { Material as t, materialParametersDefaults as i } from \"../lib/Material.js\";\nimport { OITPolygonOffsetLimit as s } from \"../lib/OrderIndependentTransparency.js\";\nimport { DefaultBufferWriter as r, PositionColorLayout as a } from \"./internal/DefaultBufferWriter.js\";\nimport { intersectTriangleGeometry as n } from \"./internal/MaterialUtil.js\";\nimport { ColorMaterialTechniqueConfiguration as u, ColorMaterialTechnique as h } from \"../shaders/ColorMaterialTechnique.js\";\n\nclass o extends t {\n  constructor(e) {\n    super(e, l), this.supportsEdges = !0, this.techniqueConfig = new u();\n  }\n\n  getTechniqueConfig(e, t) {\n    return this.techniqueConfig.output = e, this.techniqueConfig.cullFace = this.params.cullFace, this.techniqueConfig.vertexColors = this.params.vertexColors, this.techniqueConfig.slicePlaneEnabled = this.params.slicePlaneEnabled, this.techniqueConfig.transparent = this.params.transparent, this.techniqueConfig.polygonOffset = this.params.polygonOffset, this.techniqueConfig.writeDepth = this.params.writeDepth, this.techniqueConfig.sceneHasOcludees = this.params.sceneHasOcludees, this.techniqueConfig.transparencyPassType = t ? t.transparencyPassType : 3, this.techniqueConfig.enableOffset = !t || t.camera.relativeElevation < s, this.techniqueConfig.multipassTerrainEnabled = !!t && t.multipassTerrainEnabled, this.techniqueConfig.cullAboveGround = !!t && t.cullAboveGround, this.techniqueConfig;\n  }\n\n  getPassParameters() {\n    return this.params;\n  }\n\n  intersect(e, t, i, s, r, a, u) {\n    n(e, t, s, r, a, void 0, u);\n  }\n\n  getGLMaterial(e) {\n    return 0 === e.output || 7 === e.output || 4 === e.output || 1 === e.output && this.params.writeLinearDepth ? new c(e) : void 0;\n  }\n\n  createBufferWriter() {\n    return new r(a);\n  }\n\n}\n\nclass c extends e {\n  constructor(e) {\n    super(e), this.updateParameters();\n  }\n\n  updateParameters(e) {\n    this._technique = this._techniqueRep.releaseAndAcquire(h, this._material.getTechniqueConfig(this._output, e), this._technique);\n  }\n\n  beginSlot(e) {\n    if (4 === this._output) return 3 === e;\n    return e === (this._technique.configuration.transparent ? this._technique.configuration.writeDepth ? 5 : 8 : 3);\n  }\n\n  _updateOccludeeState(e) {\n    e.hasOccludees !== this._material.params.sceneHasOcludees && this._material.setParameterValues({\n      sceneHasOcludees: e.hasOccludees\n    });\n  }\n\n  ensureParameters(e) {\n    0 !== this._output && 7 !== this._output || this._updateOccludeeState(e), this.updateParameters(e);\n  }\n\n  bind(e) {\n    this._technique.bindPass(this._material.getPassParameters(), e);\n  }\n\n  getPipelineState(e, t) {\n    return this._technique.getPipelineState(t);\n  }\n\n}\n\nconst l = {\n  color: [1, 1, 1, 1],\n  transparent: !1,\n  writeDepth: !0,\n  writeLinearDepth: !1,\n  vertexColors: !1,\n  polygonOffset: !1,\n  slicePlaneEnabled: !1,\n  cullFace: 0,\n  sceneHasOcludees: !1,\n  ...i\n};\nexport { o as ColorMaterial };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js"],"names":["e","Material","t","materialParametersDefaults","i","OITPolygonOffsetLimit","s","DefaultBufferWriter","r","PositionColorLayout","a","intersectTriangleGeometry","n","ColorMaterialTechniqueConfiguration","u","ColorMaterialTechnique","h","o","constructor","l","supportsEdges","techniqueConfig","getTechniqueConfig","output","cullFace","params","vertexColors","slicePlaneEnabled","transparent","polygonOffset","writeDepth","sceneHasOcludees","transparencyPassType","enableOffset","camera","relativeElevation","multipassTerrainEnabled","cullAboveGround","getPassParameters","intersect","getGLMaterial","writeLinearDepth","c","createBufferWriter","updateParameters","_technique","_techniqueRep","releaseAndAcquire","_material","_output","beginSlot","configuration","_updateOccludeeState","hasOccludees","setParameterValues","ensureParameters","bind","bindPass","getPipelineState","color","ColorMaterial"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterial.js\";import{Material as t,materialParametersDefaults as i}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as s}from\"../lib/OrderIndependentTransparency.js\";import{DefaultBufferWriter as r,PositionColorLayout as a}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{ColorMaterialTechniqueConfiguration as u,ColorMaterialTechnique as h}from\"../shaders/ColorMaterialTechnique.js\";class o extends t{constructor(e){super(e,l),this.supportsEdges=!0,this.techniqueConfig=new u}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.vertexColors=this.params.vertexColors,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<s,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}getPassParameters(){return this.params}intersect(e,t,i,s,r,a,u){n(e,t,s,r,a,void 0,u)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output||1===e.output&&this.params.writeLinearDepth?new c(e):void 0}createBufferWriter(){return new r(a)}}class c extends e{constructor(e){super(e),this.updateParameters()}updateParameters(e){this._technique=this._techniqueRep.releaseAndAcquire(h,this._material.getTechniqueConfig(this._output,e),this._technique)}beginSlot(e){if(4===this._output)return 3===e;return e===(this._technique.configuration.transparent?this._technique.configuration.writeDepth?5:8:3)}_updateOccludeeState(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&this._material.setParameterValues({sceneHasOcludees:e.hasOccludees})}ensureParameters(e){0!==this._output&&7!==this._output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.getPassParameters(),e)}getPipelineState(e,t){return this._technique.getPipelineState(t)}}const l={color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,...i};export{o as ColorMaterial};\n"]},"metadata":{},"sourceType":"module"}