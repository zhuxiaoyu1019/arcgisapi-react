{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { VertexColor as o } from \"../attributes/VertexColor.glsl.js\";\nimport { MixExternalColor as e } from \"../util/MixExternalColor.glsl.js\";\nimport { glsl as r } from \"../../shaderModules/interfaces.js\";\n\nfunction a(a, t) {\n  a.include(o, t), a.fragment.include(e);\n  const l = a.fragment;\n  l.uniforms.add(\"uBaseColor\", \"vec4\"), l.uniforms.add(\"uObjectOpacity\", \"float\"), t.attributeColor ? l.code.add(r`vec3 _baseColor() {\nreturn uBaseColor.rgb * vColor.rgb;\n}\nfloat _baseOpacity() {\nreturn uBaseColor.a * vColor.a;\n}`) : l.code.add(r`vec3 _baseColor() {\nreturn uBaseColor.rgb;\n}\nfloat _baseOpacity() {\nreturn uBaseColor.a;\n}`), l.code.add(r`vec4 computeMaterialColor(vec4 textureColor, vec4 externalColor, int externalColorMixMode) {\nvec3 baseColor = _baseColor();\nfloat baseOpacity = _baseOpacity();\nvec3 color = mixExternalColor(\nbaseColor,\ntextureColor.rgb,\nexternalColor.rgb,\nexternalColorMixMode\n);\nfloat opacity = uObjectOpacity * mixExternalOpacity(\nbaseOpacity,\ntextureColor.a,\nexternalColor.a,\nexternalColorMixMode\n);\nreturn vec4(color, opacity);\n}`);\n}\n\nexport { a as ComputeMaterialColor };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeMaterialColor.glsl.js"],"names":["VertexColor","o","MixExternalColor","e","glsl","r","a","t","include","fragment","l","uniforms","add","attributeColor","code","ComputeMaterialColor"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,WAAW,IAAIC,CAAtB,QAA4B,mCAA5B;AAAgE,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,kCAAjC;AAAoE,SAAOC,IAAI,IAAIC,CAAf,QAAqB,mCAArB;;AAAyD,SAASC,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;AAACD,EAAAA,CAAC,CAACE,OAAF,CAAUP,CAAV,EAAYM,CAAZ,GAAeD,CAAC,CAACG,QAAF,CAAWD,OAAX,CAAmBL,CAAnB,CAAf;AAAqC,QAAMO,CAAC,GAACJ,CAAC,CAACG,QAAV;AAAmBC,EAAAA,CAAC,CAACC,QAAF,CAAWC,GAAX,CAAe,YAAf,EAA4B,MAA5B,GAAoCF,CAAC,CAACC,QAAF,CAAWC,GAAX,CAAe,gBAAf,EAAgC,OAAhC,CAApC,EAA6EL,CAAC,CAACM,cAAF,GAAiBH,CAAC,CAACI,IAAF,CAAOF,GAAP,CAAWP,CAAE;AAChX;AACA;AACA;AACA;AACA,EALmW,CAAjB,GAK9UK,CAAC,CAACI,IAAF,CAAOF,GAAP,CAAWP,CAAE;AACjB;AACA;AACA;AACA;AACA,EALI,CALiQ,EAUjQK,CAAC,CAACI,IAAF,CAAOF,GAAP,CAAWP,CAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAhBI,CAViQ;AA0BjQ;;AAAA,SAAOC,CAAC,IAAIS,oBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{VertexColor as o}from\"../attributes/VertexColor.glsl.js\";import{MixExternalColor as e}from\"../util/MixExternalColor.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function a(a,t){a.include(o,t),a.fragment.include(e);const l=a.fragment;l.uniforms.add(\"uBaseColor\",\"vec4\"),l.uniforms.add(\"uObjectOpacity\",\"float\"),t.attributeColor?l.code.add(r`vec3 _baseColor() {\nreturn uBaseColor.rgb * vColor.rgb;\n}\nfloat _baseOpacity() {\nreturn uBaseColor.a * vColor.a;\n}`):l.code.add(r`vec3 _baseColor() {\nreturn uBaseColor.rgb;\n}\nfloat _baseOpacity() {\nreturn uBaseColor.a;\n}`),l.code.add(r`vec4 computeMaterialColor(vec4 textureColor, vec4 externalColor, int externalColorMixMode) {\nvec3 baseColor = _baseColor();\nfloat baseOpacity = _baseOpacity();\nvec3 color = mixExternalColor(\nbaseColor,\ntextureColor.rgb,\nexternalColor.rgb,\nexternalColorMixMode\n);\nfloat opacity = uObjectOpacity * mixExternalOpacity(\nbaseOpacity,\ntextureColor.a,\nexternalColor.a,\nexternalColorMixMode\n);\nreturn vec4(color, opacity);\n}`)}export{a as ComputeMaterialColor};\n"]},"metadata":{},"sourceType":"module"}