{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { glsl as r } from \"../../shaderModules/interfaces.js\";\n\nfunction o(o) {\n  o.fragment.uniforms.add(\"lastFrameColorMap\", \"sampler2D\"), o.fragment.uniforms.add(\"reprojectionMat\", \"mat4\"), o.fragment.uniforms.add(\"rpProjectionMat\", \"mat4\"), o.fragment.code.add(r`vec2 reprojectionCoordinate(vec3 projectionCoordinate)\n{\nvec4 zw = rpProjectionMat * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);\nvec4 reprojectedCoord = reprojectionMat * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);\nreprojectedCoord.xy /= reprojectedCoord.w;\nreturn reprojectedCoord.xy * 0.5 + 0.5;\n}`);\n}\n\nfunction e(r, o) {\n  r.bindTexture(o.lastFrameColorTexture, \"lastFrameColorMap\"), r.setUniformMatrix4fv(\"reprojectionMat\", o.reprojectionMat), r.setUniformMatrix4fv(\"rpProjectionMat\", o.camera.projectionMatrix);\n}\n\nexport { o as Reprojection, e as bindReprojectionUniforms };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Reprojection.glsl.js"],"names":["glsl","r","o","fragment","uniforms","add","code","e","bindTexture","lastFrameColorTexture","setUniformMatrix4fv","reprojectionMat","camera","projectionMatrix","Reprojection","bindReprojectionUniforms"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,IAAI,IAAIC,CAAf,QAAqB,mCAArB;;AAAyD,SAASC,CAAT,CAAWA,CAAX,EAAa;AAACA,EAAAA,CAAC,CAACC,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,mBAAxB,EAA4C,WAA5C,GAAyDH,CAAC,CAACC,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,iBAAxB,EAA0C,MAA1C,CAAzD,EAA2GH,CAAC,CAACC,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,iBAAxB,EAA0C,MAA1C,CAA3G,EAA6JH,CAAC,CAACC,QAAF,CAAWG,IAAX,CAAgBD,GAAhB,CAAoBJ,CAAE;AAC1P;AACA;AACA;AACA;AACA;AACA,EANoO,CAA7J;AAMnE;;AAAA,SAASM,CAAT,CAAWN,CAAX,EAAaC,CAAb,EAAe;AAACD,EAAAA,CAAC,CAACO,WAAF,CAAcN,CAAC,CAACO,qBAAhB,EAAsC,mBAAtC,GAA2DR,CAAC,CAACS,mBAAF,CAAsB,iBAAtB,EAAwCR,CAAC,CAACS,eAA1C,CAA3D,EAAsHV,CAAC,CAACS,mBAAF,CAAsB,iBAAtB,EAAwCR,CAAC,CAACU,MAAF,CAASC,gBAAjD,CAAtH;AAAyL;;AAAA,SAAOX,CAAC,IAAIY,YAAZ,EAAyBP,CAAC,IAAIQ,wBAA9B","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o){o.fragment.uniforms.add(\"lastFrameColorMap\",\"sampler2D\"),o.fragment.uniforms.add(\"reprojectionMat\",\"mat4\"),o.fragment.uniforms.add(\"rpProjectionMat\",\"mat4\"),o.fragment.code.add(r`vec2 reprojectionCoordinate(vec3 projectionCoordinate)\n{\nvec4 zw = rpProjectionMat * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);\nvec4 reprojectedCoord = reprojectionMat * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);\nreprojectedCoord.xy /= reprojectedCoord.w;\nreturn reprojectedCoord.xy * 0.5 + 0.5;\n}`)}function e(r,o){r.bindTexture(o.lastFrameColorTexture,\"lastFrameColorMap\"),r.setUniformMatrix4fv(\"reprojectionMat\",o.reprojectionMat),r.setUniformMatrix4fv(\"rpProjectionMat\",o.camera.projectionMatrix)}export{o as Reprojection,e as bindReprojectionUniforms};\n"]},"metadata":{},"sourceType":"module"}