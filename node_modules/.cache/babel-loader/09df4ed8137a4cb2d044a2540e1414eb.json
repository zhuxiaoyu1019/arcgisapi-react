{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { FeatureServiceDatabaseType as e } from \"./shared.js\";\nimport { toWhereClauseFromTree as r } from \"./sqlUtils.js\";\nimport { WhereClause as t } from \"../../../core/sql/WhereClause.js\";\n\nfunction n(n) {\n  if (\"function\" === n.parseTree.type) {\n    if (0 === n.parseTree.args.value.length) return {\n      name: n.parseTree.name,\n      expr: null\n    };\n    if (n.parseTree.args.value.length > 1) throw new Error(\"Statistic does not have 1 or 0 Parameters\");\n    const a = t.create(r(n.parseTree.args.value[0], e.Standardised, n.parameters), n.fieldsIndex);\n    return {\n      name: n.parseTree.name,\n      expr: a\n    };\n  }\n\n  return null;\n}\n\nclass a {\n  clone() {\n    const e = new a();\n    return e.field = this.field, e.tofieldname = this.tofieldname, e.typeofstat = this.typeofstat, e.workingexpr = this.workingexpr, e;\n  }\n\n  static parseStatField(e, r, i) {\n    const s = new a();\n    s.field = e;\n    const o = t.create(r, i),\n          l = n(o);\n    if (null === l) throw new Error(\"Invalid Statistic Function\");\n    const p = l.name.toUpperCase().trim();\n\n    if (\"MIN\" === p) {\n      if (s.typeofstat = \"MIN\", s.workingexpr = l.expr, null === o) throw new Error(\"Invalid Statistic Function Parameters\");\n    } else if (\"MAX\" === p) {\n      if (s.typeofstat = \"MAX\", s.workingexpr = l.expr, null === o) throw new Error(\"Invalid Statistic Function Parameters\");\n    } else if (\"COUNT\" === p) s.typeofstat = \"COUNT\", s.workingexpr = l.expr;else if (\"STDEV\" === p) {\n      if (s.typeofstat = \"STDDEV\", s.workingexpr = l.expr, null === o) throw new Error(\"Invalid Statistic Function Parameters\");\n    } else if (\"SUM\" === p) {\n      if (s.typeofstat = \"SUM\", s.workingexpr = l.expr, null === o) throw new Error(\"Invalid Statistic Function Parameters\");\n    } else if (\"MEAN\" === p) {\n      if (s.typeofstat = \"AVG\", s.workingexpr = l.expr, null === o) throw new Error(\"Invalid Statistic Function Parameters\");\n    } else if (\"AVG\" === p) {\n      if (s.typeofstat = \"AVG\", s.workingexpr = l.expr, null === o) throw new Error(\"Invalid Statistic Function Parameters\");\n    } else {\n      if (\"VAR\" !== p) throw new Error(\"Invalid Statistic Function\");\n      if (s.typeofstat = \"VAR\", s.workingexpr = l.expr, null === o) throw new Error(\"Invalid Statistic Function Parameters\");\n    }\n\n    return s;\n  }\n\n  toStatisticsName() {\n    switch (this.typeofstat.toUpperCase()) {\n      case \"MIN\":\n        return \"min\";\n\n      case \"MAX\":\n        return \"max\";\n\n      case \"SUM\":\n        return \"sum\";\n\n      case \"COUNT\":\n        return \"count\";\n\n      case \"VAR\":\n        return \"var\";\n\n      case \"STDDEV\":\n        return \"stddev\";\n\n      case \"AVG\":\n        return \"avg\";\n\n      default:\n        return \"count\";\n    }\n  }\n\n}\n\nexport default a;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/arcade/featureset/support/StatsField.js"],"names":["FeatureServiceDatabaseType","e","toWhereClauseFromTree","r","WhereClause","t","n","parseTree","type","args","value","length","name","expr","Error","a","create","Standardised","parameters","fieldsIndex","clone","field","tofieldname","typeofstat","workingexpr","parseStatField","i","s","o","l","p","toUpperCase","trim","toStatisticsName"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{FeatureServiceDatabaseType as e}from\"./shared.js\";import{toWhereClauseFromTree as r}from\"./sqlUtils.js\";import{WhereClause as t}from\"../../../core/sql/WhereClause.js\";function n(n){if(\"function\"===n.parseTree.type){if(0===n.parseTree.args.value.length)return{name:n.parseTree.name,expr:null};if(n.parseTree.args.value.length>1)throw new Error(\"Statistic does not have 1 or 0 Parameters\");const a=t.create(r(n.parseTree.args.value[0],e.Standardised,n.parameters),n.fieldsIndex);return{name:n.parseTree.name,expr:a}}return null}class a{clone(){const e=new a;return e.field=this.field,e.tofieldname=this.tofieldname,e.typeofstat=this.typeofstat,e.workingexpr=this.workingexpr,e}static parseStatField(e,r,i){const s=new a;s.field=e;const o=t.create(r,i),l=n(o);if(null===l)throw new Error(\"Invalid Statistic Function\");const p=l.name.toUpperCase().trim();if(\"MIN\"===p){if(s.typeofstat=\"MIN\",s.workingexpr=l.expr,null===o)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"MAX\"===p){if(s.typeofstat=\"MAX\",s.workingexpr=l.expr,null===o)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"COUNT\"===p)s.typeofstat=\"COUNT\",s.workingexpr=l.expr;else if(\"STDEV\"===p){if(s.typeofstat=\"STDDEV\",s.workingexpr=l.expr,null===o)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"SUM\"===p){if(s.typeofstat=\"SUM\",s.workingexpr=l.expr,null===o)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"MEAN\"===p){if(s.typeofstat=\"AVG\",s.workingexpr=l.expr,null===o)throw new Error(\"Invalid Statistic Function Parameters\")}else if(\"AVG\"===p){if(s.typeofstat=\"AVG\",s.workingexpr=l.expr,null===o)throw new Error(\"Invalid Statistic Function Parameters\")}else{if(\"VAR\"!==p)throw new Error(\"Invalid Statistic Function\");if(s.typeofstat=\"VAR\",s.workingexpr=l.expr,null===o)throw new Error(\"Invalid Statistic Function Parameters\")}return s}toStatisticsName(){switch(this.typeofstat.toUpperCase()){case\"MIN\":return\"min\";case\"MAX\":return\"max\";case\"SUM\":return\"sum\";case\"COUNT\":return\"count\";case\"VAR\":return\"var\";case\"STDDEV\":return\"stddev\";case\"AVG\":return\"avg\";default:return\"count\"}}}export default a;\n"]},"metadata":{},"sourceType":"module"}