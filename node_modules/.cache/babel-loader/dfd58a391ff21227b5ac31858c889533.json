{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport { on as t } from \"../core/watchUtils.js\";\nimport { aliasOf as i } from \"../core/accessorSupport/decorators/aliasOf.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { property as r } from \"../core/accessorSupport/decorators/property.js\";\nimport { subclass as s } from \"../core/accessorSupport/decorators/subclass.js\";\nimport o from \"./Widget.js\";\nimport n from \"./Attribution/AttributionViewModel.js\";\nimport { accessibleHandler as a } from \"./support/decorators/accessibleHandler.js\";\nimport { messageBundle as c } from \"./support/decorators/messageBundle.js\";\nimport { tsx as d } from \"./support/jsxFactory.js\";\nimport \"./support/widgetUtils.js\";\nconst p = {\n  base: \"esri-attribution esri-widget\",\n  anchor: \"esri-widget__anchor\",\n  poweredBy: \"esri-attribution__powered-by\",\n  sources: \"esri-attribution__sources\",\n  open: \"esri-attribution--open\",\n  sourcesOpen: \"esri-attribution__sources--open\",\n  link: \"esri-attribution__link\",\n  widgetIcon: \"esri-icon-description\",\n  interactive: \"esri-interactive\"\n};\nlet l = class extends o {\n  constructor(e, t) {\n    super(e, t), this._isOpen = !1, this._attributionTextOverflowed = !1, this._prevSourceNodeHeight = 0, this.iconClass = p.widgetIcon, this.itemDelimiter = \" | \", this.label = void 0, this.messages = null, this.view = null, this.viewModel = new n();\n  }\n\n  initialize() {\n    this.own(t(this, \"viewModel.items\", \"change\", () => this.scheduleRender()));\n  }\n\n  get attributionText() {\n    return this.viewModel.items.reduce((e, t) => (-1 === e.indexOf(t.text) && e.push(t.text), e), []).join(this.itemDelimiter);\n  }\n\n  render() {\n    const e = {\n      [p.open]: this._isOpen\n    };\n    return d(\"div\", {\n      bind: this,\n      class: this.classes(p.base, e),\n      onclick: this._toggleState,\n      onkeydown: this._toggleState\n    }, this.renderSourcesNode(), this.renderPoweredBy());\n  }\n\n  renderPoweredBy() {\n    return d(\"div\", {\n      class: p.poweredBy\n    }, \"Powered by\", \" \", d(\"a\", {\n      class: this.classes(p.link, p.anchor),\n      href: \"http://www.esri.com/\",\n      target: \"_blank\",\n      rel: \"noreferrer\"\n    }, \"Esri\"));\n  }\n\n  renderSourcesNode() {\n    const e = this._isOpen,\n          t = this._isInteractive(),\n          i = t ? 0 : -1,\n          {\n      attributionText: r\n    } = this,\n          s = t ? \"button\" : void 0,\n          o = {\n      [p.sourcesOpen]: e,\n      [p.interactive]: t\n    };\n\n    return d(\"div\", {\n      afterCreate: this._afterSourcesNodeCreate,\n      afterUpdate: this._afterSourcesNodeUpdate,\n      bind: this,\n      class: this.classes(p.sources, o),\n      innerHTML: r,\n      role: s,\n      tabIndex: i\n    });\n  }\n\n  _afterSourcesNodeCreate(e) {\n    this._prevSourceNodeHeight = e.clientWidth;\n  }\n\n  _afterSourcesNodeUpdate(e) {\n    let t = !1;\n    const {\n      clientHeight: i,\n      clientWidth: r,\n      scrollWidth: s\n    } = e,\n          o = s >= r,\n          n = this._attributionTextOverflowed !== o;\n\n    if (this._attributionTextOverflowed = o, n && (t = !0), this._isOpen) {\n      const e = i < this._prevSourceNodeHeight;\n      this._prevSourceNodeHeight = i, e && (this._isOpen = !1, t = !0);\n    }\n\n    t && this.scheduleRender();\n  }\n\n  _toggleState() {\n    this._isInteractive() && (this._isOpen = !this._isOpen);\n  }\n\n  _isInteractive() {\n    return this._isOpen || this._attributionTextOverflowed;\n  }\n\n};\ne([r({\n  readOnly: !0,\n  dependsOn: [\"viewModel.items.length\", \"itemDelimiter\"]\n})], l.prototype, \"attributionText\", null), e([r()], l.prototype, \"iconClass\", void 0), e([r()], l.prototype, \"itemDelimiter\", void 0), e([r({\n  aliasOf: {\n    source: \"messages.widgetLabel\",\n    overridable: !0\n  }\n})], l.prototype, \"label\", void 0), e([r(), c(\"esri/widgets/Attribution/t9n/Attribution\")], l.prototype, \"messages\", void 0), e([i(\"viewModel.view\")], l.prototype, \"view\", void 0), e([r({\n  type: n\n})], l.prototype, \"viewModel\", void 0), e([a()], l.prototype, \"_toggleState\", null), l = e([s(\"esri.widgets.Attribution\")], l);\nvar u = l;\nexport default u;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/widgets/Attribution.js"],"names":["_","e","on","t","aliasOf","i","property","r","subclass","s","o","n","accessibleHandler","a","messageBundle","c","tsx","d","p","base","anchor","poweredBy","sources","open","sourcesOpen","link","widgetIcon","interactive","l","constructor","_isOpen","_attributionTextOverflowed","_prevSourceNodeHeight","iconClass","itemDelimiter","label","messages","view","viewModel","initialize","own","scheduleRender","attributionText","items","reduce","indexOf","text","push","join","render","bind","class","classes","onclick","_toggleState","onkeydown","renderSourcesNode","renderPoweredBy","href","target","rel","_isInteractive","afterCreate","_afterSourcesNodeCreate","afterUpdate","_afterSourcesNodeUpdate","innerHTML","role","tabIndex","clientWidth","clientHeight","scrollWidth","readOnly","dependsOn","prototype","source","overridable","type","u"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{on as t}from\"../core/watchUtils.js\";import{aliasOf as i}from\"../core/accessorSupport/decorators/aliasOf.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import o from\"./Widget.js\";import n from\"./Attribution/AttributionViewModel.js\";import{accessibleHandler as a}from\"./support/decorators/accessibleHandler.js\";import{messageBundle as c}from\"./support/decorators/messageBundle.js\";import{tsx as d}from\"./support/jsxFactory.js\";import\"./support/widgetUtils.js\";const p={base:\"esri-attribution esri-widget\",anchor:\"esri-widget__anchor\",poweredBy:\"esri-attribution__powered-by\",sources:\"esri-attribution__sources\",open:\"esri-attribution--open\",sourcesOpen:\"esri-attribution__sources--open\",link:\"esri-attribution__link\",widgetIcon:\"esri-icon-description\",interactive:\"esri-interactive\"};let l=class extends o{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=p.widgetIcon,this.itemDelimiter=\" | \",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new n}initialize(){this.own(t(this,\"viewModel.items\",\"change\",(()=>this.scheduleRender())))}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(-1===e.indexOf(t.text)&&e.push(t.text),e)),[]).join(this.itemDelimiter)}render(){const e={[p.open]:this._isOpen};return d(\"div\",{bind:this,class:this.classes(p.base,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return d(\"div\",{class:p.poweredBy},\"Powered by\",\" \",d(\"a\",{class:this.classes(p.link,p.anchor),href:\"http://www.esri.com/\",target:\"_blank\",rel:\"noreferrer\"},\"Esri\"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive(),i=t?0:-1,{attributionText:r}=this,s=t?\"button\":void 0,o={[p.sourcesOpen]:e,[p.interactive]:t};return d(\"div\",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(p.sources,o),innerHTML:r,role:s,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,o=s>=r,n=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,n&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive()&&(this._isOpen=!this._isOpen)}_isInteractive(){return this._isOpen||this._attributionTextOverflowed}};e([r({readOnly:!0,dependsOn:[\"viewModel.items.length\",\"itemDelimiter\"]})],l.prototype,\"attributionText\",null),e([r()],l.prototype,\"iconClass\",void 0),e([r()],l.prototype,\"itemDelimiter\",void 0),e([r({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],l.prototype,\"label\",void 0),e([r(),c(\"esri/widgets/Attribution/t9n/Attribution\")],l.prototype,\"messages\",void 0),e([i(\"viewModel.view\")],l.prototype,\"view\",void 0),e([r({type:n})],l.prototype,\"viewModel\",void 0),e([a()],l.prototype,\"_toggleState\",null),l=e([s(\"esri.widgets.Attribution\")],l);var u=l;export default u;\n"]},"metadata":{},"sourceType":"module"}