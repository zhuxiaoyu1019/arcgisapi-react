{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../../chunks/tslib.es6.js\";\nimport { releaseMaybe as t, isSome as s } from \"../../../../../../core/maybe.js\";\nimport { C as r } from \"../../../../../../chunks/vec3.js\";\nimport { f as o } from \"../../../../../../chunks/vec3f32.js\";\nimport { v as a, g as i, c as l } from \"../../../../../../chunks/vec4.js\";\nimport { f as n } from \"../../../../../../chunks/vec4f32.js\";\nimport { f as h } from \"../../../../../../chunks/vec4f64.js\";\nimport { ComponentTechniqueConfiguration as c, ComponentTechnique as p } from \"./ComponentTechnique.js\";\nimport { a as u } from \"../../../../../../chunks/ComponentShader.glsl.js\";\nimport { MaterialBase as d, parameter as m, parameterBlock as v, MaterialParameterBlock as y } from \"../../../core/material/MaterialBase.js\";\nimport { defaultMaskAlphaCutoff as b } from \"../../../core/shaderLibrary/util/AlphaDiscard.glsl.js\";\n\nclass x extends d {\n  constructor() {\n    super(...arguments), this.baseColor = n(1, 1, 1, 1), this.usePBR = !1, this.hasParametersFromSource = !1, this.mrrFactors = o(1, 1, .5), this.emissiveFactor = o(0, 0, 0), this.baseColorTexture = null, this.metallicRoughnessTexture = null, this.emissionTexture = null, this.occlusionTexture = null, this.normalTexture = null, this.overlayTexOffset = h(-1, -1, -1, -1), this.overlayTexScale = h(0, 0, 0, 0), this.overlayColor = null, this.overlayHighlight = null, this.overlayNormal = null, this.objectOpacity = 1, this.commonMaterialParameters = new g(), this.componentParameters = new M(), this.alphaCutoff = b, this.alphaDiscardMode = 1, this.isIntegratedMesh = !1, this.polygonOffsetEnabled = !1, this.ellipsoidMode = 1, this.sceneHasOcludees = !1, this._techniqueConfig = new c();\n  }\n\n  dispose() {\n    this._technique = t(this._technique), this.baseColorTexture = null, this.metallicRoughnessTexture = null, this.emissionTexture = null, this.occlusionTexture = null, this.normalTexture = null;\n  }\n\n  getTechnique(e, t, r) {\n    const o = this._techniqueConfig;\n\n    if (o.hasVertexColors = r.colors, o.hasNormals = r.normals, o.vertexTextureCoordinates = r.textureCoordinates, o.usePBR = this.usePBR, o.hasMetalnessAndRoughnessTexture = s(this.metallicRoughnessTexture), o.hasEmissionTexture = s(this.emissionTexture), o.hasOcclusionTexture = s(this.occlusionTexture), o.hasNormalTexture = s(this.normalTexture), o.transparencyPassType = 0 === t.identifier && null != t.transparencyPassType ? t.transparencyPassType : 3, o.multipassTerrainEnabled = 0 === t.identifier && null != t.multipassTerrainParams && t.multipassTerrainParams.multipassTerrainEnabled, o.cullAboveGround = 0 === t.identifier && null != t.multipassTerrainParams && t.multipassTerrainParams.cullAboveGround, o.ellipsoidMode = this.ellipsoidMode, this.dirty) {\n      o.componentData = this.componentParameters.type, o.cullFace = this.commonMaterialParameters.cullFace, o.doubleSidedMode = this.commonMaterialParameters.doubleSided ? 1 : 0, o.baseColorTexture = s(this.baseColorTexture), o.isSchematic = this.hasParametersFromSource && !s(this.baseColorTexture);\n\n      const e = this._computeWhichMaterialPass();\n\n      o.blendingEnabled = 1 === e || 2 === e, o.alphaDiscardMode = this.alphaDiscardMode, o.integratedMeshMode = this.isIntegratedMesh ? this.overlayColor ? this.overlayNormal ? 3 : 2 : 1 : 0, o.polygonOffsetEnabled = this.polygonOffsetEnabled, this._setClean();\n    }\n\n    return o.slicePlaneEnabled = t.slicePlaneEnabled && this.commonMaterialParameters.slicePlaneEnabled, 1 === t.identifier ? (o.output = 3, o.vertexDiscardMode = 0) : 2 === t.identifier ? (o.output = 4, o.vertexDiscardMode = 0) : (2 === this._computeWhichMaterialPass() ? o.vertexDiscardMode = t.transparent ? 2 : 1 : o.vertexDiscardMode = 0, o.output = T(t.subPass), 1 === t.subPass && (o.sceneHasOcludees = t.sceneHasOcludees), 0 === t.subPass ? (o.receiveAmbientOcclusion = t.ambientOcclusionEnabled, o.sceneHasOcludees = t.sceneHasOcludees, o.receiveShadows = t.shadowsEnabled, o.ssrEnabled = t.ssrParams.ssrEnabled) : (o.receiveAmbientOcclusion = !1, o.receiveShadows = !1)), this._technique = e.releaseAndAcquire(p, o, this._technique), this._technique;\n  }\n\n  submit(e, t) {\n    if (0 === this.objectOpacity) return;\n    const r = t.renderable.geometry,\n          o = t.components,\n          a = t.renderable.drawParameters,\n          i = t.renderable.meta.cameraDepthSquared,\n          l = o.geometryRanges,\n          n = o.highlightRanges,\n          h = o.defaultShadowMapRanges;\n\n    switch (this._computeWhichMaterialPass()) {\n      case 0:\n        e.materialOpaque.submitDraw(this, r, l, a, i);\n        break;\n\n      case 1:\n        e.materialTransparent.submitDraw(this, r, l, a, i);\n        break;\n\n      case 2:\n        e.materialOpaque.submitDraw(this, r, l, a, i), e.materialTransparent.submitDraw(this, r, l, a, i);\n        break;\n\n      case 3:\n        e.materialIntegratedMesh.submitDraw(this, r, l, a, i), this.overlayHighlight && e.highlightIntegratedMesh.submitDraw(this, r, l, a, i);\n    }\n\n    s(e.shadowMap) && 2 !== this.componentParameters.castShadows && e.shadowMap.submitDraw(this, r, l, a, i), s(e.highlight) && s(n) && e.highlight.submitDraw(this, r, n, a, i), s(e.highlightShadowMap) && 2 !== this.componentParameters.castShadows && s(n) && e.highlightShadowMap.submitDraw(this, r, n, a, i), s(e.defaultShadowMap) && 2 !== this.componentParameters.castShadows && s(h) && e.defaultShadowMap.submitDraw(this, r, h, a, i);\n  }\n\n  get attributeLocations() {\n    return u;\n  }\n\n  _computeWhichMaterialPass() {\n    return this.isIntegratedMesh ? 3 : this.objectOpacity < 1 ? 1 : 0 === this.componentParameters.opaqueOverride ? 0 : this.baseColor[3] < 1 || 0 === this.alphaDiscardMode || 3 === this.alphaDiscardMode ? 1 : 2 === this.componentParameters.transparent ? 0 : 0 === this.componentParameters.transparent ? 1 : 2;\n  }\n\n}\n\ne([m({\n  vectorOps: a\n})], x.prototype, \"baseColor\", void 0), e([m()], x.prototype, \"usePBR\", void 0), e([m()], x.prototype, \"hasParametersFromSource\", void 0), e([m({\n  vectorOps: r\n})], x.prototype, \"mrrFactors\", void 0), e([m({\n  vectorOps: r\n})], x.prototype, \"emissiveFactor\", void 0), e([m({\n  dispose: !0\n})], x.prototype, \"baseColorTexture\", void 0), e([m({\n  dispose: !0\n})], x.prototype, \"metallicRoughnessTexture\", void 0), e([m({\n  dispose: !0\n})], x.prototype, \"emissionTexture\", void 0), e([m({\n  dispose: !0\n})], x.prototype, \"occlusionTexture\", void 0), e([m({\n  dispose: !0\n})], x.prototype, \"normalTexture\", void 0), e([m({\n  vectorOps: {\n    equals: i,\n    copy: l\n  }\n})], x.prototype, \"overlayTexOffset\", void 0), e([m({\n  vectorOps: {\n    equals: i,\n    copy: l\n  }\n})], x.prototype, \"overlayTexScale\", void 0), e([m()], x.prototype, \"overlayColor\", void 0), e([m()], x.prototype, \"overlayHighlight\", void 0), e([m()], x.prototype, \"overlayNormal\", void 0), e([m()], x.prototype, \"objectOpacity\", void 0), e([v()], x.prototype, \"commonMaterialParameters\", void 0), e([v()], x.prototype, \"componentParameters\", void 0), e([m()], x.prototype, \"alphaCutoff\", void 0), e([m()], x.prototype, \"alphaDiscardMode\", void 0), e([m()], x.prototype, \"isIntegratedMesh\", void 0), e([m()], x.prototype, \"polygonOffsetEnabled\", void 0), e([m()], x.prototype, \"ellipsoidMode\", void 0), e([m()], x.prototype, \"sceneHasOcludees\", void 0);\n\nclass g extends y {\n  constructor() {\n    super(...arguments), this.doubleSided = !1, this.cullFace = 2, this.slicePlaneEnabled = !0;\n  }\n\n}\n\ne([m()], g.prototype, \"doubleSided\", void 0), e([m()], g.prototype, \"cullFace\", void 0), e([m()], g.prototype, \"slicePlaneEnabled\", void 0);\n\nclass M extends y {\n  constructor() {\n    super(...arguments), this.externalColor = n(1, 1, 1, 1), this.externalColorMixMode = 1, this.castShadows = 0;\n  }\n\n  get transparent() {\n    return this.externalColor[3] < 1 ? 0 : 2;\n  }\n\n  get opaqueOverride() {\n    return 3 === this.externalColorMixMode && 1 === this.externalColor[3] ? 0 : 2;\n  }\n\n  get visible() {\n    return this.externalColor[3] > 0 ? 0 : 2;\n  }\n\n  get type() {\n    return 0;\n  }\n\n}\n\ne([m({\n  vectorOps: a\n})], M.prototype, \"externalColor\", void 0), e([m()], M.prototype, \"externalColorMixMode\", void 0), e([m()], M.prototype, \"castShadows\", void 0);\n\nclass f extends y {\n  constructor() {\n    super(...arguments), this.texture = null, this.transparent = 2, this.opaqueOverride = 2, this.castShadows = 2;\n  }\n\n  get type() {\n    return 1;\n  }\n\n}\n\nfunction T(e) {\n  switch (e) {\n    case 0:\n      return 0;\n\n    case 1:\n      return 7;\n\n    case 2:\n      return 1;\n\n    case 3:\n      return 2;\n\n    case 4:\n      return 8;\n  }\n}\n\ne([m()], f.prototype, \"texture\", void 0), e([m()], f.prototype, \"transparent\", void 0), e([m()], f.prototype, \"opaqueOverride\", void 0), e([m()], f.prototype, \"castShadows\", void 0);\nexport { g as CommonMaterialParameters, x as ComponentMaterial, M as ComponentParametersUniform, f as ComponentParametersVarying };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/ComponentMaterial.js"],"names":["_","e","releaseMaybe","t","isSome","s","C","r","f","o","v","a","g","i","c","l","n","h","ComponentTechniqueConfiguration","ComponentTechnique","p","u","MaterialBase","d","parameter","m","parameterBlock","MaterialParameterBlock","y","defaultMaskAlphaCutoff","b","x","constructor","arguments","baseColor","usePBR","hasParametersFromSource","mrrFactors","emissiveFactor","baseColorTexture","metallicRoughnessTexture","emissionTexture","occlusionTexture","normalTexture","overlayTexOffset","overlayTexScale","overlayColor","overlayHighlight","overlayNormal","objectOpacity","commonMaterialParameters","componentParameters","M","alphaCutoff","alphaDiscardMode","isIntegratedMesh","polygonOffsetEnabled","ellipsoidMode","sceneHasOcludees","_techniqueConfig","dispose","_technique","getTechnique","hasVertexColors","colors","hasNormals","normals","vertexTextureCoordinates","textureCoordinates","hasMetalnessAndRoughnessTexture","hasEmissionTexture","hasOcclusionTexture","hasNormalTexture","transparencyPassType","identifier","multipassTerrainEnabled","multipassTerrainParams","cullAboveGround","dirty","componentData","type","cullFace","doubleSidedMode","doubleSided","isSchematic","_computeWhichMaterialPass","blendingEnabled","integratedMeshMode","_setClean","slicePlaneEnabled","output","vertexDiscardMode","transparent","T","subPass","receiveAmbientOcclusion","ambientOcclusionEnabled","receiveShadows","shadowsEnabled","ssrEnabled","ssrParams","releaseAndAcquire","submit","renderable","geometry","components","drawParameters","meta","cameraDepthSquared","geometryRanges","highlightRanges","defaultShadowMapRanges","materialOpaque","submitDraw","materialTransparent","materialIntegratedMesh","highlightIntegratedMesh","shadowMap","castShadows","highlight","highlightShadowMap","defaultShadowMap","attributeLocations","opaqueOverride","vectorOps","prototype","equals","copy","externalColor","externalColorMixMode","visible","texture","CommonMaterialParameters","ComponentMaterial","ComponentParametersUniform","ComponentParametersVarying"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,uCAAlB;AAA0D,SAAOC,YAAY,IAAIC,CAAvB,EAAyBC,MAAM,IAAIC,CAAnC,QAAyC,iCAAzC;AAA2E,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,kCAAlB;AAAqD,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,qCAAlB;AAAwD,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,EAAqBC,CAAC,IAAIC,CAA1B,QAAgC,kCAAhC;AAAmE,SAAOP,CAAC,IAAIQ,CAAZ,QAAkB,qCAAlB;AAAwD,SAAOR,CAAC,IAAIS,CAAZ,QAAkB,qCAAlB;AAAwD,SAAOC,+BAA+B,IAAIJ,CAA1C,EAA4CK,kBAAkB,IAAIC,CAAlE,QAAwE,yBAAxE;AAAkG,SAAOT,CAAC,IAAIU,CAAZ,QAAkB,kDAAlB;AAAqE,SAAOC,YAAY,IAAIC,CAAvB,EAAyBC,SAAS,IAAIC,CAAtC,EAAwCC,cAAc,IAAIhB,CAA1D,EAA4DiB,sBAAsB,IAAIC,CAAtF,QAA4F,wCAA5F;AAAqI,SAAOC,sBAAsB,IAAIC,CAAjC,QAAuC,uDAAvC;;AAA+F,MAAMC,CAAN,SAAgBR,CAAhB,CAAiB;AAACS,EAAAA,WAAW,GAAE;AAAC,UAAM,GAAGC,SAAT,GAAoB,KAAKC,SAAL,GAAelB,CAAC,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAApC,EAA8C,KAAKmB,MAAL,GAAY,CAAC,CAA3D,EAA6D,KAAKC,uBAAL,GAA6B,CAAC,CAA3F,EAA6F,KAAKC,UAAL,GAAgB5B,CAAC,CAAC,CAAD,EAAG,CAAH,EAAK,EAAL,CAA9G,EAAuH,KAAK6B,cAAL,GAAoB7B,CAAC,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAA5I,EAAoJ,KAAK8B,gBAAL,GAAsB,IAA1K,EAA+K,KAAKC,wBAAL,GAA8B,IAA7M,EAAkN,KAAKC,eAAL,GAAqB,IAAvO,EAA4O,KAAKC,gBAAL,GAAsB,IAAlQ,EAAuQ,KAAKC,aAAL,GAAmB,IAA1R,EAA+R,KAAKC,gBAAL,GAAsB3B,CAAC,CAAC,CAAC,CAAF,EAAI,CAAC,CAAL,EAAO,CAAC,CAAR,EAAU,CAAC,CAAX,CAAtT,EAAoU,KAAK4B,eAAL,GAAqB5B,CAAC,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAA1V,EAAoW,KAAK6B,YAAL,GAAkB,IAAtX,EAA2X,KAAKC,gBAAL,GAAsB,IAAjZ,EAAsZ,KAAKC,aAAL,GAAmB,IAAza,EAA8a,KAAKC,aAAL,GAAmB,CAAjc,EAAmc,KAAKC,wBAAL,GAA8B,IAAItC,CAAJ,EAAje,EAAue,KAAKuC,mBAAL,GAAyB,IAAIC,CAAJ,EAAhgB,EAAsgB,KAAKC,WAAL,GAAiBvB,CAAvhB,EAAyhB,KAAKwB,gBAAL,GAAsB,CAA/iB,EAAijB,KAAKC,gBAAL,GAAsB,CAAC,CAAxkB,EAA0kB,KAAKC,oBAAL,GAA0B,CAAC,CAArmB,EAAumB,KAAKC,aAAL,GAAmB,CAA1nB,EAA4nB,KAAKC,gBAAL,GAAsB,CAAC,CAAnpB,EAAqpB,KAAKC,gBAAL,GAAsB,IAAI7C,CAAJ,EAA3qB;AAAirB;;AAAA8C,EAAAA,OAAO,GAAE;AAAC,SAAKC,UAAL,GAAgB1D,CAAC,CAAC,KAAK0D,UAAN,CAAjB,EAAmC,KAAKtB,gBAAL,GAAsB,IAAzD,EAA8D,KAAKC,wBAAL,GAA8B,IAA5F,EAAiG,KAAKC,eAAL,GAAqB,IAAtH,EAA2H,KAAKC,gBAAL,GAAsB,IAAjJ,EAAsJ,KAAKC,aAAL,GAAmB,IAAzK;AAA8K;;AAAAmB,EAAAA,YAAY,CAAC7D,CAAD,EAAGE,CAAH,EAAKI,CAAL,EAAO;AAAC,UAAME,CAAC,GAAC,KAAKkD,gBAAb;;AAA8B,QAAGlD,CAAC,CAACsD,eAAF,GAAkBxD,CAAC,CAACyD,MAApB,EAA2BvD,CAAC,CAACwD,UAAF,GAAa1D,CAAC,CAAC2D,OAA1C,EAAkDzD,CAAC,CAAC0D,wBAAF,GAA2B5D,CAAC,CAAC6D,kBAA/E,EAAkG3D,CAAC,CAAC0B,MAAF,GAAS,KAAKA,MAAhH,EAAuH1B,CAAC,CAAC4D,+BAAF,GAAkChE,CAAC,CAAC,KAAKmC,wBAAN,CAA1J,EAA0L/B,CAAC,CAAC6D,kBAAF,GAAqBjE,CAAC,CAAC,KAAKoC,eAAN,CAAhN,EAAuOhC,CAAC,CAAC8D,mBAAF,GAAsBlE,CAAC,CAAC,KAAKqC,gBAAN,CAA9P,EAAsRjC,CAAC,CAAC+D,gBAAF,GAAmBnE,CAAC,CAAC,KAAKsC,aAAN,CAA1S,EAA+TlC,CAAC,CAACgE,oBAAF,GAAuB,MAAItE,CAAC,CAACuE,UAAN,IAAkB,QAAMvE,CAAC,CAACsE,oBAA1B,GAA+CtE,CAAC,CAACsE,oBAAjD,GAAsE,CAA5Z,EAA8ZhE,CAAC,CAACkE,uBAAF,GAA0B,MAAIxE,CAAC,CAACuE,UAAN,IAAkB,QAAMvE,CAAC,CAACyE,sBAA1B,IAAkDzE,CAAC,CAACyE,sBAAF,CAAyBD,uBAAngB,EAA2hBlE,CAAC,CAACoE,eAAF,GAAkB,MAAI1E,CAAC,CAACuE,UAAN,IAAkB,QAAMvE,CAAC,CAACyE,sBAA1B,IAAkDzE,CAAC,CAACyE,sBAAF,CAAyBC,eAAxnB,EAAwoBpE,CAAC,CAACgD,aAAF,GAAgB,KAAKA,aAA7pB,EAA2qB,KAAKqB,KAAnrB,EAAyrB;AAACrE,MAAAA,CAAC,CAACsE,aAAF,GAAgB,KAAK5B,mBAAL,CAAyB6B,IAAzC,EAA8CvE,CAAC,CAACwE,QAAF,GAAW,KAAK/B,wBAAL,CAA8B+B,QAAvF,EAAgGxE,CAAC,CAACyE,eAAF,GAAkB,KAAKhC,wBAAL,CAA8BiC,WAA9B,GAA0C,CAA1C,GAA4C,CAA9J,EAAgK1E,CAAC,CAAC8B,gBAAF,GAAmBlC,CAAC,CAAC,KAAKkC,gBAAN,CAApL,EAA4M9B,CAAC,CAAC2E,WAAF,GAAc,KAAKhD,uBAAL,IAA8B,CAAC/B,CAAC,CAAC,KAAKkC,gBAAN,CAA1P;;AAAkR,YAAMtC,CAAC,GAAC,KAAKoF,yBAAL,EAAR;;AAAyC5E,MAAAA,CAAC,CAAC6E,eAAF,GAAkB,MAAIrF,CAAJ,IAAO,MAAIA,CAA7B,EAA+BQ,CAAC,CAAC6C,gBAAF,GAAmB,KAAKA,gBAAvD,EAAwE7C,CAAC,CAAC8E,kBAAF,GAAqB,KAAKhC,gBAAL,GAAsB,KAAKT,YAAL,GAAkB,KAAKE,aAAL,GAAmB,CAAnB,GAAqB,CAAvC,GAAyC,CAA/D,GAAiE,CAA9J,EAAgKvC,CAAC,CAAC+C,oBAAF,GAAuB,KAAKA,oBAA5L,EAAiN,KAAKgC,SAAL,EAAjN;AAAkO;;AAAA,WAAO/E,CAAC,CAACgF,iBAAF,GAAoBtF,CAAC,CAACsF,iBAAF,IAAqB,KAAKvC,wBAAL,CAA8BuC,iBAAvE,EAAyF,MAAItF,CAAC,CAACuE,UAAN,IAAkBjE,CAAC,CAACiF,MAAF,GAAS,CAAT,EAAWjF,CAAC,CAACkF,iBAAF,GAAoB,CAAjD,IAAoD,MAAIxF,CAAC,CAACuE,UAAN,IAAkBjE,CAAC,CAACiF,MAAF,GAAS,CAAT,EAAWjF,CAAC,CAACkF,iBAAF,GAAoB,CAAjD,KAAqD,MAAI,KAAKN,yBAAL,EAAJ,GAAqC5E,CAAC,CAACkF,iBAAF,GAAoBxF,CAAC,CAACyF,WAAF,GAAc,CAAd,GAAgB,CAAzE,GAA2EnF,CAAC,CAACkF,iBAAF,GAAoB,CAA/F,EAAiGlF,CAAC,CAACiF,MAAF,GAASG,CAAC,CAAC1F,CAAC,CAAC2F,OAAH,CAA3G,EAAuH,MAAI3F,CAAC,CAAC2F,OAAN,KAAgBrF,CAAC,CAACiD,gBAAF,GAAmBvD,CAAC,CAACuD,gBAArC,CAAvH,EAA8K,MAAIvD,CAAC,CAAC2F,OAAN,IAAerF,CAAC,CAACsF,uBAAF,GAA0B5F,CAAC,CAAC6F,uBAA5B,EAAoDvF,CAAC,CAACiD,gBAAF,GAAmBvD,CAAC,CAACuD,gBAAzE,EAA0FjD,CAAC,CAACwF,cAAF,GAAiB9F,CAAC,CAAC+F,cAA7G,EAA4HzF,CAAC,CAAC0F,UAAF,GAAahG,CAAC,CAACiG,SAAF,CAAYD,UAApK,KAAiL1F,CAAC,CAACsF,uBAAF,GAA0B,CAAC,CAA3B,EAA6BtF,CAAC,CAACwF,cAAF,GAAiB,CAAC,CAAhO,CAAnO,CAA7I,EAAolB,KAAKpC,UAAL,GAAgB5D,CAAC,CAACoG,iBAAF,CAAoBjF,CAApB,EAAsBX,CAAtB,EAAwB,KAAKoD,UAA7B,CAApmB,EAA6oB,KAAKA,UAAzpB;AAAoqB;;AAAAyC,EAAAA,MAAM,CAACrG,CAAD,EAAGE,CAAH,EAAK;AAAC,QAAG,MAAI,KAAK8C,aAAZ,EAA0B;AAAO,UAAM1C,CAAC,GAACJ,CAAC,CAACoG,UAAF,CAAaC,QAArB;AAAA,UAA8B/F,CAAC,GAACN,CAAC,CAACsG,UAAlC;AAAA,UAA6C9F,CAAC,GAACR,CAAC,CAACoG,UAAF,CAAaG,cAA5D;AAAA,UAA2E7F,CAAC,GAACV,CAAC,CAACoG,UAAF,CAAaI,IAAb,CAAkBC,kBAA/F;AAAA,UAAkH7F,CAAC,GAACN,CAAC,CAACoG,cAAtH;AAAA,UAAqI7F,CAAC,GAACP,CAAC,CAACqG,eAAzI;AAAA,UAAyJ7F,CAAC,GAACR,CAAC,CAACsG,sBAA7J;;AAAoL,YAAO,KAAK1B,yBAAL,EAAP;AAAyC,WAAK,CAAL;AAAOpF,QAAAA,CAAC,CAAC+G,cAAF,CAAiBC,UAAjB,CAA4B,IAA5B,EAAiC1G,CAAjC,EAAmCQ,CAAnC,EAAqCJ,CAArC,EAAuCE,CAAvC;AAA0C;;AAAM,WAAK,CAAL;AAAOZ,QAAAA,CAAC,CAACiH,mBAAF,CAAsBD,UAAtB,CAAiC,IAAjC,EAAsC1G,CAAtC,EAAwCQ,CAAxC,EAA0CJ,CAA1C,EAA4CE,CAA5C;AAA+C;;AAAM,WAAK,CAAL;AAAOZ,QAAAA,CAAC,CAAC+G,cAAF,CAAiBC,UAAjB,CAA4B,IAA5B,EAAiC1G,CAAjC,EAAmCQ,CAAnC,EAAqCJ,CAArC,EAAuCE,CAAvC,GAA0CZ,CAAC,CAACiH,mBAAF,CAAsBD,UAAtB,CAAiC,IAAjC,EAAsC1G,CAAtC,EAAwCQ,CAAxC,EAA0CJ,CAA1C,EAA4CE,CAA5C,CAA1C;AAAyF;;AAAM,WAAK,CAAL;AAAOZ,QAAAA,CAAC,CAACkH,sBAAF,CAAyBF,UAAzB,CAAoC,IAApC,EAAyC1G,CAAzC,EAA2CQ,CAA3C,EAA6CJ,CAA7C,EAA+CE,CAA/C,GAAkD,KAAKkC,gBAAL,IAAuB9C,CAAC,CAACmH,uBAAF,CAA0BH,UAA1B,CAAqC,IAArC,EAA0C1G,CAA1C,EAA4CQ,CAA5C,EAA8CJ,CAA9C,EAAgDE,CAAhD,CAAzE;AAAzQ;;AAAqYR,IAAAA,CAAC,CAACJ,CAAC,CAACoH,SAAH,CAAD,IAAgB,MAAI,KAAKlE,mBAAL,CAAyBmE,WAA7C,IAA0DrH,CAAC,CAACoH,SAAF,CAAYJ,UAAZ,CAAuB,IAAvB,EAA4B1G,CAA5B,EAA8BQ,CAA9B,EAAgCJ,CAAhC,EAAkCE,CAAlC,CAA1D,EAA+FR,CAAC,CAACJ,CAAC,CAACsH,SAAH,CAAD,IAAgBlH,CAAC,CAACW,CAAD,CAAjB,IAAsBf,CAAC,CAACsH,SAAF,CAAYN,UAAZ,CAAuB,IAAvB,EAA4B1G,CAA5B,EAA8BS,CAA9B,EAAgCL,CAAhC,EAAkCE,CAAlC,CAArH,EAA0JR,CAAC,CAACJ,CAAC,CAACuH,kBAAH,CAAD,IAAyB,MAAI,KAAKrE,mBAAL,CAAyBmE,WAAtD,IAAmEjH,CAAC,CAACW,CAAD,CAApE,IAAyEf,CAAC,CAACuH,kBAAF,CAAqBP,UAArB,CAAgC,IAAhC,EAAqC1G,CAArC,EAAuCS,CAAvC,EAAyCL,CAAzC,EAA2CE,CAA3C,CAAnO,EAAiRR,CAAC,CAACJ,CAAC,CAACwH,gBAAH,CAAD,IAAuB,MAAI,KAAKtE,mBAAL,CAAyBmE,WAApD,IAAiEjH,CAAC,CAACY,CAAD,CAAlE,IAAuEhB,CAAC,CAACwH,gBAAF,CAAmBR,UAAnB,CAA8B,IAA9B,EAAmC1G,CAAnC,EAAqCU,CAArC,EAAuCN,CAAvC,EAAyCE,CAAzC,CAAxV;AAAoY;;AAAsB,MAAlB6G,kBAAkB,GAAE;AAAC,WAAOrG,CAAP;AAAS;;AAAAgE,EAAAA,yBAAyB,GAAE;AAAC,WAAO,KAAK9B,gBAAL,GAAsB,CAAtB,GAAwB,KAAKN,aAAL,GAAmB,CAAnB,GAAqB,CAArB,GAAuB,MAAI,KAAKE,mBAAL,CAAyBwE,cAA7B,GAA4C,CAA5C,GAA8C,KAAKzF,SAAL,CAAe,CAAf,IAAkB,CAAlB,IAAqB,MAAI,KAAKoB,gBAA9B,IAAgD,MAAI,KAAKA,gBAAzD,GAA0E,CAA1E,GAA4E,MAAI,KAAKH,mBAAL,CAAyByC,WAA7B,GAAyC,CAAzC,GAA2C,MAAI,KAAKzC,mBAAL,CAAyByC,WAA7B,GAAyC,CAAzC,GAA2C,CAAtQ;AAAwQ;;AAArlI;;AAAslI3F,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmG,EAAAA,SAAS,EAACjH;AAAX,CAAD,CAAF,CAAD,EAAoBoB,CAAC,CAAC8F,SAAtB,EAAgC,WAAhC,EAA4C,KAAK,CAAjD,CAAD,EAAqD5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,QAAnB,EAA4B,KAAK,CAAjC,CAAtD,EAA0F5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,yBAAnB,EAA6C,KAAK,CAAlD,CAA3F,EAAgJ5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmG,EAAAA,SAAS,EAACrH;AAAX,CAAD,CAAF,CAAD,EAAoBwB,CAAC,CAAC8F,SAAtB,EAAgC,YAAhC,EAA6C,KAAK,CAAlD,CAAjJ,EAAsM5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmG,EAAAA,SAAS,EAACrH;AAAX,CAAD,CAAF,CAAD,EAAoBwB,CAAC,CAAC8F,SAAtB,EAAgC,gBAAhC,EAAiD,KAAK,CAAtD,CAAvM,EAAgQ5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmC,EAAAA,OAAO,EAAC,CAAC;AAAV,CAAD,CAAF,CAAD,EAAmB7B,CAAC,CAAC8F,SAArB,EAA+B,kBAA/B,EAAkD,KAAK,CAAvD,CAAjQ,EAA2T5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmC,EAAAA,OAAO,EAAC,CAAC;AAAV,CAAD,CAAF,CAAD,EAAmB7B,CAAC,CAAC8F,SAArB,EAA+B,0BAA/B,EAA0D,KAAK,CAA/D,CAA5T,EAA8X5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmC,EAAAA,OAAO,EAAC,CAAC;AAAV,CAAD,CAAF,CAAD,EAAmB7B,CAAC,CAAC8F,SAArB,EAA+B,iBAA/B,EAAiD,KAAK,CAAtD,CAA/X,EAAwb5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmC,EAAAA,OAAO,EAAC,CAAC;AAAV,CAAD,CAAF,CAAD,EAAmB7B,CAAC,CAAC8F,SAArB,EAA+B,kBAA/B,EAAkD,KAAK,CAAvD,CAAzb,EAAmf5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmC,EAAAA,OAAO,EAAC,CAAC;AAAV,CAAD,CAAF,CAAD,EAAmB7B,CAAC,CAAC8F,SAArB,EAA+B,eAA/B,EAA+C,KAAK,CAApD,CAApf,EAA2iB5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmG,EAAAA,SAAS,EAAC;AAACE,IAAAA,MAAM,EAACjH,CAAR;AAAUkH,IAAAA,IAAI,EAAChH;AAAf;AAAX,CAAD,CAAF,CAAD,EAAoCgB,CAAC,CAAC8F,SAAtC,EAAgD,kBAAhD,EAAmE,KAAK,CAAxE,CAA5iB,EAAunB5H,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmG,EAAAA,SAAS,EAAC;AAACE,IAAAA,MAAM,EAACjH,CAAR;AAAUkH,IAAAA,IAAI,EAAChH;AAAf;AAAX,CAAD,CAAF,CAAD,EAAoCgB,CAAC,CAAC8F,SAAtC,EAAgD,iBAAhD,EAAkE,KAAK,CAAvE,CAAxnB,EAAksB5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,cAAnB,EAAkC,KAAK,CAAvC,CAAnsB,EAA6uB5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,kBAAnB,EAAsC,KAAK,CAA3C,CAA9uB,EAA4xB5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,eAAnB,EAAmC,KAAK,CAAxC,CAA7xB,EAAw0B5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,eAAnB,EAAmC,KAAK,CAAxC,CAAz0B,EAAo3B5H,CAAC,CAAC,CAACS,CAAC,EAAF,CAAD,EAAOqB,CAAC,CAAC8F,SAAT,EAAmB,0BAAnB,EAA8C,KAAK,CAAnD,CAAr3B,EAA26B5H,CAAC,CAAC,CAACS,CAAC,EAAF,CAAD,EAAOqB,CAAC,CAAC8F,SAAT,EAAmB,qBAAnB,EAAyC,KAAK,CAA9C,CAA56B,EAA69B5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAA99B,EAAugC5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,kBAAnB,EAAsC,KAAK,CAA3C,CAAxgC,EAAsjC5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,kBAAnB,EAAsC,KAAK,CAA3C,CAAvjC,EAAqmC5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,sBAAnB,EAA0C,KAAK,CAA/C,CAAtmC,EAAwpC5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,eAAnB,EAAmC,KAAK,CAAxC,CAAzpC,EAAosC5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC8F,SAAT,EAAmB,kBAAnB,EAAsC,KAAK,CAA3C,CAArsC;;AAAmvC,MAAMjH,CAAN,SAAgBgB,CAAhB,CAAiB;AAACI,EAAAA,WAAW,GAAE;AAAC,UAAM,GAAGC,SAAT,GAAoB,KAAKkD,WAAL,GAAiB,CAAC,CAAtC,EAAwC,KAAKF,QAAL,GAAc,CAAtD,EAAwD,KAAKQ,iBAAL,GAAuB,CAAC,CAAhF;AAAkF;;AAAjG;;AAAkGxF,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOb,CAAC,CAACiH,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAAD,EAA0C5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOb,CAAC,CAACiH,SAAT,EAAmB,UAAnB,EAA8B,KAAK,CAAnC,CAA3C,EAAiF5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOb,CAAC,CAACiH,SAAT,EAAmB,mBAAnB,EAAuC,KAAK,CAA5C,CAAlF;;AAAiI,MAAMzE,CAAN,SAAgBxB,CAAhB,CAAiB;AAACI,EAAAA,WAAW,GAAE;AAAC,UAAM,GAAGC,SAAT,GAAoB,KAAK+F,aAAL,GAAmBhH,CAAC,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAAxC,EAAkD,KAAKiH,oBAAL,GAA0B,CAA5E,EAA8E,KAAKX,WAAL,GAAiB,CAA/F;AAAiG;;AAAe,MAAX1B,WAAW,GAAE;AAAC,WAAO,KAAKoC,aAAL,CAAmB,CAAnB,IAAsB,CAAtB,GAAwB,CAAxB,GAA0B,CAAjC;AAAmC;;AAAkB,MAAdL,cAAc,GAAE;AAAC,WAAO,MAAI,KAAKM,oBAAT,IAA+B,MAAI,KAAKD,aAAL,CAAmB,CAAnB,CAAnC,GAAyD,CAAzD,GAA2D,CAAlE;AAAoE;;AAAW,MAAPE,OAAO,GAAE;AAAC,WAAO,KAAKF,aAAL,CAAmB,CAAnB,IAAsB,CAAtB,GAAwB,CAAxB,GAA0B,CAAjC;AAAmC;;AAAQ,MAAJhD,IAAI,GAAE;AAAC,WAAO,CAAP;AAAS;;AAAnU;;AAAoU/E,CAAC,CAAC,CAACwB,CAAC,CAAC;AAACmG,EAAAA,SAAS,EAACjH;AAAX,CAAD,CAAF,CAAD,EAAoByC,CAAC,CAACyE,SAAtB,EAAgC,eAAhC,EAAgD,KAAK,CAArD,CAAD,EAAyD5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAO2B,CAAC,CAACyE,SAAT,EAAmB,sBAAnB,EAA0C,KAAK,CAA/C,CAA1D,EAA4G5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAO2B,CAAC,CAACyE,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAA7G;;AAAsJ,MAAMrH,CAAN,SAAgBoB,CAAhB,CAAiB;AAACI,EAAAA,WAAW,GAAE;AAAC,UAAM,GAAGC,SAAT,GAAoB,KAAKkG,OAAL,GAAa,IAAjC,EAAsC,KAAKvC,WAAL,GAAiB,CAAvD,EAAyD,KAAK+B,cAAL,GAAoB,CAA7E,EAA+E,KAAKL,WAAL,GAAiB,CAAhG;AAAkG;;AAAQ,MAAJtC,IAAI,GAAE;AAAC,WAAO,CAAP;AAAS;;AAArI;;AAAsI,SAASa,CAAT,CAAW5F,CAAX,EAAa;AAAC,UAAOA,CAAP;AAAU,SAAK,CAAL;AAAO,aAAO,CAAP;;AAAS,SAAK,CAAL;AAAO,aAAO,CAAP;;AAAS,SAAK,CAAL;AAAO,aAAO,CAAP;;AAAS,SAAK,CAAL;AAAO,aAAO,CAAP;;AAAS,SAAK,CAAL;AAAO,aAAO,CAAP;AAAjF;AAA2F;;AAAAA,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOjB,CAAC,CAACqH,SAAT,EAAmB,SAAnB,EAA6B,KAAK,CAAlC,CAAD,EAAsC5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOjB,CAAC,CAACqH,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAAvC,EAAgF5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOjB,CAAC,CAACqH,SAAT,EAAmB,gBAAnB,EAAoC,KAAK,CAAzC,CAAjF,EAA6H5H,CAAC,CAAC,CAACwB,CAAC,EAAF,CAAD,EAAOjB,CAAC,CAACqH,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAA9H;AAAuK,SAAOjH,CAAC,IAAIwH,wBAAZ,EAAqCrG,CAAC,IAAIsG,iBAA1C,EAA4DjF,CAAC,IAAIkF,0BAAjE,EAA4F9H,CAAC,IAAI+H,0BAAjG","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{releaseMaybe as t,isSome as s}from\"../../../../../../core/maybe.js\";import{C as r}from\"../../../../../../chunks/vec3.js\";import{f as o}from\"../../../../../../chunks/vec3f32.js\";import{v as a,g as i,c as l}from\"../../../../../../chunks/vec4.js\";import{f as n}from\"../../../../../../chunks/vec4f32.js\";import{f as h}from\"../../../../../../chunks/vec4f64.js\";import{ComponentTechniqueConfiguration as c,ComponentTechnique as p}from\"./ComponentTechnique.js\";import{a as u}from\"../../../../../../chunks/ComponentShader.glsl.js\";import{MaterialBase as d,parameter as m,parameterBlock as v,MaterialParameterBlock as y}from\"../../../core/material/MaterialBase.js\";import{defaultMaskAlphaCutoff as b}from\"../../../core/shaderLibrary/util/AlphaDiscard.glsl.js\";class x extends d{constructor(){super(...arguments),this.baseColor=n(1,1,1,1),this.usePBR=!1,this.hasParametersFromSource=!1,this.mrrFactors=o(1,1,.5),this.emissiveFactor=o(0,0,0),this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.emissionTexture=null,this.occlusionTexture=null,this.normalTexture=null,this.overlayTexOffset=h(-1,-1,-1,-1),this.overlayTexScale=h(0,0,0,0),this.overlayColor=null,this.overlayHighlight=null,this.overlayNormal=null,this.objectOpacity=1,this.commonMaterialParameters=new g,this.componentParameters=new M,this.alphaCutoff=b,this.alphaDiscardMode=1,this.isIntegratedMesh=!1,this.polygonOffsetEnabled=!1,this.ellipsoidMode=1,this.sceneHasOcludees=!1,this._techniqueConfig=new c}dispose(){this._technique=t(this._technique),this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.emissionTexture=null,this.occlusionTexture=null,this.normalTexture=null}getTechnique(e,t,r){const o=this._techniqueConfig;if(o.hasVertexColors=r.colors,o.hasNormals=r.normals,o.vertexTextureCoordinates=r.textureCoordinates,o.usePBR=this.usePBR,o.hasMetalnessAndRoughnessTexture=s(this.metallicRoughnessTexture),o.hasEmissionTexture=s(this.emissionTexture),o.hasOcclusionTexture=s(this.occlusionTexture),o.hasNormalTexture=s(this.normalTexture),o.transparencyPassType=0===t.identifier&&null!=t.transparencyPassType?t.transparencyPassType:3,o.multipassTerrainEnabled=0===t.identifier&&null!=t.multipassTerrainParams&&t.multipassTerrainParams.multipassTerrainEnabled,o.cullAboveGround=0===t.identifier&&null!=t.multipassTerrainParams&&t.multipassTerrainParams.cullAboveGround,o.ellipsoidMode=this.ellipsoidMode,this.dirty){o.componentData=this.componentParameters.type,o.cullFace=this.commonMaterialParameters.cullFace,o.doubleSidedMode=this.commonMaterialParameters.doubleSided?1:0,o.baseColorTexture=s(this.baseColorTexture),o.isSchematic=this.hasParametersFromSource&&!s(this.baseColorTexture);const e=this._computeWhichMaterialPass();o.blendingEnabled=1===e||2===e,o.alphaDiscardMode=this.alphaDiscardMode,o.integratedMeshMode=this.isIntegratedMesh?this.overlayColor?this.overlayNormal?3:2:1:0,o.polygonOffsetEnabled=this.polygonOffsetEnabled,this._setClean()}return o.slicePlaneEnabled=t.slicePlaneEnabled&&this.commonMaterialParameters.slicePlaneEnabled,1===t.identifier?(o.output=3,o.vertexDiscardMode=0):2===t.identifier?(o.output=4,o.vertexDiscardMode=0):(2===this._computeWhichMaterialPass()?o.vertexDiscardMode=t.transparent?2:1:o.vertexDiscardMode=0,o.output=T(t.subPass),1===t.subPass&&(o.sceneHasOcludees=t.sceneHasOcludees),0===t.subPass?(o.receiveAmbientOcclusion=t.ambientOcclusionEnabled,o.sceneHasOcludees=t.sceneHasOcludees,o.receiveShadows=t.shadowsEnabled,o.ssrEnabled=t.ssrParams.ssrEnabled):(o.receiveAmbientOcclusion=!1,o.receiveShadows=!1)),this._technique=e.releaseAndAcquire(p,o,this._technique),this._technique}submit(e,t){if(0===this.objectOpacity)return;const r=t.renderable.geometry,o=t.components,a=t.renderable.drawParameters,i=t.renderable.meta.cameraDepthSquared,l=o.geometryRanges,n=o.highlightRanges,h=o.defaultShadowMapRanges;switch(this._computeWhichMaterialPass()){case 0:e.materialOpaque.submitDraw(this,r,l,a,i);break;case 1:e.materialTransparent.submitDraw(this,r,l,a,i);break;case 2:e.materialOpaque.submitDraw(this,r,l,a,i),e.materialTransparent.submitDraw(this,r,l,a,i);break;case 3:e.materialIntegratedMesh.submitDraw(this,r,l,a,i),this.overlayHighlight&&e.highlightIntegratedMesh.submitDraw(this,r,l,a,i)}s(e.shadowMap)&&2!==this.componentParameters.castShadows&&e.shadowMap.submitDraw(this,r,l,a,i),s(e.highlight)&&s(n)&&e.highlight.submitDraw(this,r,n,a,i),s(e.highlightShadowMap)&&2!==this.componentParameters.castShadows&&s(n)&&e.highlightShadowMap.submitDraw(this,r,n,a,i),s(e.defaultShadowMap)&&2!==this.componentParameters.castShadows&&s(h)&&e.defaultShadowMap.submitDraw(this,r,h,a,i)}get attributeLocations(){return u}_computeWhichMaterialPass(){return this.isIntegratedMesh?3:this.objectOpacity<1?1:0===this.componentParameters.opaqueOverride?0:this.baseColor[3]<1||0===this.alphaDiscardMode||3===this.alphaDiscardMode?1:2===this.componentParameters.transparent?0:0===this.componentParameters.transparent?1:2}}e([m({vectorOps:a})],x.prototype,\"baseColor\",void 0),e([m()],x.prototype,\"usePBR\",void 0),e([m()],x.prototype,\"hasParametersFromSource\",void 0),e([m({vectorOps:r})],x.prototype,\"mrrFactors\",void 0),e([m({vectorOps:r})],x.prototype,\"emissiveFactor\",void 0),e([m({dispose:!0})],x.prototype,\"baseColorTexture\",void 0),e([m({dispose:!0})],x.prototype,\"metallicRoughnessTexture\",void 0),e([m({dispose:!0})],x.prototype,\"emissionTexture\",void 0),e([m({dispose:!0})],x.prototype,\"occlusionTexture\",void 0),e([m({dispose:!0})],x.prototype,\"normalTexture\",void 0),e([m({vectorOps:{equals:i,copy:l}})],x.prototype,\"overlayTexOffset\",void 0),e([m({vectorOps:{equals:i,copy:l}})],x.prototype,\"overlayTexScale\",void 0),e([m()],x.prototype,\"overlayColor\",void 0),e([m()],x.prototype,\"overlayHighlight\",void 0),e([m()],x.prototype,\"overlayNormal\",void 0),e([m()],x.prototype,\"objectOpacity\",void 0),e([v()],x.prototype,\"commonMaterialParameters\",void 0),e([v()],x.prototype,\"componentParameters\",void 0),e([m()],x.prototype,\"alphaCutoff\",void 0),e([m()],x.prototype,\"alphaDiscardMode\",void 0),e([m()],x.prototype,\"isIntegratedMesh\",void 0),e([m()],x.prototype,\"polygonOffsetEnabled\",void 0),e([m()],x.prototype,\"ellipsoidMode\",void 0),e([m()],x.prototype,\"sceneHasOcludees\",void 0);class g extends y{constructor(){super(...arguments),this.doubleSided=!1,this.cullFace=2,this.slicePlaneEnabled=!0}}e([m()],g.prototype,\"doubleSided\",void 0),e([m()],g.prototype,\"cullFace\",void 0),e([m()],g.prototype,\"slicePlaneEnabled\",void 0);class M extends y{constructor(){super(...arguments),this.externalColor=n(1,1,1,1),this.externalColorMixMode=1,this.castShadows=0}get transparent(){return this.externalColor[3]<1?0:2}get opaqueOverride(){return 3===this.externalColorMixMode&&1===this.externalColor[3]?0:2}get visible(){return this.externalColor[3]>0?0:2}get type(){return 0}}e([m({vectorOps:a})],M.prototype,\"externalColor\",void 0),e([m()],M.prototype,\"externalColorMixMode\",void 0),e([m()],M.prototype,\"castShadows\",void 0);class f extends y{constructor(){super(...arguments),this.texture=null,this.transparent=2,this.opaqueOverride=2,this.castShadows=2}get type(){return 1}}function T(e){switch(e){case 0:return 0;case 1:return 7;case 2:return 1;case 3:return 2;case 4:return 8}}e([m()],f.prototype,\"texture\",void 0),e([m()],f.prototype,\"transparent\",void 0),e([m()],f.prototype,\"opaqueOverride\",void 0),e([m()],f.prototype,\"castShadows\",void 0);export{g as CommonMaterialParameters,x as ComponentMaterial,M as ComponentParametersUniform,f as ComponentParametersVarying};\n"]},"metadata":{},"sourceType":"module"}