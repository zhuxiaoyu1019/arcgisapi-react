{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport e from \"../../../core/Accessor.js\";\nimport i from \"../../../core/Logger.js\";\nimport { clamp as o, deg2rad as s } from \"../../../core/mathUtils.js\";\nimport { property as r } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { earth as n } from \"../../../geometry/support/Ellipsoid.js\";\nimport { makePiecewiseLinearFunction as l } from \"../support/mathUtils.js\";\nconst m = i.getLogger(\"esri.views.3d.state.Constraints\");\nlet c = class extends e {\n  constructor(t) {\n    super(t), this.collision = new x(), this.distance = 1 / 0, this.minimumPoiDistance = 4;\n  }\n\n  get altitude() {\n    return 2 === this.mode ? null : this._get(\"altitude\") || null;\n  }\n\n  set altitude(t) {\n    2 !== this.mode ? this._set(\"altitude\", t) : m.warn(\"Altitude constraint is ignored in local scenes\");\n  }\n\n  clampAltitude(t) {\n    return this.altitude ? o(t, this.altitude.min, this.altitude.max) : t;\n  }\n\n  clampTilt(t, e) {\n    if (!this.tilt) return e;\n    const i = this.tilt(t);\n    return o(e, i.min, i.max);\n  }\n\n  clampDistance(t) {\n    return Math.min(t, this.distance);\n  }\n\n  createDefaultTilt() {\n    return 2 === this.mode ? this.createDefaultTiltLocal() : this.createDefaultTiltGlobal();\n  }\n\n  createConstantMaxTilt(t) {\n    return (e, i = h) => (i.min = d.min, i.max = t, i);\n  }\n\n  createDefaultTiltLocal() {\n    const t = this.collision.enabled ? l([[4e3, d.max], [1e4, s(88)], [6e6, s(88)]]) : () => d.max;\n    return (e, i = h) => (i.min = d.min, i.max = t(e), i);\n  }\n\n  createDefaultTiltGlobal() {\n    const t = this.collision.enabled ? l([[4e3, d.max], [5e4, s(88)], [6e6, s(88)], [2e7, d.min]]) : l([[3e5, d.max], [3e6, s(88)], [6e6, s(88)], [2e7, d.min]]);\n    return (e, i = h) => (i.min = d.min, i.max = t(e), i);\n  }\n\n};\n\nfunction p(t) {\n  return {\n    min: -2e5,\n    max: 4 * t.radius\n  };\n}\n\nt([r()], c.prototype, \"altitude\", null), t([r({\n  readOnly: !0\n})], c.prototype, \"collision\", void 0), t([r()], c.prototype, \"distance\", void 0), t([r({\n  readOnly: !0\n})], c.prototype, \"minimumPoiDistance\", void 0), t([r()], c.prototype, \"tilt\", void 0), t([r({\n  constructOnly: !0\n})], c.prototype, \"mode\", void 0), c = t([a(\"esri.views.3d.state.Constraints\")], c);\nconst u = p(n),\n      d = {\n  min: s(.5),\n  max: s(179.5)\n},\n      h = {\n  min: 0,\n  max: 0\n};\nlet x = class extends e {\n  constructor() {\n    super(...arguments), this.enabled = !0, this.elevationMargin = 5;\n  }\n\n};\nt([r({\n  type: Boolean\n})], x.prototype, \"enabled\", void 0), t([r({\n  type: Number\n})], x.prototype, \"elevationMargin\", void 0), x = t([a(\"esri.views.3d.state.Constraints.CollisionConstraint\")], x);\nvar f = c;\nexport default f;\nexport { c as Constraints, d as TiltDefault, u as earthAltitudeConstraint };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/state/Constraints.js"],"names":["_","t","e","i","clamp","o","deg2rad","s","property","r","subclass","a","earth","n","makePiecewiseLinearFunction","l","m","getLogger","c","constructor","collision","x","distance","minimumPoiDistance","altitude","mode","_get","_set","warn","clampAltitude","min","max","clampTilt","tilt","clampDistance","Math","createDefaultTilt","createDefaultTiltLocal","createDefaultTiltGlobal","createConstantMaxTilt","h","d","enabled","p","radius","prototype","readOnly","constructOnly","u","arguments","elevationMargin","type","Boolean","Number","f","Constraints","TiltDefault","earthAltitudeConstraint"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Accessor.js\";import i from\"../../../core/Logger.js\";import{clamp as o,deg2rad as s}from\"../../../core/mathUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{earth as n}from\"../../../geometry/support/Ellipsoid.js\";import{makePiecewiseLinearFunction as l}from\"../support/mathUtils.js\";const m=i.getLogger(\"esri.views.3d.state.Constraints\");let c=class extends e{constructor(t){super(t),this.collision=new x,this.distance=1/0,this.minimumPoiDistance=4}get altitude(){return 2===this.mode?null:this._get(\"altitude\")||null}set altitude(t){2!==this.mode?this._set(\"altitude\",t):m.warn(\"Altitude constraint is ignored in local scenes\")}clampAltitude(t){return this.altitude?o(t,this.altitude.min,this.altitude.max):t}clampTilt(t,e){if(!this.tilt)return e;const i=this.tilt(t);return o(e,i.min,i.max)}clampDistance(t){return Math.min(t,this.distance)}createDefaultTilt(){return 2===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()}createConstantMaxTilt(t){return(e,i=h)=>(i.min=d.min,i.max=t,i)}createDefaultTiltLocal(){const t=this.collision.enabled?l([[4e3,d.max],[1e4,s(88)],[6e6,s(88)]]):()=>d.max;return(e,i=h)=>(i.min=d.min,i.max=t(e),i)}createDefaultTiltGlobal(){const t=this.collision.enabled?l([[4e3,d.max],[5e4,s(88)],[6e6,s(88)],[2e7,d.min]]):l([[3e5,d.max],[3e6,s(88)],[6e6,s(88)],[2e7,d.min]]);return(e,i=h)=>(i.min=d.min,i.max=t(e),i)}};function p(t){return{min:-2e5,max:4*t.radius}}t([r()],c.prototype,\"altitude\",null),t([r({readOnly:!0})],c.prototype,\"collision\",void 0),t([r()],c.prototype,\"distance\",void 0),t([r({readOnly:!0})],c.prototype,\"minimumPoiDistance\",void 0),t([r()],c.prototype,\"tilt\",void 0),t([r({constructOnly:!0})],c.prototype,\"mode\",void 0),c=t([a(\"esri.views.3d.state.Constraints\")],c);const u=p(n),d={min:s(.5),max:s(179.5)},h={min:0,max:0};let x=class extends e{constructor(){super(...arguments),this.enabled=!0,this.elevationMargin=5}};t([r({type:Boolean})],x.prototype,\"enabled\",void 0),t([r({type:Number})],x.prototype,\"elevationMargin\",void 0),x=t([a(\"esri.views.3d.state.Constraints.CollisionConstraint\")],x);var f=c;export default f;export{c as Constraints,d as TiltDefault,u as earthAltitudeConstraint};\n"]},"metadata":{},"sourceType":"module"}