{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { Q as t } from \"../../../chunks/languageUtils.js\";\nimport { isNumber as n, isString as e, equalityTest as r } from \"./shared.js\";\nimport { isSingleField as u, predictType as l } from \"./sqlUtils.js\";\nimport { reject as c, create as a } from \"../../../core/promiseUtils.js\";\n\nfunction s(t) {\n  return t = +t, isFinite(t) ? t - t % 1 || (t < 0 ? -0 : 0 === t ? t : 0) : t;\n}\n\nfunction i(t) {\n  let n = 0;\n\n  for (let e = 0; e < t.length; e++) n += t[e];\n\n  return n / t.length;\n}\n\nfunction o(t) {\n  const n = i(t);\n  let e = 0;\n\n  for (let r = 0; r < t.length; r++) e += (n - t[r]) ** 2;\n\n  return e / t.length;\n}\n\nfunction h(t) {\n  const n = i(t);\n  let e = 0;\n\n  for (let r = 0; r < t.length; r++) e += (n - t[r]) ** 2;\n\n  return e / (t.length - 1);\n}\n\nfunction f(t) {\n  let n = 0;\n\n  for (let e = 0; e < t.length; e++) n += t[e];\n\n  return n;\n}\n\nfunction g(t, u) {\n  const l = [],\n        c = {},\n        a = [];\n\n  for (let s = 0; s < t.length; s++) {\n    if (void 0 !== t[s] && null !== t[s]) {\n      const u = t[s];\n      if (n(u) || e(u)) void 0 === c[u] && (l.push(u), c[u] = 1);else {\n        let t = !1;\n\n        for (let n = 0; n < a.length; n++) !0 === r(a[n], u) && (t = !0);\n\n        !1 === t && (a.push(u), l.push(u));\n      }\n    }\n\n    if (l.length >= u && -1 !== u) return l;\n  }\n\n  return l;\n}\n\nfunction m(t) {\n  switch (t.toLowerCase()) {\n    case \"distinct\":\n      return \"distinct\";\n\n    case \"avg\":\n    case \"mean\":\n      return \"avg\";\n\n    case \"min\":\n      return \"min\";\n\n    case \"sum\":\n      return \"sum\";\n\n    case \"max\":\n      return \"max\";\n\n    case \"stdev\":\n    case \"stddev\":\n      return \"stddev\";\n\n    case \"var\":\n    case \"variance\":\n      return \"var\";\n\n    case \"count\":\n      return \"count\";\n  }\n\n  return \"\";\n}\n\nfunction p(t, n, e = 1e3) {\n  switch (t.toLowerCase()) {\n    case \"distinct\":\n      return g(n, e);\n\n    case \"avg\":\n    case \"mean\":\n      return i(n);\n\n    case \"min\":\n      return Math.min.apply(Math, n);\n\n    case \"sum\":\n      return f(n);\n\n    case \"max\":\n      return Math.max.apply(Math, n);\n\n    case \"stdev\":\n    case \"stddev\":\n      return Math.sqrt(o(n));\n\n    case \"var\":\n    case \"variance\":\n      return o(n);\n\n    case \"count\":\n      return n.length;\n  }\n\n  return 0;\n}\n\nfunction d(t, n, e) {\n  return q(t, n, e, !0).then(t => 0 === t.length ? null : Math.min.apply(Math, t));\n}\n\nfunction v(t, n, e) {\n  return q(t, n, e, !0).then(t => 0 === t.length ? null : Math.max.apply(Math, t));\n}\n\nfunction M(t, n, e) {\n  let r = \"\";\n  return !1 === u(n) && (r = l(n, t.fields, null)), q(t, n, e, !0).then(t => {\n    if (0 === t.length) return null;\n    const n = i(t);\n    return null === n ? n : \"integer\" === r ? s(n) : n;\n  });\n}\n\nfunction x(t, n, e) {\n  return q(t, n, e, !0).then(t => 0 === t.length ? null : h(t));\n}\n\nfunction y(t, n, e) {\n  return q(t, n, e, !0).then(t => 0 === t.length ? null : Math.sqrt(h(t)));\n}\n\nfunction j(t, n, e) {\n  return q(t, n, e, !0).then(t => 0 === t.length ? null : f(t));\n}\n\nfunction w(t, n) {\n  try {\n    return t.iterator(n).count();\n  } catch (e) {\n    return c(e);\n  }\n}\n\nfunction q(t, n, e, r = !1) {\n  try {\n    const u = t.iterator(e);\n    return a((t, e) => {\n      U(u, [], n, r, t, e);\n    });\n  } catch (u) {\n    return c(u);\n  }\n}\n\nfunction U(n, e, r, u, l, c) {\n  t(n.next().then(t => {\n    try {\n      if (null !== t) {\n        const a = r.calculateValue(t);\n        return null === a ? !1 === u && (e[e.length] = a) : e[e.length] = a, U(n, e, r, u, l, c);\n      }\n\n      l(e);\n    } catch (a) {\n      c(a);\n    }\n  }, c));\n}\n\nfunction C(t, n, e = 1e3, r = null) {\n  return L(t, n, e, r);\n}\n\nfunction L(t, n, e, r) {\n  try {\n    return V(t.iterator(r), {}, [], n, e);\n  } catch (u) {\n    return c(u);\n  }\n}\n\nfunction V(t, n, e, r, u) {\n  return t.next().then(l => {\n    if (null !== l) {\n      const c = r.calculateValue(l);\n      return null != c && void 0 === n[c] && (e.push(c), n[c] = 1), e.length >= u && -1 !== u ? e : V(t, n, e, r, u);\n    }\n\n    return e;\n  });\n}\n\nexport { p as calculateStat, w as count, m as decodeStatType, C as distinct, v as max, M as mean, d as min, y as stdev, j as sum, x as variance };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/arcade/featureset/support/stats.js"],"names":["Q","t","isNumber","n","isString","e","equalityTest","r","isSingleField","u","predictType","l","reject","c","create","a","s","isFinite","i","length","o","h","f","g","push","m","toLowerCase","p","Math","min","apply","max","sqrt","d","q","then","v","M","fields","x","y","j","w","iterator","count","U","next","calculateValue","C","L","V","calculateStat","decodeStatType","distinct","mean","stdev","sum","variance"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Q as t}from\"../../../chunks/languageUtils.js\";import{isNumber as n,isString as e,equalityTest as r}from\"./shared.js\";import{isSingleField as u,predictType as l}from\"./sqlUtils.js\";import{reject as c,create as a}from\"../../../core/promiseUtils.js\";function s(t){return t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t}function i(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n/t.length}function o(t){const n=i(t);let e=0;for(let r=0;r<t.length;r++)e+=(n-t[r])**2;return e/t.length}function h(t){const n=i(t);let e=0;for(let r=0;r<t.length;r++)e+=(n-t[r])**2;return e/(t.length-1)}function f(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}function g(t,u){const l=[],c={},a=[];for(let s=0;s<t.length;s++){if(void 0!==t[s]&&null!==t[s]){const u=t[s];if(n(u)||e(u))void 0===c[u]&&(l.push(u),c[u]=1);else{let t=!1;for(let n=0;n<a.length;n++)!0===r(a[n],u)&&(t=!0);!1===t&&(a.push(u),l.push(u))}}if(l.length>=u&&-1!==u)return l}return l}function m(t){switch(t.toLowerCase()){case\"distinct\":return\"distinct\";case\"avg\":case\"mean\":return\"avg\";case\"min\":return\"min\";case\"sum\":return\"sum\";case\"max\":return\"max\";case\"stdev\":case\"stddev\":return\"stddev\";case\"var\":case\"variance\":return\"var\";case\"count\":return\"count\"}return\"\"}function p(t,n,e=1e3){switch(t.toLowerCase()){case\"distinct\":return g(n,e);case\"avg\":case\"mean\":return i(n);case\"min\":return Math.min.apply(Math,n);case\"sum\":return f(n);case\"max\":return Math.max.apply(Math,n);case\"stdev\":case\"stddev\":return Math.sqrt(o(n));case\"var\":case\"variance\":return o(n);case\"count\":return n.length}return 0}function d(t,n,e){return q(t,n,e,!0).then((t=>0===t.length?null:Math.min.apply(Math,t)))}function v(t,n,e){return q(t,n,e,!0).then((t=>0===t.length?null:Math.max.apply(Math,t)))}function M(t,n,e){let r=\"\";return!1===u(n)&&(r=l(n,t.fields,null)),q(t,n,e,!0).then((t=>{if(0===t.length)return null;const n=i(t);return null===n?n:\"integer\"===r?s(n):n}))}function x(t,n,e){return q(t,n,e,!0).then((t=>0===t.length?null:h(t)))}function y(t,n,e){return q(t,n,e,!0).then((t=>0===t.length?null:Math.sqrt(h(t))))}function j(t,n,e){return q(t,n,e,!0).then((t=>0===t.length?null:f(t)))}function w(t,n){try{return t.iterator(n).count()}catch(e){return c(e)}}function q(t,n,e,r=!1){try{const u=t.iterator(e);return a(((t,e)=>{U(u,[],n,r,t,e)}))}catch(u){return c(u)}}function U(n,e,r,u,l,c){t(n.next().then((t=>{try{if(null!==t){const a=r.calculateValue(t);return null===a?!1===u&&(e[e.length]=a):e[e.length]=a,U(n,e,r,u,l,c)}l(e)}catch(a){c(a)}}),c))}function C(t,n,e=1e3,r=null){return L(t,n,e,r)}function L(t,n,e,r){try{return V(t.iterator(r),{},[],n,e)}catch(u){return c(u)}}function V(t,n,e,r,u){return t.next().then((l=>{if(null!==l){const c=r.calculateValue(l);return null!=c&&void 0===n[c]&&(e.push(c),n[c]=1),e.length>=u&&-1!==u?e:V(t,n,e,r,u)}return e}))}export{p as calculateStat,w as count,m as decodeStatType,C as distinct,v as max,M as mean,d as min,y as stdev,j as sum,x as variance};\n"]},"metadata":{},"sourceType":"module"}