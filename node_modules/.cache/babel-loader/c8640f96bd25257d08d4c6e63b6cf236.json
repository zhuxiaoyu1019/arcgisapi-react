{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../../Color.js\";\nimport { isSome as e, isNone as o } from \"../../core/maybe.js\";\nimport { getVisualVariableValues as r } from \"../visualVariables/support/visualVariableUtils.js\";\n\nfunction i(t, o) {\n  if (!t || t.symbol) return null;\n  const r = o && o.renderer;\n  return t && e(r) && r.getObservationRenderer ? r.getObservationRenderer(t) : r;\n}\n\nfunction n(t, o) {\n  if (e(t.symbol)) return t.symbol;\n  const r = i(t, o);\n  return e(r) && \"dot-density\" !== r.type ? r.getSymbol(t, o) : null;\n}\n\nfunction a(t, e) {\n  const a = i(t, e),\n        l = n(t, e);\n  if (o(l)) return null;\n  const s = {\n    renderer: a,\n    symbol: l\n  };\n  if (o(a) || !(\"visualVariables\" in a) || !a.visualVariables) return s;\n  const u = r(a, t, e),\n        c = [\"proportional\", \"proportional\", \"proportional\"];\n\n  for (const {\n    variable: o,\n    value: r\n  } of u) switch (o.type) {\n    case \"color\":\n      s.color = r.toRgba();\n      break;\n\n    case \"size\":\n      if (\"outline\" === o.target) s.outlineSize = r;else {\n        const t = o.axis,\n              e = o.useSymbolValue ? \"symbol-value\" : r;\n\n        switch (t) {\n          case \"width\":\n            c[0] = e;\n            break;\n\n          case \"depth\":\n            c[1] = e;\n            break;\n\n          case \"height\":\n            c[2] = e;\n            break;\n\n          case \"width-and-depth\":\n            c[0] = c[1] = e;\n            break;\n\n          default:\n            c[0] = c[1] = c[2] = e;\n        }\n      }\n      break;\n\n    case \"opacity\":\n      s.opacity = r;\n      break;\n\n    case \"rotation\":\n      switch (o.axis) {\n        case \"tilt\":\n          s.tilt = r;\n          break;\n\n        case \"roll\":\n          s.roll = r;\n          break;\n\n        default:\n          s.heading = r;\n      }\n\n  }\n\n  return \"proportional\" === c[0] && \"proportional\" === c[1] && \"proportional\" === c[2] || (s.size = c), s;\n}\n\nasync function l(t, o) {\n  if (e(t.symbol)) return t.symbol;\n  const r = i(t, o);\n  return e(r) && r.getSymbolAsync(t, { ...o,\n    abortOptions: {\n      signal: o.signal\n    }\n  });\n}\n\nasync function s(e, o) {\n  const n = i(e, o),\n        a = await l(e, o);\n  if (!a) return null;\n  const s = {\n    renderer: n,\n    symbol: a\n  };\n  if (!n || !(\"visualVariables\" in n) || !n.visualVariables) return s;\n  const u = r(n, e, o),\n        c = [\"proportional\", \"proportional\", \"proportional\"];\n\n  for (const {\n    variable: r,\n    value: i\n  } of u) if (\"color\" === r.type) s.color = t.toUnitRGBA(i);else if (\"size\" === r.type) {\n    if (\"outline\" === r.target) s.outlineSize = i;else {\n      const t = r.axis,\n            e = r.useSymbolValue ? \"symbol-value\" : i;\n      \"width\" === t ? c[0] = e : \"depth\" === t ? c[1] = e : \"height\" === t ? c[2] = e : c[0] = c[1] = \"width-and-depth\" === t ? e : c[2] = e;\n    }\n  } else \"opacity\" === r.type ? s.opacity = i : \"rotation\" === r.type && \"tilt\" === r.axis ? s.tilt = i : \"rotation\" === r.type && \"roll\" === r.axis ? s.roll = i : \"rotation\" === r.type && (s.heading = i);\n\n  return (isFinite(c[0]) || isFinite(c[1]) || isFinite(c[2])) && (s.size = c), s;\n}\n\nfunction u(t, e = 0) {\n  const o = t[e];\n  return \"number\" == typeof o && isFinite(o) ? o : null;\n}\n\nfunction c(t) {\n  for (let e = 0; e < 3; e++) {\n    const o = t[e];\n    if (\"number\" == typeof o) return isFinite(o) ? o : 0;\n  }\n\n  return 0;\n}\n\nexport { u as getDriverAxisSizeValue, c as getDriverAxisSizeValueAny, i as getRenderer, a as getRenderingInfo, s as getRenderingInfoAsync, l as getSymbolAsync };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/renderers/support/renderingInfoUtils.js"],"names":["t","isSome","e","isNone","o","getVisualVariableValues","r","i","symbol","renderer","getObservationRenderer","n","type","getSymbol","a","l","s","visualVariables","u","c","variable","value","color","toRgba","target","outlineSize","axis","useSymbolValue","opacity","tilt","roll","heading","size","getSymbolAsync","abortOptions","signal","toUnitRGBA","isFinite","getDriverAxisSizeValue","getDriverAxisSizeValueAny","getRenderer","getRenderingInfo","getRenderingInfoAsync"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../Color.js\";import{isSome as e,isNone as o}from\"../../core/maybe.js\";import{getVisualVariableValues as r}from\"../visualVariables/support/visualVariableUtils.js\";function i(t,o){if(!t||t.symbol)return null;const r=o&&o.renderer;return t&&e(r)&&r.getObservationRenderer?r.getObservationRenderer(t):r}function n(t,o){if(e(t.symbol))return t.symbol;const r=i(t,o);return e(r)&&\"dot-density\"!==r.type?r.getSymbol(t,o):null}function a(t,e){const a=i(t,e),l=n(t,e);if(o(l))return null;const s={renderer:a,symbol:l};if(o(a)||!(\"visualVariables\"in a)||!a.visualVariables)return s;const u=r(a,t,e),c=[\"proportional\",\"proportional\",\"proportional\"];for(const{variable:o,value:r}of u)switch(o.type){case\"color\":s.color=r.toRgba();break;case\"size\":if(\"outline\"===o.target)s.outlineSize=r;else{const t=o.axis,e=o.useSymbolValue?\"symbol-value\":r;switch(t){case\"width\":c[0]=e;break;case\"depth\":c[1]=e;break;case\"height\":c[2]=e;break;case\"width-and-depth\":c[0]=c[1]=e;break;default:c[0]=c[1]=c[2]=e}}break;case\"opacity\":s.opacity=r;break;case\"rotation\":switch(o.axis){case\"tilt\":s.tilt=r;break;case\"roll\":s.roll=r;break;default:s.heading=r}}return\"proportional\"===c[0]&&\"proportional\"===c[1]&&\"proportional\"===c[2]||(s.size=c),s}async function l(t,o){if(e(t.symbol))return t.symbol;const r=i(t,o);return e(r)&&r.getSymbolAsync(t,{...o,abortOptions:{signal:o.signal}})}async function s(e,o){const n=i(e,o),a=await l(e,o);if(!a)return null;const s={renderer:n,symbol:a};if(!n||!(\"visualVariables\"in n)||!n.visualVariables)return s;const u=r(n,e,o),c=[\"proportional\",\"proportional\",\"proportional\"];for(const{variable:r,value:i}of u)if(\"color\"===r.type)s.color=t.toUnitRGBA(i);else if(\"size\"===r.type)if(\"outline\"===r.target)s.outlineSize=i;else{const t=r.axis,e=r.useSymbolValue?\"symbol-value\":i;\"width\"===t?c[0]=e:\"depth\"===t?c[1]=e:\"height\"===t?c[2]=e:c[0]=c[1]=\"width-and-depth\"===t?e:c[2]=e}else\"opacity\"===r.type?s.opacity=i:\"rotation\"===r.type&&\"tilt\"===r.axis?s.tilt=i:\"rotation\"===r.type&&\"roll\"===r.axis?s.roll=i:\"rotation\"===r.type&&(s.heading=i);return(isFinite(c[0])||isFinite(c[1])||isFinite(c[2]))&&(s.size=c),s}function u(t,e=0){const o=t[e];return\"number\"==typeof o&&isFinite(o)?o:null}function c(t){for(let e=0;e<3;e++){const o=t[e];if(\"number\"==typeof o)return isFinite(o)?o:0}return 0}export{u as getDriverAxisSizeValue,c as getDriverAxisSizeValueAny,i as getRenderer,a as getRenderingInfo,s as getRenderingInfoAsync,l as getSymbolAsync};\n"]},"metadata":{},"sourceType":"module"}