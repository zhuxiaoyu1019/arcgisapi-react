{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { CircleStyleLayer as e, SymbolStyleLayer as t, LineStyleLayer as r, FillStyleLayer as s, BackgroundStyleLayer as i } from \"./StyleLayer.js\";\n\nclass a {\n  constructor(e, t) {\n    if (this._style = e, this.backgroundBucketIds = [], this._uidToLayer = new Map(), this._layerByName = {}, this._runningId = 0, e.layers || (e.layers = []), this.version = parseFloat(e.version), this.sprite = t ? t.spriteUrl : e.sprite, this.glyphs = t ? t.glyphsUrl : e.glyphs, this.layers = e.layers.map((e, t, r) => this._create(e, t, r)), this.layers) {\n      let e;\n\n      for (let t = 0; t < this.layers.length; t++) e = this.layers[t], this._layerByName[e.id.toLowerCase()] = e, this._uidToLayer.set(e.uid, e), 0 === e.type && this.backgroundBucketIds.push(e.id);\n    }\n\n    this._identifyRefLayers();\n  }\n\n  isPainterDataDriven(e) {\n    const t = this._layerByName[e.toLowerCase()];\n\n    return !!t && t.isPainterDataDriven();\n  }\n\n  getStyleLayerId(e) {\n    return e >= this.layers.length ? null : this.layers[e].id;\n  }\n\n  getStyleLayerByUID(e) {\n    const t = this._uidToLayer.get(e);\n\n    return null != t ? t : null;\n  }\n\n  getStyleLayerIndex(e) {\n    const t = this._layerByName[e.toLowerCase()];\n\n    return t ? this.layers.indexOf(t) : -1;\n  }\n\n  setStyleLayer(e, t) {\n    if (!e || !e.id) return;\n    const r = this._style;\n    null != t && t >= this.layers.length && (t = this.layers.length - 1);\n    let s,\n        i = !0;\n\n    const l = this._layerByName[e.id.toLowerCase()];\n\n    if (l) {\n      const y = this.layers.indexOf(l);\n      t || (t = y), t === y ? (i = !1, s = a._recreateLayer(e, l), this.layers[t] = s, r.layers[t] = e) : (this.layers.splice(y, 1), r.layers.splice(y, 1), s = this._create(e, t, this.layers), this.layers.splice(t, 0, s), r.layers.splice(t, 0, e));\n    } else s = this._create(e, t, this.layers), !t || t >= this.layers.length ? (this.layers.push(s), r.layers.push(e)) : (this.layers.splice(t, 0, s), r.layers.splice(t, 0, e));\n\n    this._layerByName[e.id.toLowerCase()] = s, this._uidToLayer.set(s.uid, s), i && this._recomputeZValues(), this._identifyRefLayers();\n  }\n\n  getStyleLayer(e) {\n    const t = this._layerByName[e.toLowerCase()];\n\n    return t ? {\n      type: t.typeName,\n      id: t.id,\n      source: t.source,\n      \"source-layer\": t.sourceLayer,\n      minzoom: t.minzoom,\n      maxzoom: t.maxzoom,\n      filter: t.filter,\n      layout: t.layout,\n      paint: t.paint\n    } : null;\n  }\n\n  deleteStyleLayer(e) {\n    const t = this._layerByName[e.toLowerCase()];\n\n    if (t) {\n      delete this._layerByName[e.toLowerCase()], this._uidToLayer.delete(t.uid);\n      const r = this.layers.indexOf(t);\n      this.layers.splice(r, 1), this._style.layers.splice(r, 1), this._recomputeZValues(), this._identifyRefLayers();\n    }\n  }\n\n  getLayerById(e) {\n    return this._layerByName[e.toLowerCase()];\n  }\n\n  getLayoutProperties(e) {\n    const t = this._layerByName[e.toLowerCase()];\n\n    return t ? t.layout : null;\n  }\n\n  getPaintProperties(e) {\n    const t = this._layerByName[e.toLowerCase()];\n\n    return t ? t.paint : null;\n  }\n\n  setPaintProperties(e, t) {\n    const r = this._layerByName[e.toLowerCase()];\n\n    if (!r) return;\n\n    const s = {\n      type: r.typeName,\n      id: r.id,\n      source: r.source,\n      \"source-layer\": r.sourceLayer,\n      minzoom: r.minzoom,\n      maxzoom: r.maxzoom,\n      filter: r.filter,\n      layout: r.layout,\n      paint: t\n    },\n          i = a._recreateLayer(s, r),\n          l = this.layers.indexOf(r);\n\n    this.layers[l] = i, this._style.layers[l].paint = t, this._layerByName[r.id.toLowerCase()] = i, this._uidToLayer.set(r.uid, i);\n  }\n\n  setLayoutProperties(e, t) {\n    const r = this._layerByName[e.toLowerCase()];\n\n    if (!r) return;\n\n    const s = {\n      type: r.typeName,\n      id: r.id,\n      source: r.source,\n      \"source-layer\": r.sourceLayer,\n      minzoom: r.minzoom,\n      maxzoom: r.maxzoom,\n      filter: r.filter,\n      layout: t,\n      paint: r.paint\n    },\n          i = a._recreateLayer(s, r),\n          l = this.layers.indexOf(r);\n\n    this.layers[l] = i, this._style.layers[l].layout = t, this._layerByName[r.id.toLowerCase()] = i, this._uidToLayer.set(r.uid, i);\n  }\n\n  setStyleLayerVisibility(e, t) {\n    const r = this._layerByName[e.toLowerCase()];\n\n    if (!r) return;\n    const s = r.layout || {};\n    s.visibility = t;\n\n    const i = {\n      type: r.typeName,\n      id: r.id,\n      source: r.source,\n      \"source-layer\": r.sourceLayer,\n      minzoom: r.minzoom,\n      maxzoom: r.maxzoom,\n      filter: r.filter,\n      layout: s,\n      paint: r.paint\n    },\n          l = a._recreateLayer(i, r),\n          y = this.layers.indexOf(r);\n\n    this.layers[y] = l, this._style.layers[y].layout = s, this._layerByName[r.id.toLowerCase()] = l, this._uidToLayer.set(r.uid, l);\n  }\n\n  getStyleLayerVisibility(e) {\n    var t;\n\n    const r = this._layerByName[e.toLowerCase()];\n\n    if (!r) return \"none\";\n    const s = r.layout;\n    return null != (t = null == s ? void 0 : s.visibility) ? t : \"visible\";\n  }\n\n  _recomputeZValues() {\n    const e = this.layers,\n          t = 1 / (e.length + 1);\n\n    for (let r = 0; r < e.length; r++) e[r].z = 1 - (1 + r) * t;\n  }\n\n  _identifyRefLayers() {\n    const e = [],\n          t = [];\n    let r = 0;\n\n    for (const a of this.layers) {\n      const l = a.layout;\n\n      if (1 === a.type) {\n        var s;\n        const t = a;\n        let i = a.source + \"|\" + a.sourceLayer;\n        i += null != (s = \"|\" + (null == l ? void 0 : l.visibility)) ? s : \"\", i += \"|\" + a.minzoom, i += \"|\" + a.maxzoom, i += \"|\" + JSON.stringify(a.filter), (t.hasDataDrivenFill || t.hasDataDrivenOutline) && (i += \"|\" + r), e.push({\n          key: i,\n          layer: a\n        });\n      } else if (2 === a.type) {\n        var i;\n        const e = a;\n        let s = a.source + \"|\" + a.sourceLayer;\n        s += null != (i = \"|\" + (null == l ? void 0 : l.visibility)) ? i : \"\", s += \"|\" + a.minzoom, s += \"|\" + a.maxzoom, s += \"|\" + JSON.stringify(a.filter), s += \"|\" + (void 0 !== l ? l[\"line-cap\"] : \"\"), s += \"|\" + (void 0 !== l ? l[\"line-join\"] : \"\"), e.hasDataDrivenLine && (s += \"|\" + r), t.push({\n          key: s,\n          layer: a\n        });\n      }\n\n      ++r;\n    }\n\n    this._assignRefLayers(e), this._assignRefLayers(t);\n  }\n\n  _assignRefLayers(e) {\n    let t, r;\n    e.sort((e, t) => e.key < t.key ? -1 : e.key > t.key ? 1 : 0);\n    const s = e.length;\n\n    for (let i = 0; i < s; i++) {\n      const a = e[i];\n      if (a.key === t) a.layer.refLayerId = r;else if (t = a.key, r = a.layer.id, 1 === a.layer.type) {\n        if (!a.layer.getPaintProperty(\"fill-outline-color\")) for (let l = i + 1; l < s; l++) {\n          const s = e[l];\n          if (s.key !== t) break;\n\n          if (s.layer.getPaintProperty(\"fill-outline-color\")) {\n            e[i] = s, e[l] = a, r = s.layer.id;\n            break;\n          }\n        }\n      } else if (2 === a.layer.type) {\n        let l = a.layer;\n\n        for (let y = i + 1; y < s; y++) {\n          const s = e[y];\n          if (s.key !== t) break;\n          const o = s.layer;\n          (l.canUseThinTessellation && !o.canUseThinTessellation || !l.canUseThinTessellation && (o.getPaintProperty(\"line-pattern\") || o.getPaintProperty(\"line-dasharray\"))) && (l = o, e[i] = s, e[y] = a, r = s.layer.id);\n        }\n      }\n    }\n  }\n\n  _create(a, l, y) {\n    const o = 1 - (1 + l) * (1 / (y.length + 1)),\n          n = this._runningId++;\n\n    switch (a.type) {\n      case \"background\":\n        return new i(0, a, o, n);\n\n      case \"fill\":\n        return new s(1, a, o, n);\n\n      case \"line\":\n        return new r(2, a, o, n);\n\n      case \"symbol\":\n        return new t(3, a, o, n);\n\n      case \"raster\":\n        throw new Error(\"Unsupported vector tile raster layer\");\n\n      case \"circle\":\n        return new e(4, a, o, n);\n    }\n\n    throw new Error(\"Unknown vector tile layer\");\n  }\n\n  static _recreateLayer(a, l) {\n    switch (a.type) {\n      case \"background\":\n        return new i(0, a, l.z, l.uid);\n\n      case \"fill\":\n        return new s(1, a, l.z, l.uid);\n\n      case \"line\":\n        return new r(2, a, l.z, l.uid);\n\n      case \"symbol\":\n        return new t(3, a, l.z, l.uid);\n\n      case \"raster\":\n        throw new Error(\"Unsupported vector tile raster layer\");\n\n      case \"circle\":\n        return new e(4, a, l.z, l.uid);\n    }\n  }\n\n}\n\nexport default a;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleRepository.js"],"names":["CircleStyleLayer","e","SymbolStyleLayer","t","LineStyleLayer","r","FillStyleLayer","s","BackgroundStyleLayer","i","a","constructor","_style","backgroundBucketIds","_uidToLayer","Map","_layerByName","_runningId","layers","version","parseFloat","sprite","spriteUrl","glyphs","glyphsUrl","map","_create","length","id","toLowerCase","set","uid","type","push","_identifyRefLayers","isPainterDataDriven","getStyleLayerId","getStyleLayerByUID","get","getStyleLayerIndex","indexOf","setStyleLayer","l","y","_recreateLayer","splice","_recomputeZValues","getStyleLayer","typeName","source","sourceLayer","minzoom","maxzoom","filter","layout","paint","deleteStyleLayer","delete","getLayerById","getLayoutProperties","getPaintProperties","setPaintProperties","setLayoutProperties","setStyleLayerVisibility","visibility","getStyleLayerVisibility","z","JSON","stringify","hasDataDrivenFill","hasDataDrivenOutline","key","layer","hasDataDrivenLine","_assignRefLayers","sort","refLayerId","getPaintProperty","o","canUseThinTessellation","n","Error"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{CircleStyleLayer as e,SymbolStyleLayer as t,LineStyleLayer as r,FillStyleLayer as s,BackgroundStyleLayer as i}from\"./StyleLayer.js\";class a{constructor(e,t){if(this._style=e,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,e.layers||(e.layers=[]),this.version=parseFloat(e.version),this.sprite=t?t.spriteUrl:e.sprite,this.glyphs=t?t.glyphsUrl:e.glyphs,this.layers=e.layers.map(((e,t,r)=>this._create(e,t,r))),this.layers){let e;for(let t=0;t<this.layers.length;t++)e=this.layers[t],this._layerByName[e.id.toLowerCase()]=e,this._uidToLayer.set(e.uid,e),0===e.type&&this.backgroundBucketIds.push(e.id)}this._identifyRefLayers()}isPainterDataDriven(e){const t=this._layerByName[e.toLowerCase()];return!!t&&t.isPainterDataDriven()}getStyleLayerId(e){return e>=this.layers.length?null:this.layers[e].id}getStyleLayerByUID(e){const t=this._uidToLayer.get(e);return null!=t?t:null}getStyleLayerIndex(e){const t=this._layerByName[e.toLowerCase()];return t?this.layers.indexOf(t):-1}setStyleLayer(e,t){if(!e||!e.id)return;const r=this._style;null!=t&&t>=this.layers.length&&(t=this.layers.length-1);let s,i=!0;const l=this._layerByName[e.id.toLowerCase()];if(l){const y=this.layers.indexOf(l);t||(t=y),t===y?(i=!1,s=a._recreateLayer(e,l),this.layers[t]=s,r.layers[t]=e):(this.layers.splice(y,1),r.layers.splice(y,1),s=this._create(e,t,this.layers),this.layers.splice(t,0,s),r.layers.splice(t,0,e))}else s=this._create(e,t,this.layers),!t||t>=this.layers.length?(this.layers.push(s),r.layers.push(e)):(this.layers.splice(t,0,s),r.layers.splice(t,0,e));this._layerByName[e.id.toLowerCase()]=s,this._uidToLayer.set(s.uid,s),i&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(e){const t=this._layerByName[e.toLowerCase()];return t?{type:t.typeName,id:t.id,source:t.source,\"source-layer\":t.sourceLayer,minzoom:t.minzoom,maxzoom:t.maxzoom,filter:t.filter,layout:t.layout,paint:t.paint}:null}deleteStyleLayer(e){const t=this._layerByName[e.toLowerCase()];if(t){delete this._layerByName[e.toLowerCase()],this._uidToLayer.delete(t.uid);const r=this.layers.indexOf(t);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(e){return this._layerByName[e.toLowerCase()]}getLayoutProperties(e){const t=this._layerByName[e.toLowerCase()];return t?t.layout:null}getPaintProperties(e){const t=this._layerByName[e.toLowerCase()];return t?t.paint:null}setPaintProperties(e,t){const r=this._layerByName[e.toLowerCase()];if(!r)return;const s={type:r.typeName,id:r.id,source:r.source,\"source-layer\":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:t},i=a._recreateLayer(s,r),l=this.layers.indexOf(r);this.layers[l]=i,this._style.layers[l].paint=t,this._layerByName[r.id.toLowerCase()]=i,this._uidToLayer.set(r.uid,i)}setLayoutProperties(e,t){const r=this._layerByName[e.toLowerCase()];if(!r)return;const s={type:r.typeName,id:r.id,source:r.source,\"source-layer\":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:t,paint:r.paint},i=a._recreateLayer(s,r),l=this.layers.indexOf(r);this.layers[l]=i,this._style.layers[l].layout=t,this._layerByName[r.id.toLowerCase()]=i,this._uidToLayer.set(r.uid,i)}setStyleLayerVisibility(e,t){const r=this._layerByName[e.toLowerCase()];if(!r)return;const s=r.layout||{};s.visibility=t;const i={type:r.typeName,id:r.id,source:r.source,\"source-layer\":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:s,paint:r.paint},l=a._recreateLayer(i,r),y=this.layers.indexOf(r);this.layers[y]=l,this._style.layers[y].layout=s,this._layerByName[r.id.toLowerCase()]=l,this._uidToLayer.set(r.uid,l)}getStyleLayerVisibility(e){var t;const r=this._layerByName[e.toLowerCase()];if(!r)return\"none\";const s=r.layout;return null!=(t=null==s?void 0:s.visibility)?t:\"visible\"}_recomputeZValues(){const e=this.layers,t=1/(e.length+1);for(let r=0;r<e.length;r++)e[r].z=1-(1+r)*t}_identifyRefLayers(){const e=[],t=[];let r=0;for(const a of this.layers){const l=a.layout;if(1===a.type){var s;const t=a;let i=a.source+\"|\"+a.sourceLayer;i+=null!=(s=\"|\"+(null==l?void 0:l.visibility))?s:\"\",i+=\"|\"+a.minzoom,i+=\"|\"+a.maxzoom,i+=\"|\"+JSON.stringify(a.filter),(t.hasDataDrivenFill||t.hasDataDrivenOutline)&&(i+=\"|\"+r),e.push({key:i,layer:a})}else if(2===a.type){var i;const e=a;let s=a.source+\"|\"+a.sourceLayer;s+=null!=(i=\"|\"+(null==l?void 0:l.visibility))?i:\"\",s+=\"|\"+a.minzoom,s+=\"|\"+a.maxzoom,s+=\"|\"+JSON.stringify(a.filter),s+=\"|\"+(void 0!==l?l[\"line-cap\"]:\"\"),s+=\"|\"+(void 0!==l?l[\"line-join\"]:\"\"),e.hasDataDrivenLine&&(s+=\"|\"+r),t.push({key:s,layer:a})}++r}this._assignRefLayers(e),this._assignRefLayers(t)}_assignRefLayers(e){let t,r;e.sort(((e,t)=>e.key<t.key?-1:e.key>t.key?1:0));const s=e.length;for(let i=0;i<s;i++){const a=e[i];if(a.key===t)a.layer.refLayerId=r;else if(t=a.key,r=a.layer.id,1===a.layer.type){if(!a.layer.getPaintProperty(\"fill-outline-color\"))for(let l=i+1;l<s;l++){const s=e[l];if(s.key!==t)break;if(s.layer.getPaintProperty(\"fill-outline-color\")){e[i]=s,e[l]=a,r=s.layer.id;break}}}else if(2===a.layer.type){let l=a.layer;for(let y=i+1;y<s;y++){const s=e[y];if(s.key!==t)break;const o=s.layer;(l.canUseThinTessellation&&!o.canUseThinTessellation||!l.canUseThinTessellation&&(o.getPaintProperty(\"line-pattern\")||o.getPaintProperty(\"line-dasharray\")))&&(l=o,e[i]=s,e[y]=a,r=s.layer.id)}}}}_create(a,l,y){const o=1-(1+l)*(1/(y.length+1)),n=this._runningId++;switch(a.type){case\"background\":return new i(0,a,o,n);case\"fill\":return new s(1,a,o,n);case\"line\":return new r(2,a,o,n);case\"symbol\":return new t(3,a,o,n);case\"raster\":throw new Error(\"Unsupported vector tile raster layer\");case\"circle\":return new e(4,a,o,n)}throw new Error(\"Unknown vector tile layer\")}static _recreateLayer(a,l){switch(a.type){case\"background\":return new i(0,a,l.z,l.uid);case\"fill\":return new s(1,a,l.z,l.uid);case\"line\":return new r(2,a,l.z,l.uid);case\"symbol\":return new t(3,a,l.z,l.uid);case\"raster\":throw new Error(\"Unsupported vector tile raster layer\");case\"circle\":return new e(4,a,l.z,l.uid)}}}export default a;\n"]},"metadata":{},"sourceType":"module"}