{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/has.js\";\nimport { clamp as a, isPowerOfTwo as r } from \"../../../../core/mathUtils.js\";\nimport { isSome as o, isNone as t } from \"../../../../core/maybe.js\";\nimport { RenderTexture as s } from \"../../webgl-engine/core/material/RenderTexture.js\";\nimport { PBRSchematicMRRValues as n } from \"../../webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";\nimport { defaultMaskAlphaCutoff as l } from \"../../webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";\nimport { getEllipsoidMode as i } from \"../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js\";\nimport { Texture as c } from \"../../webgl-engine/lib/Texture.js\";\n\nfunction u(e, a) {\n  const r = new Map(),\n        s = (e, a) => {\n    if (t(e)) return -1;\n\n    if (r.has(e.id)) {\n      const o = r.get(e.id);\n      return o.usage |= a, o.id;\n    }\n\n    const o = r.size;\n    return r.set(e.id, {\n      id: o,\n      usage: a\n    }), o;\n  },\n        l = a.pbrMetallicRoughness,\n        i = l && l.baseColorFactor,\n        c = a.emissiveFactor,\n        u = null == a.normalTexture && null == a.emissiveTexture && null == a.occlusionTexture && (!l || null == l.metallicRoughnessTexture && 1 === l.roughnessFactor && (1 === l.metallicFactor || 0 === l.metallicFactor)),\n        g = u ? n[0] : l ? l.metallicFactor : 1,\n        p = u ? n[1] : l ? l.roughnessFactor : 1,\n        h = \"mask\" === a.alphaMode ? 33 : 1,\n        f = {\n    baseColorFactor: i ? [i[0], i[1], i[2], i[3]] : [1, 1, 1, 1],\n    baseColorTextureId: s(l && l.baseColorTexture, h),\n    metallicRoughnessTextureId: s(l && l.metallicRoughnessTexture, 2),\n    metallicFactor: g,\n    roughnessFactor: p\n  },\n        b = {\n    alphaMode: a.alphaMode,\n    alphaCutoff: a.alphaCutoff,\n    doubleSided: a.doubleSided,\n    cullFace: \"none\" === a.cullFace ? 0 : \"back\" === a.cullFace ? 2 : \"front\" === a.cullFace ? 1 : void 0,\n    normalTextureId: s(a.normalTexture, 4),\n    emissiveTextureId: s(a.emissiveTexture, 16),\n    occlusionTextureId: s(a.occlusionTexture, 8),\n    emissiveFactor: c ? [c[0], c[1], c[2]] : [0, 0, 0],\n    metallicRoughness: f,\n    wrapTextures: !1,\n    hasParametersFromSource: u\n  },\n        x = [];\n\n  return r.forEach(({\n    usage: a\n  }, r) => {\n    const t = o(e) && e[r] && e[r].formats,\n          s = t ? m(t.map(({\n      name: e,\n      format: a\n    }) => ({\n      name: e,\n      encoding: d[a]\n    }))) : [];\n    x.push({\n      id: r,\n      usage: a,\n      encodings: s\n    });\n  }), {\n    material: b,\n    textures: x\n  };\n}\n\nfunction m(e) {\n  return e.sort((e, a) => e.encoding - a.encoding);\n}\n\nconst d = {\n  ktx2: 1,\n  basis: 2,\n  dds: 4,\n  png: 8,\n  jpg: 16,\n  \"ktx-etc2\": 32\n},\n      g = {\n  [c.KTX2_ENCODING]: 2,\n  [c.BASIS_ENCODING]: 2,\n  [c.DDS_ENCODING]: 4,\n  \"image/png\": 8,\n  \"image/jpg\": 16,\n  \"image/jpeg\": 16,\n  \"image/ktx\": 32\n};\n\nfunction p(e) {\n  const r = e && e.materialDefinitions ? Object.keys(e.materialDefinitions)[0] : null,\n        o = e && e.textureDefinitions ? Object.keys(e.textureDefinitions)[0] : null,\n        t = r && e.materialDefinitions[r],\n        s = o && e.textureDefinitions[o],\n        n = h();\n\n  if (null != t) {\n    const e = t.params;\n    e.diffuse && (n.metallicRoughness.baseColorFactor = [e.diffuse[0], e.diffuse[1], e.diffuse[2], 1]), null != e.doubleSided && (n.doubleSided = e.doubleSided, n.cullFace = e.doubleSided ? 0 : 2), \"none\" !== e.cullFace && \"front\" !== e.cullFace && \"back\" !== e.cullFace || (n.cullFace = \"none\" === e.cullFace ? 0 : \"back\" === e.cullFace ? 2 : 1), e.transparency && (n.metallicRoughness.baseColorFactor[3] = a(1 - e.transparency, 0, 1)), (e.useVertexColorAlpha || n.metallicRoughness.baseColorFactor[3] < 1) && (n.alphaMode = \"blend\");\n  }\n\n  const l = [];\n\n  if (null != s) {\n    const e = 0;\n    !s.wrap || \"repeat\" !== s.wrap[0] && \"repeat\" !== s.wrap[1] || (n.wrapTextures = !0);\n    let a = 1;\n    \"rgba\" === s.channels && (n.alphaMode = \"blend\", a |= 32);\n\n    const r = s.images.length - 1,\n          o = s.images[r],\n          t = e => e && e.split(\"/\").pop(),\n          i = Array.isArray(s.encoding) ? m(s.encoding.map((e, a) => ({\n      name: t(o.href[a]),\n      encoding: g[e] || 0\n    }))) : [{\n      name: t(o.href),\n      encoding: g[s.encoding] || 0\n    }];\n\n    l.push({\n      id: e,\n      usage: a,\n      encodings: i\n    }), n.metallicRoughness.baseColorTextureId = e;\n  }\n\n  return {\n    material: n,\n    textures: l\n  };\n}\n\nconst h = () => ({\n  alphaMode: \"opaque\",\n  alphaCutoff: l,\n  doubleSided: !0,\n  cullFace: 0,\n  normalTextureId: -1,\n  emissiveTextureId: -1,\n  occlusionTextureId: -1,\n  emissiveFactor: [0, 0, 0],\n  metallicRoughness: {\n    baseColorFactor: [.8, .8, .8, 1],\n    baseColorTextureId: -1,\n    metallicRoughnessTextureId: -1,\n    metallicFactor: 0,\n    roughnessFactor: .6\n  },\n  wrapTextures: !1,\n  hasParametersFromSource: !0\n});\n\nfunction f(e, a, o, s) {\n  if (t(e) || null == e.data) return null;\n  const n = e.data,\n        l = !(n instanceof HTMLImageElement) || r(n.width) && r(n.height),\n        i = s.renderingContext.parameters.maxMaxAnisotropy,\n        u = o && !s.has(2) ? 1 : i,\n        m = l && !e.downsampled && u > 1,\n        d = o || !a.wrapTextures ? b : x,\n        g = I(e.encoding),\n        p = 1 & e.usage ? \"opaque\" === a.alphaMode ? 3 : 4 : 3;\n  return new c(n, {\n    mipmap: m,\n    maxAnisotropy: u,\n    encoding: g,\n    wrap: d,\n    components: p,\n    noUnpackFlip: !0\n  });\n}\n\nconst b = {\n  s: 33071,\n  t: 33071\n},\n      x = {\n  s: 10497,\n  t: 10497\n};\n\nfunction F(e, r, o, t, n, c) {\n  const u = c.rendererTextureUsage,\n        m = e => w(t, o, e & u),\n        d = r.metallicRoughness.baseColorFactor,\n        g = a(r.metallicRoughness.baseColorFactor[3], 0, 1);\n\n  e.baseColor = [d[0], d[1], d[2], g], e.hasParametersFromSource = !!r.hasParametersFromSource, e.usePBR = c.usePBR, e.mrrFactors = [r.metallicRoughness.metallicFactor, r.metallicRoughness.roughnessFactor, r.hasParametersFromSource ? .2 : .5], e.emissiveFactor = r.emissiveFactor, e.isIntegratedMesh = c.isIntegratedMesh, e.alphaCutoff = \"mask\" === r.alphaMode ? r.alphaCutoff : l, e.alphaDiscardMode = \"opaque\" === r.alphaMode ? 1 : \"mask\" === r.alphaMode ? 2 : 3;\n  const p = m(33);\n  p && (e.baseColorTexture = new s(n, p));\n  const h = m(2);\n  h && (e.metallicRoughnessTexture = new s(n, h));\n  const f = m(16);\n  f && (e.emissionTexture = new s(n, f));\n  const b = m(8);\n  b && (e.occlusionTexture = new s(n, b));\n  const x = m(4);\n  x && (e.normalTexture = new s(n, x)), e.commonMaterialParameters.slicePlaneEnabled = c.slicePlaneEnabled, e.commonMaterialParameters.doubleSided = r.doubleSided, e.commonMaterialParameters.cullFace = r.cullFace, e.ellipsoidMode = i(c.viewSpatialReference);\n}\n\nfunction T(a) {\n  const r = a.has(1),\n        o = a.has(0),\n        t = e(\"disable-feature:i3s-basis\") ? 0 : 3;\n  return 24 | (r ? 4 | t : 0) | (o ? t : 0);\n}\n\nfunction C(e, a) {\n  return e.find(e => 0 != (e.encoding & a));\n}\n\nfunction w(e, a, r) {\n  if (t(e) || 0 === r) return null;\n\n  for (let t = 0; t < e.length; t++) {\n    const s = e[t];\n    if (o(s) && 0 != (s.usage & r)) return a[t].id;\n  }\n\n  return null;\n}\n\nfunction I(e) {\n  switch (e) {\n    case 1:\n      return c.KTX2_ENCODING;\n\n    case 2:\n      return c.BASIS_ENCODING;\n\n    case 4:\n      return c.DDS_ENCODING;\n\n    case 8:\n      return \"image/png\";\n\n    case 16:\n      return \"image/jpeg\";\n\n    case 32:\n      return \"image/ktx\";\n\n    default:\n      return \"\";\n  }\n}\n\nexport { F as configureMaterial, f as createTexture, u as getMaterialAndTextures, p as getMaterialAndTexturesFromShared, T as getSupportedEncodings, C as selectEncoding };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js"],"names":["e","clamp","a","isPowerOfTwo","r","isSome","o","isNone","t","RenderTexture","s","PBRSchematicMRRValues","n","defaultMaskAlphaCutoff","l","getEllipsoidMode","i","Texture","c","u","Map","has","id","get","usage","size","set","pbrMetallicRoughness","baseColorFactor","emissiveFactor","normalTexture","emissiveTexture","occlusionTexture","metallicRoughnessTexture","roughnessFactor","metallicFactor","g","p","h","alphaMode","f","baseColorTextureId","baseColorTexture","metallicRoughnessTextureId","b","alphaCutoff","doubleSided","cullFace","normalTextureId","emissiveTextureId","occlusionTextureId","metallicRoughness","wrapTextures","hasParametersFromSource","x","forEach","formats","m","map","name","format","encoding","d","push","encodings","material","textures","sort","ktx2","basis","dds","png","jpg","KTX2_ENCODING","BASIS_ENCODING","DDS_ENCODING","materialDefinitions","Object","keys","textureDefinitions","params","diffuse","transparency","useVertexColorAlpha","wrap","channels","images","length","split","pop","Array","isArray","href","data","HTMLImageElement","width","height","renderingContext","parameters","maxMaxAnisotropy","downsampled","I","mipmap","maxAnisotropy","components","noUnpackFlip","F","rendererTextureUsage","w","baseColor","usePBR","mrrFactors","isIntegratedMesh","alphaDiscardMode","emissionTexture","commonMaterialParameters","slicePlaneEnabled","ellipsoidMode","viewSpatialReference","T","C","find","configureMaterial","createTexture","getMaterialAndTextures","getMaterialAndTexturesFromShared","getSupportedEncodings","selectEncoding"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{clamp as a,isPowerOfTwo as r}from\"../../../../core/mathUtils.js\";import{isSome as o,isNone as t}from\"../../../../core/maybe.js\";import{RenderTexture as s}from\"../../webgl-engine/core/material/RenderTexture.js\";import{PBRSchematicMRRValues as n}from\"../../webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{defaultMaskAlphaCutoff as l}from\"../../webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{getEllipsoidMode as i}from\"../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js\";import{Texture as c}from\"../../webgl-engine/lib/Texture.js\";function u(e,a){const r=new Map,s=(e,a)=>{if(t(e))return-1;if(r.has(e.id)){const o=r.get(e.id);return o.usage|=a,o.id}const o=r.size;return r.set(e.id,{id:o,usage:a}),o},l=a.pbrMetallicRoughness,i=l&&l.baseColorFactor,c=a.emissiveFactor,u=null==a.normalTexture&&null==a.emissiveTexture&&null==a.occlusionTexture&&(!l||null==l.metallicRoughnessTexture&&1===l.roughnessFactor&&(1===l.metallicFactor||0===l.metallicFactor)),g=u?n[0]:l?l.metallicFactor:1,p=u?n[1]:l?l.roughnessFactor:1,h=\"mask\"===a.alphaMode?33:1,f={baseColorFactor:i?[i[0],i[1],i[2],i[3]]:[1,1,1,1],baseColorTextureId:s(l&&l.baseColorTexture,h),metallicRoughnessTextureId:s(l&&l.metallicRoughnessTexture,2),metallicFactor:g,roughnessFactor:p},b={alphaMode:a.alphaMode,alphaCutoff:a.alphaCutoff,doubleSided:a.doubleSided,cullFace:\"none\"===a.cullFace?0:\"back\"===a.cullFace?2:\"front\"===a.cullFace?1:void 0,normalTextureId:s(a.normalTexture,4),emissiveTextureId:s(a.emissiveTexture,16),occlusionTextureId:s(a.occlusionTexture,8),emissiveFactor:c?[c[0],c[1],c[2]]:[0,0,0],metallicRoughness:f,wrapTextures:!1,hasParametersFromSource:u},x=[];return r.forEach((({usage:a},r)=>{const t=o(e)&&e[r]&&e[r].formats,s=t?m(t.map((({name:e,format:a})=>({name:e,encoding:d[a]})))):[];x.push({id:r,usage:a,encodings:s})})),{material:b,textures:x}}function m(e){return e.sort(((e,a)=>e.encoding-a.encoding))}const d={ktx2:1,basis:2,dds:4,png:8,jpg:16,\"ktx-etc2\":32},g={[c.KTX2_ENCODING]:2,[c.BASIS_ENCODING]:2,[c.DDS_ENCODING]:4,\"image/png\":8,\"image/jpg\":16,\"image/jpeg\":16,\"image/ktx\":32};function p(e){const r=e&&e.materialDefinitions?Object.keys(e.materialDefinitions)[0]:null,o=e&&e.textureDefinitions?Object.keys(e.textureDefinitions)[0]:null,t=r&&e.materialDefinitions[r],s=o&&e.textureDefinitions[o],n=h();if(null!=t){const e=t.params;e.diffuse&&(n.metallicRoughness.baseColorFactor=[e.diffuse[0],e.diffuse[1],e.diffuse[2],1]),null!=e.doubleSided&&(n.doubleSided=e.doubleSided,n.cullFace=e.doubleSided?0:2),\"none\"!==e.cullFace&&\"front\"!==e.cullFace&&\"back\"!==e.cullFace||(n.cullFace=\"none\"===e.cullFace?0:\"back\"===e.cullFace?2:1),e.transparency&&(n.metallicRoughness.baseColorFactor[3]=a(1-e.transparency,0,1)),(e.useVertexColorAlpha||n.metallicRoughness.baseColorFactor[3]<1)&&(n.alphaMode=\"blend\")}const l=[];if(null!=s){const e=0;!s.wrap||\"repeat\"!==s.wrap[0]&&\"repeat\"!==s.wrap[1]||(n.wrapTextures=!0);let a=1;\"rgba\"===s.channels&&(n.alphaMode=\"blend\",a|=32);const r=s.images.length-1,o=s.images[r],t=e=>e&&e.split(\"/\").pop(),i=Array.isArray(s.encoding)?m(s.encoding.map(((e,a)=>({name:t(o.href[a]),encoding:g[e]||0})))):[{name:t(o.href),encoding:g[s.encoding]||0}];l.push({id:e,usage:a,encodings:i}),n.metallicRoughness.baseColorTextureId=e}return{material:n,textures:l}}const h=()=>({alphaMode:\"opaque\",alphaCutoff:l,doubleSided:!0,cullFace:0,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[.8,.8,.8,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6},wrapTextures:!1,hasParametersFromSource:!0});function f(e,a,o,s){if(t(e)||null==e.data)return null;const n=e.data,l=!(n instanceof HTMLImageElement)||r(n.width)&&r(n.height),i=s.renderingContext.parameters.maxMaxAnisotropy,u=o&&!s.has(2)?1:i,m=l&&!e.downsampled&&u>1,d=o||!a.wrapTextures?b:x,g=I(e.encoding),p=1&e.usage?\"opaque\"===a.alphaMode?3:4:3;return new c(n,{mipmap:m,maxAnisotropy:u,encoding:g,wrap:d,components:p,noUnpackFlip:!0})}const b={s:33071,t:33071},x={s:10497,t:10497};function F(e,r,o,t,n,c){const u=c.rendererTextureUsage,m=e=>w(t,o,e&u),d=r.metallicRoughness.baseColorFactor,g=a(r.metallicRoughness.baseColorFactor[3],0,1);e.baseColor=[d[0],d[1],d[2],g],e.hasParametersFromSource=!!r.hasParametersFromSource,e.usePBR=c.usePBR,e.mrrFactors=[r.metallicRoughness.metallicFactor,r.metallicRoughness.roughnessFactor,r.hasParametersFromSource?.2:.5],e.emissiveFactor=r.emissiveFactor,e.isIntegratedMesh=c.isIntegratedMesh,e.alphaCutoff=\"mask\"===r.alphaMode?r.alphaCutoff:l,e.alphaDiscardMode=\"opaque\"===r.alphaMode?1:\"mask\"===r.alphaMode?2:3;const p=m(33);p&&(e.baseColorTexture=new s(n,p));const h=m(2);h&&(e.metallicRoughnessTexture=new s(n,h));const f=m(16);f&&(e.emissionTexture=new s(n,f));const b=m(8);b&&(e.occlusionTexture=new s(n,b));const x=m(4);x&&(e.normalTexture=new s(n,x)),e.commonMaterialParameters.slicePlaneEnabled=c.slicePlaneEnabled,e.commonMaterialParameters.doubleSided=r.doubleSided,e.commonMaterialParameters.cullFace=r.cullFace,e.ellipsoidMode=i(c.viewSpatialReference)}function T(a){const r=a.has(1),o=a.has(0),t=e(\"disable-feature:i3s-basis\")?0:3;return 24|(r?4|t:0)|(o?t:0)}function C(e,a){return e.find((e=>0!=(e.encoding&a)))}function w(e,a,r){if(t(e)||0===r)return null;for(let t=0;t<e.length;t++){const s=e[t];if(o(s)&&0!=(s.usage&r))return a[t].id}return null}function I(e){switch(e){case 1:return c.KTX2_ENCODING;case 2:return c.BASIS_ENCODING;case 4:return c.DDS_ENCODING;case 8:return\"image/png\";case 16:return\"image/jpeg\";case 32:return\"image/ktx\";default:return\"\"}}export{F as configureMaterial,f as createTexture,u as getMaterialAndTextures,p as getMaterialAndTexturesFromShared,T as getSupportedEncodings,C as selectEncoding};\n"]},"metadata":{},"sourceType":"module"}