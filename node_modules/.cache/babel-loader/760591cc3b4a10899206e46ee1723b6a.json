{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Evented.js\";\nimport r from \"../../core/Logger.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as i } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { toExtent as s } from \"../../geometry/support/aaBoundingRect.js\";\nimport { extentContainsPoint as n } from \"../../geometry/support/contains.js\";\nimport { canProject as a } from \"../../geometry/support/webMercatorUtils.js\";\nimport { updateGeometryElevation as p } from \"../../layers/support/ElevationSampler.js\";\nimport { getElevationAtPoint as l } from \"../3d/support/ElevationProvider.js\";\nimport { ELEVATION_NODATA_VALUE as m } from \"../3d/terrain/TerrainConst.js\";\nconst c = r.getLogger(\"esri.views.support.GroundViewElevationSampler\");\nlet u = class extends t.EventedAccessor {\n  constructor(e) {\n    super(e), this.demResolution = {\n      min: -1,\n      max: -1\n    }, this.noDataValue = m;\n  }\n\n  initialize() {\n    this.view.basemapTerrain.on(\"elevation-change\", () => this.emit(\"changed\", {}));\n  }\n\n  get extent() {\n    const e = this.view.basemapTerrain;\n    return e.extent && e.spatialReference ? s(e.extent, e.spatialReference) : null;\n  }\n\n  elevationAt(e) {\n    const t = e.spatialReference,\n          r = this.spatialReference;\n\n    if (!a(t, r)) {\n      const e = t ? t.wkid : \"unknown\";\n      return c.error(`Cannot sample elevation at a location with spatial reference (${e}) different from the view (${r.wkid})`), null;\n    }\n\n    if (!n(this.extent, e)) {\n      const t = this.extent,\n            r = `${t.xmin}, ${t.ymin}, ${t.xmax}, ${t.ymax}`;\n      c.warn(\"#elevationAt()\", `Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler extent (${r})`);\n    }\n\n    return l(this.view.elevationProvider, e);\n  }\n\n  queryElevation(e) {\n    return p(e.clone(), this);\n  }\n\n};\ne([o({\n  readOnly: !0\n})], u.prototype, \"demResolution\", void 0), e([o({\n  readOnly: !0\n})], u.prototype, \"extent\", null), e([o({\n  readOnly: !0\n})], u.prototype, \"noDataValue\", void 0), e([o({\n  readOnly: !0,\n  aliasOf: \"view.basemapTerrain.spatialReference\"\n})], u.prototype, \"spatialReference\", void 0), e([o({\n  constructOnly: !0\n})], u.prototype, \"view\", void 0), u = e([i(\"esri.views.support.GroundViewElevationSampler\")], u);\nvar d = u;\nexport default d;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/support/GroundViewElevationSampler.js"],"names":["_","e","t","r","property","o","subclass","i","toExtent","s","extentContainsPoint","n","canProject","a","updateGeometryElevation","p","getElevationAtPoint","l","ELEVATION_NODATA_VALUE","m","c","getLogger","u","EventedAccessor","constructor","demResolution","min","max","noDataValue","initialize","view","basemapTerrain","on","emit","extent","spatialReference","elevationAt","wkid","error","xmin","ymin","xmax","ymax","warn","x","y","elevationProvider","queryElevation","clone","readOnly","prototype","aliasOf","constructOnly","d"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Evented.js\";import r from\"../../core/Logger.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{toExtent as s}from\"../../geometry/support/aaBoundingRect.js\";import{extentContainsPoint as n}from\"../../geometry/support/contains.js\";import{canProject as a}from\"../../geometry/support/webMercatorUtils.js\";import{updateGeometryElevation as p}from\"../../layers/support/ElevationSampler.js\";import{getElevationAtPoint as l}from\"../3d/support/ElevationProvider.js\";import{ELEVATION_NODATA_VALUE as m}from\"../3d/terrain/TerrainConst.js\";const c=r.getLogger(\"esri.views.support.GroundViewElevationSampler\");let u=class extends t.EventedAccessor{constructor(e){super(e),this.demResolution={min:-1,max:-1},this.noDataValue=m}initialize(){this.view.basemapTerrain.on(\"elevation-change\",(()=>this.emit(\"changed\",{})))}get extent(){const e=this.view.basemapTerrain;return e.extent&&e.spatialReference?s(e.extent,e.spatialReference):null}elevationAt(e){const t=e.spatialReference,r=this.spatialReference;if(!a(t,r)){const e=t?t.wkid:\"unknown\";return c.error(`Cannot sample elevation at a location with spatial reference (${e}) different from the view (${r.wkid})`),null}if(!n(this.extent,e)){const t=this.extent,r=`${t.xmin}, ${t.ymin}, ${t.xmax}, ${t.ymax}`;c.warn(\"#elevationAt()\",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler extent (${r})`)}return l(this.view.elevationProvider,e)}queryElevation(e){return p(e.clone(),this)}};e([o({readOnly:!0})],u.prototype,\"demResolution\",void 0),e([o({readOnly:!0})],u.prototype,\"extent\",null),e([o({readOnly:!0})],u.prototype,\"noDataValue\",void 0),e([o({readOnly:!0,aliasOf:\"view.basemapTerrain.spatialReference\"})],u.prototype,\"spatialReference\",void 0),e([o({constructOnly:!0})],u.prototype,\"view\",void 0),u=e([i(\"esri.views.support.GroundViewElevationSampler\")],u);var d=u;export default d;\n"]},"metadata":{},"sourceType":"module"}