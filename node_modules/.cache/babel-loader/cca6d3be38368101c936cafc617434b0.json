{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Logger.js\";\nimport { isSome as t } from \"../../../core/maybe.js\";\nimport { c as r } from \"../../../chunks/vec3f64.js\";\nimport { projectPointToVector as i } from \"../../projection.js\";\nimport { isGeographicMesh as o } from \"./geographicUtils.js\";\nimport { ungeoreference as n, georeference as s } from \"./georeference.js\";\nconst a = e.getLogger(\"esri.geometry.support.meshUtils.centerAt\");\n\nfunction c(e, r, i) {\n  var n;\n  if (!e.vertexAttributes || !e.vertexAttributes.position) return;\n  const s = null != (n = null == i ? void 0 : i.origin) ? n : e.origin;\n  if (t(e.transform)) null != (null == i ? void 0 : i.geographic) && i.geographic !== e.transform.geographic && a.warn(`Specifying the 'geographic' parameter (${i.geographic}) different from the Mesh transform setting (${e.transform.geographic}) is not supported`), f(e.transform, r, s);else {\n    o(e.spatialReference, i) ? p(e, r, s) : g(e, r, s);\n  }\n}\n\nfunction f(e, t, r) {\n  const i = t.x - r.x,\n        o = t.y - r.y,\n        n = t.hasZ && r.hasZ ? t.z - r.z : 0,\n        s = e.origin;\n  e.origin = [s[0] + i, s[1] + o, s[2] + n];\n}\n\nfunction p(e, t, r) {\n  const i = n(e.vertexAttributes, r, {\n    geographic: !0\n  }),\n        {\n    position: o,\n    normal: a,\n    tangent: c\n  } = s(i, t, {\n    geographic: !0\n  });\n  e.vertexAttributes.position = o, e.vertexAttributes.normal = a, e.vertexAttributes.tangent = c, e.vertexAttributesChanged();\n}\n\nfunction g(e, t, r) {\n  const o = u,\n        n = m;\n\n  if (i(t, n, e.spatialReference)) {\n    if (!i(r, o, e.spatialReference)) {\n      const t = e.origin;\n      o[0] = t.x, o[1] = t.y, o[2] = t.z, a.error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}).`);\n    }\n\n    l(e.vertexAttributes.position, n, o), e.vertexAttributesChanged();\n  } else a.error(`Failed to project centerAt location (wkid:${t.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid})`);\n}\n\nfunction l(e, t, r) {\n  if (e) for (let i = 0; i < e.length; i += 3) for (let o = 0; o < 3; o++) e[i + o] += t[o] - r[o];\n}\n\nconst m = r(),\n      u = r();\nexport { c as centerAt };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/support/meshUtils/centerAt.js"],"names":["e","isSome","t","c","r","projectPointToVector","i","isGeographicMesh","o","ungeoreference","n","georeference","s","a","getLogger","vertexAttributes","position","origin","transform","geographic","warn","f","spatialReference","p","g","x","y","hasZ","z","normal","tangent","vertexAttributesChanged","u","m","error","wkid","l","length","centerAt"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";import{isSome as t}from\"../../../core/maybe.js\";import{c as r}from\"../../../chunks/vec3f64.js\";import{projectPointToVector as i}from\"../../projection.js\";import{isGeographicMesh as o}from\"./geographicUtils.js\";import{ungeoreference as n,georeference as s}from\"./georeference.js\";const a=e.getLogger(\"esri.geometry.support.meshUtils.centerAt\");function c(e,r,i){var n;if(!e.vertexAttributes||!e.vertexAttributes.position)return;const s=null!=(n=null==i?void 0:i.origin)?n:e.origin;if(t(e.transform))null!=(null==i?void 0:i.geographic)&&i.geographic!==e.transform.geographic&&a.warn(`Specifying the 'geographic' parameter (${i.geographic}) different from the Mesh transform setting (${e.transform.geographic}) is not supported`),f(e.transform,r,s);else{o(e.spatialReference,i)?p(e,r,s):g(e,r,s)}}function f(e,t,r){const i=t.x-r.x,o=t.y-r.y,n=t.hasZ&&r.hasZ?t.z-r.z:0,s=e.origin;e.origin=[s[0]+i,s[1]+o,s[2]+n]}function p(e,t,r){const i=n(e.vertexAttributes,r,{geographic:!0}),{position:o,normal:a,tangent:c}=s(i,t,{geographic:!0});e.vertexAttributes.position=o,e.vertexAttributes.normal=a,e.vertexAttributes.tangent=c,e.vertexAttributesChanged()}function g(e,t,r){const o=u,n=m;if(i(t,n,e.spatialReference)){if(!i(r,o,e.spatialReference)){const t=e.origin;o[0]=t.x,o[1]=t.y,o[2]=t.z,a.error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}).`)}l(e.vertexAttributes.position,n,o),e.vertexAttributesChanged()}else a.error(`Failed to project centerAt location (wkid:${t.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid})`)}function l(e,t,r){if(e)for(let i=0;i<e.length;i+=3)for(let o=0;o<3;o++)e[i+o]+=t[o]-r[o]}const m=r(),u=r();export{c as centerAt};\n"]},"metadata":{},"sourceType":"module"}