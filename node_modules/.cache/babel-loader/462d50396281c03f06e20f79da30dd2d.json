{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { estimateAttributesObjectSize as e } from \"../../core/byteSizeEstimations.js\";\nimport \"../../core/has.js\";\nimport { isSome as t, isNone as s } from \"../../core/maybe.js\";\nimport { estimateSize as r } from \"../../core/typedArrayUtil.js\";\nimport { generateUID as n } from \"../../core/uid.js\";\nimport o from \"../../geometry/SpatialReference.js\";\nimport { empty as a, expandWithNestedArray as i, expandWithAABB as l, create as p } from \"../../geometry/support/aaBoundingBox.js\";\nimport { empty as c, expandWithNestedArray as u, expand as h, create as m } from \"../../geometry/support/aaBoundingRect.js\";\nimport { unquantizePolyline as y, unquantizePolygon as f, unquantizeMultipoint as g, unquantizePoint as d } from \"../../geometry/support/quantizationUtils.js\";\nimport { isFeatureGeometryType as b, featureGeometryTypeKebabDictionary as x } from \"../../geometry/support/typeUtils.js\";\nimport Z from \"../support/Field.js\";\nexport { equals } from \"./dehydratedFeatureComparison.js\";\n\nclass j {\n  constructor(e, t, s) {\n    this.uid = e, this.geometry = t, this.attributes = s, this.visible = !0, this.objectId = null, this.centroid = null;\n  }\n\n}\n\nfunction M(e) {\n  return t(e.geometry);\n}\n\nfunction k(e) {\n  return b(e.type);\n}\n\nclass N {\n  constructor() {\n    this.exceededTransferLimit = !1, this.features = [], this.fields = [], this.hasM = !1, this.hasZ = !1, this.geometryType = null, this.objectIdFieldName = null, this.globalIdFieldName = null, this.geometryProperties = null, this.geohashFieldName = null, this.spatialReference = null, this.transform = null;\n  }\n\n}\n\nfunction z(e) {\n  const s = x.fromJSON(e.geometryType),\n        r = o.fromJSON(e.spatialReference),\n        n = e.transform,\n        a = e.features.map(o => {\n    const a = F(o, s, r, e.objectIdFieldName),\n          i = a.geometry;\n    if (t(i) && n) switch (i.type) {\n      case \"point\":\n        a.geometry = d(n, i, i, i.hasZ, i.hasM);\n        break;\n\n      case \"multipoint\":\n        a.geometry = g(n, i, i, i.hasZ, i.hasM);\n        break;\n\n      case \"polygon\":\n        a.geometry = f(n, i, i, i.hasZ, i.hasM);\n        break;\n\n      case \"polyline\":\n        a.geometry = y(n, i, i, i.hasZ, i.hasM);\n        break;\n\n      case \"extent\":\n      case \"mesh\":\n        a.geometry = i;\n    }\n    return a;\n  });\n  return {\n    geometryType: s,\n    features: a,\n    spatialReference: r,\n    fields: e.fields ? e.fields.map(e => Z.fromJSON(e)) : null,\n    objectIdFieldName: e.objectIdFieldName,\n    globalIdFieldName: e.globalIdFieldName,\n    geohashFieldName: e.geohashFieldName,\n    geometryProperties: e.geometryProperties,\n    hasZ: e.hasZ,\n    hasM: e.hasM,\n    exceededTransferLimit: e.exceededTransferLimit,\n    transform: null\n  };\n}\n\nfunction F(e, t, s, r) {\n  return {\n    uid: n(),\n    objectId: r && e.attributes ? e.attributes[r] : null,\n    attributes: e.attributes,\n    geometry: I(e.geometry, t, s),\n    visible: !0\n  };\n}\n\nfunction I(e, t, s) {\n  if (!e) return null;\n\n  switch (t) {\n    case \"point\":\n      {\n        const t = e;\n        return {\n          x: t.x,\n          y: t.y,\n          z: t.z,\n          m: t.m,\n          hasZ: null != t.z,\n          hasM: null != t.m,\n          type: \"point\",\n          spatialReference: s\n        };\n      }\n\n    case \"polyline\":\n      {\n        const t = e;\n        return {\n          paths: t.paths,\n          hasZ: !!t.hasZ,\n          hasM: !!t.hasM,\n          type: \"polyline\",\n          spatialReference: s\n        };\n      }\n\n    case \"polygon\":\n      {\n        const t = e;\n        return {\n          rings: t.rings,\n          hasZ: !!t.hasZ,\n          hasM: !!t.hasM,\n          type: \"polygon\",\n          spatialReference: s\n        };\n      }\n\n    case \"multipoint\":\n      {\n        const t = e;\n        return {\n          points: t.points,\n          hasZ: !!t.hasZ,\n          hasM: !!t.hasM,\n          type: \"multipoint\",\n          spatialReference: s\n        };\n      }\n  }\n}\n\nfunction v(e, t, s, r) {\n  return {\n    x: e,\n    y: t,\n    z: s,\n    hasZ: null != s,\n    hasM: !1,\n    spatialReference: r,\n    type: \"point\"\n  };\n}\n\nfunction R(e) {\n  if (s(e)) return 0;\n  let t = 32;\n\n  switch (e.type) {\n    case \"point\":\n      t += 42;\n      break;\n\n    case \"polyline\":\n    case \"polygon\":\n      {\n        let s = 0;\n        const r = 2 + (e.hasZ ? 1 : 0) + (e.hasM ? 1 : 0),\n              n = \"polyline\" === e.type ? e.paths : e.rings;\n\n        for (const e of n) s += e.length;\n\n        t += 8 * s * r + 64, t += 128 * s, t += 34, t += 32 * (n.length + 1);\n        break;\n      }\n\n    case \"multipoint\":\n      {\n        const s = 2 + (e.hasZ ? 1 : 0) + (e.hasM ? 1 : 0),\n              r = e.points.length;\n        t += 8 * r * s + 64, t += 128 * r, t += 34, t += 32;\n        break;\n      }\n\n    case \"extent\":\n      t += 98, e.hasM && (t += 32), e.hasZ && (t += 32);\n      break;\n\n    case \"mesh\":\n      t += r(e.vertexAttributes.position), t += r(e.vertexAttributes.normal), t += r(e.vertexAttributes.uv), t += r(e.vertexAttributes.tangent);\n  }\n\n  return t;\n}\n\nfunction A(t) {\n  let s = 32;\n  return s += e(t.attributes), s += 3, s += 8 + R(t.geometry), s;\n}\n\nfunction w(e) {\n  if (s(e)) return 0;\n\n  switch (e.type) {\n    case \"point\":\n      return 1;\n\n    case \"polyline\":\n      {\n        let t = 0;\n\n        for (const s of e.paths) t += s.length;\n\n        return t;\n      }\n\n    case \"polygon\":\n      {\n        let t = 0;\n\n        for (const s of e.rings) t += s.length;\n\n        return t;\n      }\n\n    case \"multipoint\":\n      return e.points.length;\n\n    case \"extent\":\n      return 2;\n\n    case \"mesh\":\n      {\n        const t = e.vertexAttributes && e.vertexAttributes.position;\n        return t ? t.length / 3 : 0;\n      }\n\n    default:\n      return;\n  }\n}\n\nfunction S(e) {\n  if (s(e)) return !1;\n\n  switch (e.type) {\n    case \"extent\":\n    case \"point\":\n      return !0;\n\n    case \"polyline\":\n      for (const t of e.paths) if (t.length > 0) return !0;\n\n      return !1;\n\n    case \"polygon\":\n      for (const t of e.rings) if (t.length > 0) return !0;\n\n      return !1;\n\n    case \"multipoint\":\n      return e.points.length > 0;\n\n    case \"mesh\":\n      return !e.loaded || e.vertexAttributes.position.length > 0;\n  }\n}\n\nfunction T(e, t) {\n  switch (a(t), \"mesh\" === e.type && (e = e.extent), e.type) {\n    case \"point\":\n      t[0] = t[3] = e.x, t[1] = t[4] = e.y, e.hasZ && (t[2] = t[5] = e.z);\n      break;\n\n    case \"polyline\":\n      for (let s = 0; s < e.paths.length; s++) i(t, e.paths[s], e.hasZ);\n\n      break;\n\n    case \"polygon\":\n      for (let s = 0; s < e.rings.length; s++) i(t, e.rings[s], e.hasZ);\n\n      break;\n\n    case \"multipoint\":\n      i(t, e.points, e.hasZ);\n      break;\n\n    case \"extent\":\n      t[0] = e.xmin, t[1] = e.ymin, t[3] = e.xmax, t[4] = e.ymax, null != e.zmin && (t[2] = e.zmin), null != e.zmax && (t[5] = e.zmax);\n  }\n}\n\nfunction B(e, t) {\n  T(e, P), l(t, P);\n}\n\nfunction J(e, t) {\n  switch (c(t), \"mesh\" === e.type && (e = e.extent), e.type) {\n    case \"point\":\n      t[0] = t[2] = e.x, t[1] = t[3] = e.y;\n      break;\n\n    case \"polyline\":\n      for (let s = 0; s < e.paths.length; s++) u(t, e.paths[s]);\n\n      break;\n\n    case \"polygon\":\n      for (let s = 0; s < e.rings.length; s++) u(t, e.rings[s]);\n\n      break;\n\n    case \"multipoint\":\n      u(t, e.points);\n      break;\n\n    case \"extent\":\n      t[0] = e.xmin, t[1] = e.ymin, t[2] = e.xmax, t[3] = e.ymax;\n  }\n}\n\nfunction L(e, t) {\n  J(e, U), h(t, U);\n}\n\nfunction O(e, t) {\n  return null != e.objectId ? e.objectId : e.attributes && t ? e.attributes[t] : null;\n}\n\nconst P = p(),\n      U = m();\nexport { j as DehydratedFeatureClass, N as DehydratedFeatureSetClass, T as computeAABB, J as computeAABR, R as estimateGeometryObjectSize, A as estimateSize, B as expandAABB, L as expandAABR, z as fromFeatureSetJSON, I as fromJSONGeometry, O as getObjectId, M as hasGeometry, S as hasVertices, k as isFeatureGeometry, v as makeDehydratedPoint, w as numVertices };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js"],"names":["estimateAttributesObjectSize","e","isSome","t","isNone","s","estimateSize","r","generateUID","n","o","empty","a","expandWithNestedArray","i","expandWithAABB","l","create","p","c","u","expand","h","m","unquantizePolyline","y","unquantizePolygon","f","unquantizeMultipoint","g","unquantizePoint","d","isFeatureGeometryType","b","featureGeometryTypeKebabDictionary","x","Z","equals","j","constructor","uid","geometry","attributes","visible","objectId","centroid","M","k","type","N","exceededTransferLimit","features","fields","hasM","hasZ","geometryType","objectIdFieldName","globalIdFieldName","geometryProperties","geohashFieldName","spatialReference","transform","z","fromJSON","map","F","I","paths","rings","points","v","R","length","vertexAttributes","position","normal","uv","tangent","A","w","S","loaded","T","extent","xmin","ymin","xmax","ymax","zmin","zmax","B","P","J","L","U","O","DehydratedFeatureClass","DehydratedFeatureSetClass","computeAABB","computeAABR","estimateGeometryObjectSize","expandAABB","expandAABR","fromFeatureSetJSON","fromJSONGeometry","getObjectId","hasGeometry","hasVertices","isFeatureGeometry","makeDehydratedPoint","numVertices"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{estimateAttributesObjectSize as e}from\"../../core/byteSizeEstimations.js\";import\"../../core/has.js\";import{isSome as t,isNone as s}from\"../../core/maybe.js\";import{estimateSize as r}from\"../../core/typedArrayUtil.js\";import{generateUID as n}from\"../../core/uid.js\";import o from\"../../geometry/SpatialReference.js\";import{empty as a,expandWithNestedArray as i,expandWithAABB as l,create as p}from\"../../geometry/support/aaBoundingBox.js\";import{empty as c,expandWithNestedArray as u,expand as h,create as m}from\"../../geometry/support/aaBoundingRect.js\";import{unquantizePolyline as y,unquantizePolygon as f,unquantizeMultipoint as g,unquantizePoint as d}from\"../../geometry/support/quantizationUtils.js\";import{isFeatureGeometryType as b,featureGeometryTypeKebabDictionary as x}from\"../../geometry/support/typeUtils.js\";import Z from\"../support/Field.js\";export{equals}from\"./dehydratedFeatureComparison.js\";class j{constructor(e,t,s){this.uid=e,this.geometry=t,this.attributes=s,this.visible=!0,this.objectId=null,this.centroid=null}}function M(e){return t(e.geometry)}function k(e){return b(e.type)}class N{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function z(e){const s=x.fromJSON(e.geometryType),r=o.fromJSON(e.spatialReference),n=e.transform,a=e.features.map((o=>{const a=F(o,s,r,e.objectIdFieldName),i=a.geometry;if(t(i)&&n)switch(i.type){case\"point\":a.geometry=d(n,i,i,i.hasZ,i.hasM);break;case\"multipoint\":a.geometry=g(n,i,i,i.hasZ,i.hasM);break;case\"polygon\":a.geometry=f(n,i,i,i.hasZ,i.hasM);break;case\"polyline\":a.geometry=y(n,i,i,i.hasZ,i.hasM);break;case\"extent\":case\"mesh\":a.geometry=i}return a}));return{geometryType:s,features:a,spatialReference:r,fields:e.fields?e.fields.map((e=>Z.fromJSON(e))):null,objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}}function F(e,t,s,r){return{uid:n(),objectId:r&&e.attributes?e.attributes[r]:null,attributes:e.attributes,geometry:I(e.geometry,t,s),visible:!0}}function I(e,t,s){if(!e)return null;switch(t){case\"point\":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:\"point\",spatialReference:s}}case\"polyline\":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polyline\",spatialReference:s}}case\"polygon\":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polygon\",spatialReference:s}}case\"multipoint\":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"multipoint\",spatialReference:s}}}}function v(e,t,s,r){return{x:e,y:t,z:s,hasZ:null!=s,hasM:!1,spatialReference:r,type:\"point\"}}function R(e){if(s(e))return 0;let t=32;switch(e.type){case\"point\":t+=42;break;case\"polyline\":case\"polygon\":{let s=0;const r=2+(e.hasZ?1:0)+(e.hasM?1:0),n=\"polyline\"===e.type?e.paths:e.rings;for(const e of n)s+=e.length;t+=8*s*r+64,t+=128*s,t+=34,t+=32*(n.length+1);break}case\"multipoint\":{const s=2+(e.hasZ?1:0)+(e.hasM?1:0),r=e.points.length;t+=8*r*s+64,t+=128*r,t+=34,t+=32;break}case\"extent\":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case\"mesh\":t+=r(e.vertexAttributes.position),t+=r(e.vertexAttributes.normal),t+=r(e.vertexAttributes.uv),t+=r(e.vertexAttributes.tangent)}return t}function A(t){let s=32;return s+=e(t.attributes),s+=3,s+=8+R(t.geometry),s}function w(e){if(s(e))return 0;switch(e.type){case\"point\":return 1;case\"polyline\":{let t=0;for(const s of e.paths)t+=s.length;return t}case\"polygon\":{let t=0;for(const s of e.rings)t+=s.length;return t}case\"multipoint\":return e.points.length;case\"extent\":return 2;case\"mesh\":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function S(e){if(s(e))return!1;switch(e.type){case\"extent\":case\"point\":return!0;case\"polyline\":for(const t of e.paths)if(t.length>0)return!0;return!1;case\"polygon\":for(const t of e.rings)if(t.length>0)return!0;return!1;case\"multipoint\":return e.points.length>0;case\"mesh\":return!e.loaded||e.vertexAttributes.position.length>0}}function T(e,t){switch(a(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case\"polyline\":for(let s=0;s<e.paths.length;s++)i(t,e.paths[s],e.hasZ);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)i(t,e.rings[s],e.hasZ);break;case\"multipoint\":i(t,e.points,e.hasZ);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function B(e,t){T(e,P),l(t,P)}function J(e,t){switch(c(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case\"polyline\":for(let s=0;s<e.paths.length;s++)u(t,e.paths[s]);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)u(t,e.rings[s]);break;case\"multipoint\":u(t,e.points);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function L(e,t){J(e,U),h(t,U)}function O(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}const P=p(),U=m();export{j as DehydratedFeatureClass,N as DehydratedFeatureSetClass,T as computeAABB,J as computeAABR,R as estimateGeometryObjectSize,A as estimateSize,B as expandAABB,L as expandAABR,z as fromFeatureSetJSON,I as fromJSONGeometry,O as getObjectId,M as hasGeometry,S as hasVertices,k as isFeatureGeometry,v as makeDehydratedPoint,w as numVertices};\n"]},"metadata":{},"sourceType":"module"}