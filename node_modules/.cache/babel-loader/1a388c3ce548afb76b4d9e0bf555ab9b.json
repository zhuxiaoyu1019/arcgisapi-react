{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { MAX_INDEX_COUNT as t, ManagedTextureBackedBuffer as e } from \"./ManagedTextureBackedBuffer.js\";\n\nclass r {\n  constructor(t, e = 1) {\n    this.rctx = t, this.fieldCount = e, this.buffers = [];\n  }\n\n  garbageCollect() {\n    this.buffers = this.buffers.filter(t => 0 !== t.activeCount || (t.dispose(), !1));\n  }\n\n  destroy() {\n    this.buffers.forEach(t => t.dispose()), this.buffers = [];\n  }\n\n  getBuffer(r) {\n    for (const t of this.buffers) if (t.availableCount >= r) return t;\n\n    if (r > t) return null;\n    const s = new e(this.rctx, this.fieldCount);\n    return this.buffers.push(s), s;\n  }\n\n  updateTextures() {\n    for (const t of this.buffers) t.textureBuffer.updateTexture();\n  }\n\n}\n\nexport { r as BufferManager };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureBackedBuffer/BufferManager.js"],"names":["MAX_INDEX_COUNT","t","ManagedTextureBackedBuffer","e","r","constructor","rctx","fieldCount","buffers","garbageCollect","filter","activeCount","dispose","destroy","forEach","getBuffer","availableCount","s","push","updateTextures","textureBuffer","updateTexture","BufferManager"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,eAAe,IAAIC,CAA1B,EAA4BC,0BAA0B,IAAIC,CAA1D,QAAgE,iCAAhE;;AAAkG,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACJ,CAAD,EAAGE,CAAC,GAAC,CAAL,EAAO;AAAC,SAAKG,IAAL,GAAUL,CAAV,EAAY,KAAKM,UAAL,GAAgBJ,CAA5B,EAA8B,KAAKK,OAAL,GAAa,EAA3C;AAA8C;;AAAAC,EAAAA,cAAc,GAAE;AAAC,SAAKD,OAAL,GAAa,KAAKA,OAAL,CAAaE,MAAb,CAAqBT,CAAC,IAAE,MAAIA,CAAC,CAACU,WAAN,KAAoBV,CAAC,CAACW,OAAF,IAAY,CAAC,CAAjC,CAAxB,CAAb;AAA2E;;AAAAC,EAAAA,OAAO,GAAE;AAAC,SAAKL,OAAL,CAAaM,OAAb,CAAsBb,CAAC,IAAEA,CAAC,CAACW,OAAF,EAAzB,GAAuC,KAAKJ,OAAL,GAAa,EAApD;AAAuD;;AAAAO,EAAAA,SAAS,CAACX,CAAD,EAAG;AAAC,SAAI,MAAMH,CAAV,IAAe,KAAKO,OAApB,EAA4B,IAAGP,CAAC,CAACe,cAAF,IAAkBZ,CAArB,EAAuB,OAAOH,CAAP;;AAAS,QAAGG,CAAC,GAACH,CAAL,EAAO,OAAO,IAAP;AAAY,UAAMgB,CAAC,GAAC,IAAId,CAAJ,CAAM,KAAKG,IAAX,EAAgB,KAAKC,UAArB,CAAR;AAAyC,WAAO,KAAKC,OAAL,CAAaU,IAAb,CAAkBD,CAAlB,GAAqBA,CAA5B;AAA8B;;AAAAE,EAAAA,cAAc,GAAE;AAAC,SAAI,MAAMlB,CAAV,IAAe,KAAKO,OAApB,EAA4BP,CAAC,CAACmB,aAAF,CAAgBC,aAAhB;AAAgC;;AAA/c;;AAAgd,SAAOjB,CAAC,IAAIkB,aAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{MAX_INDEX_COUNT as t,ManagedTextureBackedBuffer as e}from\"./ManagedTextureBackedBuffer.js\";class r{constructor(t,e=1){this.rctx=t,this.fieldCount=e,this.buffers=[]}garbageCollect(){this.buffers=this.buffers.filter((t=>0!==t.activeCount||(t.dispose(),!1)))}destroy(){this.buffers.forEach((t=>t.dispose())),this.buffers=[]}getBuffer(r){for(const t of this.buffers)if(t.availableCount>=r)return t;if(r>t)return null;const s=new e(this.rctx,this.fieldCount);return this.buffers.push(s),s}updateTextures(){for(const t of this.buffers)t.textureBuffer.updateTexture()}}export{r as BufferManager};\n"]},"metadata":{},"sourceType":"module"}