{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../core/has.js\";\nimport s from \"../core/Logger.js\";\nimport { acosClamped as i } from \"../core/mathUtils.js\";\nimport { ObjectStack as n } from \"../core/ObjectStack.js\";\nimport { a as t, e as a, c as r, i as o } from \"./mat4.js\";\nimport { c as e } from \"./mat4f64.js\";\nimport { g as c, a as u, b as g, s as b, i as f, l, r as p, d as m, f as d, k as h, m as j, n as I, p as y } from \"./vec3.js\";\nimport { c as P, a as v, f as N } from \"./vec3f64.js\";\nimport { projectPointClamp as w, distance2 as M, create as S } from \"../geometry/support/lineSegment.js\";\nimport { create as T, wrap as A, copy as V, fromVectorsAndPoint as _, normal as x, fromValues as k, intersectRay as E, intersectLineSegment as O, intersectLineSegmentClamp as U, isPointInside as q, projectPoint as B, setOffsetFromPoint as F } from \"../geometry/support/plane.js\";\nimport { distance2 as R } from \"../geometry/support/ray.js\";\nimport { projectPointSignedLength as Y } from \"../geometry/support/vector.js\";\nimport { sv3d as C } from \"../geometry/support/vectorStacks.js\";\nconst L = s.getLogger(\"esri.views.3d.support.geometryUtils.boundedPlane\");\n\nclass z {\n  constructor() {\n    this.plane = T(), this.origin = P(), this.basis1 = P(), this.basis2 = P();\n  }\n\n}\n\nfunction G(s = vs) {\n  return {\n    plane: T(s.plane),\n    origin: v(s.origin),\n    basis1: v(s.basis1),\n    basis2: v(s.basis2)\n  };\n}\n\nfunction W(s, i, n) {\n  const t = Ss.get();\n  return t.origin = s, t.basis1 = i, t.basis2 = n, t.plane = A(0, 0, 0, 0), K(t), t;\n}\n\nfunction D(s, i = G()) {\n  return J(s.origin, s.basis1, s.basis2, i);\n}\n\nfunction H(s, i) {\n  c(i.origin, s.origin), c(i.basis1, s.basis1), c(i.basis2, s.basis2), V(s.plane, i.plane);\n}\n\nfunction J(s, i, n, t = G()) {\n  return c(t.origin, s), c(t.basis1, i), c(t.basis2, n), K(t), ys(t, \"fromValues()\"), t;\n}\n\nfunction K(s) {\n  _(s.basis2, s.basis1, s.origin, s.plane);\n}\n\nfunction Q(s, i, n) {\n  s !== n && D(s, n);\n  const t = u(C.get(), ms(s), i);\n  return g(n.origin, n.origin, t), n.plane[3] -= i, n;\n}\n\nfunction X(s, i, n) {\n  return Z(i, n), Q(n, gs(s, s.origin), n), n;\n}\n\nfunction Z(s, i = G()) {\n  const n = (s[2] - s[0]) / 2,\n        t = (s[3] - s[1]) / 2;\n  return b(i.origin, s[0] + n, s[1] + t, 0), b(i.basis1, n, 0, 0), b(i.basis2, 0, t, 0), k(0, 0, 1, 0, i.plane), i;\n}\n\nfunction $(s, i, n) {\n  return !!E(s.plane, i, n) && hs(s, n);\n}\n\nfunction ss(s, i, n) {\n  if ($(s, i, n)) return n;\n  const t = is(s, i, C.get());\n  return g(n, i.origin, u(C.get(), i.direction, f(i.origin, t) / l(i.direction))), n;\n}\n\nfunction is(s, n, t) {\n  const a = Ns.get();\n  Ps(s, n, a, Ns.get());\n  let r = Number.POSITIVE_INFINITY;\n\n  for (const o of Ts) {\n    const e = Is(s, o, ws.get()),\n          u = C.get();\n\n    if (O(a, e, u)) {\n      const s = p(C.get(), n.origin, u),\n            a = Math.abs(i(m(n.direction, s)));\n      a < r && (r = a, c(t, u));\n    }\n  }\n\n  return r === Number.POSITIVE_INFINITY ? ns(s, n, t) : t;\n}\n\nfunction ns(s, i, n) {\n  if ($(s, i, n)) return n;\n  const t = Ns.get(),\n        a = Ns.get();\n  Ps(s, i, t, a);\n  let r = Number.POSITIVE_INFINITY;\n\n  for (const o of Ts) {\n    const e = Is(s, o, ws.get()),\n          u = C.get();\n\n    if (U(t, e, u)) {\n      const s = R(i, u);\n      if (!q(a, u)) continue;\n      s < r && (r = s, c(n, u));\n    }\n  }\n\n  return rs(s, i.origin) < r && ts(s, i.origin, n), n;\n}\n\nfunction ts(s, i, n) {\n  const t = B(s.plane, i, C.get()),\n        a = w(js(s, s.basis1), t, -1, 1, C.get()),\n        r = w(js(s, s.basis2), t, -1, 1, C.get());\n  return d(n, g(C.get(), a, r), s.origin), n;\n}\n\nfunction as(s, i, n) {\n  const {\n    origin: t,\n    basis1: a,\n    basis2: r\n  } = s,\n        o = d(C.get(), i, t),\n        e = Y(a, o),\n        c = Y(r, o),\n        u = Y(ms(s), o);\n  return b(n, e, c, u);\n}\n\nfunction rs(s, i) {\n  const n = as(s, i, C.get()),\n        {\n    basis1: t,\n    basis2: a\n  } = s,\n        r = l(t),\n        o = l(a),\n        e = Math.max(Math.abs(n[0]) - r, 0),\n        c = Math.max(Math.abs(n[1]) - o, 0),\n        u = n[2];\n  return e * e + c * c + u * u;\n}\n\nfunction os(s, i) {\n  return Math.sqrt(rs(s, i));\n}\n\nfunction es(s, i) {\n  let n = Number.NEGATIVE_INFINITY;\n\n  for (const t of Ts) {\n    const a = Is(s, t, ws.get()),\n          r = M(a, i);\n    r > n && (n = r);\n  }\n\n  return Math.sqrt(n);\n}\n\nfunction cs(s, i) {\n  return q(s.plane, i) && hs(s, i);\n}\n\nfunction us(s, i, n, t) {\n  return ds(s, n, t);\n}\n\nfunction gs(s, i) {\n  const n = -s.plane[3];\n  return Y(ms(s), i) - n;\n}\n\nfunction bs(s, i, n, t) {\n  const a = gs(s, i),\n        r = u(Ms, ms(s), n - a);\n  return g(t, i, r), t;\n}\n\nfunction fs(s, i) {\n  return h(s.basis1, i.basis1) && h(s.basis2, i.basis2) && h(s.origin, i.origin);\n}\n\nfunction ls(s, i, n) {\n  return s !== n && D(s, n), t(As, i), a(As, As), j(n.basis1, s.basis1, As), j(n.basis2, s.basis2, As), j(x(n.plane), x(s.plane), As), j(n.origin, s.origin, i), F(n.plane, n.origin, n.plane), n;\n}\n\nfunction ps(s, i, n, t) {\n  return s !== t && D(s, t), r(Vs, o(Vs), i, n), j(t.basis1, s.basis1, Vs), j(t.basis2, s.basis2, Vs), K(t), t;\n}\n\nfunction ms(s) {\n  return x(s.plane);\n}\n\nfunction ds(s, i, n) {\n  switch (i) {\n    case 0:\n      c(n, s.basis1), I(n, n);\n      break;\n\n    case 1:\n      c(n, s.basis2), I(n, n);\n      break;\n\n    case 2:\n      c(n, ms(s));\n  }\n\n  return n;\n}\n\nfunction hs(s, i) {\n  const n = d(C.get(), i, s.origin),\n        t = y(s.basis1),\n        a = y(s.basis2),\n        r = m(s.basis1, n),\n        o = m(s.basis2, n);\n  return -r - t < 0 && r - t < 0 && -o - a < 0 && o - a < 0;\n}\n\nfunction js(s, i) {\n  const n = ws.get();\n  return c(n.origin, s.origin), c(n.vector, i), n;\n}\n\nfunction Is(s, i, n) {\n  const {\n    basis1: t,\n    basis2: a,\n    origin: r\n  } = s,\n        o = u(C.get(), t, i.origin[0]),\n        e = u(C.get(), a, i.origin[1]);\n  g(n.origin, o, e), g(n.origin, n.origin, r);\n  const c = u(C.get(), t, i.direction[0]),\n        b = u(C.get(), a, i.direction[1]);\n  return u(n.vector, g(c, c, b), 2), n;\n}\n\nfunction ys(s, i) {\n  Math.abs(m(s.basis1, s.basis2) / (l(s.basis1) * l(s.basis2))) > 1e-6 && L.warn(i, \"Provided basis vectors are not perpendicular\"), Math.abs(m(s.basis1, ms(s))) > 1e-6 && L.warn(i, \"Basis vectors and plane normal are not perpendicular\"), Math.abs(-m(ms(s), s.origin) - s.plane[3]) > 1e-6 && L.warn(i, \"Plane offset is not consistent with plane origin\");\n}\n\nfunction Ps(s, i, n, t) {\n  const a = ms(s);\n  _(a, i.direction, i.origin, n), _(x(n), a, i.origin, t);\n}\n\nconst vs = {\n  plane: T(),\n  origin: N(0, 0, 0),\n  basis1: N(1, 0, 0),\n  basis2: N(0, 1, 0)\n},\n      Ns = new n(T),\n      ws = new n(S),\n      Ms = P(),\n      Ss = new n(() => ({\n  origin: null,\n  basis1: null,\n  basis2: null,\n  plane: null\n})),\n      Ts = [{\n  origin: [-1, -1],\n  direction: [1, 0]\n}, {\n  origin: [1, -1],\n  direction: [0, 1]\n}, {\n  origin: [1, 1],\n  direction: [-1, 0]\n}, {\n  origin: [-1, 1],\n  direction: [0, -1]\n}],\n      As = e(),\n      Vs = e();\n\nvar _s = Object.freeze({\n  __proto__: null,\n  BoundedPlaneClass: z,\n  create: G,\n  wrap: W,\n  copy: D,\n  copyWithoutVerify: H,\n  fromValues: J,\n  updateUnboundedPlane: K,\n  elevate: Q,\n  setExtent: X,\n  fromAABoundingRect: Z,\n  intersectRay: $,\n  intersectRayClosestSilhouette: ss,\n  closestPointOnSilhouette: is,\n  closestPoint: ns,\n  projectPoint: ts,\n  projectPointLocal: as,\n  distance2: rs,\n  distance: os,\n  distanceToSilhouette: es,\n  extrusionContainsPoint: cs,\n  axisAt: us,\n  altitudeAt: gs,\n  setAltitudeAt: bs,\n  equals: fs,\n  transform: ls,\n  rotate: ps,\n  normal: ms,\n  UP: vs\n});\n\nexport { fs as A, z as B, vs as U, G as a, _s as b, D as c, H as d, cs as e, J as f, Z as g, os as h, $ as i, Q as j, ss as k, is as l, ns as m, ms as n, as as o, ts as p, rs as q, ps as r, X as s, ls as t, K as u, es as v, W as w, us as x, gs as y, bs as z };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/chunks/boundedPlane.js"],"names":["s","acosClamped","i","ObjectStack","n","a","t","e","c","r","o","g","u","b","f","l","p","d","m","k","h","j","I","y","P","v","N","projectPointClamp","w","distance2","M","create","S","T","wrap","A","copy","V","fromVectorsAndPoint","_","normal","x","fromValues","intersectRay","E","intersectLineSegment","O","intersectLineSegmentClamp","U","isPointInside","q","projectPoint","B","setOffsetFromPoint","F","R","projectPointSignedLength","Y","sv3d","C","L","getLogger","z","constructor","plane","origin","basis1","basis2","G","vs","W","Ss","get","K","D","J","H","ys","Q","ms","X","Z","gs","$","hs","ss","is","direction","Ns","Ps","Number","POSITIVE_INFINITY","Ts","Is","ws","Math","abs","ns","rs","ts","js","as","max","os","sqrt","es","NEGATIVE_INFINITY","cs","us","ds","bs","Ms","fs","ls","As","ps","Vs","vector","warn","_s","Object","freeze","__proto__","BoundedPlaneClass","copyWithoutVerify","updateUnboundedPlane","elevate","setExtent","fromAABoundingRect","intersectRayClosestSilhouette","closestPointOnSilhouette","closestPoint","projectPointLocal","distance","distanceToSilhouette","extrusionContainsPoint","axisAt","altitudeAt","setAltitudeAt","equals","transform","rotate","UP"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../core/has.js\";import s from\"../core/Logger.js\";import{acosClamped as i}from\"../core/mathUtils.js\";import{ObjectStack as n}from\"../core/ObjectStack.js\";import{a as t,e as a,c as r,i as o}from\"./mat4.js\";import{c as e}from\"./mat4f64.js\";import{g as c,a as u,b as g,s as b,i as f,l,r as p,d as m,f as d,k as h,m as j,n as I,p as y}from\"./vec3.js\";import{c as P,a as v,f as N}from\"./vec3f64.js\";import{projectPointClamp as w,distance2 as M,create as S}from\"../geometry/support/lineSegment.js\";import{create as T,wrap as A,copy as V,fromVectorsAndPoint as _,normal as x,fromValues as k,intersectRay as E,intersectLineSegment as O,intersectLineSegmentClamp as U,isPointInside as q,projectPoint as B,setOffsetFromPoint as F}from\"../geometry/support/plane.js\";import{distance2 as R}from\"../geometry/support/ray.js\";import{projectPointSignedLength as Y}from\"../geometry/support/vector.js\";import{sv3d as C}from\"../geometry/support/vectorStacks.js\";const L=s.getLogger(\"esri.views.3d.support.geometryUtils.boundedPlane\");class z{constructor(){this.plane=T(),this.origin=P(),this.basis1=P(),this.basis2=P()}}function G(s=vs){return{plane:T(s.plane),origin:v(s.origin),basis1:v(s.basis1),basis2:v(s.basis2)}}function W(s,i,n){const t=Ss.get();return t.origin=s,t.basis1=i,t.basis2=n,t.plane=A(0,0,0,0),K(t),t}function D(s,i=G()){return J(s.origin,s.basis1,s.basis2,i)}function H(s,i){c(i.origin,s.origin),c(i.basis1,s.basis1),c(i.basis2,s.basis2),V(s.plane,i.plane)}function J(s,i,n,t=G()){return c(t.origin,s),c(t.basis1,i),c(t.basis2,n),K(t),ys(t,\"fromValues()\"),t}function K(s){_(s.basis2,s.basis1,s.origin,s.plane)}function Q(s,i,n){s!==n&&D(s,n);const t=u(C.get(),ms(s),i);return g(n.origin,n.origin,t),n.plane[3]-=i,n}function X(s,i,n){return Z(i,n),Q(n,gs(s,s.origin),n),n}function Z(s,i=G()){const n=(s[2]-s[0])/2,t=(s[3]-s[1])/2;return b(i.origin,s[0]+n,s[1]+t,0),b(i.basis1,n,0,0),b(i.basis2,0,t,0),k(0,0,1,0,i.plane),i}function $(s,i,n){return!!E(s.plane,i,n)&&hs(s,n)}function ss(s,i,n){if($(s,i,n))return n;const t=is(s,i,C.get());return g(n,i.origin,u(C.get(),i.direction,f(i.origin,t)/l(i.direction))),n}function is(s,n,t){const a=Ns.get();Ps(s,n,a,Ns.get());let r=Number.POSITIVE_INFINITY;for(const o of Ts){const e=Is(s,o,ws.get()),u=C.get();if(O(a,e,u)){const s=p(C.get(),n.origin,u),a=Math.abs(i(m(n.direction,s)));a<r&&(r=a,c(t,u))}}return r===Number.POSITIVE_INFINITY?ns(s,n,t):t}function ns(s,i,n){if($(s,i,n))return n;const t=Ns.get(),a=Ns.get();Ps(s,i,t,a);let r=Number.POSITIVE_INFINITY;for(const o of Ts){const e=Is(s,o,ws.get()),u=C.get();if(U(t,e,u)){const s=R(i,u);if(!q(a,u))continue;s<r&&(r=s,c(n,u))}}return rs(s,i.origin)<r&&ts(s,i.origin,n),n}function ts(s,i,n){const t=B(s.plane,i,C.get()),a=w(js(s,s.basis1),t,-1,1,C.get()),r=w(js(s,s.basis2),t,-1,1,C.get());return d(n,g(C.get(),a,r),s.origin),n}function as(s,i,n){const{origin:t,basis1:a,basis2:r}=s,o=d(C.get(),i,t),e=Y(a,o),c=Y(r,o),u=Y(ms(s),o);return b(n,e,c,u)}function rs(s,i){const n=as(s,i,C.get()),{basis1:t,basis2:a}=s,r=l(t),o=l(a),e=Math.max(Math.abs(n[0])-r,0),c=Math.max(Math.abs(n[1])-o,0),u=n[2];return e*e+c*c+u*u}function os(s,i){return Math.sqrt(rs(s,i))}function es(s,i){let n=Number.NEGATIVE_INFINITY;for(const t of Ts){const a=Is(s,t,ws.get()),r=M(a,i);r>n&&(n=r)}return Math.sqrt(n)}function cs(s,i){return q(s.plane,i)&&hs(s,i)}function us(s,i,n,t){return ds(s,n,t)}function gs(s,i){const n=-s.plane[3];return Y(ms(s),i)-n}function bs(s,i,n,t){const a=gs(s,i),r=u(Ms,ms(s),n-a);return g(t,i,r),t}function fs(s,i){return h(s.basis1,i.basis1)&&h(s.basis2,i.basis2)&&h(s.origin,i.origin)}function ls(s,i,n){return s!==n&&D(s,n),t(As,i),a(As,As),j(n.basis1,s.basis1,As),j(n.basis2,s.basis2,As),j(x(n.plane),x(s.plane),As),j(n.origin,s.origin,i),F(n.plane,n.origin,n.plane),n}function ps(s,i,n,t){return s!==t&&D(s,t),r(Vs,o(Vs),i,n),j(t.basis1,s.basis1,Vs),j(t.basis2,s.basis2,Vs),K(t),t}function ms(s){return x(s.plane)}function ds(s,i,n){switch(i){case 0:c(n,s.basis1),I(n,n);break;case 1:c(n,s.basis2),I(n,n);break;case 2:c(n,ms(s))}return n}function hs(s,i){const n=d(C.get(),i,s.origin),t=y(s.basis1),a=y(s.basis2),r=m(s.basis1,n),o=m(s.basis2,n);return-r-t<0&&r-t<0&&-o-a<0&&o-a<0}function js(s,i){const n=ws.get();return c(n.origin,s.origin),c(n.vector,i),n}function Is(s,i,n){const{basis1:t,basis2:a,origin:r}=s,o=u(C.get(),t,i.origin[0]),e=u(C.get(),a,i.origin[1]);g(n.origin,o,e),g(n.origin,n.origin,r);const c=u(C.get(),t,i.direction[0]),b=u(C.get(),a,i.direction[1]);return u(n.vector,g(c,c,b),2),n}function ys(s,i){Math.abs(m(s.basis1,s.basis2)/(l(s.basis1)*l(s.basis2)))>1e-6&&L.warn(i,\"Provided basis vectors are not perpendicular\"),Math.abs(m(s.basis1,ms(s)))>1e-6&&L.warn(i,\"Basis vectors and plane normal are not perpendicular\"),Math.abs(-m(ms(s),s.origin)-s.plane[3])>1e-6&&L.warn(i,\"Plane offset is not consistent with plane origin\")}function Ps(s,i,n,t){const a=ms(s);_(a,i.direction,i.origin,n),_(x(n),a,i.origin,t)}const vs={plane:T(),origin:N(0,0,0),basis1:N(1,0,0),basis2:N(0,1,0)},Ns=new n(T),ws=new n(S),Ms=P(),Ss=new n((()=>({origin:null,basis1:null,basis2:null,plane:null}))),Ts=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],As=e(),Vs=e();var _s=Object.freeze({__proto__:null,BoundedPlaneClass:z,create:G,wrap:W,copy:D,copyWithoutVerify:H,fromValues:J,updateUnboundedPlane:K,elevate:Q,setExtent:X,fromAABoundingRect:Z,intersectRay:$,intersectRayClosestSilhouette:ss,closestPointOnSilhouette:is,closestPoint:ns,projectPoint:ts,projectPointLocal:as,distance2:rs,distance:os,distanceToSilhouette:es,extrusionContainsPoint:cs,axisAt:us,altitudeAt:gs,setAltitudeAt:bs,equals:fs,transform:ls,rotate:ps,normal:ms,UP:vs});export{fs as A,z as B,vs as U,G as a,_s as b,D as c,H as d,cs as e,J as f,Z as g,os as h,$ as i,Q as j,ss as k,is as l,ns as m,ms as n,as as o,ts as p,rs as q,ps as r,X as s,ls as t,K as u,es as v,W as w,us as x,gs as y,bs as z};\n"]},"metadata":{},"sourceType":"module"}