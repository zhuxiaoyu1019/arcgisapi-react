{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { f as t } from \"../../../../../chunks/vec4f32.js\";\nimport e from \"../../../../webgl/BufferObject.js\";\nimport \"../../../../webgl/FramebufferObject.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../webgl/enums.js\";\nimport \"../../../../webgl/RenderingContext.js\";\nimport \"../../../../../chunks/builtins.js\";\nimport { createProgram as r } from \"../../../../webgl/programUtils.js\";\nimport \"../../../../webgl/Texture.js\";\nimport i from \"../../../../webgl/VertexArrayObject.js\";\nimport s from \"./WGLBrush.js\";\nimport { background as o } from \"../shaders/BackgroundPrograms.js\";\n\nclass a extends s {\n  constructor() {\n    super(...arguments), this._color = t(1, 0, 0, 1), this._initialized = !1;\n  }\n\n  dispose() {\n    this._solidProgram && (this._solidProgram.dispose(), this._solidProgram = null), this._solidVertexArrayObject && (this._solidVertexArrayObject.dispose(), this._solidVertexArrayObject = null);\n  }\n\n  prepareState({\n    context: t\n  }, e) {\n    t.setDepthWriteEnabled(!1), t.setDepthTestEnabled(!1), t.setStencilTestEnabled(!0), t.setBlendingEnabled(!1), t.setColorMask(!1, !1, !1, !1), t.setStencilOp(7680, 7680, 7681), t.setStencilWriteMask(255), t.setStencilFunctionSeparate(1032, 516, e.stencilRef, 255);\n  }\n\n  draw(t, e) {\n    const {\n      context: r\n    } = t;\n    this._initialized || this._initialize(r), r.bindVAO(this._solidVertexArrayObject), r.useProgram(this._solidProgram), this._solidProgram.setUniformMatrix3fv(\"u_dvsMat3\", e.transforms.dvs), this._solidProgram.setUniform2fv(\"u_coord_range\", e.coordRange), this._solidProgram.setUniform1f(\"u_depth\", 0), this._solidProgram.setUniform4fv(\"u_color\", this._color), r.drawArrays(5, 0, 4), r.bindVAO();\n  }\n\n  _initialize(t) {\n    if (this._initialized) return !0;\n    const s = r(t, o);\n    if (!s) return !1;\n    const a = {\n      geometry: [{\n        name: \"a_pos\",\n        count: 2,\n        type: 5120,\n        offset: 0,\n        stride: 2,\n        normalized: !1,\n        divisor: 0\n      }]\n    },\n          n = new Int8Array([0, 0, 1, 0, 0, 1, 1, 1]),\n          l = e.createVertex(t, 35044, n),\n          d = new i(t, o.attributes, a, {\n      geometry: l\n    });\n    return this._solidProgram = s, this._solidVertexArrayObject = d, this._initialized = !0, !0;\n  }\n\n}\n\nexport default a;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js"],"names":["f","t","e","createProgram","r","i","s","background","o","a","constructor","arguments","_color","_initialized","dispose","_solidProgram","_solidVertexArrayObject","prepareState","context","setDepthWriteEnabled","setDepthTestEnabled","setStencilTestEnabled","setBlendingEnabled","setColorMask","setStencilOp","setStencilWriteMask","setStencilFunctionSeparate","stencilRef","draw","_initialize","bindVAO","useProgram","setUniformMatrix3fv","transforms","dvs","setUniform2fv","coordRange","setUniform1f","setUniform4fv","drawArrays","geometry","name","count","type","offset","stride","normalized","divisor","n","Int8Array","l","createVertex","d","attributes"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{f as t}from\"../../../../../chunks/vec4f32.js\";import e from\"../../../../webgl/BufferObject.js\";import\"../../../../webgl/FramebufferObject.js\";import\"../../../../../core/has.js\";import\"../../../../webgl/enums.js\";import\"../../../../webgl/RenderingContext.js\";import\"../../../../../chunks/builtins.js\";import{createProgram as r}from\"../../../../webgl/programUtils.js\";import\"../../../../webgl/Texture.js\";import i from\"../../../../webgl/VertexArrayObject.js\";import s from\"./WGLBrush.js\";import{background as o}from\"../shaders/BackgroundPrograms.js\";class a extends s{constructor(){super(...arguments),this._color=t(1,0,0,1),this._initialized=!1}dispose(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)}prepareState({context:t},e){t.setDepthWriteEnabled(!1),t.setDepthTestEnabled(!1),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setColorMask(!1,!1,!1,!1),t.setStencilOp(7680,7680,7681),t.setStencilWriteMask(255),t.setStencilFunctionSeparate(1032,516,e.stencilRef,255)}draw(t,e){const{context:r}=t;this._initialized||this._initialize(r),r.bindVAO(this._solidVertexArrayObject),r.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv(\"u_dvsMat3\",e.transforms.dvs),this._solidProgram.setUniform2fv(\"u_coord_range\",e.coordRange),this._solidProgram.setUniform1f(\"u_depth\",0),this._solidProgram.setUniform4fv(\"u_color\",this._color),r.drawArrays(5,0,4),r.bindVAO()}_initialize(t){if(this._initialized)return!0;const s=r(t,o);if(!s)return!1;const a={geometry:[{name:\"a_pos\",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},n=new Int8Array([0,0,1,0,0,1,1,1]),l=e.createVertex(t,35044,n),d=new i(t,o.attributes,a,{geometry:l});return this._solidProgram=s,this._solidVertexArrayObject=d,this._initialized=!0,!0}}export default a;\n"]},"metadata":{},"sourceType":"module"}