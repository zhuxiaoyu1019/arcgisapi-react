{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../core/has.js\";\nimport t from \"../core/Logger.js\";\nimport { acosClamped as r, cartesianToSpherical as n } from \"../core/mathUtils.js\";\nimport { isNone as e } from \"../core/maybe.js\";\nimport { i as o, c as s } from \"./mat4.js\";\nimport { g as i, f as a, d as c, b as u, a as f, i as m, l as g, c as p, m as l, p as h, n as d, s as j } from \"./vec3.js\";\nimport { c as y } from \"./vec3f64.js\";\nimport { c as M } from \"./vec4.js\";\nimport { c as v, f as A } from \"./vec4f64.js\";\nimport { closestPoint as b } from \"../geometry/support/ray.js\";\nimport { angle as R } from \"../geometry/support/vector.js\";\nimport { sv3d as S, sm4d as x } from \"../geometry/support/vectorStacks.js\";\nconst P = t.getLogger(\"esri.geometry.support.sphere\");\n\nfunction _() {\n  return v();\n}\n\nfunction q(t, r = _()) {\n  return M(r, t);\n}\n\nfunction w(t, r) {\n  return A(t[0], t[1], t[2], r);\n}\n\nfunction C(t) {\n  return t;\n}\n\nfunction k(t) {\n  t[0] = t[1] = t[2] = t[3] = 0;\n}\n\nfunction E(t) {\n  return t;\n}\n\nfunction L(t) {\n  return Array.isArray(t) ? t[3] : t;\n}\n\nfunction O(t) {\n  return Array.isArray(t) ? t : X;\n}\n\nfunction T(t, r, n, e) {\n  return A(t, r, n, e);\n}\n\nfunction z(t, r, n) {\n  return t !== n && i(n, t), n[3] = t[3] + r, n;\n}\n\nfunction U(t, r, n) {\n  return P.error(\"sphere.setExtent is not yet supported\"), t === n ? n : q(t, n);\n}\n\nfunction V(t, r, n) {\n  if (e(r)) return !1;\n  const o = a(S.get(), r.origin, O(t)),\n        s = c(r.direction, r.direction),\n        i = 2 * c(r.direction, o),\n        m = i * i - 4 * s * (c(o, o) - t[3] * t[3]);\n  if (m < 0) return !1;\n  const g = Math.sqrt(m);\n  let p = (-i - g) / (2 * s);\n  const l = (-i + g) / (2 * s);\n  return (p < 0 || l < p && l > 0) && (p = l), !(p < 0) && (n && u(n, r.origin, f(S.get(), r.direction, p)), !0);\n}\n\nfunction B(t, r) {\n  return V(t, r, null);\n}\n\nfunction D(t, r, n) {\n  if (V(t, r, n)) return n;\n  const e = F(t, r, S.get());\n  return u(n, r.origin, f(S.get(), r.direction, m(r.origin, e) / g(r.direction))), n;\n}\n\nfunction F(t, r, n) {\n  const e = S.get(),\n        i = x.get();\n  p(e, r.origin, r.direction);\n  const a = L(t);\n  p(n, e, r.origin), f(n, n, 1 / g(n) * a);\n  const c = J(t, r.origin),\n        u = R(r.origin, n);\n  return o(i), s(i, i, u + c, e), l(n, n, i), n;\n}\n\nfunction G(t, r, n) {\n  return V(t, r, n) ? n : (b(r, O(t), n), H(t, n, n));\n}\n\nfunction H(t, r, n) {\n  const e = a(S.get(), r, O(t)),\n        o = f(S.get(), e, t[3] / g(e));\n  return u(n, o, O(t));\n}\n\nfunction I(t, r) {\n  const n = a(S.get(), r, O(t)),\n        e = h(n),\n        o = t[3] * t[3];\n  return Math.sqrt(Math.abs(e - o));\n}\n\nfunction J(t, n) {\n  const e = a(S.get(), n, O(t)),\n        o = g(e),\n        s = L(t),\n        i = s + Math.abs(s - o);\n  return r(s / i);\n}\n\nconst K = y();\n\nfunction N(t, r, e, o) {\n  const s = a(K, r, O(t));\n\n  switch (e) {\n    case 0:\n      {\n        const t = n(s, K)[2];\n        return j(o, -Math.sin(t), Math.cos(t), 0);\n      }\n\n    case 1:\n      {\n        const t = n(s, K),\n              r = t[1],\n              e = t[2],\n              i = Math.sin(r);\n        return j(o, -i * Math.cos(e), -i * Math.sin(e), Math.cos(r));\n      }\n\n    case 2:\n      return d(o, s);\n\n    default:\n      return;\n  }\n}\n\nfunction Q(t, r) {\n  const n = a(Y, r, O(t));\n  return g(n) - t[3];\n}\n\nfunction W(t, r, n, e) {\n  const o = Q(t, r),\n        s = N(t, r, 2, Y),\n        i = f(Y, s, n - o);\n  return u(e, r, i);\n}\n\nconst X = y(),\n      Y = y();\nvar Z = Object.freeze({\n  __proto__: null,\n  create: _,\n  copy: q,\n  fromCenterAndRadius: w,\n  wrap: C,\n  clear: k,\n  fromRadius: E,\n  getRadius: L,\n  getCenter: O,\n  fromValues: T,\n  elevate: z,\n  setExtent: U,\n  intersectRay: V,\n  intersectsRay: B,\n  intersectRayClosestSilhouette: D,\n  closestPointOnSilhouette: F,\n  closestPoint: G,\n  projectPoint: H,\n  distanceToSilhouette: I,\n  angleToSilhouette: J,\n  axisAt: N,\n  altitudeAt: Q,\n  setAltitudeAt: W\n});\nexport { k as a, F as b, _ as c, I as d, E as e, T as f, O as g, q as h, V as i, B as j, w as k, L as l, z as m, U as n, D as o, G as p, H as q, J as r, Z as s, N as t, Q as u, W as v, C as w };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/chunks/sphere.js"],"names":["t","acosClamped","r","cartesianToSpherical","n","isNone","e","i","o","c","s","g","f","a","d","b","u","m","l","p","h","j","y","M","v","A","closestPoint","angle","R","sv3d","S","sm4d","x","P","getLogger","_","q","w","C","k","E","L","Array","isArray","O","X","T","z","U","error","V","get","origin","direction","Math","sqrt","B","D","F","J","G","H","I","abs","K","N","sin","cos","Q","Y","W","Z","Object","freeze","__proto__","create","copy","fromCenterAndRadius","wrap","clear","fromRadius","getRadius","getCenter","fromValues","elevate","setExtent","intersectRay","intersectsRay","intersectRayClosestSilhouette","closestPointOnSilhouette","projectPoint","distanceToSilhouette","angleToSilhouette","axisAt","altitudeAt","setAltitudeAt"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../core/has.js\";import t from\"../core/Logger.js\";import{acosClamped as r,cartesianToSpherical as n}from\"../core/mathUtils.js\";import{isNone as e}from\"../core/maybe.js\";import{i as o,c as s}from\"./mat4.js\";import{g as i,f as a,d as c,b as u,a as f,i as m,l as g,c as p,m as l,p as h,n as d,s as j}from\"./vec3.js\";import{c as y}from\"./vec3f64.js\";import{c as M}from\"./vec4.js\";import{c as v,f as A}from\"./vec4f64.js\";import{closestPoint as b}from\"../geometry/support/ray.js\";import{angle as R}from\"../geometry/support/vector.js\";import{sv3d as S,sm4d as x}from\"../geometry/support/vectorStacks.js\";const P=t.getLogger(\"esri.geometry.support.sphere\");function _(){return v()}function q(t,r=_()){return M(r,t)}function w(t,r){return A(t[0],t[1],t[2],r)}function C(t){return t}function k(t){t[0]=t[1]=t[2]=t[3]=0}function E(t){return t}function L(t){return Array.isArray(t)?t[3]:t}function O(t){return Array.isArray(t)?t:X}function T(t,r,n,e){return A(t,r,n,e)}function z(t,r,n){return t!==n&&i(n,t),n[3]=t[3]+r,n}function U(t,r,n){return P.error(\"sphere.setExtent is not yet supported\"),t===n?n:q(t,n)}function V(t,r,n){if(e(r))return!1;const o=a(S.get(),r.origin,O(t)),s=c(r.direction,r.direction),i=2*c(r.direction,o),m=i*i-4*s*(c(o,o)-t[3]*t[3]);if(m<0)return!1;const g=Math.sqrt(m);let p=(-i-g)/(2*s);const l=(-i+g)/(2*s);return(p<0||l<p&&l>0)&&(p=l),!(p<0)&&(n&&u(n,r.origin,f(S.get(),r.direction,p)),!0)}function B(t,r){return V(t,r,null)}function D(t,r,n){if(V(t,r,n))return n;const e=F(t,r,S.get());return u(n,r.origin,f(S.get(),r.direction,m(r.origin,e)/g(r.direction))),n}function F(t,r,n){const e=S.get(),i=x.get();p(e,r.origin,r.direction);const a=L(t);p(n,e,r.origin),f(n,n,1/g(n)*a);const c=J(t,r.origin),u=R(r.origin,n);return o(i),s(i,i,u+c,e),l(n,n,i),n}function G(t,r,n){return V(t,r,n)?n:(b(r,O(t),n),H(t,n,n))}function H(t,r,n){const e=a(S.get(),r,O(t)),o=f(S.get(),e,t[3]/g(e));return u(n,o,O(t))}function I(t,r){const n=a(S.get(),r,O(t)),e=h(n),o=t[3]*t[3];return Math.sqrt(Math.abs(e-o))}function J(t,n){const e=a(S.get(),n,O(t)),o=g(e),s=L(t),i=s+Math.abs(s-o);return r(s/i)}const K=y();function N(t,r,e,o){const s=a(K,r,O(t));switch(e){case 0:{const t=n(s,K)[2];return j(o,-Math.sin(t),Math.cos(t),0)}case 1:{const t=n(s,K),r=t[1],e=t[2],i=Math.sin(r);return j(o,-i*Math.cos(e),-i*Math.sin(e),Math.cos(r))}case 2:return d(o,s);default:return}}function Q(t,r){const n=a(Y,r,O(t));return g(n)-t[3]}function W(t,r,n,e){const o=Q(t,r),s=N(t,r,2,Y),i=f(Y,s,n-o);return u(e,r,i)}const X=y(),Y=y();var Z=Object.freeze({__proto__:null,create:_,copy:q,fromCenterAndRadius:w,wrap:C,clear:k,fromRadius:E,getRadius:L,getCenter:O,fromValues:T,elevate:z,setExtent:U,intersectRay:V,intersectsRay:B,intersectRayClosestSilhouette:D,closestPointOnSilhouette:F,closestPoint:G,projectPoint:H,distanceToSilhouette:I,angleToSilhouette:J,axisAt:N,altitudeAt:Q,setAltitudeAt:W});export{k as a,F as b,_ as c,I as d,E as e,T as f,O as g,q as h,V as i,B as j,w as k,L as l,z as m,U as n,D as o,G as p,H as q,J as r,Z as s,N as t,Q as u,W as v,C as w};\n"]},"metadata":{},"sourceType":"module"}