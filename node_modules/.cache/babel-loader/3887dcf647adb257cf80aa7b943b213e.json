{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { nextHighestPowerOfTwo as t } from \"../../../core/mathUtils.js\";\n\nfunction n(n, f, i) {\n  var u;\n  const c = n.byteLength / (4 * f),\n        s = new Uint32Array(n, 0, c * f);\n  let a = new Uint32Array(c);\n  const h = null != (u = null == i ? void 0 : i.minReduction) ? u : 0,\n        d = (null == i ? void 0 : i.originalIndices) || null,\n        g = d ? d.length : 0,\n        y = (null == i ? void 0 : i.componentOffsets) || null;\n  let U = 0;\n  if (y) for (let t = 0; t < y.length - 1; t++) {\n    const n = y[t + 1] - y[t];\n    n > U && (U = n);\n  } else U = c;\n  const w = Math.floor(1.1 * U) + 1;\n  (null == o || o.length < 2 * w) && (o = new Uint32Array(t(2 * w)));\n\n  for (let t = 0; t < 2 * w; t++) o[t] = 0;\n\n  let A = 0;\n  const m = !!y && !!d,\n        b = m ? g : c,\n        p = m ? new Uint32Array(g) : null,\n        v = 1.96;\n  let M = 0 !== h ? Math.ceil(4 * v * v / (h * h) * h * (1 - h)) : b,\n      q = 1,\n      x = y ? y[1] : b;\n\n  for (let t = 0; t < b; t++) {\n    if (t === M) {\n      const n = 1 - A / t;\n      if (n + v * Math.sqrt(n * (1 - n) / t) < h) return null;\n      M *= 2;\n    }\n\n    if (t === x) {\n      for (let t = 0; t < 2 * w; t++) o[t] = 0;\n\n      if (d) for (let t = y[q - 1]; t < y[q]; t++) p[t] = a[d[t]];\n      x = y[++q];\n    }\n\n    const n = m ? d[t] : t,\n          l = n * f,\n          i = r(s, l, f);\n    let u = i % w,\n        c = A;\n\n    for (; 0 !== o[2 * u + 1];) {\n      if (o[2 * u] === i) {\n        const t = o[2 * u + 1] - 1;\n\n        if (e(s, l, t * f, f)) {\n          c = a[t];\n          break;\n        }\n      }\n\n      u++, u >= w && (u -= w);\n    }\n\n    c === A && (o[2 * u] = i, o[2 * u + 1] = n + 1, A++), a[n] = c;\n  }\n\n  if (0 !== h && 1 - A / c < h) return null;\n\n  if (m) {\n    for (let t = y[q - 1]; t < p.length; t++) p[t] = a[d[t]];\n\n    a = p;\n  }\n\n  const j = new Uint32Array(f * A);\n  A = 0;\n\n  for (let t = 0; t < b; t++) if (a[t] === A) {\n    l(s, (m ? d[t] : t) * f, j, A * f, f), A++;\n  }\n\n  if (d && !m) {\n    const t = new Uint32Array(g);\n\n    for (let n = 0; n < t.length; n++) t[n] = a[d[n]];\n\n    a = t;\n  }\n\n  return {\n    buffer: j.buffer,\n    indices: a,\n    uniqueCount: A\n  };\n}\n\nfunction e(t, n, e, l) {\n  for (let r = 0; r < l; r++) if (t[n + r] !== t[e + r]) return !1;\n\n  return !0;\n}\n\nfunction l(t, n, e, l, r) {\n  for (let o = 0; o < r; o++) e[l + o] = t[n + o];\n}\n\nfunction r(t, n, e) {\n  let l = 0;\n\n  for (let r = 0; r < e; r++) l = t[n + r] + l | 0, l = l + (l << 11) + (l >>> 2) | 0;\n\n  return l >>> 0;\n}\n\nlet o = null;\nexport default n;\nexport { n as deduplicate };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js"],"names":["nextHighestPowerOfTwo","t","n","f","i","u","c","byteLength","s","Uint32Array","a","h","minReduction","d","originalIndices","g","length","y","componentOffsets","U","w","Math","floor","o","A","m","b","p","v","M","ceil","q","x","sqrt","l","r","e","j","buffer","indices","uniqueCount","deduplicate"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";function n(n,f,i){var u;const c=n.byteLength/(4*f),s=new Uint32Array(n,0,c*f);let a=new Uint32Array(c);const h=null!=(u=null==i?void 0:i.minReduction)?u:0,d=(null==i?void 0:i.originalIndices)||null,g=d?d.length:0,y=(null==i?void 0:i.componentOffsets)||null;let U=0;if(y)for(let t=0;t<y.length-1;t++){const n=y[t+1]-y[t];n>U&&(U=n)}else U=c;const w=Math.floor(1.1*U)+1;(null==o||o.length<2*w)&&(o=new Uint32Array(t(2*w)));for(let t=0;t<2*w;t++)o[t]=0;let A=0;const m=!!y&&!!d,b=m?g:c,p=m?new Uint32Array(g):null,v=1.96;let M=0!==h?Math.ceil(4*v*v/(h*h)*h*(1-h)):b,q=1,x=y?y[1]:b;for(let t=0;t<b;t++){if(t===M){const n=1-A/t;if(n+v*Math.sqrt(n*(1-n)/t)<h)return null;M*=2}if(t===x){for(let t=0;t<2*w;t++)o[t]=0;if(d)for(let t=y[q-1];t<y[q];t++)p[t]=a[d[t]];x=y[++q]}const n=m?d[t]:t,l=n*f,i=r(s,l,f);let u=i%w,c=A;for(;0!==o[2*u+1];){if(o[2*u]===i){const t=o[2*u+1]-1;if(e(s,l,t*f,f)){c=a[t];break}}u++,u>=w&&(u-=w)}c===A&&(o[2*u]=i,o[2*u+1]=n+1,A++),a[n]=c}if(0!==h&&1-A/c<h)return null;if(m){for(let t=y[q-1];t<p.length;t++)p[t]=a[d[t]];a=p}const j=new Uint32Array(f*A);A=0;for(let t=0;t<b;t++)if(a[t]===A){l(s,(m?d[t]:t)*f,j,A*f,f),A++}if(d&&!m){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=a[d[n]];a=t}return{buffer:j.buffer,indices:a,uniqueCount:A}}function e(t,n,e,l){for(let r=0;r<l;r++)if(t[n+r]!==t[e+r])return!1;return!0}function l(t,n,e,l,r){for(let o=0;o<r;o++)e[l+o]=t[n+o]}function r(t,n,e){let l=0;for(let r=0;r<e;r++)l=t[n+r]+l|0,l=l+(l<<11)+(l>>>2)|0;return l>>>0}let o=null;export default n;export{n as deduplicate};\n"]},"metadata":{},"sourceType":"module"}