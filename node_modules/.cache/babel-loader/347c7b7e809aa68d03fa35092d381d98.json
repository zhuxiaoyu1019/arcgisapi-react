{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { result as r } from \"../../../../core/asyncUtils.js\";\nimport { isAborted as t, createAbortError as a } from \"../../../../core/promiseUtils.js\";\nimport { make as o } from \"./Graphics3DCalloutSymbolLayerFactory.js\";\nimport l from \"./Graphics3DSymbol.js\";\n\nclass e extends l {\n  constructor(r, t, a) {\n    super(r, t, a), this.calloutSymbolLayer = null, this.symbol.hasVisibleCallout() && (this.calloutSymbolLayer = o(this.symbol, t));\n  }\n\n  async doLoad(o) {\n    const l = this.calloutSymbolLayer ? r(this.calloutSymbolLayer.load()) : null;\n\n    try {\n      await super.doLoad(o);\n    } catch (i) {\n      var e;\n      throw null == (e = this.calloutSymbolLayer) || e.abortLoad(), i;\n    }\n\n    var s;\n    if (t(o)) throw null == (s = this.calloutSymbolLayer) || s.abortLoad(), a();\n    l && (await l);\n  }\n\n  destroy() {\n    super.destroy(), this.calloutSymbolLayer && this.calloutSymbolLayer.destroy();\n  }\n\n  createGraphics3DGraphic(r, t) {\n    const a = super.createGraphics3DGraphic(r, t);\n\n    if (this.calloutSymbolLayer) {\n      const t = this.createCalloutGraphic(r);\n      t && a.addAuxiliaryGraphic(t);\n    }\n\n    return a;\n  }\n\n  globalPropertyChanged(r, t) {\n    return !!super.globalPropertyChanged(r, t) && (!this.calloutSymbolLayer || this.calloutSymbolLayer.globalPropertyChanged(r, t, r => this._getCalloutGraphicLayer(r)));\n  }\n\n  updateGeometry(r, t) {\n    const a = super.updateGeometry(r, t);\n\n    if (a && this.calloutSymbolLayer) {\n      const a = this._getCalloutGraphicLayer(r);\n\n      if (a) return this.calloutSymbolLayer.updateGeometry(a, t);\n    }\n\n    return a;\n  }\n\n  createCalloutGraphic(r) {\n    const t = r.renderingInfo,\n          a = {\n      renderer: t.renderer,\n      symbol: t.symbol,\n      translation: [0, 0, 0],\n      centerOffset: [0, 0, 0, 0],\n      screenOffset: [0, 0],\n      centerOffsetUnits: \"world\",\n      elevationOffset: 0,\n      materialCollection: null\n    };\n    return r.renderingInfo = a, this.calloutSymbolLayer.createGraphics3DGraphic(r);\n  }\n\n  _getCalloutGraphicLayer(r) {\n    for (const t of r._auxiliaryGraphics) if (t.graphics3DSymbolLayer === this.calloutSymbolLayer) return t;\n  }\n\n}\n\nexport default e;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js"],"names":["result","r","isAborted","t","createAbortError","a","make","o","l","e","constructor","calloutSymbolLayer","symbol","hasVisibleCallout","doLoad","load","i","abortLoad","s","destroy","createGraphics3DGraphic","createCalloutGraphic","addAuxiliaryGraphic","globalPropertyChanged","_getCalloutGraphicLayer","updateGeometry","renderingInfo","renderer","translation","centerOffset","screenOffset","centerOffsetUnits","elevationOffset","materialCollection","_auxiliaryGraphics","graphics3DSymbolLayer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../../../core/asyncUtils.js\";import{isAborted as t,createAbortError as a}from\"../../../../core/promiseUtils.js\";import{make as o}from\"./Graphics3DCalloutSymbolLayerFactory.js\";import l from\"./Graphics3DSymbol.js\";class e extends l{constructor(r,t,a){super(r,t,a),this.calloutSymbolLayer=null,this.symbol.hasVisibleCallout()&&(this.calloutSymbolLayer=o(this.symbol,t))}async doLoad(o){const l=this.calloutSymbolLayer?r(this.calloutSymbolLayer.load()):null;try{await super.doLoad(o)}catch(i){var e;throw null==(e=this.calloutSymbolLayer)||e.abortLoad(),i}var s;if(t(o))throw null==(s=this.calloutSymbolLayer)||s.abortLoad(),a();l&&await l}destroy(){super.destroy(),this.calloutSymbolLayer&&this.calloutSymbolLayer.destroy()}createGraphics3DGraphic(r,t){const a=super.createGraphics3DGraphic(r,t);if(this.calloutSymbolLayer){const t=this.createCalloutGraphic(r);t&&a.addAuxiliaryGraphic(t)}return a}globalPropertyChanged(r,t){return!!super.globalPropertyChanged(r,t)&&(!this.calloutSymbolLayer||this.calloutSymbolLayer.globalPropertyChanged(r,t,(r=>this._getCalloutGraphicLayer(r))))}updateGeometry(r,t){const a=super.updateGeometry(r,t);if(a&&this.calloutSymbolLayer){const a=this._getCalloutGraphicLayer(r);if(a)return this.calloutSymbolLayer.updateGeometry(a,t)}return a}createCalloutGraphic(r){const t=r.renderingInfo,a={renderer:t.renderer,symbol:t.symbol,translation:[0,0,0],centerOffset:[0,0,0,0],screenOffset:[0,0],centerOffsetUnits:\"world\",elevationOffset:0,materialCollection:null};return r.renderingInfo=a,this.calloutSymbolLayer.createGraphics3DGraphic(r)}_getCalloutGraphicLayer(r){for(const t of r._auxiliaryGraphics)if(t.graphics3DSymbolLayer===this.calloutSymbolLayer)return t}}export default e;\n"]},"metadata":{},"sourceType":"module"}