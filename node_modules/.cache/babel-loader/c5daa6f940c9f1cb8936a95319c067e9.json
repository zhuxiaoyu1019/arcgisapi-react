{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../../Viewpoint.js\";\nimport e from \"../../core/Collection.js\";\nimport { isSome as n, get as r, isNone as o } from \"../../core/maybe.js\";\nimport { getMetersPerUnitForSR as a } from \"../../core/unitUtils.js\";\nimport { t as i, a as s } from \"../../chunks/common.js\";\nimport { f as c, r as u, t as f, i as l, s as m, a as y, b as p } from \"../../chunks/mat2d.js\";\nimport { c as g } from \"../../chunks/mat2df64.js\";\nimport { s as h, c as x, b, e as d, n as w, a as j, f as G, g as M, h as A, l as R, t as k, i as S } from \"../../chunks/vec2.js\";\nimport { a as v, f as q } from \"../../chunks/vec2f64.js\";\nimport P from \"../../geometry/Extent.js\";\nimport F from \"../../geometry/Geometry.js\";\nimport I from \"../../geometry/Point.js\";\nimport N from \"../../geometry/SpatialReference.js\";\nimport { earth as z } from \"../../geometry/support/Ellipsoid.js\";\nimport { isValid as V, getInfo as E } from \"../../geometry/support/spatialReferenceUtils.js\";\nimport { canProject as L, project as O } from \"../../geometry/support/webMercatorUtils.js\";\nconst W = 39.37,\n      C = 180 / Math.PI;\n\nfunction U(t, e, n) {\n  const r = s(e[0] / z.radius);\n  return h(t, n ? r : r - 360 * Math.floor((r + 180) / 360), s(.5 * Math.PI - 2 * Math.atan(Math.exp(-1 * e[1] / z.radius))));\n}\n\nfunction Q(t, e) {\n  let n = e[1];\n  return n > 89.99999 ? n = 89.99999 : n < -89.99999 && (n = -89.99999), n = Math.sin(i(n)), h(t, i(e[0]) * z.radius, .5 * z.radius * Math.log((1 + n) / (1 - n)));\n}\n\nfunction B(t, e, n, r) {\n  return r && n && !r.equals(n) && L(r, n) && r.isWebMercator ? r.isWebMercator ? Q(t, e) : U(t, e) : x(t, e);\n}\n\nfunction D(t) {\n  return t.wkid ? t : t.spatialReference || N.WGS84;\n}\n\nfunction T(t, e) {\n  return e.type ? h(t, e.x, e.y) : x(t, e);\n}\n\nfunction H(t) {\n  return a(t);\n}\n\nfunction J(t, e) {\n  return Math.max(t.width / e[0], t.height / e[1]) * ct(t.spatialReference);\n}\n\nasync function K(t, a, i, s) {\n  let c, u;\n  if (!t) return null;\n  if (Array.isArray(t) && !t.length) return null;\n\n  if (e.isCollection(t) && (t = t.toArray()), Array.isArray(t) && t.length && \"object\" == typeof t[0]) {\n    const e = t.every(t => \"attributes\" in t),\n          r = t.some(t => !t.geometry);\n    let o = t;\n\n    if (e && r && a && a.allLayerViews) {\n      const e = new Map();\n\n      for (const n of t) {\n        const t = n.layer,\n              r = e.get(t) || [],\n              o = n.attributes[t.objectIdField];\n        null != o && r.push(o), e.set(t, r);\n      }\n\n      const r = [];\n      e.forEach((t, e) => {\n        const n = a.allLayerViews.find(t => t.layer.id === e.id);\n\n        if (\"queryFeatures\" in n) {\n          const o = e.createQuery();\n          o.objectIds = t, o.returnGeometry = !0, r.push(n.queryFeatures(o));\n        }\n      });\n      const i = await Promise.all(r),\n            s = [];\n\n      for (const t of i) if (t && t.features && t.features.length) for (const e of t.features) n(e.geometry) && s.push(e.geometry);\n\n      o = s;\n    }\n\n    for (const t of o) s = await K(t, a, i, s);\n\n    return s;\n  }\n\n  if (Array.isArray(t) && 2 === t.length && \"number\" == typeof t[0] && \"number\" == typeof t[1]) c = new I(t);else if (t instanceof F) c = t;else if (\"geometry\" in t) if (t.geometry) c = t.geometry;else if (t.layer) {\n    const e = t.layer,\n          n = a.allLayerViews.find(t => t.layer.id === e.id);\n\n    if (\"queryFeatures\" in n) {\n      const o = e.createQuery();\n      o.objectIds = [t.attributes[e.objectIdField]], o.returnGeometry = !0;\n      const a = await n.queryFeatures(o);\n      c = r(a, \"features\", 0, \"geometry\");\n    }\n  }\n  if (o(c)) return null;\n  if (u = \"point\" === c.type ? new P({\n    xmin: c.x,\n    ymin: c.y,\n    xmax: c.x,\n    ymax: c.y,\n    spatialReference: c.spatialReference\n  }) : c.extent, !u) return null;\n  const f = L(u, i);\n  if (!u.spatialReference.equals(i) && f) u = O(u, i);else if (!f) return null;\n  return s = s ? s.union(u) : u.clone();\n}\n\nfunction X(t) {\n  if (t && (!Array.isArray(t) || \"number\" != typeof t[0]) && (\"object\" == typeof t || Array.isArray(t) && \"object\" == typeof t[0])) {\n    if (\"layer\" in t && t.layer && t.layer.minScale && t.layer.maxScale) {\n      const e = t.layer;\n      return {\n        min: e.minScale,\n        max: e.maxScale\n      };\n    }\n\n    if (Array.isArray(t) && t.length && t.every(t => \"layer\" in t)) {\n      let e = 0,\n          n = 0;\n\n      for (const r of t) {\n        const t = r.layer;\n        t && t.minScale && t.maxScale && (e = t.minScale < e ? t.minScale : e, n = t.maxScale > n ? t.maxScale : n);\n      }\n\n      return e && n ? {\n        min: e,\n        max: n\n      } : null;\n    }\n  }\n}\n\nasync function Y(e, r) {\n  if (!e || !r) return new t({\n    targetGeometry: new I(),\n    scale: 0,\n    rotation: 0\n  });\n  let o = r.spatialReference;\n  const {\n    constraints: a,\n    padding: i,\n    viewpoint: s,\n    size: c\n  } = r,\n        u = [i ? c[0] - i.left - i.right : c[0], i ? c[1] - i.top - i.bottom : c[1]];\n  let f = null;\n  e instanceof t ? f = e : e.viewpoint ? f = e.viewpoint : e.target && \"esri.Viewpoint\" === e.target.declaredClass && (f = e.target);\n  let l = null;\n  f && f.targetGeometry ? l = f.targetGeometry : e instanceof P ? l = e : (e || e && (\"center\" in e || \"extent\" in e || \"target\" in e)) && (l = (await K(e.center, r, o)) || (await K(e.extent, r, o)) || (await K(e.target, r, o)) || (await K(e, r, o))), !l && s && s.targetGeometry ? l = s.targetGeometry : !l && r.extent && (l = r.extent);\n  const m = D(l);\n  if (o || (o = D(r.spatialReference || r.extent || l)), !L(l, o) && m && !m.equals(o)) return null;\n  const y = T(v(), l.center ? l.center : l),\n        p = new I(B(y, y, m, o), o);\n  let g = null;\n  g = f && n(f.targetGeometry) && \"point\" === f.targetGeometry.type ? f.scale : e.hasOwnProperty(\"scale\") && e.scale ? e.scale : e.hasOwnProperty(\"zoom\") && -1 !== e.zoom && a && a.effectiveLODs ? a.zoomToScale(e.zoom) : Array.isArray(l) || \"point\" === l.type || \"extent\" === l.type && 0 === l.width && 0 === l.height ? r.extent && L(r.extent, o) ? J(O(r.extent, o), u) : r.extent ? J(r.extent, u) : s.scale : L(l.extent, o) ? J(O(l.extent, o), u) : J(l.extent, u);\n  const h = X(e);\n  h && (h.min && h.min > g ? g = h.min : h.max && h.max < g && (g = h.max));\n  let x = 0;\n  f ? x = f.rotation : e.hasOwnProperty(\"rotation\") ? x = e.rotation : s && (x = s.rotation);\n  let b = new t({\n    targetGeometry: p,\n    scale: g,\n    rotation: x\n  });\n  return a && (b = a.fit(b), a.constrainByGeometry(b), a.rotationEnabled || (b.rotation = x)), b;\n}\n\nfunction Z(t, e) {\n  const n = t.targetGeometry,\n        r = e.targetGeometry;\n  return n.x = r.x, n.y = r.y, n.spatialReference = r.spatialReference, t.scale = e.scale, t.rotation = e.rotation, t;\n}\n\nfunction $(t, e, n) {\n  return n ? h(t, .5 * (e[0] - n.right + n.left), .5 * (e[1] - n.bottom + n.top)) : b(t, e, .5);\n}\n\nconst _ = function () {\n  const t = v();\n  return function (e, n, r) {\n    const o = n.targetGeometry;\n    T(t, o);\n    const a = .5 * at(n);\n    return e.xmin = t[0] - a * r[0], e.ymin = t[1] - a * r[1], e.xmax = t[0] + a * r[0], e.ymax = t[1] + a * r[1], e.spatialReference = o.spatialReference, e;\n  };\n}();\n\nfunction tt(t, e, n, r, o) {\n  return wt(t, e, n.center), t.scale = J(n, r), o && o.constraints && o.constraints.constrain(t), t;\n}\n\nfunction et(t, e, n, r) {\n  return mt(t, e, n, r), y(t, t);\n}\n\nfunction nt(t, e, n) {\n  const r = st(e),\n        o = Math.abs(Math.cos(r)),\n        a = Math.abs(Math.sin(r));\n  return h(t, Math.round(n[1] * a + n[0] * o), Math.round(n[1] * o + n[0] * a));\n}\n\nconst rt = function () {\n  const t = v();\n  return function (e, n, r) {\n    return d(e, ut(e, n), $(t, n, r));\n  };\n}(),\n      ot = function () {\n  const t = g(),\n        e = v();\n  return function (n, r, o, a) {\n    const i = at(r),\n          s = st(r);\n    return h(e, i, i), c(t, e), u(t, t, s), f(t, t, rt(e, o, a)), f(t, t, [0, a.top - a.bottom]), h(n, t[4], t[5]);\n  };\n}();\n\nfunction at(t) {\n  return t.scale * it(t.targetGeometry);\n}\n\nfunction it(t) {\n  return n(t) && V(t.spatialReference) ? 1 / (H(t.spatialReference) * W * ft()) : 1;\n}\n\nfunction st(t) {\n  return i(t.rotation) || 0;\n}\n\nfunction ct(t) {\n  return V(t) ? H(t) * W * ft() : 1;\n}\n\nfunction ut(t, e) {\n  return b(t, e, .5);\n}\n\nfunction ft() {\n  return 96;\n}\n\nconst lt = function () {\n  const t = v(),\n        e = v(),\n        n = v();\n  return function (r, o, a, i, s, c) {\n    return w(t, o), b(e, a, .5 * c), h(n, 1 / i * c, -1 / i * c), l(r), f(r, r, e), s && u(r, r, s), m(r, r, n), f(r, r, t), r;\n  };\n}(),\n      mt = function () {\n  const t = v();\n  return function (e, n, r, o) {\n    const a = at(n),\n          i = st(n);\n    return T(t, n.targetGeometry), lt(e, t, r, a, i, o);\n  };\n}(),\n      yt = function () {\n  const t = v();\n  return function (e, n, r, o) {\n    const a = at(n);\n    return T(t, n.targetGeometry), lt(e, t, r, a, 0, o);\n  };\n}();\n\nfunction pt(t) {\n  if (t.isWrappable) {\n    const e = E(t);\n    return e.valid[1] - e.valid[0];\n  }\n\n  return 0;\n}\n\nfunction gt(t, e) {\n  return Math.round(pt(t) / e);\n}\n\nfunction ht(t, e) {\n  return Y(t, e);\n}\n\nconst xt = function () {\n  const t = v(),\n        e = v(),\n        n = [0, 0, 0];\n  return function (r, o, a) {\n    j(t, r, o), G(t, t), j(e, r, a), G(e, e), M(n, t, e);\n    let i = Math.acos(A(t, e) / (R(t) * R(e))) * C;\n    return n[2] < 0 && (i = -i), isNaN(i) && (i = 0), i;\n  };\n}(),\n      bt = function () {\n  const t = v();\n  return function (e, n, r, o) {\n    const a = e.targetGeometry;\n    return Z(e, n), ot(t, n, r, o), a.x += t[0], a.y += t[1], e;\n  };\n}(),\n      dt = function () {\n  const t = v();\n  return function (e, n, r, o) {\n    const a = e.targetGeometry;\n    return Z(e, n), ot(t, n, r, o), a.x -= t[0], a.y -= t[1], e;\n  };\n}(),\n      wt = function () {\n  const t = v();\n  return function (e, n, r) {\n    Z(e, n);\n    const o = e.targetGeometry,\n          a = D(r),\n          i = D(o);\n    return T(t, r), B(t, t, a, i), o.x = t[0], o.y = t[1], e;\n  };\n}();\n\nfunction jt(t) {\n  return at(t);\n}\n\nconst Gt = function () {\n  const t = v();\n  return function (e, n, r, o, a) {\n    a || (a = \"center\"), d(t, r, o), b(t, t, .5);\n    const i = t[0],\n          s = t[1];\n\n    switch (a) {\n      case \"center\":\n        h(t, 0, 0);\n        break;\n\n      case \"left\":\n        h(t, -i, 0);\n        break;\n\n      case \"top\":\n        h(t, 0, s);\n        break;\n\n      case \"right\":\n        h(t, i, 0);\n        break;\n\n      case \"bottom\":\n        h(t, 0, -s);\n        break;\n\n      case \"top-left\":\n        h(t, -i, s);\n        break;\n\n      case \"bottom-left\":\n        h(t, -i, -s);\n        break;\n\n      case \"top-right\":\n        h(t, i, s);\n        break;\n\n      case \"bottom-right\":\n        h(t, i, -s);\n    }\n\n    return Ft(e, n, t), e;\n  };\n}();\n\nfunction Mt(t, e, n) {\n  return Z(t, e), t.rotation += n, t;\n}\n\nfunction At(t, e, n) {\n  return Z(t, e), t.rotation = n, t;\n}\n\nconst Rt = function () {\n  const t = v();\n  return function (e, n, r, o, a) {\n    return Z(e, n), isNaN(r) || 0 === r || (qt(t, o, n, a), e.scale = n.scale * r, Pt(t, t, e, a), Ft(e, e, h(t, t[0] - o[0], o[1] - t[1]))), e;\n  };\n}();\n\nfunction kt(t, e, n) {\n  return Z(t, e), t.scale = n, t;\n}\n\nconst St = function () {\n  const t = v();\n  return function (e, n, r, o, a, i) {\n    return Z(e, n), isNaN(r) || 0 === r || (qt(t, a, n, i), e.scale = n.scale * r, e.rotation += o, Pt(t, t, e, i), Ft(e, e, h(t, t[0] - a[0], a[1] - t[1]))), e;\n  };\n}(),\n      vt = function () {\n  const t = v(),\n        e = v();\n  return function (n, r, o, a, i, s, c) {\n    return rt(e, s, c), S(t, i, e), a ? St(n, r, o, a, t, s) : Rt(n, r, o, t, s);\n  };\n}(),\n      qt = function () {\n  const t = g();\n  return function (e, n, r, o) {\n    return k(e, n, et(t, r, o, 1));\n  };\n}(),\n      Pt = function () {\n  const t = g();\n  return function (e, n, r, o) {\n    return k(e, n, mt(t, r, o, 1));\n  };\n}(),\n      Ft = function () {\n  const t = v(),\n        e = g();\n  return function (n, r, o) {\n    Z(n, r);\n    const a = at(r),\n          i = n.targetGeometry;\n    return p(e, st(r)), m(e, e, q(a, a)), k(t, o, e), i.x += t[0], i.y += t[1], n;\n  };\n}();\n\nexport { bt as addPadding, xt as angleBetween, wt as centerAt, Z as copy, Y as create, ht as createAsync, J as extentToScale, $ as getAnchor, _ as getExtent, lt as getMatrix, nt as getOuterSize, ot as getPaddingMapTranslation, rt as getPaddingScreenTranslation, at as getResolution, ct as getResolutionToScaleFactor, mt as getTransform, yt as getTransformNoRotation, gt as getWorldScreenWidth, pt as getWorldWidth, vt as padAndScaleAndRotateBy, jt as pixelSize, dt as removePadding, Gt as resize, Mt as rotateBy, At as rotateTo, St as scaleAndRotateBy, Rt as scaleBy, kt as scaleTo, tt as setExtent, qt as toMap, Pt as toScreen, Ft as translateBy };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/viewpointUtils.js"],"names":["t","e","isSome","n","get","r","isNone","o","getMetersPerUnitForSR","a","i","s","f","c","u","l","m","y","b","p","g","h","x","d","w","j","G","M","A","R","k","S","v","q","P","F","I","N","earth","z","isValid","V","getInfo","E","canProject","L","project","O","W","C","Math","PI","U","radius","floor","atan","exp","Q","sin","log","B","equals","isWebMercator","D","wkid","spatialReference","WGS84","T","type","H","J","max","width","height","ct","K","Array","isArray","length","isCollection","toArray","every","some","geometry","allLayerViews","Map","layer","attributes","objectIdField","push","set","forEach","find","id","createQuery","objectIds","returnGeometry","queryFeatures","Promise","all","features","xmin","ymin","xmax","ymax","extent","union","clone","X","minScale","maxScale","min","Y","targetGeometry","scale","rotation","constraints","padding","viewpoint","size","left","right","top","bottom","target","declaredClass","center","hasOwnProperty","zoom","effectiveLODs","zoomToScale","fit","constrainByGeometry","rotationEnabled","Z","$","_","at","tt","wt","constrain","et","mt","nt","st","abs","cos","round","rt","ut","ot","it","ft","lt","yt","pt","isWrappable","valid","gt","ht","xt","acos","isNaN","bt","dt","jt","Gt","Ft","Mt","At","Rt","qt","Pt","kt","St","vt","addPadding","angleBetween","centerAt","copy","create","createAsync","extentToScale","getAnchor","getExtent","getMatrix","getOuterSize","getPaddingMapTranslation","getPaddingScreenTranslation","getResolution","getResolutionToScaleFactor","getTransform","getTransformNoRotation","getWorldScreenWidth","getWorldWidth","padAndScaleAndRotateBy","pixelSize","removePadding","resize","rotateBy","rotateTo","scaleAndRotateBy","scaleBy","scaleTo","setExtent","toMap","toScreen","translateBy"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../Viewpoint.js\";import e from\"../../core/Collection.js\";import{isSome as n,get as r,isNone as o}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as a}from\"../../core/unitUtils.js\";import{t as i,a as s}from\"../../chunks/common.js\";import{f as c,r as u,t as f,i as l,s as m,a as y,b as p}from\"../../chunks/mat2d.js\";import{c as g}from\"../../chunks/mat2df64.js\";import{s as h,c as x,b,e as d,n as w,a as j,f as G,g as M,h as A,l as R,t as k,i as S}from\"../../chunks/vec2.js\";import{a as v,f as q}from\"../../chunks/vec2f64.js\";import P from\"../../geometry/Extent.js\";import F from\"../../geometry/Geometry.js\";import I from\"../../geometry/Point.js\";import N from\"../../geometry/SpatialReference.js\";import{earth as z}from\"../../geometry/support/Ellipsoid.js\";import{isValid as V,getInfo as E}from\"../../geometry/support/spatialReferenceUtils.js\";import{canProject as L,project as O}from\"../../geometry/support/webMercatorUtils.js\";const W=39.37,C=180/Math.PI;function U(t,e,n){const r=s(e[0]/z.radius);return h(t,n?r:r-360*Math.floor((r+180)/360),s(.5*Math.PI-2*Math.atan(Math.exp(-1*e[1]/z.radius))))}function Q(t,e){let n=e[1];return n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999),n=Math.sin(i(n)),h(t,i(e[0])*z.radius,.5*z.radius*Math.log((1+n)/(1-n)))}function B(t,e,n,r){return r&&n&&!r.equals(n)&&L(r,n)&&r.isWebMercator?r.isWebMercator?Q(t,e):U(t,e):x(t,e)}function D(t){return t.wkid?t:t.spatialReference||N.WGS84}function T(t,e){return e.type?h(t,e.x,e.y):x(t,e)}function H(t){return a(t)}function J(t,e){return Math.max(t.width/e[0],t.height/e[1])*ct(t.spatialReference)}async function K(t,a,i,s){let c,u;if(!t)return null;if(Array.isArray(t)&&!t.length)return null;if(e.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&\"object\"==typeof t[0]){const e=t.every((t=>\"attributes\"in t)),r=t.some((t=>!t.geometry));let o=t;if(e&&r&&a&&a.allLayerViews){const e=new Map;for(const n of t){const t=n.layer,r=e.get(t)||[],o=n.attributes[t.objectIdField];null!=o&&r.push(o),e.set(t,r)}const r=[];e.forEach(((t,e)=>{const n=a.allLayerViews.find((t=>t.layer.id===e.id));if(\"queryFeatures\"in n){const o=e.createQuery();o.objectIds=t,o.returnGeometry=!0,r.push(n.queryFeatures(o))}}));const i=await Promise.all(r),s=[];for(const t of i)if(t&&t.features&&t.features.length)for(const e of t.features)n(e.geometry)&&s.push(e.geometry);o=s}for(const t of o)s=await K(t,a,i,s);return s}if(Array.isArray(t)&&2===t.length&&\"number\"==typeof t[0]&&\"number\"==typeof t[1])c=new I(t);else if(t instanceof F)c=t;else if(\"geometry\"in t)if(t.geometry)c=t.geometry;else if(t.layer){const e=t.layer,n=a.allLayerViews.find((t=>t.layer.id===e.id));if(\"queryFeatures\"in n){const o=e.createQuery();o.objectIds=[t.attributes[e.objectIdField]],o.returnGeometry=!0;const a=await n.queryFeatures(o);c=r(a,\"features\",0,\"geometry\")}}if(o(c))return null;if(u=\"point\"===c.type?new P({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference}):c.extent,!u)return null;const f=L(u,i);if(!u.spatialReference.equals(i)&&f)u=O(u,i);else if(!f)return null;return s=s?s.union(u):u.clone()}function X(t){if(t&&(!Array.isArray(t)||\"number\"!=typeof t[0])&&(\"object\"==typeof t||Array.isArray(t)&&\"object\"==typeof t[0])){if(\"layer\"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((t=>\"layer\"in t))){let e=0,n=0;for(const r of t){const t=r.layer;t&&t.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,n=t.maxScale>n?t.maxScale:n)}return e&&n?{min:e,max:n}:null}}}async function Y(e,r){if(!e||!r)return new t({targetGeometry:new I,scale:0,rotation:0});let o=r.spatialReference;const{constraints:a,padding:i,viewpoint:s,size:c}=r,u=[i?c[0]-i.left-i.right:c[0],i?c[1]-i.top-i.bottom:c[1]];let f=null;e instanceof t?f=e:e.viewpoint?f=e.viewpoint:e.target&&\"esri.Viewpoint\"===e.target.declaredClass&&(f=e.target);let l=null;f&&f.targetGeometry?l=f.targetGeometry:e instanceof P?l=e:(e||e&&(\"center\"in e||\"extent\"in e||\"target\"in e))&&(l=await K(e.center,r,o)||await K(e.extent,r,o)||await K(e.target,r,o)||await K(e,r,o)),!l&&s&&s.targetGeometry?l=s.targetGeometry:!l&&r.extent&&(l=r.extent);const m=D(l);if(o||(o=D(r.spatialReference||r.extent||l)),!L(l,o)&&m&&!m.equals(o))return null;const y=T(v(),l.center?l.center:l),p=new I(B(y,y,m,o),o);let g=null;g=f&&n(f.targetGeometry)&&\"point\"===f.targetGeometry.type?f.scale:e.hasOwnProperty(\"scale\")&&e.scale?e.scale:e.hasOwnProperty(\"zoom\")&&-1!==e.zoom&&a&&a.effectiveLODs?a.zoomToScale(e.zoom):Array.isArray(l)||\"point\"===l.type||\"extent\"===l.type&&0===l.width&&0===l.height?r.extent&&L(r.extent,o)?J(O(r.extent,o),u):r.extent?J(r.extent,u):s.scale:L(l.extent,o)?J(O(l.extent,o),u):J(l.extent,u);const h=X(e);h&&(h.min&&h.min>g?g=h.min:h.max&&h.max<g&&(g=h.max));let x=0;f?x=f.rotation:e.hasOwnProperty(\"rotation\")?x=e.rotation:s&&(x=s.rotation);let b=new t({targetGeometry:p,scale:g,rotation:x});return a&&(b=a.fit(b),a.constrainByGeometry(b),a.rotationEnabled||(b.rotation=x)),b}function Z(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function $(t,e,n){return n?h(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):b(t,e,.5)}const _=function(){const t=v();return function(e,n,r){const o=n.targetGeometry;T(t,o);const a=.5*at(n);return e.xmin=t[0]-a*r[0],e.ymin=t[1]-a*r[1],e.xmax=t[0]+a*r[0],e.ymax=t[1]+a*r[1],e.spatialReference=o.spatialReference,e}}();function tt(t,e,n,r,o){return wt(t,e,n.center),t.scale=J(n,r),o&&o.constraints&&o.constraints.constrain(t),t}function et(t,e,n,r){return mt(t,e,n,r),y(t,t)}function nt(t,e,n){const r=st(e),o=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r));return h(t,Math.round(n[1]*a+n[0]*o),Math.round(n[1]*o+n[0]*a))}const rt=function(){const t=v();return function(e,n,r){return d(e,ut(e,n),$(t,n,r))}}(),ot=function(){const t=g(),e=v();return function(n,r,o,a){const i=at(r),s=st(r);return h(e,i,i),c(t,e),u(t,t,s),f(t,t,rt(e,o,a)),f(t,t,[0,a.top-a.bottom]),h(n,t[4],t[5])}}();function at(t){return t.scale*it(t.targetGeometry)}function it(t){return n(t)&&V(t.spatialReference)?1/(H(t.spatialReference)*W*ft()):1}function st(t){return i(t.rotation)||0}function ct(t){return V(t)?H(t)*W*ft():1}function ut(t,e){return b(t,e,.5)}function ft(){return 96}const lt=function(){const t=v(),e=v(),n=v();return function(r,o,a,i,s,c){return w(t,o),b(e,a,.5*c),h(n,1/i*c,-1/i*c),l(r),f(r,r,e),s&&u(r,r,s),m(r,r,n),f(r,r,t),r}}(),mt=function(){const t=v();return function(e,n,r,o){const a=at(n),i=st(n);return T(t,n.targetGeometry),lt(e,t,r,a,i,o)}}(),yt=function(){const t=v();return function(e,n,r,o){const a=at(n);return T(t,n.targetGeometry),lt(e,t,r,a,0,o)}}();function pt(t){if(t.isWrappable){const e=E(t);return e.valid[1]-e.valid[0]}return 0}function gt(t,e){return Math.round(pt(t)/e)}function ht(t,e){return Y(t,e)}const xt=function(){const t=v(),e=v(),n=[0,0,0];return function(r,o,a){j(t,r,o),G(t,t),j(e,r,a),G(e,e),M(n,t,e);let i=Math.acos(A(t,e)/(R(t)*R(e)))*C;return n[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),bt=function(){const t=v();return function(e,n,r,o){const a=e.targetGeometry;return Z(e,n),ot(t,n,r,o),a.x+=t[0],a.y+=t[1],e}}(),dt=function(){const t=v();return function(e,n,r,o){const a=e.targetGeometry;return Z(e,n),ot(t,n,r,o),a.x-=t[0],a.y-=t[1],e}}(),wt=function(){const t=v();return function(e,n,r){Z(e,n);const o=e.targetGeometry,a=D(r),i=D(o);return T(t,r),B(t,t,a,i),o.x=t[0],o.y=t[1],e}}();function jt(t){return at(t)}const Gt=function(){const t=v();return function(e,n,r,o,a){a||(a=\"center\"),d(t,r,o),b(t,t,.5);const i=t[0],s=t[1];switch(a){case\"center\":h(t,0,0);break;case\"left\":h(t,-i,0);break;case\"top\":h(t,0,s);break;case\"right\":h(t,i,0);break;case\"bottom\":h(t,0,-s);break;case\"top-left\":h(t,-i,s);break;case\"bottom-left\":h(t,-i,-s);break;case\"top-right\":h(t,i,s);break;case\"bottom-right\":h(t,i,-s)}return Ft(e,n,t),e}}();function Mt(t,e,n){return Z(t,e),t.rotation+=n,t}function At(t,e,n){return Z(t,e),t.rotation=n,t}const Rt=function(){const t=v();return function(e,n,r,o,a){return Z(e,n),isNaN(r)||0===r||(qt(t,o,n,a),e.scale=n.scale*r,Pt(t,t,e,a),Ft(e,e,h(t,t[0]-o[0],o[1]-t[1]))),e}}();function kt(t,e,n){return Z(t,e),t.scale=n,t}const St=function(){const t=v();return function(e,n,r,o,a,i){return Z(e,n),isNaN(r)||0===r||(qt(t,a,n,i),e.scale=n.scale*r,e.rotation+=o,Pt(t,t,e,i),Ft(e,e,h(t,t[0]-a[0],a[1]-t[1]))),e}}(),vt=function(){const t=v(),e=v();return function(n,r,o,a,i,s,c){return rt(e,s,c),S(t,i,e),a?St(n,r,o,a,t,s):Rt(n,r,o,t,s)}}(),qt=function(){const t=g();return function(e,n,r,o){return k(e,n,et(t,r,o,1))}}(),Pt=function(){const t=g();return function(e,n,r,o){return k(e,n,mt(t,r,o,1))}}(),Ft=function(){const t=v(),e=g();return function(n,r,o){Z(n,r);const a=at(r),i=n.targetGeometry;return p(e,st(r)),m(e,e,q(a,a)),k(t,o,e),i.x+=t[0],i.y+=t[1],n}}();export{bt as addPadding,xt as angleBetween,wt as centerAt,Z as copy,Y as create,ht as createAsync,J as extentToScale,$ as getAnchor,_ as getExtent,lt as getMatrix,nt as getOuterSize,ot as getPaddingMapTranslation,rt as getPaddingScreenTranslation,at as getResolution,ct as getResolutionToScaleFactor,mt as getTransform,yt as getTransformNoRotation,gt as getWorldScreenWidth,pt as getWorldWidth,vt as padAndScaleAndRotateBy,jt as pixelSize,dt as removePadding,Gt as resize,Mt as rotateBy,At as rotateTo,St as scaleAndRotateBy,Rt as scaleBy,kt as scaleTo,tt as setExtent,qt as toMap,Pt as toScreen,Ft as translateBy};\n"]},"metadata":{},"sourceType":"module"}