{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isExtent as e, isPolygon as t, isPolyline as i, isPoint as s } from \"../../../geometry/support/jsonUtils.js\";\nimport { CurveHelper as n, PIXEL_TOLERANCE as r } from \"../CurveHelper.js\";\n\nclass o {\n  static local() {\n    return null === o.instance && (o.instance = new o()), o.instance;\n  }\n\n  execute(e, t, i) {\n    return new f(e, t, i);\n  }\n\n}\n\no.instance = null;\n\nclass f {\n  constructor(e, t, i) {\n    this._inputGeometries = e, this._curveHelper = new n(), this._size = (void 0 !== t.size ? t.size : 1) * i, this._offsetFlattenError = r * i;\n  }\n\n  next() {\n    let n = this._inputGeometries.next();\n\n    for (; n;) {\n      if (e(n)) if (this._size > 0) {\n        const e = [[n.xmin, n.ymin], [n.xmin, n.ymax], [n.xmax, n.ymax], [n.xmax, n.ymin], [n.xmin, n.ymin]],\n              t = this._curveHelper.offset(e, this._size, \"Rounded\", 4, this._offsetFlattenError);\n\n        if (t) return {\n          rings: [t]\n        };\n      } else {\n        if (!(this._size < 0)) return n;\n        if (Math.min(n.xmax - n.xmin, n.ymax - n.ymin) + 2 * this._size > 0) return {\n          xmin: n.xmin - this._size,\n          xmax: n.xmax + this._size,\n          ymin: n.ymin - this._size,\n          ymax: n.ymax + this._size\n        };\n      }\n\n      if (t(n)) {\n        if (0 === this._size) return n;\n        const e = [];\n\n        for (const t of n.rings) {\n          const i = this._curveHelper.offset(t, this._size, \"Rounded\", 4, this._offsetFlattenError);\n\n          i && e.push(i);\n        }\n\n        if (e.length) return {\n          rings: e\n        };\n      }\n\n      if (i(n) && this._size > 0) {\n        const e = [];\n\n        for (const t of n.paths) if (t && t.length > 1) {\n          const i = this._curveHelper.offset(t, this._size, \"Rounded\", 4, this._offsetFlattenError),\n                s = this._curveHelper.offset(t, -this._size, \"Rounded\", 4, this._offsetFlattenError);\n\n          if (i && s) {\n            for (let e = s.length - 1; e >= 0; e--) i.push(s[e]);\n\n            i.push([i[0][0], i[0][1]]), e.push(i);\n          }\n        }\n\n        if (e.length) return {\n          rings: e\n        };\n      }\n\n      s(n) && this._size, n = this._inputGeometries.next();\n    }\n\n    return null;\n  }\n\n}\n\nexport { o as EffectBuffer };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/symbols/cim/effects/EffectBuffer.js"],"names":["isExtent","e","isPolygon","t","isPolyline","i","isPoint","s","CurveHelper","n","PIXEL_TOLERANCE","r","o","local","instance","execute","f","constructor","_inputGeometries","_curveHelper","_size","size","_offsetFlattenError","next","xmin","ymin","ymax","xmax","offset","rings","Math","min","push","length","paths","EffectBuffer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isExtent as e,isPolygon as t,isPolyline as i,isPoint as s}from\"../../../geometry/support/jsonUtils.js\";import{CurveHelper as n,PIXEL_TOLERANCE as r}from\"../CurveHelper.js\";class o{static local(){return null===o.instance&&(o.instance=new o),o.instance}execute(e,t,i){return new f(e,t,i)}}o.instance=null;class f{constructor(e,t,i){this._inputGeometries=e,this._curveHelper=new n,this._size=(void 0!==t.size?t.size:1)*i,this._offsetFlattenError=r*i}next(){let n=this._inputGeometries.next();for(;n;){if(e(n))if(this._size>0){const e=[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]],t=this._curveHelper.offset(e,this._size,\"Rounded\",4,this._offsetFlattenError);if(t)return{rings:[t]}}else{if(!(this._size<0))return n;if(Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._size>0)return{xmin:n.xmin-this._size,xmax:n.xmax+this._size,ymin:n.ymin-this._size,ymax:n.ymax+this._size}}if(t(n)){if(0===this._size)return n;const e=[];for(const t of n.rings){const i=this._curveHelper.offset(t,this._size,\"Rounded\",4,this._offsetFlattenError);i&&e.push(i)}if(e.length)return{rings:e}}if(i(n)&&this._size>0){const e=[];for(const t of n.paths)if(t&&t.length>1){const i=this._curveHelper.offset(t,this._size,\"Rounded\",4,this._offsetFlattenError),s=this._curveHelper.offset(t,-this._size,\"Rounded\",4,this._offsetFlattenError);if(i&&s){for(let e=s.length-1;e>=0;e--)i.push(s[e]);i.push([i[0][0],i[0][1]]),e.push(i)}}if(e.length)return{rings:e}}s(n)&&this._size,n=this._inputGeometries.next()}return null}}export{o as EffectBuffer};\n"]},"metadata":{},"sourceType":"module"}