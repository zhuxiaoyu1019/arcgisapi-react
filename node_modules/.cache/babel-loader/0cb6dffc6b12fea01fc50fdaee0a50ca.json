{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../request.js\";\nimport { createQueryParamsHelper as r } from \"../core/queryUtils.js\";\nimport { normalizeCentralMeridian as t } from \"../geometry/support/normalizeUtils.js\";\nimport { collectGeometries as i, isInputGeometryZAware as s, fetchServiceDescription as a, dropZValuesOffInputGeometry as o } from \"./networkService.js\";\nimport { parseUrl as n } from \"./utils.js\";\nimport u from \"./support/ClosestFacilitySolveResult.js\";\nconst l = r({\n  accumulateAttributes: {\n    name: \"accumulateAttributeNames\"\n  },\n  attributeParameterValues: !0,\n  directionsTimeAttribute: {\n    name: \"directionsTimeAttributeName\"\n  },\n  impedanceAttribute: {\n    name: \"impedanceAttributeName\"\n  },\n  facilities: !0,\n  incidents: !0,\n  outSpatialReference: {\n    name: \"outSR\",\n    getter: e => e.outSpatialReference.wkid\n  },\n  pointBarriers: {\n    name: \"barriers\"\n  },\n  polylineBarriers: !0,\n  polygonBarriers: !0,\n  restrictionAttributes: {\n    name: \"restrictionAttributeNames\"\n  },\n  returnPointBarriers: {\n    name: \"returnBarriers\"\n  },\n  returnRoutes: {\n    name: \"returnCFRoutes\"\n  },\n  travelMode: !0\n});\n\nasync function c(r, c, m) {\n  const f = [],\n        p = [],\n        y = {},\n        B = {},\n        d = n(r);\n  return c.incidents && c.incidents.features && i(c.incidents.features, p, \"incidents.features\", y), c.facilities && c.facilities.features && i(c.facilities.features, p, \"facilities.features\", y), c.pointBarriers && c.pointBarriers.features && i(c.pointBarriers.features, p, \"pointBarriers.features\", y), c.polylineBarriers && c.polylineBarriers.features && i(c.polylineBarriers.features, p, \"polylineBarriers.features\", y), c.polygonBarriers && c.polygonBarriers.features && i(c.polygonBarriers.features, p, \"polygonBarriers.features\", y), t(p).then(e => {\n    for (const r in y) {\n      const t = y[r];\n      f.push(r), B[r] = e.slice(t[0], t[1]);\n    }\n\n    return s(B, f) ? a(d.path) : Promise.resolve({\n      dontCheck: !0\n    });\n  }).then(r => {\n    (\"dontCheck\" in r ? r.dontCheck : r.hasZ) || o(B, f);\n\n    for (const e in B) B[e].forEach((r, t) => {\n      c.get(e)[t].geometry = r;\n    });\n\n    let t = {\n      query: { ...d.query,\n        f: \"json\",\n        ...l.toQueryParams(c)\n      }\n    };\n    return m && (t = { ...m,\n      ...t\n    }), e(`${d.path}/solveClosestFacility`, t);\n  }).then(e => u.fromJSON(e.data));\n}\n\nexport { c as solve };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/rest/closestFacility.js"],"names":["e","createQueryParamsHelper","r","normalizeCentralMeridian","t","collectGeometries","i","isInputGeometryZAware","s","fetchServiceDescription","a","dropZValuesOffInputGeometry","o","parseUrl","n","u","l","accumulateAttributes","name","attributeParameterValues","directionsTimeAttribute","impedanceAttribute","facilities","incidents","outSpatialReference","getter","wkid","pointBarriers","polylineBarriers","polygonBarriers","restrictionAttributes","returnPointBarriers","returnRoutes","travelMode","c","m","f","p","y","B","d","features","then","push","slice","path","Promise","resolve","dontCheck","hasZ","forEach","get","geometry","query","toQueryParams","fromJSON","data","solve"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,eAAb;AAA6B,SAAOC,uBAAuB,IAAIC,CAAlC,QAAwC,uBAAxC;AAAgE,SAAOC,wBAAwB,IAAIC,CAAnC,QAAyC,uCAAzC;AAAiF,SAAOC,iBAAiB,IAAIC,CAA5B,EAA8BC,qBAAqB,IAAIC,CAAvD,EAAyDC,uBAAuB,IAAIC,CAApF,EAAsFC,2BAA2B,IAAIC,CAArH,QAA2H,qBAA3H;AAAiJ,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,YAAzB;AAAsC,OAAOC,CAAP,MAAa,yCAAb;AAAuD,MAAMC,CAAC,GAACd,CAAC,CAAC;AAACe,EAAAA,oBAAoB,EAAC;AAACC,IAAAA,IAAI,EAAC;AAAN,GAAtB;AAAwDC,EAAAA,wBAAwB,EAAC,CAAC,CAAlF;AAAoFC,EAAAA,uBAAuB,EAAC;AAACF,IAAAA,IAAI,EAAC;AAAN,GAA5G;AAAiJG,EAAAA,kBAAkB,EAAC;AAACH,IAAAA,IAAI,EAAC;AAAN,GAApK;AAAoMI,EAAAA,UAAU,EAAC,CAAC,CAAhN;AAAkNC,EAAAA,SAAS,EAAC,CAAC,CAA7N;AAA+NC,EAAAA,mBAAmB,EAAC;AAACN,IAAAA,IAAI,EAAC,OAAN;AAAcO,IAAAA,MAAM,EAACzB,CAAC,IAAEA,CAAC,CAACwB,mBAAF,CAAsBE;AAA9C,GAAnP;AAAuSC,EAAAA,aAAa,EAAC;AAACT,IAAAA,IAAI,EAAC;AAAN,GAArT;AAAuUU,EAAAA,gBAAgB,EAAC,CAAC,CAAzV;AAA2VC,EAAAA,eAAe,EAAC,CAAC,CAA5W;AAA8WC,EAAAA,qBAAqB,EAAC;AAACZ,IAAAA,IAAI,EAAC;AAAN,GAApY;AAAuaa,EAAAA,mBAAmB,EAAC;AAACb,IAAAA,IAAI,EAAC;AAAN,GAA3b;AAAmdc,EAAAA,YAAY,EAAC;AAACd,IAAAA,IAAI,EAAC;AAAN,GAAhe;AAAwfe,EAAAA,UAAU,EAAC,CAAC;AAApgB,CAAD,CAAT;;AAAkhB,eAAeC,CAAf,CAAiBhC,CAAjB,EAAmBgC,CAAnB,EAAqBC,CAArB,EAAuB;AAAC,QAAMC,CAAC,GAAC,EAAR;AAAA,QAAWC,CAAC,GAAC,EAAb;AAAA,QAAgBC,CAAC,GAAC,EAAlB;AAAA,QAAqBC,CAAC,GAAC,EAAvB;AAAA,QAA0BC,CAAC,GAAC1B,CAAC,CAACZ,CAAD,CAA7B;AAAiC,SAAOgC,CAAC,CAACX,SAAF,IAAaW,CAAC,CAACX,SAAF,CAAYkB,QAAzB,IAAmCnC,CAAC,CAAC4B,CAAC,CAACX,SAAF,CAAYkB,QAAb,EAAsBJ,CAAtB,EAAwB,oBAAxB,EAA6CC,CAA7C,CAApC,EAAoFJ,CAAC,CAACZ,UAAF,IAAcY,CAAC,CAACZ,UAAF,CAAamB,QAA3B,IAAqCnC,CAAC,CAAC4B,CAAC,CAACZ,UAAF,CAAamB,QAAd,EAAuBJ,CAAvB,EAAyB,qBAAzB,EAA+CC,CAA/C,CAA1H,EAA4KJ,CAAC,CAACP,aAAF,IAAiBO,CAAC,CAACP,aAAF,CAAgBc,QAAjC,IAA2CnC,CAAC,CAAC4B,CAAC,CAACP,aAAF,CAAgBc,QAAjB,EAA0BJ,CAA1B,EAA4B,wBAA5B,EAAqDC,CAArD,CAAxN,EAAgRJ,CAAC,CAACN,gBAAF,IAAoBM,CAAC,CAACN,gBAAF,CAAmBa,QAAvC,IAAiDnC,CAAC,CAAC4B,CAAC,CAACN,gBAAF,CAAmBa,QAApB,EAA6BJ,CAA7B,EAA+B,2BAA/B,EAA2DC,CAA3D,CAAlU,EAAgYJ,CAAC,CAACL,eAAF,IAAmBK,CAAC,CAACL,eAAF,CAAkBY,QAArC,IAA+CnC,CAAC,CAAC4B,CAAC,CAACL,eAAF,CAAkBY,QAAnB,EAA4BJ,CAA5B,EAA8B,0BAA9B,EAAyDC,CAAzD,CAAhb,EAA4elC,CAAC,CAACiC,CAAD,CAAD,CAAKK,IAAL,CAAW1C,CAAC,IAAE;AAAC,SAAI,MAAME,CAAV,IAAeoC,CAAf,EAAiB;AAAC,YAAMlC,CAAC,GAACkC,CAAC,CAACpC,CAAD,CAAT;AAAakC,MAAAA,CAAC,CAACO,IAAF,CAAOzC,CAAP,GAAUqC,CAAC,CAACrC,CAAD,CAAD,GAAKF,CAAC,CAAC4C,KAAF,CAAQxC,CAAC,CAAC,CAAD,CAAT,EAAaA,CAAC,CAAC,CAAD,CAAd,CAAf;AAAkC;;AAAA,WAAOI,CAAC,CAAC+B,CAAD,EAAGH,CAAH,CAAD,GAAO1B,CAAC,CAAC8B,CAAC,CAACK,IAAH,CAAR,GAAiBC,OAAO,CAACC,OAAR,CAAgB;AAACC,MAAAA,SAAS,EAAC,CAAC;AAAZ,KAAhB,CAAxB;AAAwD,GAAxI,EAA2IN,IAA3I,CAAiJxC,CAAC,IAAE;AAAC,KAAC,eAAcA,CAAd,GAAgBA,CAAC,CAAC8C,SAAlB,GAA4B9C,CAAC,CAAC+C,IAA/B,KAAsCrC,CAAC,CAAC2B,CAAD,EAAGH,CAAH,CAAvC;;AAA6C,SAAI,MAAMpC,CAAV,IAAeuC,CAAf,EAAiBA,CAAC,CAACvC,CAAD,CAAD,CAAKkD,OAAL,CAAc,CAAChD,CAAD,EAAGE,CAAH,KAAO;AAAC8B,MAAAA,CAAC,CAACiB,GAAF,CAAMnD,CAAN,EAASI,CAAT,EAAYgD,QAAZ,GAAqBlD,CAArB;AAAuB,KAA7C;;AAAgD,QAAIE,CAAC,GAAC;AAACiD,MAAAA,KAAK,EAAC,EAAC,GAAGb,CAAC,CAACa,KAAN;AAAYjB,QAAAA,CAAC,EAAC,MAAd;AAAqB,WAAGpB,CAAC,CAACsC,aAAF,CAAgBpB,CAAhB;AAAxB;AAAP,KAAN;AAA0D,WAAOC,CAAC,KAAG/B,CAAC,GAAC,EAAC,GAAG+B,CAAJ;AAAM,SAAG/B;AAAT,KAAL,CAAD,EAAmBJ,CAAC,CAAE,GAAEwC,CAAC,CAACK,IAAK,uBAAX,EAAkCzC,CAAlC,CAA3B;AAAgE,GAA7X,EAAgYsC,IAAhY,CAAsY1C,CAAC,IAAEe,CAAC,CAACwC,QAAF,CAAWvD,CAAC,CAACwD,IAAb,CAAzY,CAAnf;AAAi5B;;AAAA,SAAOtB,CAAC,IAAIuB,KAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{createQueryParamsHelper as r}from\"../core/queryUtils.js\";import{normalizeCentralMeridian as t}from\"../geometry/support/normalizeUtils.js\";import{collectGeometries as i,isInputGeometryZAware as s,fetchServiceDescription as a,dropZValuesOffInputGeometry as o}from\"./networkService.js\";import{parseUrl as n}from\"./utils.js\";import u from\"./support/ClosestFacilitySolveResult.js\";const l=r({accumulateAttributes:{name:\"accumulateAttributeNames\"},attributeParameterValues:!0,directionsTimeAttribute:{name:\"directionsTimeAttributeName\"},impedanceAttribute:{name:\"impedanceAttributeName\"},facilities:!0,incidents:!0,outSpatialReference:{name:\"outSR\",getter:e=>e.outSpatialReference.wkid},pointBarriers:{name:\"barriers\"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:\"restrictionAttributeNames\"},returnPointBarriers:{name:\"returnBarriers\"},returnRoutes:{name:\"returnCFRoutes\"},travelMode:!0});async function c(r,c,m){const f=[],p=[],y={},B={},d=n(r);return c.incidents&&c.incidents.features&&i(c.incidents.features,p,\"incidents.features\",y),c.facilities&&c.facilities.features&&i(c.facilities.features,p,\"facilities.features\",y),c.pointBarriers&&c.pointBarriers.features&&i(c.pointBarriers.features,p,\"pointBarriers.features\",y),c.polylineBarriers&&c.polylineBarriers.features&&i(c.polylineBarriers.features,p,\"polylineBarriers.features\",y),c.polygonBarriers&&c.polygonBarriers.features&&i(c.polygonBarriers.features,p,\"polygonBarriers.features\",y),t(p).then((e=>{for(const r in y){const t=y[r];f.push(r),B[r]=e.slice(t[0],t[1])}return s(B,f)?a(d.path):Promise.resolve({dontCheck:!0})})).then((r=>{(\"dontCheck\"in r?r.dontCheck:r.hasZ)||o(B,f);for(const e in B)B[e].forEach(((r,t)=>{c.get(e)[t].geometry=r}));let t={query:{...d.query,f:\"json\",...l.toQueryParams(c)}};return m&&(t={...m,...t}),e(`${d.path}/solveClosestFacility`,t)})).then((e=>u.fromJSON(e.data)))}export{c as solve};\n"]},"metadata":{},"sourceType":"module"}