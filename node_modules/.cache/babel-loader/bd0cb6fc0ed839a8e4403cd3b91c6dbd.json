{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"./FramebufferObject.js\";\nimport t from \"./Texture.js\";\n\nfunction n(e, n, a = \"nearest\", i = !1) {\n  var r;\n  const o = !(i && \"u8\" === n.pixelType),\n        s = o ? 5126 : 5121,\n        u = null == n.pixels || 0 === n.pixels.length ? null : o ? n.getAsRGBAFloat() : n.getAsRGBA(),\n        l = null == (r = e.capabilities.textureFloat) ? void 0 : r.textureFloatLinear,\n        f = {\n    width: n.width,\n    height: n.height,\n    target: 3553,\n    pixelFormat: 6408,\n    internalFormat: \"webgl2\" === e.webglVersion && o ? 34836 : 6408,\n    samplingMode: !l || \"bilinear\" !== a && \"cubic\" !== a ? 9728 : 9729,\n    dataType: s,\n    wrapMode: 33071,\n    flipped: !1\n  };\n  return new t(e, f, u);\n}\n\nfunction a(n, a, i, r) {\n  const o = new t(n, {\n    width: a,\n    height: i,\n    target: 3553,\n    pixelFormat: 6408,\n    internalFormat: 6408,\n    samplingMode: 9728,\n    dataType: r ? 5121 : 5126,\n    wrapMode: 33071,\n    flipped: !1\n  });\n  return new e(n, {\n    colorTarget: 0,\n    depthStencilTarget: 3,\n    width: a,\n    height: i\n  }, o);\n}\n\nfunction i(e, n) {\n  const a = 4 * n.size[0],\n        i = n.size[1],\n        r = {\n    width: a,\n    height: i,\n    target: 3553,\n    pixelFormat: 6408,\n    internalFormat: \"webgl2\" === e.webglVersion ? 34836 : 6408,\n    dataType: 5126,\n    samplingMode: 9728,\n    wrapMode: 33071,\n    flipped: !1\n  },\n        o = new Float32Array(a * i * 4);\n  let s = 0;\n\n  for (let t = 0; t < n.coefficients.length; t++) o[s++] = n.coefficients[t], t % 3 == 2 && (o[s++] = 1);\n\n  return new t(e, r, o);\n}\n\nfunction r(e, n) {\n  const a = {\n    width: n.length / 4,\n    height: 1,\n    target: 3553,\n    pixelFormat: 6408,\n    internalFormat: 6408,\n    dataType: 5121,\n    samplingMode: 9728,\n    wrapMode: 33071,\n    flipped: !1\n  };\n  return new t(e, a, n);\n}\n\nfunction o(e, t, n, a = 1, i = !0, r = !1) {\n  return {\n    u_flipY: i,\n    u_isFloatTexture: r,\n    u_applyTransform: !!e,\n    u_opacity: a,\n    u_transformSpacing: e ? e.spacing : null,\n    u_transformGridSize: e ? e.size : null,\n    u_targetImageSize: t,\n    u_srcImageSize: n\n  };\n}\n\nfunction s(e, t) {\n  return {\n    u_colormapOffset: t || 0,\n    u_colormapMaxIndex: e ? e.length / 4 - 1 : null\n  };\n}\n\nfunction u(e, t) {\n  return {\n    u_scale: e,\n    u_offset: t\n  };\n}\n\nfunction l(e) {\n  return {\n    u_bandCount: e.bandCount,\n    u_minOutput: e.outMin,\n    u_maxOutput: e.outMax,\n    u_minCutOff: e.minCutOff,\n    u_maxCutOff: e.maxCutOff,\n    u_factor: e.factor,\n    u_useGamma: e.useGamma,\n    u_gamma: e.gamma,\n    u_gammaCorrection: e.gammaCorrection\n  };\n}\n\nfunction f(e) {\n  return {\n    u_hillshadeType: e.hillshadeType,\n    u_sinZcosAs: e.sinZcosAs,\n    u_sinZsinAs: e.sinZsinAs,\n    u_cosZs: e.cosZs,\n    u_weights: e.weights,\n    u_factor: e.factor,\n    u_minValue: e.minValue,\n    u_maxValue: e.maxValue\n  };\n}\n\nfunction m(e, t) {\n  const n = e.gl,\n        a = t.glName,\n        i = n.getProgramParameter(a, n.ACTIVE_UNIFORMS),\n        r = new Map();\n  let o;\n\n  for (let s = 0; s < i; s++) o = n.getActiveUniform(a, s), o && r.set(o.name, {\n    location: n.getUniformLocation(a, o.name),\n    info: o\n  });\n\n  return r;\n}\n\nfunction c(e, t, n) {\n  Object.keys(n).forEach(a => {\n    const i = t.get(a) || t.get(a + \"[0]\");\n    i && p(e, a, n[a], i);\n  });\n}\n\nfunction g(e, t, n, a) {\n  n.length === a.length && (a.some(e => null == e) || n.some(e => null == e) || n.forEach((n, i) => {\n    t.setUniform1i(n, i), e.bindTexture(a[i], i);\n  }));\n}\n\nfunction p(e, t, n, a) {\n  if (null === a || null == n) return !1;\n  const {\n    info: i\n  } = a;\n\n  switch (i.type) {\n    case 5126:\n      i.size > 1 ? e.setUniform1fv(t, n) : e.setUniform1f(t, n);\n      break;\n\n    case 35664:\n      e.setUniform2fv(t, n);\n      break;\n\n    case 35665:\n      e.setUniform3fv(t, n);\n      break;\n\n    case 35666:\n      e.setUniform4fv(t, n);\n      break;\n\n    case 35675:\n      e.setUniformMatrix3fv(t, n);\n      break;\n\n    case 35676:\n      e.setUniformMatrix4fv(t, n);\n      break;\n\n    case 5124:\n      i.size > 1 ? e.setUniform1iv(t, n) : e.setUniform1i(t, n);\n      break;\n\n    case 35670:\n      e.setUniform1i(t, n ? 1 : 0);\n      break;\n\n    case 35667:\n    case 35671:\n      e.setUniform2iv(t, n);\n      break;\n\n    case 35668:\n    case 35672:\n      e.setUniform3iv(t, n);\n      break;\n\n    case 35669:\n    case 35673:\n      e.setUniform4iv(t, n);\n      break;\n\n    default:\n      return !1;\n  }\n\n  return !0;\n}\n\nexport { r as createColormapTexture, a as createFrameBuffer, n as createRasterTexture, i as createTransformTexture, u as getBasicGridUniforms, s as getColormapUniforms, o as getCommonUniforms, f as getShadedReliefUniforms, l as getStretchUniforms, m as getUniformLocationInfos, g as setTextures, c as setUniforms };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/webgl/rasterUtils.js"],"names":["e","t","n","a","i","r","o","pixelType","s","u","pixels","length","getAsRGBAFloat","getAsRGBA","l","capabilities","textureFloat","textureFloatLinear","f","width","height","target","pixelFormat","internalFormat","webglVersion","samplingMode","dataType","wrapMode","flipped","colorTarget","depthStencilTarget","size","Float32Array","coefficients","u_flipY","u_isFloatTexture","u_applyTransform","u_opacity","u_transformSpacing","spacing","u_transformGridSize","u_targetImageSize","u_srcImageSize","u_colormapOffset","u_colormapMaxIndex","u_scale","u_offset","u_bandCount","bandCount","u_minOutput","outMin","u_maxOutput","outMax","u_minCutOff","minCutOff","u_maxCutOff","maxCutOff","u_factor","factor","u_useGamma","useGamma","u_gamma","gamma","u_gammaCorrection","gammaCorrection","u_hillshadeType","hillshadeType","u_sinZcosAs","sinZcosAs","u_sinZsinAs","sinZsinAs","u_cosZs","cosZs","u_weights","weights","u_minValue","minValue","u_maxValue","maxValue","m","gl","glName","getProgramParameter","ACTIVE_UNIFORMS","Map","getActiveUniform","set","name","location","getUniformLocation","info","c","Object","keys","forEach","get","p","g","some","setUniform1i","bindTexture","type","setUniform1fv","setUniform1f","setUniform2fv","setUniform3fv","setUniform4fv","setUniformMatrix3fv","setUniformMatrix4fv","setUniform1iv","setUniform2iv","setUniform3iv","setUniform4iv","createColormapTexture","createFrameBuffer","createRasterTexture","createTransformTexture","getBasicGridUniforms","getColormapUniforms","getCommonUniforms","getShadedReliefUniforms","getStretchUniforms","getUniformLocationInfos","setTextures","setUniforms"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"./FramebufferObject.js\";import t from\"./Texture.js\";function n(e,n,a=\"nearest\",i=!1){var r;const o=!(i&&\"u8\"===n.pixelType),s=o?5126:5121,u=null==n.pixels||0===n.pixels.length?null:o?n.getAsRGBAFloat():n.getAsRGBA(),l=null==(r=e.capabilities.textureFloat)?void 0:r.textureFloatLinear,f={width:n.width,height:n.height,target:3553,pixelFormat:6408,internalFormat:\"webgl2\"===e.webglVersion&&o?34836:6408,samplingMode:!l||\"bilinear\"!==a&&\"cubic\"!==a?9728:9729,dataType:s,wrapMode:33071,flipped:!1};return new t(e,f,u)}function a(n,a,i,r){const o=new t(n,{width:a,height:i,target:3553,pixelFormat:6408,internalFormat:6408,samplingMode:9728,dataType:r?5121:5126,wrapMode:33071,flipped:!1});return new e(n,{colorTarget:0,depthStencilTarget:3,width:a,height:i},o)}function i(e,n){const a=4*n.size[0],i=n.size[1],r={width:a,height:i,target:3553,pixelFormat:6408,internalFormat:\"webgl2\"===e.webglVersion?34836:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1},o=new Float32Array(a*i*4);let s=0;for(let t=0;t<n.coefficients.length;t++)o[s++]=n.coefficients[t],t%3==2&&(o[s++]=1);return new t(e,r,o)}function r(e,n){const a={width:n.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1};return new t(e,a,n)}function o(e,t,n,a=1,i=!0,r=!1){return{u_flipY:i,u_isFloatTexture:r,u_applyTransform:!!e,u_opacity:a,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:n}}function s(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function u(e,t){return{u_scale:e,u_offset:t}}function l(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function f(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function m(e,t){const n=e.gl,a=t.glName,i=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),r=new Map;let o;for(let s=0;s<i;s++)o=n.getActiveUniform(a,s),o&&r.set(o.name,{location:n.getUniformLocation(a,o.name),info:o});return r}function c(e,t,n){Object.keys(n).forEach((a=>{const i=t.get(a)||t.get(a+\"[0]\");i&&p(e,a,n[a],i)}))}function g(e,t,n,a){n.length===a.length&&(a.some((e=>null==e))||n.some((e=>null==e))||n.forEach(((n,i)=>{t.setUniform1i(n,i),e.bindTexture(a[i],i)})))}function p(e,t,n,a){if(null===a||null==n)return!1;const{info:i}=a;switch(i.type){case 5126:i.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case 35664:e.setUniform2fv(t,n);break;case 35665:e.setUniform3fv(t,n);break;case 35666:e.setUniform4fv(t,n);break;case 35675:e.setUniformMatrix3fv(t,n);break;case 35676:e.setUniformMatrix4fv(t,n);break;case 5124:i.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case 35670:e.setUniform1i(t,n?1:0);break;case 35667:case 35671:e.setUniform2iv(t,n);break;case 35668:case 35672:e.setUniform3iv(t,n);break;case 35669:case 35673:e.setUniform4iv(t,n);break;default:return!1}return!0}export{r as createColormapTexture,a as createFrameBuffer,n as createRasterTexture,i as createTransformTexture,u as getBasicGridUniforms,s as getColormapUniforms,o as getCommonUniforms,f as getShadedReliefUniforms,l as getStretchUniforms,m as getUniformLocationInfos,g as setTextures,c as setUniforms};\n"]},"metadata":{},"sourceType":"module"}