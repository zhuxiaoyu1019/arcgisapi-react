{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../../geometry.js\";\nimport e from \"../../../core/Error.js\";\nimport r from \"../../../core/Logger.js\";\nimport { isNone as t } from \"../../../core/maybe.js\";\nimport { getExtentForScale as n } from \"../../../geometry/support/scaleUtils.js\";\nimport i from \"../../../geometry/Extent.js\";\nconst o = r.getLogger(\"esri.widgets.Search.support.geometryUtils\");\n\nfunction s(r, t) {\n  var n, i;\n  if (!t) return o.error(\"missing-parameter: view is missing.\"), Promise.reject(new e(\"searchgeometryutils:missing-parameter\", \"view is missing.\"));\n  if (!r) return o.error(\"missing-parameter: point is missing.\"), Promise.reject(new e(\"searchgeometryutils:missing-parameter\", \"point is missing.\"));\n  if (r.hasZ || \"2d\" === t.type) return Promise.resolve(r);\n  const s = null == t || null == (n = t.map) ? void 0 : n.ground;\n  return s && s.layers.length ? s.queryElevation(r, {\n    cache: null == (i = t.basemapTerrain) ? void 0 : i.elevationQueryCache\n  }).then(e => e.geometry) : Promise.resolve(r);\n}\n\nfunction m(e) {\n  if (t(e)) return null;\n\n  switch (e.type) {\n    case \"point\":\n      return e;\n\n    case \"extent\":\n      return e.center;\n\n    case \"polygon\":\n      return e.centroid;\n\n    case \"multipoint\":\n      return e.getPoint(0);\n\n    case \"polyline\":\n      return e.getPoint(0, 0);\n  }\n\n  return null;\n}\n\nfunction a(e, r, n) {\n  return t(e) ? null : \"extent\" === e.type ? e : \"multipoint\" === e.type || \"polygon\" === e.type || \"polyline\" === e.type ? e.extent : \"point\" === e.type ? l(e, r, n) : void 0;\n}\n\nfunction p(e, r, n) {\n  return t(e) || t(r) ? null : l(e.center, r, n);\n}\n\nfunction l(e, r, t) {\n  const o = e.hasZ ? e.z : void 0;\n\n  if (r && r.map) {\n    return (t ? n(r, t) : r.extent).clone().centerAt(e).set({\n      zmax: o,\n      zmin: o\n    });\n  }\n\n  return new i({\n    xmin: e.x - .25,\n    ymin: e.y - .25,\n    xmax: e.x + .25,\n    ymax: e.y + .25,\n    spatialReference: e.spatialReference,\n    zmin: o,\n    zmax: o\n  });\n}\n\nexport { a as createExtentFromGeometry, m as getPointFromGeometry, s as getPointWithElevation, p as scaleExtent };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/widgets/Search/support/geometryUtils.js"],"names":["e","r","isNone","t","getExtentForScale","n","i","o","getLogger","s","error","Promise","reject","hasZ","type","resolve","map","ground","layers","length","queryElevation","cache","basemapTerrain","elevationQueryCache","then","geometry","m","center","centroid","getPoint","a","extent","l","p","z","clone","centerAt","set","zmax","zmin","xmin","x","ymin","y","xmax","ymax","spatialReference","createExtentFromGeometry","getPointFromGeometry","getPointWithElevation","scaleExtent"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isNone as t}from\"../../../core/maybe.js\";import{getExtentForScale as n}from\"../../../geometry/support/scaleUtils.js\";import i from\"../../../geometry/Extent.js\";const o=r.getLogger(\"esri.widgets.Search.support.geometryUtils\");function s(r,t){var n,i;if(!t)return o.error(\"missing-parameter: view is missing.\"),Promise.reject(new e(\"searchgeometryutils:missing-parameter\",\"view is missing.\"));if(!r)return o.error(\"missing-parameter: point is missing.\"),Promise.reject(new e(\"searchgeometryutils:missing-parameter\",\"point is missing.\"));if(r.hasZ||\"2d\"===t.type)return Promise.resolve(r);const s=null==t||null==(n=t.map)?void 0:n.ground;return s&&s.layers.length?s.queryElevation(r,{cache:null==(i=t.basemapTerrain)?void 0:i.elevationQueryCache}).then((e=>e.geometry)):Promise.resolve(r)}function m(e){if(t(e))return null;switch(e.type){case\"point\":return e;case\"extent\":return e.center;case\"polygon\":return e.centroid;case\"multipoint\":return e.getPoint(0);case\"polyline\":return e.getPoint(0,0)}return null}function a(e,r,n){return t(e)?null:\"extent\"===e.type?e:\"multipoint\"===e.type||\"polygon\"===e.type||\"polyline\"===e.type?e.extent:\"point\"===e.type?l(e,r,n):void 0}function p(e,r,n){return t(e)||t(r)?null:l(e.center,r,n)}function l(e,r,t){const o=e.hasZ?e.z:void 0;if(r&&r.map){return(t?n(r,t):r.extent).clone().centerAt(e).set({zmax:o,zmin:o})}return new i({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:o,zmax:o})}export{a as createExtentFromGeometry,m as getPointFromGeometry,s as getPointWithElevation,p as scaleExtent};\n"]},"metadata":{},"sourceType":"module"}