{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { deg2rad as t, sign as e, clamp as n, acosClamped as o } from \"../../../../core/mathUtils.js\";\nimport { isNone as r } from \"../../../../core/maybe.js\";\nimport { createScreenPointArray as a } from \"../../../../core/screenUtils.js\";\nimport { i as s, c as i, m as c } from \"../../../../chunks/mat4.js\";\nimport { c as m } from \"../../../../chunks/mat4f64.js\";\nimport { s as u } from \"../../../../chunks/vec2.js\";\nimport { a as p } from \"../../../../chunks/vec2f64.js\";\nimport { g as l, d as f, a as h, f as M, n as y, c as g, m as b, b as d, l as j, e as v, s as z, h as x } from \"../../../../chunks/vec3.js\";\nimport { c as P } from \"../../../../chunks/vec3f64.js\";\nimport { axis as k, fromPoints as I, wrapAxisAngle as w, create as A } from \"../../../../geometry/support/axisAngle.js\";\nimport { coordinateSystemFromOneAxisAndNormalVector as H, vectorCoordinates as U } from \"../../../../geometry/support/coordinateSystem.js\";\nimport { intersectRay as E, fromNormalAndOffset as G, create as S } from \"../../../../geometry/support/plane.js\";\nimport { b as V, i as q, c as F } from \"../../../../chunks/sphere.js\";\nimport { angle as R } from \"../../../../geometry/support/vector.js\";\nimport { sv3d as C, sm4d as T } from \"../../../../geometry/support/vectorStacks.js\";\nimport { cyclicalPI as W } from \"../../support/mathUtils.js\";\nimport { fromScreen as B, fromScreenAtEye as D } from \"../../support/geometryUtils/ray.js\";\nimport { intersectScreen as J } from \"../../support/geometryUtils/sphere.js\";\nimport K from \"../../webgl-engine/lib/Camera.js\";\n\nfunction L(t, e, n) {\n  return n[0] = e[0] / (t.fullWidth / t.pixelRatio), n[1] = e[1] / (t.fullHeight / t.pixelRatio), n;\n}\n\nfunction N(t, e, n) {\n  const o = C.get(),\n        r = C.get(),\n        a = C.get();\n  l(r, t), l(a, e);\n  const s = f(r, n),\n        i = f(a, n);\n  h(o, n, s), M(r, r, o), y(r, r), h(o, n, i), M(a, a, o), y(a, a);\n  const c = f(r, a);\n  g(o, n, r);\n  const m = f(a, o);\n  return Math.atan2(m, c);\n}\n\nfunction O(t) {\n  for (; t > Math.PI;) t -= 2 * Math.PI;\n\n  for (; t < -Math.PI;) t += 2 * Math.PI;\n\n  return t;\n}\n\nfunction Q(t, e, n) {\n  const o = T.get();\n  s(o), i(o, o, n[3], k(n)), M(Jt, t.eye, e), b(Jt, Jt, o), t.eye = d(Jt, Jt, e), M(Jt, t.center, e), b(Jt, Jt, o), t.center = d(Jt, Jt, e), t.up = b(Jt, t.up, o);\n}\n\nfunction X(t, e, n, o) {\n  return E(t, B(e, n, Qt), o);\n}\n\nfunction Y(t, e, n, o) {\n  const r = C.get();\n  let a = 1 - n;\n  M(r, e, t.eye);\n  const s = j(r);\n  let i = s * (1 - a);\n  a >= 0 && i < o && (i = o, a = -(i - s) / s), Math.abs(s - i) < 1e-6 || (h(r, r, a), t.eye = d(Jt, t.eye, r), t.center = v(Jt, t.center, e, a));\n}\n\nfunction Z(t, e, n) {\n  e.getScreenCenter($), J(t, e, $, Jt) && (e.center = Jt);\n  const o = e.distance,\n        r = o * n;\n  if (Math.abs(o - r) < 1e-6) return;\n  const a = h(C.get(), e.viewForward, r);\n  e.eye = M(Jt, e.center, a);\n}\n\nconst $ = a();\n\nfunction _(t, e, n) {\n  tt(e, n), y(n, n), h(n, n, t);\n}\n\nfunction tt(t, e) {\n  z(e, 0, 0, 0);\n\n  for (const n of t) d(e, e, n);\n\n  h(e, e, 1 / t.length);\n}\n\nfunction et(t, e, n, o) {\n  return Math.sin(t / j(e)) * (n + o.radius);\n}\n\nfunction nt(t, e, n, o) {\n  return et(Math.PI / 2, e, n, o) + (t - Math.PI / 2);\n}\n\nvar ot;\n!function (t) {\n  t[t.Vertical = 0] = \"Vertical\", t[t.Horizontal = 1] = \"Horizontal\";\n}(ot || (ot = {}));\nconst rt = {\n  Elevation: 3e4,\n  Angle: t(6)\n},\n      at = {\n  Pole: .95,\n  Angle: t(18),\n  Tilt: 45\n},\n      st = t(80);\n\nfunction it(t, e, n, o, r) {\n  const a = P(),\n        s = F();\n  let i = !0,\n      c = !0;\n  return t.intersectScreen(n, a) ? s[3] = j(a) : (c = !1, e.aboveGround ? s[3] = Math.max(j(e.center), .9 * r.radius) : s[3] = j(e.eye) - e.relativeElevation, o ? pt(s, e, n, a) : i = J(s, e, n, a)), {\n    sphere: s,\n    scenePickPoint: i ? a : null,\n    hasGeometryIntersection: c\n  };\n}\n\nfunction ct(t, n, o, r) {\n  if (j(t.eye) - r.radius > rt.Elevation) return ot.Horizontal;\n  if (!o) return ot.Vertical;\n  D(t, n, Xt);\n  return -e(t.relativeElevation) * (.5 * Math.PI + R(t.eye, Xt.direction)) < rt.Angle ? ot.Vertical : ot.Horizontal;\n}\n\nfunction mt(t, e, n) {\n  M(ut, n, e), t.eye = M(Jt, t.eye, ut), t.center = M(Jt, t.center, ut);\n}\n\nconst ut = P();\n\nfunction pt(t, e, n, o) {\n  const a = D(e, n, Qt);\n  return !r(a) && (V(t, a, lt), q(t, a, o) ? !(x(lt, a.origin) < x(o, a.origin)) || (l(o, lt), !1) : (M(ft, e.eye, e.center), y(ft, ft), G(ft, -f(y(ft, ft), lt), ht), E(ht, a, o), !1));\n}\n\nconst lt = P(),\n      ft = P(),\n      ht = S();\n\nfunction Mt(e, r, a, s, i, c) {\n  let m;\n\n  if (g(Nt, e, r), M(Kt, e, r), j(e) <= i || !s.aboveGround) {\n    g(a, Kt, s.eye);\n    const u = f(e, r) / (j(e) * j(r)),\n          p = Math.cos(n(W.normalize(t(c)), 0, st));\n    m = -o(u) - Math.max(0, j(r) - i) / (p * i);\n  } else M(yt, s.eye, s.center), g(a, Kt, yt), m = -j(Kt) / i;\n\n  return y(a, a), h(a, a, j(Nt)), m;\n}\n\nconst yt = P();\n\nfunction gt(e, r, a, s) {\n  let i, c;\n  const m = Math.cos(n(W.normalize(t(s)), 0, st));\n  return i = r > a ? -(r - a) / (m * a) : r < -a ? Math.PI - (r + a) / (m * a) : o(r / a), c = e > a ? -(e - a) / (m * a) : e < -a ? Math.PI - (e + a) / (m * a) : o(e / a), (c - i) * a;\n}\n\nfunction bt(t, e, n, o, r, a, s, i, c, m) {\n  const p = gt(t[2], e[2], s[3], c),\n        l = m ? gt(t[0], e[0], s[3], 180) : e[0] - t[0],\n        h = Math.sin(i) * l - Math.cos(i) * p,\n        M = Math.cos(i) * l + Math.sin(i) * p;\n  y(Jt, r);\n  const g = m ? h / Math.sqrt(Math.abs(s[3] ** 2 - f(n, Jt) ** 2)) : h / s[3],\n        b = M / Math.sqrt(Math.abs(s[3] ** 2 - f(n, o) ** 2));\n  u(a, g, b);\n}\n\nfunction dt(t, e, n, o, r, a, s, i, c, m) {\n  g(Nt, t, e), H(a.up, a.eye, Gt, St, Vt), H([0, 0, 1], a.eye, Ht, Ut, Et), l(n, Ut), l(o, Ht), y(n, n), h(n, n, j(Nt)), U(t, y(St, St), y(Vt, Vt), y(Gt, Gt), qt), U(e, St, Vt, Gt, Ft), bt(qt, Ft, t, Ht, Ut, r, s, i, c, m);\n}\n\nfunction jt(t, e, n, o, r, a, m) {\n  s(Tt), s(Wt), s(Bt), i(Tt, Tt, r, o), i(Wt, Wt, m, a), c(Bt, Tt, Wt), M(e, t, n), b(e, e, Bt), d(e, e, n);\n}\n\nfunction vt(t, e, n, o, r, a) {\n  s(Tt), s(Wt), s(Bt), i(Tt, Tt, o, n), i(Wt, Wt, a, r), c(Bt, Tt, Wt), M(Jt, t.eye, e), b(Jt, Jt, Bt), t.eye = d(Jt, Jt, e), M(Jt, t.center, e), b(Jt, Jt, Bt), t.center = d(Jt, Jt, e), M(Jt, t.up, e), b(Jt, Jt, Bt), t.up = d(Jt, Jt, e);\n}\n\nfunction zt(t, e, n, o, r, a, s = at.Pole, i = at.Angle) {\n  const c = Math.abs(o) > Math.PI - i || Math.abs(o) < i,\n        m = Math.abs(t[2]) < n * s || Math.abs(e) > n;\n  return !!(c && m && a.aboveGround && r < at.Tilt);\n}\n\nfunction xt(t, e, n, o, r, a) {\n  if (a) I(n, o, Ct), Q(e, t, Ct);else {\n    const a = Mt(n, o, Ot, e, t[3], r);\n    Q(e, t, w(Ot, a));\n  }\n}\n\nfunction Pt(t, e, n, o, r, a, s) {\n  const i = s ? 20 : 1,\n        c = 1e-12;\n  let m, u;\n  l(Dt, o), Lt.copyFrom(e);\n\n  for (let p = 0; p < i && x(n, Dt) > c && (m = x(n, Dt), dt(n, Dt, Ut, Ht, Rt, Lt, t, r, a, s), vt(Lt, t, Ht, Rt[1], Ut, Rt[0]), jt(Dt, Dt, t, Ht, Rt[1], Ut, Rt[0]), u = x(n, Dt), u < m || 0 === p); p++) e.copyFrom(Lt);\n}\n\nfunction kt(e, n, o, r, a, s, i) {\n  zt(o, f(n.up, o), e[3], -W.normalize(t(a)), s, n, at.Pole, at.Angle) ? Pt(e, n, o, r, -W.normalize(t(a)), s, i) : xt(e, n, o, r, s, i);\n}\n\nfunction It(t, e, n, o, r, a) {\n  const {\n    eye: s\n  } = t;\n  H([0, 0, 1], s, Ht, Ut, Et);\n  const c = e.translation[0] * n.pan,\n        m = \"zoom\" === r.mode ? 0 : e.translation[1] * n.pan,\n        u = Math.max(Math.sqrt(Math.abs(1 - f(t.center, Ht) ** 2 / j(t.center) ** 2)), .5),\n        p = (Math.sin(a) * m + Math.cos(a) * c) / u,\n        l = -Math.cos(a) * m + Math.sin(a) * c;\n\n  switch (i(o.pan.matrix, o.pan.matrix, p, Ht), o.pan.enabled = !0, r.mode) {\n    case \"pan\":\n      i(o.pan.matrix, o.pan.matrix, l, Ut), o.pan.enabled = !0;\n      break;\n\n    case \"zoom\":\n      o.zoom = -e.translation[1] * n.zoom;\n  }\n}\n\nfunction wt(t, e, n, o, r) {\n  const {\n    eye: a,\n    viewRight: s\n  } = t,\n        c = g(C.get(), s, a),\n        m = e.translation[0] * n.pan;\n\n  switch (0 !== m && (i(o.pan.matrix, o.pan.matrix, -m, c), o.pan.enabled = !0), r.mode) {\n    case \"pan\":\n      {\n        const t = e.translation[1] * n.pan;\n        0 !== t && (i(o.pan.matrix, o.pan.matrix, t, s), o.pan.enabled = !0);\n        break;\n      }\n\n    case \"zoom\":\n      o.zoom = -e.translation[1] * n.zoom;\n  }\n}\n\nfunction At(e, n, o, r, a, s, i, c, m) {\n  zt(e.center, f(e.up, e.center), j(e.center), -W.normalize(t(s)), i, n) ? It(n, o, r, c, m, -W.normalize(t(a))) : wt(n, o, r, c, m);\n}\n\nconst Ht = P(),\n      Ut = P(),\n      Et = P(),\n      Gt = P(),\n      St = P(),\n      Vt = P(),\n      qt = P(),\n      Ft = P(),\n      Rt = p(),\n      Ct = A(),\n      Tt = m(),\n      Wt = m(),\n      Bt = m(),\n      Dt = P(),\n      Jt = P(),\n      Kt = P(),\n      Lt = new K(),\n      Nt = P(),\n      Ot = P(),\n      Qt = {\n  origin: P(),\n  direction: P()\n},\n      Xt = {\n  origin: P(),\n  direction: P()\n};\nexport { ot as NavigationMode, at as PreservingHeadingThreshold, st as TiltThresholdPanningSpeed, rt as VerticalPanTresholds, mt as applyPanPlanar, xt as applyPanSphericalDirectRotation, Pt as applyPanSphericalPreserveHeading, Q as applyRotation, vt as applyRotationWithTwoAxes, Z as applyZoomOnSphere, Y as applyZoomToPoint, tt as centroid, _ as centroidOnSphere, ct as decideNavigationMode, X as intersectPlaneFromScreenPoint, gt as lengthFromPoints, L as normalizeCoordinate, O as normalizeRotationDelta, nt as offSurfaceTiltToEyeTiltGlobal, et as onSurfaceTiltToEyeTiltGlobal, At as panMotionToRotationMatrix, kt as panToPosition, it as pickPointAndInitSphere, zt as preserveHeadingThreshold, jt as rotatePointAroundTwoAxes, Mt as rotationAngleAndAxisDirectRotation, dt as rotationAnglesAndAxesHeadingPreserving, bt as rotationAnglesHeadingPreserving, N as rotationFromPointsAroundAxis, pt as sphereOrPlanePointFromScreenPoint };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/state/utils/navigationUtils.js"],"names":["deg2rad","t","sign","e","clamp","n","acosClamped","o","isNone","r","createScreenPointArray","a","i","s","c","m","u","p","g","l","d","f","h","M","y","b","j","v","z","x","P","axis","k","fromPoints","I","wrapAxisAngle","w","create","A","coordinateSystemFromOneAxisAndNormalVector","H","vectorCoordinates","U","intersectRay","E","fromNormalAndOffset","G","S","V","q","F","angle","R","sv3d","C","sm4d","T","cyclicalPI","W","fromScreen","B","fromScreenAtEye","D","intersectScreen","J","K","L","fullWidth","pixelRatio","fullHeight","N","get","Math","atan2","O","PI","Q","Jt","eye","center","up","X","Qt","Y","abs","Z","getScreenCenter","$","distance","viewForward","_","tt","length","et","sin","radius","nt","ot","Vertical","Horizontal","rt","Elevation","Angle","at","Pole","Tilt","st","it","aboveGround","max","relativeElevation","pt","sphere","scenePickPoint","hasGeometryIntersection","ct","Xt","direction","mt","ut","lt","origin","ft","ht","Mt","Nt","Kt","cos","normalize","yt","gt","bt","sqrt","dt","Gt","St","Vt","Ht","Ut","Et","qt","Ft","jt","Tt","Wt","Bt","vt","zt","xt","Ct","Ot","Pt","Dt","Lt","copyFrom","Rt","kt","It","translation","pan","mode","matrix","enabled","zoom","wt","viewRight","At","NavigationMode","PreservingHeadingThreshold","TiltThresholdPanningSpeed","VerticalPanTresholds","applyPanPlanar","applyPanSphericalDirectRotation","applyPanSphericalPreserveHeading","applyRotation","applyRotationWithTwoAxes","applyZoomOnSphere","applyZoomToPoint","centroid","centroidOnSphere","decideNavigationMode","intersectPlaneFromScreenPoint","lengthFromPoints","normalizeCoordinate","normalizeRotationDelta","offSurfaceTiltToEyeTiltGlobal","onSurfaceTiltToEyeTiltGlobal","panMotionToRotationMatrix","panToPosition","pickPointAndInitSphere","preserveHeadingThreshold","rotatePointAroundTwoAxes","rotationAngleAndAxisDirectRotation","rotationAnglesAndAxesHeadingPreserving","rotationAnglesHeadingPreserving","rotationFromPointsAroundAxis","sphereOrPlanePointFromScreenPoint"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{deg2rad as t,sign as e,clamp as n,acosClamped as o}from\"../../../../core/mathUtils.js\";import{isNone as r}from\"../../../../core/maybe.js\";import{createScreenPointArray as a}from\"../../../../core/screenUtils.js\";import{i as s,c as i,m as c}from\"../../../../chunks/mat4.js\";import{c as m}from\"../../../../chunks/mat4f64.js\";import{s as u}from\"../../../../chunks/vec2.js\";import{a as p}from\"../../../../chunks/vec2f64.js\";import{g as l,d as f,a as h,f as M,n as y,c as g,m as b,b as d,l as j,e as v,s as z,h as x}from\"../../../../chunks/vec3.js\";import{c as P}from\"../../../../chunks/vec3f64.js\";import{axis as k,fromPoints as I,wrapAxisAngle as w,create as A}from\"../../../../geometry/support/axisAngle.js\";import{coordinateSystemFromOneAxisAndNormalVector as H,vectorCoordinates as U}from\"../../../../geometry/support/coordinateSystem.js\";import{intersectRay as E,fromNormalAndOffset as G,create as S}from\"../../../../geometry/support/plane.js\";import{b as V,i as q,c as F}from\"../../../../chunks/sphere.js\";import{angle as R}from\"../../../../geometry/support/vector.js\";import{sv3d as C,sm4d as T}from\"../../../../geometry/support/vectorStacks.js\";import{cyclicalPI as W}from\"../../support/mathUtils.js\";import{fromScreen as B,fromScreenAtEye as D}from\"../../support/geometryUtils/ray.js\";import{intersectScreen as J}from\"../../support/geometryUtils/sphere.js\";import K from\"../../webgl-engine/lib/Camera.js\";function L(t,e,n){return n[0]=e[0]/(t.fullWidth/t.pixelRatio),n[1]=e[1]/(t.fullHeight/t.pixelRatio),n}function N(t,e,n){const o=C.get(),r=C.get(),a=C.get();l(r,t),l(a,e);const s=f(r,n),i=f(a,n);h(o,n,s),M(r,r,o),y(r,r),h(o,n,i),M(a,a,o),y(a,a);const c=f(r,a);g(o,n,r);const m=f(a,o);return Math.atan2(m,c)}function O(t){for(;t>Math.PI;)t-=2*Math.PI;for(;t<-Math.PI;)t+=2*Math.PI;return t}function Q(t,e,n){const o=T.get();s(o),i(o,o,n[3],k(n)),M(Jt,t.eye,e),b(Jt,Jt,o),t.eye=d(Jt,Jt,e),M(Jt,t.center,e),b(Jt,Jt,o),t.center=d(Jt,Jt,e),t.up=b(Jt,t.up,o)}function X(t,e,n,o){return E(t,B(e,n,Qt),o)}function Y(t,e,n,o){const r=C.get();let a=1-n;M(r,e,t.eye);const s=j(r);let i=s*(1-a);a>=0&&i<o&&(i=o,a=-(i-s)/s),Math.abs(s-i)<1e-6||(h(r,r,a),t.eye=d(Jt,t.eye,r),t.center=v(Jt,t.center,e,a))}function Z(t,e,n){e.getScreenCenter($),J(t,e,$,Jt)&&(e.center=Jt);const o=e.distance,r=o*n;if(Math.abs(o-r)<1e-6)return;const a=h(C.get(),e.viewForward,r);e.eye=M(Jt,e.center,a)}const $=a();function _(t,e,n){tt(e,n),y(n,n),h(n,n,t)}function tt(t,e){z(e,0,0,0);for(const n of t)d(e,e,n);h(e,e,1/t.length)}function et(t,e,n,o){return Math.sin(t/j(e))*(n+o.radius)}function nt(t,e,n,o){return et(Math.PI/2,e,n,o)+(t-Math.PI/2)}var ot;!function(t){t[t.Vertical=0]=\"Vertical\",t[t.Horizontal=1]=\"Horizontal\"}(ot||(ot={}));const rt={Elevation:3e4,Angle:t(6)},at={Pole:.95,Angle:t(18),Tilt:45},st=t(80);function it(t,e,n,o,r){const a=P(),s=F();let i=!0,c=!0;return t.intersectScreen(n,a)?s[3]=j(a):(c=!1,e.aboveGround?s[3]=Math.max(j(e.center),.9*r.radius):s[3]=j(e.eye)-e.relativeElevation,o?pt(s,e,n,a):i=J(s,e,n,a)),{sphere:s,scenePickPoint:i?a:null,hasGeometryIntersection:c}}function ct(t,n,o,r){if(j(t.eye)-r.radius>rt.Elevation)return ot.Horizontal;if(!o)return ot.Vertical;D(t,n,Xt);return-e(t.relativeElevation)*(.5*Math.PI+R(t.eye,Xt.direction))<rt.Angle?ot.Vertical:ot.Horizontal}function mt(t,e,n){M(ut,n,e),t.eye=M(Jt,t.eye,ut),t.center=M(Jt,t.center,ut)}const ut=P();function pt(t,e,n,o){const a=D(e,n,Qt);return!r(a)&&(V(t,a,lt),q(t,a,o)?!(x(lt,a.origin)<x(o,a.origin))||(l(o,lt),!1):(M(ft,e.eye,e.center),y(ft,ft),G(ft,-f(y(ft,ft),lt),ht),E(ht,a,o),!1))}const lt=P(),ft=P(),ht=S();function Mt(e,r,a,s,i,c){let m;if(g(Nt,e,r),M(Kt,e,r),j(e)<=i||!s.aboveGround){g(a,Kt,s.eye);const u=f(e,r)/(j(e)*j(r)),p=Math.cos(n(W.normalize(t(c)),0,st));m=-o(u)-Math.max(0,j(r)-i)/(p*i)}else M(yt,s.eye,s.center),g(a,Kt,yt),m=-j(Kt)/i;return y(a,a),h(a,a,j(Nt)),m}const yt=P();function gt(e,r,a,s){let i,c;const m=Math.cos(n(W.normalize(t(s)),0,st));return i=r>a?-(r-a)/(m*a):r<-a?Math.PI-(r+a)/(m*a):o(r/a),c=e>a?-(e-a)/(m*a):e<-a?Math.PI-(e+a)/(m*a):o(e/a),(c-i)*a}function bt(t,e,n,o,r,a,s,i,c,m){const p=gt(t[2],e[2],s[3],c),l=m?gt(t[0],e[0],s[3],180):e[0]-t[0],h=Math.sin(i)*l-Math.cos(i)*p,M=Math.cos(i)*l+Math.sin(i)*p;y(Jt,r);const g=m?h/Math.sqrt(Math.abs(s[3]**2-f(n,Jt)**2)):h/s[3],b=M/Math.sqrt(Math.abs(s[3]**2-f(n,o)**2));u(a,g,b)}function dt(t,e,n,o,r,a,s,i,c,m){g(Nt,t,e),H(a.up,a.eye,Gt,St,Vt),H([0,0,1],a.eye,Ht,Ut,Et),l(n,Ut),l(o,Ht),y(n,n),h(n,n,j(Nt)),U(t,y(St,St),y(Vt,Vt),y(Gt,Gt),qt),U(e,St,Vt,Gt,Ft),bt(qt,Ft,t,Ht,Ut,r,s,i,c,m)}function jt(t,e,n,o,r,a,m){s(Tt),s(Wt),s(Bt),i(Tt,Tt,r,o),i(Wt,Wt,m,a),c(Bt,Tt,Wt),M(e,t,n),b(e,e,Bt),d(e,e,n)}function vt(t,e,n,o,r,a){s(Tt),s(Wt),s(Bt),i(Tt,Tt,o,n),i(Wt,Wt,a,r),c(Bt,Tt,Wt),M(Jt,t.eye,e),b(Jt,Jt,Bt),t.eye=d(Jt,Jt,e),M(Jt,t.center,e),b(Jt,Jt,Bt),t.center=d(Jt,Jt,e),M(Jt,t.up,e),b(Jt,Jt,Bt),t.up=d(Jt,Jt,e)}function zt(t,e,n,o,r,a,s=at.Pole,i=at.Angle){const c=Math.abs(o)>Math.PI-i||Math.abs(o)<i,m=Math.abs(t[2])<n*s||Math.abs(e)>n;return!!(c&&m&&a.aboveGround&&r<at.Tilt)}function xt(t,e,n,o,r,a){if(a)I(n,o,Ct),Q(e,t,Ct);else{const a=Mt(n,o,Ot,e,t[3],r);Q(e,t,w(Ot,a))}}function Pt(t,e,n,o,r,a,s){const i=s?20:1,c=1e-12;let m,u;l(Dt,o),Lt.copyFrom(e);for(let p=0;p<i&&x(n,Dt)>c&&(m=x(n,Dt),dt(n,Dt,Ut,Ht,Rt,Lt,t,r,a,s),vt(Lt,t,Ht,Rt[1],Ut,Rt[0]),jt(Dt,Dt,t,Ht,Rt[1],Ut,Rt[0]),u=x(n,Dt),u<m||0===p);p++)e.copyFrom(Lt)}function kt(e,n,o,r,a,s,i){zt(o,f(n.up,o),e[3],-W.normalize(t(a)),s,n,at.Pole,at.Angle)?Pt(e,n,o,r,-W.normalize(t(a)),s,i):xt(e,n,o,r,s,i)}function It(t,e,n,o,r,a){const{eye:s}=t;H([0,0,1],s,Ht,Ut,Et);const c=e.translation[0]*n.pan,m=\"zoom\"===r.mode?0:e.translation[1]*n.pan,u=Math.max(Math.sqrt(Math.abs(1-f(t.center,Ht)**2/j(t.center)**2)),.5),p=(Math.sin(a)*m+Math.cos(a)*c)/u,l=-Math.cos(a)*m+Math.sin(a)*c;switch(i(o.pan.matrix,o.pan.matrix,p,Ht),o.pan.enabled=!0,r.mode){case\"pan\":i(o.pan.matrix,o.pan.matrix,l,Ut),o.pan.enabled=!0;break;case\"zoom\":o.zoom=-e.translation[1]*n.zoom}}function wt(t,e,n,o,r){const{eye:a,viewRight:s}=t,c=g(C.get(),s,a),m=e.translation[0]*n.pan;switch(0!==m&&(i(o.pan.matrix,o.pan.matrix,-m,c),o.pan.enabled=!0),r.mode){case\"pan\":{const t=e.translation[1]*n.pan;0!==t&&(i(o.pan.matrix,o.pan.matrix,t,s),o.pan.enabled=!0);break}case\"zoom\":o.zoom=-e.translation[1]*n.zoom}}function At(e,n,o,r,a,s,i,c,m){zt(e.center,f(e.up,e.center),j(e.center),-W.normalize(t(s)),i,n)?It(n,o,r,c,m,-W.normalize(t(a))):wt(n,o,r,c,m)}const Ht=P(),Ut=P(),Et=P(),Gt=P(),St=P(),Vt=P(),qt=P(),Ft=P(),Rt=p(),Ct=A(),Tt=m(),Wt=m(),Bt=m(),Dt=P(),Jt=P(),Kt=P(),Lt=new K,Nt=P(),Ot=P(),Qt={origin:P(),direction:P()},Xt={origin:P(),direction:P()};export{ot as NavigationMode,at as PreservingHeadingThreshold,st as TiltThresholdPanningSpeed,rt as VerticalPanTresholds,mt as applyPanPlanar,xt as applyPanSphericalDirectRotation,Pt as applyPanSphericalPreserveHeading,Q as applyRotation,vt as applyRotationWithTwoAxes,Z as applyZoomOnSphere,Y as applyZoomToPoint,tt as centroid,_ as centroidOnSphere,ct as decideNavigationMode,X as intersectPlaneFromScreenPoint,gt as lengthFromPoints,L as normalizeCoordinate,O as normalizeRotationDelta,nt as offSurfaceTiltToEyeTiltGlobal,et as onSurfaceTiltToEyeTiltGlobal,At as panMotionToRotationMatrix,kt as panToPosition,it as pickPointAndInitSphere,zt as preserveHeadingThreshold,jt as rotatePointAroundTwoAxes,Mt as rotationAngleAndAxisDirectRotation,dt as rotationAnglesAndAxesHeadingPreserving,bt as rotationAnglesHeadingPreserving,N as rotationFromPointsAroundAxis,pt as sphereOrPlanePointFromScreenPoint};\n"]},"metadata":{},"sourceType":"module"}