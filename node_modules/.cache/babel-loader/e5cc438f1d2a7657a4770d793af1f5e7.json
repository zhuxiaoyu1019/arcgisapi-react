{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { glsl as e } from \"../../shaderModules/interfaces.js\";\n\nfunction r(r, t) {\n  r.fragment.uniforms.add(\"terrainDepthTexture\", \"sampler2D\"), r.fragment.uniforms.add(\"cameraNearFar\", \"vec2\"), r.fragment.uniforms.add(\"inverseViewport\", \"vec2\"), r.fragment.code.add(e`\n    // Compare the linearized depths of fragment and terrain. Discard fragments on the wrong side of the terrain.\n    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){\n\n      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);\n      if(fragmentDepth ${t.cullAboveGround ? \">\" : \"<=\"} terrainDepth){\n        discard;\n      }\n    }\n  `);\n}\n\nfunction t(e, r) {\n  r.multipassTerrainEnabled && r.terrainLinearDepthTexture && e.bindTexture(r.terrainLinearDepthTexture, \"terrainDepthTexture\");\n}\n\nexport { t as bindMultipassTerrainTexture, r as multipassTerrainTest };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js"],"names":["glsl","e","r","t","fragment","uniforms","add","code","cullAboveGround","multipassTerrainEnabled","terrainLinearDepthTexture","bindTexture","bindMultipassTerrainTexture","multipassTerrainTest"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,IAAI,IAAIC,CAAf,QAAqB,mCAArB;;AAAyD,SAASC,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;AAACD,EAAAA,CAAC,CAACE,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,qBAAxB,EAA8C,WAA9C,GAA2DJ,CAAC,CAACE,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,eAAxB,EAAwC,MAAxC,CAA3D,EAA2GJ,CAAC,CAACE,QAAF,CAAWC,QAAX,CAAoBC,GAApB,CAAwB,iBAAxB,EAA0C,MAA1C,CAA3G,EAA6JJ,CAAC,CAACE,QAAF,CAAWG,IAAX,CAAgBD,GAAhB,CAAoBL,CAAE;AAC5P;AACA;AACA;AACA;AACA,yBAAyBE,CAAC,CAACK,eAAF,GAAkB,GAAlB,GAAsB,IAAK;AACpD;AACA;AACA;AACA,GATsO,CAA7J;AASpE;;AAAA,SAASL,CAAT,CAAWF,CAAX,EAAaC,CAAb,EAAe;AAACA,EAAAA,CAAC,CAACO,uBAAF,IAA2BP,CAAC,CAACQ,yBAA7B,IAAwDT,CAAC,CAACU,WAAF,CAAcT,CAAC,CAACQ,yBAAhB,EAA0C,qBAA1C,CAAxD;AAAyH;;AAAA,SAAOP,CAAC,IAAIS,2BAAZ,EAAwCV,CAAC,IAAIW,oBAA7C","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function r(r,t){r.fragment.uniforms.add(\"terrainDepthTexture\",\"sampler2D\"),r.fragment.uniforms.add(\"cameraNearFar\",\"vec2\"),r.fragment.uniforms.add(\"inverseViewport\",\"vec2\"),r.fragment.code.add(e`\n    // Compare the linearized depths of fragment and terrain. Discard fragments on the wrong side of the terrain.\n    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){\n\n      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);\n      if(fragmentDepth ${t.cullAboveGround?\">\":\"<=\"} terrainDepth){\n        discard;\n      }\n    }\n  `)}function t(e,r){r.multipassTerrainEnabled&&r.terrainLinearDepthTexture&&e.bindTexture(r.terrainLinearDepthTexture,\"terrainDepthTexture\")}export{t as bindMultipassTerrainTexture,r as multipassTerrainTest};\n"]},"metadata":{},"sourceType":"module"}