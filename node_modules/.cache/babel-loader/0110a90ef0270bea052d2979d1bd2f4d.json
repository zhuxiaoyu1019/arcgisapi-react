{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { c as o } from \"../../../../../../chunks/mat3f64.js\";\nimport { c as r } from \"../../../../../../chunks/mat4f64.js\";\nimport { c as e } from \"../../../../../../chunks/vec3f64.js\";\nimport { PositionAttribute as i } from \"./PositionAttribute.glsl.js\";\nimport { DoublePrecision as m } from \"../util/DoublePrecision.glsl.js\";\nimport { glsl as a } from \"../../shaderModules/interfaces.js\";\n\nfunction d(o, r) {\n  o.include(i), o.vertex.include(m, r), o.varyings.add(\"vPositionWorldCameraRelative\", \"vec3\"), o.varyings.add(\"vPosition_view\", \"vec3\"), o.vertex.uniforms.add(\"uTransform_WorldFromModel_RS\", \"mat3\"), o.vertex.uniforms.add(\"uTransform_WorldFromModel_TH\", \"vec3\"), o.vertex.uniforms.add(\"uTransform_WorldFromModel_TL\", \"vec3\"), o.vertex.uniforms.add(\"uTransform_WorldFromView_TH\", \"vec3\"), o.vertex.uniforms.add(\"uTransform_WorldFromView_TL\", \"vec3\"), o.vertex.uniforms.add(\"uTransform_ViewFromCameraRelative_RS\", \"mat3\"), o.vertex.uniforms.add(\"uTransform_ProjFromView\", \"mat4\"), o.vertex.code.add(a`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = uTransform_WorldFromModel_RS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\nuTransform_WorldFromModel_TL,\nuTransform_WorldFromModel_TH,\n-uTransform_WorldFromView_TL,\n-uTransform_WorldFromView_TH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}\nvec3 position_view() {\nreturn uTransform_ViewFromCameraRelative_RS * positionWorldCameraRelative();\n}\nvoid forwardPosition() {\nvPositionWorldCameraRelative = positionWorldCameraRelative();\nvPosition_view = position_view();\ngl_Position = uTransform_ProjFromView * vec4(vPosition_view, 1.0);\n}\nvec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`), o.fragment.uniforms.add(\"uTransform_WorldFromView_TL\", \"vec3\"), o.fragment.code.add(a`vec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`);\n}\n\n!function (i) {\n  class m {\n    constructor() {\n      this.worldFromModel_RS = o(), this.worldFromModel_TH = e(), this.worldFromModel_TL = e();\n    }\n\n  }\n\n  i.ModelTransform = m;\n\n  class a {\n    constructor() {\n      this.worldFromView_TH = e(), this.worldFromView_TL = e(), this.viewFromCameraRelative_RS = o(), this.projFromView = r();\n    }\n\n  }\n\n  function d(o, r) {\n    o.setUniformMatrix3fv(\"uTransform_WorldFromModel_RS\", r.worldFromModel_RS), o.setUniform3fv(\"uTransform_WorldFromModel_TH\", r.worldFromModel_TH), o.setUniform3fv(\"uTransform_WorldFromModel_TL\", r.worldFromModel_TL);\n  }\n\n  function s(o, r) {\n    o.setUniform3fv(\"uTransform_WorldFromView_TH\", r.worldFromView_TH), o.setUniform3fv(\"uTransform_WorldFromView_TL\", r.worldFromView_TL), o.setUniformMatrix4fv(\"uTransform_ProjFromView\", r.projFromView), o.setUniformMatrix3fv(\"uTransform_ViewFromCameraRelative_RS\", r.viewFromCameraRelative_RS);\n  }\n\n  i.ViewProjectionTransform = a, i.bindModelTransform = d, i.bindViewProjTransform = s;\n}(d || (d = {}));\nexport { d as VertexPosition };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js"],"names":["c","o","r","e","PositionAttribute","i","DoublePrecision","m","glsl","a","d","include","vertex","varyings","add","uniforms","code","fragment","constructor","worldFromModel_RS","worldFromModel_TH","worldFromModel_TL","ModelTransform","worldFromView_TH","worldFromView_TL","viewFromCameraRelative_RS","projFromView","setUniformMatrix3fv","setUniform3fv","s","setUniformMatrix4fv","ViewProjectionTransform","bindModelTransform","bindViewProjTransform","VertexPosition"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{c as o}from\"../../../../../../chunks/mat3f64.js\";import{c as r}from\"../../../../../../chunks/mat4f64.js\";import{c as e}from\"../../../../../../chunks/vec3f64.js\";import{PositionAttribute as i}from\"./PositionAttribute.glsl.js\";import{DoublePrecision as m}from\"../util/DoublePrecision.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function d(o,r){o.include(i),o.vertex.include(m,r),o.varyings.add(\"vPositionWorldCameraRelative\",\"vec3\"),o.varyings.add(\"vPosition_view\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_ViewFromCameraRelative_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_ProjFromView\",\"mat4\"),o.vertex.code.add(a`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = uTransform_WorldFromModel_RS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\nuTransform_WorldFromModel_TL,\nuTransform_WorldFromModel_TH,\n-uTransform_WorldFromView_TL,\n-uTransform_WorldFromView_TH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}\nvec3 position_view() {\nreturn uTransform_ViewFromCameraRelative_RS * positionWorldCameraRelative();\n}\nvoid forwardPosition() {\nvPositionWorldCameraRelative = positionWorldCameraRelative();\nvPosition_view = position_view();\ngl_Position = uTransform_ProjFromView * vec4(vPosition_view, 1.0);\n}\nvec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`),o.fragment.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.fragment.code.add(a`vec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`)}!function(i){class m{constructor(){this.worldFromModel_RS=o(),this.worldFromModel_TH=e(),this.worldFromModel_TL=e()}}i.ModelTransform=m;class a{constructor(){this.worldFromView_TH=e(),this.worldFromView_TL=e(),this.viewFromCameraRelative_RS=o(),this.projFromView=r()}}function d(o,r){o.setUniformMatrix3fv(\"uTransform_WorldFromModel_RS\",r.worldFromModel_RS),o.setUniform3fv(\"uTransform_WorldFromModel_TH\",r.worldFromModel_TH),o.setUniform3fv(\"uTransform_WorldFromModel_TL\",r.worldFromModel_TL)}function s(o,r){o.setUniform3fv(\"uTransform_WorldFromView_TH\",r.worldFromView_TH),o.setUniform3fv(\"uTransform_WorldFromView_TL\",r.worldFromView_TL),o.setUniformMatrix4fv(\"uTransform_ProjFromView\",r.projFromView),o.setUniformMatrix3fv(\"uTransform_ViewFromCameraRelative_RS\",r.viewFromCameraRelative_RS)}i.ViewProjectionTransform=a,i.bindModelTransform=d,i.bindViewProjTransform=s}(d||(d={}));export{d as VertexPosition};\n"]},"metadata":{},"sourceType":"module"}