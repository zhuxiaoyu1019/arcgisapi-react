{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../../geometry.js\";\nimport { result as e } from \"../../../core/asyncUtils.js\";\nimport r from \"../../../core/Error.js\";\nimport { getMetersPerUnitForSR as t } from \"../../../core/unitUtils.js\";\nimport { getReferenceEllipsoid as o } from \"../../../geometry/projectionEllipsoid.js\";\nimport { create as i } from \"../../../portal/support/geometryServiceUtils.js\";\nimport s from \"../../../rest/support/ProjectParameters.js\";\nimport a from \"../../../geometry/Point.js\";\nimport m from \"../../../geometry/SpatialReference.js\";\n\nclass c {\n  constructor(r, i, s = null) {\n    this.spatialReference = i, this.unitInMeters = t(this.spatialReference, o(this.spatialReference).metersPerDegree), this._geometryServicePromise = e(this.loadGeometryService(r, s));\n  }\n\n  async loadGeometryService(e, t) {\n    if (t) return t;\n\n    try {\n      return await i(e && e.get(\"portalItem\"));\n    } catch {\n      throw new r(\"mapcoordshelper:missing-geometry-service\", \"Must specify geometryService in esri/config\");\n    }\n  }\n\n  async awaitGeometryService() {\n    const e = await this._geometryServicePromise;\n    if (!0 === e.ok) return e.value;\n    throw e.error;\n  }\n\n  async toGeographic(e) {\n    const r = await this.awaitGeometryService();\n    let t,\n        o = !0;\n    Array.isArray(e[0]) && \"number\" != typeof e[0] ? t = e : (t = [e], o = !1);\n    const i = t.map(e => e instanceof a ? e : new a(e, this.spatialReference)),\n          c = new s({\n      geometries: i,\n      outSpatialReference: m.WGS84\n    }),\n          p = (await r.project(c)).map(e => \"point\" === e.type ? [e.x, e.y] : void 0);\n    return o ? p : p[0];\n  }\n\n}\n\nexport default c;\nexport { c as MapCoordsHelper };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/support/MapCoordsHelper.js"],"names":["result","e","r","getMetersPerUnitForSR","t","getReferenceEllipsoid","o","create","i","s","a","m","c","constructor","spatialReference","unitInMeters","metersPerDegree","_geometryServicePromise","loadGeometryService","get","awaitGeometryService","ok","value","error","toGeographic","Array","isArray","map","geometries","outSpatialReference","WGS84","p","project","type","x","y","MapCoordsHelper"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAM,sBAAN;AAA6B,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,6BAAvB;AAAqD,OAAOC,CAAP,MAAa,wBAAb;AAAsC,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,4BAAtC;AAAmE,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,0CAAtC;AAAiF,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,iDAAvB;AAAyE,OAAOC,CAAP,MAAa,4CAAb;AAA0D,OAAOC,CAAP,MAAa,4BAAb;AAA0C,OAAOC,CAAP,MAAa,uCAAb;;AAAqD,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACX,CAAD,EAAGM,CAAH,EAAKC,CAAC,GAAC,IAAP,EAAY;AAAC,SAAKK,gBAAL,GAAsBN,CAAtB,EAAwB,KAAKO,YAAL,GAAkBX,CAAC,CAAC,KAAKU,gBAAN,EAAuBR,CAAC,CAAC,KAAKQ,gBAAN,CAAD,CAAyBE,eAAhD,CAA3C,EAA4G,KAAKC,uBAAL,GAA6BhB,CAAC,CAAC,KAAKiB,mBAAL,CAAyBhB,CAAzB,EAA2BO,CAA3B,CAAD,CAA1I;AAA0K;;AAAyB,QAAnBS,mBAAmB,CAACjB,CAAD,EAAGG,CAAH,EAAK;AAAC,QAAGA,CAAH,EAAK,OAAOA,CAAP;;AAAS,QAAG;AAAC,aAAO,MAAMI,CAAC,CAACP,CAAC,IAAEA,CAAC,CAACkB,GAAF,CAAM,YAAN,CAAJ,CAAd;AAAuC,KAA3C,CAA2C,MAAK;AAAC,YAAM,IAAIjB,CAAJ,CAAM,0CAAN,EAAiD,6CAAjD,CAAN;AAAsG;AAAC;;AAA0B,QAApBkB,oBAAoB,GAAE;AAAC,UAAMnB,CAAC,GAAC,MAAM,KAAKgB,uBAAnB;AAA2C,QAAG,CAAC,CAAD,KAAKhB,CAAC,CAACoB,EAAV,EAAa,OAAOpB,CAAC,CAACqB,KAAT;AAAe,UAAMrB,CAAC,CAACsB,KAAR;AAAc;;AAAkB,QAAZC,YAAY,CAACvB,CAAD,EAAG;AAAC,UAAMC,CAAC,GAAC,MAAM,KAAKkB,oBAAL,EAAd;AAA0C,QAAIhB,CAAJ;AAAA,QAAME,CAAC,GAAC,CAAC,CAAT;AAAWmB,IAAAA,KAAK,CAACC,OAAN,CAAczB,CAAC,CAAC,CAAD,CAAf,KAAqB,YAAU,OAAOA,CAAC,CAAC,CAAD,CAAvC,GAA2CG,CAAC,GAACH,CAA7C,IAAgDG,CAAC,GAAC,CAACH,CAAD,CAAF,EAAMK,CAAC,GAAC,CAAC,CAAzD;AAA4D,UAAME,CAAC,GAACJ,CAAC,CAACuB,GAAF,CAAO1B,CAAC,IAAEA,CAAC,YAAYS,CAAb,GAAeT,CAAf,GAAiB,IAAIS,CAAJ,CAAMT,CAAN,EAAQ,KAAKa,gBAAb,CAA3B,CAAR;AAAA,UAAoEF,CAAC,GAAC,IAAIH,CAAJ,CAAM;AAACmB,MAAAA,UAAU,EAACpB,CAAZ;AAAcqB,MAAAA,mBAAmB,EAAClB,CAAC,CAACmB;AAApC,KAAN,CAAtE;AAAA,UAAwHC,CAAC,GAAC,CAAC,MAAM7B,CAAC,CAAC8B,OAAF,CAAUpB,CAAV,CAAP,EAAqBe,GAArB,CAA0B1B,CAAC,IAAE,YAAUA,CAAC,CAACgC,IAAZ,GAAiB,CAAChC,CAAC,CAACiC,CAAH,EAAKjC,CAAC,CAACkC,CAAP,CAAjB,GAA2B,KAAK,CAA7D,CAA1H;AAA2L,WAAO7B,CAAC,GAACyB,CAAD,GAAGA,CAAC,CAAC,CAAD,CAAZ;AAAgB;;AAA50B;;AAA60B,eAAenB,CAAf;AAAiB,SAAOA,CAAC,IAAIwB,eAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{result as e}from\"../../../core/asyncUtils.js\";import r from\"../../../core/Error.js\";import{getMetersPerUnitForSR as t}from\"../../../core/unitUtils.js\";import{getReferenceEllipsoid as o}from\"../../../geometry/projectionEllipsoid.js\";import{create as i}from\"../../../portal/support/geometryServiceUtils.js\";import s from\"../../../rest/support/ProjectParameters.js\";import a from\"../../../geometry/Point.js\";import m from\"../../../geometry/SpatialReference.js\";class c{constructor(r,i,s=null){this.spatialReference=i,this.unitInMeters=t(this.spatialReference,o(this.spatialReference).metersPerDegree),this._geometryServicePromise=e(this.loadGeometryService(r,s))}async loadGeometryService(e,t){if(t)return t;try{return await i(e&&e.get(\"portalItem\"))}catch{throw new r(\"mapcoordshelper:missing-geometry-service\",\"Must specify geometryService in esri/config\")}}async awaitGeometryService(){const e=await this._geometryServicePromise;if(!0===e.ok)return e.value;throw e.error}async toGeographic(e){const r=await this.awaitGeometryService();let t,o=!0;Array.isArray(e[0])&&\"number\"!=typeof e[0]?t=e:(t=[e],o=!1);const i=t.map((e=>e instanceof a?e:new a(e,this.spatialReference))),c=new s({geometries:i,outSpatialReference:m.WGS84}),p=(await r.project(c)).map((e=>\"point\"===e.type?[e.x,e.y]:void 0));return o?p:p[0]}}export default c;export{c as MapCoordsHelper};\n"]},"metadata":{},"sourceType":"module"}