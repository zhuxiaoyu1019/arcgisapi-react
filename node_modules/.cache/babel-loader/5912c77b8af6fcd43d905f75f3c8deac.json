{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"./TileCache.js\";\nimport i from \"./TileCoverage.js\";\nimport t from \"./TileKey.js\";\nconst s = new t(0, 0, 0, 0),\n      l = new Map(),\n      a = [],\n      h = [];\n\nclass c {\n  constructor(i) {\n    this._previousScale = Number.POSITIVE_INFINITY, this.cachePolicy = \"keep\", this.coveragePolicy = \"closest\", this.resampling = !0, this.tileIndex = new Map(), this.tiles = [], this.buffer = 192, this.acquireTile = i.acquireTile, this.releaseTile = i.releaseTile, this.tileInfoView = i.tileInfoView, this.resampling = null == i.resampling || !!i.resampling, i.cachePolicy && (this.cachePolicy = i.cachePolicy), i.coveragePolicy && (this.coveragePolicy = i.coveragePolicy), null != i.buffer && (this.buffer = i.buffer), i.cacheSize && (this._tileCache = new e(i.cacheSize, this.tileInfoView, e => {\n      this.releaseTile(e);\n    }));\n  }\n\n  destroy() {\n    this.tileIndex.clear();\n  }\n\n  update(e) {\n    const {\n      resampling: t,\n      tileIndex: c\n    } = this,\n          o = this.tileInfoView.getTileCoverage(e.state, this.buffer, this.coveragePolicy);\n    if (h.length = 0, a.length = 0, l.clear(), !o) return;\n    const {\n      minScale: r,\n      maxScale: n\n    } = this.tileInfoView.tileInfo,\n          {\n      spans: f,\n      lodInfo: d\n    } = o,\n          {\n      level: u\n    } = d,\n          {\n      scale: p,\n      center: g,\n      resolution: y\n    } = e.state,\n          I = !e.stationary && p > this._previousScale;\n    if (this._previousScale = p, this.tiles.length = 0, !t && (p > r || p < n)) return this.tiles.length = 0, l.clear(), c.forEach(e => {\n      this.releaseTile(e);\n    }), c.clear(), h.length = 0, a.length = 0, l.clear(), i.pool.release(o), !0;\n    c.forEach(e => e.visible = !0);\n    let T = 0,\n        _ = 0;\n    if (f.length > 0) for (const {\n      row: i,\n      colFrom: a,\n      colTo: h\n    } of f) for (let e = a; e <= h; e++) {\n      T++;\n      const t = s.set(u, i, d.normalizeCol(e), d.getWorldForColumn(e)).id;\n\n      if (c.has(t)) {\n        const e = c.get(t);\n        e.isReady ? (l.set(t, e), _++) : I || this._addParentTile(t, l);\n      } else {\n        let e;\n\n        if (this._tileCache && this._tileCache.has(t)) {\n          if (e = this._tileCache.pop(t), this.tileIndex.set(t, e), e.isReady) {\n            l.set(t, e), _++;\n            continue;\n          }\n        } else e = this.acquireTile(s), this.tileIndex.set(t, e);\n\n        I || this._addParentTile(t, l);\n      }\n    }\n    const C = _ === T;\n    c.forEach((e, i) => {\n      if (s.set(i), l.has(i)) return;\n      const t = this.tileInfoView.intersects(o, s),\n            c = \"purge\" === this.cachePolicy ? s.level !== u : s.level > u;\n      !t || !I && C ? !c && t || a.push(i) : e.isReady ? h.push(i) : c && a.push(i);\n    });\n\n    for (const i of h) {\n      const e = c.get(i);\n      e && e.isReady && l.set(i, e);\n    }\n\n    for (const i of a) {\n      const e = c.get(i);\n      this._tileCache ? this._tileCache.add(e) : this.releaseTile(e), c.delete(i);\n    }\n\n    return l.forEach(e => this.tiles.push(e)), c.forEach(e => {\n      l.has(e.key.id) || (e.visible = !1);\n    }), this._tileCache && this._tileCache.prune(u, g, y), i.pool.release(o), l.clear(), C;\n  }\n\n  clear(e = !0) {\n    const {\n      tileIndex: i\n    } = this;\n    e && i.forEach(e => {\n      this.releaseTile(e);\n    }), i.clear();\n  }\n\n  updateCacheSize(e) {\n    this._tileCache && (this._tileCache.maxSize = e);\n  }\n\n  _addParentTile(e, i) {\n    let t = e,\n        s = null;\n\n    for (; t = this.tileInfoView.getTileParentId(t), t;) if (this.tileIndex.has(t)) {\n      if (s = this.tileIndex.get(t), s && s.isReady) {\n        i.has(s.key.id) || i.set(s.key.id, s);\n        break;\n      }\n    } else if (this._tileCache && this._tileCache.has(t) && (s = this._tileCache.pop(t), this.tileIndex.set(t, s), s && s.isReady)) {\n      i.has(s.key.id) || i.set(s.key.id, s);\n      break;\n    }\n  }\n\n}\n\nexport default c;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js"],"names":["e","i","t","s","l","Map","a","h","c","constructor","_previousScale","Number","POSITIVE_INFINITY","cachePolicy","coveragePolicy","resampling","tileIndex","tiles","buffer","acquireTile","releaseTile","tileInfoView","cacheSize","_tileCache","destroy","clear","update","o","getTileCoverage","state","length","minScale","r","maxScale","n","tileInfo","spans","f","lodInfo","d","level","u","scale","p","center","g","resolution","y","I","stationary","forEach","pool","release","visible","T","_","row","colFrom","colTo","set","normalizeCol","getWorldForColumn","id","has","get","isReady","_addParentTile","pop","C","intersects","push","add","delete","key","prune","updateCacheSize","maxSize","getTileParentId"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"./TileCache.js\";import i from\"./TileCoverage.js\";import t from\"./TileKey.js\";const s=new t(0,0,0,0),l=new Map,a=[],h=[];class c{constructor(i){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy=\"keep\",this.coveragePolicy=\"closest\",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=i.acquireTile,this.releaseTile=i.releaseTile,this.tileInfoView=i.tileInfoView,this.resampling=null==i.resampling||!!i.resampling,i.cachePolicy&&(this.cachePolicy=i.cachePolicy),i.coveragePolicy&&(this.coveragePolicy=i.coveragePolicy),null!=i.buffer&&(this.buffer=i.buffer),i.cacheSize&&(this._tileCache=new e(i.cacheSize,this.tileInfoView,(e=>{this.releaseTile(e)})))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:c}=this,o=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(h.length=0,a.length=0,l.clear(),!o)return;const{minScale:r,maxScale:n}=this.tileInfoView.tileInfo,{spans:f,lodInfo:d}=o,{level:u}=d,{scale:p,center:g,resolution:y}=e.state,I=!e.stationary&&p>this._previousScale;if(this._previousScale=p,this.tiles.length=0,!t&&(p>r||p<n))return this.tiles.length=0,l.clear(),c.forEach((e=>{this.releaseTile(e)})),c.clear(),h.length=0,a.length=0,l.clear(),i.pool.release(o),!0;c.forEach((e=>e.visible=!0));let T=0,_=0;if(f.length>0)for(const{row:i,colFrom:a,colTo:h}of f)for(let e=a;e<=h;e++){T++;const t=s.set(u,i,d.normalizeCol(e),d.getWorldForColumn(e)).id;if(c.has(t)){const e=c.get(t);e.isReady?(l.set(t,e),_++):I||this._addParentTile(t,l)}else{let e;if(this._tileCache&&this._tileCache.has(t)){if(e=this._tileCache.pop(t),this.tileIndex.set(t,e),e.isReady){l.set(t,e),_++;continue}}else e=this.acquireTile(s),this.tileIndex.set(t,e);I||this._addParentTile(t,l)}}const C=_===T;c.forEach(((e,i)=>{if(s.set(i),l.has(i))return;const t=this.tileInfoView.intersects(o,s),c=\"purge\"===this.cachePolicy?s.level!==u:s.level>u;!t||!I&&C?!c&&t||a.push(i):e.isReady?h.push(i):c&&a.push(i)}));for(const i of h){const e=c.get(i);e&&e.isReady&&l.set(i,e)}for(const i of a){const e=c.get(i);this._tileCache?this._tileCache.add(e):this.releaseTile(e),c.delete(i)}return l.forEach((e=>this.tiles.push(e))),c.forEach((e=>{l.has(e.key.id)||(e.visible=!1)})),this._tileCache&&this._tileCache.prune(u,g,y),i.pool.release(o),l.clear(),C}clear(e=!0){const{tileIndex:i}=this;e&&i.forEach((e=>{this.releaseTile(e)})),i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let t=e,s=null;for(;t=this.tileInfoView.getTileParentId(t),t;)if(this.tileIndex.has(t)){if(s=this.tileIndex.get(t),s&&s.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache&&this._tileCache.has(t)&&(s=this._tileCache.pop(t),this.tileIndex.set(t,s),s&&s.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}}export default c;\n"]},"metadata":{},"sourceType":"module"}