{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { d as t } from \"../../../../chunks/mat4.js\";\nimport { c as r } from \"../../../../chunks/mat4f64.js\";\nimport { e as i, a as s, l as e, b as a, g as n, n as o } from \"../../../../chunks/vec3.js\";\nimport { c as h, a as d } from \"../../../../chunks/vec3f64.js\";\nimport { t as c } from \"../../../../chunks/vec4.js\";\nimport { c as m } from \"../../../../chunks/vec4f64.js\";\nimport { e as l } from \"../../../../chunks/boundedPlane.js\";\nimport { create as u, copy as p } from \"../../../../geometry/support/ray.js\";\nimport { Object3D as y } from \"./Object3D.js\";\n\nfunction g(t) {\n  return (r, s, e) => (i(v, r, s, e), !l(t, v));\n}\n\nclass f {\n  constructor() {\n    this.min = new j(), this.max = new j(), this.hud = new j(), this.ground = new j();\n  }\n\n  init(t) {\n    this.min.init(t), this.max.init(t), this.hud.init(t), this.ground.init(t), this.all = [];\n  }\n\n}\n\nclass j {\n  constructor(t) {\n    this.normal = h(), this.transformation = r(), this._ray = u(), this.init(t);\n  }\n\n  get ray() {\n    return this._ray;\n  }\n\n  get hasIntersectionPoint() {\n    return null != this.dist;\n  }\n\n  get distanceInRenderSpace() {\n    if (null != this.dist) return s(O, this.ray.direction, this.dist), e(O);\n  }\n\n  getIntersectionPoint(t) {\n    return !!this.hasIntersectionPoint && (s(O, this.ray.direction, this.dist), a(t, this.ray.origin, O), !0);\n  }\n\n  getTransformedNormal(t) {\n    return n(I, this.normal), I[3] = 0, c(I, I, this.transformation), n(t, I), o(t, t), t;\n  }\n\n  init(t) {\n    this.dist = void 0, this.target = void 0, this.name = void 0, this.drapedLayerOrder = void 0, this.drapedLayerGraphicOrder = void 0, this.center = null, this.geometryId = null, this.triangleNr = null, this.intersector = \"Stage\", t ? p(t, this._ray) : this._ray = u();\n  }\n\n  set(r, i, s, e, a, o, h, c, m, l) {\n    r instanceof y && (r = {\n      type: \"stage\",\n      obj: r\n    }), this.dist = s, n(this.normal, e), t(this.transformation, a), this.target = r, this.name = i, this.drapedLayerOrder = o, this.center = h ? d(h) : null, this.geometryId = c, this.triangleNr = m, this.drapedLayerGraphicOrder = l;\n  }\n\n  copyFrom(r) {\n    p(r.ray, this._ray), this.dist = r.dist, this.target = r.target, this.name = r.name, this.drapedLayerOrder = r.drapedLayerOrder, this.center = r.center ? d(r.center) : null, this.geometryId = r.geometryId, this.triangleNr = r.triangleNr, this.intersector = r.intersector, this.drapedLayerGraphicOrder = r.drapedLayerGraphicOrder, n(this.normal, r.normal), t(this.transformation, r.transformation);\n  }\n\n}\n\nconst v = h(),\n      O = h(),\n      I = m();\nexport { j as IntersectorResult, f as IntersectorResults, g as sliceFilterPredicate };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js"],"names":["d","t","c","r","e","i","a","s","l","b","g","n","o","h","m","create","u","copy","p","Object3D","y","v","f","constructor","min","j","max","hud","ground","init","all","normal","transformation","_ray","ray","hasIntersectionPoint","dist","distanceInRenderSpace","O","direction","getIntersectionPoint","origin","getTransformedNormal","I","target","name","drapedLayerOrder","drapedLayerGraphicOrder","center","geometryId","triangleNr","intersector","set","type","obj","copyFrom","IntersectorResult","IntersectorResults","sliceFilterPredicate"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,EAAqBC,CAAC,IAAIJ,CAA1B,EAA4BK,CAAC,IAAIH,CAAjC,EAAmCI,CAAC,IAAIC,CAAxC,EAA0CA,CAAC,IAAIC,CAA/C,QAAqD,4BAArD;AAAkF,SAAOV,CAAC,IAAIW,CAAZ,EAAcP,CAAC,IAAIN,CAAnB,QAAyB,+BAAzB;AAAyD,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOA,CAAC,IAAIY,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOV,CAAC,IAAII,CAAZ,QAAkB,oCAAlB;AAAuD,SAAOO,MAAM,IAAIC,CAAjB,EAAmBC,IAAI,IAAIC,CAA3B,QAAiC,qCAAjC;AAAuE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,eAAzB;;AAAyC,SAASV,CAAT,CAAWT,CAAX,EAAa;AAAC,SAAM,CAACE,CAAD,EAAGI,CAAH,EAAKH,CAAL,MAAUC,CAAC,CAACgB,CAAD,EAAGlB,CAAH,EAAKI,CAAL,EAAOH,CAAP,CAAD,EAAW,CAACI,CAAC,CAACP,CAAD,EAAGoB,CAAH,CAAvB,CAAN;AAAoC;;AAAA,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,GAAE;AAAC,SAAKC,GAAL,GAAS,IAAIC,CAAJ,EAAT,EAAe,KAAKC,GAAL,GAAS,IAAID,CAAJ,EAAxB,EAA8B,KAAKE,GAAL,GAAS,IAAIF,CAAJ,EAAvC,EAA6C,KAAKG,MAAL,GAAY,IAAIH,CAAJ,EAAzD;AAA+D;;AAAAI,EAAAA,IAAI,CAAC5B,CAAD,EAAG;AAAC,SAAKuB,GAAL,CAASK,IAAT,CAAc5B,CAAd,GAAiB,KAAKyB,GAAL,CAASG,IAAT,CAAc5B,CAAd,CAAjB,EAAkC,KAAK0B,GAAL,CAASE,IAAT,CAAc5B,CAAd,CAAlC,EAAmD,KAAK2B,MAAL,CAAYC,IAAZ,CAAiB5B,CAAjB,CAAnD,EAAuE,KAAK6B,GAAL,GAAS,EAAhF;AAAmF;;AAAzK;;AAA0K,MAAML,CAAN,CAAO;AAACF,EAAAA,WAAW,CAACtB,CAAD,EAAG;AAAC,SAAK8B,MAAL,GAAYlB,CAAC,EAAb,EAAgB,KAAKmB,cAAL,GAAoB7B,CAAC,EAArC,EAAwC,KAAK8B,IAAL,GAAUjB,CAAC,EAAnD,EAAsD,KAAKa,IAAL,CAAU5B,CAAV,CAAtD;AAAmE;;AAAO,MAAHiC,GAAG,GAAE;AAAC,WAAO,KAAKD,IAAZ;AAAiB;;AAAwB,MAApBE,oBAAoB,GAAE;AAAC,WAAO,QAAM,KAAKC,IAAlB;AAAuB;;AAAyB,MAArBC,qBAAqB,GAAE;AAAC,QAAG,QAAM,KAAKD,IAAd,EAAmB,OAAO7B,CAAC,CAAC+B,CAAD,EAAG,KAAKJ,GAAL,CAASK,SAAZ,EAAsB,KAAKH,IAA3B,CAAD,EAAkChC,CAAC,CAACkC,CAAD,CAA1C;AAA8C;;AAAAE,EAAAA,oBAAoB,CAACvC,CAAD,EAAG;AAAC,WAAM,CAAC,CAAC,KAAKkC,oBAAP,KAA8B5B,CAAC,CAAC+B,CAAD,EAAG,KAAKJ,GAAL,CAASK,SAAZ,EAAsB,KAAKH,IAA3B,CAAD,EAAkC9B,CAAC,CAACL,CAAD,EAAG,KAAKiC,GAAL,CAASO,MAAZ,EAAmBH,CAAnB,CAAnC,EAAyD,CAAC,CAAxF,CAAN;AAAiG;;AAAAI,EAAAA,oBAAoB,CAACzC,CAAD,EAAG;AAAC,WAAOU,CAAC,CAACgC,CAAD,EAAG,KAAKZ,MAAR,CAAD,EAAiBY,CAAC,CAAC,CAAD,CAAD,GAAK,CAAtB,EAAwBzC,CAAC,CAACyC,CAAD,EAAGA,CAAH,EAAK,KAAKX,cAAV,CAAzB,EAAmDrB,CAAC,CAACV,CAAD,EAAG0C,CAAH,CAApD,EAA0D/B,CAAC,CAACX,CAAD,EAAGA,CAAH,CAA3D,EAAiEA,CAAxE;AAA0E;;AAAA4B,EAAAA,IAAI,CAAC5B,CAAD,EAAG;AAAC,SAAKmC,IAAL,GAAU,KAAK,CAAf,EAAiB,KAAKQ,MAAL,GAAY,KAAK,CAAlC,EAAoC,KAAKC,IAAL,GAAU,KAAK,CAAnD,EAAqD,KAAKC,gBAAL,GAAsB,KAAK,CAAhF,EAAkF,KAAKC,uBAAL,GAA6B,KAAK,CAApH,EAAsH,KAAKC,MAAL,GAAY,IAAlI,EAAuI,KAAKC,UAAL,GAAgB,IAAvJ,EAA4J,KAAKC,UAAL,GAAgB,IAA5K,EAAiL,KAAKC,WAAL,GAAiB,OAAlM,EAA0MlD,CAAC,GAACiB,CAAC,CAACjB,CAAD,EAAG,KAAKgC,IAAR,CAAF,GAAgB,KAAKA,IAAL,GAAUjB,CAAC,EAAtO;AAAyO;;AAAAoC,EAAAA,GAAG,CAACjD,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOH,CAAP,EAASE,CAAT,EAAWM,CAAX,EAAaC,CAAb,EAAeX,CAAf,EAAiBY,CAAjB,EAAmBN,CAAnB,EAAqB;AAACL,IAAAA,CAAC,YAAYiB,CAAb,KAAiBjB,CAAC,GAAC;AAACkD,MAAAA,IAAI,EAAC,OAAN;AAAcC,MAAAA,GAAG,EAACnD;AAAlB,KAAnB,GAAyC,KAAKiC,IAAL,GAAU7B,CAAnD,EAAqDI,CAAC,CAAC,KAAKoB,MAAN,EAAa3B,CAAb,CAAtD,EAAsEH,CAAC,CAAC,KAAK+B,cAAN,EAAqB1B,CAArB,CAAvE,EAA+F,KAAKsC,MAAL,GAAYzC,CAA3G,EAA6G,KAAK0C,IAAL,GAAUxC,CAAvH,EAAyH,KAAKyC,gBAAL,GAAsBlC,CAA/I,EAAiJ,KAAKoC,MAAL,GAAYnC,CAAC,GAACb,CAAC,CAACa,CAAD,CAAF,GAAM,IAApK,EAAyK,KAAKoC,UAAL,GAAgB/C,CAAzL,EAA2L,KAAKgD,UAAL,GAAgBpC,CAA3M,EAA6M,KAAKiC,uBAAL,GAA6BvC,CAA1O;AAA4O;;AAAA+C,EAAAA,QAAQ,CAACpD,CAAD,EAAG;AAACe,IAAAA,CAAC,CAACf,CAAC,CAAC+B,GAAH,EAAO,KAAKD,IAAZ,CAAD,EAAmB,KAAKG,IAAL,GAAUjC,CAAC,CAACiC,IAA/B,EAAoC,KAAKQ,MAAL,GAAYzC,CAAC,CAACyC,MAAlD,EAAyD,KAAKC,IAAL,GAAU1C,CAAC,CAAC0C,IAArE,EAA0E,KAAKC,gBAAL,GAAsB3C,CAAC,CAAC2C,gBAAlG,EAAmH,KAAKE,MAAL,GAAY7C,CAAC,CAAC6C,MAAF,GAAShD,CAAC,CAACG,CAAC,CAAC6C,MAAH,CAAV,GAAqB,IAApJ,EAAyJ,KAAKC,UAAL,GAAgB9C,CAAC,CAAC8C,UAA3K,EAAsL,KAAKC,UAAL,GAAgB/C,CAAC,CAAC+C,UAAxM,EAAmN,KAAKC,WAAL,GAAiBhD,CAAC,CAACgD,WAAtO,EAAkP,KAAKJ,uBAAL,GAA6B5C,CAAC,CAAC4C,uBAAjR,EAAySpC,CAAC,CAAC,KAAKoB,MAAN,EAAa5B,CAAC,CAAC4B,MAAf,CAA1S,EAAiU9B,CAAC,CAAC,KAAK+B,cAAN,EAAqB7B,CAAC,CAAC6B,cAAvB,CAAlU;AAAyW;;AAAn0C;;AAAo0C,MAAMX,CAAC,GAACR,CAAC,EAAT;AAAA,MAAYyB,CAAC,GAACzB,CAAC,EAAf;AAAA,MAAkB8B,CAAC,GAAC7B,CAAC,EAArB;AAAwB,SAAOW,CAAC,IAAI+B,iBAAZ,EAA8BlC,CAAC,IAAImC,kBAAnC,EAAsD/C,CAAC,IAAIgD,oBAA3D","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{d as t}from\"../../../../chunks/mat4.js\";import{c as r}from\"../../../../chunks/mat4f64.js\";import{e as i,a as s,l as e,b as a,g as n,n as o}from\"../../../../chunks/vec3.js\";import{c as h,a as d}from\"../../../../chunks/vec3f64.js\";import{t as c}from\"../../../../chunks/vec4.js\";import{c as m}from\"../../../../chunks/vec4f64.js\";import{e as l}from\"../../../../chunks/boundedPlane.js\";import{create as u,copy as p}from\"../../../../geometry/support/ray.js\";import{Object3D as y}from\"./Object3D.js\";function g(t){return(r,s,e)=>(i(v,r,s,e),!l(t,v))}class f{constructor(){this.min=new j,this.max=new j,this.hud=new j,this.ground=new j}init(t){this.min.init(t),this.max.init(t),this.hud.init(t),this.ground.init(t),this.all=[]}}class j{constructor(t){this.normal=h(),this.transformation=r(),this._ray=u(),this.init(t)}get ray(){return this._ray}get hasIntersectionPoint(){return null!=this.dist}get distanceInRenderSpace(){if(null!=this.dist)return s(O,this.ray.direction,this.dist),e(O)}getIntersectionPoint(t){return!!this.hasIntersectionPoint&&(s(O,this.ray.direction,this.dist),a(t,this.ray.origin,O),!0)}getTransformedNormal(t){return n(I,this.normal),I[3]=0,c(I,I,this.transformation),n(t,I),o(t,t),t}init(t){this.dist=void 0,this.target=void 0,this.name=void 0,this.drapedLayerOrder=void 0,this.drapedLayerGraphicOrder=void 0,this.center=null,this.geometryId=null,this.triangleNr=null,this.intersector=\"Stage\",t?p(t,this._ray):this._ray=u()}set(r,i,s,e,a,o,h,c,m,l){r instanceof y&&(r={type:\"stage\",obj:r}),this.dist=s,n(this.normal,e),t(this.transformation,a),this.target=r,this.name=i,this.drapedLayerOrder=o,this.center=h?d(h):null,this.geometryId=c,this.triangleNr=m,this.drapedLayerGraphicOrder=l}copyFrom(r){p(r.ray,this._ray),this.dist=r.dist,this.target=r.target,this.name=r.name,this.drapedLayerOrder=r.drapedLayerOrder,this.center=r.center?d(r.center):null,this.geometryId=r.geometryId,this.triangleNr=r.triangleNr,this.intersector=r.intersector,this.drapedLayerGraphicOrder=r.drapedLayerGraphicOrder,n(this.normal,r.normal),t(this.transformation,r.transformation)}}const v=h(),O=h(),I=m();export{j as IntersectorResult,f as IntersectorResults,g as sliceFilterPredicate};\n"]},"metadata":{},"sourceType":"module"}