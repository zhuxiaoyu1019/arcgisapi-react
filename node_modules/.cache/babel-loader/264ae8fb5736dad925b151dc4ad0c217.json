{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport e from \"../../../../core/Accessor.js\";\nimport r from \"../../../../core/Evented.js\";\nimport { isSome as o, isNone as s } from \"../../../../core/maybe.js\";\nimport { property as i } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/Logger.js\";\nimport { subclass as a } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { projectPoint as c } from \"../../../../geometry/projection.js\";\nimport { getObjectId as p } from \"../../../../layers/graphics/dehydratedFeatures.js\";\nimport n from \"../../../../layers/graphics/OptimizedFeature.js\";\nimport h from \"../../../../layers/graphics/OptimizedGeometry.js\";\nimport { optimizedFeatureQueryEngineAdapter as l } from \"../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter.js\";\nlet d = class extends e {\n  constructor(t) {\n    super(t), this.events = new r(), this.hasZ = null, this.hasM = null, this.objectIdField = null, this.spatialReference = null, this.featureAdapter = {\n      getAttribute: (t, e) => \"graphic\" in t ? t.graphic.attributes[e] : l.getAttribute(t, e),\n      getAttributes: t => \"graphic\" in t ? t.graphic.attributes : l.getAttributes(t),\n      getObjectId: t => \"graphic\" in t ? p(t.graphic, this.objectIdField) : l.getObjectId(t),\n      getGeometry: t => \"graphic\" in t ? t.getAsOptimizedGeometry(this.hasZ, this.hasM) : l.getGeometry(t),\n      getCentroid: (t, e) => {\n        if (\"graphic\" in t) {\n          let r = null;\n          o(t.centroid) ? r = t.centroid : \"point\" === t.graphic.geometry.type && c(t.graphic.geometry, u, this.spatialReference) && (r = u);\n          const i = new Array(2 + (e.hasZ ? 1 : 0) + (e.hasM ? 1 : 0));\n          return s(r) ? (i[0] = 0, i[1] = 0, i[2] = 0, i[3] = 0) : (i[0] = r.x, i[1] = r.y, e.hasZ && (i[2] = r.hasZ ? r.z : 0), e.hasM && (i[e.hasZ ? 3 : 2] = r.hasM ? r.m : 0)), new h([], i);\n        }\n\n        return l.getCentroid(t, e);\n      },\n      cloneWithGeometry: (t, e) => \"graphic\" in t ? new n(e, this.featureAdapter.getAttributes(t), null, this.featureAdapter.getObjectId(t)) : l.cloneWithGeometry(t, e)\n    };\n  }\n\n  forEach(t) {\n    this.forAllGraphics(e => {\n      t(e);\n    });\n  }\n\n  forEachInBounds(t, e) {\n    this.getSpatialIndex().forEachInBounds(t, e);\n  }\n\n  forEachBounds(t, e, r) {\n    const s = this.getSpatialIndex();\n\n    for (const i of t) {\n      const t = this.featureAdapter.getObjectId(i);\n      o(s.getBounds(t, r)) && e(r);\n    }\n  }\n\n};\nt([i({\n  constructOnly: !0\n})], d.prototype, \"getSpatialIndex\", void 0), t([i({\n  constructOnly: !0\n})], d.prototype, \"forAllGraphics\", void 0), t([i({\n  constructOnly: !0\n})], d.prototype, \"hasZ\", void 0), t([i({\n  constructOnly: !0\n})], d.prototype, \"hasM\", void 0), t([i({\n  constructOnly: !0\n})], d.prototype, \"objectIdField\", void 0), t([i({\n  constructOnly: !0\n})], d.prototype, \"spatialReference\", void 0), d = t([a(\"esri.views.3d.layers.graphics.Graphics3DFeatureStore\")], d);\nconst u = {\n  type: \"point\",\n  x: 0,\n  y: 0,\n  hasZ: !1,\n  hasM: !1,\n  spatialReference: null\n};\nvar g = d;\nexport default g;\nexport { d as Graphics3DFeatureStore };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js"],"names":["_","t","e","r","isSome","o","isNone","s","property","i","subclass","a","projectPoint","c","getObjectId","p","n","h","optimizedFeatureQueryEngineAdapter","l","d","constructor","events","hasZ","hasM","objectIdField","spatialReference","featureAdapter","getAttribute","graphic","attributes","getAttributes","getGeometry","getAsOptimizedGeometry","getCentroid","centroid","geometry","type","u","Array","x","y","z","m","cloneWithGeometry","forEach","forAllGraphics","forEachInBounds","getSpatialIndex","forEachBounds","getBounds","constructOnly","prototype","g","Graphics3DFeatureStore"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import r from\"../../../../core/Evented.js\";import{isSome as o,isNone as s}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{projectPoint as c}from\"../../../../geometry/projection.js\";import{getObjectId as p}from\"../../../../layers/graphics/dehydratedFeatures.js\";import n from\"../../../../layers/graphics/OptimizedFeature.js\";import h from\"../../../../layers/graphics/OptimizedGeometry.js\";import{optimizedFeatureQueryEngineAdapter as l}from\"../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter.js\";let d=class extends e{constructor(t){super(t),this.events=new r,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.spatialReference=null,this.featureAdapter={getAttribute:(t,e)=>\"graphic\"in t?t.graphic.attributes[e]:l.getAttribute(t,e),getAttributes:t=>\"graphic\"in t?t.graphic.attributes:l.getAttributes(t),getObjectId:t=>\"graphic\"in t?p(t.graphic,this.objectIdField):l.getObjectId(t),getGeometry:t=>\"graphic\"in t?t.getAsOptimizedGeometry(this.hasZ,this.hasM):l.getGeometry(t),getCentroid:(t,e)=>{if(\"graphic\"in t){let r=null;o(t.centroid)?r=t.centroid:\"point\"===t.graphic.geometry.type&&c(t.graphic.geometry,u,this.spatialReference)&&(r=u);const i=new Array(2+(e.hasZ?1:0)+(e.hasM?1:0));return s(r)?(i[0]=0,i[1]=0,i[2]=0,i[3]=0):(i[0]=r.x,i[1]=r.y,e.hasZ&&(i[2]=r.hasZ?r.z:0),e.hasM&&(i[e.hasZ?3:2]=r.hasM?r.m:0)),new h([],i)}return l.getCentroid(t,e)},cloneWithGeometry:(t,e)=>\"graphic\"in t?new n(e,this.featureAdapter.getAttributes(t),null,this.featureAdapter.getObjectId(t)):l.cloneWithGeometry(t,e)}}forEach(t){this.forAllGraphics((e=>{t(e)}))}forEachInBounds(t,e){this.getSpatialIndex().forEachInBounds(t,e)}forEachBounds(t,e,r){const s=this.getSpatialIndex();for(const i of t){const t=this.featureAdapter.getObjectId(i);o(s.getBounds(t,r))&&e(r)}}};t([i({constructOnly:!0})],d.prototype,\"getSpatialIndex\",void 0),t([i({constructOnly:!0})],d.prototype,\"forAllGraphics\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasZ\",void 0),t([i({constructOnly:!0})],d.prototype,\"hasM\",void 0),t([i({constructOnly:!0})],d.prototype,\"objectIdField\",void 0),t([i({constructOnly:!0})],d.prototype,\"spatialReference\",void 0),d=t([a(\"esri.views.3d.layers.graphics.Graphics3DFeatureStore\")],d);const u={type:\"point\",x:0,y:0,hasZ:!1,hasM:!1,spatialReference:null};var g=d;export default g;export{d as Graphics3DFeatureStore};\n"]},"metadata":{},"sourceType":"module"}