{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { pt2px as t, toPt as e } from \"../../../../../../core/screenUtils.js\";\nimport { getJustification as i, getXAnchorDirection as o, getYAnchorDirection as s } from \"../../alignmentUtils.js\";\nimport { premultiplyAlphaRGBAArray as n, premultiplyAlphaRGBA as r } from \"../../color.js\";\nimport { MIN_MAX_ZOOM_PRECISION_FACTOR as a } from \"../../definitions.js\";\nimport { i1616to32 as l } from \"../../number.js\";\nimport { MaterialKeyBase as m } from \"../../materialKey/MaterialKey.js\";\nimport { DEFAULT_MIN_ZOOM as h, DEFAULT_MAX_ZOOM as f, getMinMaxZoom as c } from \"./util.js\";\nimport _ from \"./WGLBaseTextTemplate.js\";\nimport d from \"./WGLMeshTemplate.js\";\nimport { bidiText as x } from \"../../util/BidiText.js\";\nconst u = 5,\n      z = 24;\n\nclass M extends _(d) {\n  constructor(n, r, h, f, c, _, d, x, M, p, g, j, S, y, b, T, V, A = !1, C, I) {\n    super(), this._xOffset = t(j), this._yOffset = t(S), this._decoration = M || \"none\", this._color = f, this._haloColor = c, this._haloSize = Math.min(Math.floor(u * t(e(h))), 127), this._size = Math.min(Math.round(t(r)), 127);\n    const K = Math.min(Math.round(t(r)), 127);\n    this._referenceSize = Math.round(Math.sqrt(256 * K)), this._scale = this._size / z, this._angle = g, this._justify = i(_ || \"center\"), this._xAlignD = o(_ || \"center\"), this._yAlignD = s(d || \"baseline\"), this._baseline = \"baseline\" === (d || \"baseline\"), this._bitset = (1 === x ? 1 : 0) | (p ? 1 : 0) << 1;\n    const v = m.load(n);\n    v.sdf = !0, this._materialKey = v.data, this._lineWidth = t(y) || 512, this._lineHeight = b || 1, this._textPlacement = T, this._effects = V, this._isCIM = A, this._minMaxZoom = l(Math.round(C * a), Math.round(I * a));\n  }\n\n  static fromText(t, e) {\n    const i = new M(t.materialKey, t.font.size, t.haloSize || 0, t.color && n(t.color) || 0, t.haloColor && n(t.haloColor) || 0, t.horizontalAlignment, t.verticalAlignment, 0, t.font.decoration, !1, t.angle || 0, t.xoffset, t.yoffset, t.lineWidth, t.lineHeight, null, null, !1, h, f),\n          [, o] = x(t.text);\n    return i.bindTextInfo(e, o), i._vertexBoundsScale = t.maxVVSize ? t.maxVVSize / t.font.size : 1, i;\n  }\n\n  static fromCIMText(t, e, i) {\n    const o = t.scaleFactor || 1,\n          s = t.size * t.sizeRatio * o,\n          [n, a] = c(t.scaleInfo, i),\n          l = new M(t.materialKey, s, t.outlineSize * t.sizeRatio, r(t.color), r(t.outlineColor), t.horizontalAlignment, t.verticalAlignment, t.alignment, t.decoration, t.colorLocked, t.angle, t.offsetX * t.sizeRatio * o, t.offsetY * t.sizeRatio * o, 512, 1, t.markerPlacement, t.effects, !0, n, a),\n          [, m] = x(t.text);\n    return l.bindTextInfo(e, m), l._vertexBoundsScale = t.maxVVSize ? t.maxVVSize / s : 1, l;\n  }\n\n}\n\nexport default M;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTextTemplate.js"],"names":["pt2px","t","toPt","e","getJustification","i","getXAnchorDirection","o","getYAnchorDirection","s","premultiplyAlphaRGBAArray","n","premultiplyAlphaRGBA","r","MIN_MAX_ZOOM_PRECISION_FACTOR","a","i1616to32","l","MaterialKeyBase","m","DEFAULT_MIN_ZOOM","h","DEFAULT_MAX_ZOOM","f","getMinMaxZoom","c","_","d","bidiText","x","u","z","M","constructor","p","g","j","S","y","b","T","V","A","C","I","_xOffset","_yOffset","_decoration","_color","_haloColor","_haloSize","Math","min","floor","_size","round","K","_referenceSize","sqrt","_scale","_angle","_justify","_xAlignD","_yAlignD","_baseline","_bitset","v","load","sdf","_materialKey","data","_lineWidth","_lineHeight","_textPlacement","_effects","_isCIM","_minMaxZoom","fromText","materialKey","font","size","haloSize","color","haloColor","horizontalAlignment","verticalAlignment","decoration","angle","xoffset","yoffset","lineWidth","lineHeight","text","bindTextInfo","_vertexBoundsScale","maxVVSize","fromCIMText","scaleFactor","sizeRatio","scaleInfo","outlineSize","outlineColor","alignment","colorLocked","offsetX","offsetY","markerPlacement","effects"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,KAAK,IAAIC,CAAhB,EAAkBC,IAAI,IAAIC,CAA1B,QAAgC,uCAAhC;AAAwE,SAAOC,gBAAgB,IAAIC,CAA3B,EAA6BC,mBAAmB,IAAIC,CAApD,EAAsDC,mBAAmB,IAAIC,CAA7E,QAAmF,yBAAnF;AAA6G,SAAOC,yBAAyB,IAAIC,CAApC,EAAsCC,oBAAoB,IAAIC,CAA9D,QAAoE,gBAApE;AAAqF,SAAOC,6BAA6B,IAAIC,CAAxC,QAA8C,sBAA9C;AAAqE,SAAOC,SAAS,IAAIC,CAApB,QAA0B,iBAA1B;AAA4C,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,kCAAhC;AAAmE,SAAOC,gBAAgB,IAAIC,CAA3B,EAA6BC,gBAAgB,IAAIC,CAAjD,EAAmDC,aAAa,IAAIC,CAApE,QAA0E,WAA1E;AAAsF,OAAOC,CAAP,MAAa,0BAAb;AAAwC,OAAOC,CAAP,MAAa,sBAAb;AAAoC,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,wBAAzB;AAAkD,MAAMC,CAAC,GAAC,CAAR;AAAA,MAAUC,CAAC,GAAC,EAAZ;;AAAe,MAAMC,CAAN,SAAgBN,CAAC,CAACC,CAAD,CAAjB,CAAqB;AAACM,EAAAA,WAAW,CAACtB,CAAD,EAAGE,CAAH,EAAKQ,CAAL,EAAOE,CAAP,EAASE,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeE,CAAf,EAAiBG,CAAjB,EAAmBE,CAAnB,EAAqBC,CAArB,EAAuBC,CAAvB,EAAyBC,CAAzB,EAA2BC,CAA3B,EAA6BC,CAA7B,EAA+BC,CAA/B,EAAiCC,CAAjC,EAAmCC,CAAC,GAAC,CAAC,CAAtC,EAAwCC,CAAxC,EAA0CC,CAA1C,EAA4C;AAAC,aAAQ,KAAKC,QAAL,GAAc5C,CAAC,CAACmC,CAAD,CAAvB,EAA2B,KAAKU,QAAL,GAAc7C,CAAC,CAACoC,CAAD,CAA1C,EAA8C,KAAKU,WAAL,GAAiBf,CAAC,IAAE,MAAlE,EAAyE,KAAKgB,MAAL,GAAYzB,CAArF,EAAuF,KAAK0B,UAAL,GAAgBxB,CAAvG,EAAyG,KAAKyB,SAAL,GAAeC,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,KAAL,CAAWvB,CAAC,GAAC7B,CAAC,CAACE,CAAC,CAACkB,CAAD,CAAF,CAAd,CAAT,EAA+B,GAA/B,CAAxH,EAA4J,KAAKiC,KAAL,GAAWH,IAAI,CAACC,GAAL,CAASD,IAAI,CAACI,KAAL,CAAWtD,CAAC,CAACY,CAAD,CAAZ,CAAT,EAA0B,GAA1B,CAAvK;AAAsM,UAAM2C,CAAC,GAACL,IAAI,CAACC,GAAL,CAASD,IAAI,CAACI,KAAL,CAAWtD,CAAC,CAACY,CAAD,CAAZ,CAAT,EAA0B,GAA1B,CAAR;AAAuC,SAAK4C,cAAL,GAAoBN,IAAI,CAACI,KAAL,CAAWJ,IAAI,CAACO,IAAL,CAAU,MAAIF,CAAd,CAAX,CAApB,EAAiD,KAAKG,MAAL,GAAY,KAAKL,KAAL,GAAWvB,CAAxE,EAA0E,KAAK6B,MAAL,GAAYzB,CAAtF,EAAwF,KAAK0B,QAAL,GAAcxD,CAAC,CAACqB,CAAC,IAAE,QAAJ,CAAvG,EAAqH,KAAKoC,QAAL,GAAcvD,CAAC,CAACmB,CAAC,IAAE,QAAJ,CAApI,EAAkJ,KAAKqC,QAAL,GAActD,CAAC,CAACkB,CAAC,IAAE,UAAJ,CAAjK,EAAiL,KAAKqC,SAAL,GAAe,gBAAcrC,CAAC,IAAE,UAAjB,CAAhM,EAA6N,KAAKsC,OAAL,GAAa,CAAC,MAAIpC,CAAJ,GAAM,CAAN,GAAQ,CAAT,IAAY,CAACK,CAAC,GAAC,CAAD,GAAG,CAAL,KAAS,CAA/P;AAAiQ,UAAMgC,CAAC,GAAC/C,CAAC,CAACgD,IAAF,CAAOxD,CAAP,CAAR;AAAkBuD,IAAAA,CAAC,CAACE,GAAF,GAAM,CAAC,CAAP,EAAS,KAAKC,YAAL,GAAkBH,CAAC,CAACI,IAA7B,EAAkC,KAAKC,UAAL,GAAgBtE,CAAC,CAACqC,CAAD,CAAD,IAAM,GAAxD,EAA4D,KAAKkC,WAAL,GAAiBjC,CAAC,IAAE,CAAhF,EAAkF,KAAKkC,cAAL,GAAoBjC,CAAtG,EAAwG,KAAKkC,QAAL,GAAcjC,CAAtH,EAAwH,KAAKkC,MAAL,GAAYjC,CAApI,EAAsI,KAAKkC,WAAL,GAAiB3D,CAAC,CAACkC,IAAI,CAACI,KAAL,CAAWZ,CAAC,GAAC5B,CAAb,CAAD,EAAiBoC,IAAI,CAACI,KAAL,CAAWX,CAAC,GAAC7B,CAAb,CAAjB,CAAxJ;AAA0L;;AAAe,SAAR8D,QAAQ,CAAC5E,CAAD,EAAGE,CAAH,EAAK;AAAC,UAAME,CAAC,GAAC,IAAI2B,CAAJ,CAAM/B,CAAC,CAAC6E,WAAR,EAAoB7E,CAAC,CAAC8E,IAAF,CAAOC,IAA3B,EAAgC/E,CAAC,CAACgF,QAAF,IAAY,CAA5C,EAA8ChF,CAAC,CAACiF,KAAF,IAASvE,CAAC,CAACV,CAAC,CAACiF,KAAH,CAAV,IAAqB,CAAnE,EAAqEjF,CAAC,CAACkF,SAAF,IAAaxE,CAAC,CAACV,CAAC,CAACkF,SAAH,CAAd,IAA6B,CAAlG,EAAoGlF,CAAC,CAACmF,mBAAtG,EAA0HnF,CAAC,CAACoF,iBAA5H,EAA8I,CAA9I,EAAgJpF,CAAC,CAAC8E,IAAF,CAAOO,UAAvJ,EAAkK,CAAC,CAAnK,EAAqKrF,CAAC,CAACsF,KAAF,IAAS,CAA9K,EAAgLtF,CAAC,CAACuF,OAAlL,EAA0LvF,CAAC,CAACwF,OAA5L,EAAoMxF,CAAC,CAACyF,SAAtM,EAAgNzF,CAAC,CAAC0F,UAAlN,EAA6N,IAA7N,EAAkO,IAAlO,EAAuO,CAAC,CAAxO,EAA0OtE,CAA1O,EAA4OE,CAA5O,CAAR;AAAA,UAAuP,GAAEhB,CAAF,IAAKsB,CAAC,CAAC5B,CAAC,CAAC2F,IAAH,CAA7P;AAAsQ,WAAOvF,CAAC,CAACwF,YAAF,CAAe1F,CAAf,EAAiBI,CAAjB,GAAoBF,CAAC,CAACyF,kBAAF,GAAqB7F,CAAC,CAAC8F,SAAF,GAAY9F,CAAC,CAAC8F,SAAF,GAAY9F,CAAC,CAAC8E,IAAF,CAAOC,IAA/B,GAAoC,CAA7E,EAA+E3E,CAAtF;AAAwF;;AAAkB,SAAX2F,WAAW,CAAC/F,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAME,CAAC,GAACN,CAAC,CAACgG,WAAF,IAAe,CAAvB;AAAA,UAAyBxF,CAAC,GAACR,CAAC,CAAC+E,IAAF,GAAO/E,CAAC,CAACiG,SAAT,GAAmB3F,CAA9C;AAAA,UAAgD,CAACI,CAAD,EAAGI,CAAH,IAAMU,CAAC,CAACxB,CAAC,CAACkG,SAAH,EAAa9F,CAAb,CAAvD;AAAA,UAAuEY,CAAC,GAAC,IAAIe,CAAJ,CAAM/B,CAAC,CAAC6E,WAAR,EAAoBrE,CAApB,EAAsBR,CAAC,CAACmG,WAAF,GAAcnG,CAAC,CAACiG,SAAtC,EAAgDrF,CAAC,CAACZ,CAAC,CAACiF,KAAH,CAAjD,EAA2DrE,CAAC,CAACZ,CAAC,CAACoG,YAAH,CAA5D,EAA6EpG,CAAC,CAACmF,mBAA/E,EAAmGnF,CAAC,CAACoF,iBAArG,EAAuHpF,CAAC,CAACqG,SAAzH,EAAmIrG,CAAC,CAACqF,UAArI,EAAgJrF,CAAC,CAACsG,WAAlJ,EAA8JtG,CAAC,CAACsF,KAAhK,EAAsKtF,CAAC,CAACuG,OAAF,GAAUvG,CAAC,CAACiG,SAAZ,GAAsB3F,CAA5L,EAA8LN,CAAC,CAACwG,OAAF,GAAUxG,CAAC,CAACiG,SAAZ,GAAsB3F,CAApN,EAAsN,GAAtN,EAA0N,CAA1N,EAA4NN,CAAC,CAACyG,eAA9N,EAA8OzG,CAAC,CAAC0G,OAAhP,EAAwP,CAAC,CAAzP,EAA2PhG,CAA3P,EAA6PI,CAA7P,CAAzE;AAAA,UAAyU,GAAEI,CAAF,IAAKU,CAAC,CAAC5B,CAAC,CAAC2F,IAAH,CAA/U;AAAwV,WAAO3E,CAAC,CAAC4E,YAAF,CAAe1F,CAAf,EAAiBgB,CAAjB,GAAoBF,CAAC,CAAC6E,kBAAF,GAAqB7F,CAAC,CAAC8F,SAAF,GAAY9F,CAAC,CAAC8F,SAAF,GAAYtF,CAAxB,GAA0B,CAAnE,EAAqEQ,CAA5E;AAA8E;;AAAtiD;;AAAuiD,eAAee,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{pt2px as t,toPt as e}from\"../../../../../../core/screenUtils.js\";import{getJustification as i,getXAnchorDirection as o,getYAnchorDirection as s}from\"../../alignmentUtils.js\";import{premultiplyAlphaRGBAArray as n,premultiplyAlphaRGBA as r}from\"../../color.js\";import{MIN_MAX_ZOOM_PRECISION_FACTOR as a}from\"../../definitions.js\";import{i1616to32 as l}from\"../../number.js\";import{MaterialKeyBase as m}from\"../../materialKey/MaterialKey.js\";import{DEFAULT_MIN_ZOOM as h,DEFAULT_MAX_ZOOM as f,getMinMaxZoom as c}from\"./util.js\";import _ from\"./WGLBaseTextTemplate.js\";import d from\"./WGLMeshTemplate.js\";import{bidiText as x}from\"../../util/BidiText.js\";const u=5,z=24;class M extends(_(d)){constructor(n,r,h,f,c,_,d,x,M,p,g,j,S,y,b,T,V,A=!1,C,I){super(),this._xOffset=t(j),this._yOffset=t(S),this._decoration=M||\"none\",this._color=f,this._haloColor=c,this._haloSize=Math.min(Math.floor(u*t(e(h))),127),this._size=Math.min(Math.round(t(r)),127);const K=Math.min(Math.round(t(r)),127);this._referenceSize=Math.round(Math.sqrt(256*K)),this._scale=this._size/z,this._angle=g,this._justify=i(_||\"center\"),this._xAlignD=o(_||\"center\"),this._yAlignD=s(d||\"baseline\"),this._baseline=\"baseline\"===(d||\"baseline\"),this._bitset=(1===x?1:0)|(p?1:0)<<1;const v=m.load(n);v.sdf=!0,this._materialKey=v.data,this._lineWidth=t(y)||512,this._lineHeight=b||1,this._textPlacement=T,this._effects=V,this._isCIM=A,this._minMaxZoom=l(Math.round(C*a),Math.round(I*a))}static fromText(t,e){const i=new M(t.materialKey,t.font.size,t.haloSize||0,t.color&&n(t.color)||0,t.haloColor&&n(t.haloColor)||0,t.horizontalAlignment,t.verticalAlignment,0,t.font.decoration,!1,t.angle||0,t.xoffset,t.yoffset,t.lineWidth,t.lineHeight,null,null,!1,h,f),[,o]=x(t.text);return i.bindTextInfo(e,o),i._vertexBoundsScale=t.maxVVSize?t.maxVVSize/t.font.size:1,i}static fromCIMText(t,e,i){const o=t.scaleFactor||1,s=t.size*t.sizeRatio*o,[n,a]=c(t.scaleInfo,i),l=new M(t.materialKey,s,t.outlineSize*t.sizeRatio,r(t.color),r(t.outlineColor),t.horizontalAlignment,t.verticalAlignment,t.alignment,t.decoration,t.colorLocked,t.angle,t.offsetX*t.sizeRatio*o,t.offsetY*t.sizeRatio*o,512,1,t.markerPlacement,t.effects,!0,n,a),[,m]=x(t.text);return l.bindTextInfo(e,m),l._vertexBoundsScale=t.maxVVSize?t.maxVVSize/s:1,l}}export default M;\n"]},"metadata":{},"sourceType":"module"}