{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { PathTransformationCursor as t, isClosedPath as e, getId as s } from \"../CIMCursor.js\";\nimport { CurveHelper as i } from \"../CurveHelper.js\";\n\nclass n {\n  static local() {\n    return null === n.instance && (n.instance = new n()), n.instance;\n  }\n\n  execute(t, e, s) {\n    return new r(t, e, s);\n  }\n\n}\n\nn.instance = null;\nconst a = 1e-15;\n\nclass r extends t {\n  constructor(t, e, s) {\n    super(t, !0, !0), this._curveHelper = new i(), this._angleToLine = void 0 === e.angleToLine || e.angleToLine, this._offset = void 0 !== e.offset ? e.offset * s : 0, this._endPoints = void 0 === e.placeOnEndPoints || e.placeOnEndPoints, this._controlPoints = void 0 === e.placeOnControlPoints || e.placeOnControlPoints, this._regularVertices = void 0 === e.placeOnRegularVertices || e.placeOnRegularVertices, this._tags = [], this._tagIterator = 0;\n  }\n\n  processPath(t) {\n    if (this.iteratePath || (this._preparePath(t), this.iteratePath = !0), this._tagIterator >= this._tags.length) return this._tags.length = 0, this._tagIterator = 0, this.iteratePath = !1, null;\n    const e = this._tags[this._tagIterator];\n    this._angleToLine && this.internalPlacement.setRotate(e[2]);\n    let s = e[0],\n        i = e[1];\n\n    if (0 !== this._offset) {\n      const t = Math.cos(e[2]),\n            n = Math.sin(e[2]);\n      s -= this._offset * n, i += this._offset * t;\n    }\n\n    return this.internalPlacement.setTranslate(s, i), this._tagIterator++, this.internalPlacement;\n  }\n\n  _preparePath(t) {\n    this._tags.length = 0, this._tagIterator = 0;\n    const i = e(t),\n          n = t.length - 1;\n    let a,\n        r,\n        o = 0,\n        l = 0,\n        _ = 0,\n        c = 0,\n        g = 0;\n\n    for (; o < n;) {\n      o++, a = t[o - 1], r = t[o];\n      const e = s(a),\n            u = s(r);\n      (this._angleToLine || 0 !== this._offset) && (c = this._curveHelper.getAngle(a, r, 0)), 1 === o ? i ? (l = c, _ = e) : this._endPoints && this._tags.push([a[0], a[1], c]) : 1 === e ? this._controlPoints && this._tags.push([a[0], a[1], h(g, c)]) : this._regularVertices && this._tags.push([a[0], a[1], h(g, c)]), (this._angleToLine || 0 !== this._offset) && (g = this._curveHelper.getAngle(a, r, 1)), o === n && (i ? 1 === u || 1 === _ ? this._controlPoints && this._tags.push([r[0], r[1], h(g, l)]) : this._regularVertices && this._tags.push([r[0], r[1], h(g, l)]) : this._endPoints && this._tags.push([r[0], r[1], g]));\n    }\n\n    this._tagIterator = 0;\n  }\n\n}\n\nfunction h(t, e) {\n  const s = Math.PI;\n\n  for (; Math.abs(e - t) > s + 2 * a;) e - t > s ? e -= 2 * s : e += 2 * s;\n\n  return (t + e) / 2;\n}\n\nexport { n as PlacementOnVertices };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/symbols/cim/placements/PlacementOnVertices.js"],"names":["PathTransformationCursor","t","isClosedPath","e","getId","s","CurveHelper","i","n","local","instance","execute","r","a","constructor","_curveHelper","_angleToLine","angleToLine","_offset","offset","_endPoints","placeOnEndPoints","_controlPoints","placeOnControlPoints","_regularVertices","placeOnRegularVertices","_tags","_tagIterator","processPath","iteratePath","_preparePath","length","internalPlacement","setRotate","Math","cos","sin","setTranslate","o","l","_","c","g","u","getAngle","push","h","PI","abs","PlacementOnVertices"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{PathTransformationCursor as t,isClosedPath as e,getId as s}from\"../CIMCursor.js\";import{CurveHelper as i}from\"../CurveHelper.js\";class n{static local(){return null===n.instance&&(n.instance=new n),n.instance}execute(t,e,s){return new r(t,e,s)}}n.instance=null;const a=1e-15;class r extends t{constructor(t,e,s){super(t,!0,!0),this._curveHelper=new i,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*s:0,this._endPoints=void 0===e.placeOnEndPoints||e.placeOnEndPoints,this._controlPoints=void 0===e.placeOnControlPoints||e.placeOnControlPoints,this._regularVertices=void 0===e.placeOnRegularVertices||e.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);let s=e[0],i=e[1];if(0!==this._offset){const t=Math.cos(e[2]),n=Math.sin(e[2]);s-=this._offset*n,i+=this._offset*t}return this.internalPlacement.setTranslate(s,i),this._tagIterator++,this.internalPlacement}_preparePath(t){this._tags.length=0,this._tagIterator=0;const i=e(t),n=t.length-1;let a,r,o=0,l=0,_=0,c=0,g=0;for(;o<n;){o++,a=t[o-1],r=t[o];const e=s(a),u=s(r);(this._angleToLine||0!==this._offset)&&(c=this._curveHelper.getAngle(a,r,0)),1===o?i?(l=c,_=e):this._endPoints&&this._tags.push([a[0],a[1],c]):1===e?this._controlPoints&&this._tags.push([a[0],a[1],h(g,c)]):this._regularVertices&&this._tags.push([a[0],a[1],h(g,c)]),(this._angleToLine||0!==this._offset)&&(g=this._curveHelper.getAngle(a,r,1)),o===n&&(i?1===u||1===_?this._controlPoints&&this._tags.push([r[0],r[1],h(g,l)]):this._regularVertices&&this._tags.push([r[0],r[1],h(g,l)]):this._endPoints&&this._tags.push([r[0],r[1],g]))}this._tagIterator=0}}function h(t,e){const s=Math.PI;for(;Math.abs(e-t)>s+2*a;)e-t>s?e-=2*s:e+=2*s;return(t+e)/2}export{n as PlacementOnVertices};\n"]},"metadata":{},"sourceType":"module"}