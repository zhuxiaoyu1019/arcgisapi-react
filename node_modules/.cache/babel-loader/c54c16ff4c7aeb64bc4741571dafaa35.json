{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { getInfo as n } from \"./spatialReferenceUtils.js\";\n\nfunction t(n) {\n  if (!n) return null;\n  if (Array.isArray(n)) return n;\n  const t = n.hasZ,\n        e = n.hasM;\n  if (\"point\" === n.type) return e && t ? [n.x, n.y, n.z, n.m] : t ? [n.x, n.y, n.z] : e ? [n.x, n.y, n.m] : [n.x, n.y];\n  if (\"polygon\" === n.type) return n.rings.slice(0);\n  if (\"polyline\" === n.type) return n.paths.slice(0);\n  if (\"multipoint\" === n.type) return n.points.slice(0);\n\n  if (\"extent\" === n.type) {\n    const t = n.clone().normalize();\n    if (!t) return null;\n    let e = !1,\n        r = !1;\n    return t.forEach(n => {\n      n.hasZ && (e = !0), n.hasM && (r = !0);\n    }), t.map(n => {\n      const t = [[n.xmin, n.ymin], [n.xmin, n.ymax], [n.xmax, n.ymax], [n.xmax, n.ymin], [n.xmin, n.ymin]];\n\n      if (e && n.hasZ) {\n        const e = .5 * (n.zmax - n.zmin);\n\n        for (let n = 0; n < t.length; n++) t[n].push(e);\n      }\n\n      if (r && n.hasM) {\n        const e = .5 * (n.mmax - n.mmin);\n\n        for (let n = 0; n < t.length; n++) t[n].push(e);\n      }\n\n      return t;\n    });\n  }\n\n  return null;\n}\n\nfunction e(n, t) {\n  const e = t[0] - n[0],\n        r = t[1] - n[1];\n\n  if (n.length > 2 && t.length > 2) {\n    const o = n[2] - t[2];\n    return Math.sqrt(e * e + r * r + o * o);\n  }\n\n  return Math.sqrt(e * e + r * r);\n}\n\nfunction r(n, t, e) {\n  const r = n[0] + e * (t[0] - n[0]),\n        o = n[1] + e * (t[1] - n[1]);\n  return n.length > 2 && t.length > 2 ? [r, o, n[2] + e * (t[2] - n[2])] : [r, o];\n}\n\nfunction o(n, t, e, r) {\n  const [o, i] = t,\n        [s, l] = e[r],\n        [f, u] = e[r + 1],\n        h = f - s,\n        c = u - l,\n        a = h * h + c * c,\n        g = (o - s) * h + (i - l) * c,\n        m = Math.min(1, Math.max(0, g / a));\n  return n[0] = s + h * m, n[1] = l + c * m, n;\n}\n\nfunction i(n, t) {\n  return r(n, t, .5);\n}\n\nfunction s(n) {\n  const t = n.length;\n  let r = 0;\n\n  for (let o = 0; o < t - 1; ++o) r += e(n[o], n[o + 1]);\n\n  return r;\n}\n\nfunction l(n, t) {\n  if (t <= 0) return n[0];\n  const o = n.length;\n  let i = 0;\n\n  for (let s = 0; s < o - 1; ++s) {\n    const o = e(n[s], n[s + 1]);\n\n    if (t - i < o) {\n      const e = (t - i) / o;\n      return r(n[s], n[s + 1], e);\n    }\n\n    i += o;\n  }\n\n  return n[o - 1];\n}\n\nfunction f(n, t, e) {\n  const r = n.length;\n  let o = 0,\n      i = 0,\n      s = 0;\n\n  for (let l = 0; l < r; l++) {\n    const f = n[l],\n          u = n[(l + 1) % r];\n    let h = 2;\n    o += f[0] * u[1] - u[0] * f[1], f.length > 2 && u.length > 2 && e && (i += f[0] * u[2] - u[0] * f[2], h = 3), f.length > h && u.length > h && t && (s += f[0] * u[h] - u[0] * f[h]);\n  }\n\n  return o <= 0 && i <= 0 && s <= 0;\n}\n\nfunction u(n) {\n  if (\"rings\" in n) {\n    for (const t of n.rings) t.length < 3 || t[0][0] === t[t.length - 1][0] && t[0][1] === t[t.length - 1][1] || t.push([t[0][0], t[0][1]]);\n\n    if (n.rings.length > 0) {\n      if (!f(n.rings[0], n.hasM, n.hasZ)) for (let t = 0; t < n.rings.length; ++t) n.rings[t] = n.rings[t].reverse();\n    }\n  }\n}\n\nfunction h(n) {\n  if (\"rings\" in n) for (const t of n.rings) t.length < 3 || t[0][0] === t[t.length - 1][0] && t[0][1] === t[t.length - 1][1] || t.push([t[0][0], t[0][1]]);\n}\n\nfunction c(n) {\n  const t = n.length;\n  let e = 0;\n\n  for (let r = 0; r < t; r++) {\n    const o = n[r],\n          i = n[(r + 1) % t];\n    e += o[0] * i[1] - i[0] * o[1];\n  }\n\n  return e;\n}\n\nfunction a(n) {\n  if (\"polygon\" !== n.type && \"polyline\" !== n.type) return n;\n  return g(\"polygon\" === n.type ? n.rings : n.paths, n.spatialReference), n;\n}\n\nfunction g(t, e) {\n  const r = n(e);\n  if (!r) return;\n  const o = r.valid[0],\n        i = r.valid[1],\n        s = i - o;\n\n  for (const n of t) {\n    let t = 1 / 0,\n        e = -1 / 0;\n    n.forEach(n => {\n      let r = n[0];\n\n      for (; r < o;) r += s;\n\n      for (; r > i;) r -= s;\n\n      t = Math.min(t, r), e = Math.max(e, r), n[0] = r;\n    });\n    const r = e - t;\n    s - r < r && n.forEach(n => {\n      n[0] < 0 && (n[0] += s);\n    });\n  }\n}\n\nfunction m(n, t, e, r) {\n  let o = 1 / 0,\n      i = -1 / 0;\n  n.forEach(n => {\n    let s = n.pos[0];\n\n    for (; s < t;) s += r;\n\n    for (; s > e;) s -= r;\n\n    o = Math.min(o, s), i = Math.max(i, s), n.unnormalizedPos[0] = s, n.unnormalizedPos[1] = n.pos[1], n.pos.length > 2 && (n.unnormalizedPos[2] = n.pos[2]), n.pos.length > 3 && (n.unnormalizedPos[3] = n.pos[3]);\n  });\n  const s = i - o;\n  r - s < s && n.forEach(n => {\n    n.unnormalizedPos[0] < 0 && (n.unnormalizedPos[0] += r);\n  });\n}\n\nexport { h as closeRings, u as closeRingsAndFixWinding, m as computeUnnormalizedVertexPositionsOnDateLineCrossing, t as geometryToCoordinates, e as getLength, i as getMidpoint, s as getPathLength, l as getPointOnPath, c as getRingArea, f as isClockwise, o as projectPointOnLine, a as unnormalizeGeometryOnDatelineCrossing, g as unnormalizeVerticesOnDatelineCrossing };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/support/coordsUtils.js"],"names":["getInfo","n","t","Array","isArray","hasZ","e","hasM","type","x","y","z","m","rings","slice","paths","points","clone","normalize","r","forEach","map","xmin","ymin","ymax","xmax","zmax","zmin","length","push","mmax","mmin","o","Math","sqrt","i","s","l","f","u","h","c","a","g","min","max","reverse","spatialReference","valid","pos","unnormalizedPos","closeRings","closeRingsAndFixWinding","computeUnnormalizedVertexPositionsOnDateLineCrossing","geometryToCoordinates","getLength","getMidpoint","getPathLength","getPointOnPath","getRingArea","isClockwise","projectPointOnLine","unnormalizeGeometryOnDatelineCrossing","unnormalizeVerticesOnDatelineCrossing"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getInfo as n}from\"./spatialReferenceUtils.js\";function t(n){if(!n)return null;if(Array.isArray(n))return n;const t=n.hasZ,e=n.hasM;if(\"point\"===n.type)return e&&t?[n.x,n.y,n.z,n.m]:t?[n.x,n.y,n.z]:e?[n.x,n.y,n.m]:[n.x,n.y];if(\"polygon\"===n.type)return n.rings.slice(0);if(\"polyline\"===n.type)return n.paths.slice(0);if(\"multipoint\"===n.type)return n.points.slice(0);if(\"extent\"===n.type){const t=n.clone().normalize();if(!t)return null;let e=!1,r=!1;return t.forEach((n=>{n.hasZ&&(e=!0),n.hasM&&(r=!0)})),t.map((n=>{const t=[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]];if(e&&n.hasZ){const e=.5*(n.zmax-n.zmin);for(let n=0;n<t.length;n++)t[n].push(e)}if(r&&n.hasM){const e=.5*(n.mmax-n.mmin);for(let n=0;n<t.length;n++)t[n].push(e)}return t}))}return null}function e(n,t){const e=t[0]-n[0],r=t[1]-n[1];if(n.length>2&&t.length>2){const o=n[2]-t[2];return Math.sqrt(e*e+r*r+o*o)}return Math.sqrt(e*e+r*r)}function r(n,t,e){const r=n[0]+e*(t[0]-n[0]),o=n[1]+e*(t[1]-n[1]);return n.length>2&&t.length>2?[r,o,n[2]+e*(t[2]-n[2])]:[r,o]}function o(n,t,e,r){const[o,i]=t,[s,l]=e[r],[f,u]=e[r+1],h=f-s,c=u-l,a=h*h+c*c,g=(o-s)*h+(i-l)*c,m=Math.min(1,Math.max(0,g/a));return n[0]=s+h*m,n[1]=l+c*m,n}function i(n,t){return r(n,t,.5)}function s(n){const t=n.length;let r=0;for(let o=0;o<t-1;++o)r+=e(n[o],n[o+1]);return r}function l(n,t){if(t<=0)return n[0];const o=n.length;let i=0;for(let s=0;s<o-1;++s){const o=e(n[s],n[s+1]);if(t-i<o){const e=(t-i)/o;return r(n[s],n[s+1],e)}i+=o}return n[o-1]}function f(n,t,e){const r=n.length;let o=0,i=0,s=0;for(let l=0;l<r;l++){const f=n[l],u=n[(l+1)%r];let h=2;o+=f[0]*u[1]-u[0]*f[1],f.length>2&&u.length>2&&e&&(i+=f[0]*u[2]-u[0]*f[2],h=3),f.length>h&&u.length>h&&t&&(s+=f[0]*u[h]-u[0]*f[h])}return o<=0&&i<=0&&s<=0}function u(n){if(\"rings\"in n){for(const t of n.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(n.rings.length>0){if(!f(n.rings[0],n.hasM,n.hasZ))for(let t=0;t<n.rings.length;++t)n.rings[t]=n.rings[t].reverse()}}}function h(n){if(\"rings\"in n)for(const t of n.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function c(n){const t=n.length;let e=0;for(let r=0;r<t;r++){const o=n[r],i=n[(r+1)%t];e+=o[0]*i[1]-i[0]*o[1]}return e}function a(n){if(\"polygon\"!==n.type&&\"polyline\"!==n.type)return n;return g(\"polygon\"===n.type?n.rings:n.paths,n.spatialReference),n}function g(t,e){const r=n(e);if(!r)return;const o=r.valid[0],i=r.valid[1],s=i-o;for(const n of t){let t=1/0,e=-1/0;n.forEach((n=>{let r=n[0];for(;r<o;)r+=s;for(;r>i;)r-=s;t=Math.min(t,r),e=Math.max(e,r),n[0]=r}));const r=e-t;s-r<r&&n.forEach((n=>{n[0]<0&&(n[0]+=s)}))}}function m(n,t,e,r){let o=1/0,i=-1/0;n.forEach((n=>{let s=n.pos[0];for(;s<t;)s+=r;for(;s>e;)s-=r;o=Math.min(o,s),i=Math.max(i,s),n.unnormalizedPos[0]=s,n.unnormalizedPos[1]=n.pos[1],n.pos.length>2&&(n.unnormalizedPos[2]=n.pos[2]),n.pos.length>3&&(n.unnormalizedPos[3]=n.pos[3])}));const s=i-o;r-s<s&&n.forEach((n=>{n.unnormalizedPos[0]<0&&(n.unnormalizedPos[0]+=r)}))}export{h as closeRings,u as closeRingsAndFixWinding,m as computeUnnormalizedVertexPositionsOnDateLineCrossing,t as geometryToCoordinates,e as getLength,i as getMidpoint,s as getPathLength,l as getPointOnPath,c as getRingArea,f as isClockwise,o as projectPointOnLine,a as unnormalizeGeometryOnDatelineCrossing,g as unnormalizeVerticesOnDatelineCrossing};\n"]},"metadata":{},"sourceType":"module"}