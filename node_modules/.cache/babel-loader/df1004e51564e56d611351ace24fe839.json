{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { layerLookupMap as r } from \"../../layers/support/lazyLayerLoader.js\";\nimport t from \"../PortalItem.js\";\nimport { getNumLayersAndTables as a, preprocessFSItemData as n, getFirstLayerOrTableId as o } from \"./layersLoader.js\";\nimport { hasTypeKeyword as s } from \"./portalItemUtils.js\";\nimport { requestArcGISServiceJSON as c } from \"../../support/requestPresets.js\";\n\nfunction i(e) {\n  return !e.portalItem || e.portalItem instanceof t || (e = { ...e,\n    portalItem: new t(e.portalItem)\n  }), u(e.portalItem).then(r => {\n    const t = {\n      portalItem: e.portalItem,\n      ...r.properties\n    },\n          a = r.constructor;\n    return Promise.resolve(new a(t));\n  });\n}\n\nfunction u(e) {\n  return e.load().then(l).then(y);\n}\n\nfunction l(r) {\n  switch (r.type) {\n    case \"Map Service\":\n      return m(r);\n\n    case \"Feature Service\":\n      return p(r);\n\n    case \"Feature Collection\":\n      return L(r);\n\n    case \"Scene Service\":\n      return f(r);\n\n    case \"Image Service\":\n      return d(r);\n\n    case \"Stream Service\":\n      return S();\n\n    case \"Vector Tile Service\":\n      return I();\n\n    case \"KML\":\n      return N();\n\n    case \"WFS\":\n      return h();\n\n    case \"WMTS\":\n      return w();\n\n    case \"WMS\":\n      return g();\n\n    case \"Feed\":\n      return v();\n\n    default:\n      return Promise.reject(new e(\"portal:unknown-item-type\", \"Unknown item type '${type}'\", {\n        type: r.type\n      }));\n  }\n}\n\nfunction y(e) {\n  return (0, r[e.className])().then(r => ({\n    constructor: r,\n    properties: e.properties\n  }));\n}\n\nfunction m(e) {\n  return M(e).then(e => e ? {\n    className: \"TileLayer\"\n  } : {\n    className: \"MapImageLayer\"\n  });\n}\n\nfunction p(e) {\n  return T(e).then(e => {\n    if (\"object\" == typeof e) {\n      const r = {};\n      return null != e.id && (r.layerId = e.id), {\n        className: \"FeatureLayer\",\n        properties: r\n      };\n    }\n\n    return {\n      className: \"GroupLayer\"\n    };\n  });\n}\n\nfunction f(e) {\n  return T(e).then(r => {\n    if (\"object\" == typeof r) {\n      const t = {};\n      let a;\n\n      if (null != r.id ? (t.layerId = r.id, a = `${e.url}/layers/${r.id}`) : a = e.url, Array.isArray(e.typeKeywords) && e.typeKeywords.length > 0) {\n        const r = {\n          IntegratedMesh: \"IntegratedMeshLayer\",\n          \"3DObject\": \"SceneLayer\",\n          Point: \"SceneLayer\",\n          PointCloud: \"PointCloudLayer\",\n          Building: \"BuildingSceneLayer\"\n        };\n\n        for (const t of Object.keys(r)) if (-1 !== e.typeKeywords.indexOf(t)) return {\n          className: r[t]\n        };\n      }\n\n      return c(a).then(e => {\n        let r = \"SceneLayer\";\n        const a = {\n          Point: \"SceneLayer\",\n          \"3DObject\": \"SceneLayer\",\n          IntegratedMesh: \"IntegratedMeshLayer\",\n          PointCloud: \"PointCloudLayer\",\n          Building: \"BuildingSceneLayer\"\n        };\n        return e && e.layerType && a[e.layerType] && (r = a[e.layerType]), {\n          className: r,\n          properties: t\n        };\n      });\n    }\n\n    return {\n      className: \"GroupLayer\"\n    };\n  });\n}\n\nasync function L(e) {\n  await e.load();\n  if (s(e, \"Map Notes\")) return {\n    className: \"MapNotesLayer\"\n  };\n  if (s(e, \"Route Layer\")) return {\n    className: \"RouteLayer\"\n  };\n  const r = await e.fetchData();\n  return 1 === a(r) ? {\n    className: \"FeatureLayer\"\n  } : {\n    className: \"GroupLayer\"\n  };\n}\n\nasync function d(e) {\n  var r, t, a;\n  await e.load();\n  const n = null != (r = null == (t = e.typeKeywords) ? void 0 : t.map(e => e.toLowerCase())) ? r : [];\n  if (n.indexOf(\"elevation 3d layer\") > -1) return {\n    className: \"ElevationLayer\"\n  };\n  if (n.indexOf(\"tiled imagery\") > -1) return {\n    className: \"ImageryTileLayer\"\n  };\n  const o = await e.fetchData(),\n        s = null == o ? void 0 : o.layerType;\n  if (\"ArcGISTiledImageServiceLayer\" === s) return {\n    className: \"ImageryTileLayer\"\n  };\n  if (\"ArcGISImageServiceLayer\" === s) return {\n    className: \"ImageryLayer\"\n  };\n  return \"map\" === (null == (a = (await c(e.url)).cacheType) ? void 0 : a.toLowerCase()) ? {\n    className: \"ImageryTileLayer\"\n  } : {\n    className: \"ImageryLayer\"\n  };\n}\n\nfunction S() {\n  return {\n    className: \"StreamLayer\"\n  };\n}\n\nfunction I() {\n  return {\n    className: \"VectorTileLayer\"\n  };\n}\n\nfunction N() {\n  return {\n    className: \"KMLLayer\"\n  };\n}\n\nfunction h() {\n  return {\n    className: \"WFSLayer\"\n  };\n}\n\nfunction g() {\n  return {\n    className: \"WMSLayer\"\n  };\n}\n\nfunction w() {\n  return {\n    className: \"WMTSLayer\"\n  };\n}\n\nfunction v() {\n  return {\n    className: \"StreamLayer\"\n  };\n}\n\nfunction M(e) {\n  return c(e.url).then(e => e.tileInfo);\n}\n\nfunction T(e) {\n  return !e.url || e.url.match(/\\/\\d+$/) ? Promise.resolve({}) : e.load().then(() => e.fetchData()).then(async r => {\n    if (\"Feature Service\" === e.type) return j(r = await n(r, e.url));\n    return a(r) > 0 ? j(r) : c(e.url).then(j);\n  });\n}\n\nfunction j(e) {\n  return 1 === a(e) && {\n    id: o(e)\n  };\n}\n\nexport { i as fromItem, l as selectLayerClassPath };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/portal/support/portalLayers.js"],"names":["e","layerLookupMap","r","t","getNumLayersAndTables","a","preprocessFSItemData","n","getFirstLayerOrTableId","o","hasTypeKeyword","s","requestArcGISServiceJSON","c","i","portalItem","u","then","properties","constructor","Promise","resolve","load","l","y","type","m","p","L","f","d","S","I","N","h","w","g","v","reject","className","M","T","id","layerId","url","Array","isArray","typeKeywords","length","IntegratedMesh","Point","PointCloud","Building","Object","keys","indexOf","layerType","fetchData","map","toLowerCase","cacheType","tileInfo","match","j","fromItem","selectLayerClassPath"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{layerLookupMap as r}from\"../../layers/support/lazyLayerLoader.js\";import t from\"../PortalItem.js\";import{getNumLayersAndTables as a,preprocessFSItemData as n,getFirstLayerOrTableId as o}from\"./layersLoader.js\";import{hasTypeKeyword as s}from\"./portalItemUtils.js\";import{requestArcGISServiceJSON as c}from\"../../support/requestPresets.js\";function i(e){return!e.portalItem||e.portalItem instanceof t||(e={...e,portalItem:new t(e.portalItem)}),u(e.portalItem).then((r=>{const t={portalItem:e.portalItem,...r.properties},a=r.constructor;return Promise.resolve(new a(t))}))}function u(e){return e.load().then(l).then(y)}function l(r){switch(r.type){case\"Map Service\":return m(r);case\"Feature Service\":return p(r);case\"Feature Collection\":return L(r);case\"Scene Service\":return f(r);case\"Image Service\":return d(r);case\"Stream Service\":return S();case\"Vector Tile Service\":return I();case\"KML\":return N();case\"WFS\":return h();case\"WMTS\":return w();case\"WMS\":return g();case\"Feed\":return v();default:return Promise.reject(new e(\"portal:unknown-item-type\",\"Unknown item type '${type}'\",{type:r.type}))}}function y(e){return(0,r[e.className])().then((r=>({constructor:r,properties:e.properties})))}function m(e){return M(e).then((e=>e?{className:\"TileLayer\"}:{className:\"MapImageLayer\"}))}function p(e){return T(e).then((e=>{if(\"object\"==typeof e){const r={};return null!=e.id&&(r.layerId=e.id),{className:\"FeatureLayer\",properties:r}}return{className:\"GroupLayer\"}}))}function f(e){return T(e).then((r=>{if(\"object\"==typeof r){const t={};let a;if(null!=r.id?(t.layerId=r.id,a=`${e.url}/layers/${r.id}`):a=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0){const r={IntegratedMesh:\"IntegratedMeshLayer\",\"3DObject\":\"SceneLayer\",Point:\"SceneLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};for(const t of Object.keys(r))if(-1!==e.typeKeywords.indexOf(t))return{className:r[t]}}return c(a).then((e=>{let r=\"SceneLayer\";const a={Point:\"SceneLayer\",\"3DObject\":\"SceneLayer\",IntegratedMesh:\"IntegratedMeshLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};return e&&e.layerType&&a[e.layerType]&&(r=a[e.layerType]),{className:r,properties:t}}))}return{className:\"GroupLayer\"}}))}async function L(e){await e.load();if(s(e,\"Map Notes\"))return{className:\"MapNotesLayer\"};if(s(e,\"Route Layer\"))return{className:\"RouteLayer\"};const r=await e.fetchData();return 1===a(r)?{className:\"FeatureLayer\"}:{className:\"GroupLayer\"}}async function d(e){var r,t,a;await e.load();const n=null!=(r=null==(t=e.typeKeywords)?void 0:t.map((e=>e.toLowerCase())))?r:[];if(n.indexOf(\"elevation 3d layer\")>-1)return{className:\"ElevationLayer\"};if(n.indexOf(\"tiled imagery\")>-1)return{className:\"ImageryTileLayer\"};const o=await e.fetchData(),s=null==o?void 0:o.layerType;if(\"ArcGISTiledImageServiceLayer\"===s)return{className:\"ImageryTileLayer\"};if(\"ArcGISImageServiceLayer\"===s)return{className:\"ImageryLayer\"};return\"map\"===(null==(a=(await c(e.url)).cacheType)?void 0:a.toLowerCase())?{className:\"ImageryTileLayer\"}:{className:\"ImageryLayer\"}}function S(){return{className:\"StreamLayer\"}}function I(){return{className:\"VectorTileLayer\"}}function N(){return{className:\"KMLLayer\"}}function h(){return{className:\"WFSLayer\"}}function g(){return{className:\"WMSLayer\"}}function w(){return{className:\"WMTSLayer\"}}function v(){return{className:\"StreamLayer\"}}function M(e){return c(e.url).then((e=>e.tileInfo))}function T(e){return!e.url||e.url.match(/\\/\\d+$/)?Promise.resolve({}):e.load().then((()=>e.fetchData())).then((async r=>{if(\"Feature Service\"===e.type)return j(r=await n(r,e.url));return a(r)>0?j(r):c(e.url).then(j)}))}function j(e){return 1===a(e)&&{id:o(e)}}export{i as fromItem,l as selectLayerClassPath};\n"]},"metadata":{},"sourceType":"module"}