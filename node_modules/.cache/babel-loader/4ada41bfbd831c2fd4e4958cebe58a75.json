{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../Dictionary.js\";\nimport r from \"../Feature.js\";\nimport n from \"../ImmutablePointArray.js\";\nimport { p as t, a as i, b as o, f as a, F as l, G as s, v as f, g as c, d as u, o as m, k as g, i as p, c as h, x as w, e as y, H as E } from \"../../chunks/languageUtils.js\";\nimport R from \"../../geometry/Extent.js\";\nimport I from \"../../geometry/Geometry.js\";\nimport A from \"../../geometry/Multipoint.js\";\nimport F from \"../../geometry/Point.js\";\nimport d from \"../../geometry/Polygon.js\";\nimport S from \"../../geometry/Polyline.js\";\nimport { angle2D as G, angleBetween2D as b, bearing2D as j, bearingBetween2D as x, pathsSelfIntersecting as O } from \"./centroid.js\";\nimport { fromJSON as N } from \"../../geometry/support/jsonUtils.js\";\nimport { isClockwise as J } from \"../../geometry/support/coordsUtils.js\";\n\nfunction D(e) {\n  return e instanceof r || \"object\" == typeof e && \"FeatureSetReader\" === e.type;\n}\n\nfunction P(P, M) {\n  P.ringisclockwise = function (e, r) {\n    return M(e, r, function (e, r, a) {\n      t(a, 1, 1);\n      let l = [],\n          s = !1,\n          f = !1;\n      if (null === a[0]) return !1;\n\n      if (i(a[0])) {\n        for (const e of a[0]) {\n          if (!(e instanceof F)) throw new Error(\"Invalid Argument\");\n          l.push(e.hasZ ? e.hasM ? [e.x, e.y, e.z, e.m] : [e.x, e.y, e.z] : [e.x, e.y]);\n        }\n\n        l.length > 0 && (s = a[0][0].hasZ, f = a[0][0].hasM);\n      } else if (a[0] instanceof n) l = a[0]._elements, l.length > 0 && (s = a[0]._hasZ, f = a[0]._hasM);else {\n        if (!o(a[0])) throw new Error(\"Invalid Argument\");\n\n        for (const e of a[0].toArray()) {\n          if (!(e instanceof F)) throw new Error(\"Invalid Argument\");\n          l.push(e.hasZ ? e.hasM ? [e.x, e.y, e.z, e.m] : [e.x, e.y, e.z] : [e.x, e.y]);\n        }\n\n        l.length > 0 && (s = a[0].get(0).hasZ, f = a[0].get(0).hasM);\n      }\n\n      return !(l.length < 3) && J(l, f, s);\n    });\n  }, P.polygon = function (n, i) {\n    return M(n, i, function (i, o, s) {\n      t(s, 1, 1);\n      let f = null;\n\n      if (s[0] instanceof e) {\n        if (f = a(r.parseGeometryFromDictionary(s[0]), n.spatialReference), f instanceof d == !1) throw new Error(\"Illegal Parameter\");\n      } else f = s[0] instanceof d ? N(s[0].toJSON()) : a(new d(JSON.parse(s[0])), n.spatialReference);\n\n      if (null !== f && !1 === f.spatialReference.equals(n.spatialReference)) throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");\n      return l(f);\n    });\n  }, P.polyline = function (n, i) {\n    return M(n, i, function (i, o, s) {\n      t(s, 1, 1);\n      let f = null;\n\n      if (s[0] instanceof e) {\n        if (f = a(r.parseGeometryFromDictionary(s[0]), n.spatialReference), f instanceof S == !1) throw new Error(\"Illegal Parameter\");\n      } else f = s[0] instanceof S ? N(s[0].toJSON()) : a(new S(JSON.parse(s[0])), n.spatialReference);\n\n      if (null !== f && !1 === f.spatialReference.equals(n.spatialReference)) throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");\n      return l(f);\n    });\n  }, P.point = function (n, i) {\n    return M(n, i, function (i, o, s) {\n      t(s, 1, 1);\n      let f = null;\n\n      if (s[0] instanceof e) {\n        if (f = a(r.parseGeometryFromDictionary(s[0]), n.spatialReference), f instanceof F == !1) throw new Error(\"Illegal Parameter\");\n      } else f = s[0] instanceof F ? N(s[0].toJSON()) : a(new F(JSON.parse(s[0])), n.spatialReference);\n\n      if (null !== f && !1 === f.spatialReference.equals(n.spatialReference)) throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");\n      return l(f);\n    });\n  }, P.multipoint = function (n, i) {\n    return M(n, i, function (i, o, s) {\n      t(s, 1, 1);\n      let f = null;\n\n      if (s[0] instanceof e) {\n        if (f = a(r.parseGeometryFromDictionary(s[0]), n.spatialReference), f instanceof A == !1) throw new Error(\"Illegal Parameter\");\n      } else f = s[0] instanceof A ? N(s[0].toJSON()) : a(new A(JSON.parse(s[0])), n.spatialReference);\n\n      if (null !== f && !1 === f.spatialReference.equals(n.spatialReference)) throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");\n      return l(f);\n    });\n  }, P.extent = function (n, i) {\n    return M(n, i, function (i, o, f) {\n      f = s(f), t(f, 1, 1);\n      let c = null;\n      if (f[0] instanceof e) c = a(r.parseGeometryFromDictionary(f[0]), n.spatialReference);else if (f[0] instanceof F) {\n        const e = {\n          xmin: f[0].x,\n          ymin: f[0].y,\n          xmax: f[0].x,\n          ymax: f[0].y,\n          spatialReference: f[0].spatialReference.toJSON()\n        },\n              r = f[0];\n        r.hasZ ? (e.zmin = r.z, e.zmax = r.z) : r.hasM && (e.mmin = r.m, e.mmax = r.m), c = N(e);\n      } else c = f[0] instanceof d || f[0] instanceof S || f[0] instanceof A ? N(f[0].extent.toJSON()) : f[0] instanceof R ? N(f[0].toJSON()) : a(new R(JSON.parse(f[0])), n.spatialReference);\n      if (null !== c && !1 === c.spatialReference.equals(n.spatialReference)) throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");\n      return l(c);\n    });\n  }, P.geometry = function (n, i) {\n    return M(n, i, function (i, o, s) {\n      t(s, 1, 1);\n      let f = null;\n      if (f = D(s[0]) ? a(s[0].geometry(), n.spatialReference) : s[0] instanceof e ? a(r.parseGeometryFromDictionary(s[0]), n.spatialReference) : a(N(JSON.parse(s[0])), n.spatialReference), null !== f && !1 === f.spatialReference.equals(n.spatialReference)) throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");\n      return l(f);\n    });\n  }, P.setgeometry = function (e, r) {\n    return M(e, r, function (e, r, n) {\n      if (t(n, 2, 2), !D(n[0])) throw new Error(\"Illegal Argument\");\n      if (!0 === n[0].immutable) throw new Error(\"Feature is Immutable\");\n      if (!(n[1] instanceof I || null === n[1])) throw new Error(\"Illegal Argument\");\n      return n[0]._geometry = n[1], f;\n    });\n  }, P.feature = function (n, t) {\n    return M(n, t, function (t, i, o) {\n      if (0 === o.length) throw new Error(\"Missing Parameters\");\n      let l = null;\n      if (1 === o.length) {\n        if (c(o[0])) l = r.fromJson(JSON.parse(o[0]));else if (D(o[0])) l = r.createFromArcadeFeature(o[0]);else if (o[0] instanceof I) l = r.createFromGraphicLikeObject(o[0], null, null);else {\n          if (!(o[0] instanceof e)) throw new Error(\"Illegal Argument\");\n          {\n            let n = o[0].hasField(\"geometry\") ? o[0].field(\"geometry\") : null,\n                t = o[0].hasField(\"attributes\") ? o[0].field(\"attributes\") : null;\n            null !== n && n instanceof e && (n = r.parseGeometryFromDictionary(n)), null !== t && (t = r.parseAttributesFromDictionary(t)), l = r.createFromGraphicLikeObject(n, t, null);\n          }\n        }\n      } else if (2 === o.length) {\n        let n = null,\n            t = null;\n        if (null !== o[0]) if (o[0] instanceof I) n = o[0];else {\n          if (!(n instanceof e)) throw new Error(\"Illegal Argument\");\n          n = r.parseGeometryFromDictionary(o[0]);\n        }\n\n        if (null !== o[1]) {\n          if (!(o[1] instanceof e)) throw new Error(\"Illegal Argument\");\n          t = r.parseAttributesFromDictionary(o[1]);\n        }\n\n        l = r.createFromGraphicLikeObject(n, t, null);\n      } else {\n        let n = null;\n        const t = {};\n        if (null !== o[0]) if (o[0] instanceof I) n = o[0];else {\n          if (!(n instanceof e)) throw new Error(\"Illegal Argument\");\n          n = r.parseGeometryFromDictionary(o[0]);\n        }\n\n        for (let e = 1; e < o.length; e += 2) {\n          const r = u(o[e]),\n                n = o[e + 1];\n          if (!(null == n || c(n) || isNaN(n) || m(n) || g(n) || p(n))) throw new Error(\"Illegal Argument\");\n          if (h(n) || !1 === w(n)) throw new Error(\"Illegal Argument\");\n          t[r] = n === f ? null : n;\n        }\n\n        l = r.createFromGraphicLikeObject(n, t, null);\n      }\n      return l._geometry = a(l.geometry(), n.spatialReference), l.immutable = !1, l;\n    });\n  }, P.dictionary = function (r, n) {\n    return M(r, n, function (r, n, t) {\n      if (0 === t.length) {\n        const r = new e();\n        return r.immutable = !1, r;\n      }\n\n      if (1 === t.length && c(t[0])) try {\n        const r = JSON.parse(t[0]),\n              n = e.convertObjectToArcadeDictionary(r, !1);\n        return n.immutable = !1, n;\n      } catch (s) {\n        throw new Error(\"Missing Parameters or Illegal Json\");\n      }\n      if (t.length % 2 != 0) throw new Error(\"Missing Parameters\");\n      const a = {};\n\n      for (let e = 0; e < t.length; e += 2) {\n        const r = u(t[e]),\n              n = t[e + 1];\n        if (!(null == n || c(n) || isNaN(n) || m(n) || g(n) || p(n) || i(n) || o(n))) throw new Error(\"Illegal Argument\");\n        if (h(n)) throw new Error(\"Illegal Argument\");\n        a[r] = n === f ? null : n;\n      }\n\n      const l = new e(a);\n      return l.immutable = !1, l;\n    });\n  }, P.haskey = function (r, n) {\n    return M(r, n, function (r, n, i) {\n      t(i, 2, 2);\n      const o = u(i[1]);\n      if (D(i[0])) return i[0].hasField(o);\n      if (i[0] instanceof e) return i[0].hasField(o);\n      throw new Error(\"Illegal Argument\");\n    });\n  }, P.indexof = function (e, r) {\n    return M(e, r, function (e, r, n) {\n      t(n, 2, 2);\n      const a = n[1];\n\n      if (i(n[0])) {\n        for (let e = 0; e < n[0].length; e++) if (y(a, n[0][e])) return e;\n\n        return -1;\n      }\n\n      if (o(n[0])) {\n        const e = n[0].length();\n\n        for (let r = 0; r < e; r++) if (y(a, n[0].get(r))) return r;\n\n        return -1;\n      }\n\n      throw new Error(\"Illegal Argument\");\n    });\n  }, P.angle = function (e, r) {\n    return M(e, r, function (e, r, n) {\n      if (n = s(n), t(n, 2, 3), !(n[0] instanceof F)) throw new Error(\"Illegal Argument\");\n      if (!(n[1] instanceof F)) throw new Error(\"Illegal Argument\");\n      if (n.length > 2 && !(n[2] instanceof F)) throw new Error(\"Illegal Argument\");\n      return 2 === n.length ? G(n[0], n[1]) : b(n[0], n[1], n[2]);\n    });\n  }, P.bearing = function (e, r) {\n    return M(e, r, function (e, r, n) {\n      if (n = s(n), t(n, 2, 3), !(n[0] instanceof F)) throw new Error(\"Illegal Argument\");\n      if (!(n[1] instanceof F)) throw new Error(\"Illegal Argument\");\n      if (n.length > 2 && !(n[2] instanceof F)) throw new Error(\"Illegal Argument\");\n      return 2 === n.length ? j(n[0], n[1]) : x(n[0], n[1], n[2]);\n    });\n  }, P.isselfintersecting = function (e, r) {\n    return M(e, r, function (r, n, a) {\n      a = s(a), t(a, 1, 1);\n      let l = a[0];\n      if (l instanceof d) return l.isSelfIntersecting;\n      if (l instanceof S) return l = l.paths, O(l);\n\n      if (l instanceof A) {\n        const e = l.points;\n\n        for (let r = 0; r < e.length; r++) for (let n = 0; n < e.length; n++) if (n !== r) {\n          let t = !0;\n\n          for (let i = 0; i < e[r].length; i++) if (e[r][i] !== e[n][i]) {\n            t = !1;\n            break;\n          }\n\n          if (!0 === t) return !0;\n        }\n      }\n\n      return !(!i(l) && !o(l)) && (l = E(l, e.spatialReference), null !== l && (l = l.paths), O(l));\n    });\n  };\n}\n\nexport { P as registerFunctions };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/arcade/functions/geometry.js"],"names":["e","r","n","p","t","a","i","b","o","f","F","l","G","s","v","g","c","d","u","m","k","h","x","w","y","H","E","R","I","A","S","angle2D","angleBetween2D","bearing2D","j","bearingBetween2D","pathsSelfIntersecting","O","fromJSON","N","isClockwise","J","D","type","P","M","ringisclockwise","Error","push","hasZ","hasM","z","length","_elements","_hasZ","_hasM","toArray","get","polygon","parseGeometryFromDictionary","spatialReference","toJSON","JSON","parse","equals","polyline","point","multipoint","extent","xmin","ymin","xmax","ymax","zmin","zmax","mmin","mmax","geometry","setgeometry","immutable","_geometry","feature","fromJson","createFromArcadeFeature","createFromGraphicLikeObject","hasField","field","parseAttributesFromDictionary","isNaN","dictionary","convertObjectToArcadeDictionary","haskey","indexof","angle","bearing","isselfintersecting","isSelfIntersecting","paths","points","registerFunctions"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../Dictionary.js\";import r from\"../Feature.js\";import n from\"../ImmutablePointArray.js\";import{p as t,a as i,b as o,f as a,F as l,G as s,v as f,g as c,d as u,o as m,k as g,i as p,c as h,x as w,e as y,H as E}from\"../../chunks/languageUtils.js\";import R from\"../../geometry/Extent.js\";import I from\"../../geometry/Geometry.js\";import A from\"../../geometry/Multipoint.js\";import F from\"../../geometry/Point.js\";import d from\"../../geometry/Polygon.js\";import S from\"../../geometry/Polyline.js\";import{angle2D as G,angleBetween2D as b,bearing2D as j,bearingBetween2D as x,pathsSelfIntersecting as O}from\"./centroid.js\";import{fromJSON as N}from\"../../geometry/support/jsonUtils.js\";import{isClockwise as J}from\"../../geometry/support/coordsUtils.js\";function D(e){return e instanceof r||\"object\"==typeof e&&\"FeatureSetReader\"===e.type}function P(P,M){P.ringisclockwise=function(e,r){return M(e,r,(function(e,r,a){t(a,1,1);let l=[],s=!1,f=!1;if(null===a[0])return!1;if(i(a[0])){for(const e of a[0]){if(!(e instanceof F))throw new Error(\"Invalid Argument\");l.push(e.hasZ?e.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y])}l.length>0&&(s=a[0][0].hasZ,f=a[0][0].hasM)}else if(a[0]instanceof n)l=a[0]._elements,l.length>0&&(s=a[0]._hasZ,f=a[0]._hasM);else{if(!o(a[0]))throw new Error(\"Invalid Argument\");for(const e of a[0].toArray()){if(!(e instanceof F))throw new Error(\"Invalid Argument\");l.push(e.hasZ?e.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y])}l.length>0&&(s=a[0].get(0).hasZ,f=a[0].get(0).hasM)}return!(l.length<3)&&J(l,f,s)}))},P.polygon=function(n,i){return M(n,i,(function(i,o,s){t(s,1,1);let f=null;if(s[0]instanceof e){if(f=a(r.parseGeometryFromDictionary(s[0]),n.spatialReference),f instanceof d==!1)throw new Error(\"Illegal Parameter\")}else f=s[0]instanceof d?N(s[0].toJSON()):a(new d(JSON.parse(s[0])),n.spatialReference);if(null!==f&&!1===f.spatialReference.equals(n.spatialReference))throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");return l(f)}))},P.polyline=function(n,i){return M(n,i,(function(i,o,s){t(s,1,1);let f=null;if(s[0]instanceof e){if(f=a(r.parseGeometryFromDictionary(s[0]),n.spatialReference),f instanceof S==!1)throw new Error(\"Illegal Parameter\")}else f=s[0]instanceof S?N(s[0].toJSON()):a(new S(JSON.parse(s[0])),n.spatialReference);if(null!==f&&!1===f.spatialReference.equals(n.spatialReference))throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");return l(f)}))},P.point=function(n,i){return M(n,i,(function(i,o,s){t(s,1,1);let f=null;if(s[0]instanceof e){if(f=a(r.parseGeometryFromDictionary(s[0]),n.spatialReference),f instanceof F==!1)throw new Error(\"Illegal Parameter\")}else f=s[0]instanceof F?N(s[0].toJSON()):a(new F(JSON.parse(s[0])),n.spatialReference);if(null!==f&&!1===f.spatialReference.equals(n.spatialReference))throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");return l(f)}))},P.multipoint=function(n,i){return M(n,i,(function(i,o,s){t(s,1,1);let f=null;if(s[0]instanceof e){if(f=a(r.parseGeometryFromDictionary(s[0]),n.spatialReference),f instanceof A==!1)throw new Error(\"Illegal Parameter\")}else f=s[0]instanceof A?N(s[0].toJSON()):a(new A(JSON.parse(s[0])),n.spatialReference);if(null!==f&&!1===f.spatialReference.equals(n.spatialReference))throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");return l(f)}))},P.extent=function(n,i){return M(n,i,(function(i,o,f){f=s(f),t(f,1,1);let c=null;if(f[0]instanceof e)c=a(r.parseGeometryFromDictionary(f[0]),n.spatialReference);else if(f[0]instanceof F){const e={xmin:f[0].x,ymin:f[0].y,xmax:f[0].x,ymax:f[0].y,spatialReference:f[0].spatialReference.toJSON()},r=f[0];r.hasZ?(e.zmin=r.z,e.zmax=r.z):r.hasM&&(e.mmin=r.m,e.mmax=r.m),c=N(e)}else c=f[0]instanceof d||f[0]instanceof S||f[0]instanceof A?N(f[0].extent.toJSON()):f[0]instanceof R?N(f[0].toJSON()):a(new R(JSON.parse(f[0])),n.spatialReference);if(null!==c&&!1===c.spatialReference.equals(n.spatialReference))throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");return l(c)}))},P.geometry=function(n,i){return M(n,i,(function(i,o,s){t(s,1,1);let f=null;if(f=D(s[0])?a(s[0].geometry(),n.spatialReference):s[0]instanceof e?a(r.parseGeometryFromDictionary(s[0]),n.spatialReference):a(N(JSON.parse(s[0])),n.spatialReference),null!==f&&!1===f.spatialReference.equals(n.spatialReference))throw new Error(\"Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.\");return l(f)}))},P.setgeometry=function(e,r){return M(e,r,(function(e,r,n){if(t(n,2,2),!D(n[0]))throw new Error(\"Illegal Argument\");if(!0===n[0].immutable)throw new Error(\"Feature is Immutable\");if(!(n[1]instanceof I||null===n[1]))throw new Error(\"Illegal Argument\");return n[0]._geometry=n[1],f}))},P.feature=function(n,t){return M(n,t,(function(t,i,o){if(0===o.length)throw new Error(\"Missing Parameters\");let l=null;if(1===o.length)if(c(o[0]))l=r.fromJson(JSON.parse(o[0]));else if(D(o[0]))l=r.createFromArcadeFeature(o[0]);else if(o[0]instanceof I)l=r.createFromGraphicLikeObject(o[0],null,null);else{if(!(o[0]instanceof e))throw new Error(\"Illegal Argument\");{let n=o[0].hasField(\"geometry\")?o[0].field(\"geometry\"):null,t=o[0].hasField(\"attributes\")?o[0].field(\"attributes\"):null;null!==n&&n instanceof e&&(n=r.parseGeometryFromDictionary(n)),null!==t&&(t=r.parseAttributesFromDictionary(t)),l=r.createFromGraphicLikeObject(n,t,null)}}else if(2===o.length){let n=null,t=null;if(null!==o[0])if(o[0]instanceof I)n=o[0];else{if(!(n instanceof e))throw new Error(\"Illegal Argument\");n=r.parseGeometryFromDictionary(o[0])}if(null!==o[1]){if(!(o[1]instanceof e))throw new Error(\"Illegal Argument\");t=r.parseAttributesFromDictionary(o[1])}l=r.createFromGraphicLikeObject(n,t,null)}else{let n=null;const t={};if(null!==o[0])if(o[0]instanceof I)n=o[0];else{if(!(n instanceof e))throw new Error(\"Illegal Argument\");n=r.parseGeometryFromDictionary(o[0])}for(let e=1;e<o.length;e+=2){const r=u(o[e]),n=o[e+1];if(!(null==n||c(n)||isNaN(n)||m(n)||g(n)||p(n)))throw new Error(\"Illegal Argument\");if(h(n)||!1===w(n))throw new Error(\"Illegal Argument\");t[r]=n===f?null:n}l=r.createFromGraphicLikeObject(n,t,null)}return l._geometry=a(l.geometry(),n.spatialReference),l.immutable=!1,l}))},P.dictionary=function(r,n){return M(r,n,(function(r,n,t){if(0===t.length){const r=new e;return r.immutable=!1,r}if(1===t.length&&c(t[0]))try{const r=JSON.parse(t[0]),n=e.convertObjectToArcadeDictionary(r,!1);return n.immutable=!1,n}catch(s){throw new Error(\"Missing Parameters or Illegal Json\")}if(t.length%2!=0)throw new Error(\"Missing Parameters\");const a={};for(let e=0;e<t.length;e+=2){const r=u(t[e]),n=t[e+1];if(!(null==n||c(n)||isNaN(n)||m(n)||g(n)||p(n)||i(n)||o(n)))throw new Error(\"Illegal Argument\");if(h(n))throw new Error(\"Illegal Argument\");a[r]=n===f?null:n}const l=new e(a);return l.immutable=!1,l}))},P.haskey=function(r,n){return M(r,n,(function(r,n,i){t(i,2,2);const o=u(i[1]);if(D(i[0]))return i[0].hasField(o);if(i[0]instanceof e)return i[0].hasField(o);throw new Error(\"Illegal Argument\")}))},P.indexof=function(e,r){return M(e,r,(function(e,r,n){t(n,2,2);const a=n[1];if(i(n[0])){for(let e=0;e<n[0].length;e++)if(y(a,n[0][e]))return e;return-1}if(o(n[0])){const e=n[0].length();for(let r=0;r<e;r++)if(y(a,n[0].get(r)))return r;return-1}throw new Error(\"Illegal Argument\")}))},P.angle=function(e,r){return M(e,r,(function(e,r,n){if(n=s(n),t(n,2,3),!(n[0]instanceof F))throw new Error(\"Illegal Argument\");if(!(n[1]instanceof F))throw new Error(\"Illegal Argument\");if(n.length>2&&!(n[2]instanceof F))throw new Error(\"Illegal Argument\");return 2===n.length?G(n[0],n[1]):b(n[0],n[1],n[2])}))},P.bearing=function(e,r){return M(e,r,(function(e,r,n){if(n=s(n),t(n,2,3),!(n[0]instanceof F))throw new Error(\"Illegal Argument\");if(!(n[1]instanceof F))throw new Error(\"Illegal Argument\");if(n.length>2&&!(n[2]instanceof F))throw new Error(\"Illegal Argument\");return 2===n.length?j(n[0],n[1]):x(n[0],n[1],n[2])}))},P.isselfintersecting=function(e,r){return M(e,r,(function(r,n,a){a=s(a),t(a,1,1);let l=a[0];if(l instanceof d)return l.isSelfIntersecting;if(l instanceof S)return l=l.paths,O(l);if(l instanceof A){const e=l.points;for(let r=0;r<e.length;r++)for(let n=0;n<e.length;n++)if(n!==r){let t=!0;for(let i=0;i<e[r].length;i++)if(e[r][i]!==e[n][i]){t=!1;break}if(!0===t)return!0}}return!(!i(l)&&!o(l))&&(l=E(l,e.spatialReference),null!==l&&(l=l.paths),O(l))}))}}export{P as registerFunctions};\n"]},"metadata":{},"sourceType":"module"}