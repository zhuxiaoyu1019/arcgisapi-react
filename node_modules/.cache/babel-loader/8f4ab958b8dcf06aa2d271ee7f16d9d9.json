{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Evented.js\";\nimport t from \"../../../core/has.js\";\nimport { createResolver as s } from \"../../../core/promiseUtils.js\";\nconst i = 1 / t(\"mapview-transitions-duration\");\n\nclass a extends e {\n  constructor() {\n    super(...arguments), this._fadeOutResolver = null, this._fadeInResolver = null, this._clips = null, this.computedVisible = !0, this.computedOpacity = 1, this.fadeTransitionEnabled = !1, this.inFadeTransition = !1, this._isReady = !1, this._opacity = 1, this._stage = null, this._visible = !0;\n  }\n\n  get clips() {\n    return this._clips;\n  }\n\n  set clips(e) {\n    this._clips = e, this.requestRender();\n  }\n\n  get isReady() {\n    return this._isReady;\n  }\n\n  get opacity() {\n    return this._opacity;\n  }\n\n  set opacity(e) {\n    this._opacity !== e && (this._opacity = Math.min(1, Math.max(e, 0)), this.requestRender());\n  }\n\n  get stage() {\n    return this._stage;\n  }\n\n  set stage(e) {\n    if (this._stage === e) return;\n    const t = this._stage;\n    this._stage = e, e ? this._stage.untrashDisplayObject(this) || (this.onAttach(), this.emit(\"attach\")) : t.trashDisplayObject(this);\n  }\n\n  get visible() {\n    return this._visible;\n  }\n\n  set visible(e) {\n    this._visible !== e && (this._visible = e, this.requestRender());\n  }\n\n  fadeIn() {\n    return this._fadeInResolver || (this._fadeOutResolver && (this._fadeOutResolver(), this._fadeOutResolver = null), this.computedOpacity = 0, this.fadeTransitionEnabled = !0, this._fadeInResolver = s(), this.requestRender()), this._fadeInResolver.promise;\n  }\n\n  fadeOut() {\n    return this._fadeOutResolver || (this._fadeInResolver && (this._fadeInResolver(), this._fadeInResolver = null), this.fadeTransitionEnabled = !0, this._fadeOutResolver = s(), this.requestRender()), this._fadeOutResolver.promise;\n  }\n\n  beforeRender(e) {\n    this.updateTransitionProperties(e.deltaTime, e.state.scale);\n  }\n\n  afterRender(e) {\n    this._fadeInResolver && this.computedOpacity === this.opacity ? (this._fadeInResolver(), this._fadeInResolver = null) : this._fadeOutResolver && 0 === this.computedOpacity && (this._fadeOutResolver(), this._fadeOutResolver = null);\n  }\n\n  remove() {\n    var e;\n    null == (e = this.parent) || e.removeChild(this);\n  }\n\n  setTransform(e) {}\n\n  processRender(e) {\n    this.stage && this.computedVisible && this.doRender(e);\n  }\n\n  requestRender() {\n    this.stage && this.stage.requestRender();\n  }\n\n  processDetach() {\n    this.onDetach(), this.emit(\"detach\");\n  }\n\n  updateTransitionProperties(e, t) {\n    if (this.fadeTransitionEnabled) {\n      const t = this._fadeOutResolver || !this.visible ? 0 : this.opacity,\n            s = this.computedOpacity;\n      if (s === t) this.computedVisible = this.visible;else {\n        const a = e * i;\n        this.computedOpacity = s > t ? Math.max(t, s - a) : Math.min(t, s + a), this.computedVisible = this.computedOpacity > 0;\n        const h = t === this.computedOpacity;\n        this.inFadeTransition = !h, h || this.requestRender();\n      }\n    } else this.computedOpacity = this.opacity, this.computedVisible = this.visible;\n  }\n\n  onAttach() {}\n\n  onDetach() {}\n\n  doRender(e) {}\n\n  ready() {\n    this._isReady || (this._isReady = !0, this.emit(\"isReady\"), this.requestRender());\n  }\n\n}\n\nexport { a as DisplayObject };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/DisplayObject.js"],"names":["e","t","createResolver","s","i","a","constructor","arguments","_fadeOutResolver","_fadeInResolver","_clips","computedVisible","computedOpacity","fadeTransitionEnabled","inFadeTransition","_isReady","_opacity","_stage","_visible","clips","requestRender","isReady","opacity","Math","min","max","stage","untrashDisplayObject","onAttach","emit","trashDisplayObject","visible","fadeIn","promise","fadeOut","beforeRender","updateTransitionProperties","deltaTime","state","scale","afterRender","remove","parent","removeChild","setTransform","processRender","doRender","processDetach","onDetach","h","ready","DisplayObject"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import t from\"../../../core/has.js\";import{createResolver as s}from\"../../../core/promiseUtils.js\";const i=1/t(\"mapview-transitions-duration\");class a extends e{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit(\"attach\")):t.trashDisplayObject(this)}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=s(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=s(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var e;null==(e=this.parent)||e.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.onDetach(),this.emit(\"detach\")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,s=this.computedOpacity;if(s===t)this.computedVisible=this.visible;else{const a=e*i;this.computedOpacity=s>t?Math.max(t,s-a):Math.min(t,s+a),this.computedVisible=this.computedOpacity>0;const h=t===this.computedOpacity;this.inFadeTransition=!h,h||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit(\"isReady\"),this.requestRender())}}export{a as DisplayObject};\n"]},"metadata":{},"sourceType":"module"}