{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"./ArrayPool.js\";\nimport s from \"./Evented.js\";\nimport { clone as i } from \"./lang.js\";\nimport { assumeNonNull as r } from \"./maybe.js\";\nimport n from \"./ObjectPool.js\";\nimport { schedule as h } from \"./scheduling.js\";\nimport { ensureType as o, ensureOneOfType as l } from \"./accessorSupport/ensureType.js\";\nimport { trackAccess as a } from \"./accessorSupport/tracking.js\";\nimport { property as c } from \"./accessorSupport/decorators/property.js\";\nimport { subclass as f } from \"./accessorSupport/decorators/subclass.js\";\nimport { SimpleObservable as _ } from \"./accessorSupport/tracking/SimpleObservable.js\";\nvar m;\n\nclass u {\n  constructor() {\n    this.target = null, this.cancellable = !1, this.defaultPrevented = !1, this.item = void 0, this.type = void 0;\n  }\n\n  preventDefault() {\n    this.cancellable && (this.defaultPrevented = !0);\n  }\n\n  reset(e) {\n    this.defaultPrevented = !1, this.item = e;\n  }\n\n}\n\nconst g = new n(u, void 0, e => {\n  e.item = null, e.target = null, e.defaultPrevented = !1, e.cancellable = !1;\n}),\n      p = () => {};\n\nfunction b(e) {\n  return e ? e instanceof B ? e.toArray() : e.length ? Array.prototype.slice.apply(e) : [] : [];\n}\n\nfunction d(e) {\n  if (e && e.length) return e[0];\n}\n\nfunction v(e, t, s, i) {\n  const r = Math.min(e.length - s, t.length - i);\n  let n = 0;\n\n  for (; n < r && e[s + n] === t[i + n];) n++;\n\n  return n;\n}\n\nfunction y(e, t, s, i) {\n  t && t.forEach((t, r, n) => {\n    e.push(t), y(e, s.call(i, t, r, n), s, i);\n  });\n}\n\nconst C = new Set(),\n      A = new Set(),\n      x = new Set(),\n      E = new Map();\nlet j = 0,\n    B = m = class extends s.EventedAccessor {\n  constructor(e) {\n    super(e), this._chgListeners = [], this._notifications = null, this._timer = null, this._observable = new _(), this.length = 0, this._items = [], Object.defineProperty(this, \"uid\", {\n      value: j++\n    });\n  }\n\n  static isCollection(e) {\n    return null != e && e instanceof m;\n  }\n\n  normalizeCtorArgs(e) {\n    return e ? Array.isArray(e) || e instanceof m ? {\n      items: e\n    } : e : {};\n  }\n\n  *[Symbol.iterator]() {\n    yield* this.items;\n  }\n\n  get items() {\n    return a(this._observable), this._items;\n  }\n\n  set items(e) {\n    this._emitBeforeChanges(1) || (this._splice(0, this.length, ...b(e)), this._emitAfterChanges(1));\n  }\n\n  hasEventListener(e) {\n    return \"change\" === e ? this._chgListeners.length > 0 : this._emitter.hasEventListener(e);\n  }\n\n  on(e, t) {\n    if (\"change\" === e) {\n      const e = this._chgListeners,\n            s = {\n        removed: !1,\n        callback: t\n      };\n      return e.push(s), this._notifications && this._notifications.push({\n        listeners: e.slice(),\n        items: this._items.slice(),\n        changes: []\n      }), {\n        remove() {\n          this.remove = p, s.removed = !0, e.splice(e.indexOf(s), 1);\n        }\n\n      };\n    }\n\n    return this._emitter.on(e, t);\n  }\n\n  once(e, t) {\n    const s = this.on(e, t);\n    return {\n      remove() {\n        s.remove();\n      }\n\n    };\n  }\n\n  add(e, t) {\n    if (a(this._observable), this._emitBeforeChanges(1)) return this;\n    const s = this.getNextIndex(null != t ? t : null);\n    return this._splice(s, 0, e), this._emitAfterChanges(1), this;\n  }\n\n  addMany(e, t = this._items.length) {\n    if (a(this._observable), !e || !e.length) return this;\n    if (this._emitBeforeChanges(1)) return this;\n    const s = this.getNextIndex(t);\n    return this._splice(s, 0, ...b(e)), this._emitAfterChanges(1), this;\n  }\n\n  removeAll() {\n    if (a(this._observable), !this.length || this._emitBeforeChanges(2)) return [];\n    const e = this._splice(0, this.length) || [];\n    return this._emitAfterChanges(2), e;\n  }\n\n  clone() {\n    return a(this._observable), this._createNewInstance({\n      items: this._items.map(i)\n    });\n  }\n\n  concat(...e) {\n    a(this._observable);\n    const t = e.map(b);\n    return this._createNewInstance({\n      items: this._items.concat(...t)\n    });\n  }\n\n  drain(e, t) {\n    if (a(this._observable), !this.length || this._emitBeforeChanges(2)) return;\n    const s = r(this._splice(0, this.length)),\n          i = s.length;\n\n    for (let r = 0; r < i; r++) e.call(t, s[r], r, s);\n\n    this._emitAfterChanges(2);\n  }\n\n  every(e, t) {\n    return a(this._observable), this._items.every(e, t);\n  }\n\n  filter(e, t) {\n    let s;\n    return a(this._observable), s = 2 === arguments.length ? this._items.filter(e, t) : this._items.filter(e), this._createNewInstance({\n      items: s\n    });\n  }\n\n  find(e, t) {\n    return a(this._observable), this._items.find(e, t);\n  }\n\n  findIndex(e, t) {\n    return a(this._observable), this._items.findIndex(e, t);\n  }\n\n  flatten(e, t) {\n    a(this._observable);\n    const s = [];\n    return y(s, this, e, t), new m(s);\n  }\n\n  forEach(e, t) {\n    return a(this._observable), this._items.forEach(e, t);\n  }\n\n  getItemAt(e) {\n    return a(this._observable), this._items[e];\n  }\n\n  getNextIndex(e) {\n    a(this._observable);\n    const t = this.length;\n    return (e = null == e ? t : e) < 0 ? e = 0 : e > t && (e = t), e;\n  }\n\n  includes(e, t = 0) {\n    return a(this._observable), this._items.includes(e, t);\n  }\n\n  indexOf(e, t = 0) {\n    return a(this._observable), this._items.indexOf(e, t);\n  }\n\n  join(e = \",\") {\n    return a(this._observable), this._items.join(e);\n  }\n\n  lastIndexOf(e, t = this.length - 1) {\n    return a(this._observable), this._items.lastIndexOf(e, t);\n  }\n\n  map(e, t) {\n    a(this._observable);\n\n    const s = this._items.map(e, t);\n\n    return new m({\n      items: s\n    });\n  }\n\n  reorder(e, t = this.length - 1) {\n    a(this._observable);\n    const s = this.indexOf(e);\n\n    if (-1 !== s) {\n      if (t < 0 ? t = 0 : t >= this.length && (t = this.length - 1), s !== t) {\n        if (this._emitBeforeChanges(4)) return e;\n        this._splice(s, 1), this._splice(t, 0, e), this._emitAfterChanges(4);\n      }\n\n      return e;\n    }\n  }\n\n  pop() {\n    if (a(this._observable), !this.length || this._emitBeforeChanges(2)) return;\n    const e = d(this._splice(this.length - 1, 1));\n    return this._emitAfterChanges(2), e;\n  }\n\n  push(...e) {\n    return a(this._observable), this._emitBeforeChanges(1) || (this._splice(this.length, 0, ...e), this._emitAfterChanges(1)), this.length;\n  }\n\n  reduce(e, t) {\n    a(this._observable);\n    const s = this._items;\n    return 2 === arguments.length ? s.reduce(e, t) : s.reduce(e);\n  }\n\n  reduceRight(e, t) {\n    a(this._observable);\n    const s = this._items;\n    return 2 === arguments.length ? s.reduceRight(e, t) : s.reduceRight(e);\n  }\n\n  remove(e) {\n    return a(this._observable), this.removeAt(this.indexOf(e));\n  }\n\n  removeAt(e) {\n    if (a(this._observable), e < 0 || e >= this.length || this._emitBeforeChanges(2)) return;\n    const t = d(this._splice(e, 1));\n    return this._emitAfterChanges(2), t;\n  }\n\n  removeMany(e) {\n    if (a(this._observable), !e || !e.length || this._emitBeforeChanges(2)) return [];\n    const t = e instanceof m ? e.toArray() : e,\n          s = this._items,\n          i = [],\n          r = t.length;\n\n    for (let n = 0; n < r; n++) {\n      const e = t[n],\n            r = s.indexOf(e);\n\n      if (r > -1) {\n        const e = 1 + v(t, s, n + 1, r + 1),\n              h = this._splice(r, e);\n\n        h && h.length > 0 && i.push.apply(i, h), n += e - 1;\n      }\n    }\n\n    return this._emitAfterChanges(2), i;\n  }\n\n  reverse() {\n    if (a(this._observable), this._emitBeforeChanges(4)) return this;\n\n    const e = this._splice(0, this.length);\n\n    return e && (e.reverse(), this._splice(0, 0, ...e)), this._emitAfterChanges(4), this;\n  }\n\n  shift() {\n    if (a(this._observable), !this.length || this._emitBeforeChanges(2)) return;\n    const e = d(this._splice(0, 1));\n    return this._emitAfterChanges(2), e;\n  }\n\n  slice(e = 0, t = this.length) {\n    return a(this._observable), this._createNewInstance({\n      items: this._items.slice(e, t)\n    });\n  }\n\n  some(e, t) {\n    return a(this._observable), this._items.some(e, t);\n  }\n\n  sort(e) {\n    if (a(this._observable), !this.length || this._emitBeforeChanges(4)) return this;\n    const t = r(this._splice(0, this.length));\n    return arguments.length ? t.sort(e) : t.sort(), this._splice(0, 0, ...t), this._emitAfterChanges(4), this;\n  }\n\n  splice(e, t, ...s) {\n    a(this._observable);\n    const i = (t ? 2 : 0) | (s.length ? 1 : 0);\n    if (this._emitBeforeChanges(i)) return [];\n    const r = this._splice(e, t, ...s) || [];\n    return this._emitAfterChanges(i), r;\n  }\n\n  toArray() {\n    return a(this._observable), this._items.slice();\n  }\n\n  toJSON() {\n    return a(this._observable), this.toArray();\n  }\n\n  toLocaleString() {\n    return a(this._observable), this._items.toLocaleString();\n  }\n\n  toString() {\n    return a(this._observable), this._items.toString();\n  }\n\n  unshift(...e) {\n    return a(this._observable), !e.length || this._emitBeforeChanges(1) || (this._splice(0, 0, ...e), this._emitAfterChanges(1)), this.length;\n  }\n\n  _createNewInstance(e) {\n    return new this.constructor(e);\n  }\n\n  _splice(e, t, ...s) {\n    const i = this._items,\n          r = this.constructor.prototype.itemType;\n    let n, o;\n\n    if (!this._notifications && this.hasEventListener(\"change\") && (this._notifications = [{\n      listeners: this._chgListeners.slice(),\n      items: this._items.slice(),\n      changes: []\n    }], this._timer && this._timer.remove(), this._timer = h(() => this._dispatchChange())), t) {\n      if (o = i.splice(e, t), this.hasEventListener(\"before-remove\")) {\n        const t = g.acquire();\n        t.target = this, t.cancellable = !0;\n\n        for (let s = 0, r = o.length; s < r; s++) n = o[s], t.reset(n), this.emit(\"before-remove\", t), t.defaultPrevented && (o.splice(s, 1), i.splice(e, 0, n), e += 1, s -= 1, r -= 1);\n\n        g.release(t);\n      }\n\n      if (this.length = this._items.length, this.hasEventListener(\"after-remove\")) {\n        const e = g.acquire();\n        e.target = this, e.cancellable = !1;\n        const t = o.length;\n\n        for (let s = 0; s < t; s++) e.reset(o[s]), this.emit(\"after-remove\", e);\n\n        g.release(e);\n      }\n    }\n\n    if (s && s.length) {\n      if (r) {\n        const e = [];\n\n        for (const t of s) {\n          const s = r.ensureType(t);\n          null == s && null != t || e.push(s);\n        }\n\n        s = e;\n      }\n\n      const t = this.hasEventListener(\"before-add\"),\n            n = this.hasEventListener(\"after-add\"),\n            h = e === this.length;\n\n      if (t || n) {\n        const r = g.acquire();\n        r.target = this, r.cancellable = !0;\n        const o = g.acquire();\n        o.target = this, o.cancellable = !1;\n\n        for (const l of s) t ? (r.reset(l), this.emit(\"before-add\", r), r.defaultPrevented || (h ? i.push(l) : i.splice(e++, 0, l), this._set(\"length\", i.length), n && (o.reset(l), this.emit(\"after-add\", o)))) : (h ? i.push(l) : i.splice(e++, 0, l), this._set(\"length\", i.length), o.reset(l), this.emit(\"after-add\", o));\n\n        g.release(o), g.release(r);\n      } else {\n        if (h) for (const e of s) i.push(e);else i.splice(e, 0, ...s);\n\n        this._set(\"length\", i.length);\n      }\n    }\n\n    return (s && s.length || o && o.length) && this._notifyChangeEvent(s, o), o;\n  }\n\n  _emitBeforeChanges(e) {\n    let t = !1;\n\n    if (this.hasEventListener(\"before-changes\")) {\n      const s = g.acquire();\n      s.target = this, s.cancellable = !0, s.type = e, this.emit(\"before-changes\", s), t = s.defaultPrevented, g.release(s);\n    }\n\n    return t;\n  }\n\n  _emitAfterChanges(e) {\n    if (this.hasEventListener(\"after-changes\")) {\n      const t = g.acquire();\n      t.target = this, t.cancellable = !1, t.type = e, this.emit(\"after-changes\", t), g.release(t);\n    }\n\n    this._observable.notify();\n  }\n\n  _notifyChangeEvent(e, t) {\n    this.hasEventListener(\"change\") && this._notifications && this._notifications[this._notifications.length - 1].changes.push({\n      added: e,\n      removed: t\n    });\n  }\n\n  _dispatchChange() {\n    if (this._timer && (this._timer.remove(), this._timer = null), !this._notifications) return;\n    const e = this._notifications;\n    this._notifications = null;\n\n    for (const s of e) {\n      const e = s.changes;\n      C.clear(), A.clear(), x.clear();\n\n      for (const {\n        added: t,\n        removed: s\n      } of e) {\n        if (t) if (0 === x.size && 0 === A.size) for (const e of t) C.add(e);else for (const e of t) A.has(e) ? (x.add(e), A.delete(e)) : x.has(e) || C.add(e);\n        if (s) if (0 === x.size && 0 === C.size) for (const e of s) A.add(e);else for (const e of s) C.has(e) ? C.delete(e) : (x.delete(e), A.add(e));\n      }\n\n      const i = t.acquire();\n      C.forEach(e => {\n        i.push(e);\n      });\n      const r = t.acquire();\n      A.forEach(e => {\n        r.push(e);\n      });\n      const n = this._items,\n            h = s.items,\n            o = t.acquire();\n\n      if (x.forEach(e => {\n        h.indexOf(e) !== n.indexOf(e) && o.push(e);\n      }), s.listeners && (i.length || r.length || o.length)) {\n        const e = {\n          target: this,\n          added: i,\n          removed: r,\n          moved: o\n        },\n              t = s.listeners.length;\n\n        for (let i = 0; i < t; i++) {\n          const t = s.listeners[i];\n          t.removed || t.callback.call(this, e);\n        }\n      }\n\n      t.release(i), t.release(r), t.release(o);\n    }\n\n    C.clear(), A.clear(), x.clear();\n  }\n\n};\nB.ofType = t => {\n  if (!t) return m;\n  if (E.has(t)) return E.get(t);\n  let s = null;\n  if (\"function\" == typeof t) s = t.prototype.declaredClass;else if (t.base) s = t.base.prototype.declaredClass;else for (const e in t.typeMap) {\n    const i = t.typeMap[e].prototype.declaredClass;\n    s ? s += ` | ${i}` : s = i;\n  }\n  let i = class extends m {};\n  i = e([f(`esri.core.Collection<${s}>`)], i);\n  const r = {\n    Type: t,\n    ensureType: \"function\" == typeof t ? o(t) : l(t)\n  };\n  return Object.defineProperty(i.prototype, \"itemType\", {\n    value: r\n  }), E.set(t, i), i;\n}, e([c()], B.prototype, \"length\", void 0), e([c()], B.prototype, \"items\", null), B = m = e([f(\"esri.core.Collection\")], B);\nvar L = B;\nexport default L;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/core/Collection.js"],"names":["_","e","t","s","clone","i","assumeNonNull","r","n","schedule","h","ensureType","o","ensureOneOfType","l","trackAccess","a","property","c","subclass","f","SimpleObservable","m","u","constructor","target","cancellable","defaultPrevented","item","type","preventDefault","reset","g","p","b","B","toArray","length","Array","prototype","slice","apply","d","v","Math","min","y","forEach","push","call","C","Set","A","x","E","Map","j","EventedAccessor","_chgListeners","_notifications","_timer","_observable","_items","Object","defineProperty","value","isCollection","normalizeCtorArgs","isArray","items","Symbol","iterator","_emitBeforeChanges","_splice","_emitAfterChanges","hasEventListener","_emitter","on","removed","callback","listeners","changes","remove","splice","indexOf","once","add","getNextIndex","addMany","removeAll","_createNewInstance","map","concat","drain","every","filter","arguments","find","findIndex","flatten","getItemAt","includes","join","lastIndexOf","reorder","pop","reduce","reduceRight","removeAt","removeMany","reverse","shift","some","sort","toJSON","toLocaleString","toString","unshift","itemType","_dispatchChange","acquire","emit","release","_set","_notifyChangeEvent","notify","added","clear","size","has","delete","moved","ofType","get","declaredClass","base","typeMap","Type","set","L"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"./ArrayPool.js\";import s from\"./Evented.js\";import{clone as i}from\"./lang.js\";import{assumeNonNull as r}from\"./maybe.js\";import n from\"./ObjectPool.js\";import{schedule as h}from\"./scheduling.js\";import{ensureType as o,ensureOneOfType as l}from\"./accessorSupport/ensureType.js\";import{trackAccess as a}from\"./accessorSupport/tracking.js\";import{property as c}from\"./accessorSupport/decorators/property.js\";import{subclass as f}from\"./accessorSupport/decorators/subclass.js\";import{SimpleObservable as _}from\"./accessorSupport/tracking/SimpleObservable.js\";var m;class u{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}}const g=new n(u,void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),p=()=>{};function b(e){return e?e instanceof B?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function d(e){if(e&&e.length)return e[0]}function v(e,t,s,i){const r=Math.min(e.length-s,t.length-i);let n=0;for(;n<r&&e[s+n]===t[i+n];)n++;return n}function y(e,t,s,i){t&&t.forEach(((t,r,n)=>{e.push(t),y(e,s.call(i,t,r,n),s,i)}))}const C=new Set,A=new Set,x=new Set,E=new Map;let j=0,B=m=class extends s.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new _,this.length=0,this._items=[],Object.defineProperty(this,\"uid\",{value:j++})}static isCollection(e){return null!=e&&e instanceof m}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof m?{items:e}:e:{}}*[Symbol.iterator](){yield*this.items}get items(){return a(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...b(e)),this._emitAfterChanges(1))}hasEventListener(e){return\"change\"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(\"change\"===e){const e=this._chgListeners,s={removed:!1,callback:t};return e.push(s),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=p,s.removed=!0,e.splice(e.indexOf(s),1)}}}return this._emitter.on(e,t)}once(e,t){const s=this.on(e,t);return{remove(){s.remove()}}}add(e,t){if(a(this._observable),this._emitBeforeChanges(1))return this;const s=this.getNextIndex(null!=t?t:null);return this._splice(s,0,e),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(a(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const s=this.getNextIndex(t);return this._splice(s,0,...b(e)),this._emitAfterChanges(1),this}removeAll(){if(a(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return a(this._observable),this._createNewInstance({items:this._items.map(i)})}concat(...e){a(this._observable);const t=e.map(b);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(a(this._observable),!this.length||this._emitBeforeChanges(2))return;const s=r(this._splice(0,this.length)),i=s.length;for(let r=0;r<i;r++)e.call(t,s[r],r,s);this._emitAfterChanges(2)}every(e,t){return a(this._observable),this._items.every(e,t)}filter(e,t){let s;return a(this._observable),s=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:s})}find(e,t){return a(this._observable),this._items.find(e,t)}findIndex(e,t){return a(this._observable),this._items.findIndex(e,t)}flatten(e,t){a(this._observable);const s=[];return y(s,this,e,t),new m(s)}forEach(e,t){return a(this._observable),this._items.forEach(e,t)}getItemAt(e){return a(this._observable),this._items[e]}getNextIndex(e){a(this._observable);const t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return a(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return a(this._observable),this._items.indexOf(e,t)}join(e=\",\"){return a(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return a(this._observable),this._items.lastIndexOf(e,t)}map(e,t){a(this._observable);const s=this._items.map(e,t);return new m({items:s})}reorder(e,t=this.length-1){a(this._observable);const s=this.indexOf(e);if(-1!==s){if(t<0?t=0:t>=this.length&&(t=this.length-1),s!==t){if(this._emitBeforeChanges(4))return e;this._splice(s,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}}pop(){if(a(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=d(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return a(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,...e),this._emitAfterChanges(1)),this.length}reduce(e,t){a(this._observable);const s=this._items;return 2===arguments.length?s.reduce(e,t):s.reduce(e)}reduceRight(e,t){a(this._observable);const s=this._items;return 2===arguments.length?s.reduceRight(e,t):s.reduceRight(e)}remove(e){return a(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(a(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=d(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(a(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];const t=e instanceof m?e.toArray():e,s=this._items,i=[],r=t.length;for(let n=0;n<r;n++){const e=t[n],r=s.indexOf(e);if(r>-1){const e=1+v(t,s,n+1,r+1),h=this._splice(r,e);h&&h.length>0&&i.push.apply(i,h),n+=e-1}}return this._emitAfterChanges(2),i}reverse(){if(a(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,...e)),this._emitAfterChanges(4),this}shift(){if(a(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=d(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return a(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return a(this._observable),this._items.some(e,t)}sort(e){if(a(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=r(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,...t),this._emitAfterChanges(4),this}splice(e,t,...s){a(this._observable);const i=(t?2:0)|(s.length?1:0);if(this._emitBeforeChanges(i))return[];const r=this._splice(e,t,...s)||[];return this._emitAfterChanges(i),r}toArray(){return a(this._observable),this._items.slice()}toJSON(){return a(this._observable),this.toArray()}toLocaleString(){return a(this._observable),this._items.toLocaleString()}toString(){return a(this._observable),this._items.toString()}unshift(...e){return a(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,...e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,...s){const i=this._items,r=this.constructor.prototype.itemType;let n,o;if(!this._notifications&&this.hasEventListener(\"change\")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=h((()=>this._dispatchChange()))),t){if(o=i.splice(e,t),this.hasEventListener(\"before-remove\")){const t=g.acquire();t.target=this,t.cancellable=!0;for(let s=0,r=o.length;s<r;s++)n=o[s],t.reset(n),this.emit(\"before-remove\",t),t.defaultPrevented&&(o.splice(s,1),i.splice(e,0,n),e+=1,s-=1,r-=1);g.release(t)}if(this.length=this._items.length,this.hasEventListener(\"after-remove\")){const e=g.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let s=0;s<t;s++)e.reset(o[s]),this.emit(\"after-remove\",e);g.release(e)}}if(s&&s.length){if(r){const e=[];for(const t of s){const s=r.ensureType(t);null==s&&null!=t||e.push(s)}s=e}const t=this.hasEventListener(\"before-add\"),n=this.hasEventListener(\"after-add\"),h=e===this.length;if(t||n){const r=g.acquire();r.target=this,r.cancellable=!0;const o=g.acquire();o.target=this,o.cancellable=!1;for(const l of s)t?(r.reset(l),this.emit(\"before-add\",r),r.defaultPrevented||(h?i.push(l):i.splice(e++,0,l),this._set(\"length\",i.length),n&&(o.reset(l),this.emit(\"after-add\",o)))):(h?i.push(l):i.splice(e++,0,l),this._set(\"length\",i.length),o.reset(l),this.emit(\"after-add\",o));g.release(o),g.release(r)}else{if(h)for(const e of s)i.push(e);else i.splice(e,0,...s);this._set(\"length\",i.length)}}return(s&&s.length||o&&o.length)&&this._notifyChangeEvent(s,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener(\"before-changes\")){const s=g.acquire();s.target=this,s.cancellable=!0,s.type=e,this.emit(\"before-changes\",s),t=s.defaultPrevented,g.release(s)}return t}_emitAfterChanges(e){if(this.hasEventListener(\"after-changes\")){const t=g.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit(\"after-changes\",t),g.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener(\"change\")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const s of e){const e=s.changes;C.clear(),A.clear(),x.clear();for(const{added:t,removed:s}of e){if(t)if(0===x.size&&0===A.size)for(const e of t)C.add(e);else for(const e of t)A.has(e)?(x.add(e),A.delete(e)):x.has(e)||C.add(e);if(s)if(0===x.size&&0===C.size)for(const e of s)A.add(e);else for(const e of s)C.has(e)?C.delete(e):(x.delete(e),A.add(e))}const i=t.acquire();C.forEach((e=>{i.push(e)}));const r=t.acquire();A.forEach((e=>{r.push(e)}));const n=this._items,h=s.items,o=t.acquire();if(x.forEach((e=>{h.indexOf(e)!==n.indexOf(e)&&o.push(e)})),s.listeners&&(i.length||r.length||o.length)){const e={target:this,added:i,removed:r,moved:o},t=s.listeners.length;for(let i=0;i<t;i++){const t=s.listeners[i];t.removed||t.callback.call(this,e)}}t.release(i),t.release(r),t.release(o)}C.clear(),A.clear(),x.clear()}};B.ofType=t=>{if(!t)return m;if(E.has(t))return E.get(t);let s=null;if(\"function\"==typeof t)s=t.prototype.declaredClass;else if(t.base)s=t.base.prototype.declaredClass;else for(const e in t.typeMap){const i=t.typeMap[e].prototype.declaredClass;s?s+=` | ${i}`:s=i}let i=class extends m{};i=e([f(`esri.core.Collection<${s}>`)],i);const r={Type:t,ensureType:\"function\"==typeof t?o(t):l(t)};return Object.defineProperty(i.prototype,\"itemType\",{value:r}),E.set(t,i),i},e([c()],B.prototype,\"length\",void 0),e([c()],B.prototype,\"items\",null),B=m=e([f(\"esri.core.Collection\")],B);var L=B;export default L;\n"]},"metadata":{},"sourceType":"module"}