{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport s from \"../../../core/Error.js\";\nimport { init as r } from \"../../../core/watchUtils.js\";\nimport { property as t } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport i from \"../../../layers/VoxelWasmManager.js\";\nimport { LayerView3D as a } from \"./LayerView3D.js\";\nimport d from \"../../layers/LayerView.js\";\nlet n = class extends a(d) {\n  constructor() {\n    super(...arguments), this.type = \"voxel-3d\", this._wasmLayerId = -1;\n  }\n\n  initialize() {\n    if (\"local\" !== this.view.viewingMode) throw new s(\"voxel:unsupported-viewingMode\", \"Voxel layers support local viewingMode only.\", {});\n    if (\"webgl\" === this.view.renderContext) throw new s(\"voxel:unsupported-context\", \"Voxel layers are supported in WebGL2 rendering contexts only.\", {});\n    const e = i.getInstance(),\n          t = e.addLayer(this.view, this).then(e => {\n      this._wasmLayerId = e, this._suspendedHandle = r(this, \"suspended\", e => {\n        i.getInstance().setLayerEnabled(this.view, this, !e);\n      });\n    }).catch(r => {\n      if (e.removeLayer(this.view, this), this._wasmLayerId = -1, -1 === r) throw new s(\"voxel:addLayer-failure\", \"The voxel layer description was invalid.\", {});\n      if (-2 === r) throw new s(\"voxel:addLayer-failure\", \"The voxel layer web assembly module failed to download.\", {});\n    });\n    this.addResolvingPromise(t);\n  }\n\n  destroy() {\n    i.getInstance().removeLayer(this.view, this), this._suspendedHandle && (this._suspendedHandle.remove(), this._suspendedHandle = null);\n  }\n\n  isUpdating() {\n    return !(this._wasmLayerId < 0) && i.getInstance().isUpdating(this.view, this._wasmLayerId);\n  }\n\n  updatingFlagChanged() {\n    this.notifyChange(\"updating\");\n  }\n\n};\ne([t()], n.prototype, \"layer\", void 0), e([t({\n  readOnly: !0,\n  aliasOf: \"layer.parsedUrl.path\"\n})], n.prototype, \"baseUrl\", void 0), n = e([o(\"esri.views.3d.layers.VoxelLayerView3D\")], n);\nvar l = n;\nexport default l;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/VoxelLayerView3D.js"],"names":["_","e","s","init","r","property","t","subclass","o","i","LayerView3D","a","d","n","constructor","arguments","type","_wasmLayerId","initialize","view","viewingMode","renderContext","getInstance","addLayer","then","_suspendedHandle","setLayerEnabled","catch","removeLayer","addResolvingPromise","destroy","remove","isUpdating","updatingFlagChanged","notifyChange","prototype","readOnly","aliasOf","l"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../core/Error.js\";import{init as r}from\"../../../core/watchUtils.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../layers/VoxelWasmManager.js\";import{LayerView3D as a}from\"./LayerView3D.js\";import d from\"../../layers/LayerView.js\";let n=class extends(a(d)){constructor(){super(...arguments),this.type=\"voxel-3d\",this._wasmLayerId=-1}initialize(){if(\"local\"!==this.view.viewingMode)throw new s(\"voxel:unsupported-viewingMode\",\"Voxel layers support local viewingMode only.\",{});if(\"webgl\"===this.view.renderContext)throw new s(\"voxel:unsupported-context\",\"Voxel layers are supported in WebGL2 rendering contexts only.\",{});const e=i.getInstance(),t=e.addLayer(this.view,this).then((e=>{this._wasmLayerId=e,this._suspendedHandle=r(this,\"suspended\",(e=>{i.getInstance().setLayerEnabled(this.view,this,!e)}))})).catch((r=>{if(e.removeLayer(this.view,this),this._wasmLayerId=-1,-1===r)throw new s(\"voxel:addLayer-failure\",\"The voxel layer description was invalid.\",{});if(-2===r)throw new s(\"voxel:addLayer-failure\",\"The voxel layer web assembly module failed to download.\",{})}));this.addResolvingPromise(t)}destroy(){i.getInstance().removeLayer(this.view,this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null)}isUpdating(){return!(this._wasmLayerId<0)&&i.getInstance().isUpdating(this.view,this._wasmLayerId)}updatingFlagChanged(){this.notifyChange(\"updating\")}};e([t()],n.prototype,\"layer\",void 0),e([t({readOnly:!0,aliasOf:\"layer.parsedUrl.path\"})],n.prototype,\"baseUrl\",void 0),n=e([o(\"esri.views.3d.layers.VoxelLayerView3D\")],n);var l=n;export default l;\n"]},"metadata":{},"sourceType":"module"}