{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { d as e } from \"../../../../chunks/vec3.js\";\n\nfunction t(e, t, g) {\n  for (let n = 0; n < t.length; n++) r[n] = !1, o[n] = null;\n\n  for (let r = 0; r < e.length; r++) n[r] = !1, l[r] = null;\n\n  for (let n = 0; n < t.length; n++) {\n    const o = h(t[n], e, g);\n    o >= 0 && (r[n] = !0, null != l[o] ? l[o].push(t[n]) : l[o] = [t[n]]);\n  }\n\n  for (let l = 0; l < e.length; l++) {\n    const r = h(e[l], t, g);\n    r >= 0 && (n[l] = !0, null != o[r] ? o[r].push(e[l]) : o[r] = [e[l]]);\n  }\n\n  const u = [];\n\n  for (let r = 0; r < e.length; r++) null != l[r] || n[r] || u.push({\n    load: [],\n    remove: [e[r]]\n  });\n\n  for (let n = 0; n < t.length; n++) null != o[n] || r[n] || u.push({\n    load: [t[n]],\n    remove: []\n  });\n\n  for (let n = 0; n < t.length; n++) null != o[n] && (o[n].length > 1 || o[n][0] !== t[n]) && u.push({\n    load: [t[n]],\n    remove: o[n]\n  });\n\n  for (let n = 0; n < e.length; n++) null != l[n] && (l[n].length > 1 || l[n][0] !== e[n]) && u.push({\n    load: l[n],\n    remove: [e[n]]\n  });\n\n  return u;\n}\n\nconst n = [!1],\n      l = [null],\n      r = [!1],\n      o = [null];\n\nfunction h(e, t, n) {\n  let l = e;\n\n  for (; l > 0;) {\n    const e = t.indexOf(l);\n    if (e >= 0) return e;\n    l = n.getParentId(l);\n  }\n\n  return t.indexOf(l);\n}\n\nfunction g(t, n, l) {\n  return t.sort((t, r) => {\n    if (0 === t.load.length && 0 === r.load.length) return 0;\n    if (0 === t.load.length) return -1;\n    if (0 === r.load.length) return 1;\n\n    if (0 === t.remove.length && 0 === r.remove.length) {\n      const o = l.getRenderCenter(t.load[0]),\n            h = l.getRenderCenter(r.load[0]);\n      return e(o, n) - e(h, n);\n    }\n\n    if (0 === t.remove.length) return -1;\n    if (0 === r.remove.length) return 1;\n\n    if (1 === t.load.length && 1 === r.load.length) {\n      const o = l.getRenderCenter(t.load[0]),\n            h = l.getRenderCenter(r.load[0]);\n      return e(o, n) - e(h, n);\n    }\n\n    if (1 === t.load.length) return -1;\n    if (1 === r.load.length) return 1;\n    {\n      const o = l.getRenderCenter(t.remove[0]),\n            h = l.getRenderCenter(r.remove[0]);\n      return e(o, n) - e(h, n);\n    }\n  });\n}\n\nfunction u(e, t, n) {\n  for (let l = 0; l < e.length; ++l) {\n    const r = e[l];\n    r.load.length > t && 1 === r.remove.length && d(e, r, n);\n  }\n}\n\nfunction d(e, t, n) {\n  const l = [t.remove[0]],\n        r = [];\n\n  for (; 1 === l.length;) {\n    const e = l.pop();\n    r.length = 0;\n\n    for (let o = 0; o < t.load.length; o++) {\n      let h = t.load[o],\n          g = n.getParentId(h);\n\n      for (; g !== e;) h = g, g = n.getParentId(h);\n\n      let u = l.indexOf(h);\n      u < 0 && (u = l.length, l.push(h), r.push([])), r[u].push(t.load[o]);\n    }\n  }\n\n  t.load = l;\n\n  for (let o = 0; o < l.length; o++) r[o].length > 1 ? e.push({\n    remove: [l[o]],\n    load: r[o]\n  }) : l[o] = r[o][0];\n}\n\nexport { t as nodeDiff, g as sortFrontToBack, u as splitWorkEntries, d as splitWorkEntry };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/i3s/LoDUtil.js"],"names":["d","e","t","g","n","length","r","o","l","h","push","u","load","remove","indexOf","getParentId","sort","getRenderCenter","pop","nodeDiff","sortFrontToBack","splitWorkEntries","splitWorkEntry"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{d as e}from\"../../../../chunks/vec3.js\";function t(e,t,g){for(let n=0;n<t.length;n++)r[n]=!1,o[n]=null;for(let r=0;r<e.length;r++)n[r]=!1,l[r]=null;for(let n=0;n<t.length;n++){const o=h(t[n],e,g);o>=0&&(r[n]=!0,null!=l[o]?l[o].push(t[n]):l[o]=[t[n]])}for(let l=0;l<e.length;l++){const r=h(e[l],t,g);r>=0&&(n[l]=!0,null!=o[r]?o[r].push(e[l]):o[r]=[e[l]])}const u=[];for(let r=0;r<e.length;r++)null!=l[r]||n[r]||u.push({load:[],remove:[e[r]]});for(let n=0;n<t.length;n++)null!=o[n]||r[n]||u.push({load:[t[n]],remove:[]});for(let n=0;n<t.length;n++)null!=o[n]&&(o[n].length>1||o[n][0]!==t[n])&&u.push({load:[t[n]],remove:o[n]});for(let n=0;n<e.length;n++)null!=l[n]&&(l[n].length>1||l[n][0]!==e[n])&&u.push({load:l[n],remove:[e[n]]});return u}const n=[!1],l=[null],r=[!1],o=[null];function h(e,t,n){let l=e;for(;l>0;){const e=t.indexOf(l);if(e>=0)return e;l=n.getParentId(l)}return t.indexOf(l)}function g(t,n,l){return t.sort(((t,r)=>{if(0===t.load.length&&0===r.load.length)return 0;if(0===t.load.length)return-1;if(0===r.load.length)return 1;if(0===t.remove.length&&0===r.remove.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return e(o,n)-e(h,n)}if(0===t.remove.length)return-1;if(0===r.remove.length)return 1;if(1===t.load.length&&1===r.load.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return e(o,n)-e(h,n)}if(1===t.load.length)return-1;if(1===r.load.length)return 1;{const o=l.getRenderCenter(t.remove[0]),h=l.getRenderCenter(r.remove[0]);return e(o,n)-e(h,n)}}))}function u(e,t,n){for(let l=0;l<e.length;++l){const r=e[l];r.load.length>t&&1===r.remove.length&&d(e,r,n)}}function d(e,t,n){const l=[t.remove[0]],r=[];for(;1===l.length;){const e=l.pop();r.length=0;for(let o=0;o<t.load.length;o++){let h=t.load[o],g=n.getParentId(h);for(;g!==e;)h=g,g=n.getParentId(h);let u=l.indexOf(h);u<0&&(u=l.length,l.push(h),r.push([])),r[u].push(t.load[o])}}t.load=l;for(let o=0;o<l.length;o++)r[o].length>1?e.push({remove:[l[o]],load:r[o]}):l[o]=r[o][0]}export{t as nodeDiff,g as sortFrontToBack,u as splitWorkEntries,d as splitWorkEntry};\n"]},"metadata":{},"sourceType":"module"}