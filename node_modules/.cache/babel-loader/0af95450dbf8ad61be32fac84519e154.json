{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { isNone as t } from \"../../core/maybe.js\";\nimport { urlToObject as n } from \"../../core/urlUtils.js\";\nimport r from \"../../geometry/Extent.js\";\nimport i from \"../../geometry/SpatialReference.js\";\nconst a = [[4001, 4999], [2044, 2045], [2081, 2083], [2085, 2086], [2093, 2093], [2096, 2098], [2105, 2132], [2169, 2170], [2176, 2180], [2193, 2193], [2200, 2200], [2206, 2212], [2319, 2319], [2320, 2462], [2523, 2549], [2551, 2735], [2738, 2758], [2935, 2941], [2953, 2953], [3006, 3030], [3034, 3035], [3058, 3059], [3068, 3068], [3114, 3118], [3126, 3138], [3300, 3301], [3328, 3335], [3346, 3346], [3350, 3352], [3366, 3366], [3416, 3416], [20004, 20032], [20064, 20092], [21413, 21423], [21473, 21483], [21896, 21899], [22171, 22177], [22181, 22187], [22191, 22197], [25884, 25884], [27205, 27232], [27391, 27398], [27492, 27492], [28402, 28432], [28462, 28492], [30161, 30179], [30800, 30800], [31251, 31259], [31275, 31279], [31281, 31290], [31466, 31700]],\n      s = {\n  84: 4326,\n  83: 4269,\n  27: 4267\n};\n\nfunction o(t) {\n  if (!t) return null;\n  const n = {\n    idCounter: -1\n  };\n\n  if (\"string\" == typeof t) {\n    t = new DOMParser().parseFromString(t, \"text/xml\");\n  }\n\n  const i = t.documentElement;\n\n  if (\"ServiceExceptionReport\" === i.nodeName) {\n    const t = Array.prototype.slice.call(i.childNodes).map(e => e.textContent).join(\"\\r\\n\");\n    throw new e(\"wmslayer:wms-capabilities-xml-is-not-valid\", \"The server returned errors when the WMS capabilities were requested.\", t);\n  }\n\n  const a = d(\"Capability\", i),\n        s = d(\"Service\", i),\n        o = d(\"Request\", a);\n  if (!a || !s || !o) return null;\n  const l = d(\"Layer\", a);\n  if (!l) return null;\n  const u = \"WMS_Capabilities\" === i.nodeName || \"WMT_MS_Capabilities\" === i.nodeName ? i.getAttribute(\"version\") : \"1.3.0\",\n        m = h(\"Title\", s, \"\") || h(\"Name\", s, \"\"),\n        f = h(\"AccessConstraints\", s, \"\"),\n        p = h(\"Abstract\", s, \"\"),\n        x = parseInt(h(\"MaxWidth\", s, \"5000\"), 10),\n        b = parseInt(h(\"MaxHeight\", s, \"5000\"), 10),\n        E = g(o, \"GetMap\"),\n        S = N(o, \"GetMap\"),\n        I = y(l, u, n);\n  let w,\n      F = 0;\n  if (Array.prototype.slice.call(a.childNodes).forEach(e => {\n    \"Layer\" === e.nodeName && (0 === F ? w = e : 1 === F ? (I.name && (I.name = \"\", I.sublayers.push(y(w, u, n))), I.sublayers.push(y(e, u, n))) : I.sublayers.push(y(e, u, n)), F++);\n  }), !I) return null;\n  let M, O, C;\n  const T = I.fullExtents;\n\n  if (M = I.sublayers, M || (M = []), 0 === M.length && M.push(I), O = I.extent, !O) {\n    const e = new r(M[0].extent);\n    I.extent = e.toJSON(), O = I.extent;\n  }\n\n  if (C = I.spatialReferences, !C.length && M.length > 0) {\n    const e = t => {\n      let n = [];\n      return t.sublayers.forEach(t => {\n        !n.length && t.spatialReferences.length && (n = t.spatialReferences || e(t));\n      }), n;\n    };\n\n    M.forEach(t => {\n      C.length || (C = t.spatialReferences || e(t));\n    });\n  }\n\n  const v = N(o, \"GetFeatureInfo\");\n  let R;\n\n  if (v) {\n    const e = g(o, \"GetFeatureInfo\");\n    e.indexOf(\"text/html\") > -1 ? R = \"text/html\" : e.indexOf(\"text/plain\") > -1 && (R = \"text/plain\");\n  }\n\n  if (!R) {\n    const e = function (t) {\n      t && (t.queryable = !1, t.sublayers && t.sublayers.forEach(t => {\n        e(t);\n      }));\n    };\n\n    e(I);\n  }\n\n  const V = c(M),\n        _ = I.minScale || 0,\n        U = I.maxScale || 0,\n        q = I.dimensions,\n        B = V.reduce((e, t) => e.concat(t.dimensions), []),\n        D = q.concat(B).filter(L);\n\n  let k = null;\n\n  if (D.length > 0) {\n    let e = Number.POSITIVE_INFINITY,\n        t = Number.NEGATIVE_INFINITY;\n    D.forEach(n => {\n      const {\n        extent: r\n      } = n;\n      A(r) ? r.forEach(n => {\n        e = Math.min(e, n.getTime()), t = Math.max(t, n.getTime());\n      }) : r.forEach(n => {\n        e = Math.min(e, n.min.getTime()), t = Math.max(t, n.max.getTime());\n      });\n    }), k = {\n      startTimeField: null,\n      endTimeField: null,\n      trackIdField: null,\n      timeExtent: [e, t]\n    };\n  }\n\n  return {\n    copyright: f,\n    description: p,\n    dimensions: q,\n    extent: O,\n    fullExtents: T,\n    featureInfoFormat: R,\n    featureInfoUrl: v,\n    mapUrl: S,\n    maxWidth: x,\n    maxHeight: b,\n    maxScale: U,\n    minScale: _,\n    layers: V,\n    spatialReferences: C,\n    supportedImageFormatTypes: E,\n    timeInfo: k,\n    title: m,\n    version: u\n  };\n}\n\nfunction l(e) {\n  return a.some(([t, n]) => e >= t && e <= n);\n}\n\nfunction u(e) {\n  return e.length ? e.filter(e => e.popupEnabled && e.name && e.queryable).map(e => e.name).join(\",\") : \"\";\n}\n\nfunction c(e) {\n  let t = [];\n  return e.forEach(e => {\n    t.push(e), e.sublayers && e.sublayers.length && (t = t.concat(c(e.sublayers)), delete e.sublayers);\n  }), t;\n}\n\nfunction m(e, t, n) {\n  var r;\n  return null != (r = t.getAttribute(e)) ? r : n;\n}\n\nfunction f(e, t, n, r) {\n  const i = d(e, n);\n  return i ? m(t, i, r) : r;\n}\n\nfunction d(e, t) {\n  for (let n = 0; n < t.childNodes.length; n++) {\n    const r = t.childNodes[n];\n    if (E(r) && r.nodeName === e) return r;\n  }\n\n  return null;\n}\n\nfunction p(e, t) {\n  const n = [];\n\n  for (let r = 0; r < t.childNodes.length; r++) {\n    const i = t.childNodes[r];\n    E(i) && i.nodeName === e && n.push(i);\n  }\n\n  return n;\n}\n\nfunction h(e, t, n) {\n  const r = d(e, t);\n  return r ? r.textContent : n;\n}\n\nfunction x(e, t, n) {\n  if (!e) return null;\n  const a = parseFloat(e.getAttribute(\"minx\")),\n        s = parseFloat(e.getAttribute(\"miny\")),\n        o = parseFloat(e.getAttribute(\"maxx\")),\n        l = parseFloat(e.getAttribute(\"maxy\"));\n  let u, c, m, f;\n  n ? (u = isNaN(s) ? -Number.MAX_VALUE : s, c = isNaN(a) ? -Number.MAX_VALUE : a, m = isNaN(l) ? Number.MAX_VALUE : l, f = isNaN(o) ? Number.MAX_VALUE : o) : (u = isNaN(a) ? -Number.MAX_VALUE : a, c = isNaN(s) ? -Number.MAX_VALUE : s, m = isNaN(o) ? Number.MAX_VALUE : o, f = isNaN(l) ? Number.MAX_VALUE : l);\n  const d = new i({\n    wkid: t\n  });\n  return new r({\n    xmin: u,\n    ymin: c,\n    xmax: m,\n    ymax: f,\n    spatialReference: d\n  });\n}\n\nfunction N(e, t) {\n  const n = d(t, e);\n\n  if (n) {\n    const e = d(\"DCPType\", n);\n\n    if (e) {\n      const t = d(\"HTTP\", e);\n\n      if (t) {\n        const e = d(\"Get\", t);\n\n        if (e) {\n          let t = f(\"OnlineResource\", \"xlink:href\", e, null);\n          if (t) return t.indexOf(\"&\") === t.length - 1 && (t = t.substring(0, t.length - 1)), F(t, [\"service\", \"request\"]);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction g(e, t) {\n  const n = p(\"Operation\", e);\n\n  if (0 === n.length) {\n    return p(\"Format\", d(t, e)).map(e => e.textContent);\n  }\n\n  const r = [];\n  return n.forEach(e => {\n    if (e.getAttribute(\"name\") === t) {\n      p(\"Format\", e).forEach(e => {\n        r.push(e.textContent);\n      });\n    }\n  }), r;\n}\n\nfunction b(e, t, n) {\n  const r = d(t, e);\n  if (!r) return n;\n  const {\n    textContent: i\n  } = r;\n  if (null == i || \"\" === i) return n;\n  const a = Number(i);\n  return isNaN(a) ? n : a;\n}\n\nfunction y(e, t, n) {\n  var a;\n  if (!e) return null;\n  const o = {\n    id: n.idCounter++,\n    fullExtents: [],\n    parentLayerId: null,\n    queryable: \"1\" === e.getAttribute(\"queryable\"),\n    spatialReferences: [],\n    sublayers: null\n  },\n        u = d(\"LatLonBoundingBox\", e),\n        c = d(\"EX_GeographicBoundingBox\", e);\n  let f = null;\n  u && (f = x(u, 4326)), c && (f = new r(0, 0, 0, 0, new i({\n    wkid: 4326\n  })), f.xmin = parseFloat(h(\"westBoundLongitude\", c, \"0\")), f.ymin = parseFloat(h(\"southBoundLatitude\", c, \"0\")), f.xmax = parseFloat(h(\"eastBoundLongitude\", c, \"0\")), f.ymax = parseFloat(h(\"northBoundLatitude\", c, \"0\"))), u || c || (f = new r(-180, -90, 180, 90, new i({\n    wkid: 4326\n  }))), o.minScale = b(e, \"MaxScaleDenominator\", 0), o.maxScale = b(e, \"MinScaleDenominator\", 0);\n  const N = [\"1.0.0\", \"1.1.0\", \"1.1.1\"].indexOf(t) > -1 ? \"SRS\" : \"CRS\";\n  return Array.prototype.slice.call(e.childNodes).forEach(e => {\n    if (\"Name\" === e.nodeName) o.name = e.textContent || \"\";else if (\"Title\" === e.nodeName) o.title = e.textContent || \"\";else if (\"Abstract\" === e.nodeName) o.description = e.textContent || \"\";else if (\"BoundingBox\" === e.nodeName) {\n      const n = e.getAttribute(N);\n\n      if (n && 0 === n.indexOf(\"EPSG:\")) {\n        const r = parseInt(n.substring(5), 10);\n        0 === r || isNaN(r) || f || (f = \"1.3.0\" === t ? x(e, r, l(r)) : x(e, r));\n      }\n\n      const r = n && n.indexOf(\":\");\n\n      if (r && r > -1) {\n        let i = parseInt(n.substring(r + 1, n.length), 10);\n        0 === i || isNaN(i) || (i = s[i] ? s[i] : i);\n        const a = \"1.3.0\" === t ? x(e, i, l(i)) : x(e, i);\n        o.fullExtents.push(a);\n      }\n    } else if (e.nodeName === N) {\n      e.textContent.split(\" \").forEach(e => {\n        0 === (e = e.indexOf(\":\") > -1 ? parseInt(e.split(\":\")[1], 10) : parseInt(e, 10)) || isNaN(e) || (s[e] && (e = s[e]), -1 === o.spatialReferences.indexOf(e) && o.spatialReferences.push(e));\n      });\n    } else if (\"Style\" !== e.nodeName || o.legendURL) {\n      if (\"Layer\" === e.nodeName) {\n        const r = y(e, t, n);\n        r && (r.parentLayerId = o.id, o.sublayers || (o.sublayers = []), o.sublayers.push(r));\n      }\n    } else {\n      const t = d(\"LegendURL\", e);\n\n      if (t) {\n        const e = d(\"OnlineResource\", t);\n        e && (o.legendURL = e.getAttribute(\"xlink:href\"));\n      }\n    }\n  }), o.extent = null == (a = f) ? void 0 : a.toJSON(), o.dimensions = p(\"Dimension\", e).filter(e => e.getAttribute(\"name\") && e.getAttribute(\"units\") && e.textContent).map(e => {\n    const t = e.getAttribute(\"name\"),\n          n = e.getAttribute(\"units\"),\n          r = e.textContent,\n          i = e.getAttribute(\"unitSymbol\"),\n          a = e.getAttribute(\"default\"),\n          s = \"0\" !== m(\"default\", e, \"0\"),\n          o = \"0\" !== m(\"nearestValue\", e, \"0\"),\n          l = \"0\" !== m(\"current\", e, \"0\");\n\n    if (/^time$/i.test(t) && /^ISO8601$/i.test(n)) {\n      return {\n        name: \"time\",\n        units: \"ISO8601\",\n        extent: C(r),\n        default: C(a),\n        multipleValues: s,\n        nearestValue: o,\n        current: l\n      };\n    }\n\n    if (/^elevation$/i.test(t)) {\n      return {\n        name: \"elevation\",\n        units: n,\n        extent: M(r),\n        unitSymbol: i,\n        default: M(a),\n        multipleValues: s,\n        nearestValue: o\n      };\n    }\n\n    return {\n      name: t,\n      units: n,\n      extent: O(r),\n      unitSymbol: i,\n      default: O(a),\n      multipleValues: s,\n      nearestValue: o\n    };\n  }), o;\n}\n\nfunction A(e) {\n  return Array.isArray(e) && e.length > 0 && e[0] instanceof Date;\n}\n\nfunction E(e) {\n  return e.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction S(e) {\n  return void 0 !== e.min && void 0 !== e.max;\n}\n\nfunction I(e) {\n  return \"elevation\" === e.name;\n}\n\nfunction w(e) {\n  return \"time\" !== e.name && \"elevation\" !== e.name;\n}\n\nfunction L(e) {\n  return \"time\" === e.name;\n}\n\nfunction F(e, t) {\n  const r = [],\n        i = n(e);\n\n  for (const n in i.query) i.query.hasOwnProperty(n) && -1 === t.indexOf(n.toLowerCase()) && r.push(n + \"=\" + i.query[n]);\n\n  return i.path + (r.length ? \"?\" + r.join(\"&\") : \"\");\n}\n\nfunction M(e) {\n  if (!e) return null;\n  const t = -1 !== e.indexOf(\"/\"),\n        n = e.split(\",\");\n  return t ? n.map(e => {\n    const t = e.split(\"/\");\n    if (t.length < 2) return null;\n    return {\n      min: parseFloat(t[0]),\n      max: parseFloat(t[1]),\n      resolution: t.length >= 3 && \"0\" !== t[2] ? parseFloat(t[2]) : void 0\n    };\n  }).filter(e => e) : n.map(e => parseFloat(e));\n}\n\nfunction O(e) {\n  if (!e) return null;\n  const t = -1 !== e.indexOf(\"/\"),\n        n = e.split(\",\");\n  return t ? n.map(e => {\n    const t = e.split(\"/\");\n    if (t.length < 2) return null;\n    return {\n      min: t[0],\n      max: t[1],\n      resolution: t.length >= 3 && \"0\" !== t[2] ? t[2] : void 0\n    };\n  }).filter(e => e) : n;\n}\n\nfunction C(e) {\n  if (!e) return null;\n  const t = -1 !== e.indexOf(\"/\"),\n        n = e.split(\",\");\n  return t ? n.map(e => {\n    const t = e.split(\"/\");\n    if (t.length < 2) return null;\n    return {\n      min: new Date(t[0]),\n      max: new Date(t[1]),\n      resolution: t.length >= 3 && \"0\" !== t[2] ? T(t[2]) : void 0\n    };\n  }).filter(e => e) : n.map(e => new Date(e));\n}\n\nfunction T(e) {\n  const t = /(?:p(\\d+y|\\d+(?:.|,)\\d+y)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+d|\\d+(?:.|,)\\d+d)?)?(?:t(\\d+h|\\d+(?:.|,)\\d+h)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+s|\\d+(?:.|,)\\d+s)?)?/i,\n        n = e.match(t);\n  if (!n) return null;\n  return {\n    years: v(n[1]),\n    months: v(n[2]),\n    days: v(n[3]),\n    hours: v(n[4]),\n    minutes: v(n[5]),\n    seconds: v(n[6])\n  };\n}\n\nfunction v(e) {\n  if (!e) return 0;\n  const t = /(?:\\d+(?:.|,)\\d+|\\d+)/,\n        n = e.match(t);\n  if (!n) return 0;\n  const r = n[0].replace(\",\", \".\");\n  return Number(r);\n}\n\nfunction R(e) {\n  return e.toISOString().replace(/\\.[0-9]{3}/, \"\");\n}\n\nconst V = new Set([102100, 3857, 102113, 900913]),\n      _ = new Set([3395, 54004]);\n\nfunction U(e, n) {\n  let r = e.wkid;\n  return t(n) ? r : (!n.includes(r) && e.latestWkid && (r = e.latestWkid), V.has(r) ? n.find(e => V.has(e)) || n.find(e => _.has(e)) || 102100 : r);\n}\n\nexport { l as coordsReversedForWKID, T as fromISODuration, u as getPopupLayers, S as isDimensionInterval, I as isElevationDimension, w as isGenericDimension, L as isTimeDimension, U as normalizeWKID, o as parseCapabilities, R as toISOString };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/support/wmsUtils.js"],"names":["e","isNone","t","urlToObject","n","r","i","a","s","o","idCounter","DOMParser","parseFromString","documentElement","nodeName","Array","prototype","slice","call","childNodes","map","textContent","join","d","l","u","getAttribute","m","h","f","p","x","parseInt","b","E","g","S","N","I","y","w","F","forEach","name","sublayers","push","M","O","C","T","fullExtents","length","extent","toJSON","spatialReferences","v","R","indexOf","queryable","V","c","_","minScale","U","maxScale","q","dimensions","B","reduce","concat","D","filter","L","k","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","A","Math","min","getTime","max","startTimeField","endTimeField","trackIdField","timeExtent","copyright","description","featureInfoFormat","featureInfoUrl","mapUrl","maxWidth","maxHeight","layers","supportedImageFormatTypes","timeInfo","title","version","some","popupEnabled","parseFloat","isNaN","MAX_VALUE","wkid","xmin","ymin","xmax","ymax","spatialReference","substring","id","parentLayerId","split","legendURL","test","units","default","multipleValues","nearestValue","current","unitSymbol","isArray","Date","nodeType","Node","ELEMENT_NODE","query","hasOwnProperty","toLowerCase","path","resolution","match","years","months","days","hours","minutes","seconds","replace","toISOString","Set","includes","latestWkid","has","find","coordsReversedForWKID","fromISODuration","getPopupLayers","isDimensionInterval","isElevationDimension","isGenericDimension","isTimeDimension","normalizeWKID","parseCapabilities"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{isNone as t}from\"../../core/maybe.js\";import{urlToObject as n}from\"../../core/urlUtils.js\";import r from\"../../geometry/Extent.js\";import i from\"../../geometry/SpatialReference.js\";const a=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],s={84:4326,83:4269,27:4267};function o(t){if(!t)return null;const n={idCounter:-1};if(\"string\"==typeof t){t=(new DOMParser).parseFromString(t,\"text/xml\")}const i=t.documentElement;if(\"ServiceExceptionReport\"===i.nodeName){const t=Array.prototype.slice.call(i.childNodes).map((e=>e.textContent)).join(\"\\r\\n\");throw new e(\"wmslayer:wms-capabilities-xml-is-not-valid\",\"The server returned errors when the WMS capabilities were requested.\",t)}const a=d(\"Capability\",i),s=d(\"Service\",i),o=d(\"Request\",a);if(!a||!s||!o)return null;const l=d(\"Layer\",a);if(!l)return null;const u=\"WMS_Capabilities\"===i.nodeName||\"WMT_MS_Capabilities\"===i.nodeName?i.getAttribute(\"version\"):\"1.3.0\",m=h(\"Title\",s,\"\")||h(\"Name\",s,\"\"),f=h(\"AccessConstraints\",s,\"\"),p=h(\"Abstract\",s,\"\"),x=parseInt(h(\"MaxWidth\",s,\"5000\"),10),b=parseInt(h(\"MaxHeight\",s,\"5000\"),10),E=g(o,\"GetMap\"),S=N(o,\"GetMap\"),I=y(l,u,n);let w,F=0;if(Array.prototype.slice.call(a.childNodes).forEach((e=>{\"Layer\"===e.nodeName&&(0===F?w=e:1===F?(I.name&&(I.name=\"\",I.sublayers.push(y(w,u,n))),I.sublayers.push(y(e,u,n))):I.sublayers.push(y(e,u,n)),F++)})),!I)return null;let M,O,C;const T=I.fullExtents;if(M=I.sublayers,M||(M=[]),0===M.length&&M.push(I),O=I.extent,!O){const e=new r(M[0].extent);I.extent=e.toJSON(),O=I.extent}if(C=I.spatialReferences,!C.length&&M.length>0){const e=t=>{let n=[];return t.sublayers.forEach((t=>{!n.length&&t.spatialReferences.length&&(n=t.spatialReferences||e(t))})),n};M.forEach((t=>{C.length||(C=t.spatialReferences||e(t))}))}const v=N(o,\"GetFeatureInfo\");let R;if(v){const e=g(o,\"GetFeatureInfo\");e.indexOf(\"text/html\")>-1?R=\"text/html\":e.indexOf(\"text/plain\")>-1&&(R=\"text/plain\")}if(!R){const e=function(t){t&&(t.queryable=!1,t.sublayers&&t.sublayers.forEach((t=>{e(t)})))};e(I)}const V=c(M),_=I.minScale||0,U=I.maxScale||0,q=I.dimensions,B=V.reduce(((e,t)=>e.concat(t.dimensions)),[]),D=q.concat(B).filter(L);let k=null;if(D.length>0){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;D.forEach((n=>{const{extent:r}=n;A(r)?r.forEach((n=>{e=Math.min(e,n.getTime()),t=Math.max(t,n.getTime())})):r.forEach((n=>{e=Math.min(e,n.min.getTime()),t=Math.max(t,n.max.getTime())}))})),k={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[e,t]}}return{copyright:f,description:p,dimensions:q,extent:O,fullExtents:T,featureInfoFormat:R,featureInfoUrl:v,mapUrl:S,maxWidth:x,maxHeight:b,maxScale:U,minScale:_,layers:V,spatialReferences:C,supportedImageFormatTypes:E,timeInfo:k,title:m,version:u}}function l(e){return a.some((([t,n])=>e>=t&&e<=n))}function u(e){return e.length?e.filter((e=>e.popupEnabled&&e.name&&e.queryable)).map((e=>e.name)).join(\",\"):\"\"}function c(e){let t=[];return e.forEach((e=>{t.push(e),e.sublayers&&e.sublayers.length&&(t=t.concat(c(e.sublayers)),delete e.sublayers)})),t}function m(e,t,n){var r;return null!=(r=t.getAttribute(e))?r:n}function f(e,t,n,r){const i=d(e,n);return i?m(t,i,r):r}function d(e,t){for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];if(E(r)&&r.nodeName===e)return r}return null}function p(e,t){const n=[];for(let r=0;r<t.childNodes.length;r++){const i=t.childNodes[r];E(i)&&i.nodeName===e&&n.push(i)}return n}function h(e,t,n){const r=d(e,t);return r?r.textContent:n}function x(e,t,n){if(!e)return null;const a=parseFloat(e.getAttribute(\"minx\")),s=parseFloat(e.getAttribute(\"miny\")),o=parseFloat(e.getAttribute(\"maxx\")),l=parseFloat(e.getAttribute(\"maxy\"));let u,c,m,f;n?(u=isNaN(s)?-Number.MAX_VALUE:s,c=isNaN(a)?-Number.MAX_VALUE:a,m=isNaN(l)?Number.MAX_VALUE:l,f=isNaN(o)?Number.MAX_VALUE:o):(u=isNaN(a)?-Number.MAX_VALUE:a,c=isNaN(s)?-Number.MAX_VALUE:s,m=isNaN(o)?Number.MAX_VALUE:o,f=isNaN(l)?Number.MAX_VALUE:l);const d=new i({wkid:t});return new r({xmin:u,ymin:c,xmax:m,ymax:f,spatialReference:d})}function N(e,t){const n=d(t,e);if(n){const e=d(\"DCPType\",n);if(e){const t=d(\"HTTP\",e);if(t){const e=d(\"Get\",t);if(e){let t=f(\"OnlineResource\",\"xlink:href\",e,null);if(t)return t.indexOf(\"&\")===t.length-1&&(t=t.substring(0,t.length-1)),F(t,[\"service\",\"request\"])}}}}return null}function g(e,t){const n=p(\"Operation\",e);if(0===n.length){return p(\"Format\",d(t,e)).map((e=>e.textContent))}const r=[];return n.forEach((e=>{if(e.getAttribute(\"name\")===t){p(\"Format\",e).forEach((e=>{r.push(e.textContent)}))}})),r}function b(e,t,n){const r=d(t,e);if(!r)return n;const{textContent:i}=r;if(null==i||\"\"===i)return n;const a=Number(i);return isNaN(a)?n:a}function y(e,t,n){var a;if(!e)return null;const o={id:n.idCounter++,fullExtents:[],parentLayerId:null,queryable:\"1\"===e.getAttribute(\"queryable\"),spatialReferences:[],sublayers:null},u=d(\"LatLonBoundingBox\",e),c=d(\"EX_GeographicBoundingBox\",e);let f=null;u&&(f=x(u,4326)),c&&(f=new r(0,0,0,0,new i({wkid:4326})),f.xmin=parseFloat(h(\"westBoundLongitude\",c,\"0\")),f.ymin=parseFloat(h(\"southBoundLatitude\",c,\"0\")),f.xmax=parseFloat(h(\"eastBoundLongitude\",c,\"0\")),f.ymax=parseFloat(h(\"northBoundLatitude\",c,\"0\"))),u||c||(f=new r(-180,-90,180,90,new i({wkid:4326}))),o.minScale=b(e,\"MaxScaleDenominator\",0),o.maxScale=b(e,\"MinScaleDenominator\",0);const N=[\"1.0.0\",\"1.1.0\",\"1.1.1\"].indexOf(t)>-1?\"SRS\":\"CRS\";return Array.prototype.slice.call(e.childNodes).forEach((e=>{if(\"Name\"===e.nodeName)o.name=e.textContent||\"\";else if(\"Title\"===e.nodeName)o.title=e.textContent||\"\";else if(\"Abstract\"===e.nodeName)o.description=e.textContent||\"\";else if(\"BoundingBox\"===e.nodeName){const n=e.getAttribute(N);if(n&&0===n.indexOf(\"EPSG:\")){const r=parseInt(n.substring(5),10);0===r||isNaN(r)||f||(f=\"1.3.0\"===t?x(e,r,l(r)):x(e,r))}const r=n&&n.indexOf(\":\");if(r&&r>-1){let i=parseInt(n.substring(r+1,n.length),10);0===i||isNaN(i)||(i=s[i]?s[i]:i);const a=\"1.3.0\"===t?x(e,i,l(i)):x(e,i);o.fullExtents.push(a)}}else if(e.nodeName===N){e.textContent.split(\" \").forEach((e=>{0===(e=e.indexOf(\":\")>-1?parseInt(e.split(\":\")[1],10):parseInt(e,10))||isNaN(e)||(s[e]&&(e=s[e]),-1===o.spatialReferences.indexOf(e)&&o.spatialReferences.push(e))}))}else if(\"Style\"!==e.nodeName||o.legendURL){if(\"Layer\"===e.nodeName){const r=y(e,t,n);r&&(r.parentLayerId=o.id,o.sublayers||(o.sublayers=[]),o.sublayers.push(r))}}else{const t=d(\"LegendURL\",e);if(t){const e=d(\"OnlineResource\",t);e&&(o.legendURL=e.getAttribute(\"xlink:href\"))}}})),o.extent=null==(a=f)?void 0:a.toJSON(),o.dimensions=p(\"Dimension\",e).filter((e=>e.getAttribute(\"name\")&&e.getAttribute(\"units\")&&e.textContent)).map((e=>{const t=e.getAttribute(\"name\"),n=e.getAttribute(\"units\"),r=e.textContent,i=e.getAttribute(\"unitSymbol\"),a=e.getAttribute(\"default\"),s=\"0\"!==m(\"default\",e,\"0\"),o=\"0\"!==m(\"nearestValue\",e,\"0\"),l=\"0\"!==m(\"current\",e,\"0\");if(/^time$/i.test(t)&&/^ISO8601$/i.test(n)){return{name:\"time\",units:\"ISO8601\",extent:C(r),default:C(a),multipleValues:s,nearestValue:o,current:l}}if(/^elevation$/i.test(t)){return{name:\"elevation\",units:n,extent:M(r),unitSymbol:i,default:M(a),multipleValues:s,nearestValue:o}}return{name:t,units:n,extent:O(r),unitSymbol:i,default:O(a),multipleValues:s,nearestValue:o}})),o}function A(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}function E(e){return e.nodeType===Node.ELEMENT_NODE}function S(e){return void 0!==e.min&&void 0!==e.max}function I(e){return\"elevation\"===e.name}function w(e){return\"time\"!==e.name&&\"elevation\"!==e.name}function L(e){return\"time\"===e.name}function F(e,t){const r=[],i=n(e);for(const n in i.query)i.query.hasOwnProperty(n)&&-1===t.indexOf(n.toLowerCase())&&r.push(n+\"=\"+i.query[n]);return i.path+(r.length?\"?\"+r.join(\"&\"):\"\")}function M(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:parseFloat(t[0]),max:parseFloat(t[1]),resolution:t.length>=3&&\"0\"!==t[2]?parseFloat(t[2]):void 0}})).filter((e=>e)):n.map((e=>parseFloat(e)))}function O(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:t[0],max:t[1],resolution:t.length>=3&&\"0\"!==t[2]?t[2]:void 0}})).filter((e=>e)):n}function C(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:new Date(t[0]),max:new Date(t[1]),resolution:t.length>=3&&\"0\"!==t[2]?T(t[2]):void 0}})).filter((e=>e)):n.map((e=>new Date(e)))}function T(e){const t=/(?:p(\\d+y|\\d+(?:.|,)\\d+y)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+d|\\d+(?:.|,)\\d+d)?)?(?:t(\\d+h|\\d+(?:.|,)\\d+h)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+s|\\d+(?:.|,)\\d+s)?)?/i,n=e.match(t);if(!n)return null;return{years:v(n[1]),months:v(n[2]),days:v(n[3]),hours:v(n[4]),minutes:v(n[5]),seconds:v(n[6])}}function v(e){if(!e)return 0;const t=/(?:\\d+(?:.|,)\\d+|\\d+)/,n=e.match(t);if(!n)return 0;const r=n[0].replace(\",\",\".\");return Number(r)}function R(e){return e.toISOString().replace(/\\.[0-9]{3}/,\"\")}const V=new Set([102100,3857,102113,900913]),_=new Set([3395,54004]);function U(e,n){let r=e.wkid;return t(n)?r:(!n.includes(r)&&e.latestWkid&&(r=e.latestWkid),V.has(r)?n.find((e=>V.has(e)))||n.find((e=>_.has(e)))||102100:r)}export{l as coordsReversedForWKID,T as fromISODuration,u as getPopupLayers,S as isDimensionInterval,I as isElevationDimension,w as isGenericDimension,L as isTimeDimension,U as normalizeWKID,o as parseCapabilities,R as toISOString};\n"]},"metadata":{},"sourceType":"module"}