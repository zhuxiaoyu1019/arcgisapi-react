{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { p as e, c as r, e as n, a as t, r as u, l as s, b as i, d as a, f as o, s as l, g as c } from \"../chunks/arcade.js\";\nexport { h as arcade } from \"../chunks/arcade.js\";\nimport f from \"../arcade/Dictionary.js\";\nexport { default as Dictionary } from \"../arcade/Dictionary.js\";\nimport p from \"../arcade/Feature.js\";\nexport { default as arcadeFeature } from \"../arcade/Feature.js\";\nimport { clone as m } from \"../core/lang.js\";\nimport { isSizeVariable as d } from \"../renderers/visualVariables/support/sizeVariableUtils.js\";\nconst y = /^\\$feature\\./i,\n      v = {\n  vars: {\n    $feature: \"any\",\n    $view: \"any\"\n  },\n  spatialReference: null\n};\n\nfunction x(r) {\n  if (!r) return null;\n\n  try {\n    return e(r);\n  } catch (n) {}\n\n  return null;\n}\n\nfunction w(e, n) {\n  const t = \"string\" == typeof e ? x(e) : e;\n  if (!t) return null;\n\n  try {\n    return n = n || m(v), r(t, n);\n  } catch (u) {}\n\n  return null;\n}\n\nfunction b(e, r) {\n  return {\n    vars: {\n      $feature: null == e ? new p() : p.createFromGraphic(e),\n      $view: r && r.view\n    },\n    spatialReference: r && r.sr\n  };\n}\n\nfunction F(e, r, n) {\n  return p.createFromGraphicLikeObject(r, e, n);\n}\n\nfunction g(e, r) {\n  e.vars.$feature = r;\n}\n\nfunction j(e, r) {\n  let t;\n\n  try {\n    t = n(e, r);\n  } catch (u) {\n    t = null;\n  }\n\n  return t;\n}\n\nfunction E(e, r) {\n  let n;\n\n  try {\n    n = e ? e(r) : null;\n  } catch (t) {\n    n = null;\n  }\n\n  return n;\n}\n\nfunction S(e, r) {\n  try {\n    return e ? e(r) : Promise.resolve(null);\n  } catch (n) {\n    return Promise.resolve(null);\n  }\n}\n\nfunction $(e) {\n  if (!e) return [];\n  const r = \"string\" == typeof e ? x(e) : e;\n  if (!r) return [];\n  const n = t(r),\n        u = new Array();\n  return n.forEach(e => {\n    y.test(e) && (e = e.replace(y, \"\"), u.push(e));\n  }), u.sort(), u.filter((e, r) => 0 === r || u[r - 1] !== e);\n}\n\nfunction z(e) {\n  return u(e, \"$view\");\n}\n\nfunction C(e, r) {\n  return !!e && u(e, r);\n}\n\nfunction M(e) {\n  if (!e || null == e.spatialReference && (null == e.scale || null == e.viewingMode)) return;\n  return {\n    view: e.viewingMode && null != e.scale ? new f({\n      viewingMode: e.viewingMode,\n      scale: e.scale\n    }) : null,\n    sr: e.spatialReference\n  };\n}\n\nfunction R(e, r) {\n  const n = o();\n  return n ? n.createFeatureSetCollectionFromService(e, r) : null;\n}\n\nfunction k(e, r) {\n  if (null === e) return null;\n  const n = o();\n  return n ? n.constructFeatureSet(e, r) : null;\n}\n\nfunction I(e) {\n  if (null === e || null === e.map) return null;\n  const r = o();\n  return r ? r.createFeatureSetCollectionFromMap(e.map, e.spatialReference) : null;\n}\n\nfunction D(e, r, n = []) {\n  return s(e, r, n);\n}\n\nfunction P() {\n  return i();\n}\n\nfunction V() {\n  return a();\n}\n\nfunction G(e) {\n  return \"simple\" === e.type || \"class-breaks\" === e.type || \"unique-value\" === e.type || \"dot-density\" === e.type || \"dictionary\" === e.type;\n}\n\nfunction L(e) {\n  return \"esri.layers.support.LabelClass\" === e.declaredClass;\n}\n\nfunction q(e) {\n  return \"esri.PopupTemplate\" === e.declaredClass;\n}\n\nfunction A(e, r) {\n  if (!e) return !1;\n  if (\"string\" == typeof e) return r(e);\n  const n = e;\n\n  if (G(n)) {\n    if (\"dot-density\" === n.type) {\n      const e = n.attributes.some(e => r(e.valueExpression));\n      if (e) return e;\n    }\n\n    const e = n.visualVariables,\n          t = !!e && e.some(e => {\n      let n = r(e.valueExpression);\n      return \"size\" === e.type && (d(e.minSize) && (n = n || r(e.minSize.valueExpression)), d(e.maxSize) && (n = n || r(e.maxSize.valueExpression))), n;\n    });\n    return !(!(\"valueExpression\" in n) || !r(n.valueExpression)) || t;\n  }\n\n  if (L(n)) {\n    const e = n.labelExpressionInfo && n.labelExpressionInfo.expression;\n    return !(!e || !r(e)) || !1;\n  }\n\n  return !!q(n) && !!n.expressionInfos && n.expressionInfos.some(e => r(e.expression));\n}\n\nfunction O(e) {\n  const r = x(e);\n  return !!r && l(r);\n}\n\nfunction T(e) {\n  return A(e, O);\n}\n\nfunction U(e) {\n  const r = x(e);\n  return !!r && c(r);\n}\n\nfunction B(e) {\n  return A(e, U);\n}\n\nexport { k as convertFeatureLayerToFeatureSet, I as convertMapToFeatureSetCollection, R as convertServiceUrlToWorkspace, b as createExecContext, F as createFeature, w as createFunction, x as createSyntaxTree, z as dependsOnView, V as enableFeatureSetOperations, P as enableGeometryOperations, j as evalSyntaxTree, S as executeAsyncFunction, E as executeFunction, $ as extractFieldNames, M as getViewInfo, T as hasGeometryFunctions, B as hasGeometryOperations, C as hasVariable, D as loadScriptDependencies, g as updateExecContext };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/support/arcadeUtils.js"],"names":["p","e","c","r","n","a","t","u","l","s","b","i","d","f","o","g","h","arcade","default","Dictionary","arcadeFeature","clone","m","isSizeVariable","y","v","vars","$feature","$view","spatialReference","x","w","createFromGraphic","view","sr","F","createFromGraphicLikeObject","j","E","S","Promise","resolve","$","Array","forEach","test","replace","push","sort","filter","z","C","M","scale","viewingMode","R","createFeatureSetCollectionFromService","k","constructFeatureSet","I","map","createFeatureSetCollectionFromMap","D","P","V","G","type","L","declaredClass","q","A","attributes","some","valueExpression","visualVariables","minSize","maxSize","labelExpressionInfo","expression","expressionInfos","O","T","U","B","convertFeatureLayerToFeatureSet","convertMapToFeatureSetCollection","convertServiceUrlToWorkspace","createExecContext","createFeature","createFunction","createSyntaxTree","dependsOnView","enableFeatureSetOperations","enableGeometryOperations","evalSyntaxTree","executeAsyncFunction","executeFunction","extractFieldNames","getViewInfo","hasGeometryFunctions","hasGeometryOperations","hasVariable","loadScriptDependencies","updateExecContext"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{p as e,c as r,e as n,a as t,r as u,l as s,b as i,d as a,f as o,s as l,g as c}from\"../chunks/arcade.js\";export{h as arcade}from\"../chunks/arcade.js\";import f from\"../arcade/Dictionary.js\";export{default as Dictionary}from\"../arcade/Dictionary.js\";import p from\"../arcade/Feature.js\";export{default as arcadeFeature}from\"../arcade/Feature.js\";import{clone as m}from\"../core/lang.js\";import{isSizeVariable as d}from\"../renderers/visualVariables/support/sizeVariableUtils.js\";const y=/^\\$feature\\./i,v={vars:{$feature:\"any\",$view:\"any\"},spatialReference:null};function x(r){if(!r)return null;try{return e(r)}catch(n){}return null}function w(e,n){const t=\"string\"==typeof e?x(e):e;if(!t)return null;try{return n=n||m(v),r(t,n)}catch(u){}return null}function b(e,r){return{vars:{$feature:null==e?new p:p.createFromGraphic(e),$view:r&&r.view},spatialReference:r&&r.sr}}function F(e,r,n){return p.createFromGraphicLikeObject(r,e,n)}function g(e,r){e.vars.$feature=r}function j(e,r){let t;try{t=n(e,r)}catch(u){t=null}return t}function E(e,r){let n;try{n=e?e(r):null}catch(t){n=null}return n}function S(e,r){try{return e?e(r):Promise.resolve(null)}catch(n){return Promise.resolve(null)}}function $(e){if(!e)return[];const r=\"string\"==typeof e?x(e):e;if(!r)return[];const n=t(r),u=new Array;return n.forEach((e=>{y.test(e)&&(e=e.replace(y,\"\"),u.push(e))})),u.sort(),u.filter(((e,r)=>0===r||u[r-1]!==e))}function z(e){return u(e,\"$view\")}function C(e,r){return!!e&&u(e,r)}function M(e){if(!e||null==e.spatialReference&&(null==e.scale||null==e.viewingMode))return;return{view:e.viewingMode&&null!=e.scale?new f({viewingMode:e.viewingMode,scale:e.scale}):null,sr:e.spatialReference}}function R(e,r){const n=o();return n?n.createFeatureSetCollectionFromService(e,r):null}function k(e,r){if(null===e)return null;const n=o();return n?n.constructFeatureSet(e,r):null}function I(e){if(null===e||null===e.map)return null;const r=o();return r?r.createFeatureSetCollectionFromMap(e.map,e.spatialReference):null}function D(e,r,n=[]){return s(e,r,n)}function P(){return i()}function V(){return a()}function G(e){return\"simple\"===e.type||\"class-breaks\"===e.type||\"unique-value\"===e.type||\"dot-density\"===e.type||\"dictionary\"===e.type}function L(e){return\"esri.layers.support.LabelClass\"===e.declaredClass}function q(e){return\"esri.PopupTemplate\"===e.declaredClass}function A(e,r){if(!e)return!1;if(\"string\"==typeof e)return r(e);const n=e;if(G(n)){if(\"dot-density\"===n.type){const e=n.attributes.some((e=>r(e.valueExpression)));if(e)return e}const e=n.visualVariables,t=!!e&&e.some((e=>{let n=r(e.valueExpression);return\"size\"===e.type&&(d(e.minSize)&&(n=n||r(e.minSize.valueExpression)),d(e.maxSize)&&(n=n||r(e.maxSize.valueExpression))),n}));return!(!(\"valueExpression\"in n)||!r(n.valueExpression))||t}if(L(n)){const e=n.labelExpressionInfo&&n.labelExpressionInfo.expression;return!(!e||!r(e))||!1}return!!q(n)&&(!!n.expressionInfos&&n.expressionInfos.some((e=>r(e.expression))))}function O(e){const r=x(e);return!!r&&l(r)}function T(e){return A(e,O)}function U(e){const r=x(e);return!!r&&c(r)}function B(e){return A(e,U)}export{k as convertFeatureLayerToFeatureSet,I as convertMapToFeatureSetCollection,R as convertServiceUrlToWorkspace,b as createExecContext,F as createFeature,w as createFunction,x as createSyntaxTree,z as dependsOnView,V as enableFeatureSetOperations,P as enableGeometryOperations,j as evalSyntaxTree,S as executeAsyncFunction,E as executeFunction,$ as extractFieldNames,M as getViewInfo,T as hasGeometryFunctions,B as hasGeometryOperations,C as hasVariable,D as loadScriptDependencies,g as updateExecContext};\n"]},"metadata":{},"sourceType":"module"}