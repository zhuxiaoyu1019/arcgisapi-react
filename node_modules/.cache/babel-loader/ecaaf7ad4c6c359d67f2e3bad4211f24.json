{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../has.js\";\nimport { equals as t } from \"../lang.js\";\nimport e from \"../Logger.js\";\nimport s from \"../ObjectPool.js\";\nimport { Property as i } from \"./Property.js\";\nimport { idToName as r, nameToId as o } from \"./PropertyOrigin.js\";\nimport { Store as n } from \"./Store.js\";\nimport { trackAccess as a, runTracked as c, initializeDependencyTracking as l } from \"./tracking.js\";\nimport { getProperties as h } from \"./utils.js\";\n\nfunction p(t, e, s) {\n  return void 0 !== t;\n}\n\nfunction f(t, e, s, i) {\n  return void 0 !== t && (!(null == s && 8 & t.flags) || (i.lifecycle, !1));\n}\n\nfunction u(t) {\n  return t && \"function\" == typeof t.destroy;\n}\n\ne.getLogger(\"esri.core.accessorSupport.Properties\");\n\nclass g {\n  constructor(t) {\n    this.host = t, this.properties = new Map(), this.ctorArgs = null, this.destroyed = !1, this.lifecycle = 0, this.store = new n(), this._origin = 6;\n    const e = this.host.constructor.__accessorMetadata__,\n          s = e.properties;\n\n    for (const r in s) {\n      const t = new i(this, r, s[r]);\n      this.properties.set(r, t);\n    }\n\n    this.metadatas = s, this._autoDestroy = e.autoDestroy;\n  }\n\n  initialize() {\n    this.lifecycle = 1;\n  }\n\n  constructed() {\n    this.lifecycle = 2;\n  }\n\n  destroy() {\n    if (this.destroyed = !0, this._autoDestroy) for (const [t, e] of this.properties) {\n      const s = this.internalGet(t);\n      s && u(s) && (s.destroy(), 8 & ~e.flags && this._internalSet(e, null)), e.destroy();\n    } else for (const [t, e] of this.properties) e.destroy();\n  }\n\n  get initialized() {\n    return 0 !== this.lifecycle;\n  }\n\n  get(t) {\n    const e = this.properties.get(t);\n    if (e.metadata.get) return e.getComputed();\n    a(e);\n    const s = this.store;\n    return s.has(t) ? s.get(t) : e.metadata.value;\n  }\n\n  originOf(t) {\n    const e = this.store.originOf(t);\n\n    if (void 0 === e) {\n      const e = this.properties.get(t);\n      if (void 0 !== e && 16 & e.flags) return \"defaults\";\n    }\n\n    return r(e);\n  }\n\n  has(t) {\n    return !!this.properties.has(t) && this.store.has(t);\n  }\n\n  keys() {\n    return [...this.properties.keys()];\n  }\n\n  internalGet(t) {\n    const e = this.properties.get(t);\n    if (p(e)) return this.store.has(t) ? this.store.get(t) : e.metadata.value;\n  }\n\n  internalSet(t, e) {\n    const s = this.properties.get(t);\n    p(s) && this._internalSet(s, e);\n  }\n\n  getDependsInfo(t, e, s) {\n    const r = this.properties.get(e);\n    if (!p(r)) return \"\";\n    const o = new Set(),\n          n = c({\n      onObservableAccessed: t => o.add(t),\n      onTrackingEnd: () => {}\n    }, () => {\n      var e;\n      return null == (e = r.metadata.get) ? void 0 : e.call(t);\n    });\n    let a = `${s}${t.declaredClass.split(\".\").pop()}.${e}: ${n}\\n`;\n    if (0 === o.size) return a;\n    s += \"  \";\n\n    for (const c of o) {\n      if (!(c instanceof i)) continue;\n      const t = c.properties.host,\n            e = c.propertyName,\n            r = h(t);\n      a += r ? r.getDependsInfo(t, e, s) : `${s}${e}: undefined\\n`;\n    }\n\n    return a;\n  }\n\n  setAtOrigin(t, e, s) {\n    const i = this.properties.get(t);\n    if (p(i)) return this._setAtOrigin(i, e, s);\n  }\n\n  isOverridden(t) {\n    const e = this.properties.get(t);\n    return void 0 !== e && !!(2 & e.flags);\n  }\n\n  clearOverride(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && 2 & e.flags && (e.flags &= -3, e.notifyChange());\n  }\n\n  override(t, e) {\n    const s = this.properties.get(t);\n    if (!f(s, t, e, this)) return;\n    const i = s.metadata.cast;\n\n    if (i) {\n      const t = this._cast(i, e),\n            {\n        valid: s,\n        value: r\n      } = t;\n\n      if (m.release(t), !s) return;\n      e = r;\n    }\n\n    s.flags |= 2, this._internalSet(s, e);\n  }\n\n  set(t, e) {\n    const s = this.properties.get(t);\n    if (!f(s, t, e, this)) return;\n    const i = s.metadata.cast;\n\n    if (i) {\n      const t = this._cast(i, e),\n            {\n        valid: s,\n        value: r\n      } = t;\n\n      if (m.release(t), !s) return;\n      e = r;\n    }\n\n    const r = s.metadata.set;\n    r ? r.call(this.host, e) : this._internalSet(s, e);\n  }\n\n  setDefaultOrigin(t) {\n    this._origin = o(t);\n  }\n\n  getDefaultOrigin() {\n    return r(this._origin);\n  }\n\n  notifyChange(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && e.notifyChange();\n  }\n\n  invalidate(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && e.invalidate();\n  }\n\n  commit(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && e.commit();\n  }\n\n  _internalSet(t, e) {\n    const s = 0 !== this.lifecycle ? this._origin : 0;\n\n    this._setAtOrigin(t, e, s);\n  }\n\n  _setAtOrigin(e, s, i) {\n    const r = this.store,\n          o = e.propertyName;\n    r.has(o, i) && t(s, r.get(o)) && 2 & ~e.flags && i === r.originOf(o) || (e.invalidate(), r.set(o, s, i), e.commit(), l(this.host, e));\n  }\n\n  _cast(t, e) {\n    const s = m.acquire();\n    return s.valid = !0, s.value = e, t && (s.value = t.call(this.host, e, s)), s;\n  }\n\n}\n\nclass d {\n  constructor() {\n    this.value = null, this.valid = !0;\n  }\n\n  acquire() {\n    this.valid = !0;\n  }\n\n  release() {\n    this.value = null;\n  }\n\n}\n\nconst m = new s(d);\nexport default g;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/core/accessorSupport/Properties.js"],"names":["equals","t","e","s","Property","i","idToName","r","nameToId","o","Store","n","trackAccess","a","runTracked","c","initializeDependencyTracking","l","getProperties","h","p","f","flags","lifecycle","u","destroy","getLogger","g","constructor","host","properties","Map","ctorArgs","destroyed","store","_origin","__accessorMetadata__","set","metadatas","_autoDestroy","autoDestroy","initialize","constructed","internalGet","_internalSet","initialized","get","metadata","getComputed","has","value","originOf","keys","internalSet","getDependsInfo","Set","onObservableAccessed","add","onTrackingEnd","call","declaredClass","split","pop","size","propertyName","setAtOrigin","_setAtOrigin","isOverridden","clearOverride","notifyChange","override","cast","_cast","valid","m","release","setDefaultOrigin","getDefaultOrigin","invalidate","commit","acquire","d"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../has.js\";import{equals as t}from\"../lang.js\";import e from\"../Logger.js\";import s from\"../ObjectPool.js\";import{Property as i}from\"./Property.js\";import{idToName as r,nameToId as o}from\"./PropertyOrigin.js\";import{Store as n}from\"./Store.js\";import{trackAccess as a,runTracked as c,initializeDependencyTracking as l}from\"./tracking.js\";import{getProperties as h}from\"./utils.js\";function p(t,e,s){return void 0!==t}function f(t,e,s,i){return void 0!==t&&(!(null==s&&8&t.flags)||(i.lifecycle,!1))}function u(t){return t&&\"function\"==typeof t.destroy}e.getLogger(\"esri.core.accessorSupport.Properties\");class g{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new n,this._origin=6;const e=this.host.constructor.__accessorMetadata__,s=e.properties;for(const r in s){const t=new i(this,r,s[r]);this.properties.set(r,t)}this.metadatas=s,this._autoDestroy=e.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,e]of this.properties){const s=this.internalGet(t);s&&u(s)&&(s.destroy(),8&~e.flags&&this._internalSet(e,null)),e.destroy()}else for(const[t,e]of this.properties)e.destroy()}get initialized(){return 0!==this.lifecycle}get(t){const e=this.properties.get(t);if(e.metadata.get)return e.getComputed();a(e);const s=this.store;return s.has(t)?s.get(t):e.metadata.value}originOf(t){const e=this.store.originOf(t);if(void 0===e){const e=this.properties.get(t);if(void 0!==e&&16&e.flags)return\"defaults\"}return r(e)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const e=this.properties.get(t);if(p(e))return this.store.has(t)?this.store.get(t):e.metadata.value}internalSet(t,e){const s=this.properties.get(t);p(s)&&this._internalSet(s,e)}getDependsInfo(t,e,s){const r=this.properties.get(e);if(!p(r))return\"\";const o=new Set,n=c({onObservableAccessed:t=>o.add(t),onTrackingEnd:()=>{}},(()=>{var e;return null==(e=r.metadata.get)?void 0:e.call(t)}));let a=`${s}${t.declaredClass.split(\".\").pop()}.${e}: ${n}\\n`;if(0===o.size)return a;s+=\"  \";for(const c of o){if(!(c instanceof i))continue;const t=c.properties.host,e=c.propertyName,r=h(t);a+=r?r.getDependsInfo(t,e,s):`${s}${e}: undefined\\n`}return a}setAtOrigin(t,e,s){const i=this.properties.get(t);if(p(i))return this._setAtOrigin(i,e,s)}isOverridden(t){const e=this.properties.get(t);return void 0!==e&&!!(2&e.flags)}clearOverride(t){const e=this.properties.get(t);void 0!==e&&2&e.flags&&(e.flags&=-3,e.notifyChange())}override(t,e){const s=this.properties.get(t);if(!f(s,t,e,this))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(m.release(t),!s)return;e=r}s.flags|=2,this._internalSet(s,e)}set(t,e){const s=this.properties.get(t);if(!f(s,t,e,this))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(m.release(t),!s)return;e=r}const r=s.metadata.set;r?r.call(this.host,e):this._internalSet(s,e)}setDefaultOrigin(t){this._origin=o(t)}getDefaultOrigin(){return r(this._origin)}notifyChange(t){const e=this.properties.get(t);void 0!==e&&e.notifyChange()}invalidate(t){const e=this.properties.get(t);void 0!==e&&e.invalidate()}commit(t){const e=this.properties.get(t);void 0!==e&&e.commit()}_internalSet(t,e){const s=0!==this.lifecycle?this._origin:0;this._setAtOrigin(t,e,s)}_setAtOrigin(e,s,i){const r=this.store,o=e.propertyName;r.has(o,i)&&t(s,r.get(o))&&2&~e.flags&&i===r.originOf(o)||(e.invalidate(),r.set(o,s,i),e.commit(),l(this.host,e))}_cast(t,e){const s=m.acquire();return s.valid=!0,s.value=e,t&&(s.value=t.call(this.host,e,s)),s}}class d{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const m=new s(d);export default g;\n"]},"metadata":{},"sourceType":"module"}