{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"./BufferObject.js\";\nimport t from \"./FramebufferObject.js\";\nimport { Program as r } from \"./Program.js\";\nimport i from \"./Texture.js\";\nimport o from \"./VertexArrayObject.js\";\n\nasync function n(n) {\n  const a = new Image();\n  if (a.src = \"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\", a.width = 5, a.height = 5, await a.decode(), !n.gl) return !0;\n  const s = new t(n, {\n    colorTarget: 0,\n    depthStencilTarget: 0\n  }, {\n    target: 3553,\n    wrapMode: 33071,\n    pixelFormat: 6408,\n    dataType: 5121,\n    samplingMode: 9728,\n    width: 1,\n    height: 1\n  }),\n        p = e.createVertex(n, 35044, new Uint16Array([0, 0, 1, 0, 0, 1, 1, 1])),\n        m = new o(n, new Map([[\"a_pos\", 0]]), {\n    geometry: [{\n      name: \"a_pos\",\n      count: 2,\n      type: 5123,\n      offset: 0,\n      stride: 4,\n      normalized: !1\n    }]\n  }, {\n    geometry: p\n  }),\n        d = new r(n, \"\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \", \"\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  \", new Map([[\"a_pos\", 0]]));\n  n.useProgram(d);\n  const g = new i(n, {\n    dataType: 5121,\n    pixelFormat: 6408,\n    preMultiplyAlpha: !1,\n    wrapMode: 33071,\n    samplingMode: 9729\n  }, a);\n  n.bindTexture(g, 0), d.setUniform1i(\"u_texture\", 0);\n  const c = n.getBoundFramebufferObject(),\n        {\n    x: u,\n    y: f,\n    width: w,\n    height: l\n  } = n.getViewport();\n  n.bindFramebuffer(s), n.setViewport(0, 0, 1, 1), n.bindVAO(m), n.drawArrays(5, 0, 4);\n  const v = new Uint8Array(4);\n  return s.readPixels(0, 0, 1, 1, 6408, 5121, v), d.dispose(), m.dispose(!1), p.dispose(), s.dispose(), g.dispose(), n.setViewport(u, f, w, l), n.bindFramebuffer(c), a.src = \"\", 255 === v[0];\n}\n\nexport { n as testSVGPremultipliedAlpha };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js"],"names":["e","t","Program","r","i","o","n","a","Image","src","width","height","decode","gl","s","colorTarget","depthStencilTarget","target","wrapMode","pixelFormat","dataType","samplingMode","p","createVertex","Uint16Array","m","Map","geometry","name","count","type","offset","stride","normalized","d","useProgram","g","preMultiplyAlpha","bindTexture","setUniform1i","c","getBoundFramebufferObject","x","u","y","f","w","l","getViewport","bindFramebuffer","setViewport","bindVAO","drawArrays","v","Uint8Array","readPixels","dispose","testSVGPremultipliedAlpha"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"./BufferObject.js\";import t from\"./FramebufferObject.js\";import{Program as r}from\"./Program.js\";import i from\"./Texture.js\";import o from\"./VertexArrayObject.js\";async function n(n){const a=new Image;if(a.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",a.width=5,a.height=5,await a.decode(),!n.gl)return!0;const s=new t(n,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),p=e.createVertex(n,35044,new Uint16Array([0,0,1,0,0,1,1,1])),m=new o(n,new Map([[\"a_pos\",0]]),{geometry:[{name:\"a_pos\",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:p}),d=new r(n,\"\\n  precision highp float;\\n\\n  attribute vec2 a_pos;\\n  varying vec2 v_uv;\\n\\n  void main() {\\n    v_uv = a_pos;\\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n  }\\n  \",\"\\n  precision highp float;\\n\\n  varying vec2 v_uv;\\n  uniform sampler2D u_texture;\\n\\n  void main() {\\n    gl_FragColor = texture2D(u_texture, v_uv);\\n  }\\n  \",new Map([[\"a_pos\",0]]));n.useProgram(d);const g=new i(n,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},a);n.bindTexture(g,0),d.setUniform1i(\"u_texture\",0);const c=n.getBoundFramebufferObject(),{x:u,y:f,width:w,height:l}=n.getViewport();n.bindFramebuffer(s),n.setViewport(0,0,1,1),n.bindVAO(m),n.drawArrays(5,0,4);const v=new Uint8Array(4);return s.readPixels(0,0,1,1,6408,5121,v),d.dispose(),m.dispose(!1),p.dispose(),s.dispose(),g.dispose(),n.setViewport(u,f,w,l),n.bindFramebuffer(c),a.src=\"\",255===v[0]}export{n as testSVGPremultipliedAlpha};\n"]},"metadata":{},"sourceType":"module"}