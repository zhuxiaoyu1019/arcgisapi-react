{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport { clamp as t } from \"../../core/mathUtils.js\";\nconst i = 2048,\n      h = 1.5,\n      e = 8;\n\nfunction o(i, h) {\n  const {\n    format: e,\n    quality: o,\n    rotation: n,\n    disableDecorations: a\n  } = i || {},\n        r = x(i, h.padding),\n        l = M(i, {\n    width: h.width - r.left - r.right,\n    height: h.height - r.top - r.bottom\n  }),\n        {\n    width: g,\n    height: d\n  } = m(i, l),\n        f = b(e),\n        u = C[f];\n  return {\n    format: f,\n    quality: t(null != o ? o : u, 0, 100),\n    area: l,\n    width: g,\n    height: d,\n    rotation: n,\n    disableDecorations: !!a,\n    ignoreBackground: !(!i || !i.ignoreBackground),\n    ignorePadding: !(!i || !i.ignorePadding)\n  };\n}\n\nfunction n(t, i) {\n  const h = o(t, i),\n        e = h.area,\n        n = h.width / e.width,\n        a = x(h, i.padding),\n        r = a.left + a.right,\n        l = a.top + a.bottom,\n        g = i.width - r,\n        d = i.height - l,\n        f = Math.floor(g * n + r),\n        u = Math.floor(d * n + l),\n        c = t && t.layers ? t.layers : [],\n        s = h.ignoreBackground,\n        w = h.ignorePadding;\n  return {\n    framebufferWidth: f,\n    framebufferHeight: u,\n    region: {\n      x: Math.floor(e.x * n) + a.left,\n      y: Math.floor(e.y * n) + a.top,\n      width: h.width,\n      height: h.height\n    },\n    format: h.format,\n    quality: h.quality,\n    rotation: h.rotation,\n    pixelRatio: n,\n    layers: c,\n    disableDecorations: h.disableDecorations,\n    ignoreBackground: s,\n    ignorePadding: w\n  };\n}\n\nfunction a(t, i, h, e) {\n  e.premultipliedAlpha && D(t), h.width = t.width, h.height = t.height;\n  const o = h.getContext(\"2d\");\n  o.putImageData(t, 0, 0), e.flipY && j(o);\n  const n = o.getImageData(0, 0, t.width, t.height),\n        a = r(h, i);\n  return h.width = 0, h.height = 0, {\n    dataUrl: a,\n    data: n\n  };\n}\n\nfunction r(t, i) {\n  const h = q[i.format],\n        e = i.quality / 100;\n  return t.toDataURL(h, e);\n}\n\nfunction l(t, i, h) {\n  if (!t || !i) throw new Error(\"Cannot construct image data without dimensions\");\n  if (s) try {\n    return new ImageData(t, i);\n  } catch (e) {\n    s = !1;\n  }\n  return u(t, i, h);\n}\n\nfunction g(t, i, h, e) {\n  if (!i || !h) throw new Error(\"Cannot construct image data without dimensions\");\n  if (s) try {\n    return new ImageData(t, i, h);\n  } catch (n) {\n    s = !1;\n  }\n  const o = u(i, h, e);\n  return o.data.set(t, 0), o;\n}\n\nfunction d(t, i, h, e = 0, o = 0, n = t.width - e, a = t.height - o, r = !1) {\n  const {\n    data: l\n  } = t,\n        {\n    width: g,\n    height: d,\n    data: f\n  } = i,\n        u = n / g,\n        c = a / d,\n        s = Math.ceil(u / 2),\n        w = Math.ceil(c / 2),\n        m = t.width;\n\n  for (let M = 0; M < d; M++) for (let t = 0; t < g; t++) {\n    const i = 4 * (t + (r ? d - M - 1 : M) * g);\n    let n = 0,\n        a = 0,\n        p = 0,\n        y = 0,\n        x = 0,\n        b = 0;\n    const j = (M + .5) * c;\n\n    for (let r = Math.floor(M * c); r < (M + 1) * c; r++) {\n      const i = Math.abs(j - (r + .5)) / w,\n            g = (t + .5) * u,\n            d = i * i;\n\n      for (let f = Math.floor(t * u); f < (t + 1) * u; f++) {\n        const t = Math.abs(g - (f + .5)) / s,\n              i = Math.sqrt(d + t * t);\n        if (i >= 1) continue;\n        let u = 2 * i * i * i - 3 * i * i + 1;\n        const c = 4 * (e + f + (o + r) * m);\n        b += u * l[c + 3], a += u, !h && l[c + 3] < 255 && (u = u * l[c + 3] / 255), p += u * l[c], y += u * l[c + 1], x += u * l[c + 2], n += u;\n      }\n    }\n\n    f[i] = p / n, f[i + 1] = y / n, f[i + 2] = x / n, f[i + 3] = b / a;\n  }\n\n  return i;\n}\n\nfunction f(t, o, n) {\n  if (!o) return t;\n  const {\n    framebufferWidth: a,\n    framebufferHeight: r,\n    pixelRatio: l,\n    region: g\n  } = t,\n        d = x(t, n),\n        f = d.left + d.right,\n        u = d.top + d.bottom,\n        c = a - f,\n        s = r - u,\n        w = Math.min(e, Math.min((i - f) / c, (i - u) / s));\n  return w < h ? t : { ...t,\n    framebufferWidth: Math.round(c * w) + f,\n    framebufferHeight: Math.round(s * w) + u,\n    pixelRatio: l * w,\n    resample: {\n      region: {\n        x: Math.round((g.x - d.left) * w) + d.left,\n        y: Math.round((g.y - d.top) * w) + d.top,\n        width: Math.round(g.width * w),\n        height: Math.round(g.height * w)\n      },\n      width: a,\n      height: r\n    }\n  };\n}\n\nfunction u(t, i, h) {\n  return h || (h = w()), h.getContext(\"2d\").createImageData(t, i);\n}\n\nlet c = null,\n    s = !0;\n\nfunction w() {\n  return c || (c = document.createElement(\"canvas\"), c.width = 1, c.height = 1), c;\n}\n\nfunction m(t, i) {\n  if (!t) return i;\n  const h = t.width,\n        e = t.height;\n  if (null != h && null != e) return {\n    width: Math.floor(h),\n    height: Math.floor(e)\n  };\n  if (null == h && null == e) return i;\n  const o = i.width / i.height;\n  return null == e ? {\n    width: Math.floor(h),\n    height: Math.floor(h / o)\n  } : {\n    width: Math.floor(e * o),\n    height: Math.floor(e)\n  };\n}\n\nfunction M(t, i) {\n  const h = {\n    x: 0,\n    y: 0,\n    width: i.width,\n    height: i.height\n  };\n\n  if (t && t.area) {\n    null != t.area.x && (h.x = Math.floor(t.area.x)), null != t.area.y && (h.y = Math.floor(t.area.y));\n    const e = null != t.area.width ? Math.floor(t.area.width) : null,\n          o = null != t.area.height ? Math.floor(t.area.height) : null;\n    if (h.width = i.width - h.x, h.height = i.height - h.y, null != e && null != o) h.width = Math.min(h.width, e), h.height = Math.min(h.height, o);else if (null == e && null != o) {\n      const t = Math.min(h.width, e);\n      h.height = t / h.width * h.height, h.width = t;\n    } else if (null != e && null == o) {\n      const t = Math.min(h.height, o);\n      h.width = t / h.height * h.width, h.height = t;\n    }\n  }\n\n  return p(y(h, t), i);\n}\n\nfunction p(t, i) {\n  const h = Math.floor(Math.max(t.x, 0)),\n        e = Math.floor(Math.max(t.y, 0)),\n        o = {\n    x: h,\n    y: e,\n    width: Math.floor(Math.min(t.width, i.width - h)),\n    height: Math.floor(Math.min(t.height, i.height - e))\n  },\n        n = o.width / o.height,\n        a = t.width / t.height;\n  if (a === n) return o;\n\n  if (a > n) {\n    const t = Math.floor(o.width / a),\n          i = o.height - t;\n    return {\n      x: o.x,\n      y: Math.floor(o.y + i / 2),\n      width: o.width,\n      height: t\n    };\n  }\n\n  const r = Math.floor(o.height * a),\n        l = o.width - r;\n  return {\n    x: Math.floor(o.x + l / 2),\n    y: o.y,\n    width: r,\n    height: o.height\n  };\n}\n\nfunction y(t, i) {\n  if (!i || null == i.width || null == i.height) return t;\n  const h = i.width / i.height,\n        e = t.width / t.height;\n  if (e === h) return t;\n\n  if (e < h) {\n    const i = Math.floor(t.height * h);\n    return t.x -= (i - t.width) / 2, t.width = i, t;\n  }\n\n  const o = Math.floor(t.width / h);\n  return t.y -= (o - t.height) / 2, t.height = o, t;\n}\n\nfunction x(t, i) {\n  return !i || t && t.ignorePadding ? P : i;\n}\n\nfunction b(t) {\n  switch (t) {\n    case \"png\":\n    case \"jpg\":\n    case \"jpeg\":\n      return t;\n\n    case null:\n    case void 0:\n    default:\n      return v;\n  }\n}\n\nfunction j(t) {\n  t.save(), t.globalCompositeOperation = \"copy\", t.scale(1, -1), t.translate(0, -t.canvas.height), t.drawImage(t.canvas, 0, 0), t.restore();\n}\n\nfunction D(t) {\n  const i = t.data,\n        h = i.length;\n\n  for (let e = 0; e < h; e += 4) {\n    const t = i[e + 3];\n\n    if (t > 0) {\n      const h = t / 255;\n      i[e + 0] = i[e + 0] / h, i[e + 1] = i[e + 1] / h, i[e + 2] = i[e + 2] / h;\n    }\n  }\n}\n\nconst q = {\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\"\n},\n      I = 98,\n      v = \"png\",\n      C = {\n  png: 100,\n  jpg: I,\n  jpeg: I\n},\n      P = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nexport { o as completeUserSettings, l as createEmptyImageData, a as encodeResult, d as resampleHermite, f as screenshotSuperSampleSettings, r as toDataUrl, n as toRenderSettings, g as wrapImageData };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/support/screenshotUtils.js"],"names":["clamp","t","i","h","e","o","format","quality","rotation","n","disableDecorations","a","r","x","padding","l","M","width","left","right","height","top","bottom","g","d","m","f","b","u","C","area","ignoreBackground","ignorePadding","Math","floor","c","layers","s","w","framebufferWidth","framebufferHeight","region","y","pixelRatio","premultipliedAlpha","D","getContext","putImageData","flipY","j","getImageData","dataUrl","data","q","toDataURL","Error","ImageData","set","ceil","p","abs","sqrt","min","round","resample","createImageData","document","createElement","max","P","v","save","globalCompositeOperation","scale","translate","canvas","drawImage","restore","length","png","jpg","jpeg","I","completeUserSettings","createEmptyImageData","encodeResult","resampleHermite","screenshotSuperSampleSettings","toDataUrl","toRenderSettings","wrapImageData"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{clamp as t}from\"../../core/mathUtils.js\";const i=2048,h=1.5,e=8;function o(i,h){const{format:e,quality:o,rotation:n,disableDecorations:a}=i||{},r=x(i,h.padding),l=M(i,{width:h.width-r.left-r.right,height:h.height-r.top-r.bottom}),{width:g,height:d}=m(i,l),f=b(e),u=C[f];return{format:f,quality:t(null!=o?o:u,0,100),area:l,width:g,height:d,rotation:n,disableDecorations:!!a,ignoreBackground:!(!i||!i.ignoreBackground),ignorePadding:!(!i||!i.ignorePadding)}}function n(t,i){const h=o(t,i),e=h.area,n=h.width/e.width,a=x(h,i.padding),r=a.left+a.right,l=a.top+a.bottom,g=i.width-r,d=i.height-l,f=Math.floor(g*n+r),u=Math.floor(d*n+l),c=t&&t.layers?t.layers:[],s=h.ignoreBackground,w=h.ignorePadding;return{framebufferWidth:f,framebufferHeight:u,region:{x:Math.floor(e.x*n)+a.left,y:Math.floor(e.y*n)+a.top,width:h.width,height:h.height},format:h.format,quality:h.quality,rotation:h.rotation,pixelRatio:n,layers:c,disableDecorations:h.disableDecorations,ignoreBackground:s,ignorePadding:w}}function a(t,i,h,e){e.premultipliedAlpha&&D(t),h.width=t.width,h.height=t.height;const o=h.getContext(\"2d\");o.putImageData(t,0,0),e.flipY&&j(o);const n=o.getImageData(0,0,t.width,t.height),a=r(h,i);return h.width=0,h.height=0,{dataUrl:a,data:n}}function r(t,i){const h=q[i.format],e=i.quality/100;return t.toDataURL(h,e)}function l(t,i,h){if(!t||!i)throw new Error(\"Cannot construct image data without dimensions\");if(s)try{return new ImageData(t,i)}catch(e){s=!1}return u(t,i,h)}function g(t,i,h,e){if(!i||!h)throw new Error(\"Cannot construct image data without dimensions\");if(s)try{return new ImageData(t,i,h)}catch(n){s=!1}const o=u(i,h,e);return o.data.set(t,0),o}function d(t,i,h,e=0,o=0,n=t.width-e,a=t.height-o,r=!1){const{data:l}=t,{width:g,height:d,data:f}=i,u=n/g,c=a/d,s=Math.ceil(u/2),w=Math.ceil(c/2),m=t.width;for(let M=0;M<d;M++)for(let t=0;t<g;t++){const i=4*(t+(r?d-M-1:M)*g);let n=0,a=0,p=0,y=0,x=0,b=0;const j=(M+.5)*c;for(let r=Math.floor(M*c);r<(M+1)*c;r++){const i=Math.abs(j-(r+.5))/w,g=(t+.5)*u,d=i*i;for(let f=Math.floor(t*u);f<(t+1)*u;f++){const t=Math.abs(g-(f+.5))/s,i=Math.sqrt(d+t*t);if(i>=1)continue;let u=2*i*i*i-3*i*i+1;const c=4*(e+f+(o+r)*m);b+=u*l[c+3],a+=u,!h&&l[c+3]<255&&(u=u*l[c+3]/255),p+=u*l[c],y+=u*l[c+1],x+=u*l[c+2],n+=u}}f[i]=p/n,f[i+1]=y/n,f[i+2]=x/n,f[i+3]=b/a}return i}function f(t,o,n){if(!o)return t;const{framebufferWidth:a,framebufferHeight:r,pixelRatio:l,region:g}=t,d=x(t,n),f=d.left+d.right,u=d.top+d.bottom,c=a-f,s=r-u,w=Math.min(e,Math.min((i-f)/c,(i-u)/s));return w<h?t:{...t,framebufferWidth:Math.round(c*w)+f,framebufferHeight:Math.round(s*w)+u,pixelRatio:l*w,resample:{region:{x:Math.round((g.x-d.left)*w)+d.left,y:Math.round((g.y-d.top)*w)+d.top,width:Math.round(g.width*w),height:Math.round(g.height*w)},width:a,height:r}}}function u(t,i,h){return h||(h=w()),h.getContext(\"2d\").createImageData(t,i)}let c=null,s=!0;function w(){return c||(c=document.createElement(\"canvas\"),c.width=1,c.height=1),c}function m(t,i){if(!t)return i;const h=t.width,e=t.height;if(null!=h&&null!=e)return{width:Math.floor(h),height:Math.floor(e)};if(null==h&&null==e)return i;const o=i.width/i.height;return null==e?{width:Math.floor(h),height:Math.floor(h/o)}:{width:Math.floor(e*o),height:Math.floor(e)}}function M(t,i){const h={x:0,y:0,width:i.width,height:i.height};if(t&&t.area){null!=t.area.x&&(h.x=Math.floor(t.area.x)),null!=t.area.y&&(h.y=Math.floor(t.area.y));const e=null!=t.area.width?Math.floor(t.area.width):null,o=null!=t.area.height?Math.floor(t.area.height):null;if(h.width=i.width-h.x,h.height=i.height-h.y,null!=e&&null!=o)h.width=Math.min(h.width,e),h.height=Math.min(h.height,o);else if(null==e&&null!=o){const t=Math.min(h.width,e);h.height=t/h.width*h.height,h.width=t}else if(null!=e&&null==o){const t=Math.min(h.height,o);h.width=t/h.height*h.width,h.height=t}}return p(y(h,t),i)}function p(t,i){const h=Math.floor(Math.max(t.x,0)),e=Math.floor(Math.max(t.y,0)),o={x:h,y:e,width:Math.floor(Math.min(t.width,i.width-h)),height:Math.floor(Math.min(t.height,i.height-e))},n=o.width/o.height,a=t.width/t.height;if(a===n)return o;if(a>n){const t=Math.floor(o.width/a),i=o.height-t;return{x:o.x,y:Math.floor(o.y+i/2),width:o.width,height:t}}const r=Math.floor(o.height*a),l=o.width-r;return{x:Math.floor(o.x+l/2),y:o.y,width:r,height:o.height}}function y(t,i){if(!i||null==i.width||null==i.height)return t;const h=i.width/i.height,e=t.width/t.height;if(e===h)return t;if(e<h){const i=Math.floor(t.height*h);return t.x-=(i-t.width)/2,t.width=i,t}const o=Math.floor(t.width/h);return t.y-=(o-t.height)/2,t.height=o,t}function x(t,i){return!i||t&&t.ignorePadding?P:i}function b(t){switch(t){case\"png\":case\"jpg\":case\"jpeg\":return t;case null:case void 0:default:return v}}function j(t){t.save(),t.globalCompositeOperation=\"copy\",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function D(t){const i=t.data,h=i.length;for(let e=0;e<h;e+=4){const t=i[e+3];if(t>0){const h=t/255;i[e+0]=i[e+0]/h,i[e+1]=i[e+1]/h,i[e+2]=i[e+2]/h}}}const q={png:\"image/png\",jpg:\"image/jpeg\",jpeg:\"image/jpeg\"},I=98,v=\"png\",C={png:100,jpg:I,jpeg:I},P={top:0,right:0,bottom:0,left:0};export{o as completeUserSettings,l as createEmptyImageData,a as encodeResult,d as resampleHermite,f as screenshotSuperSampleSettings,r as toDataUrl,n as toRenderSettings,g as wrapImageData};\n"]},"metadata":{},"sourceType":"module"}