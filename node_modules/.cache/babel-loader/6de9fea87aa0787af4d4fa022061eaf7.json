{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { e as n } from \"../../chunks/earcut.js\";\nimport { isClockwise as t } from \"./coordsUtils.js\";\nimport { deduplicate as e } from \"./meshUtils/deduplicate.js\";\n\nfunction o(t) {\n  const o = l(t.rings, t.hasZ, 1),\n        s = [];\n  let i = 0,\n      c = 0;\n\n  for (const e of o.polygons) {\n    const t = e.count,\n          r = e.index,\n          l = new Float64Array(o.position.buffer, 3 * r * o.position.BYTES_PER_ELEMENT, 3 * t),\n          h = e.holeIndices.map(n => n - r),\n          f = new Uint32Array(n(l, h, 3));\n    s.push({\n      position: l,\n      faces: f\n    }), i += l.length, c += f.length;\n  }\n\n  const h = r(s, i, c),\n        f = e(h.position.buffer, 6, {\n    originalIndices: h.faces\n  });\n  return h.position = new Float64Array(f.buffer), h.faces = f.indices, h;\n}\n\nfunction r(n, t, e) {\n  if (1 === n.length) return n[0];\n  const o = new Float64Array(t),\n        r = new Uint32Array(e);\n  let l = 0,\n      s = 0,\n      i = 0;\n\n  for (const c of n) {\n    for (let n = 0; n < c.position.length; n++) o[l++] = c.position[n];\n\n    for (let n = 0; n < c.faces.length; n++) r[s++] = c.faces[n] + i;\n\n    i = l / 3;\n  }\n\n  return {\n    position: o,\n    faces: r\n  };\n}\n\nfunction l(n, t, e) {\n  const o = n.length,\n        r = new Array(o),\n        l = new Array(o),\n        c = new Array(o);\n  let h = 0,\n      f = 0,\n      g = 0,\n      a = 0;\n\n  for (let s = 0; s < o; ++s) a += n[s].length;\n\n  const u = new Float64Array(3 * a);\n  let p = 0;\n\n  for (let d = o - 1; d >= 0; d--) {\n    const a = n[d],\n          y = 1 === e && i(a);\n    if (y && 1 !== o) r[h++] = a;else {\n      let n = a.length;\n\n      for (let t = 0; t < h; ++t) n += r[t].length;\n\n      const e = {\n        index: p,\n        pathLengths: new Array(h + 1),\n        count: n,\n        holeIndices: new Array(h)\n      };\n      e.pathLengths[0] = a.length, a.length > 0 && (c[g++] = {\n        index: p,\n        count: a.length\n      }), p = y ? s(a, a.length - 1, -1, u, p, a.length, t) : s(a, 0, 1, u, p, a.length, t);\n\n      for (let o = 0; o < h; ++o) {\n        const n = r[o];\n        e.holeIndices[o] = p, e.pathLengths[o + 1] = n.length, n.length > 0 && (c[g++] = {\n          index: p,\n          count: n.length\n        }), p = s(n, 0, 1, u, p, n.length, t);\n      }\n\n      h = 0, e.count > 0 && (l[f++] = e);\n    }\n  }\n\n  for (let i = 0; i < h; ++i) {\n    const n = r[i];\n    n.length > 0 && (c[g++] = {\n      index: p,\n      count: n.length\n    }), p = s(n, 0, 1, u, p, n.length, t);\n  }\n\n  return f < o && (l.length = f), g < o && (c.length = g), {\n    position: u,\n    polygons: l,\n    outlines: c\n  };\n}\n\nfunction s(n, t, e, o, r, l, s) {\n  r *= 3;\n\n  for (let i = 0; i < l; ++i) {\n    const l = n[t];\n    o[r++] = l[0], o[r++] = l[1], o[r++] = s ? l[2] : 0, t += e;\n  }\n\n  return r / 3;\n}\n\nfunction i(n) {\n  return !t(n, !1, !1);\n}\n\nexport { l as pathsToTriangulationInfo, o as triangulate };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/support/triangulationUtils.js"],"names":["e","n","isClockwise","t","deduplicate","o","l","rings","hasZ","s","i","c","polygons","count","r","index","Float64Array","position","buffer","BYTES_PER_ELEMENT","h","holeIndices","map","f","Uint32Array","push","faces","length","originalIndices","indices","Array","g","a","u","p","d","y","pathLengths","outlines","pathsToTriangulationInfo","triangulate"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{e as n}from\"../../chunks/earcut.js\";import{isClockwise as t}from\"./coordsUtils.js\";import{deduplicate as e}from\"./meshUtils/deduplicate.js\";function o(t){const o=l(t.rings,t.hasZ,1),s=[];let i=0,c=0;for(const e of o.polygons){const t=e.count,r=e.index,l=new Float64Array(o.position.buffer,3*r*o.position.BYTES_PER_ELEMENT,3*t),h=e.holeIndices.map((n=>n-r)),f=new Uint32Array(n(l,h,3));s.push({position:l,faces:f}),i+=l.length,c+=f.length}const h=r(s,i,c),f=e(h.position.buffer,6,{originalIndices:h.faces});return h.position=new Float64Array(f.buffer),h.faces=f.indices,h}function r(n,t,e){if(1===n.length)return n[0];const o=new Float64Array(t),r=new Uint32Array(e);let l=0,s=0,i=0;for(const c of n){for(let n=0;n<c.position.length;n++)o[l++]=c.position[n];for(let n=0;n<c.faces.length;n++)r[s++]=c.faces[n]+i;i=l/3}return{position:o,faces:r}}function l(n,t,e){const o=n.length,r=new Array(o),l=new Array(o),c=new Array(o);let h=0,f=0,g=0,a=0;for(let s=0;s<o;++s)a+=n[s].length;const u=new Float64Array(3*a);let p=0;for(let d=o-1;d>=0;d--){const a=n[d],y=1===e&&i(a);if(y&&1!==o)r[h++]=a;else{let n=a.length;for(let t=0;t<h;++t)n+=r[t].length;const e={index:p,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=a.length,a.length>0&&(c[g++]={index:p,count:a.length}),p=y?s(a,a.length-1,-1,u,p,a.length,t):s(a,0,1,u,p,a.length,t);for(let o=0;o<h;++o){const n=r[o];e.holeIndices[o]=p,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:p,count:n.length}),p=s(n,0,1,u,p,n.length,t)}h=0,e.count>0&&(l[f++]=e)}}for(let i=0;i<h;++i){const n=r[i];n.length>0&&(c[g++]={index:p,count:n.length}),p=s(n,0,1,u,p,n.length,t)}return f<o&&(l.length=f),g<o&&(c.length=g),{position:u,polygons:l,outlines:c}}function s(n,t,e,o,r,l,s){r*=3;for(let i=0;i<l;++i){const l=n[t];o[r++]=l[0],o[r++]=l[1],o[r++]=s?l[2]:0,t+=e}return r/3}function i(n){return!t(n,!1,!1)}export{l as pathsToTriangulationInfo,o as triangulate};\n"]},"metadata":{},"sourceType":"module"}