{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Error.js\";\nimport { isSome as t } from \"../../core/maybe.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as s } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport p from \"../../geometry/Point.js\";\nimport { combinedViewLayerTimeExtentProperty as i } from \"../../layers/support/commonProperties.js\";\nimport a from \"../../rest/support/Query.js\";\nimport { getFetchPopupTemplate as n } from \"./support/popupUtils.js\";\n\nconst u = u => {\n  let m = class extends u {\n    constructor() {\n      super(...arguments), this.view = null;\n    }\n\n    async fetchPopupFeatures(e, o) {\n      const {\n        layer: s\n      } = this;\n      if (!e) throw new r(\"imagerylayerview:fetchPopupFeatures\", \"Nothing to fetch without area\", {\n        layer: s\n      });\n      const {\n        popupEnabled: i\n      } = s,\n            u = n(s, o);\n      if (!i || !t(u)) throw new r(\"imagerylayerview:fetchPopupFeatures\", \"Missing required popupTemplate or popupEnabled\", {\n        popupEnabled: i,\n        popupTemplate: u\n      });\n      const m = await u.getRequiredFields(),\n            c = new a();\n      c.timeExtent = this.timeExtent, c.geometry = e, c.outFields = m, c.outSpatialReference = e.spatialReference;\n      const l = this.view.resolution,\n            y = \"2d\" === this.view.type ? new p(l, l, this.view.spatialReference) : new p(.5 * l, .5 * l, this.view.spatialReference),\n            {\n        returnTopmostRaster: h,\n        showNoDataRecords: w\n      } = u.layerOptions || {\n        returnTopmostRaster: !0,\n        showNoDataRecords: !1\n      },\n            d = {\n        returnDomainValues: !0,\n        returnTopmostRaster: h,\n        pixelSize: y,\n        showNoDataRecords: w,\n        signal: t(o) ? o.signal : null\n      };\n      return s.queryVisibleRasters(c, d).then(e => e);\n    }\n\n    canResume() {\n      var e;\n      return !!super.canResume() && (null == (e = this.timeExtent) || !e.isEmpty);\n    }\n\n  };\n  return e([o()], m.prototype, \"layer\", void 0), e([o()], m.prototype, \"suspended\", void 0), e([o(i)], m.prototype, \"timeExtent\", void 0), e([o()], m.prototype, \"view\", void 0), m = e([s(\"esri.views.layers.ImageryLayerView\")], m), m;\n};\n\nexport default u;\nexport { u as ImageryLayerView };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/layers/ImageryLayerView.js"],"names":["_","e","r","isSome","t","property","o","subclass","s","p","combinedViewLayerTimeExtentProperty","i","a","getFetchPopupTemplate","n","u","m","constructor","arguments","view","fetchPopupFeatures","layer","popupEnabled","popupTemplate","getRequiredFields","c","timeExtent","geometry","outFields","outSpatialReference","spatialReference","l","resolution","y","type","returnTopmostRaster","h","showNoDataRecords","w","layerOptions","d","returnDomainValues","pixelSize","signal","queryVisibleRasters","then","canResume","isEmpty","prototype","ImageryLayerView"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import p from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as i}from\"../../layers/support/commonProperties.js\";import a from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as n}from\"./support/popupUtils.js\";const u=u=>{let m=class extends u{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,o){const{layer:s}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s});const{popupEnabled:i}=s,u=n(s,o);if(!i||!t(u))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:i,popupTemplate:u});const m=await u.getRequiredFields(),c=new a;c.timeExtent=this.timeExtent,c.geometry=e,c.outFields=m,c.outSpatialReference=e.spatialReference;const l=this.view.resolution,y=\"2d\"===this.view.type?new p(l,l,this.view.spatialReference):new p(.5*l,.5*l,this.view.spatialReference),{returnTopmostRaster:h,showNoDataRecords:w}=u.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},d={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:y,showNoDataRecords:w,signal:t(o)?o.signal:null};return s.queryVisibleRasters(c,d).then((e=>e))}canResume(){var e;return!!super.canResume()&&(null==(e=this.timeExtent)||!e.isEmpty)}};return e([o()],m.prototype,\"layer\",void 0),e([o()],m.prototype,\"suspended\",void 0),e([o(i)],m.prototype,\"timeExtent\",void 0),e([o()],m.prototype,\"view\",void 0),m=e([s(\"esri.views.layers.ImageryLayerView\")],m),m};export default u;export{u as ImageryLayerView};\n"]},"metadata":{},"sourceType":"module"}