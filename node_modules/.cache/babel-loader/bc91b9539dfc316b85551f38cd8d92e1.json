{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { glsl as i } from \"../../shaderModules/interfaces.js\";\n\nfunction n(n, t) {\n  const e = n.fragment,\n        a = void 0 !== t.lightingSphericalHarmonicsOrder ? t.lightingSphericalHarmonicsOrder : 2;\n  0 === a ? (e.uniforms.add(\"lightingAmbientSH0\", \"vec3\"), e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)) : 1 === a ? (e.uniforms.add(\"lightingAmbientSH_R\", \"vec4\"), e.uniforms.add(\"lightingAmbientSH_G\", \"vec4\"), e.uniforms.add(\"lightingAmbientSH_B\", \"vec4\"), e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)) : 2 === a && (e.uniforms.add(\"lightingAmbientSH0\", \"vec3\"), e.uniforms.add(\"lightingAmbientSH_R1\", \"vec4\"), e.uniforms.add(\"lightingAmbientSH_G1\", \"vec4\"), e.uniforms.add(\"lightingAmbientSH_B1\", \"vec4\"), e.uniforms.add(\"lightingAmbientSH_R2\", \"vec4\"), e.uniforms.add(\"lightingAmbientSH_G2\", \"vec4\"), e.uniforms.add(\"lightingAmbientSH_B2\", \"vec4\"), e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`), 1 !== t.pbrMode && 2 !== t.pbrMode || e.code.add(i`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`));\n}\n\nexport { n as EvaluateAmbientLighting };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js"],"names":["glsl","i","n","t","e","fragment","a","lightingSphericalHarmonicsOrder","uniforms","add","code","pbrMode","EvaluateAmbientLighting"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,IAAI,IAAIC,CAAf,QAAqB,mCAArB;;AAAyD,SAASC,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAMC,CAAC,GAACF,CAAC,CAACG,QAAV;AAAA,QAAmBC,CAAC,GAAC,KAAK,CAAL,KAASH,CAAC,CAACI,+BAAX,GAA2CJ,CAAC,CAACI,+BAA7C,GAA6E,CAAlG;AAAoG,QAAID,CAAJ,IAAOF,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,oBAAf,EAAoC,MAApC,GAA4CL,CAAC,CAACM,IAAF,CAAOD,GAAP,CAAWR,CAAE;AAC7O;AACA;AACA,EAHgO,CAAnD,IAGxK,MAAIK,CAAJ,IAAOF,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,qBAAf,EAAqC,MAArC,GAA6CL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,qBAAf,EAAqC,MAArC,CAA7C,EAA0FL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,qBAAf,EAAqC,MAArC,CAA1F,EAAuIL,CAAC,CAACM,IAAF,CAAOD,GAAP,CAAWR,CAAE;AAChK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAbmJ,CAA9I,IAaA,MAAIK,CAAJ,KAAQF,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,oBAAf,EAAoC,MAApC,GAA4CL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,sBAAf,EAAsC,MAAtC,CAA5C,EAA0FL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,sBAAf,EAAsC,MAAtC,CAA1F,EAAwIL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,sBAAf,EAAsC,MAAtC,CAAxI,EAAsLL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,sBAAf,EAAsC,MAAtC,CAAtL,EAAoOL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,sBAAf,EAAsC,MAAtC,CAApO,EAAkRL,CAAC,CAACI,QAAF,CAAWC,GAAX,CAAe,sBAAf,EAAsC,MAAtC,CAAlR,EAAgUL,CAAC,CAACM,IAAF,CAAOD,GAAP,CAAWR,CAAE;AAC1V;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAzB6U,CAAhU,EAyBT,MAAIE,CAAC,CAACQ,OAAN,IAAe,MAAIR,CAAC,CAACQ,OAArB,IAA8BP,CAAC,CAACM,IAAF,CAAOD,GAAP,CAAWR,CAAE;AAC/C;AACA;AACA;AACA;AACA,EALkC,CAzB7B,CAhBwK;AA8CxK;;AAAA,SAAOC,CAAC,IAAIU,uBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n,t){const e=n.fragment,a=void 0!==t.lightingSphericalHarmonicsOrder?t.lightingSphericalHarmonicsOrder:2;0===a?(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===a?(e.uniforms.add(\"lightingAmbientSH_R\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===a&&(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.uniforms.add(\"lightingAmbientSH_R1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_R2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B2\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),1!==t.pbrMode&&2!==t.pbrMode||e.code.add(i`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}export{n as EvaluateAmbientLighting};\n"]},"metadata":{},"sourceType":"module"}