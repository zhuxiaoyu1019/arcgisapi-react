{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport i from \"../../../core/has.js\";\nimport { PooledRBush as s } from \"../../../core/libs/rbush/PooledRBush.js\";\nconst d = 5e4,\n      n = {\n  minX: 0,\n  minY: 0,\n  maxX: 0,\n  maxY: 0\n};\n\nfunction t(i, s, d) {\n  n.minX = s[0], n.minY = s[1], n.maxX = s[2], n.maxY = s[3], i.search(n, d);\n}\n\nclass e {\n  constructor() {\n    this._indexInvalid = !1, this._boundsToLoad = [], this._boundsById = new Map(), this._idByBounds = new Map(), this._index = new s(9, i(\"csp-restrictions\") ? i => ({\n      minX: i[0],\n      minY: i[1],\n      maxX: i[2],\n      maxY: i[3]\n    }) : [\"[0]\", \"[1]\", \"[2]\", \"[3]\"]), this._loadIndex = () => {\n      if (this._indexInvalid) {\n        const i = new Array(this._idByBounds.size);\n        let s = 0;\n        this._idByBounds.forEach((d, n) => {\n          i[s++] = n;\n        }), this._indexInvalid = !1, this._index.clear(), this._index.load(i);\n      } else this._boundsToLoad.length && (this._index.load(this._boundsToLoad.filter(i => this._idByBounds.has(i))), this._boundsToLoad.length = 0);\n    };\n  }\n\n  clear() {\n    this._indexInvalid = !1, this._boundsToLoad.length = 0, this._boundsById.clear(), this._idByBounds.clear(), this._index.clear();\n  }\n\n  delete(i) {\n    const s = this._boundsById.get(i);\n\n    this._boundsById.delete(i), s && (this._idByBounds.delete(s), this._indexInvalid || this._index.remove(s));\n  }\n\n  forEachInBounds(i, s) {\n    this._loadIndex(), t(this._index, i, i => s(this._idByBounds.get(i)));\n  }\n\n  get(i) {\n    return this._boundsById.get(i);\n  }\n\n  has(i) {\n    return this._boundsById.has(i);\n  }\n\n  invalidateIndex() {\n    this._indexInvalid || (this._indexInvalid = !0, this._boundsToLoad.length = 0);\n  }\n\n  set(i, s) {\n    if (!this._indexInvalid) {\n      const s = this._boundsById.get(i);\n\n      s && (this._index.remove(s), this._idByBounds.delete(s));\n    }\n\n    this._boundsById.set(i, s), s && (this._idByBounds.set(s, i), this._indexInvalid || (this._boundsToLoad.push(s), this._boundsToLoad.length > d && this._loadIndex()));\n  }\n\n}\n\nexport { e as BoundsStore };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js"],"names":["i","PooledRBush","s","d","n","minX","minY","maxX","maxY","t","search","e","constructor","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","clear","load","length","filter","has","delete","get","remove","forEachInBounds","invalidateIndex","set","push","BoundsStore"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i,s,d){n.minX=s[0],n.minY=s[1],n.maxX=s[2],n.maxY=s[3],i.search(n,d)}class e{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),t(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{e as BoundsStore};\n"]},"metadata":{},"sourceType":"module"}