{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"./reservedWordsGLSL3.js\";\nimport { o as e, l as a, b as r } from \"../../chunks/builtins.js\";\nvar n = 999,\n    o = 9999,\n    i = 0,\n    s = 1,\n    c = 2,\n    d = 3,\n    p = 4,\n    f = 5,\n    u = 6,\n    l = 7,\n    h = 8,\n    y = 9,\n    w = 10,\n    g = 11,\n    k = [\"block-comment\", \"line-comment\", \"preprocessor\", \"operator\", \"integer\", \"float\", \"ident\", \"builtin\", \"keyword\", \"whitespace\", \"eof\", \"integer\"];\n\nfunction m() {\n  var t,\n      m,\n      b,\n      _ = 0,\n      v = 0,\n      x = n,\n      j = [],\n      E = [],\n      O = 1,\n      L = 0,\n      D = 0,\n      G = !1,\n      T = !1,\n      X = \"\";\n  return function (t) {\n    return E = [], null !== t ? P(t.replace ? t.replace(/\\r\\n/g, \"\\n\") : t) : C();\n  };\n\n  function F(t) {\n    t.length && E.push({\n      type: k[x],\n      data: t,\n      position: D,\n      line: O,\n      column: L\n    });\n  }\n\n  function P(e) {\n    var a;\n\n    for (_ = 0, b = (X += e).length; t = X[_], _ < b;) {\n      switch (a = _, x) {\n        case i:\n          _ = $();\n          break;\n\n        case s:\n          _ = V();\n          break;\n\n        case c:\n          _ = M();\n          break;\n\n        case d:\n          _ = z();\n          break;\n\n        case p:\n          _ = Z();\n          break;\n\n        case g:\n          _ = W();\n          break;\n\n        case f:\n          _ = q();\n          break;\n\n        case o:\n          _ = B();\n          break;\n\n        case y:\n          _ = A();\n          break;\n\n        case n:\n          _ = S();\n      }\n\n      if (a !== _) switch (X[a]) {\n        case \"\\n\":\n          L = 0, ++O;\n          break;\n\n        default:\n          ++L;\n      }\n    }\n\n    return v += _, X = X.slice(_), E;\n  }\n\n  function C(t) {\n    return j.length && F(j.join(\"\")), x = w, F(\"(eof)\"), E;\n  }\n\n  function S() {\n    return j = j.length ? [] : j, \"/\" === m && \"*\" === t ? (D = v + _ - 1, x = i, m = t, _ + 1) : \"/\" === m && \"/\" === t ? (D = v + _ - 1, x = s, m = t, _ + 1) : \"#\" === t ? (x = c, D = v + _, _) : /\\s/.test(t) ? (x = y, D = v + _, _) : (G = /\\d/.test(t), T = /[^\\w_]/.test(t), D = v + _, x = G ? p : T ? d : o, _);\n  }\n\n  function A() {\n    return /[^\\s]/g.test(t) ? (F(j.join(\"\")), x = n, _) : (j.push(t), m = t, _ + 1);\n  }\n\n  function M() {\n    return \"\\r\" !== t && \"\\n\" !== t || \"\\\\\" === m ? (j.push(t), m = t, _ + 1) : (F(j.join(\"\")), x = n, _);\n  }\n\n  function V() {\n    return M();\n  }\n\n  function $() {\n    return \"/\" === t && \"*\" === m ? (j.push(t), F(j.join(\"\")), x = n, _ + 1) : (j.push(t), m = t, _ + 1);\n  }\n\n  function z() {\n    if (\".\" === m && /\\d/.test(t)) return x = f, _;\n    if (\"/\" === m && \"*\" === t) return x = i, _;\n    if (\"/\" === m && \"/\" === t) return x = s, _;\n\n    if (\".\" === t && j.length) {\n      for (; I(j););\n\n      return x = f, _;\n    }\n\n    if (\";\" === t || \")\" === t || \"(\" === t) {\n      if (j.length) for (; I(j););\n      return F(t), x = n, _ + 1;\n    }\n\n    var e = 2 === j.length && \"=\" !== t;\n\n    if (/[\\w_\\d\\s]/.test(t) || e) {\n      for (; I(j););\n\n      return x = n, _;\n    }\n\n    return j.push(t), m = t, _ + 1;\n  }\n\n  function I(t) {\n    for (var a, r, n = 0;;) {\n      if (a = e.indexOf(t.slice(0, t.length + n).join(\"\")), r = e[a], -1 === a) {\n        if (n-- + t.length > 0) continue;\n        r = t.slice(0, 1).join(\"\");\n      }\n\n      return F(r), D += r.length, (j = j.slice(r.length)).length;\n    }\n  }\n\n  function W() {\n    return /[^a-fA-F0-9]/.test(t) ? (F(j.join(\"\")), x = n, _) : (j.push(t), m = t, _ + 1);\n  }\n\n  function Z() {\n    return \".\" === t || /[eE]/.test(t) ? (j.push(t), x = f, m = t, _ + 1) : \"x\" === t && 1 === j.length && \"0\" === j[0] ? (x = g, j.push(t), m = t, _ + 1) : /[^\\d]/.test(t) ? (F(j.join(\"\")), x = n, _) : (j.push(t), m = t, _ + 1);\n  }\n\n  function q() {\n    return \"f\" === t && (j.push(t), m = t, _ += 1), /[eE]/.test(t) || \"-\" === t && /[eE]/.test(m) ? (j.push(t), m = t, _ + 1) : /[^\\d]/.test(t) ? (F(j.join(\"\")), x = n, _) : (j.push(t), m = t, _ + 1);\n  }\n\n  function B() {\n    if (/[^\\d\\w_]/.test(t)) {\n      var e = j.join(\"\");\n      return x = a.indexOf(e) > -1 ? h : r.indexOf(e) > -1 ? l : u, F(j.join(\"\")), x = n, _;\n    }\n\n    return j.push(t), m = t, _ + 1;\n  }\n}\n\nfunction b(t) {\n  var e = m(),\n      a = [];\n  return a = (a = a.concat(e(t))).concat(e(null));\n}\n\nfunction _(t) {\n  return b(t);\n}\n\nfunction v(t) {\n  return t.map(t => \"eof\" !== t.type ? t.data : \"\").join(\"\");\n}\n\nconst x = [\"GL_OES_standard_derivatives\", \"GL_EXT_frag_depth\", \"GL_EXT_draw_buffers\", \"GL_EXT_shader_texture_lod\"];\n\nfunction j(t, e = \"100\", a = \"300 es\") {\n  const r = /^\\s*\\#version\\s+([0-9]+(\\s+[a-zA-Z]+)?)\\s*/;\n\n  for (const n of t) if (\"preprocessor\" === n.type) {\n    const t = r.exec(n.data);\n\n    if (t) {\n      const r = t[1].replace(/\\s\\s+/g, \" \");\n      if (r === a) return r;\n      if (r === e) return n.data = \"#version \" + a, e;\n      throw new Error(\"unknown glsl version: \" + r);\n    }\n  }\n\n  return t.splice(0, 0, {\n    type: \"preprocessor\",\n    data: \"#version \" + a\n  }, {\n    type: \"whitespace\",\n    data: \"\\n\"\n  }), null;\n}\n\nfunction E(t, e) {\n  for (let a = e - 1; a >= 0; a--) {\n    const e = t[a];\n\n    if (\"whitespace\" !== e.type && \"block-comment\" !== e.type) {\n      if (\"keyword\" !== e.type) break;\n      if (\"attribute\" === e.data || \"in\" === e.data) return !0;\n    }\n  }\n\n  return !1;\n}\n\nfunction O(t, e, a, r) {\n  r = r || a;\n\n  for (const n of t) if (\"ident\" === n.type && n.data === a) {\n    r in e ? e[r]++ : e[r] = 0;\n    return O(t, e, r + \"_\" + e[r], r);\n  }\n\n  return a;\n}\n\nfunction L(t, e, a = \"afterVersion\") {\n  function r(t, e) {\n    for (let a = e; a < t.length; a++) {\n      const e = t[a];\n      if (\"operator\" === e.type && \";\" === e.data) return a;\n    }\n\n    return null;\n  }\n\n  function n(t) {\n    let e = -1,\n        n = 0,\n        o = -1;\n\n    for (let i = 0; i < t.length; i++) {\n      const s = t[i];\n\n      if (\"preprocessor\" === s.type && (s.data.match(/\\#(if|ifdef|ifndef)\\s+.+/) ? ++n : s.data.match(/\\#endif\\s*.*/) && --n), \"afterVersion\" !== a && \"afterPrecision\" !== a || \"preprocessor\" === s.type && /^#version/.test(s.data) && (o = Math.max(o, i)), \"afterPrecision\" === a && \"keyword\" === s.type && \"precision\" === s.data) {\n        const e = r(t, i);\n        if (null === e) throw new Error(\"precision statement not followed by any semicolons!\");\n        o = Math.max(o, e);\n      }\n\n      e < o && 0 === n && (e = i);\n    }\n\n    return e + 1;\n  }\n\n  const o = {\n    data: \"\\n\",\n    type: \"whitespace\"\n  },\n        i = e => e < t.length && /[^\\r\\n]$/.test(t[e].data);\n\n  let s = n(t);\n  i(s - 1) && t.splice(s++, 0, o);\n\n  for (const c of e) t.splice(s++, 0, c);\n\n  i(s - 1) && i(s) && t.splice(s, 0, o);\n}\n\nfunction D(t, e, a, r = \"lowp\") {\n  L(t, [{\n    type: \"keyword\",\n    data: \"out\"\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"keyword\",\n    data: r\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"keyword\",\n    data: a\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"ident\",\n    data: e\n  }, {\n    type: \"operator\",\n    data: \";\"\n  }], \"afterPrecision\");\n}\n\nfunction G(t, e, a, r, n = \"lowp\") {\n  L(t, [{\n    type: \"keyword\",\n    data: \"layout\"\n  }, {\n    type: \"operator\",\n    data: \"(\"\n  }, {\n    type: \"keyword\",\n    data: \"location\"\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"operator\",\n    data: \"=\"\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"integer\",\n    data: r.toString()\n  }, {\n    type: \"operator\",\n    data: \")\"\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"keyword\",\n    data: \"out\"\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"keyword\",\n    data: n\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"keyword\",\n    data: a\n  }, {\n    type: \"whitespace\",\n    data: \" \"\n  }, {\n    type: \"ident\",\n    data: e\n  }, {\n    type: \"operator\",\n    data: \";\"\n  }], \"afterPrecision\");\n}\n\nfunction T(t, e) {\n  let a,\n      r,\n      n = -1;\n\n  for (let o = e; o < t.length; o++) {\n    const e = t[o];\n\n    if (\"operator\" === e.type && (\"[\" === e.data && (a = o), \"]\" === e.data)) {\n      r = o;\n      break;\n    }\n\n    \"integer\" === e.type && (n = parseInt(e.data, 10));\n  }\n\n  return a && r && t.splice(a, r - a + 1), n;\n}\n\nfunction X(e, a) {\n  const r = _(e);\n\n  if (\"300 es\" === j(r, \"100\", \"300 es\")) throw new Error(\"shader is already glsl 300 es\");\n  let n = null,\n      o = null;\n  const i = {},\n        s = {};\n\n  for (let c = 0; c < r.length; ++c) {\n    const e = r[c];\n\n    switch (e.type) {\n      case \"keyword\":\n        35633 === a && \"attribute\" === e.data ? e.data = \"in\" : \"varying\" === e.data && (e.data = 35633 === a ? \"out\" : \"in\");\n        break;\n\n      case \"builtin\":\n        if (/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(e.data.trim()) && (e.data = e.data.replace(/(2D|Cube|EXT)/g, \"\")), 35632 === a && \"gl_FragColor\" === e.data && (n || (n = O(r, i, \"fragColor\"), D(r, n, \"vec4\")), e.data = n), 35632 === a && \"gl_FragData\" === e.data) {\n          const t = T(r, c + 1),\n                a = O(r, i, \"fragData\");\n          G(r, a, \"vec4\", t, \"mediump\"), e.data = a;\n        } else 35632 === a && \"gl_FragDepthEXT\" === e.data && (o || (o = O(r, i, \"gl_FragDepth\")), e.data = o);\n\n        break;\n\n      case \"ident\":\n        if (t.indexOf(e.data) >= 0) {\n          if (35633 === a && E(r, c)) throw new Error(\"attribute in vertex shader uses a name that is a reserved word in glsl 300 es\");\n          e.data in s || (s[e.data] = O(r, i, e.data)), e.data = s[e.data];\n        }\n\n    }\n  }\n\n  for (let t = r.length - 1; t >= 0; --t) {\n    const e = r[t];\n\n    if (\"preprocessor\" === e.type) {\n      const a = e.data.match(/\\#extension\\s+(.*)\\:/);\n\n      if (a && a[1] && x.indexOf(a[1].trim()) >= 0) {\n        const e = r[t + 1];\n        r.splice(t, e && \"whitespace\" === e.type ? 2 : 1);\n      }\n\n      const n = e.data.match(/\\#ifdef\\s+(.*)/);\n      n && n[1] && x.indexOf(n[1].trim()) >= 0 && (e.data = \"#if 1\");\n      const o = e.data.match(/\\#ifndef\\s+(.*)/);\n      o && o[1] && x.indexOf(o[1].trim()) >= 0 && (e.data = \"#if 0\");\n    }\n  }\n\n  return v(r);\n}\n\nexport { X as transpileShader };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/webgl/ShaderTranspiler.js"],"names":["t","o","e","l","a","b","r","n","i","s","c","d","p","f","u","h","y","w","g","k","m","_","v","x","j","E","O","L","D","G","T","X","P","replace","C","F","length","push","type","data","position","line","column","$","V","M","z","Z","W","q","B","A","S","slice","join","test","I","indexOf","concat","map","exec","Error","splice","match","Math","max","toString","parseInt","trim","transpileShader"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"./reservedWordsGLSL3.js\";import{o as e,l as a,b as r}from\"../../chunks/builtins.js\";var n=999,o=9999,i=0,s=1,c=2,d=3,p=4,f=5,u=6,l=7,h=8,y=9,w=10,g=11,k=[\"block-comment\",\"line-comment\",\"preprocessor\",\"operator\",\"integer\",\"float\",\"ident\",\"builtin\",\"keyword\",\"whitespace\",\"eof\",\"integer\"];function m(){var t,m,b,_=0,v=0,x=n,j=[],E=[],O=1,L=0,D=0,G=!1,T=!1,X=\"\";return function(t){return E=[],null!==t?P(t.replace?t.replace(/\\r\\n/g,\"\\n\"):t):C()};function F(t){t.length&&E.push({type:k[x],data:t,position:D,line:O,column:L})}function P(e){var a;for(_=0,b=(X+=e).length;t=X[_],_<b;){switch(a=_,x){case i:_=$();break;case s:_=V();break;case c:_=M();break;case d:_=z();break;case p:_=Z();break;case g:_=W();break;case f:_=q();break;case o:_=B();break;case y:_=A();break;case n:_=S()}if(a!==_)switch(X[a]){case\"\\n\":L=0,++O;break;default:++L}}return v+=_,X=X.slice(_),E}function C(t){return j.length&&F(j.join(\"\")),x=w,F(\"(eof)\"),E}function S(){return j=j.length?[]:j,\"/\"===m&&\"*\"===t?(D=v+_-1,x=i,m=t,_+1):\"/\"===m&&\"/\"===t?(D=v+_-1,x=s,m=t,_+1):\"#\"===t?(x=c,D=v+_,_):/\\s/.test(t)?(x=y,D=v+_,_):(G=/\\d/.test(t),T=/[^\\w_]/.test(t),D=v+_,x=G?p:T?d:o,_)}function A(){return/[^\\s]/g.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function M(){return\"\\r\"!==t&&\"\\n\"!==t||\"\\\\\"===m?(j.push(t),m=t,_+1):(F(j.join(\"\")),x=n,_)}function V(){return M()}function $(){return\"/\"===t&&\"*\"===m?(j.push(t),F(j.join(\"\")),x=n,_+1):(j.push(t),m=t,_+1)}function z(){if(\".\"===m&&/\\d/.test(t))return x=f,_;if(\"/\"===m&&\"*\"===t)return x=i,_;if(\"/\"===m&&\"/\"===t)return x=s,_;if(\".\"===t&&j.length){for(;I(j););return x=f,_}if(\";\"===t||\")\"===t||\"(\"===t){if(j.length)for(;I(j););return F(t),x=n,_+1}var e=2===j.length&&\"=\"!==t;if(/[\\w_\\d\\s]/.test(t)||e){for(;I(j););return x=n,_}return j.push(t),m=t,_+1}function I(t){for(var a,r,n=0;;){if(a=e.indexOf(t.slice(0,t.length+n).join(\"\")),r=e[a],-1===a){if(n--+t.length>0)continue;r=t.slice(0,1).join(\"\")}return F(r),D+=r.length,(j=j.slice(r.length)).length}}function W(){return/[^a-fA-F0-9]/.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function Z(){return\".\"===t||/[eE]/.test(t)?(j.push(t),x=f,m=t,_+1):\"x\"===t&&1===j.length&&\"0\"===j[0]?(x=g,j.push(t),m=t,_+1):/[^\\d]/.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function q(){return\"f\"===t&&(j.push(t),m=t,_+=1),/[eE]/.test(t)||\"-\"===t&&/[eE]/.test(m)?(j.push(t),m=t,_+1):/[^\\d]/.test(t)?(F(j.join(\"\")),x=n,_):(j.push(t),m=t,_+1)}function B(){if(/[^\\d\\w_]/.test(t)){var e=j.join(\"\");return x=a.indexOf(e)>-1?h:r.indexOf(e)>-1?l:u,F(j.join(\"\")),x=n,_}return j.push(t),m=t,_+1}}function b(t){var e=m(),a=[];return a=(a=a.concat(e(t))).concat(e(null))}function _(t){return b(t)}function v(t){return t.map((t=>\"eof\"!==t.type?t.data:\"\")).join(\"\")}const x=[\"GL_OES_standard_derivatives\",\"GL_EXT_frag_depth\",\"GL_EXT_draw_buffers\",\"GL_EXT_shader_texture_lod\"];function j(t,e=\"100\",a=\"300 es\"){const r=/^\\s*\\#version\\s+([0-9]+(\\s+[a-zA-Z]+)?)\\s*/;for(const n of t)if(\"preprocessor\"===n.type){const t=r.exec(n.data);if(t){const r=t[1].replace(/\\s\\s+/g,\" \");if(r===a)return r;if(r===e)return n.data=\"#version \"+a,e;throw new Error(\"unknown glsl version: \"+r)}}return t.splice(0,0,{type:\"preprocessor\",data:\"#version \"+a},{type:\"whitespace\",data:\"\\n\"}),null}function E(t,e){for(let a=e-1;a>=0;a--){const e=t[a];if(\"whitespace\"!==e.type&&\"block-comment\"!==e.type){if(\"keyword\"!==e.type)break;if(\"attribute\"===e.data||\"in\"===e.data)return!0}}return!1}function O(t,e,a,r){r=r||a;for(const n of t)if(\"ident\"===n.type&&n.data===a){r in e?e[r]++:e[r]=0;return O(t,e,r+\"_\"+e[r],r)}return a}function L(t,e,a=\"afterVersion\"){function r(t,e){for(let a=e;a<t.length;a++){const e=t[a];if(\"operator\"===e.type&&\";\"===e.data)return a}return null}function n(t){let e=-1,n=0,o=-1;for(let i=0;i<t.length;i++){const s=t[i];if(\"preprocessor\"===s.type&&(s.data.match(/\\#(if|ifdef|ifndef)\\s+.+/)?++n:s.data.match(/\\#endif\\s*.*/)&&--n),\"afterVersion\"!==a&&\"afterPrecision\"!==a||\"preprocessor\"===s.type&&/^#version/.test(s.data)&&(o=Math.max(o,i)),\"afterPrecision\"===a&&\"keyword\"===s.type&&\"precision\"===s.data){const e=r(t,i);if(null===e)throw new Error(\"precision statement not followed by any semicolons!\");o=Math.max(o,e)}e<o&&0===n&&(e=i)}return e+1}const o={data:\"\\n\",type:\"whitespace\"},i=e=>e<t.length&&/[^\\r\\n]$/.test(t[e].data);let s=n(t);i(s-1)&&t.splice(s++,0,o);for(const c of e)t.splice(s++,0,c);i(s-1)&&i(s)&&t.splice(s,0,o)}function D(t,e,a,r=\"lowp\"){L(t,[{type:\"keyword\",data:\"out\"},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:r},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:a},{type:\"whitespace\",data:\" \"},{type:\"ident\",data:e},{type:\"operator\",data:\";\"}],\"afterPrecision\")}function G(t,e,a,r,n=\"lowp\"){L(t,[{type:\"keyword\",data:\"layout\"},{type:\"operator\",data:\"(\"},{type:\"keyword\",data:\"location\"},{type:\"whitespace\",data:\" \"},{type:\"operator\",data:\"=\"},{type:\"whitespace\",data:\" \"},{type:\"integer\",data:r.toString()},{type:\"operator\",data:\")\"},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:\"out\"},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:n},{type:\"whitespace\",data:\" \"},{type:\"keyword\",data:a},{type:\"whitespace\",data:\" \"},{type:\"ident\",data:e},{type:\"operator\",data:\";\"}],\"afterPrecision\")}function T(t,e){let a,r,n=-1;for(let o=e;o<t.length;o++){const e=t[o];if(\"operator\"===e.type&&(\"[\"===e.data&&(a=o),\"]\"===e.data)){r=o;break}\"integer\"===e.type&&(n=parseInt(e.data,10))}return a&&r&&t.splice(a,r-a+1),n}function X(e,a){const r=_(e);if(\"300 es\"===j(r,\"100\",\"300 es\"))throw new Error(\"shader is already glsl 300 es\");let n=null,o=null;const i={},s={};for(let c=0;c<r.length;++c){const e=r[c];switch(e.type){case\"keyword\":35633===a&&\"attribute\"===e.data?e.data=\"in\":\"varying\"===e.data&&(e.data=35633===a?\"out\":\"in\");break;case\"builtin\":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(e.data.trim())&&(e.data=e.data.replace(/(2D|Cube|EXT)/g,\"\")),35632===a&&\"gl_FragColor\"===e.data&&(n||(n=O(r,i,\"fragColor\"),D(r,n,\"vec4\")),e.data=n),35632===a&&\"gl_FragData\"===e.data){const t=T(r,c+1),a=O(r,i,\"fragData\");G(r,a,\"vec4\",t,\"mediump\"),e.data=a}else 35632===a&&\"gl_FragDepthEXT\"===e.data&&(o||(o=O(r,i,\"gl_FragDepth\")),e.data=o);break;case\"ident\":if(t.indexOf(e.data)>=0){if(35633===a&&E(r,c))throw new Error(\"attribute in vertex shader uses a name that is a reserved word in glsl 300 es\");e.data in s||(s[e.data]=O(r,i,e.data)),e.data=s[e.data]}}}for(let t=r.length-1;t>=0;--t){const e=r[t];if(\"preprocessor\"===e.type){const a=e.data.match(/\\#extension\\s+(.*)\\:/);if(a&&a[1]&&x.indexOf(a[1].trim())>=0){const e=r[t+1];r.splice(t,e&&\"whitespace\"===e.type?2:1)}const n=e.data.match(/\\#ifdef\\s+(.*)/);n&&n[1]&&x.indexOf(n[1].trim())>=0&&(e.data=\"#if 1\");const o=e.data.match(/\\#ifndef\\s+(.*)/);o&&o[1]&&x.indexOf(o[1].trim())>=0&&(e.data=\"#if 0\")}}return v(r)}export{X as transpileShader};\n"]},"metadata":{},"sourceType":"module"}