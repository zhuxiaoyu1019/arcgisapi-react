{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { VTLBackgroundMaterial as t } from \"../shaders/VTLBackgroundMaterial.js\";\nimport { VTLCircleMaterial as i } from \"../shaders/VTLCircleMaterial.js\";\nimport { VTLFillMaterial as e, VTLOutlineMaterial as a } from \"../shaders/VTLFillMaterial.js\";\nimport { VTLLineMaterial as o } from \"../shaders/VTLLineMaterial.js\";\nimport { VTLIconMaterial as r, VTLTextMaterial as s } from \"../shaders/VTLSymbolMaterial.js\";\nimport n from \"./Filter.js\";\nimport { StyleDefinition as l } from \"./StyleDefinition.js\";\nimport h from \"./StyleProperty.js\";\nimport { THIN_LINE_HALF_WIDTH_THRESHOLD as u } from \"../../webgl/definitions.js\";\n\nclass p {\n  constructor(t, i, e, a) {\n    switch (this.type = t, this.typeName = i.type, this.id = i.id, this.source = i.source, this.sourceLayer = i[\"source-layer\"], this.minzoom = i.minzoom, this.maxzoom = i.maxzoom, this.filter = i.filter, this.layout = i.layout, this.paint = i.paint, this.z = e, this.uid = a, t) {\n      case 0:\n        this._layoutDefinition = l.backgroundLayoutDefinition, this._paintDefinition = l.backgroundPaintDefinition;\n        break;\n\n      case 1:\n        this._layoutDefinition = l.fillLayoutDefinition, this._paintDefinition = l.fillPaintDefinition;\n        break;\n\n      case 2:\n        this._layoutDefinition = l.lineLayoutDefinition, this._paintDefinition = l.linePaintDefinition;\n        break;\n\n      case 3:\n        this._layoutDefinition = l.symbolLayoutDefinition, this._paintDefinition = l.symbolPaintDefinition;\n        break;\n\n      case 4:\n        this._layoutDefinition = l.circleLayoutDefinition, this._paintDefinition = l.circlePaintDefinition;\n    }\n\n    this._layoutProperties = this._parseLayout(this.layout), this._paintProperties = this._parsePaint(this.paint);\n  }\n\n  getFeatureFilter() {\n    return void 0 !== this._featureFilter ? this._featureFilter : this._featureFilter = n.createFilter(this.filter);\n  }\n\n  getLayoutProperty(t) {\n    return this._layoutProperties[t];\n  }\n\n  getPaintProperty(t) {\n    return this._paintProperties[t];\n  }\n\n  getLayoutValue(t, i, e) {\n    let a;\n    const o = this._layoutProperties[t];\n    return o && (a = o.getValue(i, e)), void 0 === a && (a = this._layoutDefinition[t].default), a;\n  }\n\n  getPaintValue(t, i, e) {\n    let a;\n    const o = this._paintProperties[t];\n    return o && (a = o.getValue(i, e)), void 0 === a && (a = this._paintDefinition[t].default), a;\n  }\n\n  isPainterDataDriven() {\n    const t = this._paintProperties;\n    if (t) for (const i in t) if (t[i].isDataDriven) return !0;\n    return !1;\n  }\n\n  _parseLayout(t) {\n    const i = {};\n\n    for (const e in t) {\n      const a = this._layoutDefinition[e];\n      a && (i[e] = new h(a, t[e]));\n    }\n\n    return i;\n  }\n\n  _parsePaint(t) {\n    const i = {};\n\n    for (const e in t) {\n      const a = this._paintDefinition[e];\n      a && (i[e] = new h(a, t[e]));\n    }\n\n    return i;\n  }\n\n  computeAttributesKey(t, i, e, a) {\n    let o = 0,\n        r = 0;\n\n    for (const s of i) {\n      let t = 3;\n\n      if (!s || s !== a) {\n        const i = e[s],\n              {\n          isLayout: a,\n          isOptional: o\n        } = i,\n              r = a ? this.getLayoutProperty(s) : this.getPaintProperty(s);\n        t = null != r && r.interpolator ? 2 : null != r && r.isDataDriven ? 1 : o && !r ? 3 : 0;\n      }\n\n      r |= t << o, o += 2;\n    }\n\n    return r << 3 | t;\n  }\n\n}\n\nclass g extends p {\n  constructor(i, e, a, o) {\n    super(i, e, a, o), this.backgroundMaterial = new t(this.computeAttributesKey(0, t.ATTRIBUTES, t.ATTRIBUTES_INFO));\n  }\n\n}\n\nclass y extends p {\n  constructor(t, i, o, r) {\n    super(t, i, o, r);\n    const s = this.getPaintProperty(\"fill-color\"),\n          n = this.getPaintProperty(\"fill-opacity\"),\n          l = this.getPaintProperty(\"fill-pattern\");\n    this.hasDataDrivenColor = null == s ? void 0 : s.isDataDriven, this.hasDataDrivenOpacity = null == n ? void 0 : n.isDataDriven, this.hasDataDrivenFill = this.hasDataDrivenColor || this.hasDataDrivenOpacity || (null == l ? void 0 : l.isDataDriven);\n    const h = this.getPaintProperty(\"fill-outline-color\");\n    this.outlineUsesFillColor = !h, this.hasDataDrivenOutlineColor = null == h ? void 0 : h.isDataDriven, this.hasDataDrivenOutline = h ? h.isDataDriven : !!s && s.isDataDriven, this.hasDataDrivenOutline = (h ? this.hasDataDrivenOutlineColor : this.hasDataDrivenColor) || this.hasDataDrivenOpacity, this.fillMaterial = new e(this.computeAttributesKey(1, e.ATTRIBUTES, e.ATTRIBUTES_INFO)), this.outlineMaterial = new a(this.computeAttributesKey(2, this.outlineUsesFillColor ? a.ATTRIBUTES_FILL : a.ATTRIBUTES_OUTLINE, this.outlineUsesFillColor ? a.ATTRIBUTES_INFO_FILL : a.ATTRIBUTES_INFO_OUTLINE), this.outlineUsesFillColor);\n  }\n\n}\n\nclass D extends p {\n  constructor(t, i, e, a) {\n    var r, s, n, l, h, p, g, y, D;\n    super(t, i, e, a);\n    const P = this.getPaintProperty(\"line-pattern\");\n\n    if (this.lineMaterial = new o(this.computeAttributesKey(3, o.ATTRIBUTES, o.ATTRIBUTES_INFO, P ? \"line-dasharray\" : \"\")), this.hasDataDrivenLine = (null == (r = this.getPaintProperty(\"line-blur\")) ? void 0 : r.isDataDriven) || (null == (s = this.getPaintProperty(\"line-color\")) ? void 0 : s.isDataDriven) || (null == (n = this.getPaintProperty(\"line-gap-width\")) ? void 0 : n.isDataDriven) || (null == (l = this.getPaintProperty(\"line-offset\")) ? void 0 : l.isDataDriven) || (null == (h = this.getPaintProperty(\"line-opacity\")) ? void 0 : h.isDataDriven) || (null == (p = this.getPaintProperty(\"line-pattern\")) ? void 0 : p.isDataDriven) || (null == (g = this.getPaintProperty(\"line-dasharray\")) ? void 0 : g.isDataDriven) || (null == (y = this.getLayoutProperty(\"line-cap\")) ? void 0 : y.isDataDriven) || (null == (D = this.getPaintProperty(\"line-width\")) ? void 0 : D.isDataDriven), this.canUseThinTessellation = !1, !this.hasDataDrivenLine) {\n      const t = this.getPaintProperty(\"line-width\");\n\n      if (!t || \"number\" == typeof t && .5 * t < u) {\n        const t = this.getPaintProperty(\"line-offset\");\n        (!t || \"number\" == typeof t && 0 === t) && (this.canUseThinTessellation = !0);\n      }\n    }\n  }\n\n  getDashKey(t, i) {\n    let e;\n\n    switch (i) {\n      case 0:\n        e = \"Butt\";\n        break;\n\n      case 1:\n        e = \"Round\";\n        break;\n\n      case 2:\n        e = \"Square\";\n        break;\n\n      default:\n        e = \"Butt\";\n    }\n\n    return `dasharray-[${t.toString()}]-${e}`;\n  }\n\n}\n\nclass P extends p {\n  constructor(t, i, e, a) {\n    var o, n, l, h, u, p, g, y, D, P, c, d;\n    super(t, i, e, a), this.iconMaterial = new r(this.computeAttributesKey(4, r.ATTRIBUTES, r.ATTRIBUTES_INFO)), this.textMaterial = new s(this.computeAttributesKey(6, s.ATTRIBUTES, s.ATTRIBUTES_INFO)), this.hasDataDrivenIcon = (null == (o = this.getPaintProperty(\"icon-color\")) ? void 0 : o.isDataDriven) || (null == (n = this.getPaintProperty(\"icon-halo-blur\")) ? void 0 : n.isDataDriven) || (null == (l = this.getPaintProperty(\"icon-halo-color\")) ? void 0 : l.isDataDriven) || (null == (h = this.getPaintProperty(\"icon-halo-width\")) ? void 0 : h.isDataDriven) || (null == (u = this.getPaintProperty(\"icon-opacity\")) ? void 0 : u.isDataDriven) || (null == (p = this.getLayoutProperty(\"icon-size\")) ? void 0 : p.isDataDriven), this.hasDataDrivenText = (null == (g = this.getPaintProperty(\"text-color\")) ? void 0 : g.isDataDriven) || (null == (y = this.getPaintProperty(\"text-halo-blur\")) ? void 0 : y.isDataDriven) || (null == (D = this.getPaintProperty(\"text-halo-color\")) ? void 0 : D.isDataDriven) || (null == (P = this.getPaintProperty(\"text-halo-width\")) ? void 0 : P.isDataDriven) || (null == (c = this.getPaintProperty(\"text-opacity\")) ? void 0 : c.isDataDriven) || (null == (d = this.getLayoutProperty(\"text-size\")) ? void 0 : d.isDataDriven);\n  }\n\n}\n\nclass c extends p {\n  constructor(t, e, a, o) {\n    super(t, e, a, o), this.circleMaterial = new i(this.computeAttributesKey(5, i.ATTRIBUTES, i.ATTRIBUTES_INFO));\n  }\n\n}\n\nclass d {\n  constructor(t, i, e) {\n    var a, o, r, s, n;\n    let l;\n    this.allowOverlap = t.getLayoutValue(\"icon-allow-overlap\", i), this.ignorePlacement = t.getLayoutValue(\"icon-ignore-placement\", i), this.keepUpright = t.getLayoutValue(\"icon-keep-upright\", i), this.optional = t.getLayoutValue(\"icon-optional\", i), this.rotationAlignment = t.getLayoutValue(\"icon-rotation-alignment\", i), 2 === this.rotationAlignment && (this.rotationAlignment = e ? 0 : 1), l = t.getLayoutProperty(\"icon-anchor\"), null != (a = l) && a.isDataDriven ? this._anchorProp = l : this.anchor = t.getLayoutValue(\"icon-anchor\", i), l = t.getLayoutProperty(\"icon-offset\"), null != (o = l) && o.isDataDriven ? this._offsetProp = l : this.offset = t.getLayoutValue(\"icon-offset\", i), l = t.getLayoutProperty(\"icon-padding\"), null != (r = l) && r.isDataDriven ? this._paddingProp = l : this.padding = t.getLayoutValue(\"icon-padding\", i), l = t.getLayoutProperty(\"icon-rotate\"), null != (s = l) && s.isDataDriven ? this._rotateProp = l : this.rotate = t.getLayoutValue(\"icon-rotate\", i), l = t.getLayoutProperty(\"icon-size\"), null != (n = l) && n.isDataDriven ? this._sizeProp = l : this.size = t.getLayoutValue(\"icon-size\", i);\n  }\n\n  update(t, i) {\n    this._anchorProp && (this.anchor = this._anchorProp.getValue(t, i)), this._offsetProp && (this.offset = this._offsetProp.getValue(t, i)), this._paddingProp && (this.padding = this._paddingProp.getValue(t, i)), this._rotateProp && (this.rotate = this._rotateProp.getValue(t, i)), this._sizeProp && (this.size = this._sizeProp.getValue(t, i));\n  }\n\n}\n\nclass f {\n  constructor(t, i, e) {\n    var a, o, r, s, n, l, h, u, p, g, y;\n    let D;\n    this.allowOverlap = t.getLayoutValue(\"text-allow-overlap\", i), this.ignorePlacement = t.getLayoutValue(\"text-ignore-placement\", i), this.keepUpright = t.getLayoutValue(\"text-keep-upright\", i), this.optional = t.getLayoutValue(\"text-optional\", i), this.rotationAlignment = t.getLayoutValue(\"text-rotation-alignment\", i), 2 === this.rotationAlignment && (this.rotationAlignment = e ? 0 : 1), D = t.getLayoutProperty(\"text-anchor\"), null != (a = D) && a.isDataDriven ? this._anchorProp = D : this.anchor = t.getLayoutValue(\"text-anchor\", i), D = t.getLayoutProperty(\"text-justify\"), null != (o = D) && o.isDataDriven ? this._justifyProp = D : this.justify = t.getLayoutValue(\"text-justify\", i), D = t.getLayoutProperty(\"text-letter-spacing\"), null != (r = D) && r.isDataDriven ? this._letterSpacingProp = D : this.letterSpacing = t.getLayoutValue(\"text-letter-spacing\", i), D = t.getLayoutProperty(\"text-line-height\"), null != (s = D) && s.isDataDriven ? this._lineHeightProp = D : this.lineHeight = t.getLayoutValue(\"text-line-height\", i), D = t.getLayoutProperty(\"text-max-angle\"), null != (n = D) && n.isDataDriven ? this._maxAngleProp = D : this.maxAngle = t.getLayoutValue(\"text-max-angle\", i), D = t.getLayoutProperty(\"text-max-width\"), null != (l = D) && l.isDataDriven ? this._maxWidthProp = D : this.maxWidth = t.getLayoutValue(\"text-max-width\", i), D = t.getLayoutProperty(\"text-offset\"), null != (h = D) && h.isDataDriven ? this._offsetProp = D : this.offset = t.getLayoutValue(\"text-offset\", i), D = t.getLayoutProperty(\"text-padding\"), null != (u = D) && u.isDataDriven ? this._paddingProp = D : this.padding = t.getLayoutValue(\"text-padding\", i), D = t.getLayoutProperty(\"text-rotate\"), null != (p = D) && p.isDataDriven ? this._rotateProp = D : this.rotate = t.getLayoutValue(\"text-rotate\", i), D = t.getLayoutProperty(\"text-size\"), null != (g = D) && g.isDataDriven ? this._sizeProp = D : this.size = t.getLayoutValue(\"text-size\", i), D = t.getLayoutProperty(\"text-writing-mode\"), null != (y = D) && y.isDataDriven ? this._writingModeProp = D : this.writingMode = t.getLayoutValue(\"text-writing-mode\", i);\n  }\n\n  update(t, i) {\n    this._anchorProp && (this.anchor = this._anchorProp.getValue(t, i)), this._justifyProp && (this.justify = this._justifyProp.getValue(t, i)), this._letterSpacingProp && (this.letterSpacing = this._letterSpacingProp.getValue(t, i)), this._lineHeightProp && (this.lineHeight = this._lineHeightProp.getValue(t, i)), this._maxAngleProp && (this.maxAngle = this._maxAngleProp.getValue(t, i)), this._maxWidthProp && (this.maxWidth = this._maxWidthProp.getValue(t, i)), this._offsetProp && (this.offset = this._offsetProp.getValue(t, i)), this._paddingProp && (this.padding = this._paddingProp.getValue(t, i)), this._rotateProp && (this.rotate = this._rotateProp.getValue(t, i)), this._sizeProp && (this.size = this._sizeProp.getValue(t, i)), this._writingModeProp && (this.writingMode = this._writingModeProp.getValue(t, i));\n  }\n\n}\n\nexport { g as BackgroundStyleLayer, c as CircleStyleLayer, y as FillStyleLayer, d as IconLayout, D as LineStyleLayer, p as StyleLayer, P as SymbolStyleLayer, f as TextLayout };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleLayer.js"],"names":["VTLBackgroundMaterial","t","VTLCircleMaterial","i","VTLFillMaterial","e","VTLOutlineMaterial","a","VTLLineMaterial","o","VTLIconMaterial","r","VTLTextMaterial","s","n","StyleDefinition","l","h","THIN_LINE_HALF_WIDTH_THRESHOLD","u","p","constructor","type","typeName","id","source","sourceLayer","minzoom","maxzoom","filter","layout","paint","z","uid","_layoutDefinition","backgroundLayoutDefinition","_paintDefinition","backgroundPaintDefinition","fillLayoutDefinition","fillPaintDefinition","lineLayoutDefinition","linePaintDefinition","symbolLayoutDefinition","symbolPaintDefinition","circleLayoutDefinition","circlePaintDefinition","_layoutProperties","_parseLayout","_paintProperties","_parsePaint","getFeatureFilter","_featureFilter","createFilter","getLayoutProperty","getPaintProperty","getLayoutValue","getValue","default","getPaintValue","isPainterDataDriven","isDataDriven","computeAttributesKey","isLayout","isOptional","interpolator","g","backgroundMaterial","ATTRIBUTES","ATTRIBUTES_INFO","y","hasDataDrivenColor","hasDataDrivenOpacity","hasDataDrivenFill","outlineUsesFillColor","hasDataDrivenOutlineColor","hasDataDrivenOutline","fillMaterial","outlineMaterial","ATTRIBUTES_FILL","ATTRIBUTES_OUTLINE","ATTRIBUTES_INFO_FILL","ATTRIBUTES_INFO_OUTLINE","D","P","lineMaterial","hasDataDrivenLine","canUseThinTessellation","getDashKey","toString","c","d","iconMaterial","textMaterial","hasDataDrivenIcon","hasDataDrivenText","circleMaterial","allowOverlap","ignorePlacement","keepUpright","optional","rotationAlignment","_anchorProp","anchor","_offsetProp","offset","_paddingProp","padding","_rotateProp","rotate","_sizeProp","size","update","f","_justifyProp","justify","_letterSpacingProp","letterSpacing","_lineHeightProp","lineHeight","_maxAngleProp","maxAngle","_maxWidthProp","maxWidth","_writingModeProp","writingMode","BackgroundStyleLayer","CircleStyleLayer","FillStyleLayer","IconLayout","LineStyleLayer","StyleLayer","SymbolStyleLayer","TextLayout"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{VTLBackgroundMaterial as t}from\"../shaders/VTLBackgroundMaterial.js\";import{VTLCircleMaterial as i}from\"../shaders/VTLCircleMaterial.js\";import{VTLFillMaterial as e,VTLOutlineMaterial as a}from\"../shaders/VTLFillMaterial.js\";import{VTLLineMaterial as o}from\"../shaders/VTLLineMaterial.js\";import{VTLIconMaterial as r,VTLTextMaterial as s}from\"../shaders/VTLSymbolMaterial.js\";import n from\"./Filter.js\";import{StyleDefinition as l}from\"./StyleDefinition.js\";import h from\"./StyleProperty.js\";import{THIN_LINE_HALF_WIDTH_THRESHOLD as u}from\"../../webgl/definitions.js\";class p{constructor(t,i,e,a){switch(this.type=t,this.typeName=i.type,this.id=i.id,this.source=i.source,this.sourceLayer=i[\"source-layer\"],this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.filter=i.filter,this.layout=i.layout,this.paint=i.paint,this.z=e,this.uid=a,t){case 0:this._layoutDefinition=l.backgroundLayoutDefinition,this._paintDefinition=l.backgroundPaintDefinition;break;case 1:this._layoutDefinition=l.fillLayoutDefinition,this._paintDefinition=l.fillPaintDefinition;break;case 2:this._layoutDefinition=l.lineLayoutDefinition,this._paintDefinition=l.linePaintDefinition;break;case 3:this._layoutDefinition=l.symbolLayoutDefinition,this._paintDefinition=l.symbolPaintDefinition;break;case 4:this._layoutDefinition=l.circleLayoutDefinition,this._paintDefinition=l.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,i,e){let a;const o=this._layoutProperties[t];return o&&(a=o.getValue(i,e)),void 0===a&&(a=this._layoutDefinition[t].default),a}getPaintValue(t,i,e){let a;const o=this._paintProperties[t];return o&&(a=o.getValue(i,e)),void 0===a&&(a=this._paintDefinition[t].default),a}isPainterDataDriven(){const t=this._paintProperties;if(t)for(const i in t)if(t[i].isDataDriven)return!0;return!1}_parseLayout(t){const i={};for(const e in t){const a=this._layoutDefinition[e];a&&(i[e]=new h(a,t[e]))}return i}_parsePaint(t){const i={};for(const e in t){const a=this._paintDefinition[e];a&&(i[e]=new h(a,t[e]))}return i}computeAttributesKey(t,i,e,a){let o=0,r=0;for(const s of i){let t=3;if(!s||s!==a){const i=e[s],{isLayout:a,isOptional:o}=i,r=a?this.getLayoutProperty(s):this.getPaintProperty(s);t=null!=r&&r.interpolator?2:null!=r&&r.isDataDriven?1:o&&!r?3:0}r|=t<<o,o+=2}return r<<3|t}}class g extends p{constructor(i,e,a,o){super(i,e,a,o),this.backgroundMaterial=new t(this.computeAttributesKey(0,t.ATTRIBUTES,t.ATTRIBUTES_INFO))}}class y extends p{constructor(t,i,o,r){super(t,i,o,r);const s=this.getPaintProperty(\"fill-color\"),n=this.getPaintProperty(\"fill-opacity\"),l=this.getPaintProperty(\"fill-pattern\");this.hasDataDrivenColor=null==s?void 0:s.isDataDriven,this.hasDataDrivenOpacity=null==n?void 0:n.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||(null==l?void 0:l.isDataDriven);const h=this.getPaintProperty(\"fill-outline-color\");this.outlineUsesFillColor=!h,this.hasDataDrivenOutlineColor=null==h?void 0:h.isDataDriven,this.hasDataDrivenOutline=h?h.isDataDriven:!!s&&s.isDataDriven,this.hasDataDrivenOutline=(h?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new e(this.computeAttributesKey(1,e.ATTRIBUTES,e.ATTRIBUTES_INFO)),this.outlineMaterial=new a(this.computeAttributesKey(2,this.outlineUsesFillColor?a.ATTRIBUTES_FILL:a.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?a.ATTRIBUTES_INFO_FILL:a.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class D extends p{constructor(t,i,e,a){var r,s,n,l,h,p,g,y,D;super(t,i,e,a);const P=this.getPaintProperty(\"line-pattern\");if(this.lineMaterial=new o(this.computeAttributesKey(3,o.ATTRIBUTES,o.ATTRIBUTES_INFO,P?\"line-dasharray\":\"\")),this.hasDataDrivenLine=(null==(r=this.getPaintProperty(\"line-blur\"))?void 0:r.isDataDriven)||(null==(s=this.getPaintProperty(\"line-color\"))?void 0:s.isDataDriven)||(null==(n=this.getPaintProperty(\"line-gap-width\"))?void 0:n.isDataDriven)||(null==(l=this.getPaintProperty(\"line-offset\"))?void 0:l.isDataDriven)||(null==(h=this.getPaintProperty(\"line-opacity\"))?void 0:h.isDataDriven)||(null==(p=this.getPaintProperty(\"line-pattern\"))?void 0:p.isDataDriven)||(null==(g=this.getPaintProperty(\"line-dasharray\"))?void 0:g.isDataDriven)||(null==(y=this.getLayoutProperty(\"line-cap\"))?void 0:y.isDataDriven)||(null==(D=this.getPaintProperty(\"line-width\"))?void 0:D.isDataDriven),this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const t=this.getPaintProperty(\"line-width\");if(!t||\"number\"==typeof t&&.5*t<u){const t=this.getPaintProperty(\"line-offset\");(!t||\"number\"==typeof t&&0===t)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,i){let e;switch(i){case 0:e=\"Butt\";break;case 1:e=\"Round\";break;case 2:e=\"Square\";break;default:e=\"Butt\"}return`dasharray-[${t.toString()}]-${e}`}}class P extends p{constructor(t,i,e,a){var o,n,l,h,u,p,g,y,D,P,c,d;super(t,i,e,a),this.iconMaterial=new r(this.computeAttributesKey(4,r.ATTRIBUTES,r.ATTRIBUTES_INFO)),this.textMaterial=new s(this.computeAttributesKey(6,s.ATTRIBUTES,s.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=(null==(o=this.getPaintProperty(\"icon-color\"))?void 0:o.isDataDriven)||(null==(n=this.getPaintProperty(\"icon-halo-blur\"))?void 0:n.isDataDriven)||(null==(l=this.getPaintProperty(\"icon-halo-color\"))?void 0:l.isDataDriven)||(null==(h=this.getPaintProperty(\"icon-halo-width\"))?void 0:h.isDataDriven)||(null==(u=this.getPaintProperty(\"icon-opacity\"))?void 0:u.isDataDriven)||(null==(p=this.getLayoutProperty(\"icon-size\"))?void 0:p.isDataDriven),this.hasDataDrivenText=(null==(g=this.getPaintProperty(\"text-color\"))?void 0:g.isDataDriven)||(null==(y=this.getPaintProperty(\"text-halo-blur\"))?void 0:y.isDataDriven)||(null==(D=this.getPaintProperty(\"text-halo-color\"))?void 0:D.isDataDriven)||(null==(P=this.getPaintProperty(\"text-halo-width\"))?void 0:P.isDataDriven)||(null==(c=this.getPaintProperty(\"text-opacity\"))?void 0:c.isDataDriven)||(null==(d=this.getLayoutProperty(\"text-size\"))?void 0:d.isDataDriven)}}class c extends p{constructor(t,e,a,o){super(t,e,a,o),this.circleMaterial=new i(this.computeAttributesKey(5,i.ATTRIBUTES,i.ATTRIBUTES_INFO))}}class d{constructor(t,i,e){var a,o,r,s,n;let l;this.allowOverlap=t.getLayoutValue(\"icon-allow-overlap\",i),this.ignorePlacement=t.getLayoutValue(\"icon-ignore-placement\",i),this.keepUpright=t.getLayoutValue(\"icon-keep-upright\",i),this.optional=t.getLayoutValue(\"icon-optional\",i),this.rotationAlignment=t.getLayoutValue(\"icon-rotation-alignment\",i),2===this.rotationAlignment&&(this.rotationAlignment=e?0:1),l=t.getLayoutProperty(\"icon-anchor\"),null!=(a=l)&&a.isDataDriven?this._anchorProp=l:this.anchor=t.getLayoutValue(\"icon-anchor\",i),l=t.getLayoutProperty(\"icon-offset\"),null!=(o=l)&&o.isDataDriven?this._offsetProp=l:this.offset=t.getLayoutValue(\"icon-offset\",i),l=t.getLayoutProperty(\"icon-padding\"),null!=(r=l)&&r.isDataDriven?this._paddingProp=l:this.padding=t.getLayoutValue(\"icon-padding\",i),l=t.getLayoutProperty(\"icon-rotate\"),null!=(s=l)&&s.isDataDriven?this._rotateProp=l:this.rotate=t.getLayoutValue(\"icon-rotate\",i),l=t.getLayoutProperty(\"icon-size\"),null!=(n=l)&&n.isDataDriven?this._sizeProp=l:this.size=t.getLayoutValue(\"icon-size\",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i))}}class f{constructor(t,i,e){var a,o,r,s,n,l,h,u,p,g,y;let D;this.allowOverlap=t.getLayoutValue(\"text-allow-overlap\",i),this.ignorePlacement=t.getLayoutValue(\"text-ignore-placement\",i),this.keepUpright=t.getLayoutValue(\"text-keep-upright\",i),this.optional=t.getLayoutValue(\"text-optional\",i),this.rotationAlignment=t.getLayoutValue(\"text-rotation-alignment\",i),2===this.rotationAlignment&&(this.rotationAlignment=e?0:1),D=t.getLayoutProperty(\"text-anchor\"),null!=(a=D)&&a.isDataDriven?this._anchorProp=D:this.anchor=t.getLayoutValue(\"text-anchor\",i),D=t.getLayoutProperty(\"text-justify\"),null!=(o=D)&&o.isDataDriven?this._justifyProp=D:this.justify=t.getLayoutValue(\"text-justify\",i),D=t.getLayoutProperty(\"text-letter-spacing\"),null!=(r=D)&&r.isDataDriven?this._letterSpacingProp=D:this.letterSpacing=t.getLayoutValue(\"text-letter-spacing\",i),D=t.getLayoutProperty(\"text-line-height\"),null!=(s=D)&&s.isDataDriven?this._lineHeightProp=D:this.lineHeight=t.getLayoutValue(\"text-line-height\",i),D=t.getLayoutProperty(\"text-max-angle\"),null!=(n=D)&&n.isDataDriven?this._maxAngleProp=D:this.maxAngle=t.getLayoutValue(\"text-max-angle\",i),D=t.getLayoutProperty(\"text-max-width\"),null!=(l=D)&&l.isDataDriven?this._maxWidthProp=D:this.maxWidth=t.getLayoutValue(\"text-max-width\",i),D=t.getLayoutProperty(\"text-offset\"),null!=(h=D)&&h.isDataDriven?this._offsetProp=D:this.offset=t.getLayoutValue(\"text-offset\",i),D=t.getLayoutProperty(\"text-padding\"),null!=(u=D)&&u.isDataDriven?this._paddingProp=D:this.padding=t.getLayoutValue(\"text-padding\",i),D=t.getLayoutProperty(\"text-rotate\"),null!=(p=D)&&p.isDataDriven?this._rotateProp=D:this.rotate=t.getLayoutValue(\"text-rotate\",i),D=t.getLayoutProperty(\"text-size\"),null!=(g=D)&&g.isDataDriven?this._sizeProp=D:this.size=t.getLayoutValue(\"text-size\",i),D=t.getLayoutProperty(\"text-writing-mode\"),null!=(y=D)&&y.isDataDriven?this._writingModeProp=D:this.writingMode=t.getLayoutValue(\"text-writing-mode\",i)}update(t,i){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,i)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,i)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,i)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,i)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,i)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,i)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,i)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,i)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,i)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,i)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,i))}}export{g as BackgroundStyleLayer,c as CircleStyleLayer,y as FillStyleLayer,d as IconLayout,D as LineStyleLayer,p as StyleLayer,P as SymbolStyleLayer,f as TextLayout};\n"]},"metadata":{},"sourceType":"module"}