{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../../../core/maybe.js\";\nimport t from \"../../../../core/ObjectPool.js\";\nimport n from \"../../../../core/PooledArray.js\";\nimport { a as i, b as o, g as s, e as r } from \"../../../../chunks/vec3.js\";\nimport { f as h, c as a } from \"../../../../chunks/vec3f64.js\";\nimport { intersectsSphere as l } from \"../../../../geometry/support/frustum.js\";\nimport { wrap as d } from \"../../../../geometry/support/ray.js\";\nimport { h as c, j as u, c as f, g as m } from \"../../../../chunks/sphere.js\";\nimport { rayBoxTest as _ } from \"./Util.js\";\n\nclass p {\n  constructor(e, t) {\n    this._objectToBoundingSphere = e, this._maximumObjectsPerNode = 10, this._maximumDepth = 20, this._degenerateObjects = new Set(), this._root = new b(), this._objectCount = 0, t && (void 0 !== t.maximumObjectsPerNode && (this._maximumObjectsPerNode = t.maximumObjectsPerNode), void 0 !== t.maximumDepth && (this._maximumDepth = t.maximumDepth));\n  }\n\n  get bounds() {\n    return this._root.bounds;\n  }\n\n  get halfSize() {\n    return this._root.halfSize;\n  }\n\n  get root() {\n    return this._root.node;\n  }\n\n  get maximumObjectsPerNode() {\n    return this._maximumObjectsPerNode;\n  }\n\n  get maximumDepth() {\n    return this._maximumDepth;\n  }\n\n  get objectCount() {\n    return this._objectCount;\n  }\n\n  destroy() {\n    this._degenerateObjects.clear(), b.clearPool(), v[0] = null, B.prune(), C.prune();\n  }\n\n  add(e, t = e.length) {\n    this._objectCount += t, this._grow(e, t);\n    const n = b.acquire();\n\n    for (let i = 0; i < t; i++) {\n      const t = e[i];\n      this._isDegenerate(t) ? this._degenerateObjects.add(t) : (n.init(this._root), this._add(t, n));\n    }\n\n    b.release(n);\n  }\n\n  remove(t, n = null) {\n    this._objectCount -= t.length;\n    const i = b.acquire();\n\n    for (const o of t) {\n      const t = e(n) ? n : c(this._objectToBoundingSphere(o), I);\n      z(t[3]) ? (i.init(this._root), this._remove(o, t, i)) : this._degenerateObjects.delete(o);\n    }\n\n    b.release(i), this._shrink();\n  }\n\n  update(e, t) {\n    if (!z(t[3]) && this._isDegenerate(e)) return;\n    const n = A(e);\n    this.remove(n, t), this.add(n);\n  }\n\n  forEachAlongRay(e, t, n) {\n    const i = d(e, t);\n\n    this._forEachNode(this._root, e => {\n      if (!this._intersectsNode(i, e)) return !1;\n      const t = e.node;\n      return t.terminals.forAll(e => {\n        this._intersectsObject(i, e) && n(e);\n      }), null !== t.residents && t.residents.forAll(e => {\n        this._intersectsObject(i, e) && n(e);\n      }), !0;\n    });\n  }\n\n  forEachAlongRayWithVerticalOffset(e, t, n, i) {\n    const o = d(e, t);\n\n    this._forEachNode(this._root, e => {\n      if (!this._intersectsNodeWithOffset(o, e, i)) return !1;\n      const t = e.node;\n      return t.terminals.forAll(e => {\n        this._intersectsObjectWithOffset(o, e, i) && n(e);\n      }), null !== t.residents && t.residents.forAll(e => {\n        this._intersectsObjectWithOffset(o, e, i) && n(e);\n      }), !0;\n    });\n  }\n\n  forEach(e) {\n    this._forEachNode(this._root, t => {\n      const n = t.node;\n      return n.terminals.forAll(e), null !== n.residents && n.residents.forAll(e), !0;\n    }), this._degenerateObjects.forEach(e);\n  }\n\n  forEachDegenerateObject(e) {\n    this._degenerateObjects.forEach(e);\n  }\n\n  findClosest(e, t, n, s = () => !0, r = 1 / 0) {\n    let h = 1 / 0,\n        a = 1 / 0,\n        d = null;\n\n    const c = N(e, t),\n          u = i => {\n      if (--r, !s(i)) return;\n\n      const o = this._objectToBoundingSphere(i);\n\n      if (!l(n, o)) return;\n      const c = M(e, t, m(o)),\n            u = c - o[3],\n            f = c + o[3];\n      u < h && (h = u, a = f, d = i);\n    };\n\n    return this._forEachNodeDepthOrdered(this._root, s => {\n      if (r <= 0 || !l(n, s.bounds)) return !1;\n      i(k, c, s.halfSize), o(k, k, s.bounds);\n      if (M(e, t, k) > a) return !1;\n      const h = s.node;\n      return h.terminals.forAll(e => u(e)), null !== h.residents && h.residents.forAll(e => u(e)), !0;\n    }, e, t), d;\n  }\n\n  forEachInDepthRange(e, t, n, s, r, h, a) {\n    let d = -1 / 0,\n        c = 1 / 0;\n    const u = {\n      setRange: e => {\n        1 === n ? (d = Math.max(d, e.near), c = Math.min(c, e.far)) : (d = Math.max(d, -e.far), c = Math.min(c, -e.near));\n      }\n    };\n    u.setRange(s);\n\n    const f = M(t, n, e),\n          _ = N(t, n),\n          p = N(t, -1 * n),\n          b = e => {\n      if (!a(e)) return;\n\n      const i = this._objectToBoundingSphere(e),\n            o = m(i),\n            s = M(t, n, o) - f,\n            _ = s - i[3],\n            p = s + i[3];\n\n      _ > c || p < d || !l(h, i) || r(e, u);\n    };\n\n    this._forEachNodeDepthOrdered(this._root, e => {\n      if (!l(h, e.bounds)) return !1;\n      i(k, _, e.halfSize), o(k, k, e.bounds);\n      if (M(t, n, k) - f > c) return !1;\n      i(k, p, e.halfSize), o(k, k, e.bounds);\n      if (M(t, n, k) - f < d) return !1;\n      const s = e.node;\n      return s.terminals.forAll(e => b(e)), null !== s.residents && s.residents.forAll(e => b(e)), !0;\n    }, t, n);\n  }\n\n  forEachNode(e) {\n    this._forEachNode(this._root, t => e(t.node, t.bounds, t.halfSize));\n  }\n\n  _intersectsNode(e, t) {\n    return S(t.bounds, 2 * -t.halfSize, q), S(t.bounds, 2 * t.halfSize, w), _(e.origin, e.direction, q, w);\n  }\n\n  _intersectsNodeWithOffset(e, t, n) {\n    return S(t.bounds, 2 * -t.halfSize, q), S(t.bounds, 2 * t.halfSize, w), n.applyToMinMax(q, w), _(e.origin, e.direction, q, w);\n  }\n\n  _intersectsObject(e, t) {\n    const n = this._objectToBoundingSphere(t);\n\n    return !(n[3] > 0) || u(n, e);\n  }\n\n  _intersectsObjectWithOffset(e, t, n) {\n    const i = this._objectToBoundingSphere(t);\n\n    return !(i[3] > 0) || u(n.applyToBoundingSphere(i), e);\n  }\n\n  _forEachNode(e, t) {\n    let n = b.acquire().init(e);\n    const i = [n];\n\n    for (; 0 !== i.length;) {\n      if (n = i.pop(), t(n) && !n.isLeaf()) for (let e = 0; e < n.node.children.length; e++) {\n        n.node.children[e] && i.push(b.acquire().init(n).advance(e));\n      }\n      b.release(n);\n    }\n  }\n\n  _forEachNodeDepthOrdered(e, t, n, i = 1) {\n    let o = b.acquire().init(e);\n    const s = [o];\n\n    for (O(n, i, W); 0 !== s.length;) {\n      if (o = s.pop(), t(o) && !o.isLeaf()) for (let e = 7; e >= 0; --e) {\n        const t = W[e];\n        o.node.children[t] && s.push(b.acquire().init(o).advance(t));\n      }\n      b.release(o);\n    }\n  }\n\n  _remove(e, t, n) {\n    B.clear();\n    const i = n.advanceTo(t, (e, t) => {\n      B.push(e.node), B.push(t);\n    }) ? n.node.terminals : n.node.residents;\n    if (i.removeUnordered(e), 0 === i.length) for (let o = B.length - 2; o >= 0; o -= 2) {\n      const e = B.data[o],\n            t = B.data[o + 1];\n      if (!this._purge(e, t)) break;\n    }\n  }\n\n  _nodeIsEmpty(e) {\n    if (0 !== e.terminals.length) return !1;\n    if (null !== e.residents) return 0 === e.residents.length;\n\n    for (let t = 0; t < e.children.length; t++) if (e.children[t]) return !1;\n\n    return !0;\n  }\n\n  _purge(e, t) {\n    return t >= 0 && (e.children[t] = null), !!this._nodeIsEmpty(e) && (null === e.residents && (e.residents = new n({\n      shrink: !0\n    })), !0);\n  }\n\n  _add(e, t) {\n    t.advanceTo(this._objectToBoundingSphere(e)) ? t.node.terminals.push(e) : (t.node.residents.push(e), t.node.residents.length > this._maximumObjectsPerNode && t.depth < this._maximumDepth && this._split(t));\n  }\n\n  _split(e) {\n    const t = e.node.residents;\n    e.node.residents = null;\n\n    for (let n = 0; n < t.length; n++) {\n      const i = b.acquire().init(e);\n      this._add(t.getItemAt(n), i), b.release(i);\n    }\n  }\n\n  _grow(e, t) {\n    if (0 !== t && (x(e, t, e => this._objectToBoundingSphere(e), P), z(P[3]) && !this._fitsInsideTree(P))) if (this._nodeIsEmpty(this._root.node)) c(P, this._root.bounds), this._root.halfSize = 1.25 * P[3];else {\n      const e = this._rootBoundsForRootAsSubNode(P);\n\n      this._placingRootViolatesMaxDepth(e) ? this._rebuildTree(P, e) : this._growRootAsSubNode(e), b.release(e);\n    }\n  }\n\n  _rebuildTree(e, t) {\n    s(R, t.bounds), R[3] = t.halfSize, x([e, R], 2, e => e, F);\n    const n = b.acquire().init(this._root);\n    this._root.initFrom(null, F, 1.25 * F[3]), this._forEachNode(n, e => (this.add(e.node.terminals.data, e.node.terminals.length), null !== e.node.residents && this.add(e.node.residents.data, e.node.residents.length), !0)), b.release(n);\n  }\n\n  _placingRootViolatesMaxDepth(e) {\n    const t = Math.log(e.halfSize / this._root.halfSize) * Math.LOG2E;\n    let n = 0;\n    return this._forEachNode(this._root, e => (n = Math.max(n, e.depth), n + t <= this._maximumDepth)), n + t > this._maximumDepth;\n  }\n\n  _rootBoundsForRootAsSubNode(e) {\n    const t = e[3],\n          n = e;\n    let i = -1 / 0;\n    const o = this._root.bounds,\n          s = this._root.halfSize;\n\n    for (let r = 0; r < 3; r++) {\n      const e = o[r] - s - (n[r] - t),\n            h = n[r] + t - (o[r] + s),\n            a = Math.max(0, Math.ceil(e / (2 * s))),\n            l = Math.max(0, Math.ceil(h / (2 * s))) + 1,\n            d = 2 ** Math.ceil(Math.log(a + l) * Math.LOG2E);\n      i = Math.max(i, d), L[r].min = a, L[r].max = l;\n    }\n\n    for (let r = 0; r < 3; r++) {\n      let e = L[r].min,\n          t = L[r].max;\n      const n = (i - (e + t)) / 2;\n      e += Math.ceil(n), t += Math.floor(n);\n      const h = o[r] - s - e * s * 2;\n      y[r] = h + (t + e) * s;\n    }\n\n    return y[3] = i * s * D, b.acquire().initFrom(null, y, i * s, 0);\n  }\n\n  _growRootAsSubNode(e) {\n    const t = this._root.node;\n    s(P, this._root.bounds), P[3] = this._root.halfSize, this._root.init(e), e.advanceTo(P, null, !0), e.node.children = t.children, e.node.residents = t.residents, e.node.terminals = t.terminals;\n  }\n\n  _shrink() {\n    for (;;) {\n      const e = this._findShrinkIndex();\n\n      if (-1 === e) break;\n      this._root.advance(e), this._root.depth = 0;\n    }\n  }\n\n  _findShrinkIndex() {\n    if (0 !== this._root.node.terminals.length || this._root.isLeaf()) return -1;\n    let e = null;\n    const t = this._root.node.children;\n    let n = 0,\n        i = 0;\n\n    for (; i < t.length && null == e;) n = i++, e = t[n];\n\n    for (; i < t.length;) if (t[i++]) return -1;\n\n    return n;\n  }\n\n  _isDegenerate(e) {\n    return !z(this._objectToBoundingSphere(e)[3]);\n  }\n\n  _fitsInsideTree(e) {\n    const t = this._root.bounds,\n          n = this._root.halfSize;\n    return e[3] <= n && e[0] >= t[0] - n && e[0] <= t[0] + n && e[1] >= t[1] - n && e[1] <= t[1] + n && e[2] >= t[2] - n && e[2] <= t[2] + n;\n  }\n\n}\n\nclass b {\n  constructor() {\n    this.bounds = f(), this.halfSize = 0, this.initFrom(null, null, 0, 0);\n  }\n\n  init(e) {\n    return this.initFrom(e.node, e.bounds, e.halfSize, e.depth);\n  }\n\n  initFrom(t, n, i, o = this.depth) {\n    return this.node = e(t) ? t : b.createEmptyNode(), e(n) && c(n, this.bounds), this.halfSize = i, this.depth = o, this;\n  }\n\n  advance(e) {\n    let t = this.node.children[e];\n    t || (t = b.createEmptyNode(), this.node.children[e] = t), this.node = t, this.halfSize /= 2, this.depth++;\n    const n = E[e];\n    return this.bounds[0] += n[0] * this.halfSize, this.bounds[1] += n[1] * this.halfSize, this.bounds[2] += n[2] * this.halfSize, this.bounds[3] = this.halfSize * D, this;\n  }\n\n  advanceTo(e, t, n = !1) {\n    for (;;) {\n      if (this.isTerminalFor(e)) return t && t(this, -1), !0;\n\n      if (this.isLeaf()) {\n        if (!n) return t && t(this, -1), !1;\n        this.node.residents = null;\n      }\n\n      const i = this._childIndex(e);\n\n      t && t(this, i), this.advance(i);\n    }\n  }\n\n  isLeaf() {\n    return null != this.node.residents;\n  }\n\n  isTerminalFor(e) {\n    return e[3] > this.halfSize / 2;\n  }\n\n  _childIndex(e) {\n    const t = this.bounds;\n    return (t[0] < e[0] ? 1 : 0) + (t[1] < e[1] ? 2 : 0) + (t[2] < e[2] ? 4 : 0);\n  }\n\n  static createEmptyNode() {\n    return {\n      children: [null, null, null, null, null, null, null, null],\n      terminals: new n({\n        shrink: !0\n      }),\n      residents: new n({\n        shrink: !0\n      })\n    };\n  }\n\n  static acquire() {\n    return b._pool.acquire();\n  }\n\n  static release(e) {\n    b._pool.release(e);\n  }\n\n  static clearPool() {\n    b._pool.prune();\n  }\n\n}\n\nfunction g(e, t) {\n  e[0] = Math.min(e[0], t[0] - t[3]), e[1] = Math.min(e[1], t[1] - t[3]), e[2] = Math.min(e[2], t[2] - t[3]);\n}\n\nfunction j(e, t) {\n  e[0] = Math.max(e[0], t[0] + t[3]), e[1] = Math.max(e[1], t[1] + t[3]), e[2] = Math.max(e[2], t[2] + t[3]);\n}\n\nfunction S(e, t, n) {\n  n[0] = e[0] + t, n[1] = e[1] + t, n[2] = e[2] + t;\n}\n\nfunction x(e, t, n, i) {\n  if (1 === t) {\n    const t = n(e[0]);\n    c(t, i);\n  } else {\n    q[0] = 1 / 0, q[1] = 1 / 0, q[2] = 1 / 0, w[0] = -1 / 0, w[1] = -1 / 0, w[2] = -1 / 0;\n\n    for (let i = 0; i < t; i++) {\n      const t = n(e[i]);\n      z(t[3]) && (g(q, t), j(w, t));\n    }\n\n    r(i, q, w, .5), i[3] = Math.max(w[0] - q[0], w[1] - q[1], w[2] - q[2]) / 2;\n  }\n}\n\nfunction O(e, t, n) {\n  if (!C.length) for (let i = 0; i < 8; ++i) C.push({\n    index: 0,\n    distance: 0\n  });\n\n  for (let i = 0; i < 8; ++i) {\n    const n = E[i];\n    C.data[i].index = i, C.data[i].distance = M(e, t, n);\n  }\n\n  C.sort((e, t) => e.distance - t.distance);\n\n  for (let i = 0; i < 8; ++i) n[i] = C.data[i].index;\n}\n\nfunction N(e, t) {\n  let n = 1 / 0,\n      i = null;\n\n  for (let o = 0; o < 8; ++o) {\n    const s = M(e, t, T[o]);\n    s < n && (n = s, i = T[o]);\n  }\n\n  return i;\n}\n\nfunction M(e, t, n) {\n  return t * (e[0] * n[0] + e[1] * n[1] + e[2] * n[2]);\n}\n\nfunction z(e) {\n  return !isNaN(e) && e !== -1 / 0 && e !== 1 / 0 && e > 0;\n}\n\nb._pool = new t(b);\nconst E = [h(-1, -1, -1), h(1, -1, -1), h(-1, 1, -1), h(1, 1, -1), h(-1, -1, 1), h(1, -1, 1), h(-1, 1, 1), h(1, 1, 1)],\n      T = [h(-1, -1, -1), h(-1, -1, 1), h(-1, 1, -1), h(-1, 1, 1), h(1, -1, -1), h(1, -1, 1), h(1, 1, -1), h(1, 1, 1)],\n      D = Math.sqrt(3),\n      v = [null];\n\nfunction A(e) {\n  return v[0] = e, v;\n}\n\nconst y = f(),\n      k = a(),\n      q = a(),\n      w = a(),\n      B = new n(),\n      I = f(),\n      P = f(),\n      R = f(),\n      F = f(),\n      L = [{\n  min: 0,\n  max: 0\n}, {\n  min: 0,\n  max: 0\n}, {\n  min: 0,\n  max: 0\n}],\n      C = new n(),\n      W = [0, 0, 0, 0, 0, 0, 0, 0];\nexport default p;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js"],"names":["isSome","e","t","n","a","i","b","o","g","s","r","f","h","c","intersectsSphere","l","wrap","d","j","u","m","rayBoxTest","_","p","constructor","_objectToBoundingSphere","_maximumObjectsPerNode","_maximumDepth","_degenerateObjects","Set","_root","_objectCount","maximumObjectsPerNode","maximumDepth","bounds","halfSize","root","node","objectCount","destroy","clear","clearPool","v","B","prune","C","add","length","_grow","acquire","_isDegenerate","init","_add","release","remove","I","z","_remove","delete","_shrink","update","A","forEachAlongRay","_forEachNode","_intersectsNode","terminals","forAll","_intersectsObject","residents","forEachAlongRayWithVerticalOffset","_intersectsNodeWithOffset","_intersectsObjectWithOffset","forEach","forEachDegenerateObject","findClosest","N","M","_forEachNodeDepthOrdered","k","forEachInDepthRange","setRange","Math","max","near","min","far","forEachNode","S","q","w","origin","direction","applyToMinMax","applyToBoundingSphere","pop","isLeaf","children","push","advance","O","W","advanceTo","removeUnordered","data","_purge","_nodeIsEmpty","shrink","depth","_split","getItemAt","x","P","_fitsInsideTree","_rootBoundsForRootAsSubNode","_placingRootViolatesMaxDepth","_rebuildTree","_growRootAsSubNode","R","F","initFrom","log","LOG2E","ceil","L","floor","y","D","_findShrinkIndex","createEmptyNode","E","isTerminalFor","_childIndex","_pool","index","distance","sort","T","isNaN","sqrt"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/ObjectPool.js\";import n from\"../../../../core/PooledArray.js\";import{a as i,b as o,g as s,e as r}from\"../../../../chunks/vec3.js\";import{f as h,c as a}from\"../../../../chunks/vec3f64.js\";import{intersectsSphere as l}from\"../../../../geometry/support/frustum.js\";import{wrap as d}from\"../../../../geometry/support/ray.js\";import{h as c,j as u,c as f,g as m}from\"../../../../chunks/sphere.js\";import{rayBoxTest as _}from\"./Util.js\";class p{constructor(e,t){this._objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new b,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),b.clearPool(),v[0]=null,B.prune(),C.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const n=b.acquire();for(let i=0;i<t;i++){const t=e[i];this._isDegenerate(t)?this._degenerateObjects.add(t):(n.init(this._root),this._add(t,n))}b.release(n)}remove(t,n=null){this._objectCount-=t.length;const i=b.acquire();for(const o of t){const t=e(n)?n:c(this._objectToBoundingSphere(o),I);z(t[3])?(i.init(this._root),this._remove(o,t,i)):this._degenerateObjects.delete(o)}b.release(i),this._shrink()}update(e,t){if(!z(t[3])&&this._isDegenerate(e))return;const n=A(e);this.remove(n,t),this.add(n)}forEachAlongRay(e,t,n){const i=d(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(i,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(i,e)&&n(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,n,i){const o=d(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(o,e,i))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(o,e,i)&&n(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(o,e,i)&&n(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,n,s=(()=>!0),r=1/0){let h=1/0,a=1/0,d=null;const c=N(e,t),u=i=>{if(--r,!s(i))return;const o=this._objectToBoundingSphere(i);if(!l(n,o))return;const c=M(e,t,m(o)),u=c-o[3],f=c+o[3];u<h&&(h=u,a=f,d=i)};return this._forEachNodeDepthOrdered(this._root,(s=>{if(r<=0||!l(n,s.bounds))return!1;i(k,c,s.halfSize),o(k,k,s.bounds);if(M(e,t,k)>a)return!1;const h=s.node;return h.terminals.forAll((e=>u(e))),null!==h.residents&&h.residents.forAll((e=>u(e))),!0}),e,t),d}forEachInDepthRange(e,t,n,s,r,h,a){let d=-1/0,c=1/0;const u={setRange:e=>{1===n?(d=Math.max(d,e.near),c=Math.min(c,e.far)):(d=Math.max(d,-e.far),c=Math.min(c,-e.near))}};u.setRange(s);const f=M(t,n,e),_=N(t,n),p=N(t,-1*n),b=e=>{if(!a(e))return;const i=this._objectToBoundingSphere(e),o=m(i),s=M(t,n,o)-f,_=s-i[3],p=s+i[3];_>c||p<d||!l(h,i)||r(e,u)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!l(h,e.bounds))return!1;i(k,_,e.halfSize),o(k,k,e.bounds);if(M(t,n,k)-f>c)return!1;i(k,p,e.halfSize),o(k,k,e.bounds);if(M(t,n,k)-f<d)return!1;const s=e.node;return s.terminals.forAll((e=>b(e))),null!==s.residents&&s.residents.forAll((e=>b(e))),!0}),t,n)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize)))}_intersectsNode(e,t){return S(t.bounds,2*-t.halfSize,q),S(t.bounds,2*t.halfSize,w),_(e.origin,e.direction,q,w)}_intersectsNodeWithOffset(e,t,n){return S(t.bounds,2*-t.halfSize,q),S(t.bounds,2*t.halfSize,w),n.applyToMinMax(q,w),_(e.origin,e.direction,q,w)}_intersectsObject(e,t){const n=this._objectToBoundingSphere(t);return!(n[3]>0)||u(n,e)}_intersectsObjectWithOffset(e,t,n){const i=this._objectToBoundingSphere(t);return!(i[3]>0)||u(n.applyToBoundingSphere(i),e)}_forEachNode(e,t){let n=b.acquire().init(e);const i=[n];for(;0!==i.length;){if(n=i.pop(),t(n)&&!n.isLeaf())for(let e=0;e<n.node.children.length;e++){n.node.children[e]&&i.push(b.acquire().init(n).advance(e))}b.release(n)}}_forEachNodeDepthOrdered(e,t,n,i=1){let o=b.acquire().init(e);const s=[o];for(O(n,i,W);0!==s.length;){if(o=s.pop(),t(o)&&!o.isLeaf())for(let e=7;e>=0;--e){const t=W[e];o.node.children[t]&&s.push(b.acquire().init(o).advance(t))}b.release(o)}}_remove(e,t,n){B.clear();const i=n.advanceTo(t,((e,t)=>{B.push(e.node),B.push(t)}))?n.node.terminals:n.node.residents;if(i.removeUnordered(e),0===i.length)for(let o=B.length-2;o>=0;o-=2){const e=B.data[o],t=B.data[o+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new n({shrink:!0})),!0)}_add(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let n=0;n<t.length;n++){const i=b.acquire().init(e);this._add(t.getItemAt(n),i),b.release(i)}}_grow(e,t){if(0!==t&&(x(e,t,(e=>this._objectToBoundingSphere(e)),P),z(P[3])&&!this._fitsInsideTree(P)))if(this._nodeIsEmpty(this._root.node))c(P,this._root.bounds),this._root.halfSize=1.25*P[3];else{const e=this._rootBoundsForRootAsSubNode(P);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(P,e):this._growRootAsSubNode(e),b.release(e)}}_rebuildTree(e,t){s(R,t.bounds),R[3]=t.halfSize,x([e,R],2,(e=>e),F);const n=b.acquire().init(this._root);this._root.initFrom(null,F,1.25*F[3]),this._forEachNode(n,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),b.release(n)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(e=>(n=Math.max(n,e.depth),n+t<=this._maximumDepth))),n+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],n=e;let i=-1/0;const o=this._root.bounds,s=this._root.halfSize;for(let r=0;r<3;r++){const e=o[r]-s-(n[r]-t),h=n[r]+t-(o[r]+s),a=Math.max(0,Math.ceil(e/(2*s))),l=Math.max(0,Math.ceil(h/(2*s)))+1,d=2**Math.ceil(Math.log(a+l)*Math.LOG2E);i=Math.max(i,d),L[r].min=a,L[r].max=l}for(let r=0;r<3;r++){let e=L[r].min,t=L[r].max;const n=(i-(e+t))/2;e+=Math.ceil(n),t+=Math.floor(n);const h=o[r]-s-e*s*2;y[r]=h+(t+e)*s}return y[3]=i*s*D,b.acquire().initFrom(null,y,i*s,0)}_growRootAsSubNode(e){const t=this._root.node;s(P,this._root.bounds),P[3]=this._root.halfSize,this._root.init(e),e.advanceTo(P,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let n=0,i=0;for(;i<t.length&&null==e;)n=i++,e=t[n];for(;i<t.length;)if(t[i++])return-1;return n}_isDegenerate(e){return!z(this._objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}class b{constructor(){this.bounds=f(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(t,n,i,o=this.depth){return this.node=e(t)?t:b.createEmptyNode(),e(n)&&c(n,this.bounds),this.halfSize=i,this.depth=o,this}advance(e){let t=this.node.children[e];t||(t=b.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const n=E[e];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.bounds[3]=this.halfSize*D,this}advanceTo(e,t,n=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}const i=this._childIndex(e);t&&t(this,i),this.advance(i)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new n({shrink:!0}),residents:new n({shrink:!0})}}static acquire(){return b._pool.acquire()}static release(e){b._pool.release(e)}static clearPool(){b._pool.prune()}}function g(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function j(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function S(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function x(e,t,n,i){if(1===t){const t=n(e[0]);c(t,i)}else{q[0]=1/0,q[1]=1/0,q[2]=1/0,w[0]=-1/0,w[1]=-1/0,w[2]=-1/0;for(let i=0;i<t;i++){const t=n(e[i]);z(t[3])&&(g(q,t),j(w,t))}r(i,q,w,.5),i[3]=Math.max(w[0]-q[0],w[1]-q[1],w[2]-q[2])/2}}function O(e,t,n){if(!C.length)for(let i=0;i<8;++i)C.push({index:0,distance:0});for(let i=0;i<8;++i){const n=E[i];C.data[i].index=i,C.data[i].distance=M(e,t,n)}C.sort(((e,t)=>e.distance-t.distance));for(let i=0;i<8;++i)n[i]=C.data[i].index}function N(e,t){let n=1/0,i=null;for(let o=0;o<8;++o){const s=M(e,t,T[o]);s<n&&(n=s,i=T[o])}return i}function M(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function z(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}b._pool=new t(b);const E=[h(-1,-1,-1),h(1,-1,-1),h(-1,1,-1),h(1,1,-1),h(-1,-1,1),h(1,-1,1),h(-1,1,1),h(1,1,1)],T=[h(-1,-1,-1),h(-1,-1,1),h(-1,1,-1),h(-1,1,1),h(1,-1,-1),h(1,-1,1),h(1,1,-1),h(1,1,1)],D=Math.sqrt(3),v=[null];function A(e){return v[0]=e,v}const y=f(),k=a(),q=a(),w=a(),B=new n,I=f(),P=f(),R=f(),F=f(),L=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],C=new n,W=[0,0,0,0,0,0,0,0];export default p;\n"]},"metadata":{},"sourceType":"module"}