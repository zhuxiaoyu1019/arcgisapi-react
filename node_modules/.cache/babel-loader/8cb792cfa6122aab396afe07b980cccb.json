{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { e, f as t, n as s, g as r, b as i } from \"../../../../../chunks/vec3.js\";\nimport { c as n } from \"../../../../../chunks/vec3f64.js\";\nimport { canProjectWithoutEngine as c, projectVectorToVector as o } from \"../../../../../geometry/projection.js\";\nimport { getSphericalPCPF as p } from \"../../../../../geometry/projectionEllipsoid.js\";\nimport { sv3d as a } from \"../../../../../geometry/support/vectorStacks.js\";\nimport { slerpTangent as h, slerp as d } from \"../../../support/mathUtils.js\";\n\nclass _ {\n  constructor(e = n(), t = n()) {\n    this.startRenderSpace = e, this.endRenderSpace = t, this.type = \"euclidean\";\n  }\n\n  eval(r, i, n) {\n    return e(i, this.startRenderSpace, this.endRenderSpace, r), n && (t(n, this.endRenderSpace, this.startRenderSpace), s(n, n)), i;\n  }\n\n  createRenderGeometry(e, s) {\n    const r = [],\n          i = [],\n          n = (s, n) => {\n      const c = u;\n      t(c, s, e), r.push([c[0], c[1], c[2]]), i.push([n[0], n[1], n[2]]);\n    },\n          c = s.worldUpAtPosition(this.eval(.5, m), a.get());\n\n    return n(this.startRenderSpace, c), n(this.endRenderSpace, c), {\n      points: r,\n      normals: i\n    };\n  }\n\n}\n\nclass f {\n  constructor(e, t, s) {\n    this.startRenderSpace = e, this.endRenderSpace = t, this.renderSpatialReference = s, this.type = \"geodesic\", this._start = n(), this._end = n(), this._pcpf = p(s), this._project = c(s, this._pcpf), this._projectIn(e, this._start), this._projectIn(t, this._end);\n  }\n\n  _projectIn(e, t) {\n    this._project ? o(e, this.renderSpatialReference, t, this._pcpf) : r(t, e);\n  }\n\n  eval(r, n, c) {\n    if (this._project) {\n      if (c) {\n        const e = u;\n        h(this._start, this._end, r, n, e), i(R, n, e), o(n, this._pcpf, n, this.renderSpatialReference), o(R, this._pcpf, R, this.renderSpatialReference), t(c, R, n), s(c, c);\n      } else d(this._start, this._end, r, n), o(n, this._pcpf, n, this.renderSpatialReference);\n    } else e(n, this._start, this._end, r), c && (t(c, this._end, this._start), s(c, c));\n    return n;\n  }\n\n  createRenderGeometry(e, s) {\n    const r = [],\n          i = [],\n          n = (s, n) => {\n      const c = R;\n      t(c, s, e), r.push([c[0], c[1], c[2]]), i.push([n[0], n[1], n[2]]);\n    },\n          c = 128 + 1 & -2;\n\n    for (let t = 0; t < c; ++t) {\n      const e = t / (c - 1),\n            r = m,\n            i = u;\n      this.eval(e, r), s.worldUpAtPosition(r, i), n(r, i);\n    }\n\n    return {\n      points: r,\n      normals: i\n    };\n  }\n\n}\n\nfunction l(e, t, s, r) {\n  switch (e) {\n    case \"euclidean\":\n      return new _(t, s);\n\n    case \"geodesic\":\n      return new f(t, s, r);\n  }\n}\n\nconst m = n(),\n      u = n(),\n      R = n();\nexport { _ as EuclideanSegment, f as GeodesicSegment, l as createSegment };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/interactive/visualElements/support/Segment.js"],"names":["e","f","t","n","s","g","r","b","i","c","canProjectWithoutEngine","projectVectorToVector","o","getSphericalPCPF","p","sv3d","a","slerpTangent","h","slerp","d","_","constructor","startRenderSpace","endRenderSpace","type","eval","createRenderGeometry","u","push","worldUpAtPosition","m","get","points","normals","renderSpatialReference","_start","_end","_pcpf","_project","_projectIn","R","l","EuclideanSegment","GeodesicSegment","createSegment"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{e,f as t,n as s,g as r,b as i}from\"../../../../../chunks/vec3.js\";import{c as n}from\"../../../../../chunks/vec3f64.js\";import{canProjectWithoutEngine as c,projectVectorToVector as o}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as p}from\"../../../../../geometry/projectionEllipsoid.js\";import{sv3d as a}from\"../../../../../geometry/support/vectorStacks.js\";import{slerpTangent as h,slerp as d}from\"../../../support/mathUtils.js\";class _{constructor(e=n(),t=n()){this.startRenderSpace=e,this.endRenderSpace=t,this.type=\"euclidean\"}eval(r,i,n){return e(i,this.startRenderSpace,this.endRenderSpace,r),n&&(t(n,this.endRenderSpace,this.startRenderSpace),s(n,n)),i}createRenderGeometry(e,s){const r=[],i=[],n=(s,n)=>{const c=u;t(c,s,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=s.worldUpAtPosition(this.eval(.5,m),a.get());return n(this.startRenderSpace,c),n(this.endRenderSpace,c),{points:r,normals:i}}}class f{constructor(e,t,s){this.startRenderSpace=e,this.endRenderSpace=t,this.renderSpatialReference=s,this.type=\"geodesic\",this._start=n(),this._end=n(),this._pcpf=p(s),this._project=c(s,this._pcpf),this._projectIn(e,this._start),this._projectIn(t,this._end)}_projectIn(e,t){this._project?o(e,this.renderSpatialReference,t,this._pcpf):r(t,e)}eval(r,n,c){if(this._project)if(c){const e=u;h(this._start,this._end,r,n,e),i(R,n,e),o(n,this._pcpf,n,this.renderSpatialReference),o(R,this._pcpf,R,this.renderSpatialReference),t(c,R,n),s(c,c)}else d(this._start,this._end,r,n),o(n,this._pcpf,n,this.renderSpatialReference);else e(n,this._start,this._end,r),c&&(t(c,this._end,this._start),s(c,c));return n}createRenderGeometry(e,s){const r=[],i=[],n=(s,n)=>{const c=R;t(c,s,e),r.push([c[0],c[1],c[2]]),i.push([n[0],n[1],n[2]])},c=128+1&-2;for(let t=0;t<c;++t){const e=t/(c-1),r=m,i=u;this.eval(e,r),s.worldUpAtPosition(r,i),n(r,i)}return{points:r,normals:i}}}function l(e,t,s,r){switch(e){case\"euclidean\":return new _(t,s);case\"geodesic\":return new f(t,s,r)}}const m=n(),u=n(),R=n();export{_ as EuclideanSegment,f as GeodesicSegment,l as createSegment};\n"]},"metadata":{},"sourceType":"module"}