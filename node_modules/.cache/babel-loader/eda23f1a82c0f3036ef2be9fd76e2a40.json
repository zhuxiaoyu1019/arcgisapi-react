{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { ColorConversion as e } from \"./ColorConversion.glsl.js\";\nimport { glsl as t } from \"../../shaderModules/interfaces.js\";\n\nfunction i(i) {\n  i.include(e), i.code.add(t`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${t.int(1)}) {\n        return allMixed;\n      }\n      else if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalColor;\n      }\n      else {\n        // tint (or something invalid)\n        float vIn = rgb2v(internalMixed);\n        vec3 hsvTint = rgb2hsv(externalColor);\n        vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n        return hsv2rgb(hsvOut);\n      }\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalOpacity;\n      }\n      else {\n        // multiply or tint (or something invalid)\n        return allMixed;\n      }\n    }\n  `);\n}\n\nexport { i as MixExternalColor };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js"],"names":["ColorConversion","e","glsl","t","i","include","code","add","int","MixExternalColor"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,eAAe,IAAIC,CAA1B,QAAgC,2BAAhC;AAA4D,SAAOC,IAAI,IAAIC,CAAf,QAAqB,mCAArB;;AAAyD,SAASC,CAAT,CAAWA,CAAX,EAAa;AAACA,EAAAA,CAAC,CAACC,OAAF,CAAUJ,CAAV,GAAaG,CAAC,CAACE,IAAF,CAAOC,GAAP,CAAWJ,CAAE;AAC7J;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoBA,CAAC,CAACK,GAAF,CAAM,CAAN,CAAS;AAC7B;AACA;AACA,yBAAyBL,CAAC,CAACK,GAAF,CAAM,CAAN,CAAS;AAClC;AACA;AACA,yBAAyBL,CAAC,CAACK,GAAF,CAAM,CAAN,CAAS;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoBL,CAAC,CAACK,GAAF,CAAM,CAAN,CAAS;AAC7B;AACA;AACA,yBAAyBL,CAAC,CAACK,GAAF,CAAM,CAAN,CAAS;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA1CgJ,CAAb;AA0C9H;;AAAA,SAAOJ,CAAC,IAAIK,gBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ColorConversion as e}from\"./ColorConversion.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function i(i){i.include(e),i.code.add(t`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${t.int(1)}) {\n        return allMixed;\n      }\n      else if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalColor;\n      }\n      else {\n        // tint (or something invalid)\n        float vIn = rgb2v(internalMixed);\n        vec3 hsvTint = rgb2hsv(externalColor);\n        vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n        return hsv2rgb(hsvOut);\n      }\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalOpacity;\n      }\n      else {\n        // multiply or tint (or something invalid)\n        return allMixed;\n      }\n    }\n  `)}export{i as MixExternalColor};\n"]},"metadata":{},"sourceType":"module"}