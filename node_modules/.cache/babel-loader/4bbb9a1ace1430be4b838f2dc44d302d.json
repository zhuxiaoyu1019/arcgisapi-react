{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport \"../geometry.js\";\nimport { property as r } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { reader as t } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as i } from \"../core/accessorSupport/decorators/subclass.js\";\nimport o from \"./FeatureLayer.js\";\nimport s from \"./graphics/sources/CSVSource.js\";\nimport { createCapabilities as a } from \"./graphics/sources/support/clientSideDefaults.js\";\nimport l from \"../rest/support/Query.js\";\nimport { r as n, w as u } from \"../chunks/persistableUrlUtils.js\";\nimport p from \"../geometry/SpatialReference.js\";\nlet d = class extends o {\n  constructor(...e) {\n    super(...e), this.capabilities = a(!1, !1), this.delimiter = null, this.editingEnabled = !1, this.fields = null, this.latitudeField = null, this.customParameters = null, this.locationType = \"coordinates\", this.longitudeField = null, this.operationalLayerType = \"CSV\", this.outFields = [\"*\"], this.path = null, this.portalItem = null, this.spatialReference = p.WGS84, this.source = null, this.type = \"csv\";\n  }\n\n  normalizeCtorArgs(e, r) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...r\n    } : e;\n  }\n\n  get isTable() {\n    return this.loaded && null == this.geometryType;\n  }\n\n  readWebMapLabelsVisible(e, r) {\n    return null != r.showLabels ? r.showLabels : !!(r.layerDefinition && r.layerDefinition.drawingInfo && r.layerDefinition.drawingInfo.labelingInfo);\n  }\n\n  set url(e) {\n    this._set(\"url\", e);\n  }\n\n  async createGraphicsSource(e) {\n    const r = new s({\n      delimiter: this.delimiter,\n      fields: this.fields,\n      latitudeField: this.latitudeField,\n      longitudeField: this.longitudeField,\n      spatialReference: this.spatialReference,\n      timeInfo: this.timeInfo,\n      url: this.url\n    });\n    return this._set(\"source\", r), await r.load({\n      signal: e\n    }), this.read({\n      locationInfo: r.locationInfo,\n      columnDelimiter: r.columnDelimiter\n    }, {\n      origin: \"service\",\n      url: this.parsedUrl\n    }), r;\n  }\n\n  queryFeatures(e, r) {\n    return this.load().then(() => this.source.queryFeatures(l.from(e) || this.createQuery())).then(e => {\n      if (null != e && e.features) for (const r of e.features) r.layer = r.sourceLayer = this;\n      return e;\n    });\n  }\n\n  queryObjectIds(e, r) {\n    return this.load().then(() => this.source.queryObjectIds(l.from(e) || this.createQuery()));\n  }\n\n  queryFeatureCount(e, r) {\n    return this.load().then(() => this.source.queryFeatureCount(l.from(e) || this.createQuery()));\n  }\n\n  queryExtent(e, r) {\n    return this.load().then(() => this.source.queryExtent(l.from(e) || this.createQuery()));\n  }\n\n  write(e, r) {\n    return super.write(e, { ...r,\n      writeLayerSchema: !0\n    });\n  }\n\n  _verifyFields() {}\n\n  _verifySource() {}\n\n  _hasMemorySource() {\n    return !1;\n  }\n\n};\ne([r({\n  readOnly: !0,\n  json: {\n    read: !1,\n    write: !1\n  }\n})], d.prototype, \"capabilities\", void 0), e([r({\n  type: [\",\", \" \", \";\", \"|\", \"\\t\"],\n  json: {\n    read: {\n      source: \"columnDelimiter\"\n    },\n    write: {\n      target: \"columnDelimiter\",\n      ignoreOrigin: !0\n    }\n  }\n})], d.prototype, \"delimiter\", void 0), e([r({\n  readOnly: !0,\n  type: Boolean,\n  json: {\n    origins: {\n      \"web-scene\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], d.prototype, \"editingEnabled\", void 0), e([r({\n  json: {\n    read: {\n      source: \"layerDefinition.fields\"\n    },\n    write: {\n      target: \"layerDefinition.fields\"\n    }\n  }\n})], d.prototype, \"fields\", void 0), e([r({\n  type: Boolean,\n  readOnly: !0\n})], d.prototype, \"isTable\", null), e([t(\"web-map\", \"labelsVisible\", [\"layerDefinition.drawingInfo.labelingInfo\", \"showLabels\"])], d.prototype, \"readWebMapLabelsVisible\", null), e([r({\n  type: String,\n  json: {\n    read: {\n      source: \"locationInfo.latitudeFieldName\"\n    },\n    write: {\n      target: \"locationInfo.latitudeFieldName\",\n      ignoreOrigin: !0\n    }\n  }\n})], d.prototype, \"latitudeField\", void 0), e([r({\n  json: {\n    write: !0,\n    origins: {\n      \"web-scene\": {\n        write: !1,\n        read: !1\n      }\n    }\n  }\n})], d.prototype, \"customParameters\", void 0), e([r({\n  type: [\"show\", \"hide\"]\n})], d.prototype, \"listMode\", void 0), e([r({\n  type: [\"coordinates\"],\n  json: {\n    read: {\n      source: \"locationInfo.locationType\"\n    },\n    write: {\n      target: \"locationInfo.locationType\",\n      ignoreOrigin: !0,\n      isRequired: !0\n    }\n  }\n})], d.prototype, \"locationType\", void 0), e([r({\n  type: String,\n  json: {\n    read: {\n      source: \"locationInfo.longitudeFieldName\"\n    },\n    write: {\n      target: \"locationInfo.longitudeFieldName\",\n      ignoreOrigin: !0\n    }\n  }\n})], d.prototype, \"longitudeField\", void 0), e([r({\n  type: [\"CSV\"]\n})], d.prototype, \"operationalLayerType\", void 0), e([r()], d.prototype, \"outFields\", void 0), e([r({\n  type: String,\n  json: {\n    origins: {\n      \"web-scene\": {\n        read: !1,\n        write: !1\n      }\n    },\n    read: !1,\n    write: !1\n  }\n})], d.prototype, \"path\", void 0), e([r({\n  json: {\n    read: !1,\n    write: !1,\n    origins: {\n      \"web-document\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], d.prototype, \"portalItem\", void 0), e([r({\n  json: {\n    read: !1\n  },\n  cast: null,\n  type: s,\n  readOnly: !0\n})], d.prototype, \"source\", void 0), e([r({\n  json: {\n    read: !1\n  },\n  value: \"csv\",\n  readOnly: !0\n})], d.prototype, \"type\", void 0), e([r({\n  json: {\n    read: n,\n    write: {\n      isRequired: !0,\n      ignoreOrigin: !0,\n      writer: u\n    }\n  }\n})], d.prototype, \"url\", null), d = e([i(\"esri.layers.CSVLayer\")], d);\nvar c = d;\nexport default c;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/CSVLayer.js"],"names":["_","e","property","r","reader","t","subclass","i","o","s","createCapabilities","a","l","n","w","u","p","d","constructor","capabilities","delimiter","editingEnabled","fields","latitudeField","customParameters","locationType","longitudeField","operationalLayerType","outFields","path","portalItem","spatialReference","WGS84","source","type","normalizeCtorArgs","url","isTable","loaded","geometryType","readWebMapLabelsVisible","showLabels","layerDefinition","drawingInfo","labelingInfo","_set","createGraphicsSource","timeInfo","load","signal","read","locationInfo","columnDelimiter","origin","parsedUrl","queryFeatures","then","from","createQuery","features","layer","sourceLayer","queryObjectIds","queryFeatureCount","queryExtent","write","writeLayerSchema","_verifyFields","_verifySource","_hasMemorySource","readOnly","json","prototype","target","ignoreOrigin","Boolean","origins","String","isRequired","cast","value","writer","c"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{reader as t}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import o from\"./FeatureLayer.js\";import s from\"./graphics/sources/CSVSource.js\";import{createCapabilities as a}from\"./graphics/sources/support/clientSideDefaults.js\";import l from\"../rest/support/Query.js\";import{r as n,w as u}from\"../chunks/persistableUrlUtils.js\";import p from\"../geometry/SpatialReference.js\";let d=class extends o{constructor(...e){super(...e),this.capabilities=a(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.customParameters=null,this.locationType=\"coordinates\",this.longitudeField=null,this.operationalLayerType=\"CSV\",this.outFields=[\"*\"],this.path=null,this.portalItem=null,this.spatialReference=p.WGS84,this.source=null,this.type=\"csv\"}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(e,r){return null!=r.showLabels?r.showLabels:!!(r.layerDefinition&&r.layerDefinition.drawingInfo&&r.layerDefinition.drawingInfo.labelingInfo)}set url(e){this._set(\"url\",e)}async createGraphicsSource(e){const r=new s({delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField,longitudeField:this.longitudeField,spatialReference:this.spatialReference,timeInfo:this.timeInfo,url:this.url});return this._set(\"source\",r),await r.load({signal:e}),this.read({locationInfo:r.locationInfo,columnDelimiter:r.columnDelimiter},{origin:\"service\",url:this.parsedUrl}),r}queryFeatures(e,r){return this.load().then((()=>this.source.queryFeatures(l.from(e)||this.createQuery()))).then((e=>{if(null!=e&&e.features)for(const r of e.features)r.layer=r.sourceLayer=this;return e}))}queryObjectIds(e,r){return this.load().then((()=>this.source.queryObjectIds(l.from(e)||this.createQuery())))}queryFeatureCount(e,r){return this.load().then((()=>this.source.queryFeatureCount(l.from(e)||this.createQuery())))}queryExtent(e,r){return this.load().then((()=>this.source.queryExtent(l.from(e)||this.createQuery())))}write(e,r){return super.write(e,{...r,writeLayerSchema:!0})}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};e([r({readOnly:!0,json:{read:!1,write:!1}})],d.prototype,\"capabilities\",void 0),e([r({type:[\",\",\" \",\";\",\"|\",\"\\t\"],json:{read:{source:\"columnDelimiter\"},write:{target:\"columnDelimiter\",ignoreOrigin:!0}}})],d.prototype,\"delimiter\",void 0),e([r({readOnly:!0,type:Boolean,json:{origins:{\"web-scene\":{read:!1,write:!1}}}})],d.prototype,\"editingEnabled\",void 0),e([r({json:{read:{source:\"layerDefinition.fields\"},write:{target:\"layerDefinition.fields\"}}})],d.prototype,\"fields\",void 0),e([r({type:Boolean,readOnly:!0})],d.prototype,\"isTable\",null),e([t(\"web-map\",\"labelsVisible\",[\"layerDefinition.drawingInfo.labelingInfo\",\"showLabels\"])],d.prototype,\"readWebMapLabelsVisible\",null),e([r({type:String,json:{read:{source:\"locationInfo.latitudeFieldName\"},write:{target:\"locationInfo.latitudeFieldName\",ignoreOrigin:!0}}})],d.prototype,\"latitudeField\",void 0),e([r({json:{write:!0,origins:{\"web-scene\":{write:!1,read:!1}}}})],d.prototype,\"customParameters\",void 0),e([r({type:[\"show\",\"hide\"]})],d.prototype,\"listMode\",void 0),e([r({type:[\"coordinates\"],json:{read:{source:\"locationInfo.locationType\"},write:{target:\"locationInfo.locationType\",ignoreOrigin:!0,isRequired:!0}}})],d.prototype,\"locationType\",void 0),e([r({type:String,json:{read:{source:\"locationInfo.longitudeFieldName\"},write:{target:\"locationInfo.longitudeFieldName\",ignoreOrigin:!0}}})],d.prototype,\"longitudeField\",void 0),e([r({type:[\"CSV\"]})],d.prototype,\"operationalLayerType\",void 0),e([r()],d.prototype,\"outFields\",void 0),e([r({type:String,json:{origins:{\"web-scene\":{read:!1,write:!1}},read:!1,write:!1}})],d.prototype,\"path\",void 0),e([r({json:{read:!1,write:!1,origins:{\"web-document\":{read:!1,write:!1}}}})],d.prototype,\"portalItem\",void 0),e([r({json:{read:!1},cast:null,type:s,readOnly:!0})],d.prototype,\"source\",void 0),e([r({json:{read:!1},value:\"csv\",readOnly:!0})],d.prototype,\"type\",void 0),e([r({json:{read:n,write:{isRequired:!0,ignoreOrigin:!0,writer:u}}})],d.prototype,\"url\",null),d=e([i(\"esri.layers.CSVLayer\")],d);var c=d;export default c;\n"]},"metadata":{},"sourceType":"module"}