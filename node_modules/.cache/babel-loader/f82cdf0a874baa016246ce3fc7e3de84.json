{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport a from \"../../../../core/Handles.js\";\nimport { init as e } from \"../../../../core/watchUtils.js\";\nimport { GamepadKeyboardController as t } from \"../../state/controllers/GamepadKeyboardController.js\";\nimport { InputHandler as r } from \"../../../input/InputHandler.js\";\n\nclass i extends r {\n  constructor(e) {\n    super(!0), this.view = e, this.watchHandles = new a(), this.handle = this.registerIncoming(\"gamepad\", a => this.handleEventGamepad(a)), this.handle.pause();\n  }\n\n  onInstall(a) {\n    super.onInstall(a), this.watchHandles.add([e(this.view.navigation.gamepad, \"enabled\", a => {\n      a ? this.handle.resume() : (this.handle.pause(), this.cameraControllerGamepad && (this.cameraControllerGamepad.finishController(), this.cameraControllerGamepad = null));\n    }), this.view.navigation.gamepad.watch(\"device\", a => {\n      this.cameraControllerGamepad && a && this.cameraControllerGamepad.gamepadDevice !== a && (this.cameraControllerGamepad.finishController(), this.cameraControllerGamepad = null);\n    })]);\n  }\n\n  onUninstall() {\n    this.watchHandles.removeAll(), super.onUninstall();\n  }\n\n  handleEventGamepad(a) {\n    const e = this.view.navigation.gamepad.device;\n    if (e && a.data.device !== e) return;\n    const r = this.cameraControllerGamepad && this.cameraControllerGamepad.active;\n\n    if (r || t.activatesFor(this.view, a.data)) {\n      if (!r) {\n        const e = new t({\n          view: this.view,\n          gamepadDevice: a.data.device\n        });\n        this.view.state.switchCameraController(e) && (this.cameraControllerGamepad = e);\n      }\n\n      this.cameraControllerGamepad && this.cameraControllerGamepad.active && this.cameraControllerGamepad.gamepadDevice === a.data.device && this.cameraControllerGamepad.handleEventGamepad(a.data);\n    }\n  }\n\n}\n\nexport { i as GamepadNavigation };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/input/handlers/GamepadNavigation.js"],"names":["a","init","e","GamepadKeyboardController","t","InputHandler","r","i","constructor","view","watchHandles","handle","registerIncoming","handleEventGamepad","pause","onInstall","add","navigation","gamepad","resume","cameraControllerGamepad","finishController","watch","gamepadDevice","onUninstall","removeAll","device","data","active","activatesFor","state","switchCameraController","GamepadNavigation"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport a from\"../../../../core/Handles.js\";import{init as e}from\"../../../../core/watchUtils.js\";import{GamepadKeyboardController as t}from\"../../state/controllers/GamepadKeyboardController.js\";import{InputHandler as r}from\"../../../input/InputHandler.js\";class i extends r{constructor(e){super(!0),this.view=e,this.watchHandles=new a,this.handle=this.registerIncoming(\"gamepad\",(a=>this.handleEventGamepad(a))),this.handle.pause()}onInstall(a){super.onInstall(a),this.watchHandles.add([e(this.view.navigation.gamepad,\"enabled\",(a=>{a?this.handle.resume():(this.handle.pause(),this.cameraControllerGamepad&&(this.cameraControllerGamepad.finishController(),this.cameraControllerGamepad=null))})),this.view.navigation.gamepad.watch(\"device\",(a=>{this.cameraControllerGamepad&&a&&this.cameraControllerGamepad.gamepadDevice!==a&&(this.cameraControllerGamepad.finishController(),this.cameraControllerGamepad=null)}))])}onUninstall(){this.watchHandles.removeAll(),super.onUninstall()}handleEventGamepad(a){const e=this.view.navigation.gamepad.device;if(e&&a.data.device!==e)return;const r=this.cameraControllerGamepad&&this.cameraControllerGamepad.active;if(r||t.activatesFor(this.view,a.data)){if(!r){const e=new t({view:this.view,gamepadDevice:a.data.device});this.view.state.switchCameraController(e)&&(this.cameraControllerGamepad=e)}this.cameraControllerGamepad&&this.cameraControllerGamepad.active&&this.cameraControllerGamepad.gamepadDevice===a.data.device&&this.cameraControllerGamepad.handleEventGamepad(a.data)}}}export{i as GamepadNavigation};\n"]},"metadata":{},"sourceType":"module"}