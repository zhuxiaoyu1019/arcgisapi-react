{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { makeData as e, isAbsolute as a, join as r, isDataProtocol as t, dataComponents as i } from \"../../core/urlUtils.js\";\nimport { f as n, w as o } from \"../../chunks/persistableUrlUtils.js\";\n\nfunction s(a, r, t) {\n  return r.imageData ? e({\n    mediaType: r.contentType || \"image/png\",\n    isBase64: !0,\n    data: r.imageData\n  }) : l(r.url, t);\n}\n\nfunction l(e, t) {\n  return p(t) && !a(e) && t.layer.parsedUrl ? r(t.layer.parsedUrl.path, \"images\", e) : n(e, t);\n}\n\nfunction u(e, a, r, n) {\n  if (t(e)) {\n    const t = i(e);\n    a.contentType = t.mediaType, a.imageData = t.data, r && r.imageData === a.imageData && r.url && o(r.url, a, \"url\", n);\n  } else o(e, a, \"url\", n);\n}\n\nconst m = {\n  json: {\n    read: {\n      source: [\"imageData\", \"url\"],\n      reader: s\n    },\n    write: {\n      writer(e, a, r, t) {\n        u(e, a, this.source, t);\n      }\n\n    }\n  }\n},\n      c = {\n  readOnly: !0,\n  json: {\n    read: {\n      source: [\"imageData\", \"url\"],\n\n      reader(e, a, r) {\n        const t = {};\n        return a.imageData && (t.imageData = a.imageData), a.contentType && (t.contentType = a.contentType), a.url && (t.url = l(a.url, r)), t;\n      }\n\n    }\n  }\n};\n\nfunction p(e) {\n  return e && (\"service\" === e.origin || \"portal-item\" === e.origin) && e.layer && (\"feature\" === e.layer.type || \"stream\" === e.layer.type);\n}\n\nexport { l as read, s as readImageDataOrUrl, c as sourcePropertyDefinition, m as urlPropertyDefinition, u as writeImageDataAndUrl };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/symbols/support/urlUtils.js"],"names":["makeData","e","isAbsolute","a","join","r","isDataProtocol","t","dataComponents","i","f","n","w","o","s","imageData","mediaType","contentType","isBase64","data","l","url","p","layer","parsedUrl","path","u","m","json","read","source","reader","write","writer","c","readOnly","origin","type","readImageDataOrUrl","sourcePropertyDefinition","urlPropertyDefinition","writeImageDataAndUrl"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{makeData as e,isAbsolute as a,join as r,isDataProtocol as t,dataComponents as i}from\"../../core/urlUtils.js\";import{f as n,w as o}from\"../../chunks/persistableUrlUtils.js\";function s(a,r,t){return r.imageData?e({mediaType:r.contentType||\"image/png\",isBase64:!0,data:r.imageData}):l(r.url,t)}function l(e,t){return p(t)&&!a(e)&&t.layer.parsedUrl?r(t.layer.parsedUrl.path,\"images\",e):n(e,t)}function u(e,a,r,n){if(t(e)){const t=i(e);a.contentType=t.mediaType,a.imageData=t.data,r&&r.imageData===a.imageData&&r.url&&o(r.url,a,\"url\",n)}else o(e,a,\"url\",n)}const m={json:{read:{source:[\"imageData\",\"url\"],reader:s},write:{writer(e,a,r,t){u(e,a,this.source,t)}}}},c={readOnly:!0,json:{read:{source:[\"imageData\",\"url\"],reader(e,a,r){const t={};return a.imageData&&(t.imageData=a.imageData),a.contentType&&(t.contentType=a.contentType),a.url&&(t.url=l(a.url,r)),t}}}};function p(e){return e&&(\"service\"===e.origin||\"portal-item\"===e.origin)&&e.layer&&(\"feature\"===e.layer.type||\"stream\"===e.layer.type)}export{l as read,s as readImageDataOrUrl,c as sourcePropertyDefinition,m as urlPropertyDefinition,u as writeImageDataAndUrl};\n"]},"metadata":{},"sourceType":"module"}