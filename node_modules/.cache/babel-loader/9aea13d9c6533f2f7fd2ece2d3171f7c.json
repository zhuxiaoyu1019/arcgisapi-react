{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport { rad2deg as t } from \"../../core/mathUtils.js\";\nimport { createScreenPoint as e } from \"../../core/screenUtils.js\";\nimport { InputHandler as a } from \"./InputHandler.js\";\nimport { ViewEventPriorities as n } from \"./InputManager.js\";\nconst r = [\"click\", \"double-click\", \"immediate-click\", \"immediate-double-click\", \"hold\", \"drag\", \"key-down\", \"key-up\", \"pointer-down\", \"pointer-move\", \"pointer-up\", \"pointer-drag\", \"mouse-wheel\", \"pointer-enter\", \"pointer-leave\", \"gamepad\", \"focus\", \"blur\"],\n      i = {};\n\nfunction o(t) {\n  return !!i[t];\n}\n\nfunction s(t) {\n  for (const e of t) if (!o(e)) return !1;\n\n  return !0;\n}\n\nr.forEach(t => {\n  i[t] = !0;\n});\n\nclass p {\n  constructor(t) {\n    this.handlers = new Map(), this.counter = 0, this.handlerCounts = new Map(), this.view = t, this.inputManager = null;\n  }\n\n  connect(t) {\n    t && this.disconnect(), this.inputManager = t, this.handlers.forEach(({\n      handler: t,\n      priority: e\n    }, a) => this.inputManager.installHandlers(a, [t], e));\n  }\n\n  disconnect() {\n    this.inputManager && this.handlers.forEach((t, e) => this.inputManager.uninstallHandlers(e)), this.inputManager = null;\n  }\n\n  destroy() {\n    this.disconnect(), this.handlers.clear(), this.view = null;\n  }\n\n  on(t, e, a, r) {\n    const i = Array.isArray(t) ? t : t.split(\",\");\n    if (!s(i)) return i.some(o) && console.error(\"Error: registering input events and other events on the view at the same time is not supported.\"), null;\n    let p, l;\n    Array.isArray(e) ? l = e : (p = e, l = []), \"function\" == typeof a ? p = a : r = a, r = null != r ? r : n.DEFAULT;\n    const u = this.createUniqueGroupName(),\n          m = new c(this.view, i, l, p);\n    this.handlers.set(u, {\n      handler: m,\n      priority: r\n    });\n\n    for (const n of i) {\n      const t = this.handlerCounts.get(n) || 0;\n      this.handlerCounts.set(n, t + 1);\n    }\n\n    return this.inputManager && this.inputManager.installHandlers(u, [m], r), {\n      remove: () => this.removeHandler(u, i)\n    };\n  }\n\n  hasHandler(t) {\n    return !!this.handlerCounts.get(t);\n  }\n\n  removeHandler(t, e) {\n    if (this.handlers.has(t)) {\n      this.handlers.delete(t);\n\n      for (const t of e) {\n        const e = this.handlerCounts.get(t);\n        void 0 === e ? console.error(\"Trying to remove handler for event that has no handlers registered: \", t) : 1 === e ? this.handlerCounts.delete(t) : this.handlerCounts.set(t, e - 1);\n      }\n    }\n\n    this.inputManager && this.inputManager.uninstallHandlers(t);\n  }\n\n  createUniqueGroupName() {\n    return this.counter += 1, `viewEvents_${this.counter}`;\n  }\n\n}\n\nclass c extends a {\n  constructor(t, e, a, n) {\n    super(!0), this.view = t;\n\n    for (const r of e) switch (r) {\n      case \"click\":\n        this.registerIncoming(\"click\", a, t => n(this.wrapClick(t)));\n        break;\n\n      case \"double-click\":\n        this.registerIncoming(\"double-click\", a, t => n(this.wrapDoubleClick(t)));\n        break;\n\n      case \"immediate-click\":\n        this.registerIncoming(\"immediate-click\", a, t => n(this.wrapImmediateClick(t)));\n        break;\n\n      case \"immediate-double-click\":\n        this.registerIncoming(\"immediate-double-click\", a, t => n(this.wrapImmediateDoubleClick(t)));\n        break;\n\n      case \"hold\":\n        this.registerIncoming(\"hold\", a, t => n(this.wrapHold(t)));\n        break;\n\n      case \"drag\":\n        this.registerIncoming(\"drag\", a, t => {\n          const e = this.wrapDrag(t);\n          e && n(e);\n        });\n        break;\n\n      case \"key-down\":\n        this.registerIncoming(\"key-down\", a, t => n(this.wrapKeyDown(t)));\n        break;\n\n      case \"key-up\":\n        this.registerIncoming(\"key-up\", a, t => n(this.wrapKeyUp(t)));\n        break;\n\n      case \"pointer-down\":\n        this.registerIncoming(\"pointer-down\", a, t => n(this.wrapPointer(t, \"pointer-down\")));\n        break;\n\n      case \"pointer-move\":\n        this.registerIncoming(\"pointer-move\", a, t => n(this.wrapPointer(t, \"pointer-move\")));\n        break;\n\n      case \"pointer-up\":\n        this.registerIncoming(\"pointer-up\", a, t => n(this.wrapPointer(t, \"pointer-up\")));\n        break;\n\n      case \"pointer-drag\":\n        this.registerIncoming(\"pointer-drag\", a, t => n(this.wrapPointerDrag(t)));\n        break;\n\n      case \"mouse-wheel\":\n        this.registerIncoming(\"mouse-wheel\", a, t => n(this.wrapMouseWheel(t)));\n        break;\n\n      case \"pointer-enter\":\n        this.registerIncoming(\"pointer-enter\", a, t => n(this.wrapPointer(t, \"pointer-enter\")));\n        break;\n\n      case \"pointer-leave\":\n        this.registerIncoming(\"pointer-leave\", a, t => n(this.wrapPointer(t, \"pointer-leave\")));\n        break;\n\n      case \"gamepad\":\n        this.registerIncoming(\"gamepad\", a, t => {\n          n(this.wrapGamepad(t));\n        });\n        break;\n\n      case \"focus\":\n        this.registerIncoming(\"focus\", a, t => {\n          n(this.wrapFocus(t));\n        });\n        break;\n\n      case \"blur\":\n        this.registerIncoming(\"blur\", a, t => {\n          n(this.wrapBlur(t));\n        });\n    }\n  }\n\n  wrapFocus(t) {\n    return {\n      type: \"focus\",\n      timestamp: t.timestamp,\n      native: t.data.native,\n      cancelable: t.cancelable,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapBlur(t) {\n    return {\n      type: \"blur\",\n      timestamp: t.timestamp,\n      native: t.data.native,\n      cancelable: t.cancelable,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapClick(t) {\n    const {\n      pointerType: a,\n      button: n,\n      buttons: r,\n      x: i,\n      y: o,\n      native: s,\n      eventId: p\n    } = t.data,\n          {\n      cancelable: c,\n      timestamp: l\n    } = t;\n    return {\n      type: \"click\",\n      pointerType: a,\n      button: n,\n      buttons: r,\n      x: i,\n      y: o,\n      native: s,\n      timestamp: l,\n      screenPoint: e(i, o),\n      mapPoint: this.getMapPoint(i, o),\n      eventId: p,\n      cancelable: c,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapDoubleClick(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          {\n      cancelable: p,\n      timestamp: c\n    } = t;\n    return {\n      type: \"double-click\",\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: c,\n      mapPoint: this.getMapPoint(r, i),\n      eventId: s,\n      cancelable: p,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapImmediateClick(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          p = o.pointerId,\n          {\n      cancelable: c,\n      timestamp: l\n    } = t;\n    return {\n      type: \"immediate-click\",\n      pointerId: p,\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: l,\n      mapPoint: this.getMapPoint(r, i),\n      eventId: s,\n      cancelable: c,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapImmediateDoubleClick(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          p = o.pointerId,\n          {\n      cancelable: c,\n      timestamp: l\n    } = t;\n    return {\n      type: \"immediate-double-click\",\n      pointerId: p,\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: l,\n      mapPoint: this.getMapPoint(r, i),\n      eventId: s,\n      cancelable: c,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapHold(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o\n    } = t.data,\n          {\n      cancelable: s,\n      timestamp: p\n    } = t;\n    return {\n      type: \"hold\",\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: p,\n      mapPoint: this.getMapPoint(r, i),\n      cancelable: s,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  getMapPoint(t, a) {\n    return this.view.toMap(e(t, a), {\n      exclude: []\n    });\n  }\n\n  wrapDrag(e) {\n    const a = e.data,\n          {\n      x: n,\n      y: r\n    } = a.center,\n          {\n      action: i,\n      pointerType: o,\n      button: s\n    } = a;\n    if (\"start\" === i && (this.latestDragStart = a), !this.latestDragStart) return;\n    const p = a.pointer.native,\n          c = a.buttons,\n          {\n      cancelable: l,\n      timestamp: u\n    } = e,\n          m = {\n      x: this.latestDragStart.center.x,\n      y: this.latestDragStart.center.y\n    };\n    return \"end\" === i && (this.latestDragStart = void 0), {\n      type: \"drag\",\n      action: i,\n      x: n,\n      y: r,\n      origin: m,\n      pointerType: o,\n      button: s,\n      buttons: c,\n      radius: a.radius,\n      angle: t(a.angle),\n      native: p,\n      timestamp: u,\n      cancelable: l,\n      stopPropagation: () => e.stopPropagation(),\n      async: t => e.async(t),\n      preventDefault: () => e.preventDefault()\n    };\n  }\n\n  wrapKeyDown(t) {\n    const {\n      key: e,\n      repeat: a,\n      native: n\n    } = t.data,\n          {\n      cancelable: r,\n      timestamp: i\n    } = t;\n    return {\n      type: \"key-down\",\n      key: e,\n      repeat: a,\n      native: n,\n      timestamp: i,\n      cancelable: r,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapKeyUp(t) {\n    const {\n      key: e,\n      native: a\n    } = t.data,\n          {\n      cancelable: n,\n      timestamp: r\n    } = t;\n    return {\n      type: \"key-up\",\n      key: e,\n      native: a,\n      timestamp: r,\n      cancelable: n,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapPointer(t, e) {\n    const {\n      x: a,\n      y: n,\n      button: r,\n      buttons: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          p = o.pointerId,\n          c = o.pointerType,\n          {\n      cancelable: l,\n      timestamp: u\n    } = t;\n    return {\n      type: e,\n      x: a,\n      y: n,\n      pointerId: p,\n      pointerType: c,\n      button: r,\n      buttons: i,\n      native: o,\n      timestamp: u,\n      eventId: s,\n      cancelable: l,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapPointerDrag(t) {\n    const {\n      x: e,\n      y: a,\n      buttons: n,\n      native: r,\n      eventId: i\n    } = t.data.currentEvent,\n          {\n      button: o\n    } = t.data.startEvent,\n          s = t.data.startEvent.native.pointerId,\n          p = t.data.startEvent.native.pointerType,\n          c = t.data.action,\n          l = {\n      x: t.data.startEvent.x,\n      y: t.data.startEvent.y\n    },\n          {\n      cancelable: u,\n      timestamp: m\n    } = t;\n    return {\n      type: \"pointer-drag\",\n      x: e,\n      y: a,\n      pointerId: s,\n      pointerType: p,\n      button: o,\n      buttons: n,\n      action: c,\n      origin: l,\n      native: r,\n      timestamp: m,\n      eventId: i,\n      cancelable: u,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapMouseWheel(t) {\n    const {\n      cancelable: e,\n      data: a,\n      timestamp: n\n    } = t,\n          {\n      x: r,\n      y: i,\n      deltaY: o,\n      native: s\n    } = a;\n    return {\n      type: \"mouse-wheel\",\n      x: r,\n      y: i,\n      deltaY: o,\n      native: s,\n      timestamp: n,\n      cancelable: e,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  wrapGamepad(t) {\n    const {\n      action: e,\n      state: a,\n      device: n\n    } = t.data,\n          {\n      cancelable: r,\n      timestamp: i\n    } = t,\n          {\n      buttons: o,\n      axes: s\n    } = a;\n    return {\n      type: \"gamepad\",\n      device: n,\n      timestamp: i,\n      action: e,\n      buttons: o,\n      axes: s,\n      cancelable: r,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n}\n\nexport { p as ViewEvents, r as eventTypes };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/input/ViewEvents.js"],"names":["rad2deg","t","createScreenPoint","e","InputHandler","a","ViewEventPriorities","n","r","i","o","s","forEach","p","constructor","handlers","Map","counter","handlerCounts","view","inputManager","connect","disconnect","handler","priority","installHandlers","uninstallHandlers","destroy","clear","on","Array","isArray","split","some","console","error","l","DEFAULT","u","createUniqueGroupName","m","c","set","get","remove","removeHandler","hasHandler","has","delete","registerIncoming","wrapClick","wrapDoubleClick","wrapImmediateClick","wrapImmediateDoubleClick","wrapHold","wrapDrag","wrapKeyDown","wrapKeyUp","wrapPointer","wrapPointerDrag","wrapMouseWheel","wrapGamepad","wrapFocus","wrapBlur","type","timestamp","native","data","cancelable","stopPropagation","async","preventDefault","pointerType","button","buttons","x","y","eventId","screenPoint","mapPoint","getMapPoint","pointerId","toMap","exclude","center","action","latestDragStart","pointer","origin","radius","angle","key","repeat","currentEvent","startEvent","deltaY","state","device","axes","ViewEvents","eventTypes"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{rad2deg as t}from\"../../core/mathUtils.js\";import{createScreenPoint as e}from\"../../core/screenUtils.js\";import{InputHandler as a}from\"./InputHandler.js\";import{ViewEventPriorities as n}from\"./InputManager.js\";const r=[\"click\",\"double-click\",\"immediate-click\",\"immediate-double-click\",\"hold\",\"drag\",\"key-down\",\"key-up\",\"pointer-down\",\"pointer-move\",\"pointer-up\",\"pointer-drag\",\"mouse-wheel\",\"pointer-enter\",\"pointer-leave\",\"gamepad\",\"focus\",\"blur\"],i={};function o(t){return!!i[t]}function s(t){for(const e of t)if(!o(e))return!1;return!0}r.forEach((t=>{i[t]=!0}));class p{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach((({handler:t,priority:e},a)=>this.inputManager.installHandlers(a,[t],e)))}disconnect(){this.inputManager&&this.handlers.forEach(((t,e)=>this.inputManager.uninstallHandlers(e))),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,e,a,r){const i=Array.isArray(t)?t:t.split(\",\");if(!s(i))return i.some(o)&&console.error(\"Error: registering input events and other events on the view at the same time is not supported.\"),null;let p,l;Array.isArray(e)?l=e:(p=e,l=[]),\"function\"==typeof a?p=a:r=a,r=null!=r?r:n.DEFAULT;const u=this.createUniqueGroupName(),m=new c(this.view,i,l,p);this.handlers.set(u,{handler:m,priority:r});for(const n of i){const t=this.handlerCounts.get(n)||0;this.handlerCounts.set(n,t+1)}return this.inputManager&&this.inputManager.installHandlers(u,[m],r),{remove:()=>this.removeHandler(u,i)}}hasHandler(t){return!!this.handlerCounts.get(t)}removeHandler(t,e){if(this.handlers.has(t)){this.handlers.delete(t);for(const t of e){const e=this.handlerCounts.get(t);void 0===e?console.error(\"Trying to remove handler for event that has no handlers registered: \",t):1===e?this.handlerCounts.delete(t):this.handlerCounts.set(t,e-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class c extends a{constructor(t,e,a,n){super(!0),this.view=t;for(const r of e)switch(r){case\"click\":this.registerIncoming(\"click\",a,(t=>n(this.wrapClick(t))));break;case\"double-click\":this.registerIncoming(\"double-click\",a,(t=>n(this.wrapDoubleClick(t))));break;case\"immediate-click\":this.registerIncoming(\"immediate-click\",a,(t=>n(this.wrapImmediateClick(t))));break;case\"immediate-double-click\":this.registerIncoming(\"immediate-double-click\",a,(t=>n(this.wrapImmediateDoubleClick(t))));break;case\"hold\":this.registerIncoming(\"hold\",a,(t=>n(this.wrapHold(t))));break;case\"drag\":this.registerIncoming(\"drag\",a,(t=>{const e=this.wrapDrag(t);e&&n(e)}));break;case\"key-down\":this.registerIncoming(\"key-down\",a,(t=>n(this.wrapKeyDown(t))));break;case\"key-up\":this.registerIncoming(\"key-up\",a,(t=>n(this.wrapKeyUp(t))));break;case\"pointer-down\":this.registerIncoming(\"pointer-down\",a,(t=>n(this.wrapPointer(t,\"pointer-down\"))));break;case\"pointer-move\":this.registerIncoming(\"pointer-move\",a,(t=>n(this.wrapPointer(t,\"pointer-move\"))));break;case\"pointer-up\":this.registerIncoming(\"pointer-up\",a,(t=>n(this.wrapPointer(t,\"pointer-up\"))));break;case\"pointer-drag\":this.registerIncoming(\"pointer-drag\",a,(t=>n(this.wrapPointerDrag(t))));break;case\"mouse-wheel\":this.registerIncoming(\"mouse-wheel\",a,(t=>n(this.wrapMouseWheel(t))));break;case\"pointer-enter\":this.registerIncoming(\"pointer-enter\",a,(t=>n(this.wrapPointer(t,\"pointer-enter\"))));break;case\"pointer-leave\":this.registerIncoming(\"pointer-leave\",a,(t=>n(this.wrapPointer(t,\"pointer-leave\"))));break;case\"gamepad\":this.registerIncoming(\"gamepad\",a,(t=>{n(this.wrapGamepad(t))}));break;case\"focus\":this.registerIncoming(\"focus\",a,(t=>{n(this.wrapFocus(t))}));break;case\"blur\":this.registerIncoming(\"blur\",a,(t=>{n(this.wrapBlur(t))}))}}wrapFocus(t){return{type:\"focus\",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapBlur(t){return{type:\"blur\",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapClick(t){const{pointerType:a,button:n,buttons:r,x:i,y:o,native:s,eventId:p}=t.data,{cancelable:c,timestamp:l}=t;return{type:\"click\",pointerType:a,button:n,buttons:r,x:i,y:o,native:s,timestamp:l,screenPoint:e(i,o),mapPoint:this.getMapPoint(i,o),eventId:p,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,{cancelable:p,timestamp:c}=t;return{type:\"double-click\",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:c,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapImmediateClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return{type:\"immediate-click\",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapImmediateDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return{type:\"immediate-double-click\",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this.getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapHold(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o}=t.data,{cancelable:s,timestamp:p}=t;return{type:\"hold\",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:p,mapPoint:this.getMapPoint(r,i),cancelable:s,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}getMapPoint(t,a){return this.view.toMap(e(t,a),{exclude:[]})}wrapDrag(e){const a=e.data,{x:n,y:r}=a.center,{action:i,pointerType:o,button:s}=a;if(\"start\"===i&&(this.latestDragStart=a),!this.latestDragStart)return;const p=a.pointer.native,c=a.buttons,{cancelable:l,timestamp:u}=e,m={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return\"end\"===i&&(this.latestDragStart=void 0),{type:\"drag\",action:i,x:n,y:r,origin:m,pointerType:o,button:s,buttons:c,radius:a.radius,angle:t(a.angle),native:p,timestamp:u,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}wrapKeyDown(t){const{key:e,repeat:a,native:n}=t.data,{cancelable:r,timestamp:i}=t;return{type:\"key-down\",key:e,repeat:a,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapKeyUp(t){const{key:e,native:a}=t.data,{cancelable:n,timestamp:r}=t;return{type:\"key-up\",key:e,native:a,timestamp:r,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapPointer(t,e){const{x:a,y:n,button:r,buttons:i,native:o,eventId:s}=t.data,p=o.pointerId,c=o.pointerType,{cancelable:l,timestamp:u}=t;return{type:e,x:a,y:n,pointerId:p,pointerType:c,button:r,buttons:i,native:o,timestamp:u,eventId:s,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapPointerDrag(t){const{x:e,y:a,buttons:n,native:r,eventId:i}=t.data.currentEvent,{button:o}=t.data.startEvent,s=t.data.startEvent.native.pointerId,p=t.data.startEvent.native.pointerType,c=t.data.action,l={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:u,timestamp:m}=t;return{type:\"pointer-drag\",x:e,y:a,pointerId:s,pointerType:p,button:o,buttons:n,action:c,origin:l,native:r,timestamp:m,eventId:i,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapMouseWheel(t){const{cancelable:e,data:a,timestamp:n}=t,{x:r,y:i,deltaY:o,native:s}=a;return{type:\"mouse-wheel\",x:r,y:i,deltaY:o,native:s,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}wrapGamepad(t){const{action:e,state:a,device:n}=t.data,{cancelable:r,timestamp:i}=t,{buttons:o,axes:s}=a;return{type:\"gamepad\",device:n,timestamp:i,action:e,buttons:o,axes:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}}export{p as ViewEvents,r as eventTypes};\n"]},"metadata":{},"sourceType":"module"}