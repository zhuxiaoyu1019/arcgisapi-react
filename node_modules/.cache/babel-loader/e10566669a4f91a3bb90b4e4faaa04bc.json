{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { g as i, a as t, b as n } from \"../../../../chunks/vec3.js\";\nimport { c as s, f as o } from \"../../../../chunks/vec3f64.js\";\nimport { SphericalHarmonicsAmbientLight as r } from \"./Lightsources.js\";\nimport { combineLights as h } from \"./SphericalHarmonics.js\";\n\nclass e {\n  constructor() {\n    this._shOrder = 2, this._ambientBoost = .4, this._oldSunlight = {\n      direction: s(),\n      ambient: {\n        color: s(),\n        intensity: 1\n      },\n      diffuse: {\n        color: s(),\n        intensity: 1\n      }\n    }, this.globalFactor = .5, this.groundLightingFactor = .5, this._sphericalHarmonics = new r(), this._mainLight = {\n      intensity: s(),\n      direction: o(1, 0, 0),\n      castShadows: !1\n    };\n  }\n\n  get lightingMainDirection() {\n    return this._mainLight.direction;\n  }\n\n  setLightDirectionUniform(i) {\n    i.setUniform3fv(\"lightingMainDirection\", this._mainLight.direction);\n  }\n\n  setUniforms(i, t = !1) {\n    const n = t ? (1 - this.groundLightingFactor) * (1 - this.globalFactor) : 0;\n    i.setUniform1f(\"lightingFixedFactor\", n), i.setUniform1f(\"lightingGlobalFactor\", this.globalFactor), this.setLightDirectionUniform(i), i.setUniform3fv(\"lightingMainIntensity\", this._mainLight.intensity), i.setUniform1f(\"ambientBoostFactor\", this._ambientBoost);\n    const s = this._sphericalHarmonics;\n    0 === this._shOrder ? i.setUniform3f(\"lightingAmbientSH0\", s.r[0], s.g[0], s.b[0]) : 1 === this._shOrder ? (i.setUniform4f(\"lightingAmbientSH_R\", s.r[0], s.r[1], s.r[2], s.r[3]), i.setUniform4f(\"lightingAmbientSH_G\", s.g[0], s.g[1], s.g[2], s.g[3]), i.setUniform4f(\"lightingAmbientSH_B\", s.b[0], s.b[1], s.b[2], s.b[3])) : 2 === this._shOrder && (i.setUniform3f(\"lightingAmbientSH0\", s.r[0], s.g[0], s.b[0]), i.setUniform4f(\"lightingAmbientSH_R1\", s.r[1], s.r[2], s.r[3], s.r[4]), i.setUniform4f(\"lightingAmbientSH_G1\", s.g[1], s.g[2], s.g[3], s.g[4]), i.setUniform4f(\"lightingAmbientSH_B1\", s.b[1], s.b[2], s.b[3], s.b[4]), i.setUniform4f(\"lightingAmbientSH_R2\", s.r[5], s.r[6], s.r[7], s.r[8]), i.setUniform4f(\"lightingAmbientSH_G2\", s.g[5], s.g[6], s.g[7], s.g[8]), i.setUniform4f(\"lightingAmbientSH_B2\", s.b[5], s.b[6], s.b[7], s.b[8]));\n  }\n\n  set(s) {\n    h(s, this._shOrder, this._mainLight, this._sphericalHarmonics), i(this._oldSunlight.direction, this._mainLight.direction);\n    const o = 1 / Math.PI;\n    this._oldSunlight.ambient.color[0] = .282095 * this._sphericalHarmonics.r[0] * o, this._oldSunlight.ambient.color[1] = .282095 * this._sphericalHarmonics.g[0] * o, this._oldSunlight.ambient.color[2] = .282095 * this._sphericalHarmonics.b[0] * o, t(this._oldSunlight.diffuse.color, this._mainLight.intensity, o), i(g, this._oldSunlight.diffuse.color), t(g, g, this._ambientBoost * this.globalFactor), n(this._oldSunlight.ambient.color, this._oldSunlight.ambient.color, g);\n  }\n\n  get old() {\n    return this._oldSunlight;\n  }\n\n}\n\nconst g = s();\nexport { e as SceneLighting };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js"],"names":["g","i","a","t","b","n","c","s","f","o","SphericalHarmonicsAmbientLight","r","combineLights","h","e","constructor","_shOrder","_ambientBoost","_oldSunlight","direction","ambient","color","intensity","diffuse","globalFactor","groundLightingFactor","_sphericalHarmonics","_mainLight","castShadows","lightingMainDirection","setLightDirectionUniform","setUniform3fv","setUniforms","setUniform1f","setUniform3f","setUniform4f","set","Math","PI","old","SceneLighting"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{g as i,a as t,b as n}from\"../../../../chunks/vec3.js\";import{c as s,f as o}from\"../../../../chunks/vec3f64.js\";import{SphericalHarmonicsAmbientLight as r}from\"./Lightsources.js\";import{combineLights as h}from\"./SphericalHarmonics.js\";class e{constructor(){this._shOrder=2,this._ambientBoost=.4,this._oldSunlight={direction:s(),ambient:{color:s(),intensity:1},diffuse:{color:s(),intensity:1}},this.globalFactor=.5,this.groundLightingFactor=.5,this._sphericalHarmonics=new r,this._mainLight={intensity:s(),direction:o(1,0,0),castShadows:!1}}get lightingMainDirection(){return this._mainLight.direction}setLightDirectionUniform(i){i.setUniform3fv(\"lightingMainDirection\",this._mainLight.direction)}setUniforms(i,t=!1){const n=t?(1-this.groundLightingFactor)*(1-this.globalFactor):0;i.setUniform1f(\"lightingFixedFactor\",n),i.setUniform1f(\"lightingGlobalFactor\",this.globalFactor),this.setLightDirectionUniform(i),i.setUniform3fv(\"lightingMainIntensity\",this._mainLight.intensity),i.setUniform1f(\"ambientBoostFactor\",this._ambientBoost);const s=this._sphericalHarmonics;0===this._shOrder?i.setUniform3f(\"lightingAmbientSH0\",s.r[0],s.g[0],s.b[0]):1===this._shOrder?(i.setUniform4f(\"lightingAmbientSH_R\",s.r[0],s.r[1],s.r[2],s.r[3]),i.setUniform4f(\"lightingAmbientSH_G\",s.g[0],s.g[1],s.g[2],s.g[3]),i.setUniform4f(\"lightingAmbientSH_B\",s.b[0],s.b[1],s.b[2],s.b[3])):2===this._shOrder&&(i.setUniform3f(\"lightingAmbientSH0\",s.r[0],s.g[0],s.b[0]),i.setUniform4f(\"lightingAmbientSH_R1\",s.r[1],s.r[2],s.r[3],s.r[4]),i.setUniform4f(\"lightingAmbientSH_G1\",s.g[1],s.g[2],s.g[3],s.g[4]),i.setUniform4f(\"lightingAmbientSH_B1\",s.b[1],s.b[2],s.b[3],s.b[4]),i.setUniform4f(\"lightingAmbientSH_R2\",s.r[5],s.r[6],s.r[7],s.r[8]),i.setUniform4f(\"lightingAmbientSH_G2\",s.g[5],s.g[6],s.g[7],s.g[8]),i.setUniform4f(\"lightingAmbientSH_B2\",s.b[5],s.b[6],s.b[7],s.b[8]))}set(s){h(s,this._shOrder,this._mainLight,this._sphericalHarmonics),i(this._oldSunlight.direction,this._mainLight.direction);const o=1/Math.PI;this._oldSunlight.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*o,this._oldSunlight.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*o,this._oldSunlight.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*o,t(this._oldSunlight.diffuse.color,this._mainLight.intensity,o),i(g,this._oldSunlight.diffuse.color),t(g,g,this._ambientBoost*this.globalFactor),n(this._oldSunlight.ambient.color,this._oldSunlight.ambient.color,g)}get old(){return this._oldSunlight}}const g=s();export{e as SceneLighting};\n"]},"metadata":{},"sourceType":"module"}