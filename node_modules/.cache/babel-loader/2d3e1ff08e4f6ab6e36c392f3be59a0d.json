{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../core/has.js\";\nimport { isSome as r } from \"../core/maybe.js\";\nimport { isAborted as o } from \"../core/promiseUtils.js\";\n\nfunction t(t, i, s = !1, c) {\n  return new Promise((d, a) => {\n    if (o(c)) return void a(n());\n\n    let m = () => {\n      v(), a(new Error(`Unable to load ${i}`));\n    },\n        l = () => {\n      const e = t;\n      v(), d(e);\n    },\n        u = () => {\n      if (!t) return;\n      const e = t;\n      v(), e.src = \"\", a(n());\n    };\n\n    const v = () => {\n      e(\"esri-image-decode\") || (t.removeEventListener(\"error\", m), t.removeEventListener(\"load\", l)), m = null, l = null, t = null, r(c) && c.removeEventListener(\"abort\", u), u = null, s && URL.revokeObjectURL(i);\n    };\n\n    r(c) && c.addEventListener(\"abort\", u), e(\"esri-image-decode\") ? t.decode().then(l, m) : (t.addEventListener(\"error\", m), t.addEventListener(\"load\", l));\n  });\n}\n\nfunction n() {\n  try {\n    return new DOMException(\"Aborted\", \"AbortError\");\n  } catch {\n    const e = new Error();\n    return e.name = \"AbortError\", e;\n  }\n}\n\nexport { t as loadImageAsync };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/support/requestUtils.js"],"names":["e","isSome","r","isAborted","o","t","i","s","c","Promise","d","a","n","m","v","Error","l","u","src","removeEventListener","URL","revokeObjectURL","addEventListener","decode","then","DOMException","name","loadImageAsync"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,gBAAb;AAA8B,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,kBAAvB;AAA0C,SAAOC,SAAS,IAAIC,CAApB,QAA0B,yBAA1B;;AAAoD,SAASC,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAeC,CAAC,GAAC,CAAC,CAAlB,EAAoBC,CAApB,EAAsB;AAAC,SAAO,IAAIC,OAAJ,CAAa,CAACC,CAAD,EAAGC,CAAH,KAAO;AAAC,QAAGP,CAAC,CAACI,CAAD,CAAJ,EAAQ,OAAO,KAAKG,CAAC,CAACC,CAAC,EAAF,CAAb;;AAAmB,QAAIC,CAAC,GAAC,MAAI;AAACC,MAAAA,CAAC,IAAGH,CAAC,CAAC,IAAII,KAAJ,CAAW,kBAAiBT,CAAE,EAA9B,CAAD,CAAL;AAAwC,KAAnD;AAAA,QAAoDU,CAAC,GAAC,MAAI;AAAC,YAAMhB,CAAC,GAACK,CAAR;AAAUS,MAAAA,CAAC,IAAGJ,CAAC,CAACV,CAAD,CAAL;AAAS,KAA9E;AAAA,QAA+EiB,CAAC,GAAC,MAAI;AAAC,UAAG,CAACZ,CAAJ,EAAM;AAAO,YAAML,CAAC,GAACK,CAAR;AAAUS,MAAAA,CAAC,IAAGd,CAAC,CAACkB,GAAF,GAAM,EAAT,EAAYP,CAAC,CAACC,CAAC,EAAF,CAAd;AAAoB,KAAjI;;AAAkI,UAAME,CAAC,GAAC,MAAI;AAACd,MAAAA,CAAC,CAAC,mBAAD,CAAD,KAAyBK,CAAC,CAACc,mBAAF,CAAsB,OAAtB,EAA8BN,CAA9B,GAAiCR,CAAC,CAACc,mBAAF,CAAsB,MAAtB,EAA6BH,CAA7B,CAA1D,GAA2FH,CAAC,GAAC,IAA7F,EAAkGG,CAAC,GAAC,IAApG,EAAyGX,CAAC,GAAC,IAA3G,EAAgHH,CAAC,CAACM,CAAD,CAAD,IAAMA,CAAC,CAACW,mBAAF,CAAsB,OAAtB,EAA8BF,CAA9B,CAAtH,EAAuJA,CAAC,GAAC,IAAzJ,EAA8JV,CAAC,IAAEa,GAAG,CAACC,eAAJ,CAAoBf,CAApB,CAAjK;AAAwL,KAArM;;AAAsMJ,IAAAA,CAAC,CAACM,CAAD,CAAD,IAAMA,CAAC,CAACc,gBAAF,CAAmB,OAAnB,EAA2BL,CAA3B,CAAN,EAAoCjB,CAAC,CAAC,mBAAD,CAAD,GAAuBK,CAAC,CAACkB,MAAF,GAAWC,IAAX,CAAgBR,CAAhB,EAAkBH,CAAlB,CAAvB,IAA6CR,CAAC,CAACiB,gBAAF,CAAmB,OAAnB,EAA2BT,CAA3B,GAA8BR,CAAC,CAACiB,gBAAF,CAAmB,MAAnB,EAA0BN,CAA1B,CAA3E,CAApC;AAA6I,GAArgB,CAAP;AAA+gB;;AAAA,SAASJ,CAAT,GAAY;AAAC,MAAG;AAAC,WAAO,IAAIa,YAAJ,CAAiB,SAAjB,EAA2B,YAA3B,CAAP;AAAgD,GAApD,CAAoD,MAAK;AAAC,UAAMzB,CAAC,GAAC,IAAIe,KAAJ,EAAR;AAAkB,WAAOf,CAAC,CAAC0B,IAAF,GAAO,YAAP,EAAoB1B,CAA3B;AAA6B;AAAC;;AAAA,SAAOK,CAAC,IAAIsB,cAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../core/has.js\";import{isSome as r}from\"../core/maybe.js\";import{isAborted as o}from\"../core/promiseUtils.js\";function t(t,i,s=!1,c){return new Promise(((d,a)=>{if(o(c))return void a(n());let m=()=>{v(),a(new Error(`Unable to load ${i}`))},l=()=>{const e=t;v(),d(e)},u=()=>{if(!t)return;const e=t;v(),e.src=\"\",a(n())};const v=()=>{e(\"esri-image-decode\")||(t.removeEventListener(\"error\",m),t.removeEventListener(\"load\",l)),m=null,l=null,t=null,r(c)&&c.removeEventListener(\"abort\",u),u=null,s&&URL.revokeObjectURL(i)};r(c)&&c.addEventListener(\"abort\",u),e(\"esri-image-decode\")?t.decode().then(l,m):(t.addEventListener(\"error\",m),t.addEventListener(\"load\",l))}))}function n(){try{return new DOMException(\"Aborted\",\"AbortError\")}catch{const e=new Error;return e.name=\"AbortError\",e}}export{t as loadImageAsync};\n"]},"metadata":{},"sourceType":"module"}