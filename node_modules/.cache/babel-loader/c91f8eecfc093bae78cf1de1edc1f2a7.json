{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../../../core/Logger.js\";\nimport { isSome as r } from \"../../../core/maybe.js\";\nimport { f as e } from \"../../../chunks/mat3.js\";\nimport { c as o } from \"../../../chunks/mat3f64.js\";\nimport { c as i } from \"../../../chunks/mat4f64.js\";\nimport { b as n, t as s } from \"../../../chunks/vec3.js\";\nimport { c as a } from \"../../../chunks/vec3f64.js\";\nimport { computeLinearTransformation as f } from \"../../projection.js\";\nimport { getSphericalPCPF as m } from \"../../projectionEllipsoid.js\";\nimport { isGeographicMesh as c } from \"./geographicUtils.js\";\nimport { projectToPCPF as p, projectNormalToPCPF as g, projectTangentToPCPF as l, projectFromPCPF as u, projectNormalFromPCPF as h, projectTangentFromPCPF as j } from \"./projection.js\";\nconst v = t.getLogger(\"esri.geometry.support.meshUtils.offset\");\n\nfunction x(t, e, o) {\n  if (t.vertexAttributes && t.vertexAttributes.position) if (r(t.transform)) null != (null == o ? void 0 : o.geographic) && o.geographic !== t.transform.geographic && v.warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`), A(t.transform, e);else {\n    c(t.spatialReference, o) ? b(t, e) : y(t, e);\n  }\n}\n\nfunction A(t, r) {\n  const e = t.origin;\n  t.origin = n(a(), e, r);\n}\n\nfunction b(t, o) {\n  const i = t.spatialReference,\n        n = t.vertexAttributes.position,\n        a = t.vertexAttributes.normal,\n        c = t.vertexAttributes.tangent,\n        v = new Float64Array(n.length),\n        x = r(a) ? new Float32Array(a.length) : null,\n        A = r(c) ? new Float32Array(c.length) : null,\n        b = t.extent.center,\n        y = k;\n  f(i, [b.x, b.y, b.z], w, m(i)), e(F, w), s(y, o, F), p(n, i, v), r(a) && g(a, n, v, i, x), r(c) && l(c, n, v, i, A), d(v, y), u(v, n, i), r(a) && h(x, n, v, i, a), r(c) && j(A, n, v, i, c), t.vertexAttributesChanged();\n}\n\nfunction y(t, r) {\n  d(t.vertexAttributes.position, r), t.vertexAttributesChanged();\n}\n\nfunction d(t, r) {\n  if (t) for (let e = 0; e < t.length; e += 3) for (let o = 0; o < 3; o++) t[e + o] += r[o];\n}\n\nconst k = a(),\n      w = i(),\n      F = o();\nexport { x as offset };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/support/meshUtils/offset.js"],"names":["t","isSome","r","f","e","c","o","i","b","n","s","a","computeLinearTransformation","getSphericalPCPF","m","isGeographicMesh","projectToPCPF","p","projectNormalToPCPF","g","projectTangentToPCPF","l","projectFromPCPF","u","projectNormalFromPCPF","h","projectTangentFromPCPF","j","v","getLogger","x","vertexAttributes","position","transform","geographic","warn","A","spatialReference","y","origin","normal","tangent","Float64Array","length","Float32Array","extent","center","k","z","w","F","d","vertexAttributesChanged","offset"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Logger.js\";import{isSome as r}from\"../../../core/maybe.js\";import{f as e}from\"../../../chunks/mat3.js\";import{c as o}from\"../../../chunks/mat3f64.js\";import{c as i}from\"../../../chunks/mat4f64.js\";import{b as n,t as s}from\"../../../chunks/vec3.js\";import{c as a}from\"../../../chunks/vec3f64.js\";import{computeLinearTransformation as f}from\"../../projection.js\";import{getSphericalPCPF as m}from\"../../projectionEllipsoid.js\";import{isGeographicMesh as c}from\"./geographicUtils.js\";import{projectToPCPF as p,projectNormalToPCPF as g,projectTangentToPCPF as l,projectFromPCPF as u,projectNormalFromPCPF as h,projectTangentFromPCPF as j}from\"./projection.js\";const v=t.getLogger(\"esri.geometry.support.meshUtils.offset\");function x(t,e,o){if(t.vertexAttributes&&t.vertexAttributes.position)if(r(t.transform))null!=(null==o?void 0:o.geographic)&&o.geographic!==t.transform.geographic&&v.warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),A(t.transform,e);else{c(t.spatialReference,o)?b(t,e):y(t,e)}}function A(t,r){const e=t.origin;t.origin=n(a(),e,r)}function b(t,o){const i=t.spatialReference,n=t.vertexAttributes.position,a=t.vertexAttributes.normal,c=t.vertexAttributes.tangent,v=new Float64Array(n.length),x=r(a)?new Float32Array(a.length):null,A=r(c)?new Float32Array(c.length):null,b=t.extent.center,y=k;f(i,[b.x,b.y,b.z],w,m(i)),e(F,w),s(y,o,F),p(n,i,v),r(a)&&g(a,n,v,i,x),r(c)&&l(c,n,v,i,A),d(v,y),u(v,n,i),r(a)&&h(x,n,v,i,a),r(c)&&j(A,n,v,i,c),t.vertexAttributesChanged()}function y(t,r){d(t.vertexAttributes.position,r),t.vertexAttributesChanged()}function d(t,r){if(t)for(let e=0;e<t.length;e+=3)for(let o=0;o<3;o++)t[e+o]+=r[o]}const k=a(),w=i(),F=o();export{x as offset};\n"]},"metadata":{},"sourceType":"module"}