{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"./clock.js\";\nimport n from \"./Error.js\";\nimport { once as e } from \"./events.js\";\nimport r from \"./Logger.js\";\nimport { isSome as o, isNone as i, removeMaybe as u, assumeNonNull as c } from \"./maybe.js\";\n\nfunction s(t) {\n  return Promise.all(t);\n}\n\nfunction f(t, n) {\n  const e = t.slice();\n  return Promise.all(t.map((t, e) => n(t, e))).then(t => e.filter((n, e) => t[e]));\n}\n\nfunction l(t) {\n  return new Promise((n, e) => {\n    try {\n      t(n, e);\n    } catch (r) {\n      Promise.resolve().then(() => e(r));\n    }\n  });\n}\n\nfunction m(t = \"Aborted\") {\n  return new n(\"AbortError\", t);\n}\n\nfunction h() {\n  return new AbortController();\n}\n\nfunction a(t, n = \"Aborted\") {\n  if (b(t)) throw m(n);\n}\n\nfunction p(t) {\n  return o(t) ? \"aborted\" in t ? t : t.signal : t;\n}\n\nfunction b(t) {\n  const n = p(t);\n  return o(n) && n.aborted;\n}\n\nfunction w(t) {\n  if (g(t)) throw t;\n}\n\nfunction j(t) {\n  if (!g(t)) throw t;\n}\n\nfunction v(t, n) {\n  const r = p(t);\n\n  if (!i(r)) {\n    if (!r.aborted) return e(r, \"abort\", () => n());\n    n();\n  }\n}\n\nfunction P(t, n) {\n  const r = p(t);\n  if (!i(r)) return a(r), e(r, \"abort\", () => n(m()));\n}\n\nfunction d(t, n) {\n  const e = p(n);\n  return i(e) ? t : new Promise((e, r) => {\n    let o = v(n, () => r(m()));\n\n    const i = () => o = u(o);\n\n    t.then(i, i), t.then(e, r);\n  });\n}\n\nfunction g(t) {\n  return t && \"AbortError\" === t.name;\n}\n\nfunction y(t) {\n  return t.catch(t => {\n    if (!g(t)) throw t;\n  });\n}\n\nfunction T(t, n = r.getLogger(\"esri\")) {\n  return t.catch(t => {\n    g(t) || n.error(t);\n  });\n}\n\nfunction E() {\n  let t = null;\n  const n = new Promise((n, e) => {\n    t = {\n      promise: void 0,\n      resolve: n,\n      reject: e\n    };\n  });\n  return t.promise = n, t;\n}\n\nfunction A(t) {\n  if (!t) return;\n\n  if (\"function\" != typeof t.forEach) {\n    const n = Object.keys(t);\n    return A(n.map(n => t[n])).then(t => {\n      const e = {};\n      return n.forEach((n, r) => e[n] = t[r]), e;\n    });\n  }\n\n  const n = t;\n  return l(t => {\n    const e = [];\n    let r = n.length;\n    0 === r && t(e), n.forEach(n => {\n      const o = {\n        promise: n || Promise.resolve(n)\n      };\n      e.push(o), o.promise.then(t => {\n        o.value = t;\n      }).catch(t => {\n        o.error = t;\n      }).then(() => {\n        --r, 0 === r && t(e);\n      });\n    });\n  });\n}\n\nfunction k(t) {\n  return A(t).then(t => t.filter(t => !!t.value).map(t => t.value));\n}\n\nfunction L(t) {\n  return Promise.reject(t);\n}\n\nfunction x(t) {\n  return Promise.resolve(t);\n}\n\nfunction C(t, n, e) {\n  const r = h();\n  return v(e, () => r.abort()), new Promise((e, o) => {\n    let i = setTimeout(() => {\n      i = 0, e(n);\n    }, t);\n    v(r, () => {\n      i && (clearTimeout(i), o(m()));\n    });\n  });\n}\n\nfunction O(t, e, r, o) {\n  const i = r && \"abort\" in r ? r : null;\n  null != o || i || (o = r);\n  let u = setTimeout(() => {\n    u = 0, i && i.abort();\n  }, e);\n\n  const c = () => {\n    throw o || new n(\"promiseUtils:timeout\", \"The wrapped promise did not resolve within \" + e + \" ms\");\n  };\n\n  return t.then(t => {\n    if (0 === u) throw c();\n    return clearTimeout(u), t;\n  }, t => {\n    throw clearTimeout(u), 0 === u ? c() : t;\n  });\n}\n\nfunction U(t) {\n  return t && \"function\" == typeof t.then;\n}\n\nfunction q(t) {\n  return z(t) ? t : Promise.resolve(t);\n}\n\nfunction z(t) {\n  return t && \"object\" == typeof t && \"then\" in t && \"function\" == typeof t.then;\n}\n\nfunction B(t, n = -1) {\n  let e,\n      r,\n      o,\n      i,\n      u = null;\n\n  const s = (...f) => {\n    if (e) {\n      r = f, i && i.reject(m()), i = E();\n      const t = c(i.promise);\n\n      if (u) {\n        const t = u;\n        u = null, t.abort();\n      }\n\n      return t;\n    }\n\n    if (o = i || E(), i = null, n > 0) {\n      const r = h();\n      e = q(t(...f, r.signal));\n      const o = e;\n      C(n).then(() => {\n        e === o && (i ? r.abort() : u = r);\n      });\n    } else e = 1, e = q(t(...f));\n\n    const l = () => {\n      const t = r;\n      r = o = e = u = null, null != t && s(...t);\n    },\n          a = e,\n          p = o;\n\n    return a.then(l, l), a.then(p.resolve, p.reject), c(p.promise);\n  };\n\n  return s;\n}\n\nfunction D() {\n  let n, e;\n\n  const r = new Promise((t, r) => {\n    n = t, e = r;\n  }),\n        o = t => {\n    n(t);\n  };\n\n  return o.resolve = t => n(t), o.reject = t => e(t), o.timeout = (n, e) => t.setTimeout(() => o.reject(e), n), o.promise = r, o;\n}\n\nfunction F(t, n) {\n  return t.then(n, n);\n}\n\nfunction G(t) {\n  let n = h();\n  const e = t(n.signal);\n  let r = {\n    promise: e,\n    finished: !1,\n    abort: () => {\n      n && (n.abort(), n = null);\n    }\n  };\n\n  const o = () => {\n    r && (r.finished = !0, r = null), n = null;\n  };\n\n  return e.then(o, o), r;\n}\n\nexport { C as after, s as all, F as always, l as create, h as createAbortController, m as createAbortError, E as createDeferred, D as createResolver, G as createTask, B as debounce, A as eachAlways, k as eachAlwaysValues, f as filter, y as ignoreAbortErrors, g as isAbortError, b as isAborted, z as isPromise, U as isPromiseLike, T as logOnError, v as onAbort, P as onAbortOrThrow, L as reject, x as resolve, w as throwIfAbortError, a as throwIfAborted, j as throwIfNotAbortError, O as timeout, q as when, d as whenOrAbort };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/core/promiseUtils.js"],"names":["t","n","once","e","r","isSome","o","isNone","i","removeMaybe","u","assumeNonNull","c","s","Promise","all","f","slice","map","then","filter","l","resolve","m","h","AbortController","a","b","p","signal","aborted","w","g","j","v","P","d","name","y","catch","T","getLogger","error","E","promise","reject","A","forEach","Object","keys","length","push","value","k","L","x","C","abort","setTimeout","clearTimeout","O","U","q","z","B","D","timeout","F","G","finished","after","always","create","createAbortController","createAbortError","createDeferred","createResolver","createTask","debounce","eachAlways","eachAlwaysValues","ignoreAbortErrors","isAbortError","isAborted","isPromise","isPromiseLike","logOnError","onAbort","onAbortOrThrow","throwIfAbortError","throwIfAborted","throwIfNotAbortError","when","whenOrAbort"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"./clock.js\";import n from\"./Error.js\";import{once as e}from\"./events.js\";import r from\"./Logger.js\";import{isSome as o,isNone as i,removeMaybe as u,assumeNonNull as c}from\"./maybe.js\";function s(t){return Promise.all(t)}function f(t,n){const e=t.slice();return Promise.all(t.map(((t,e)=>n(t,e)))).then((t=>e.filter(((n,e)=>t[e]))))}function l(t){return new Promise(((n,e)=>{try{t(n,e)}catch(r){Promise.resolve().then((()=>e(r)))}}))}function m(t=\"Aborted\"){return new n(\"AbortError\",t)}function h(){return new AbortController}function a(t,n=\"Aborted\"){if(b(t))throw m(n)}function p(t){return o(t)?\"aborted\"in t?t:t.signal:t}function b(t){const n=p(t);return o(n)&&n.aborted}function w(t){if(g(t))throw t}function j(t){if(!g(t))throw t}function v(t,n){const r=p(t);if(!i(r)){if(!r.aborted)return e(r,\"abort\",(()=>n()));n()}}function P(t,n){const r=p(t);if(!i(r))return a(r),e(r,\"abort\",(()=>n(m())))}function d(t,n){const e=p(n);return i(e)?t:new Promise(((e,r)=>{let o=v(n,(()=>r(m())));const i=()=>o=u(o);t.then(i,i),t.then(e,r)}))}function g(t){return t&&\"AbortError\"===t.name}function y(t){return t.catch((t=>{if(!g(t))throw t}))}function T(t,n=r.getLogger(\"esri\")){return t.catch((t=>{g(t)||n.error(t)}))}function E(){let t=null;const n=new Promise(((n,e)=>{t={promise:void 0,resolve:n,reject:e}}));return t.promise=n,t}function A(t){if(!t)return;if(\"function\"!=typeof t.forEach){const n=Object.keys(t);return A(n.map((n=>t[n]))).then((t=>{const e={};return n.forEach(((n,r)=>e[n]=t[r])),e}))}const n=t;return l((t=>{const e=[];let r=n.length;0===r&&t(e),n.forEach((n=>{const o={promise:n||Promise.resolve(n)};e.push(o),o.promise.then((t=>{o.value=t})).catch((t=>{o.error=t})).then((()=>{--r,0===r&&t(e)}))}))}))}function k(t){return A(t).then((t=>t.filter((t=>!!t.value)).map((t=>t.value))))}function L(t){return Promise.reject(t)}function x(t){return Promise.resolve(t)}function C(t,n,e){const r=h();return v(e,(()=>r.abort())),new Promise(((e,o)=>{let i=setTimeout((()=>{i=0,e(n)}),t);v(r,(()=>{i&&(clearTimeout(i),o(m()))}))}))}function O(t,e,r,o){const i=r&&\"abort\"in r?r:null;null!=o||i||(o=r);let u=setTimeout((()=>{u=0,i&&i.abort()}),e);const c=()=>{throw o||new n(\"promiseUtils:timeout\",\"The wrapped promise did not resolve within \"+e+\" ms\")};return t.then((t=>{if(0===u)throw c();return clearTimeout(u),t}),(t=>{throw clearTimeout(u),0===u?c():t}))}function U(t){return t&&\"function\"==typeof t.then}function q(t){return z(t)?t:Promise.resolve(t)}function z(t){return t&&\"object\"==typeof t&&\"then\"in t&&\"function\"==typeof t.then}function B(t,n=-1){let e,r,o,i,u=null;const s=(...f)=>{if(e){r=f,i&&i.reject(m()),i=E();const t=c(i.promise);if(u){const t=u;u=null,t.abort()}return t}if(o=i||E(),i=null,n>0){const r=h();e=q(t(...f,r.signal));const o=e;C(n).then((()=>{e===o&&(i?r.abort():u=r)}))}else e=1,e=q(t(...f));const l=()=>{const t=r;r=o=e=u=null,null!=t&&s(...t)},a=e,p=o;return a.then(l,l),a.then(p.resolve,p.reject),c(p.promise)};return s}function D(){let n,e;const r=new Promise(((t,r)=>{n=t,e=r})),o=t=>{n(t)};return o.resolve=t=>n(t),o.reject=t=>e(t),o.timeout=(n,e)=>t.setTimeout((()=>o.reject(e)),n),o.promise=r,o}function F(t,n){return t.then(n,n)}function G(t){let n=h();const e=t(n.signal);let r={promise:e,finished:!1,abort:()=>{n&&(n.abort(),n=null)}};const o=()=>{r&&(r.finished=!0,r=null),n=null};return e.then(o,o),r}export{C as after,s as all,F as always,l as create,h as createAbortController,m as createAbortError,E as createDeferred,D as createResolver,G as createTask,B as debounce,A as eachAlways,k as eachAlwaysValues,f as filter,y as ignoreAbortErrors,g as isAbortError,b as isAborted,z as isPromise,U as isPromiseLike,T as logOnError,v as onAbort,P as onAbortOrThrow,L as reject,x as resolve,w as throwIfAbortError,a as throwIfAborted,j as throwIfNotAbortError,O as timeout,q as when,d as whenOrAbort};\n"]},"metadata":{},"sourceType":"module"}