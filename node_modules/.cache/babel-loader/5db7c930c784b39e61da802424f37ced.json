{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { result as i } from \"../../../core/asyncUtils.js\";\nimport r from \"../../../core/Collection.js\";\nimport \"../../../core/has.js\";\nimport s from \"../../../core/Error.js\";\nimport a from \"../../../core/Handles.js\";\nimport { clone as o } from \"../../../core/lang.js\";\nimport n from \"../../../core/Logger.js\";\nimport { isSome as l, destroyMaybe as c, removeMaybe as h, isNone as u } from \"../../../core/maybe.js\";\nimport { EsriPromiseMixin as d } from \"../../../core/Promise.js\";\nimport { createAbortController as m, isAbortError as p, eachAlways as f } from \"../../../core/promiseUtils.js\";\nimport { whenOnce as y, init as g } from \"../../../core/watchUtils.js\";\nimport { property as x } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as F } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { isHostedAgolService as v } from \"../../support/arcgisLayerUrl.js\";\nimport { projectGeometry as T } from \"../../../portal/support/geometryServiceUtils.js\";\nimport E from \"../../../rest/support/StatisticDefinition.js\";\nimport { FeatureTileFetcher3D as w } from \"../../../views/3d/layers/support/FeatureTileFetcher3D.js\";\nimport { FeatureTileFetcher3DDebugger as C } from \"../../../views/3d/layers/support/FeatureTileFetcher3DDebugger.js\";\nimport D from \"../../../views/3d/support/debugFlags.js\";\nimport { WatchUpdatingTracking as b } from \"../../../views/support/WatchUpdatingTracking.js\";\nconst S = n.getLogger(\"esri.layers.graphics.controllers.FeatureTileController3D\");\n\nlet _ = class extends d(t) {\n  constructor(e) {\n    super(e), this.type = \"feature-tile-3d\", this.watchUpdatingTracking = new b(), this.serviceDataExtent = null, this.serviceDataCount = A.NO_SERVICE_DATA_COUNT, this.vertexLimitExceeded = !1, this.displayFeatureLimit = null, this.suspended = !1, this.tileFetcher = null, this.handles = new a(), this.fetchDataInfoPromise = null, this.fetchDataInfoAbortController = null, this.lifeCycleAbortController = m();\n  }\n\n  set extent(e) {\n    if (e && !e.spatialReference.equals(this.layerView.view.spatialReference)) return void S.error(\"#extent=\", \"extent needs to be in the same spatial reference as the view\");\n\n    const t = this._get(\"extent\");\n\n    if (t === e) return;\n    if (t && e && t.equals(e)) return;\n    const i = e ? e.clone() : null;\n\n    this._set(\"extent\", i);\n  }\n\n  get updating() {\n    return !!(l(this.tileFetcher) && this.tileFetcher.updating || null != this.fetchDataInfoPromise || \"tiles\" === this.mode && this.layerView.view.featureTiles && this.layerView.view.featureTiles.updating || this.watchUpdatingTracking && this.watchUpdatingTracking.updating);\n  }\n\n  get updatingTotal() {\n    return this.updating && l(this.tileFetcher) ? this.tileFetcher.updatingTotal : 0;\n  }\n\n  get updatingRemaining() {\n    return this.updating && l(this.tileFetcher) ? this.tileFetcher.updatingRemaining : 0;\n  }\n\n  get expectedFeatureDiff() {\n    return this.updating && l(this.tileFetcher) ? this.tileFetcher.expectedFeatureDiff : 0;\n  }\n\n  get memoryForUnusedFeatures() {\n    return l(this.tileFetcher) ? this.tileFetcher.memoryForUnusedFeatures : 0;\n  }\n\n  get maximumNumberOfFeaturesExceeded() {\n    return !(!l(this.tileFetcher) || !this.tileFetcher.maximumNumberOfFeaturesExceeded);\n  }\n\n  get maximumNumberOfFeatures() {\n    return l(this.displayFeatureLimit) ? this.displayFeatureLimit.maximumNumberOfFeatures : 0;\n  }\n\n  set maximumNumberOfFeatures(e) {\n    e !== this.maximumNumberOfFeatures && (null == e ? this._clearOverride(\"maximumNumberOfFeatures\") : this._override(\"maximumNumberOfFeatures\", e));\n  }\n\n  get hasMaximumNumberOfFeaturesOverride() {\n    return this._isOverridden(\"maximumNumberOfFeatures\");\n  }\n\n  get mode() {\n    const e = this.layerView.layer;\n    if (\"feature\" === e.type && l(e.infoFor3D)) return \"snapshot\";\n    if (this.serviceDataCount === A.NO_SERVICE_DATA_COUNT || this.vertexLimitExceeded) return \"tiles\";\n    const t = this.layerView.view,\n          i = t && t.featureTiles,\n          r = i && i.tilingScheme;\n\n    if (e && e.minScale && this.serviceDataExtent && r) {\n      const t = this.approximateExtentSizeAtScale(e.minScale, r);\n      if ((this.serviceDataExtent.width / t + this.serviceDataExtent.height / t) / 2 > A.MAX_SNAPSHOT_MIN_SCALE_FACTOR) return \"tiles\";\n    }\n\n    return !this.maximumNumberOfFeatures || this.serviceDataCount <= this.maximumNumberOfFeatures ? \"snapshot\" : \"tiles\";\n  }\n\n  get maxTotalSnapshotVertices() {\n    const e = this._get(\"maxTotalSnapshotVertices\") || 0,\n          t = \"snapshot\" === this.mode && l(this.tileFetcher) && this.tileFetcher.totalVertices || 0;\n    return Math.max(e, t);\n  }\n\n  approximateExtentSizeAtScale(e, t) {\n    const i = this.layerView.view,\n          r = Math.ceil((i.width / t.pixelSize + i.height / t.pixelSize) / 2),\n          s = t.levels[0];\n    return r * ((s.tileSize[0] / (s.scale / e) + s.tileSize[1] / (s.scale / e)) / 2);\n  }\n\n  get tileDescriptors() {\n    return \"snapshot\" === this.mode ? new r([{\n      id: \"dummy-tile-full-extent\",\n      lij: [0, 0, 0]\n    }]) : this.layerView.view.featureTiles ? this.layerView.view.featureTiles.tiles : new r();\n  }\n\n  get test() {\n    return {\n      fetchDataInfoPromise: this.fetchDataInfoPromise,\n      tileFetcher: this.tileFetcher\n    };\n  }\n\n  initialize() {\n    this.watchUpdatingTracking.add(this, \"vertexLimitInfo\", () => this.watchUpdatingTracking.addPromise(this.updateVertexLimitExceeded(null, this.lifeCycleAbortController.signal))), this.watchUpdatingTracking.add(this, \"mode\", () => this.modeChanged(), 2), this.addResolvingPromise(Promise.resolve().then(() => this.verifyCapabilities()).then(() => this.watchUpdatingTracking.addPromise(this.fetchServiceDataInfo())).then(() => this.initializeTileFetcher()));\n  }\n\n  verifyCapabilities() {\n    const e = this.layerView.layer;\n    if (!e.get(\"capabilities.operations.supportsQuery\")) throw new s(\"graphicscontroller:query-capability-required\", \"Service requires query capabilities to be used as a feature layer\", {\n      layer: e\n    });\n  }\n\n  destroy() {\n    this.cancelFetchServiceDataInfo(), this.tileFetcher = c(this.tileFetcher), this.handles = c(this.handles), this.tilesHandle = h(this.tilesHandle), this.lifeCycleAbortController && (this.lifeCycleAbortController.abort(), this.lifeCycleAbortController = null), this.watchUpdatingTracking.destroy(), this._set(\"watchUpdatingTracking\", null);\n  }\n\n  suspend() {\n    this.suspended || (this.suspended = !0, l(this.tileFetcher) && this.tileFetcher.suspend());\n  }\n\n  resume() {\n    this.suspended && (this.suspended = !1, l(this.tileFetcher) && this.tileFetcher.resume());\n  }\n\n  restart() {\n    const e = () => {\n      l(this.tileFetcher) && this.tileFetcher.restart();\n    };\n\n    this.watchUpdatingTracking.addPromise(this.fetchServiceDataInfo().then(e, e));\n  }\n\n  refetch() {\n    const e = () => {\n      l(this.tileFetcher) && this.tileFetcher.refetch();\n    };\n\n    this.watchUpdatingTracking.addPromise(this.fetchServiceDataInfo().then(e, e));\n  }\n\n  initializeTileFetcher() {\n    const e = this.layerView.view;\n    if (!e) return;\n    const t = y(e.featureTiles, \"tilingScheme\", this.lifeCycleAbortController.signal);\n    this.watchUpdatingTracking.addPromise(t), t.then(() => {\n      const {\n        layerView: t,\n        tileDescriptors: i\n      } = this,\n            r = t.layer,\n            s = new w({\n        context: this.context,\n        filterExtent: this.extent,\n        tileDescriptors: i,\n        features: this.graphics\n      });\n      this.tileFetcher = s, this.suspended ? this.tileFetcher.suspend() : this.tileFetcher.resume();\n      const a = this.layerView.view.resourceController;\n      a && (this.handles.add(a.memoryController.events.on(\"quality-changed\", e => {\n        s.memoryFactor = e;\n      })), this.tileFetcher.memoryFactor = a.memoryController.memoryFactor);\n      const o = \"polygon\" === this.context.geometryType ? \"polygonLodFactor\" : \"polyline\" === this.context.geometryType ? \"polylineLodFactor\" : null;\n      o && this.handles.add(g(this.layerView.view, \"qualitySettings.graphics3D.\" + o, e => {\n        s.lodFactor = e || 1;\n      }));\n\n      const n = e => {\n        s.maximumNumberOfFeatures = e, s.useTileCount = this.serviceDataCount > e;\n      },\n            l = e => s.useTileCount = e > this.maximumNumberOfFeatures;\n\n      this.watchUpdatingTracking.add(r, \"createQueryVersion\", () => this.dataFilterChanged()), this.watchUpdatingTracking.add(t, \"availableFields\", (e, t) => this.availableFieldsChanged(t, e)), this.watchUpdatingTracking.add(t, \"requiredFields\", (e, t) => this.requiredFieldsChanged(t, e)), this.handles.add([r.on(\"apply-edits\", e => this.applyEdits(e)), this.watch(\"extent\", e => s.filterExtent = e, !0), this.watch(\"tileDescriptors\", e => s.tileDescriptors = e, !0), g(this, \"maximumNumberOfFeatures\", n, !0), g(this, \"serviceDataCount\", l, !0), g(D, \"FEATURE_TILE_FETCH_SHOW_TILES\", t => {\n        t && s && !s.debugger ? (s.debugger = new C(s, e.featureTiles.tilingScheme.toTileInfo(), e), s.debugger.update()) : !t && this.tileFetcher && s.debugger && (s.debugger.destroy(), s.debugger = null);\n      })]), this.supportsExceedsLimitQuery || this.watchUpdatingTracking.add(this, \"maxTotalSnapshotVertices\", () => this.watchUpdatingTracking.addPromise(this.updateVertexLimitExceeded(null, this.lifeCycleAbortController.signal)));\n    }).catch(() => {});\n  }\n\n  modeChanged() {\n    switch (this.mode) {\n      case \"tiles\":\n        this.tilesHandle || (this.tilesHandle = this.layerView.view.featureTiles.addClient());\n        break;\n\n      default:\n        S.warn(\"Unhandled feature layer mode \" + this.mode);\n\n      case \"snapshot\":\n        l(this.tilesHandle) && (this.tilesHandle.remove(), this.tilesHandle = null);\n    }\n  }\n\n  dataFilterChanged() {\n    this._set(\"maxTotalSnapshotVertices\", 0), this.notifyChange(\"maxTotalSnapshotVertices\"), this.refetch();\n  }\n\n  applyEdits(e) {\n    u(this.tileFetcher) || this.tileFetcher.applyEdits(e).then(e => {\n      e && (e.deletedFeatures.length || e.updatedFeatures.length || e.addedFeatures.length) && this.watchUpdatingTracking.addPromise(this.updateServiceDataExtent(this.lifeCycleAbortController.signal));\n    }).catch(e => {\n      if (!p(e)) throw e;\n    });\n  }\n\n  availableFieldsChanged(e, t) {\n    l(this.tileFetcher) && N(this.tileFetcher.availableFields, t) && this.refetch();\n  }\n\n  requiredFieldsChanged(e, t) {\n    l(this.tileFetcher) && N(this.tileFetcher.availableFields, t) && this.restart();\n  }\n\n  createVertexLimitExceededQuery(e) {\n    const t = this.layerView.layer,\n          i = t.createQuery();\n    return i.outStatistics = [new E({\n      statisticType: \"exceedslimit\",\n      maxVertexCount: e,\n      outStatisticFieldName: \"exceedslimit\",\n      maxPointCount: 1e8,\n      maxRecordCount: 1e8\n    })], t.capabilities.query.supportsCacheHint && (i.cacheHint = !0), i;\n  }\n\n  createDataInfoQuery() {\n    const e = this.layerView.layer,\n          t = e.createQuery();\n    return t.outSpatialReference = this.layerView.view.spatialReference, e.capabilities.query.supportsCacheHint && (t.cacheHint = !0), t;\n  }\n\n  fullExtentIsAccurate() {\n    const e = this.layerView.layer;\n    if (e.definitionExpression) return !1;\n\n    switch (e.type) {\n      case \"feature\":\n        return v(e.url);\n\n      case \"csv\":\n      case \"geojson\":\n      case \"ogc-feature\":\n      case \"wfs\":\n        return !0;\n\n      default:\n        return;\n    }\n  }\n\n  async updateServiceDataExtent(e) {\n    try {\n      await this.tryUpdateServiceDataExtent(e);\n    } catch (t) {\n      p(t) || this._set(\"serviceDataExtent\", o(this.layerView.fullExtentInLocalViewSpatialReference));\n    }\n  }\n\n  async tryUpdateServiceDataExtent(e) {\n    const t = this.layerView,\n          i = t.layer,\n          r = i.capabilities.query.supportsExtent,\n          s = o(t.fullExtentInLocalViewSpatialReference),\n          a = i.fullExtent,\n          n = this.fullExtentIsAccurate(),\n          l = this.serviceDataCount;\n\n    if (r && l <= A.MAX_FEATURE_COUNT_FOR_EXTENT && (!s || !n) && \"queryExtent\" in i) {\n      const t = this.createDataInfoQuery(),\n            r = await i.queryExtent(t, {\n        timeout: A.QUERY_EXTENT_TIMEOUT,\n        signal: e\n      });\n\n      this._set(\"serviceDataExtent\", r.extent);\n    } else if (s) this._set(\"serviceDataExtent\", s);else if (a) {\n      const r = \"portalItem\" in i ? i.portalItem : null,\n            s = await T(a, t.view.spatialReference, r, e);\n\n      this._set(\"serviceDataExtent\", s);\n    } else this._set(\"serviceDataExtent\", null);\n  }\n\n  async updateServiceDataCount(e) {\n    const t = this.layerView.layer;\n    if (!(\"queryFeatureCount\" in t)) return void this._set(\"serviceDataCount\", A.NO_SERVICE_DATA_COUNT);\n    const r = await i(t.queryFeatureCount(this.createDataInfoQuery(), {\n      timeout: A.QUERY_STATISTICS_TIMEOUT,\n      signal: e\n    }));\n    if (!0 === r.ok) this._set(\"serviceDataCount\", r.value);else {\n      if (p(r.error)) throw r.error;\n\n      this._set(\"serviceDataCount\", A.NO_SERVICE_DATA_COUNT);\n    }\n  }\n\n  get vertexLimitInfo() {\n    if (u(this.displayFeatureLimit) || u(this.displayFeatureLimit.averageSymbolComplexity)) return null;\n\n    const {\n      averageSymbolComplexity: e,\n      maximumTotalNumberOfPrimitives: t\n    } = this.displayFeatureLimit,\n          {\n      primitivesPerCoordinate: i,\n      primitivesPerFeature: r\n    } = e,\n          s = this._get(\"vertexLimitInfo\");\n\n    return u(s) || s.maximumTotalNumberOfPrimitives !== t || s.primitivesPerCoordinate !== i || s.primitivesPerFeature !== r ? {\n      primitivesPerCoordinate: i,\n      primitivesPerFeature: r,\n      maximumTotalNumberOfPrimitives: t\n    } : s;\n  }\n\n  get supportsExceedsLimitQuery() {\n    const e = this.layerView.layer;\n    return e.capabilities && e.capabilities.operations && e.capabilities.operations.supportsExceedsLimitStatistics;\n  }\n\n  get minimumNumberOfVerticesForGeometry() {\n    switch (this.layerView.layer.geometryType) {\n      case \"point\":\n      case \"multipoint\":\n        return 1;\n\n      case \"polygon\":\n        return 4;\n\n      case \"polyline\":\n        return 2;\n\n      case \"multipatch\":\n      case \"mesh\":\n        return 3;\n\n      default:\n        return 0;\n    }\n  }\n\n  async updateVertexLimitExceeded(e, t) {\n    const r = this.vertexLimitInfo;\n    if (u(r)) return void this._set(\"vertexLimitExceeded\", !1);\n    const s = r.primitivesPerFeature <= 0,\n          a = this.minimumNumberOfVerticesForGeometry > 1;\n    if (!s && !a) return void this._set(\"vertexLimitExceeded\", !1);\n    const {\n      primitivesPerFeature: o,\n      primitivesPerCoordinate: n,\n      maximumTotalNumberOfPrimitives: c\n    } = r;\n    let h;\n    0 !== o && l(e) && (await e);\n    const d = this.serviceDataCount,\n          m = d !== A.NO_SERVICE_DATA_COUNT;\n    if (h = m ? Math.ceil((c - d * o) / (n || 1)) : Math.ceil(c / (n || 1)), a && (h = Math.min(h, U)), m && this.minimumNumberOfVerticesForGeometry * d > h) return void this._set(\"vertexLimitExceeded\", !0);\n    if (!this.supportsExceedsLimitQuery) return void this._set(\"vertexLimitExceeded\", this.maxTotalSnapshotVertices > h);\n    const f = await i(this.layerView.layer.queryFeatures(this.createVertexLimitExceededQuery(h), {\n      timeout: A.QUERY_STATISTICS_TIMEOUT,\n      signal: t\n    }));\n\n    if (!1 === f.ok) {\n      if (p(f.error)) throw f.error;\n      return void this._set(\"vertexLimitExceeded\", !1);\n    }\n\n    const y = f.value.features[0];\n    y && y.attributes ? this._set(\"vertexLimitExceeded\", !!y.attributes.exceedslimit) : this._set(\"vertexLimitExceeded\", !1);\n  }\n\n  async fetchServiceDataInfo() {\n    this.cancelFetchServiceDataInfo();\n    let e = m();\n    const t = e.signal,\n          i = this.updateServiceDataCount(t),\n          r = f([i, this.updateVertexLimitExceeded(i, t)]),\n          s = r.then(() => this.updateServiceDataExtent(t)).catch(e => {\n      p(e) || S.error(\"#fetchServiceDataInfo()\", e);\n    }).then(() => {\n      s === this.fetchDataInfoPromise && (this.fetchDataInfoPromise = null, this.fetchDataInfoAbortController = null), e = null;\n    });\n    return e && (this.fetchDataInfoPromise = s), this.fetchDataInfoAbortController = e, r.then(() => {}, () => {});\n  }\n\n  cancelFetchServiceDataInfo() {\n    const e = this.fetchDataInfoAbortController;\n    e && (this.fetchDataInfoAbortController = null, this.fetchDataInfoPromise = null, e.abort());\n  }\n\n  get debug() {\n    return {\n      storedFeatures: l(this.tileFetcher) ? this.tileFetcher.storedFeatures : 0,\n      totalFeatures: l(this.tileFetcher) ? this.tileFetcher.totalFeatures : 0,\n      totalVertices: l(this.tileFetcher) ? this.tileFetcher.totalVertices : 0\n    };\n  }\n\n};\n\ne([x({\n  readOnly: !0\n})], _.prototype, \"type\", void 0), e([x({\n  constructOnly: !0\n})], _.prototype, \"graphics\", void 0), e([x({\n  constructOnly: !0\n})], _.prototype, \"layerView\", void 0), e([x({\n  constructOnly: !0\n})], _.prototype, \"context\", void 0), e([x()], _.prototype, \"extent\", null), e([x()], _.prototype, \"updating\", null), e([x({\n  readOnly: !0\n})], _.prototype, \"watchUpdatingTracking\", void 0), e([x()], _.prototype, \"updatingTotal\", null), e([x()], _.prototype, \"updatingRemaining\", null), e([x()], _.prototype, \"expectedFeatureDiff\", null), e([x()], _.prototype, \"memoryForUnusedFeatures\", null), e([x()], _.prototype, \"maximumNumberOfFeaturesExceeded\", null), e([x({\n  readOnly: !0\n})], _.prototype, \"serviceDataExtent\", void 0), e([x({\n  readOnly: !0\n})], _.prototype, \"serviceDataCount\", void 0), e([x({\n  readOnly: !0\n})], _.prototype, \"vertexLimitExceeded\", void 0), e([x()], _.prototype, \"displayFeatureLimit\", void 0), e([x({\n  type: Number\n})], _.prototype, \"maximumNumberOfFeatures\", null), e([x({\n  readOnly: !0\n})], _.prototype, \"mode\", null), e([x({\n  readOnly: !0\n})], _.prototype, \"maxTotalSnapshotVertices\", null), e([x({\n  readOnly: !0,\n  dependsOn: [\"mode\"]\n})], _.prototype, \"tileDescriptors\", null), e([x()], _.prototype, \"tileFetcher\", void 0), e([x()], _.prototype, \"fetchDataInfoPromise\", void 0), e([x({\n  readOnly: !0\n})], _.prototype, \"vertexLimitInfo\", null), _ = e([F(\"esri.layers.graphics.controllers.FeatureTileController3D\")], _);\nconst O = 1e4,\n      I = 12e3,\n      V = 1e4,\n      U = 5e6;\n\nfunction N(e, t) {\n  if (!t) return !1;\n\n  for (const i of t) if (!e.has(i)) return !0;\n\n  return !1;\n}\n\nvar A;\n!function (e) {\n  function t() {\n    e.MAX_FEATURE_COUNT_FOR_EXTENT = O, e.QUERY_STATISTICS_TIMEOUT = I, e.QUERY_EXTENT_TIMEOUT = V;\n  }\n\n  e.NO_SERVICE_DATA_COUNT = 1 / 0, e.MAX_SNAPSHOT_MIN_SCALE_FACTOR = 5, e.reset = t;\n}(A || (A = {})), A.reset();\nexport { _ as FeatureTileController3D, A as FeatureTileController3DConstants };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/layers/graphics/controllers/FeatureTileController3D.js"],"names":["_","e","t","result","i","r","s","a","clone","o","n","isSome","l","destroyMaybe","c","removeMaybe","h","isNone","u","EsriPromiseMixin","d","createAbortController","m","isAbortError","p","eachAlways","f","whenOnce","y","init","g","property","x","subclass","F","isHostedAgolService","v","projectGeometry","T","E","FeatureTileFetcher3D","w","FeatureTileFetcher3DDebugger","C","D","WatchUpdatingTracking","b","S","getLogger","constructor","type","watchUpdatingTracking","serviceDataExtent","serviceDataCount","A","NO_SERVICE_DATA_COUNT","vertexLimitExceeded","displayFeatureLimit","suspended","tileFetcher","handles","fetchDataInfoPromise","fetchDataInfoAbortController","lifeCycleAbortController","extent","spatialReference","equals","layerView","view","error","_get","_set","updating","mode","featureTiles","updatingTotal","updatingRemaining","expectedFeatureDiff","memoryForUnusedFeatures","maximumNumberOfFeaturesExceeded","maximumNumberOfFeatures","_clearOverride","_override","hasMaximumNumberOfFeaturesOverride","_isOverridden","layer","infoFor3D","tilingScheme","minScale","approximateExtentSizeAtScale","width","height","MAX_SNAPSHOT_MIN_SCALE_FACTOR","maxTotalSnapshotVertices","totalVertices","Math","max","ceil","pixelSize","levels","tileSize","scale","tileDescriptors","id","lij","tiles","test","initialize","add","addPromise","updateVertexLimitExceeded","signal","modeChanged","addResolvingPromise","Promise","resolve","then","verifyCapabilities","fetchServiceDataInfo","initializeTileFetcher","get","destroy","cancelFetchServiceDataInfo","tilesHandle","abort","suspend","resume","restart","refetch","context","filterExtent","features","graphics","resourceController","memoryController","events","on","memoryFactor","geometryType","lodFactor","useTileCount","dataFilterChanged","availableFieldsChanged","requiredFieldsChanged","applyEdits","watch","debugger","toTileInfo","update","supportsExceedsLimitQuery","catch","addClient","warn","remove","notifyChange","deletedFeatures","length","updatedFeatures","addedFeatures","updateServiceDataExtent","N","availableFields","createVertexLimitExceededQuery","createQuery","outStatistics","statisticType","maxVertexCount","outStatisticFieldName","maxPointCount","maxRecordCount","capabilities","query","supportsCacheHint","cacheHint","createDataInfoQuery","outSpatialReference","fullExtentIsAccurate","definitionExpression","url","tryUpdateServiceDataExtent","fullExtentInLocalViewSpatialReference","supportsExtent","fullExtent","MAX_FEATURE_COUNT_FOR_EXTENT","queryExtent","timeout","QUERY_EXTENT_TIMEOUT","portalItem","updateServiceDataCount","queryFeatureCount","QUERY_STATISTICS_TIMEOUT","ok","value","vertexLimitInfo","averageSymbolComplexity","maximumTotalNumberOfPrimitives","primitivesPerCoordinate","primitivesPerFeature","operations","supportsExceedsLimitStatistics","minimumNumberOfVerticesForGeometry","min","U","queryFeatures","attributes","exceedslimit","debug","storedFeatures","totalFeatures","readOnly","prototype","constructOnly","Number","dependsOn","O","I","V","has","reset","FeatureTileController3D","FeatureTileController3DConstants"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{result as i}from\"../../../core/asyncUtils.js\";import r from\"../../../core/Collection.js\";import\"../../../core/has.js\";import s from\"../../../core/Error.js\";import a from\"../../../core/Handles.js\";import{clone as o}from\"../../../core/lang.js\";import n from\"../../../core/Logger.js\";import{isSome as l,destroyMaybe as c,removeMaybe as h,isNone as u}from\"../../../core/maybe.js\";import{EsriPromiseMixin as d}from\"../../../core/Promise.js\";import{createAbortController as m,isAbortError as p,eachAlways as f}from\"../../../core/promiseUtils.js\";import{whenOnce as y,init as g}from\"../../../core/watchUtils.js\";import{property as x}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as F}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isHostedAgolService as v}from\"../../support/arcgisLayerUrl.js\";import{projectGeometry as T}from\"../../../portal/support/geometryServiceUtils.js\";import E from\"../../../rest/support/StatisticDefinition.js\";import{FeatureTileFetcher3D as w}from\"../../../views/3d/layers/support/FeatureTileFetcher3D.js\";import{FeatureTileFetcher3DDebugger as C}from\"../../../views/3d/layers/support/FeatureTileFetcher3DDebugger.js\";import D from\"../../../views/3d/support/debugFlags.js\";import{WatchUpdatingTracking as b}from\"../../../views/support/WatchUpdatingTracking.js\";const S=n.getLogger(\"esri.layers.graphics.controllers.FeatureTileController3D\");let _=class extends(d(t)){constructor(e){super(e),this.type=\"feature-tile-3d\",this.watchUpdatingTracking=new b,this.serviceDataExtent=null,this.serviceDataCount=A.NO_SERVICE_DATA_COUNT,this.vertexLimitExceeded=!1,this.displayFeatureLimit=null,this.suspended=!1,this.tileFetcher=null,this.handles=new a,this.fetchDataInfoPromise=null,this.fetchDataInfoAbortController=null,this.lifeCycleAbortController=m()}set extent(e){if(e&&!e.spatialReference.equals(this.layerView.view.spatialReference))return void S.error(\"#extent=\",\"extent needs to be in the same spatial reference as the view\");const t=this._get(\"extent\");if(t===e)return;if(t&&e&&t.equals(e))return;const i=e?e.clone():null;this._set(\"extent\",i)}get updating(){return!!(l(this.tileFetcher)&&this.tileFetcher.updating||null!=this.fetchDataInfoPromise||\"tiles\"===this.mode&&this.layerView.view.featureTiles&&this.layerView.view.featureTiles.updating||this.watchUpdatingTracking&&this.watchUpdatingTracking.updating)}get updatingTotal(){return this.updating&&l(this.tileFetcher)?this.tileFetcher.updatingTotal:0}get updatingRemaining(){return this.updating&&l(this.tileFetcher)?this.tileFetcher.updatingRemaining:0}get expectedFeatureDiff(){return this.updating&&l(this.tileFetcher)?this.tileFetcher.expectedFeatureDiff:0}get memoryForUnusedFeatures(){return l(this.tileFetcher)?this.tileFetcher.memoryForUnusedFeatures:0}get maximumNumberOfFeaturesExceeded(){return!(!l(this.tileFetcher)||!this.tileFetcher.maximumNumberOfFeaturesExceeded)}get maximumNumberOfFeatures(){return l(this.displayFeatureLimit)?this.displayFeatureLimit.maximumNumberOfFeatures:0}set maximumNumberOfFeatures(e){e!==this.maximumNumberOfFeatures&&(null==e?this._clearOverride(\"maximumNumberOfFeatures\"):this._override(\"maximumNumberOfFeatures\",e))}get hasMaximumNumberOfFeaturesOverride(){return this._isOverridden(\"maximumNumberOfFeatures\")}get mode(){const e=this.layerView.layer;if(\"feature\"===e.type&&l(e.infoFor3D))return\"snapshot\";if(this.serviceDataCount===A.NO_SERVICE_DATA_COUNT||this.vertexLimitExceeded)return\"tiles\";const t=this.layerView.view,i=t&&t.featureTiles,r=i&&i.tilingScheme;if(e&&e.minScale&&this.serviceDataExtent&&r){const t=this.approximateExtentSizeAtScale(e.minScale,r);if((this.serviceDataExtent.width/t+this.serviceDataExtent.height/t)/2>A.MAX_SNAPSHOT_MIN_SCALE_FACTOR)return\"tiles\"}return!this.maximumNumberOfFeatures||this.serviceDataCount<=this.maximumNumberOfFeatures?\"snapshot\":\"tiles\"}get maxTotalSnapshotVertices(){const e=this._get(\"maxTotalSnapshotVertices\")||0,t=\"snapshot\"===this.mode&&l(this.tileFetcher)&&this.tileFetcher.totalVertices||0;return Math.max(e,t)}approximateExtentSizeAtScale(e,t){const i=this.layerView.view,r=Math.ceil((i.width/t.pixelSize+i.height/t.pixelSize)/2),s=t.levels[0];return r*((s.tileSize[0]/(s.scale/e)+s.tileSize[1]/(s.scale/e))/2)}get tileDescriptors(){return\"snapshot\"===this.mode?new r([{id:\"dummy-tile-full-extent\",lij:[0,0,0]}]):this.layerView.view.featureTiles?this.layerView.view.featureTiles.tiles:new r}get test(){return{fetchDataInfoPromise:this.fetchDataInfoPromise,tileFetcher:this.tileFetcher}}initialize(){this.watchUpdatingTracking.add(this,\"vertexLimitInfo\",(()=>this.watchUpdatingTracking.addPromise(this.updateVertexLimitExceeded(null,this.lifeCycleAbortController.signal)))),this.watchUpdatingTracking.add(this,\"mode\",(()=>this.modeChanged()),2),this.addResolvingPromise(Promise.resolve().then((()=>this.verifyCapabilities())).then((()=>this.watchUpdatingTracking.addPromise(this.fetchServiceDataInfo()))).then((()=>this.initializeTileFetcher())))}verifyCapabilities(){const e=this.layerView.layer;if(!e.get(\"capabilities.operations.supportsQuery\"))throw new s(\"graphicscontroller:query-capability-required\",\"Service requires query capabilities to be used as a feature layer\",{layer:e})}destroy(){this.cancelFetchServiceDataInfo(),this.tileFetcher=c(this.tileFetcher),this.handles=c(this.handles),this.tilesHandle=h(this.tilesHandle),this.lifeCycleAbortController&&(this.lifeCycleAbortController.abort(),this.lifeCycleAbortController=null),this.watchUpdatingTracking.destroy(),this._set(\"watchUpdatingTracking\",null)}suspend(){this.suspended||(this.suspended=!0,l(this.tileFetcher)&&this.tileFetcher.suspend())}resume(){this.suspended&&(this.suspended=!1,l(this.tileFetcher)&&this.tileFetcher.resume())}restart(){const e=()=>{l(this.tileFetcher)&&this.tileFetcher.restart()};this.watchUpdatingTracking.addPromise(this.fetchServiceDataInfo().then(e,e))}refetch(){const e=()=>{l(this.tileFetcher)&&this.tileFetcher.refetch()};this.watchUpdatingTracking.addPromise(this.fetchServiceDataInfo().then(e,e))}initializeTileFetcher(){const e=this.layerView.view;if(!e)return;const t=y(e.featureTiles,\"tilingScheme\",this.lifeCycleAbortController.signal);this.watchUpdatingTracking.addPromise(t),t.then((()=>{const{layerView:t,tileDescriptors:i}=this,r=t.layer,s=new w({context:this.context,filterExtent:this.extent,tileDescriptors:i,features:this.graphics});this.tileFetcher=s,this.suspended?this.tileFetcher.suspend():this.tileFetcher.resume();const a=this.layerView.view.resourceController;a&&(this.handles.add(a.memoryController.events.on(\"quality-changed\",(e=>{s.memoryFactor=e}))),this.tileFetcher.memoryFactor=a.memoryController.memoryFactor);const o=\"polygon\"===this.context.geometryType?\"polygonLodFactor\":\"polyline\"===this.context.geometryType?\"polylineLodFactor\":null;o&&this.handles.add(g(this.layerView.view,\"qualitySettings.graphics3D.\"+o,(e=>{s.lodFactor=e||1})));const n=e=>{s.maximumNumberOfFeatures=e,s.useTileCount=this.serviceDataCount>e},l=e=>s.useTileCount=e>this.maximumNumberOfFeatures;this.watchUpdatingTracking.add(r,\"createQueryVersion\",(()=>this.dataFilterChanged())),this.watchUpdatingTracking.add(t,\"availableFields\",((e,t)=>this.availableFieldsChanged(t,e))),this.watchUpdatingTracking.add(t,\"requiredFields\",((e,t)=>this.requiredFieldsChanged(t,e))),this.handles.add([r.on(\"apply-edits\",(e=>this.applyEdits(e))),this.watch(\"extent\",(e=>s.filterExtent=e),!0),this.watch(\"tileDescriptors\",(e=>s.tileDescriptors=e),!0),g(this,\"maximumNumberOfFeatures\",n,!0),g(this,\"serviceDataCount\",l,!0),g(D,\"FEATURE_TILE_FETCH_SHOW_TILES\",(t=>{t&&s&&!s.debugger?(s.debugger=new C(s,e.featureTiles.tilingScheme.toTileInfo(),e),s.debugger.update()):!t&&this.tileFetcher&&s.debugger&&(s.debugger.destroy(),s.debugger=null)}))]),this.supportsExceedsLimitQuery||this.watchUpdatingTracking.add(this,\"maxTotalSnapshotVertices\",(()=>this.watchUpdatingTracking.addPromise(this.updateVertexLimitExceeded(null,this.lifeCycleAbortController.signal))))})).catch((()=>{}))}modeChanged(){switch(this.mode){case\"tiles\":this.tilesHandle||(this.tilesHandle=this.layerView.view.featureTiles.addClient());break;default:S.warn(\"Unhandled feature layer mode \"+this.mode);case\"snapshot\":l(this.tilesHandle)&&(this.tilesHandle.remove(),this.tilesHandle=null)}}dataFilterChanged(){this._set(\"maxTotalSnapshotVertices\",0),this.notifyChange(\"maxTotalSnapshotVertices\"),this.refetch()}applyEdits(e){u(this.tileFetcher)||this.tileFetcher.applyEdits(e).then((e=>{e&&(e.deletedFeatures.length||e.updatedFeatures.length||e.addedFeatures.length)&&this.watchUpdatingTracking.addPromise(this.updateServiceDataExtent(this.lifeCycleAbortController.signal))})).catch((e=>{if(!p(e))throw e}))}availableFieldsChanged(e,t){l(this.tileFetcher)&&N(this.tileFetcher.availableFields,t)&&this.refetch()}requiredFieldsChanged(e,t){l(this.tileFetcher)&&N(this.tileFetcher.availableFields,t)&&this.restart()}createVertexLimitExceededQuery(e){const t=this.layerView.layer,i=t.createQuery();return i.outStatistics=[new E({statisticType:\"exceedslimit\",maxVertexCount:e,outStatisticFieldName:\"exceedslimit\",maxPointCount:1e8,maxRecordCount:1e8})],t.capabilities.query.supportsCacheHint&&(i.cacheHint=!0),i}createDataInfoQuery(){const e=this.layerView.layer,t=e.createQuery();return t.outSpatialReference=this.layerView.view.spatialReference,e.capabilities.query.supportsCacheHint&&(t.cacheHint=!0),t}fullExtentIsAccurate(){const e=this.layerView.layer;if(e.definitionExpression)return!1;switch(e.type){case\"feature\":return v(e.url);case\"csv\":case\"geojson\":case\"ogc-feature\":case\"wfs\":return!0;default:return}}async updateServiceDataExtent(e){try{await this.tryUpdateServiceDataExtent(e)}catch(t){p(t)||this._set(\"serviceDataExtent\",o(this.layerView.fullExtentInLocalViewSpatialReference))}}async tryUpdateServiceDataExtent(e){const t=this.layerView,i=t.layer,r=i.capabilities.query.supportsExtent,s=o(t.fullExtentInLocalViewSpatialReference),a=i.fullExtent,n=this.fullExtentIsAccurate(),l=this.serviceDataCount;if(r&&l<=A.MAX_FEATURE_COUNT_FOR_EXTENT&&(!s||!n)&&\"queryExtent\"in i){const t=this.createDataInfoQuery(),r=await i.queryExtent(t,{timeout:A.QUERY_EXTENT_TIMEOUT,signal:e});this._set(\"serviceDataExtent\",r.extent)}else if(s)this._set(\"serviceDataExtent\",s);else if(a){const r=\"portalItem\"in i?i.portalItem:null,s=await T(a,t.view.spatialReference,r,e);this._set(\"serviceDataExtent\",s)}else this._set(\"serviceDataExtent\",null)}async updateServiceDataCount(e){const t=this.layerView.layer;if(!(\"queryFeatureCount\"in t))return void this._set(\"serviceDataCount\",A.NO_SERVICE_DATA_COUNT);const r=await i(t.queryFeatureCount(this.createDataInfoQuery(),{timeout:A.QUERY_STATISTICS_TIMEOUT,signal:e}));if(!0===r.ok)this._set(\"serviceDataCount\",r.value);else{if(p(r.error))throw r.error;this._set(\"serviceDataCount\",A.NO_SERVICE_DATA_COUNT)}}get vertexLimitInfo(){if(u(this.displayFeatureLimit)||u(this.displayFeatureLimit.averageSymbolComplexity))return null;const{averageSymbolComplexity:e,maximumTotalNumberOfPrimitives:t}=this.displayFeatureLimit,{primitivesPerCoordinate:i,primitivesPerFeature:r}=e,s=this._get(\"vertexLimitInfo\");return u(s)||s.maximumTotalNumberOfPrimitives!==t||s.primitivesPerCoordinate!==i||s.primitivesPerFeature!==r?{primitivesPerCoordinate:i,primitivesPerFeature:r,maximumTotalNumberOfPrimitives:t}:s}get supportsExceedsLimitQuery(){const e=this.layerView.layer;return e.capabilities&&e.capabilities.operations&&e.capabilities.operations.supportsExceedsLimitStatistics}get minimumNumberOfVerticesForGeometry(){switch(this.layerView.layer.geometryType){case\"point\":case\"multipoint\":return 1;case\"polygon\":return 4;case\"polyline\":return 2;case\"multipatch\":case\"mesh\":return 3;default:return 0}}async updateVertexLimitExceeded(e,t){const r=this.vertexLimitInfo;if(u(r))return void this._set(\"vertexLimitExceeded\",!1);const s=r.primitivesPerFeature<=0,a=this.minimumNumberOfVerticesForGeometry>1;if(!s&&!a)return void this._set(\"vertexLimitExceeded\",!1);const{primitivesPerFeature:o,primitivesPerCoordinate:n,maximumTotalNumberOfPrimitives:c}=r;let h;0!==o&&l(e)&&await e;const d=this.serviceDataCount,m=d!==A.NO_SERVICE_DATA_COUNT;if(h=m?Math.ceil((c-d*o)/(n||1)):Math.ceil(c/(n||1)),a&&(h=Math.min(h,U)),m&&this.minimumNumberOfVerticesForGeometry*d>h)return void this._set(\"vertexLimitExceeded\",!0);if(!this.supportsExceedsLimitQuery)return void this._set(\"vertexLimitExceeded\",this.maxTotalSnapshotVertices>h);const f=await i(this.layerView.layer.queryFeatures(this.createVertexLimitExceededQuery(h),{timeout:A.QUERY_STATISTICS_TIMEOUT,signal:t}));if(!1===f.ok){if(p(f.error))throw f.error;return void this._set(\"vertexLimitExceeded\",!1)}const y=f.value.features[0];y&&y.attributes?this._set(\"vertexLimitExceeded\",!!y.attributes.exceedslimit):this._set(\"vertexLimitExceeded\",!1)}async fetchServiceDataInfo(){this.cancelFetchServiceDataInfo();let e=m();const t=e.signal,i=this.updateServiceDataCount(t),r=f([i,this.updateVertexLimitExceeded(i,t)]),s=r.then((()=>this.updateServiceDataExtent(t))).catch((e=>{p(e)||S.error(\"#fetchServiceDataInfo()\",e)})).then((()=>{s===this.fetchDataInfoPromise&&(this.fetchDataInfoPromise=null,this.fetchDataInfoAbortController=null),e=null}));return e&&(this.fetchDataInfoPromise=s),this.fetchDataInfoAbortController=e,r.then((()=>{}),(()=>{}))}cancelFetchServiceDataInfo(){const e=this.fetchDataInfoAbortController;e&&(this.fetchDataInfoAbortController=null,this.fetchDataInfoPromise=null,e.abort())}get debug(){return{storedFeatures:l(this.tileFetcher)?this.tileFetcher.storedFeatures:0,totalFeatures:l(this.tileFetcher)?this.tileFetcher.totalFeatures:0,totalVertices:l(this.tileFetcher)?this.tileFetcher.totalVertices:0}}};e([x({readOnly:!0})],_.prototype,\"type\",void 0),e([x({constructOnly:!0})],_.prototype,\"graphics\",void 0),e([x({constructOnly:!0})],_.prototype,\"layerView\",void 0),e([x({constructOnly:!0})],_.prototype,\"context\",void 0),e([x()],_.prototype,\"extent\",null),e([x()],_.prototype,\"updating\",null),e([x({readOnly:!0})],_.prototype,\"watchUpdatingTracking\",void 0),e([x()],_.prototype,\"updatingTotal\",null),e([x()],_.prototype,\"updatingRemaining\",null),e([x()],_.prototype,\"expectedFeatureDiff\",null),e([x()],_.prototype,\"memoryForUnusedFeatures\",null),e([x()],_.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([x({readOnly:!0})],_.prototype,\"serviceDataExtent\",void 0),e([x({readOnly:!0})],_.prototype,\"serviceDataCount\",void 0),e([x({readOnly:!0})],_.prototype,\"vertexLimitExceeded\",void 0),e([x()],_.prototype,\"displayFeatureLimit\",void 0),e([x({type:Number})],_.prototype,\"maximumNumberOfFeatures\",null),e([x({readOnly:!0})],_.prototype,\"mode\",null),e([x({readOnly:!0})],_.prototype,\"maxTotalSnapshotVertices\",null),e([x({readOnly:!0,dependsOn:[\"mode\"]})],_.prototype,\"tileDescriptors\",null),e([x()],_.prototype,\"tileFetcher\",void 0),e([x()],_.prototype,\"fetchDataInfoPromise\",void 0),e([x({readOnly:!0})],_.prototype,\"vertexLimitInfo\",null),_=e([F(\"esri.layers.graphics.controllers.FeatureTileController3D\")],_);const O=1e4,I=12e3,V=1e4,U=5e6;function N(e,t){if(!t)return!1;for(const i of t)if(!e.has(i))return!0;return!1}var A;!function(e){function t(){e.MAX_FEATURE_COUNT_FOR_EXTENT=O,e.QUERY_STATISTICS_TIMEOUT=I,e.QUERY_EXTENT_TIMEOUT=V}e.NO_SERVICE_DATA_COUNT=1/0,e.MAX_SNAPSHOT_MIN_SCALE_FACTOR=5,e.reset=t}(A||(A={})),A.reset();export{_ as FeatureTileController3D,A as FeatureTileController3DConstants};\n"]},"metadata":{},"sourceType":"module"}