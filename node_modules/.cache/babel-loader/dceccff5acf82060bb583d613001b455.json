{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { c as r } from \"../../../../chunks/vec4f64.js\";\nimport { bindScreenSizeScalingUniforms as i } from \"../core/shaderLibrary/ScreenSizeScaling.glsl.js\";\nimport { bindSliceUniformsWithOrigin as t } from \"../core/shaderLibrary/Slice.glsl.js\";\nimport { bindMultipassTerrainTexture as o } from \"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { bindProjectionMatrix as s, bindView as a, bindCameraPosition as n } from \"../core/shaderLibrary/util/View.glsl.js\";\nimport { ReloadableShaderModule as l } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as p } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { ShaderTechniqueConfiguration as d, parameter as c } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { blendingDefault as h, OITBlending as m, OITDepthWrite as u, OITPolygonOffset as g } from \"../lib/OrderIndependentTransparency.js\";\nimport { Program as b } from \"../lib/Program.js\";\nimport { S as f } from \"../../../../chunks/ShadedColorMaterial.glsl.js\";\nimport { makePipelineState as v, cullingParams as y, defaultDepthWriteParams as T, defaultColorWriteParams as E } from \"../../../webgl/renderState.js\";\n\nclass S extends p {\n  initializeProgram(e) {\n    const r = S.shader.get(),\n          i = this.configuration,\n          t = r.build({\n      output: i.output,\n      slicePlaneEnabled: i.slicePlaneEnabled,\n      sliceHighlightDisabled: !1,\n      sliceEnabledForVertexPrograms: !1,\n      screenSizeEnabled: i.screenSizeEnabled,\n      shadingEnabled: i.shadingEnabled,\n      OITEnabled: 0 === i.transparencyPassType,\n      multipassTerrainEnabled: i.multipassTerrainEnabled,\n      cullAboveGround: i.cullAboveGround\n    });\n    return new b(e.rctx, t, P);\n  }\n\n  bindPass(e, r) {\n    const {\n      screenSizeEnabled: t,\n      shadingEnabled: a\n    } = this.configuration,\n          {\n      color: n,\n      shadingTint: l,\n      shadingDirection: p\n    } = e;\n    s(this.program, r.camera.projectionMatrix), this.program.setUniform4fv(\"color\", n), r.multipassTerrainEnabled && (this.program.setUniform2fv(\"cameraNearFar\", r.camera.nearFar), this.program.setUniform2fv(\"inverseViewport\", r.inverseViewport), o(this.program, r)), a && (this.program.setUniform4fv(\"shadedColor\", this.blendColor(w, l, n)), this.program.setUniform3fv(\"shadingDirection\", p), this.program.setUniformMatrix4fv(\"viewNormal\", r.camera.viewInverseTransposeMatrix)), t && i(this.program, e, r);\n  }\n\n  bindDraw(e) {\n    a(this.program, e), n(this.program, e.origin, e.camera.viewInverseTransposeMatrix), t(this.program, this.configuration, e), this.program.rebindTextures();\n  }\n\n  blendColor(e, r, i) {\n    const t = 1 - r[3],\n          o = r[3] + i[3] * t;\n    return 0 === o ? (e[3] = o, e) : (e[0] = (r[0] * r[3] + i[0] * i[3] * t) / o, e[1] = (r[1] * r[3] + i[1] * i[3] * t) / o, e[2] = (r[2] * r[3] + i[2] * i[3] * t) / o, e[3] = i[3], e);\n  }\n\n  setPipelineState(e) {\n    const r = this.configuration,\n          i = 3 === e,\n          t = 2 === e;\n    return v({\n      blending: 0 !== r.output && 7 !== r.output || !r.transparent ? null : i ? h : m(e),\n      culling: y(r.cullFace),\n      depthTest: {\n        func: t ? 513 : r.shadingEnabled ? 515 : 513\n      },\n      depthWrite: i ? r.writeDepth && T : u(e),\n      colorWrite: E,\n      polygonOffset: i || t ? null : g\n    });\n  }\n\n  initializePipeline() {\n    return this.setPipelineState(this.configuration.transparencyPassType);\n  }\n\n}\n\nS.shader = new l(f, () => import(\"./ShadedColorMaterial.glsl.js\"));\n\nclass j extends d {\n  constructor() {\n    super(...arguments), this.output = 0, this.cullFace = 0, this.slicePlaneEnabled = !1, this.transparent = !1, this.writeDepth = !0, this.screenSizeEnabled = !0, this.shadingEnabled = !0, this.transparencyPassType = 3, this.multipassTerrainEnabled = !1, this.cullAboveGround = !1;\n  }\n\n}\n\ne([c({\n  count: 8\n})], j.prototype, \"output\", void 0), e([c({\n  count: 3\n})], j.prototype, \"cullFace\", void 0), e([c()], j.prototype, \"slicePlaneEnabled\", void 0), e([c()], j.prototype, \"transparent\", void 0), e([c()], j.prototype, \"writeDepth\", void 0), e([c()], j.prototype, \"screenSizeEnabled\", void 0), e([c()], j.prototype, \"shadingEnabled\", void 0), e([c({\n  count: 4\n})], j.prototype, \"transparencyPassType\", void 0), e([c()], j.prototype, \"multipassTerrainEnabled\", void 0), e([c()], j.prototype, \"cullAboveGround\", void 0);\nconst P = new Map([[\"position\", 0], [\"normal\", 1], [\"offset\", 2]]),\n      w = r();\nexport { S as ShadedColorMaterialTechnique, j as ShadedColorMaterialTechniqueConfiguration, P as ShadedColorMaterialVertexAttrLocations };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js"],"names":["_","e","c","r","bindScreenSizeScalingUniforms","i","bindSliceUniformsWithOrigin","t","bindMultipassTerrainTexture","o","bindProjectionMatrix","s","bindView","a","bindCameraPosition","n","ReloadableShaderModule","l","ShaderTechnique","p","ShaderTechniqueConfiguration","d","parameter","blendingDefault","h","OITBlending","m","OITDepthWrite","u","OITPolygonOffset","g","Program","b","S","f","makePipelineState","v","cullingParams","y","defaultDepthWriteParams","T","defaultColorWriteParams","E","initializeProgram","shader","get","configuration","build","output","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","screenSizeEnabled","shadingEnabled","OITEnabled","transparencyPassType","multipassTerrainEnabled","cullAboveGround","rctx","P","bindPass","color","shadingTint","shadingDirection","program","camera","projectionMatrix","setUniform4fv","setUniform2fv","nearFar","inverseViewport","blendColor","w","setUniform3fv","setUniformMatrix4fv","viewInverseTransposeMatrix","bindDraw","origin","rebindTextures","setPipelineState","blending","transparent","culling","cullFace","depthTest","func","depthWrite","writeDepth","colorWrite","polygonOffset","initializePipeline","j","constructor","arguments","count","prototype","Map","ShadedColorMaterialTechnique","ShadedColorMaterialTechniqueConfiguration","ShadedColorMaterialVertexAttrLocations"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{c as r}from\"../../../../chunks/vec4f64.js\";import{bindScreenSizeScalingUniforms as i}from\"../core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{bindSliceUniformsWithOrigin as t}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as o}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as s,bindView as a,bindCameraPosition as n}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as l}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as p}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as d,parameter as c}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{blendingDefault as h,OITBlending as m,OITDepthWrite as u,OITPolygonOffset as g}from\"../lib/OrderIndependentTransparency.js\";import{Program as b}from\"../lib/Program.js\";import{S as f}from\"../../../../chunks/ShadedColorMaterial.glsl.js\";import{makePipelineState as v,cullingParams as y,defaultDepthWriteParams as T,defaultColorWriteParams as E}from\"../../../webgl/renderState.js\";class S extends p{initializeProgram(e){const r=S.shader.get(),i=this.configuration,t=r.build({output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,screenSizeEnabled:i.screenSizeEnabled,shadingEnabled:i.shadingEnabled,OITEnabled:0===i.transparencyPassType,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new b(e.rctx,t,P)}bindPass(e,r){const{screenSizeEnabled:t,shadingEnabled:a}=this.configuration,{color:n,shadingTint:l,shadingDirection:p}=e;s(this.program,r.camera.projectionMatrix),this.program.setUniform4fv(\"color\",n),r.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",r.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",r.inverseViewport),o(this.program,r)),a&&(this.program.setUniform4fv(\"shadedColor\",this.blendColor(w,l,n)),this.program.setUniform3fv(\"shadingDirection\",p),this.program.setUniformMatrix4fv(\"viewNormal\",r.camera.viewInverseTransposeMatrix)),t&&i(this.program,e,r)}bindDraw(e){a(this.program,e),n(this.program,e.origin,e.camera.viewInverseTransposeMatrix),t(this.program,this.configuration,e),this.program.rebindTextures()}blendColor(e,r,i){const t=1-r[3],o=r[3]+i[3]*t;return 0===o?(e[3]=o,e):(e[0]=(r[0]*r[3]+i[0]*i[3]*t)/o,e[1]=(r[1]*r[3]+i[1]*i[3]*t)/o,e[2]=(r[2]*r[3]+i[2]*i[3]*t)/o,e[3]=i[3],e)}setPipelineState(e){const r=this.configuration,i=3===e,t=2===e;return v({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?h:m(e),culling:y(r.cullFace),depthTest:{func:t?513:r.shadingEnabled?515:513},depthWrite:i?r.writeDepth&&T:u(e),colorWrite:E,polygonOffset:i||t?null:g})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}S.shader=new l(f,(()=>import(\"./ShadedColorMaterial.glsl.js\")));class j extends d{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([c({count:8})],j.prototype,\"output\",void 0),e([c({count:3})],j.prototype,\"cullFace\",void 0),e([c()],j.prototype,\"slicePlaneEnabled\",void 0),e([c()],j.prototype,\"transparent\",void 0),e([c()],j.prototype,\"writeDepth\",void 0),e([c()],j.prototype,\"screenSizeEnabled\",void 0),e([c()],j.prototype,\"shadingEnabled\",void 0),e([c({count:4})],j.prototype,\"transparencyPassType\",void 0),e([c()],j.prototype,\"multipassTerrainEnabled\",void 0),e([c()],j.prototype,\"cullAboveGround\",void 0);const P=new Map([[\"position\",0],[\"normal\",1],[\"offset\",2]]),w=r();export{S as ShadedColorMaterialTechnique,j as ShadedColorMaterialTechniqueConfiguration,P as ShadedColorMaterialVertexAttrLocations};\n"]},"metadata":{},"sourceType":"module"}