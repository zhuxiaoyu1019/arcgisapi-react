{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { exportGLB as e, MODEL_NAME_GLB as o } from \"./index.js\";\nimport { Node as t } from \"./node.js\";\nimport { Asset as n } from \"./asset.js\";\nimport { Scene as i } from \"./scene.js\";\n\nclass r {\n  constructor(e, o) {\n    this.file = {\n      type: \"model/gltf-binary\",\n      data: e\n    }, this.origin = o;\n  }\n\n  buffer() {\n    return Promise.resolve(this.file);\n  }\n\n  download(e) {\n    return new Promise(() => {\n      const o = new Blob([this.file.data], {\n        type: this.file.type\n      });\n      let t = e;\n      t || (t = \"model.glb\");\n      if (\"glb\" !== t.split(\".\").pop() && (t += \".glb\"), window.navigator.msSaveOrOpenBlob) window.navigator.msSaveOrOpenBlob(o, t);else {\n        const e = document.createElement(\"a\"),\n              n = URL.createObjectURL(o);\n        e.href = n, e.download = t, document.body.appendChild(e), e.click(), setTimeout(function () {\n          document.body.removeChild(e), window.URL.revokeObjectURL(n);\n        }, 0);\n      }\n    });\n  }\n\n}\n\nfunction s(s, d) {\n  const l = new n(),\n        a = new i();\n  l.addScene(a);\n  const m = new t();\n  return a.addNode(m), m.mesh = s, e(l, d).then(e => new r(e[o], e.origin));\n}\n\nexport { s as toBinaryGLTF };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/gltfexport.js"],"names":["exportGLB","e","MODEL_NAME_GLB","o","Node","t","Asset","n","Scene","i","r","constructor","file","type","data","origin","buffer","Promise","resolve","download","Blob","split","pop","window","navigator","msSaveOrOpenBlob","document","createElement","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","s","d","l","a","addScene","m","addNode","mesh","then","toBinaryGLTF"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,SAAS,IAAIC,CAApB,EAAsBC,cAAc,IAAIC,CAAxC,QAA8C,YAA9C;AAA2D,SAAOC,IAAI,IAAIC,CAAf,QAAqB,WAArB;AAAiC,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,YAAtB;AAAmC,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,YAAtB;;AAAmC,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACV,CAAD,EAAGE,CAAH,EAAK;AAAC,SAAKS,IAAL,GAAU;AAACC,MAAAA,IAAI,EAAC,mBAAN;AAA0BC,MAAAA,IAAI,EAACb;AAA/B,KAAV,EAA4C,KAAKc,MAAL,GAAYZ,CAAxD;AAA0D;;AAAAa,EAAAA,MAAM,GAAE;AAAC,WAAOC,OAAO,CAACC,OAAR,CAAgB,KAAKN,IAArB,CAAP;AAAkC;;AAAAO,EAAAA,QAAQ,CAAClB,CAAD,EAAG;AAAC,WAAO,IAAIgB,OAAJ,CAAa,MAAI;AAAC,YAAMd,CAAC,GAAC,IAAIiB,IAAJ,CAAS,CAAC,KAAKR,IAAL,CAAUE,IAAX,CAAT,EAA0B;AAACD,QAAAA,IAAI,EAAC,KAAKD,IAAL,CAAUC;AAAhB,OAA1B,CAAR;AAAyD,UAAIR,CAAC,GAACJ,CAAN;AAAQI,MAAAA,CAAC,KAAGA,CAAC,GAAC,WAAL,CAAD;AAAmB,UAAG,UAAQA,CAAC,CAACgB,KAAF,CAAQ,GAAR,EAAaC,GAAb,EAAR,KAA6BjB,CAAC,IAAE,MAAhC,GAAwCkB,MAAM,CAACC,SAAP,CAAiBC,gBAA5D,EAA6EF,MAAM,CAACC,SAAP,CAAiBC,gBAAjB,CAAkCtB,CAAlC,EAAoCE,CAApC,EAA7E,KAAwH;AAAC,cAAMJ,CAAC,GAACyB,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAR;AAAA,cAAoCpB,CAAC,GAACqB,GAAG,CAACC,eAAJ,CAAoB1B,CAApB,CAAtC;AAA6DF,QAAAA,CAAC,CAAC6B,IAAF,GAAOvB,CAAP,EAASN,CAAC,CAACkB,QAAF,GAAWd,CAApB,EAAsBqB,QAAQ,CAACK,IAAT,CAAcC,WAAd,CAA0B/B,CAA1B,CAAtB,EAAmDA,CAAC,CAACgC,KAAF,EAAnD,EAA6DC,UAAU,CAAE,YAAU;AAACR,UAAAA,QAAQ,CAACK,IAAT,CAAcI,WAAd,CAA0BlC,CAA1B,GAA6BsB,MAAM,CAACK,GAAP,CAAWQ,eAAX,CAA2B7B,CAA3B,CAA7B;AAA2D,SAAxE,EAA0E,CAA1E,CAAvE;AAAoJ;AAAC,KAAjb,CAAP;AAA2b;;AAA9jB;;AAA+jB,SAAS8B,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAMC,CAAC,GAAC,IAAIhC,CAAJ,EAAR;AAAA,QAAciC,CAAC,GAAC,IAAI/B,CAAJ,EAAhB;AAAsB8B,EAAAA,CAAC,CAACE,QAAF,CAAWD,CAAX;AAAc,QAAME,CAAC,GAAC,IAAIrC,CAAJ,EAAR;AAAc,SAAOmC,CAAC,CAACG,OAAF,CAAUD,CAAV,GAAaA,CAAC,CAACE,IAAF,GAAOP,CAApB,EAAsBpC,CAAC,CAACsC,CAAD,EAAGD,CAAH,CAAD,CAAOO,IAAP,CAAa5C,CAAC,IAAE,IAAIS,CAAJ,CAAMT,CAAC,CAACE,CAAD,CAAP,EAAWF,CAAC,CAACc,MAAb,CAAhB,CAA7B;AAAoE;;AAAA,SAAOsB,CAAC,IAAIS,YAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{exportGLB as e,MODEL_NAME_GLB as o}from\"./index.js\";import{Node as t}from\"./node.js\";import{Asset as n}from\"./asset.js\";import{Scene as i}from\"./scene.js\";class r{constructor(e,o){this.file={type:\"model/gltf-binary\",data:e},this.origin=o}buffer(){return Promise.resolve(this.file)}download(e){return new Promise((()=>{const o=new Blob([this.file.data],{type:this.file.type});let t=e;t||(t=\"model.glb\");if(\"glb\"!==t.split(\".\").pop()&&(t+=\".glb\"),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,t);else{const e=document.createElement(\"a\"),n=URL.createObjectURL(o);e.href=n,e.download=t,document.body.appendChild(e),e.click(),setTimeout((function(){document.body.removeChild(e),window.URL.revokeObjectURL(n)}),0)}}))}}function s(s,d){const l=new n,a=new i;l.addScene(a);const m=new t;return a.addNode(m),m.mesh=s,e(l,d).then((e=>new r(e[o],e.origin)))}export{s as toBinaryGLTF};\n"]},"metadata":{},"sourceType":"module"}