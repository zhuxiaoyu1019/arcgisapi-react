{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../PixelBlock.js\";\n\nconst e = function (t) {\n  return t && \"esri.layers.support.PixelBlock\" === t.declaredClass && t.pixels && t.pixels.length > 0;\n};\n\nfunction n(n, i) {\n  if (null == i || !i.length || !e(n)) return n;\n  const l = n.pixels.length;\n  return i && i.some(t => t >= l) || 1 === l && 1 === i.length && 0 === i[0] ? n : l !== i.length || i.some((t, e) => t !== e) ? new t({\n    pixelType: n.pixelType,\n    width: n.width,\n    height: n.height,\n    mask: n.mask,\n    validPixelCount: n.validPixelCount,\n    maskIsAlpha: n.maskIsAlpha,\n    pixels: i.map(t => n.pixels[t]),\n    statistics: n.statistics && i.map(t => n.statistics[t])\n  }) : n;\n}\n\nfunction i(t) {\n  if (!t) return;\n  const e = t.colormap;\n  if (!e || 0 === e.length) return;\n  const n = e.sort((t, e) => t[0] - e[0]);\n  let i = 0;\n  n[0][0] < 0 && (i = n[0][0]);\n  const l = Math.max(256, n[n.length - 1][0] - i + 1),\n        r = new Uint8Array(4 * l),\n        o = [];\n  let s,\n      a = 0,\n      h = 0;\n  const f = 5 === n[0].length;\n  if (l > 65536) return n.forEach(t => {\n    o[t[0] - i] = f ? t.slice(1) : t.slice(1).concat([255]);\n  }), {\n    indexed2DColormap: o,\n    offset: i,\n    alphaSpecified: f\n  };\n  if (t.fillUnspecified) for (s = n[h], a = s[0] - i; a < l; a++) r[4 * a] = s[1], r[4 * a + 1] = s[2], r[4 * a + 2] = s[3], r[4 * a + 3] = f ? s[4] : 255, a === s[0] - i && (s = h === n.length - 1 ? s : n[++h]);else for (a = 0; a < n.length; a++) s = n[a], h = 4 * (s[0] - i), r[h] = s[1], r[h + 1] = s[2], r[h + 2] = s[3], r[h + 3] = f ? s[4] : 255;\n  return {\n    indexedColormap: r,\n    offset: i,\n    alphaSpecified: f\n  };\n}\n\nfunction l(t, n) {\n  if (!e(t)) return t;\n  if (!n && (n.indexedColormap || n.indexed2DColormap)) return t;\n  const i = t.clone(),\n        l = i.pixels;\n  let r = i.mask;\n  const o = i.width * i.height;\n  if (1 !== l.length) return t;\n  const {\n    indexedColormap: s,\n    indexed2DColormap: a,\n    offset: h,\n    alphaSpecified: f\n  } = n,\n        u = s.length - 1;\n  let c = 0;\n  const x = l[0],\n        m = new Uint8Array(x.length),\n        p = new Uint8Array(x.length),\n        d = new Uint8Array(x.length);\n  let g,\n      y = 0;\n  if (s) {\n    if (r) for (c = 0; c < o; c++) r[c] && (y = 4 * (x[c] - h), y < h || y > u ? r[c] = 0 : (m[c] = s[y], p[c] = s[y + 1], d[c] = s[y + 2], r[c] = s[y + 3]));else {\n      for (r = new Uint8Array(o), c = 0; c < o; c++) y = 4 * (x[c] - h), y < h || y > u ? r[c] = 0 : (m[c] = s[y], p[c] = s[y + 1], d[c] = s[y + 2], r[c] = s[y + 3]);\n\n      i.mask = r;\n    }\n  } else if (r) for (c = 0; c < o; c++) r[c] && (g = a[x[c]], m[c] = g[0], p[c] = g[1], d[c] = g[2], r[c] = g[3]);else {\n    for (r = new Uint8Array(o), c = 0; c < o; c++) g = a[x[c]], m[c] = g[0], p[c] = g[1], d[c] = g[2], r[c] = g[3];\n\n    i.mask = r;\n  }\n  return i.pixels = [m, p, d], i.statistics = null, i.pixelType = \"u8\", i.maskIsAlpha = f, i;\n}\n\nfunction r(t) {\n  if (!e(t)) return null;\n  t.statistics || t.updateStatistics();\n  const {\n    pixels: n,\n    mask: i,\n    pixelType: l,\n    statistics: r\n  } = t,\n        o = t.width * t.height,\n        s = n.length;\n  let a, h, f, u, c;\n  const x = [],\n        m = [];\n  let p, d, g, y, w, M, k, A, U, C;\n  const T = 256;\n\n  for (u = 0; u < s; u++) {\n    if (p = new Uint32Array(T), g = n[u], \"u8\" === l) {\n      if (a = -.5, h = 255.5, i) for (c = 0; c < o; c++) i[c] && p[g[c]]++;else for (c = 0; c < o; c++) p[g[c]]++;\n    } else {\n      if (a = r[u].minValue, h = r[u].maxValue, f = (h - a) / T, d = new Uint32Array(T + 1), i) for (c = 0; c < o; c++) i[c] && d[Math.floor((g[c] - a) / f)]++;else for (c = 0; c < o; c++) d[Math.floor((g[c] - a) / f)]++;\n\n      for (c = 0; c < 255; c++) p[c] = d[c];\n\n      p[255] = d[255] + d[256];\n    }\n\n    for (x.push({\n      min: a,\n      max: h,\n      size: T,\n      counts: p\n    }), y = 0, w = 0, A = 0, c = 0; c < T; c++) y += p[c], w += c * p[c];\n\n    for (U = w / y, c = 0; c < T; c++) A += p[c] * (c - U) ** 2;\n\n    C = Math.sqrt(A / (y - 1)), f = (h - a) / T, M = (U + .5) * f + a, k = C * f, m.push({\n      min: a,\n      max: h,\n      avg: M,\n      stddev: k\n    });\n  }\n\n  return {\n    statistics: m,\n    histograms: x\n  };\n}\n\nfunction o(t) {\n  const e = [];\n\n  for (let n = 0; n < t.length; n++) {\n    const {\n      min: i,\n      max: l,\n      size: r,\n      counts: o\n    } = t[n];\n    let s = 0,\n        a = 0;\n\n    for (let t = 0; t < r; t++) s += o[t], a += t * o[t];\n\n    const h = a / s;\n    let f = 0;\n\n    for (let t = 0; t < r; t++) f += o[t] * (t - h) ** 2;\n\n    const u = (l - i) / r,\n          c = (h + .5) * u + i,\n          x = Math.sqrt(f / (s - 1)) * u;\n    e.push({\n      min: i,\n      max: l,\n      avg: c,\n      stddev: x\n    });\n  }\n\n  return e;\n}\n\nfunction s(t) {\n  const {\n    minCutOff: e,\n    maxCutOff: n,\n    gamma: i,\n    pixelType: l\n  } = t,\n        r = t.outMin || 0,\n        o = t.outMax || 255;\n  if (-1 === [\"u8\", \"u16\", \"s8\", \"s16\"].indexOf(l)) return null;\n  const s = e.length;\n  let h,\n      f,\n      u = 0;\n  \"s8\" === l ? u = -127 : \"s16\" === l && (u = -32767);\n  let c = 256;\n  [\"u16\", \"s16\"].indexOf(l) > -1 && (c = 65536);\n  const x = [],\n        m = [],\n        p = o - r;\n\n  for (h = 0; h < s; h++) m[h] = n[h] - e[h], x[h] = p / (n[h] - e[h]);\n\n  const d = i && i.length >= s,\n        g = [];\n  if (d) for (h = 0; h < s; h++) i[h] > 1 ? i[h] > 2 ? g[h] = 6.5 + (i[h] - 2) ** 2.5 : g[h] = 6.5 + 100 * (2 - i[h]) ** 4 : g[h] = 1;\n  let y;\n  const w = [];\n  let M, k, A;\n  if (d) for (h = 0; h < s; h++) {\n    for (A = [], f = 0; f < c; f++) M = f + u, y = (M - e[h]) / m[h], k = 1, i[h] > 1 && (k -= (1 / p) ** (y * g[h])), M < n[h] && M > e[h] ? A[f] = Math.floor(k * p * y ** (1 / i[h])) + r : M >= n[h] ? A[f] = o : A[f] = r;\n\n    w[h] = A;\n  } else for (h = 0; h < s; h++) {\n    for (A = [], f = 0; f < c; f++) M = f + u, M <= e[h] ? A[f] = r : M >= n[h] ? A[f] = o : A[f] = Math.floor((M - e[h]) / m[h] * p) + r;\n\n    w[h] = A;\n  }\n\n  if (null != t.contrastOffset) {\n    const e = a(t.contrastOffset, t.brightnessOffset);\n\n    for (h = 0; h < s; h++) for (A = w[h], f = 0; f < c; f++) A[f] = e[A[f]];\n  }\n\n  return {\n    lut: w,\n    offset: u\n  };\n}\n\nfunction a(t, e) {\n  const n = Math.min(Math.max(t, -100), 100),\n        i = Math.min(Math.max(e, -100), 100),\n        l = 255,\n        r = 128;\n  let o, s;\n  const a = new Uint8Array(256);\n\n  for (o = 0; o < 256; o++) n > 0 && n < 100 ? s = (200 * o - 100 * l + 2 * l * i) / (2 * (100 - n)) + r : n <= 0 && n > -100 ? s = (200 * o - 100 * l + 2 * l * i) * (100 + n) / 2e4 + r : 100 === n ? (s = 200 * o - 100 * l + (l + 1) * (100 - n) + 2 * l * i, s = s > 0 ? l : 0) : -100 === n && (s = r), a[o] = s > l ? l : s < 0 ? 0 : s;\n\n  return a;\n}\n\nfunction h(t, e = 256) {\n  e = Math.min(e, 256);\n  const {\n    size: n,\n    counts: i\n  } = t,\n        l = new Uint8Array(n),\n        r = i.reduce((t, n) => t + n / e, 0);\n  let o = 0,\n      s = 0,\n      a = 0,\n      h = r;\n\n  for (let f = 0; f < n; f++) if (a += i[f], !(f < n - 1 && a + i[f + 1] < h)) {\n    for (; o < e - 1 && h < a;) o++, h += r;\n\n    for (let t = s; t <= f; t++) l[t] = o;\n\n    s = f + 1;\n  }\n\n  for (let f = s; f < n; f++) l[f] = e - 1;\n\n  return l;\n}\n\nfunction f(t, n) {\n  if (!e(t)) return null;\n  const i = t.clone(),\n        {\n    pixels: l,\n    mask: r\n  } = i,\n        {\n    minCutOff: o,\n    maxCutOff: s,\n    gamma: a\n  } = n,\n        h = n.outMin || 0,\n        f = n.outMax || 255,\n        u = i.width * i.height,\n        c = l.length;\n  let x, m, p, d, g;\n  const y = f - h,\n        w = [],\n        M = [];\n\n  for (x = 0; x < c; x++) M[x] = s[x] - o[x], w[x] = y / (s[x] - o[x]);\n\n  const k = a && a.length >= c,\n        A = [];\n  if (k) for (x = 0; x < c; x++) a[x] > 1 ? a[x] > 2 ? A[x] = 6.5 + (a[x] - 2) ** 2.5 : A[x] = 6.5 + 100 * (2 - a[x]) ** 4 : A[x] = 1;\n  if (k) {\n    if (null != r) {\n      for (m = 0; m < u; m++) if (r[m]) for (x = 0; x < c; x++) p = l[x][m], g = (p - o[x]) / M[x], d = 1, a[x] > 1 && (d -= (1 / y) ** (g * A[x])), p < s[x] && p > o[x] ? l[x][m] = Math.floor(d * y * g ** (1 / a[x])) + h : p >= s[x] ? l[x][m] = f : l[x][m] = h;\n    } else for (m = 0; m < u; m++) for (x = 0; x < c; x++) p = l[x][m], g = (p - o[x]) / M[x], d = 1, a[x] > 1 && (d -= (1 / y) ** (g * A[x])), p < s[x] && p > o[x] ? l[x][m] = Math.floor(d * y * g ** (1 / a[x])) + h : p >= s[x] ? l[x][m] = f : l[x][m] = h;\n  } else if (null != r) {\n    for (m = 0; m < u; m++) if (r[m]) for (x = 0; x < c; x++) p = l[x][m], p < s[x] && p > o[x] ? l[x][m] = Math.floor((p - o[x]) / M[x] * y) + h : p >= s[x] ? l[x][m] = f : l[x][m] = h;\n  } else for (m = 0; m < u; m++) for (x = 0; x < c; x++) p = l[x][m], p < s[x] && p > o[x] ? l[x][m] = Math.floor((p - o[x]) / M[x] * y) + h : p >= s[x] ? l[x][m] = f : l[x][m] = h;\n  return i.pixelType = \"u8\", i.updateStatistics(), i;\n}\n\nfunction u(n, i) {\n  if (!e(n)) return null;\n  const {\n    pixels: l,\n    mask: r\n  } = n,\n        o = n.width * n.height,\n        s = l.length;\n  let a = i.lut;\n  const {\n    offset: h\n  } = i;\n  let f, u;\n  a && 1 === a[0].length && (a = l.map(() => a));\n  const c = [];\n  let x, m, p;\n  if (h) {\n    if (null == r) for (f = 0; f < s; f++) {\n      for (x = l[f], m = a[f], p = new Uint8Array(o), u = 0; u < o; u++) p[u] = m[x[u] - h];\n\n      c.push(p);\n    } else for (f = 0; f < s; f++) {\n      for (x = l[f], m = a[f], p = new Uint8Array(o), u = 0; u < o; u++) r[u] && (p[u] = m[x[u] - h]);\n\n      c.push(p);\n    }\n  } else if (null == r) for (f = 0; f < s; f++) {\n    for (x = l[f], m = a[f], p = new Uint8Array(o), u = 0; u < o; u++) p[u] = m[x[u]];\n\n    c.push(p);\n  } else for (f = 0; f < s; f++) {\n    for (x = l[f], m = a[f], p = new Uint8Array(o), u = 0; u < o; u++) r[u] && (p[u] = m[x[u]]);\n\n    c.push(p);\n  }\n  const d = new t({\n    width: n.width,\n    height: n.height,\n    pixels: c,\n    mask: r,\n    pixelType: \"u8\"\n  });\n  return d.updateStatistics(), d;\n}\n\nfunction c(t, n) {\n  if (!e(t)) return null;\n  const i = t.clone(),\n        {\n    pixels: l\n  } = i,\n        r = i.width * i.height,\n        o = n.length,\n        s = Math.floor(o / 2),\n        a = n[Math.floor(s)],\n        h = l[0];\n  let f,\n      u,\n      c,\n      x,\n      m,\n      p,\n      d = !1;\n  const g = new Uint8Array(r),\n        y = new Uint8Array(r),\n        w = new Uint8Array(r);\n  let M = i.mask;\n  const k = 4 === n[0].mappedColor.length;\n\n  for (M || (M = new Uint8Array(r), M.fill(k ? 255 : 1), i.mask = M), m = 0; m < r; m++) if (M[m]) {\n    for (f = h[m], d = !1, p = s, u = a, c = 0, x = o - 1; x - c > 1;) {\n      if (f === u.value) {\n        d = !0;\n        break;\n      }\n\n      f > u.value ? c = p : x = p, p = Math.floor((c + x) / 2), u = n[Math.floor(p)];\n    }\n\n    d || (f === n[c].value ? (u = n[c], d = !0) : f === n[x].value ? (u = n[x], d = !0) : f < n[c].value ? (d = !1, u = null) : f > n[c].value && (f < n[x].value ? (u = n[c], d = !0) : x === o - 1 ? (d = !1, u = null) : (u = n[x], d = !0))), d ? (g[m] = u.mappedColor[0], y[m] = u.mappedColor[1], w[m] = u.mappedColor[2], M[m] = u.mappedColor[3]) : g[m] = y[m] = w[m] = M[m] = 0;\n  }\n\n  return i.pixels = [g, y, w], i.mask = M, i.pixelType = \"u8\", i.maskIsAlpha = k, i;\n}\n\nfunction x(t, e, n, i, l, r, o, s) {\n  return {\n    xmin: l <= n * t ? 0 : l < n * t + t ? l - n * t : t,\n    ymin: r <= i * e ? 0 : r < i * e + e ? r - i * e : e,\n    xmax: l + o <= n * t ? 0 : l + o < n * t + t ? l + o - n * t : t,\n    ymax: r + s <= i * e ? 0 : r + s < i * e + e ? r + s - i * e : e\n  };\n}\n\nfunction m(t, e) {\n  if (!t || 0 === t.length) return null;\n  const n = t.filter(t => t.pixelBlock)[0];\n  if (!n) return null;\n  const i = (n.extent.xmax - n.extent.xmin) / n.pixelBlock.width,\n        l = (n.extent.ymax - n.extent.ymin) / n.pixelBlock.height,\n        r = .01 * Math.min(i, l),\n        o = t.sort((t, e) => Math.abs(t.extent.ymax - e.extent.ymax) > r ? e.extent.ymax - t.extent.ymax : Math.abs(t.extent.xmin - e.extent.xmin) > r ? t.extent.xmin - e.extent.xmin : 0),\n        s = Math.min.apply(null, o.map(t => t.extent.xmin)),\n        a = Math.min.apply(null, o.map(t => t.extent.ymin)),\n        h = Math.max.apply(null, o.map(t => t.extent.xmax)),\n        f = Math.max.apply(null, o.map(t => t.extent.ymax)),\n        u = {\n    x: Math.round((e.xmin - s) / i),\n    y: Math.round((f - e.ymax) / l)\n  },\n        c = {\n    width: Math.round((h - s) / i),\n    height: Math.round((f - a) / l)\n  },\n        x = {\n    width: Math.round((e.xmax - e.xmin) / i),\n    height: Math.round((e.ymax - e.ymin) / l)\n  };\n  if (Math.round(c.width / n.pixelBlock.width) * Math.round(c.height / n.pixelBlock.height) !== o.length || u.x < 0 || u.y < 0 || c.width < x.width || c.height < x.height) return null;\n  return {\n    extent: e,\n    pixelBlock: d(o.map(t => t.pixelBlock), c, u, x)\n  };\n}\n\nfunction p(t, e, n, i, l, r) {\n  const {\n    width: o,\n    height: s\n  } = n.block,\n        {\n    x: a,\n    y: h\n  } = n.offset,\n        {\n    width: f,\n    height: u\n  } = n.mosaic,\n        c = x(o, s, i, l, a, h, f, u);\n  let m = 0,\n      p = 0;\n\n  if (r) {\n    const t = r.hasGCSSShiftTransform ? 360 : r.halfWorldWidth,\n          e = o * r.resolutionX,\n          n = r.startX + i * e,\n          l = n + e;\n    n < t && l > t ? p = r.rightPadding : n >= t && (m = r.leftMargin - r.rightPadding, p = 0);\n  }\n\n  if (c.xmax -= p, \"number\" != typeof e) for (let x = c.ymin; x < c.ymax; x++) {\n    const n = (l * s + x - h) * f + (i * o - a) + m,\n          r = x * o;\n\n    for (let i = c.xmin; i < c.xmax; i++) t[n + i] = e[r + i];\n  } else for (let x = c.ymin; x < c.ymax; x++) {\n    const n = (l * s + x - h) * f + (i * o - a) + m;\n\n    for (let i = c.xmin; i < c.xmax; i++) t[n + i] = e;\n  }\n}\n\nfunction d(n, i, l, r, o) {\n  const s = n.filter(t => e(t))[0];\n  if (null == s) return null;\n  const a = r ? r.width : i.width,\n        h = r ? r.height : i.height,\n        f = s.width,\n        u = s.height,\n        c = i.width / f,\n        x = i.height / u,\n        m = {\n    offset: l || {\n      x: 0,\n      y: 0\n    },\n    mosaic: r || i,\n    block: {\n      width: f,\n      height: u\n    }\n  },\n        d = s.pixelType,\n        g = t.getPixelArrayConstructor(d),\n        y = s.pixels.length,\n        w = [];\n  let M, k;\n\n  for (let t = 0; t < y; t++) {\n    k = new g(a * h);\n\n    for (let i = 0; i < x; i++) for (let l = 0; l < c; l++) {\n      const r = n[i * c + l];\n      e(r) && (M = r.pixels[t], p(k, M, m, l, i, o));\n    }\n\n    w.push(k);\n  }\n\n  let A;\n\n  if (n.some(t => null == t || t.mask && t.mask.length > 0)) {\n    A = new Uint8Array(a * h);\n\n    for (let t = 0; t < x; t++) for (let e = 0; e < c; e++) {\n      const i = n[t * c + e],\n            l = i ? i.mask : null;\n      p(A, l || (i ? 1 : 0), m, e, t, o);\n    }\n  }\n\n  const U = new t({\n    width: a,\n    height: h,\n    pixels: w,\n    pixelType: d,\n    mask: A\n  });\n  return U.updateStatistics(), U;\n}\n\nfunction g(t, n, i) {\n  if (!e(t)) return null;\n  const {\n    width: l,\n    height: r\n  } = t,\n        o = n.x,\n        s = n.y,\n        a = i.width + o,\n        h = i.height + s;\n  if (o < 0 || s < 0 || a > l || h > r) return t;\n  if (0 === o && 0 === s && a === l && h === r) return t;\n  t.mask || (t.mask = new Uint8Array(l * r));\n  const f = t.mask;\n\n  for (let e = 0; e < r; e++) {\n    const t = e * l;\n\n    for (let n = 0; n < l; n++) f[t + n] = e < s || e >= h || n < o || n >= a ? 0 : 1;\n  }\n\n  return t.updateStatistics(), t;\n}\n\nfunction y(t) {\n  if (!e(t)) return null;\n  const n = t.clone(),\n        {\n    width: i,\n    height: l,\n    pixels: r,\n    mask: o\n  } = t,\n        s = r[0],\n        a = n.pixels[0];\n\n  for (let e = 2; e < l - 1; e++) {\n    const t = new Map();\n\n    for (let l = e - 2; l < e + 2; l++) for (let e = 0; e < 4; e++) {\n      const n = l * i + e;\n      k(t, s[n], o ? o[n] : 1);\n    }\n\n    a[e * i] = w(t), a[e * i + 1] = a[e * i + 2] = a[e * i];\n    let n = 3;\n\n    for (; n < i - 1; n++) {\n      let l = (e - 2) * i + n + 1;\n      k(t, s[l], o ? o[l] : 1), l = (e - 1) * i + n + 1, k(t, s[l], o ? o[l] : 1), l = e * i + n + 1, k(t, s[l], o ? o[l] : 1), l = (e + 1) * i + n + 1, k(t, s[l], o ? o[l] : 1), l = (e - 2) * i + n - 3, M(t, s[l], o ? o[l] : 1), l = (e - 1) * i + n - 3, M(t, s[l], o ? o[l] : 1), l = e * i + n - 3, M(t, s[l], o ? o[l] : 1), l = (e + 1) * i + n - 3, M(t, s[l], o ? o[l] : 1), a[e * i + n] = w(t);\n    }\n\n    a[e * i + n + 1] = a[e * i + n];\n  }\n\n  for (let e = 0; e < i; e++) a[e] = a[i + e] = a[2 * i + e], a[(l - 1) * i + e] = a[(l - 2) * i + e];\n\n  return n.updateStatistics(), n;\n}\n\nfunction w(t) {\n  if (0 === t.size) return 0;\n  let e = 0,\n      n = -1,\n      i = 0;\n  const l = t.keys();\n  let r = l.next();\n\n  for (; !r.done;) i = t.get(r.value), i > e && (n = r.value, e = i), r = l.next();\n\n  return n;\n}\n\nfunction M(t, e, n) {\n  if (0 === n) return;\n  const i = t.get(e);\n  1 === i ? t.delete(e) : t.set(e, i - 1);\n}\n\nfunction k(t, e, n) {\n  0 !== n && t.set(e, t.has(e) ? t.get(e) + 1 : 1);\n}\n\nfunction A(n, i, l) {\n  let {\n    x: r,\n    y: o\n  } = i;\n  const {\n    width: s,\n    height: a\n  } = l;\n  if (0 === r && 0 === o && a === n.height && s === n.width) return n;\n  const {\n    width: h,\n    height: f\n  } = n,\n        u = Math.max(0, o),\n        c = Math.max(0, r),\n        x = Math.min(r + s, h),\n        m = Math.min(o + a, f);\n  if (x < 0 || m < 0 || !e(n)) return null;\n  r = Math.max(0, -r), o = Math.max(0, -o);\n  const {\n    pixels: p,\n    mask: d\n  } = n,\n        g = s * a,\n        y = p.length,\n        w = [];\n\n  for (let e = 0; e < y; e++) {\n    const i = p[e],\n          l = t.createEmptyBand(n.pixelType, g);\n\n    for (let t = u; t < m; t++) {\n      const e = t * h;\n      let n = (t + o - u) * s + r;\n\n      for (let t = c; t < x; t++) l[n++] = i[e + t];\n    }\n\n    w.push(l);\n  }\n\n  const M = new Uint8Array(g);\n\n  for (let t = u; t < m; t++) {\n    const e = t * h;\n    let n = (t + o - u) * s + r;\n\n    for (let t = c; t < x; t++) M[n++] = d ? d[e + t] : 1;\n  }\n\n  const k = new t({\n    width: l.width,\n    height: l.height,\n    pixelType: n.pixelType,\n    pixels: w,\n    mask: M\n  });\n  return k.updateStatistics(), k;\n}\n\nfunction U(n, i = !0) {\n  if (!e(n)) return null;\n  const {\n    pixels: l,\n    width: r,\n    height: o,\n    mask: s,\n    pixelType: a\n  } = n,\n        h = [],\n        f = Math.round(r / 2),\n        u = Math.round(o / 2),\n        c = o - 1,\n        x = r - 1;\n\n  for (let e = 0; e < l.length; e++) {\n    const n = l[e],\n          s = t.createEmptyBand(a, f * u);\n    let m = 0;\n\n    for (let t = 0; t < o; t += 2) for (let e = 0; e < r; e += 2) {\n      const l = n[t * r + e];\n\n      if (i) {\n        const i = e === x ? l : n[t * r + e + 1],\n              o = t === c ? l : n[t * r + e + r],\n              a = e === x ? o : t === c ? i : n[t * r + e + r + 1];\n        s[m++] = (l + i + o + a) / 4;\n      } else s[m++] = l;\n    }\n\n    h.push(s);\n  }\n\n  let m = null;\n\n  if (s) {\n    m = new Uint8Array(f * u);\n    let t = 0;\n\n    for (let e = 0; e < o; e += 2) for (let n = 0; n < r; n += 2) {\n      const l = s[e * r + n];\n\n      if (i) {\n        const i = n === x ? l : s[e * r + n + 1],\n              o = e === c ? l : s[e * r + n + r],\n              a = n === x ? o : e === c ? i : s[e * r + n + r + 1];\n        m[t++] = l * i * o * a ? 1 : 0;\n      } else m[t++] = l;\n    }\n  }\n\n  return new t({\n    width: f,\n    height: u,\n    pixelType: a,\n    pixels: h,\n    mask: m\n  });\n}\n\nfunction C(t, n, i) {\n  if (!e(t)) return null;\n  const {\n    width: l,\n    height: r\n  } = n;\n  let {\n    width: o,\n    height: s\n  } = t;\n  const a = new Map(),\n        h = {\n    x: 0,\n    y: 0\n  },\n        f = null == i ? 1 : 1 + i;\n  let u = t;\n\n  for (let e = 0; e < f; e++) {\n    const t = Math.ceil(o / l),\n          i = Math.ceil(s / r);\n\n    for (let o = 0; o < i; o++) {\n      h.y = o * r;\n\n      for (let i = 0; i < t; i++) {\n        h.x = i * l;\n        const t = A(u, h, n);\n        a.set(`${e}/${o}/${i}`, t);\n      }\n    }\n\n    e < f - 1 && (u = U(u)), o = Math.round(o / 2), s = Math.round(s / 2);\n  }\n\n  return a;\n}\n\nfunction T(n, i, l, r, o = \"nearest\") {\n  if (!e(n)) return null;\n  \"majority\" === o && (n = y(n));\n  const {\n    pixels: s,\n    mask: a,\n    pixelType: h\n  } = n,\n        f = n.width,\n        u = n.height,\n        c = t.getPixelArrayConstructor(h),\n        x = s.length,\n        {\n    width: m,\n    height: p\n  } = i,\n        d = r.cols,\n        g = r.rows,\n        w = Math.ceil(m / d),\n        M = Math.ceil(p / g);\n  let k,\n      A,\n      U,\n      C,\n      T,\n      v,\n      S,\n      B = !1;\n\n  for (let t = 0; t < l.length; t += 3) -1 === l[t] && -1 === l[t + 1] && -1 === l[t + 2] && (B = !0);\n\n  const O = new Float32Array(m * p),\n        P = new Float32Array(m * p);\n  let b,\n      z,\n      I = 0;\n  const j = \"majority\" === o ? 0 : .5;\n\n  for (let t = 0; t < M; t++) for (let e = 0; e < w; e++) {\n    k = 12 * (t * w + e), A = l[k], U = l[k + 1], C = l[k + 2], T = l[k + 3], v = l[k + 4], S = l[k + 5];\n\n    for (let n = 0; n < g; n++) {\n      I = (t * g + n) * m + e * d, z = (n + .5) / g;\n\n      for (let t = 0; t < n; t++) b = (t + .5) / d, O[I + t] = Math.round((A * b + U * z + C) * f - j), P[I + t] = Math.round((T * b + v * z + S) * u - j);\n    }\n\n    k += 6, A = l[k], U = l[k + 1], C = l[k + 2], T = l[k + 3], v = l[k + 4], S = l[k + 5];\n\n    for (let n = 0; n < g; n++) {\n      I = (t * g + n) * m + e * d, z = (n + .5) / g;\n\n      for (let t = n; t < d; t++) b = (t + .5) / d, O[I + t] = Math.round((A * b + U * z + C) * f - j), P[I + t] = Math.round((T * b + v * z + S) * u - j);\n    }\n  }\n\n  const D = (t, e) => {\n    for (let n = 0; n < p; n++) {\n      k = n * m;\n\n      for (let n = 0; n < m; n++) O[k] < 0 || P[k] < 0 ? t[k] = 0 : t[k] = e[O[k] + P[k] * f], k++;\n    }\n  },\n        E = [];\n\n  let $;\n\n  for (let t = 0; t < x; t++) $ = new c(m * p), D($, s[t]), E.push($);\n\n  const q = new t({\n    width: m,\n    height: p,\n    pixelType: h,\n    pixels: E\n  });\n  if (a) q.mask = new Uint8Array(m * p), D(q.mask, a);else if (B) {\n    q.mask = new Uint8Array(m * p);\n\n    for (let t = 0; t < m * p; t++) q.mask[t] = O[t] < 0 || P[t] < 0 ? 0 : 1;\n  }\n  return q.updateStatistics(), q;\n}\n\nexport { T as approximateTransform, A as clip, l as colorize, i as createColormapLUT, a as createContrastBrightnessLUT, h as createHistogramEqualizationLUT, s as createStretchLUT, o as estimateStatisticsFromHistograms, r as estimateStatisticsHistograms, n as extractBands, x as getClipBounds, u as lookupPixels, d as mosaic, m as mosaicPixelData, c as remapColor, y as resampleByMajority, g as setValidBoundary, C as split, f as stretch };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/support/rasterFunctions/pixelUtils.js"],"names":["t","e","declaredClass","pixels","length","n","i","l","some","pixelType","width","height","mask","validPixelCount","maskIsAlpha","map","statistics","colormap","sort","Math","max","r","Uint8Array","o","s","a","h","f","forEach","slice","concat","indexed2DColormap","offset","alphaSpecified","fillUnspecified","indexedColormap","clone","u","c","x","m","p","d","g","y","updateStatistics","w","M","k","A","U","C","T","Uint32Array","minValue","maxValue","floor","push","min","size","counts","sqrt","avg","stddev","histograms","minCutOff","maxCutOff","gamma","outMin","outMax","indexOf","contrastOffset","brightnessOffset","lut","reduce","mappedColor","fill","value","xmin","ymin","xmax","ymax","filter","pixelBlock","extent","abs","apply","round","block","mosaic","hasGCSSShiftTransform","halfWorldWidth","resolutionX","startX","rightPadding","leftMargin","getPixelArrayConstructor","Map","keys","next","done","get","delete","set","has","createEmptyBand","ceil","cols","rows","v","S","B","O","Float32Array","P","b","z","I","j","D","E","$","q","approximateTransform","clip","colorize","createColormapLUT","createContrastBrightnessLUT","createHistogramEqualizationLUT","createStretchLUT","estimateStatisticsFromHistograms","estimateStatisticsHistograms","extractBands","getClipBounds","lookupPixels","mosaicPixelData","remapColor","resampleByMajority","setValidBoundary","split","stretch"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../PixelBlock.js\";const e=function(t){return t&&\"esri.layers.support.PixelBlock\"===t.declaredClass&&t.pixels&&t.pixels.length>0};function n(n,i){if(null==i||!i.length||!e(n))return n;const l=n.pixels.length;return i&&i.some((t=>t>=l))||1===l&&1===i.length&&0===i[0]?n:l!==i.length||i.some(((t,e)=>t!==e))?new t({pixelType:n.pixelType,width:n.width,height:n.height,mask:n.mask,validPixelCount:n.validPixelCount,maskIsAlpha:n.maskIsAlpha,pixels:i.map((t=>n.pixels[t])),statistics:n.statistics&&i.map((t=>n.statistics[t]))}):n}function i(t){if(!t)return;const e=t.colormap;if(!e||0===e.length)return;const n=e.sort(((t,e)=>t[0]-e[0]));let i=0;n[0][0]<0&&(i=n[0][0]);const l=Math.max(256,n[n.length-1][0]-i+1),r=new Uint8Array(4*l),o=[];let s,a=0,h=0;const f=5===n[0].length;if(l>65536)return n.forEach((t=>{o[t[0]-i]=f?t.slice(1):t.slice(1).concat([255])})),{indexed2DColormap:o,offset:i,alphaSpecified:f};if(t.fillUnspecified)for(s=n[h],a=s[0]-i;a<l;a++)r[4*a]=s[1],r[4*a+1]=s[2],r[4*a+2]=s[3],r[4*a+3]=f?s[4]:255,a===s[0]-i&&(s=h===n.length-1?s:n[++h]);else for(a=0;a<n.length;a++)s=n[a],h=4*(s[0]-i),r[h]=s[1],r[h+1]=s[2],r[h+2]=s[3],r[h+3]=f?s[4]:255;return{indexedColormap:r,offset:i,alphaSpecified:f}}function l(t,n){if(!e(t))return t;if(!n&&(n.indexedColormap||n.indexed2DColormap))return t;const i=t.clone(),l=i.pixels;let r=i.mask;const o=i.width*i.height;if(1!==l.length)return t;const{indexedColormap:s,indexed2DColormap:a,offset:h,alphaSpecified:f}=n,u=s.length-1;let c=0;const x=l[0],m=new Uint8Array(x.length),p=new Uint8Array(x.length),d=new Uint8Array(x.length);let g,y=0;if(s)if(r)for(c=0;c<o;c++)r[c]&&(y=4*(x[c]-h),y<h||y>u?r[c]=0:(m[c]=s[y],p[c]=s[y+1],d[c]=s[y+2],r[c]=s[y+3]));else{for(r=new Uint8Array(o),c=0;c<o;c++)y=4*(x[c]-h),y<h||y>u?r[c]=0:(m[c]=s[y],p[c]=s[y+1],d[c]=s[y+2],r[c]=s[y+3]);i.mask=r}else if(r)for(c=0;c<o;c++)r[c]&&(g=a[x[c]],m[c]=g[0],p[c]=g[1],d[c]=g[2],r[c]=g[3]);else{for(r=new Uint8Array(o),c=0;c<o;c++)g=a[x[c]],m[c]=g[0],p[c]=g[1],d[c]=g[2],r[c]=g[3];i.mask=r}return i.pixels=[m,p,d],i.statistics=null,i.pixelType=\"u8\",i.maskIsAlpha=f,i}function r(t){if(!e(t))return null;t.statistics||t.updateStatistics();const{pixels:n,mask:i,pixelType:l,statistics:r}=t,o=t.width*t.height,s=n.length;let a,h,f,u,c;const x=[],m=[];let p,d,g,y,w,M,k,A,U,C;const T=256;for(u=0;u<s;u++){if(p=new Uint32Array(T),g=n[u],\"u8\"===l)if(a=-.5,h=255.5,i)for(c=0;c<o;c++)i[c]&&p[g[c]]++;else for(c=0;c<o;c++)p[g[c]]++;else{if(a=r[u].minValue,h=r[u].maxValue,f=(h-a)/T,d=new Uint32Array(T+1),i)for(c=0;c<o;c++)i[c]&&d[Math.floor((g[c]-a)/f)]++;else for(c=0;c<o;c++)d[Math.floor((g[c]-a)/f)]++;for(c=0;c<255;c++)p[c]=d[c];p[255]=d[255]+d[256]}for(x.push({min:a,max:h,size:T,counts:p}),y=0,w=0,A=0,c=0;c<T;c++)y+=p[c],w+=c*p[c];for(U=w/y,c=0;c<T;c++)A+=p[c]*(c-U)**2;C=Math.sqrt(A/(y-1)),f=(h-a)/T,M=(U+.5)*f+a,k=C*f,m.push({min:a,max:h,avg:M,stddev:k})}return{statistics:m,histograms:x}}function o(t){const e=[];for(let n=0;n<t.length;n++){const{min:i,max:l,size:r,counts:o}=t[n];let s=0,a=0;for(let t=0;t<r;t++)s+=o[t],a+=t*o[t];const h=a/s;let f=0;for(let t=0;t<r;t++)f+=o[t]*(t-h)**2;const u=(l-i)/r,c=(h+.5)*u+i,x=Math.sqrt(f/(s-1))*u;e.push({min:i,max:l,avg:c,stddev:x})}return e}function s(t){const{minCutOff:e,maxCutOff:n,gamma:i,pixelType:l}=t,r=t.outMin||0,o=t.outMax||255;if(-1===[\"u8\",\"u16\",\"s8\",\"s16\"].indexOf(l))return null;const s=e.length;let h,f,u=0;\"s8\"===l?u=-127:\"s16\"===l&&(u=-32767);let c=256;[\"u16\",\"s16\"].indexOf(l)>-1&&(c=65536);const x=[],m=[],p=o-r;for(h=0;h<s;h++)m[h]=n[h]-e[h],x[h]=p/(n[h]-e[h]);const d=i&&i.length>=s,g=[];if(d)for(h=0;h<s;h++)i[h]>1?i[h]>2?g[h]=6.5+(i[h]-2)**2.5:g[h]=6.5+100*(2-i[h])**4:g[h]=1;let y;const w=[];let M,k,A;if(d)for(h=0;h<s;h++){for(A=[],f=0;f<c;f++)M=f+u,y=(M-e[h])/m[h],k=1,i[h]>1&&(k-=(1/p)**(y*g[h])),M<n[h]&&M>e[h]?A[f]=Math.floor(k*p*y**(1/i[h]))+r:M>=n[h]?A[f]=o:A[f]=r;w[h]=A}else for(h=0;h<s;h++){for(A=[],f=0;f<c;f++)M=f+u,M<=e[h]?A[f]=r:M>=n[h]?A[f]=o:A[f]=Math.floor((M-e[h])/m[h]*p)+r;w[h]=A}if(null!=t.contrastOffset){const e=a(t.contrastOffset,t.brightnessOffset);for(h=0;h<s;h++)for(A=w[h],f=0;f<c;f++)A[f]=e[A[f]]}return{lut:w,offset:u}}function a(t,e){const n=Math.min(Math.max(t,-100),100),i=Math.min(Math.max(e,-100),100),l=255,r=128;let o,s;const a=new Uint8Array(256);for(o=0;o<256;o++)n>0&&n<100?s=(200*o-100*l+2*l*i)/(2*(100-n))+r:n<=0&&n>-100?s=(200*o-100*l+2*l*i)*(100+n)/2e4+r:100===n?(s=200*o-100*l+(l+1)*(100-n)+2*l*i,s=s>0?l:0):-100===n&&(s=r),a[o]=s>l?l:s<0?0:s;return a}function h(t,e=256){e=Math.min(e,256);const{size:n,counts:i}=t,l=new Uint8Array(n),r=i.reduce(((t,n)=>t+n/e),0);let o=0,s=0,a=0,h=r;for(let f=0;f<n;f++)if(a+=i[f],!(f<n-1&&a+i[f+1]<h)){for(;o<e-1&&h<a;)o++,h+=r;for(let t=s;t<=f;t++)l[t]=o;s=f+1}for(let f=s;f<n;f++)l[f]=e-1;return l}function f(t,n){if(!e(t))return null;const i=t.clone(),{pixels:l,mask:r}=i,{minCutOff:o,maxCutOff:s,gamma:a}=n,h=n.outMin||0,f=n.outMax||255,u=i.width*i.height,c=l.length;let x,m,p,d,g;const y=f-h,w=[],M=[];for(x=0;x<c;x++)M[x]=s[x]-o[x],w[x]=y/(s[x]-o[x]);const k=a&&a.length>=c,A=[];if(k)for(x=0;x<c;x++)a[x]>1?a[x]>2?A[x]=6.5+(a[x]-2)**2.5:A[x]=6.5+100*(2-a[x])**4:A[x]=1;if(k)if(null!=r){for(m=0;m<u;m++)if(r[m])for(x=0;x<c;x++)p=l[x][m],g=(p-o[x])/M[x],d=1,a[x]>1&&(d-=(1/y)**(g*A[x])),p<s[x]&&p>o[x]?l[x][m]=Math.floor(d*y*g**(1/a[x]))+h:p>=s[x]?l[x][m]=f:l[x][m]=h}else for(m=0;m<u;m++)for(x=0;x<c;x++)p=l[x][m],g=(p-o[x])/M[x],d=1,a[x]>1&&(d-=(1/y)**(g*A[x])),p<s[x]&&p>o[x]?l[x][m]=Math.floor(d*y*g**(1/a[x]))+h:p>=s[x]?l[x][m]=f:l[x][m]=h;else if(null!=r){for(m=0;m<u;m++)if(r[m])for(x=0;x<c;x++)p=l[x][m],p<s[x]&&p>o[x]?l[x][m]=Math.floor((p-o[x])/M[x]*y)+h:p>=s[x]?l[x][m]=f:l[x][m]=h}else for(m=0;m<u;m++)for(x=0;x<c;x++)p=l[x][m],p<s[x]&&p>o[x]?l[x][m]=Math.floor((p-o[x])/M[x]*y)+h:p>=s[x]?l[x][m]=f:l[x][m]=h;return i.pixelType=\"u8\",i.updateStatistics(),i}function u(n,i){if(!e(n))return null;const{pixels:l,mask:r}=n,o=n.width*n.height,s=l.length;let a=i.lut;const{offset:h}=i;let f,u;a&&1===a[0].length&&(a=l.map((()=>a)));const c=[];let x,m,p;if(h)if(null==r)for(f=0;f<s;f++){for(x=l[f],m=a[f],p=new Uint8Array(o),u=0;u<o;u++)p[u]=m[x[u]-h];c.push(p)}else for(f=0;f<s;f++){for(x=l[f],m=a[f],p=new Uint8Array(o),u=0;u<o;u++)r[u]&&(p[u]=m[x[u]-h]);c.push(p)}else if(null==r)for(f=0;f<s;f++){for(x=l[f],m=a[f],p=new Uint8Array(o),u=0;u<o;u++)p[u]=m[x[u]];c.push(p)}else for(f=0;f<s;f++){for(x=l[f],m=a[f],p=new Uint8Array(o),u=0;u<o;u++)r[u]&&(p[u]=m[x[u]]);c.push(p)}const d=new t({width:n.width,height:n.height,pixels:c,mask:r,pixelType:\"u8\"});return d.updateStatistics(),d}function c(t,n){if(!e(t))return null;const i=t.clone(),{pixels:l}=i,r=i.width*i.height,o=n.length,s=Math.floor(o/2),a=n[Math.floor(s)],h=l[0];let f,u,c,x,m,p,d=!1;const g=new Uint8Array(r),y=new Uint8Array(r),w=new Uint8Array(r);let M=i.mask;const k=4===n[0].mappedColor.length;for(M||(M=new Uint8Array(r),M.fill(k?255:1),i.mask=M),m=0;m<r;m++)if(M[m]){for(f=h[m],d=!1,p=s,u=a,c=0,x=o-1;x-c>1;){if(f===u.value){d=!0;break}f>u.value?c=p:x=p,p=Math.floor((c+x)/2),u=n[Math.floor(p)]}d||(f===n[c].value?(u=n[c],d=!0):f===n[x].value?(u=n[x],d=!0):f<n[c].value?(d=!1,u=null):f>n[c].value&&(f<n[x].value?(u=n[c],d=!0):x===o-1?(d=!1,u=null):(u=n[x],d=!0))),d?(g[m]=u.mappedColor[0],y[m]=u.mappedColor[1],w[m]=u.mappedColor[2],M[m]=u.mappedColor[3]):g[m]=y[m]=w[m]=M[m]=0}return i.pixels=[g,y,w],i.mask=M,i.pixelType=\"u8\",i.maskIsAlpha=k,i}function x(t,e,n,i,l,r,o,s){return{xmin:l<=n*t?0:l<n*t+t?l-n*t:t,ymin:r<=i*e?0:r<i*e+e?r-i*e:e,xmax:l+o<=n*t?0:l+o<n*t+t?l+o-n*t:t,ymax:r+s<=i*e?0:r+s<i*e+e?r+s-i*e:e}}function m(t,e){if(!t||0===t.length)return null;const n=t.filter((t=>t.pixelBlock))[0];if(!n)return null;const i=(n.extent.xmax-n.extent.xmin)/n.pixelBlock.width,l=(n.extent.ymax-n.extent.ymin)/n.pixelBlock.height,r=.01*Math.min(i,l),o=t.sort(((t,e)=>Math.abs(t.extent.ymax-e.extent.ymax)>r?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>r?t.extent.xmin-e.extent.xmin:0)),s=Math.min.apply(null,o.map((t=>t.extent.xmin))),a=Math.min.apply(null,o.map((t=>t.extent.ymin))),h=Math.max.apply(null,o.map((t=>t.extent.xmax))),f=Math.max.apply(null,o.map((t=>t.extent.ymax))),u={x:Math.round((e.xmin-s)/i),y:Math.round((f-e.ymax)/l)},c={width:Math.round((h-s)/i),height:Math.round((f-a)/l)},x={width:Math.round((e.xmax-e.xmin)/i),height:Math.round((e.ymax-e.ymin)/l)};if(Math.round(c.width/n.pixelBlock.width)*Math.round(c.height/n.pixelBlock.height)!==o.length||u.x<0||u.y<0||c.width<x.width||c.height<x.height)return null;return{extent:e,pixelBlock:d(o.map((t=>t.pixelBlock)),c,u,x)}}function p(t,e,n,i,l,r){const{width:o,height:s}=n.block,{x:a,y:h}=n.offset,{width:f,height:u}=n.mosaic,c=x(o,s,i,l,a,h,f,u);let m=0,p=0;if(r){const t=r.hasGCSSShiftTransform?360:r.halfWorldWidth,e=o*r.resolutionX,n=r.startX+i*e,l=n+e;n<t&&l>t?p=r.rightPadding:n>=t&&(m=r.leftMargin-r.rightPadding,p=0)}if(c.xmax-=p,\"number\"!=typeof e)for(let x=c.ymin;x<c.ymax;x++){const n=(l*s+x-h)*f+(i*o-a)+m,r=x*o;for(let i=c.xmin;i<c.xmax;i++)t[n+i]=e[r+i]}else for(let x=c.ymin;x<c.ymax;x++){const n=(l*s+x-h)*f+(i*o-a)+m;for(let i=c.xmin;i<c.xmax;i++)t[n+i]=e}}function d(n,i,l,r,o){const s=n.filter((t=>e(t)))[0];if(null==s)return null;const a=r?r.width:i.width,h=r?r.height:i.height,f=s.width,u=s.height,c=i.width/f,x=i.height/u,m={offset:l||{x:0,y:0},mosaic:r||i,block:{width:f,height:u}},d=s.pixelType,g=t.getPixelArrayConstructor(d),y=s.pixels.length,w=[];let M,k;for(let t=0;t<y;t++){k=new g(a*h);for(let i=0;i<x;i++)for(let l=0;l<c;l++){const r=n[i*c+l];e(r)&&(M=r.pixels[t],p(k,M,m,l,i,o))}w.push(k)}let A;if(n.some((t=>null==t||t.mask&&t.mask.length>0))){A=new Uint8Array(a*h);for(let t=0;t<x;t++)for(let e=0;e<c;e++){const i=n[t*c+e],l=i?i.mask:null;p(A,l||(i?1:0),m,e,t,o)}}const U=new t({width:a,height:h,pixels:w,pixelType:d,mask:A});return U.updateStatistics(),U}function g(t,n,i){if(!e(t))return null;const{width:l,height:r}=t,o=n.x,s=n.y,a=i.width+o,h=i.height+s;if(o<0||s<0||a>l||h>r)return t;if(0===o&&0===s&&a===l&&h===r)return t;t.mask||(t.mask=new Uint8Array(l*r));const f=t.mask;for(let e=0;e<r;e++){const t=e*l;for(let n=0;n<l;n++)f[t+n]=e<s||e>=h||n<o||n>=a?0:1}return t.updateStatistics(),t}function y(t){if(!e(t))return null;const n=t.clone(),{width:i,height:l,pixels:r,mask:o}=t,s=r[0],a=n.pixels[0];for(let e=2;e<l-1;e++){const t=new Map;for(let l=e-2;l<e+2;l++)for(let e=0;e<4;e++){const n=l*i+e;k(t,s[n],o?o[n]:1)}a[e*i]=w(t),a[e*i+1]=a[e*i+2]=a[e*i];let n=3;for(;n<i-1;n++){let l=(e-2)*i+n+1;k(t,s[l],o?o[l]:1),l=(e-1)*i+n+1,k(t,s[l],o?o[l]:1),l=e*i+n+1,k(t,s[l],o?o[l]:1),l=(e+1)*i+n+1,k(t,s[l],o?o[l]:1),l=(e-2)*i+n-3,M(t,s[l],o?o[l]:1),l=(e-1)*i+n-3,M(t,s[l],o?o[l]:1),l=e*i+n-3,M(t,s[l],o?o[l]:1),l=(e+1)*i+n-3,M(t,s[l],o?o[l]:1),a[e*i+n]=w(t)}a[e*i+n+1]=a[e*i+n]}for(let e=0;e<i;e++)a[e]=a[i+e]=a[2*i+e],a[(l-1)*i+e]=a[(l-2)*i+e];return n.updateStatistics(),n}function w(t){if(0===t.size)return 0;let e=0,n=-1,i=0;const l=t.keys();let r=l.next();for(;!r.done;)i=t.get(r.value),i>e&&(n=r.value,e=i),r=l.next();return n}function M(t,e,n){if(0===n)return;const i=t.get(e);1===i?t.delete(e):t.set(e,i-1)}function k(t,e,n){0!==n&&t.set(e,t.has(e)?t.get(e)+1:1)}function A(n,i,l){let{x:r,y:o}=i;const{width:s,height:a}=l;if(0===r&&0===o&&a===n.height&&s===n.width)return n;const{width:h,height:f}=n,u=Math.max(0,o),c=Math.max(0,r),x=Math.min(r+s,h),m=Math.min(o+a,f);if(x<0||m<0||!e(n))return null;r=Math.max(0,-r),o=Math.max(0,-o);const{pixels:p,mask:d}=n,g=s*a,y=p.length,w=[];for(let e=0;e<y;e++){const i=p[e],l=t.createEmptyBand(n.pixelType,g);for(let t=u;t<m;t++){const e=t*h;let n=(t+o-u)*s+r;for(let t=c;t<x;t++)l[n++]=i[e+t]}w.push(l)}const M=new Uint8Array(g);for(let t=u;t<m;t++){const e=t*h;let n=(t+o-u)*s+r;for(let t=c;t<x;t++)M[n++]=d?d[e+t]:1}const k=new t({width:l.width,height:l.height,pixelType:n.pixelType,pixels:w,mask:M});return k.updateStatistics(),k}function U(n,i=!0){if(!e(n))return null;const{pixels:l,width:r,height:o,mask:s,pixelType:a}=n,h=[],f=Math.round(r/2),u=Math.round(o/2),c=o-1,x=r-1;for(let e=0;e<l.length;e++){const n=l[e],s=t.createEmptyBand(a,f*u);let m=0;for(let t=0;t<o;t+=2)for(let e=0;e<r;e+=2){const l=n[t*r+e];if(i){const i=e===x?l:n[t*r+e+1],o=t===c?l:n[t*r+e+r],a=e===x?o:t===c?i:n[t*r+e+r+1];s[m++]=(l+i+o+a)/4}else s[m++]=l}h.push(s)}let m=null;if(s){m=new Uint8Array(f*u);let t=0;for(let e=0;e<o;e+=2)for(let n=0;n<r;n+=2){const l=s[e*r+n];if(i){const i=n===x?l:s[e*r+n+1],o=e===c?l:s[e*r+n+r],a=n===x?o:e===c?i:s[e*r+n+r+1];m[t++]=l*i*o*a?1:0}else m[t++]=l}}return new t({width:f,height:u,pixelType:a,pixels:h,mask:m})}function C(t,n,i){if(!e(t))return null;const{width:l,height:r}=n;let{width:o,height:s}=t;const a=new Map,h={x:0,y:0},f=null==i?1:1+i;let u=t;for(let e=0;e<f;e++){const t=Math.ceil(o/l),i=Math.ceil(s/r);for(let o=0;o<i;o++){h.y=o*r;for(let i=0;i<t;i++){h.x=i*l;const t=A(u,h,n);a.set(`${e}/${o}/${i}`,t)}}e<f-1&&(u=U(u)),o=Math.round(o/2),s=Math.round(s/2)}return a}function T(n,i,l,r,o=\"nearest\"){if(!e(n))return null;\"majority\"===o&&(n=y(n));const{pixels:s,mask:a,pixelType:h}=n,f=n.width,u=n.height,c=t.getPixelArrayConstructor(h),x=s.length,{width:m,height:p}=i,d=r.cols,g=r.rows,w=Math.ceil(m/d),M=Math.ceil(p/g);let k,A,U,C,T,v,S,B=!1;for(let t=0;t<l.length;t+=3)-1===l[t]&&-1===l[t+1]&&-1===l[t+2]&&(B=!0);const O=new Float32Array(m*p),P=new Float32Array(m*p);let b,z,I=0;const j=\"majority\"===o?0:.5;for(let t=0;t<M;t++)for(let e=0;e<w;e++){k=12*(t*w+e),A=l[k],U=l[k+1],C=l[k+2],T=l[k+3],v=l[k+4],S=l[k+5];for(let n=0;n<g;n++){I=(t*g+n)*m+e*d,z=(n+.5)/g;for(let t=0;t<n;t++)b=(t+.5)/d,O[I+t]=Math.round((A*b+U*z+C)*f-j),P[I+t]=Math.round((T*b+v*z+S)*u-j)}k+=6,A=l[k],U=l[k+1],C=l[k+2],T=l[k+3],v=l[k+4],S=l[k+5];for(let n=0;n<g;n++){I=(t*g+n)*m+e*d,z=(n+.5)/g;for(let t=n;t<d;t++)b=(t+.5)/d,O[I+t]=Math.round((A*b+U*z+C)*f-j),P[I+t]=Math.round((T*b+v*z+S)*u-j)}}const D=(t,e)=>{for(let n=0;n<p;n++){k=n*m;for(let n=0;n<m;n++)O[k]<0||P[k]<0?t[k]=0:t[k]=e[O[k]+P[k]*f],k++}},E=[];let $;for(let t=0;t<x;t++)$=new c(m*p),D($,s[t]),E.push($);const q=new t({width:m,height:p,pixelType:h,pixels:E});if(a)q.mask=new Uint8Array(m*p),D(q.mask,a);else if(B){q.mask=new Uint8Array(m*p);for(let t=0;t<m*p;t++)q.mask[t]=O[t]<0||P[t]<0?0:1}return q.updateStatistics(),q}export{T as approximateTransform,A as clip,l as colorize,i as createColormapLUT,a as createContrastBrightnessLUT,h as createHistogramEqualizationLUT,s as createStretchLUT,o as estimateStatisticsFromHistograms,r as estimateStatisticsHistograms,n as extractBands,x as getClipBounds,u as lookupPixels,d as mosaic,m as mosaicPixelData,c as remapColor,y as resampleByMajority,g as setValidBoundary,C as split,f as stretch};\n"]},"metadata":{},"sourceType":"module"}