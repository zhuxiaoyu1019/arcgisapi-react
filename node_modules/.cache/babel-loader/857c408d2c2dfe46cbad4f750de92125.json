{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { trackAccess as s, runTracked as t, trackExplicitDependencies as e } from \"./tracking.js\";\nimport { ObservationHandle as i } from \"./tracking/ObservationHandle.js\";\n\nclass n {\n  constructor(s, t, e) {\n    this.properties = s, this.propertyName = t, this.metadata = e, this._observers = null, this._accessed = null, this._handles = null, this.flags = 1 | (e.nonNullable ? 8 : 0) | (e.hasOwnProperty(\"value\") ? 16 : 0) | (void 0 === e.get ? 32 : 0) | (void 0 === e.dependsOn ? 64 : 0);\n  }\n\n  destroy() {\n    this._accessed = null, this._observers = null, this._clearObservationHandles();\n  }\n\n  getComputed() {\n    s(this);\n    const i = this.properties.store,\n          n = this.propertyName,\n          l = this.flags,\n          r = i.get(n);\n    if (4 & l) return r;\n    if (1 & ~l && i.has(n)) return r;\n    this.flags |= 4;\n    const h = this.properties.host;\n    let o;\n    64 & l ? o = t(this, this.metadata.get, h) : (e(h, this), o = this.metadata.get.call(h)), i.set(n, o, 1);\n    const a = i.get(n);\n    return a === r ? this.flags &= -2 : this.commit(), this.flags &= -5, a;\n  }\n\n  onObservableAccessed(s) {\n    s !== this && (null === this._accessed && (this._accessed = []), this._accessed.includes(s) || this._accessed.push(s));\n  }\n\n  onTrackingEnd() {\n    this._clearObservationHandles(), this.flags |= 32;\n    const s = this._accessed;\n    if (null === s) return;\n    let t = this._handles;\n    null === t && (t = this._handles = []);\n\n    for (let e = 0; e < s.length; ++e) t.push(s[e].observe(this));\n\n    s.length = 0;\n  }\n\n  observe(s) {\n    return null === this._observers && (this._observers = []), this._observers.includes(s) || this._observers.push(s), new i(this._observers, s);\n  }\n\n  notifyChange() {\n    this.onInvalidated(), this.onCommitted();\n  }\n\n  invalidate() {\n    this.onInvalidated();\n  }\n\n  onInvalidated() {\n    2 & ~this.flags && (this.flags |= 1);\n    const s = this._observers;\n    if (null !== s) for (let t = 0; t < s.length; ++t) s[t].onInvalidated();\n  }\n\n  commit() {\n    this.flags &= -2, this.onCommitted();\n  }\n\n  onCommitted() {\n    if (null === this._observers) return;\n\n    const s = this._observers.slice();\n\n    for (let t = 0; t < s.length; ++t) s[t].onCommitted();\n  }\n\n  _clearObservationHandles() {\n    const s = this._handles;\n\n    if (null !== s) {\n      for (let t = 0; t < s.length; ++t) s[t].remove();\n\n      s.length = 0;\n    }\n  }\n\n}\n\nexport { n as Property };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/core/accessorSupport/Property.js"],"names":["trackAccess","s","runTracked","t","trackExplicitDependencies","e","ObservationHandle","i","n","constructor","properties","propertyName","metadata","_observers","_accessed","_handles","flags","nonNullable","hasOwnProperty","get","dependsOn","destroy","_clearObservationHandles","getComputed","store","l","r","has","h","host","o","call","set","a","commit","onObservableAccessed","includes","push","onTrackingEnd","length","observe","notifyChange","onInvalidated","onCommitted","invalidate","slice","remove","Property"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{trackAccess as s,runTracked as t,trackExplicitDependencies as e}from\"./tracking.js\";import{ObservationHandle as i}from\"./tracking/ObservationHandle.js\";class n{constructor(s,t,e){this.properties=s,this.propertyName=t,this.metadata=e,this._observers=null,this._accessed=null,this._handles=null,this.flags=1|(e.nonNullable?8:0)|(e.hasOwnProperty(\"value\")?16:0)|(void 0===e.get?32:0)|(void 0===e.dependsOn?64:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){s(this);const i=this.properties.store,n=this.propertyName,l=this.flags,r=i.get(n);if(4&l)return r;if(1&~l&&i.has(n))return r;this.flags|=4;const h=this.properties.host;let o;64&l?o=t(this,this.metadata.get,h):(e(h,this),o=this.metadata.get.call(h)),i.set(n,o,1);const a=i.get(n);return a===r?this.flags&=-2:this.commit(),this.flags&=-5,a}onObservableAccessed(s){s!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(s)||this._accessed.push(s))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const s=this._accessed;if(null===s)return;let t=this._handles;null===t&&(t=this._handles=[]);for(let e=0;e<s.length;++e)t.push(s[e].observe(this));s.length=0}observe(s){return null===this._observers&&(this._observers=[]),this._observers.includes(s)||this._observers.push(s),new i(this._observers,s)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){2&~this.flags&&(this.flags|=1);const s=this._observers;if(null!==s)for(let t=0;t<s.length;++t)s[t].onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onCommitted(){if(null===this._observers)return;const s=this._observers.slice();for(let t=0;t<s.length;++t)s[t].onCommitted()}_clearObservationHandles(){const s=this._handles;if(null!==s){for(let t=0;t<s.length;++t)s[t].remove();s.length=0}}}export{n as Property};\n"]},"metadata":{},"sourceType":"module"}