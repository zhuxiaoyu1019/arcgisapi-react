{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { clone as t } from \"../../core/lang.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as i } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport r from \"./SearchSource.js\";\nimport { getResults as l, getSuggestions as a } from \"./support/layerSearchUtils.js\";\nvar o;\nlet h = o = class extends r {\n  constructor(e) {\n    super(e), this.displayField = null, this.exactMatch = null, this.orderByFields = null, this.searchFields = null, this.searchTemplate = null, this.suggestionTemplate = null, this.getResults = (e, t) => l({\n      source: this,\n      ...e\n    }, t), this.getSuggestions = (e, t) => a({\n      source: this,\n      ...e\n    }, t);\n  }\n\n  set layer(e) {\n    this._set(\"layer\", e), e && e.load().catch(() => {});\n  }\n\n  get name() {\n    return this._getLayerTitle() || \"\";\n  }\n\n  set name(e) {\n    void 0 !== e ? this._override(\"name\", e) : this._clearOverride(\"name\");\n  }\n\n  clone() {\n    return new o({\n      autoNavigate: this.autoNavigate,\n      filter: this.filter,\n      maxResults: this.maxResults,\n      maxSuggestions: this.maxSuggestions,\n      minSuggestCharacters: this.minSuggestCharacters,\n      outFields: this.outFields ? t(this.outFields) : null,\n      placeholder: this.placeholder,\n      popupEnabled: this.popupEnabled,\n      prefix: this.prefix,\n      resultGraphicEnabled: this.resultGraphicEnabled,\n      resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null,\n      suggestionsEnabled: this.suggestionsEnabled,\n      suffix: this.suffix,\n      withinViewEnabled: this.withinViewEnabled,\n      displayField: this.displayField,\n      exactMatch: this.exactMatch,\n      layer: this.layer,\n      searchFields: this.searchFields ? t(this.searchFields) : null,\n      suggestionTemplate: this.suggestionTemplate,\n      zoomScale: this.zoomScale\n    });\n  }\n\n  _getFirstStringField() {\n    var e, t;\n    return null != (e = null == (t = this.layer.fieldsIndex.fields.find(e => \"string\" === e.type)) ? void 0 : t.name) ? e : \"\";\n  }\n\n  _getDisplayField() {\n    return this.displayField || this.layer.displayField || this._getFirstStringField();\n  }\n\n  _getSearchFieldsString() {\n    const {\n      layer: e,\n      searchFields: t\n    } = this;\n    if (!e.loaded) return \"\";\n    return `: ${(t || [this._getDisplayField()]).map(t => {\n      const s = e.getField(t);\n      return s && s.alias || t;\n    }).join(\", \")}`;\n  }\n\n  _getLayerTitle() {\n    const {\n      layer: e\n    } = this;\n    if (!e) return;\n    const {\n      title: t\n    } = e;\n    return t ? `${t}${this._getSearchFieldsString()}` : void 0;\n  }\n\n};\ne([s({\n  json: {\n    read: {\n      source: \"field.name\"\n    },\n    write: {\n      target: \"field.name\"\n    }\n  }\n})], h.prototype, \"displayField\", void 0), e([s({\n  json: {\n    read: {\n      source: \"field.exactMatch\"\n    },\n    write: {\n      target: \"field.exactMatch\"\n    }\n  }\n})], h.prototype, \"exactMatch\", void 0), e([s({\n  value: null\n})], h.prototype, \"layer\", null), e([s()], h.prototype, \"name\", null), e([s({\n  type: [String],\n  json: {\n    write: !0\n  }\n})], h.prototype, \"orderByFields\", void 0), e([s()], h.prototype, \"searchFields\", void 0), e([s()], h.prototype, \"searchTemplate\", void 0), e([s()], h.prototype, \"suggestionTemplate\", void 0), h = o = e([i(\"esri.widgets.Search.LayerSearchSource\")], h);\nvar n = h;\nexport default n;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/widgets/Search/LayerSearchSource.js"],"names":["_","e","clone","t","property","s","subclass","i","r","getResults","l","getSuggestions","a","o","h","constructor","displayField","exactMatch","orderByFields","searchFields","searchTemplate","suggestionTemplate","source","layer","_set","load","catch","name","_getLayerTitle","_override","_clearOverride","autoNavigate","filter","maxResults","maxSuggestions","minSuggestCharacters","outFields","placeholder","popupEnabled","prefix","resultGraphicEnabled","resultSymbol","suggestionsEnabled","suffix","withinViewEnabled","zoomScale","_getFirstStringField","fieldsIndex","fields","find","type","_getDisplayField","_getSearchFieldsString","loaded","map","getField","alias","join","title","json","read","write","target","prototype","value","String","n"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{clone as t}from\"../../core/lang.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"./SearchSource.js\";import{getResults as l,getSuggestions as a}from\"./support/layerSearchUtils.js\";var o;let h=o=class extends r{constructor(e){super(e),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,t)=>l({source:this,...e},t),this.getSuggestions=(e,t)=>a({source:this,...e},t)}set layer(e){this._set(\"layer\",e),e&&e.load().catch((()=>{}))}get name(){return this._getLayerTitle()||\"\"}set name(e){void 0!==e?this._override(\"name\",e):this._clearOverride(\"name\")}clone(){return new o({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?t(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?t(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var e,t;return null!=(e=null==(t=this.layer.fieldsIndex.fields.find((e=>\"string\"===e.type)))?void 0:t.name)?e:\"\"}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:e,searchFields:t}=this;if(!e.loaded)return\"\";return`: ${(t||[this._getDisplayField()]).map((t=>{const s=e.getField(t);return s&&s.alias||t})).join(\", \")}`}_getLayerTitle(){const{layer:e}=this;if(!e)return;const{title:t}=e;return t?`${t}${this._getSearchFieldsString()}`:void 0}};e([s({json:{read:{source:\"field.name\"},write:{target:\"field.name\"}}})],h.prototype,\"displayField\",void 0),e([s({json:{read:{source:\"field.exactMatch\"},write:{target:\"field.exactMatch\"}}})],h.prototype,\"exactMatch\",void 0),e([s({value:null})],h.prototype,\"layer\",null),e([s()],h.prototype,\"name\",null),e([s({type:[String],json:{write:!0}})],h.prototype,\"orderByFields\",void 0),e([s()],h.prototype,\"searchFields\",void 0),e([s()],h.prototype,\"searchTemplate\",void 0),e([s()],h.prototype,\"suggestionTemplate\",void 0),h=o=e([i(\"esri.widgets.Search.LayerSearchSource\")],h);var n=h;export default n;\n"]},"metadata":{},"sourceType":"module"}