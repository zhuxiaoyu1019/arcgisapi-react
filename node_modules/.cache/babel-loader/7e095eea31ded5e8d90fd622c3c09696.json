{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as n } from \"../../../core/maybe.js\";\nimport { getMetersPerVerticalUnitForSR as o } from \"../../../core/unitUtils.js\";\nimport { equals as e } from \"../../../geometry/support/spatialReferenceUtils.js\";\n\nfunction t(t, c, l) {\n  if (n(c) || n(l) || l.vcsWkid || e(c, l)) return null;\n  const u = o(c) / o(l);\n  if (1 === u) return null;\n\n  switch (t) {\n    case \"point\":\n    case \"esriGeometryPoint\":\n      return n => i(n, u);\n\n    case \"polyline\":\n    case \"esriGeometryPolyline\":\n      return n => s(n, u);\n\n    case \"polygon\":\n    case \"esriGeometryPolygon\":\n      return n => r(n, u);\n\n    case \"multipoint\":\n    case \"esriGeometryMultipoint\":\n      return n => f(n, u);\n\n    default:\n      return null;\n  }\n}\n\nfunction i(n, o) {\n  n && null != n.z && (n.z *= o);\n}\n\nfunction r(n, o) {\n  if (n) for (const e of n.rings) for (const n of e) n.length > 2 && (n[2] *= o);\n}\n\nfunction s(n, o) {\n  if (n) for (const e of n.paths) for (const n of e) n.length > 2 && (n[2] *= o);\n}\n\nfunction f(n, o) {\n  if (n) for (const e of n.points) e.length > 2 && (e[2] *= o);\n}\n\nfunction c(n, o, e) {\n  if (null == n.hasM || n.hasZ) for (const t of o) for (const n of t) n.length > 2 && (n[2] *= e);\n}\n\nfunction l(n, e, t) {\n  if (!n && !e || !t) return;\n  const i = o(t);\n  u(n, t, i), u(e, t, i);\n}\n\nfunction u(n, o, e) {\n  if (n) for (const t of n) a(t.geometry, o, e);\n}\n\nfunction a(n, t, i) {\n  if (!n || !n.spatialReference || e(n.spatialReference, t)) return;\n  const r = o(n.spatialReference) / i;\n  if (1 !== r) if (\"x\" in n) null != n.z && (n.z *= r);else if (\"rings\" in n) c(n, n.rings, r);else if (\"paths\" in n) c(n, n.paths, r);else if (\"points\" in n && (null == n.hasM || n.hasZ)) for (const o of n.points) o.length > 2 && (o[2] *= r);\n}\n\nexport { t as getGeometryZScaler, l as unapplyEditsZUnitScaling };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/rest/query/operations/zscale.js"],"names":["isNone","n","getMetersPerVerticalUnitForSR","o","equals","e","t","c","l","vcsWkid","u","i","s","r","f","z","rings","length","paths","points","hasM","hasZ","a","geometry","spatialReference","getGeometryZScaler","unapplyEditsZUnitScaling"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as n}from\"../../../core/maybe.js\";import{getMetersPerVerticalUnitForSR as o}from\"../../../core/unitUtils.js\";import{equals as e}from\"../../../geometry/support/spatialReferenceUtils.js\";function t(t,c,l){if(n(c)||n(l)||l.vcsWkid||e(c,l))return null;const u=o(c)/o(l);if(1===u)return null;switch(t){case\"point\":case\"esriGeometryPoint\":return n=>i(n,u);case\"polyline\":case\"esriGeometryPolyline\":return n=>s(n,u);case\"polygon\":case\"esriGeometryPolygon\":return n=>r(n,u);case\"multipoint\":case\"esriGeometryMultipoint\":return n=>f(n,u);default:return null}}function i(n,o){n&&null!=n.z&&(n.z*=o)}function r(n,o){if(n)for(const e of n.rings)for(const n of e)n.length>2&&(n[2]*=o)}function s(n,o){if(n)for(const e of n.paths)for(const n of e)n.length>2&&(n[2]*=o)}function f(n,o){if(n)for(const e of n.points)e.length>2&&(e[2]*=o)}function c(n,o,e){if(null==n.hasM||n.hasZ)for(const t of o)for(const n of t)n.length>2&&(n[2]*=e)}function l(n,e,t){if(!n&&!e||!t)return;const i=o(t);u(n,t,i),u(e,t,i)}function u(n,o,e){if(n)for(const t of n)a(t.geometry,o,e)}function a(n,t,i){if(!n||!n.spatialReference||e(n.spatialReference,t))return;const r=o(n.spatialReference)/i;if(1!==r)if(\"x\"in n)null!=n.z&&(n.z*=r);else if(\"rings\"in n)c(n,n.rings,r);else if(\"paths\"in n)c(n,n.paths,r);else if(\"points\"in n&&(null==n.hasM||n.hasZ))for(const o of n.points)o.length>2&&(o[2]*=r)}export{t as getGeometryZScaler,l as unapplyEditsZUnitScaling};\n"]},"metadata":{},"sourceType":"module"}