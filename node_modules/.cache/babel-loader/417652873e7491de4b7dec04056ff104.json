{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../../core/Accessor.js\";\nimport r from \"../../../../../core/Handles.js\";\nimport { destroyMaybe as s } from \"../../../../../core/maybe.js\";\nimport { property as a } from \"../../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/Logger.js\";\nimport { subclass as o } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { canProjectWithoutEngine as i } from \"../../../../../geometry/projection.js\";\nimport { getSphericalPCPF as n, WGS84ECEFSpatialReference as m, SphericalECEFSpatialReference as p } from \"../../../../../geometry/projectionEllipsoid.js\";\nimport { MeasurementDataManager as c } from \"./MeasurementData.js\";\nimport { UnitNormalizer as l } from \"../support/UnitNormalizer.js\";\nlet h = class extends t {\n  constructor(e) {\n    super(e), this._handles = new r();\n  }\n\n  initialize() {\n    const e = this.view.spatialReference,\n          t = n(e),\n          r = t === p ? m : t,\n          s = !e || i(e, r) ? r : e,\n          a = new l(s);\n    this._measurementDataManager = new c(this.view, a), this._handles.add(this.layerViewData.path.on(\"change\", () => this._update())), this._update();\n  }\n\n  destroy() {\n    this._handles = s(this._handles);\n  }\n\n  _update() {\n    const e = this.layerViewData,\n          t = {\n      maxRelativeErrorCoplanar: .005,\n      maxRelativeErrorAlmostCoplanar: .01,\n      verticalAngleThreshold: 80\n    };\n\n    this._measurementDataManager.update(e.path, this.view, e.validMeasurement, t);\n\n    const r = this._measurementDataManager.getData();\n\n    this._set(\"measurementData\", r), e.measurementData = r;\n  }\n\n};\ne([a({\n  constructOnly: !0\n})], h.prototype, \"view\", void 0), e([a({\n  constructOnly: !0\n})], h.prototype, \"analysis\", void 0), e([a({\n  readOnly: !0\n})], h.prototype, \"measurementData\", void 0), e([a({\n  constructOnly: !0\n})], h.prototype, \"layerViewData\", void 0), h = e([o(\"esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementController\")], h);\nexport { h as AreaMeasurementController };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementController.js"],"names":["_","e","t","r","destroyMaybe","s","property","a","subclass","o","canProjectWithoutEngine","i","getSphericalPCPF","n","WGS84ECEFSpatialReference","m","SphericalECEFSpatialReference","p","MeasurementDataManager","c","UnitNormalizer","l","h","constructor","_handles","initialize","view","spatialReference","_measurementDataManager","add","layerViewData","path","on","_update","destroy","maxRelativeErrorCoplanar","maxRelativeErrorAlmostCoplanar","verticalAngleThreshold","update","validMeasurement","getData","_set","measurementData","constructOnly","prototype","readOnly","AreaMeasurementController"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import r from\"../../../../../core/Handles.js\";import{destroyMaybe as s}from\"../../../../../core/maybe.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{canProjectWithoutEngine as i}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as n,WGS84ECEFSpatialReference as m,SphericalECEFSpatialReference as p}from\"../../../../../geometry/projectionEllipsoid.js\";import{MeasurementDataManager as c}from\"./MeasurementData.js\";import{UnitNormalizer as l}from\"../support/UnitNormalizer.js\";let h=class extends t{constructor(e){super(e),this._handles=new r}initialize(){const e=this.view.spatialReference,t=n(e),r=t===p?m:t,s=!e||i(e,r)?r:e,a=new l(s);this._measurementDataManager=new c(this.view,a),this._handles.add(this.layerViewData.path.on(\"change\",(()=>this._update()))),this._update()}destroy(){this._handles=s(this._handles)}_update(){const e=this.layerViewData,t={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80};this._measurementDataManager.update(e.path,this.view,e.validMeasurement,t);const r=this._measurementDataManager.getData();this._set(\"measurementData\",r),e.measurementData=r}};e([a({constructOnly:!0})],h.prototype,\"view\",void 0),e([a({constructOnly:!0})],h.prototype,\"analysis\",void 0),e([a({readOnly:!0})],h.prototype,\"measurementData\",void 0),e([a({constructOnly:!0})],h.prototype,\"layerViewData\",void 0),h=e([o(\"esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementController\")],h);export{h as AreaMeasurementController};\n"]},"metadata":{},"sourceType":"module"}