{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { clamp as t } from \"../../core/mathUtils.js\";\nimport { FilteredFiniteDifference as e } from \"./FilteredFiniteDifference.js\";\nimport { Momentum as i } from \"./Momentum.js\";\n\nclass s {\n  constructor(t = 2.5, i = .01, s = .95, l = 12) {\n    this.minimumInitialVelocity = t, this.stopVelocity = i, this.friction = s, this.maxVelocity = l, this.enabled = !0, this.value = new e(.8), this.time = new e(.3);\n  }\n\n  add(t, e) {\n    if (this.enabled) {\n      if (this.time.hasLastValue) {\n        if (this.time.computeDelta(e) < .01) return;\n\n        if (this.value.hasFilteredDelta) {\n          const e = this.value.computeDelta(t);\n          this.value.filteredDelta * e < 0 && this.value.reset();\n        }\n      }\n\n      this.time.update(e), this.value.update(t);\n    }\n  }\n\n  reset() {\n    this.value.reset(), this.time.reset();\n  }\n\n  evaluateMomentum() {\n    if (!this.enabled || !this.value.hasFilteredDelta) return null;\n    let e = this.value.filteredDelta / this.time.filteredDelta;\n    return e = t(e, -this.maxVelocity, this.maxVelocity), Math.abs(e) < this.minimumInitialVelocity ? null : this.createMomentum(e, this.stopVelocity, this.friction);\n  }\n\n  createMomentum(t, e, s) {\n    return new i(t, e, s);\n  }\n\n}\n\nexport { s as MomentumEstimator };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/navigation/MomentumEstimator.js"],"names":["clamp","t","FilteredFiniteDifference","e","Momentum","i","s","constructor","l","minimumInitialVelocity","stopVelocity","friction","maxVelocity","enabled","value","time","add","hasLastValue","computeDelta","hasFilteredDelta","filteredDelta","reset","update","evaluateMomentum","Math","abs","createMomentum","MomentumEstimator"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,KAAK,IAAIC,CAAhB,QAAsB,yBAAtB;AAAgD,SAAOC,wBAAwB,IAAIC,CAAnC,QAAyC,+BAAzC;AAAyE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,eAAzB;;AAAyC,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACN,CAAC,GAAC,GAAH,EAAOI,CAAC,GAAC,GAAT,EAAaC,CAAC,GAAC,GAAf,EAAmBE,CAAC,GAAC,EAArB,EAAwB;AAAC,SAAKC,sBAAL,GAA4BR,CAA5B,EAA8B,KAAKS,YAAL,GAAkBL,CAAhD,EAAkD,KAAKM,QAAL,GAAcL,CAAhE,EAAkE,KAAKM,WAAL,GAAiBJ,CAAnF,EAAqF,KAAKK,OAAL,GAAa,CAAC,CAAnG,EAAqG,KAAKC,KAAL,GAAW,IAAIX,CAAJ,CAAM,EAAN,CAAhH,EAA0H,KAAKY,IAAL,GAAU,IAAIZ,CAAJ,CAAM,EAAN,CAApI;AAA8I;;AAAAa,EAAAA,GAAG,CAACf,CAAD,EAAGE,CAAH,EAAK;AAAC,QAAG,KAAKU,OAAR,EAAgB;AAAC,UAAG,KAAKE,IAAL,CAAUE,YAAb,EAA0B;AAAC,YAAG,KAAKF,IAAL,CAAUG,YAAV,CAAuBf,CAAvB,IAA0B,GAA7B,EAAiC;;AAAO,YAAG,KAAKW,KAAL,CAAWK,gBAAd,EAA+B;AAAC,gBAAMhB,CAAC,GAAC,KAAKW,KAAL,CAAWI,YAAX,CAAwBjB,CAAxB,CAAR;AAAmC,eAAKa,KAAL,CAAWM,aAAX,GAAyBjB,CAAzB,GAA2B,CAA3B,IAA8B,KAAKW,KAAL,CAAWO,KAAX,EAA9B;AAAiD;AAAC;;AAAA,WAAKN,IAAL,CAAUO,MAAV,CAAiBnB,CAAjB,GAAoB,KAAKW,KAAL,CAAWQ,MAAX,CAAkBrB,CAAlB,CAApB;AAAyC;AAAC;;AAAAoB,EAAAA,KAAK,GAAE;AAAC,SAAKP,KAAL,CAAWO,KAAX,IAAmB,KAAKN,IAAL,CAAUM,KAAV,EAAnB;AAAqC;;AAAAE,EAAAA,gBAAgB,GAAE;AAAC,QAAG,CAAC,KAAKV,OAAN,IAAe,CAAC,KAAKC,KAAL,CAAWK,gBAA9B,EAA+C,OAAO,IAAP;AAAY,QAAIhB,CAAC,GAAC,KAAKW,KAAL,CAAWM,aAAX,GAAyB,KAAKL,IAAL,CAAUK,aAAzC;AAAuD,WAAOjB,CAAC,GAACF,CAAC,CAACE,CAAD,EAAG,CAAC,KAAKS,WAAT,EAAqB,KAAKA,WAA1B,CAAH,EAA0CY,IAAI,CAACC,GAAL,CAAStB,CAAT,IAAY,KAAKM,sBAAjB,GAAwC,IAAxC,GAA6C,KAAKiB,cAAL,CAAoBvB,CAApB,EAAsB,KAAKO,YAA3B,EAAwC,KAAKC,QAA7C,CAA9F;AAAqJ;;AAAAe,EAAAA,cAAc,CAACzB,CAAD,EAAGE,CAAH,EAAKG,CAAL,EAAO;AAAC,WAAO,IAAID,CAAJ,CAAMJ,CAAN,EAAQE,CAAR,EAAUG,CAAV,CAAP;AAAoB;;AAAhyB;;AAAiyB,SAAOA,CAAC,IAAIqB,iBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{FilteredFiniteDifference as e}from\"./FilteredFiniteDifference.js\";import{Momentum as i}from\"./Momentum.js\";class s{constructor(t=2.5,i=.01,s=.95,l=12){this.minimumInitialVelocity=t,this.stopVelocity=i,this.friction=s,this.maxVelocity=l,this.enabled=!0,this.value=new e(.8),this.time=new e(.3)}add(t,e){if(this.enabled){if(this.time.hasLastValue){if(this.time.computeDelta(e)<.01)return;if(this.value.hasFilteredDelta){const e=this.value.computeDelta(t);this.value.filteredDelta*e<0&&this.value.reset()}}this.time.update(e),this.value.update(t)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta)return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=t(e,-this.maxVelocity,this.maxVelocity),Math.abs(e)<this.minimumInitialVelocity?null:this.createMomentum(e,this.stopVelocity,this.friction)}createMomentum(t,e,s){return new i(t,e,s)}}export{s as MomentumEstimator};\n"]},"metadata":{},"sourceType":"module"}