{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../Accessor.js\";\nimport e from \"../Collection.js\";\nimport { isNone as n, isSome as o } from \"../maybe.js\";\nimport { getProperties as r } from \"./utils.js\";\nconst f = [\"esri.Color\", \"esri.portal.Portal\", \"esri.symbols.support.Symbol3DAnchorPosition2D\", \"esri.symbols.support.Symbol3DAnchorPosition3D\"];\n\nfunction i(e) {\n  return e instanceof t;\n}\n\nfunction c(t) {\n  return t instanceof e ? Object.keys(t.items) : i(t) ? r(t).keys() : t ? Object.keys(t) : [];\n}\n\nfunction u(t, n) {\n  return t instanceof e ? t.items[n] : t[n];\n}\n\nfunction l(t, e) {\n  return !(!Array.isArray(t) || !Array.isArray(e)) && t.length !== e.length;\n}\n\nfunction s(t) {\n  return t ? t.declaredClass : null;\n}\n\nfunction p(t, e) {\n  const n = t.diff;\n  if (n && \"function\" == typeof n) return n(t, e);\n  const r = c(t),\n        a = c(e);\n  if (0 === r.length && 0 === a.length) return;\n  if (!r.length || !a.length || l(t, e)) return {\n    type: \"complete\",\n    oldValue: t,\n    newValue: e\n  };\n  const y = a.filter(t => -1 === r.indexOf(t)),\n        m = r.filter(t => -1 === a.indexOf(t)),\n        d = r.filter(n => a.indexOf(n) > -1 && u(t, n) !== u(e, n)).concat(y, m).sort(),\n        b = s(t);\n  if (b && f.indexOf(b) > -1 && d.length) return {\n    type: \"complete\",\n    oldValue: t,\n    newValue: e\n  };\n  let h;\n  const j = i(t) && i(e);\n\n  for (const f of d) {\n    const r = u(t, f),\n          i = u(e, f);\n    let c;\n    (j || \"function\" != typeof r && \"function\" != typeof i) && r !== i && (null == r && null == i || (c = n && n[f] && \"function\" == typeof n[f] ? n[f](r, i) : \"object\" == typeof r && \"object\" == typeof i && s(r) === s(i) ? p(r, i) : {\n      type: \"complete\",\n      oldValue: r,\n      newValue: i\n    }, o(c) && (o(h) ? h.diff[f] = c : h = {\n      type: \"partial\",\n      diff: {\n        [f]: c\n      }\n    })));\n  }\n\n  return h;\n}\n\nfunction a(t, e) {\n  if (n(t)) return !1;\n  const o = e.split(\".\");\n  let r = t;\n\n  for (const n of o) {\n    if (\"complete\" === r.type) return !0;\n    if (\"partial\" !== r.type) return !1;\n    {\n      const t = r.diff[n];\n      if (!t) return !1;\n      r = t;\n    }\n  }\n\n  return !0;\n}\n\nfunction y(t, e) {\n  for (const n of e) if (a(t, n)) return !0;\n\n  return !1;\n}\n\nfunction m(t, e) {\n  if (\"function\" != typeof t && \"function\" != typeof e && (t || e)) return !t || !e || \"object\" == typeof t && \"object\" == typeof e && s(t) !== s(e) ? {\n    type: \"complete\",\n    oldValue: t,\n    newValue: e\n  } : p(t, e);\n}\n\nfunction d(t) {\n  if (n(t)) return !0;\n\n  switch (t.type) {\n    case \"complete\":\n      return !1;\n\n    case \"collection\":\n      {\n        const e = t;\n\n        for (const t of e.added) if (!d(t)) return !1;\n\n        for (const t of e.removed) if (!d(t)) return !1;\n\n        for (const t of e.changed) if (!d(t)) return !1;\n\n        return !0;\n      }\n\n    case \"partial\":\n      for (const e in t.diff) {\n        if (!d(t.diff[e])) return !1;\n      }\n\n      return !0;\n  }\n}\n\nexport { m as diff, a as hasDiff, y as hasDiffAny, d as isEmpty };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/core/accessorSupport/diffUtils.js"],"names":["t","e","isNone","n","isSome","o","getProperties","r","f","i","c","Object","keys","items","u","l","Array","isArray","length","s","declaredClass","p","diff","a","type","oldValue","newValue","y","filter","indexOf","m","d","concat","sort","b","h","j","split","added","removed","changed","hasDiff","hasDiffAny","isEmpty"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../Accessor.js\";import e from\"../Collection.js\";import{isNone as n,isSome as o}from\"../maybe.js\";import{getProperties as r}from\"./utils.js\";const f=[\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"];function i(e){return e instanceof t}function c(t){return t instanceof e?Object.keys(t.items):i(t)?r(t).keys():t?Object.keys(t):[]}function u(t,n){return t instanceof e?t.items[n]:t[n]}function l(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function s(t){return t?t.declaredClass:null}function p(t,e){const n=t.diff;if(n&&\"function\"==typeof n)return n(t,e);const r=c(t),a=c(e);if(0===r.length&&0===a.length)return;if(!r.length||!a.length||l(t,e))return{type:\"complete\",oldValue:t,newValue:e};const y=a.filter((t=>-1===r.indexOf(t))),m=r.filter((t=>-1===a.indexOf(t))),d=r.filter((n=>a.indexOf(n)>-1&&u(t,n)!==u(e,n))).concat(y,m).sort(),b=s(t);if(b&&f.indexOf(b)>-1&&d.length)return{type:\"complete\",oldValue:t,newValue:e};let h;const j=i(t)&&i(e);for(const f of d){const r=u(t,f),i=u(e,f);let c;(j||\"function\"!=typeof r&&\"function\"!=typeof i)&&(r!==i&&(null==r&&null==i||(c=n&&n[f]&&\"function\"==typeof n[f]?n[f](r,i):\"object\"==typeof r&&\"object\"==typeof i&&s(r)===s(i)?p(r,i):{type:\"complete\",oldValue:r,newValue:i},o(c)&&(o(h)?h.diff[f]=c:h={type:\"partial\",diff:{[f]:c}}))))}return h}function a(t,e){if(n(t))return!1;const o=e.split(\".\");let r=t;for(const n of o){if(\"complete\"===r.type)return!0;if(\"partial\"!==r.type)return!1;{const t=r.diff[n];if(!t)return!1;r=t}}return!0}function y(t,e){for(const n of e)if(a(t,n))return!0;return!1}function m(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(t||e))return!t||!e||\"object\"==typeof t&&\"object\"==typeof e&&s(t)!==s(e)?{type:\"complete\",oldValue:t,newValue:e}:p(t,e)}function d(t){if(n(t))return!0;switch(t.type){case\"complete\":return!1;case\"collection\":{const e=t;for(const t of e.added)if(!d(t))return!1;for(const t of e.removed)if(!d(t))return!1;for(const t of e.changed)if(!d(t))return!1;return!0}case\"partial\":for(const e in t.diff){if(!d(t.diff[e]))return!1}return!0}}export{m as diff,a as hasDiff,y as hasDiffAny,d as isEmpty};\n"]},"metadata":{},"sourceType":"module"}