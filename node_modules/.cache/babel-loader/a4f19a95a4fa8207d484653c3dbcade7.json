{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { getAssetUrl as t } from \"../../assets.js\";\nimport e from \"../../Color.js\";\nimport r from \"../../request.js\";\nimport o from \"../../core/ItemCache.js\";\nimport { pt2px as n } from \"../../core/screenUtils.js\";\nimport { getCIMSymbolColor as i } from \"./cimSymbolUtils.js\";\nconst s = \"picture-fill\",\n      l = \"simple-fill\",\n      c = \"simple-line\",\n      a = \"simple-marker\",\n      m = \"text\",\n      u = \"cim\",\n      p = {\n  left: \"start\",\n  center: \"middle\",\n  right: \"end\",\n  justify: \"start\"\n},\n      f = {\n  top: \"text-before-edge\",\n  middle: \"central\",\n  baseline: \"alphabetic\",\n  bottom: \"text-after-edge\"\n},\n      d = new o(1e3);\n\nfunction h(t) {\n  let e = t.horizontalAlignment;\n  return e = e && p[e.toLowerCase()] || \"middle\", e;\n}\n\nfunction g(t) {\n  const e = t.verticalAlignment;\n  return e && f[e.toLowerCase()] || \"alphabetic\";\n}\n\nfunction y(t) {\n  return \"bottom\" === t.verticalAlignment ? \"super\" : null;\n}\n\nfunction b(e) {\n  const r = e.style;\n  let o = null;\n  if (e) switch (e.type) {\n    case a:\n      \"cross\" !== r && \"x\" !== r && (o = e.color);\n      break;\n\n    case l:\n      \"solid\" === r ? o = e.color : \"none\" !== r && (o = {\n        type: \"pattern\",\n        x: 0,\n        y: 0,\n        src: t(`esri/symbols/patterns/${r}.png`),\n        width: 5,\n        height: 5\n      });\n      break;\n\n    case s:\n      o = {\n        type: \"pattern\",\n        src: e.url,\n        width: n(e.width) * e.xscale,\n        height: n(e.height) * e.yscale,\n        x: n(e.xoffset),\n        y: n(e.yoffset)\n      };\n      break;\n\n    case m:\n      o = e.color;\n      break;\n\n    case u:\n      o = i(e);\n  }\n  return o;\n}\n\nfunction w(t, e) {\n  const o = t + \"-\" + e;\n  return void 0 !== d.get(o) ? Promise.resolve(d.get(o)) : r(t, {\n    responseType: \"image\"\n  }).then(t => {\n    const r = t.data,\n          n = r.naturalWidth,\n          i = r.naturalHeight,\n          s = document.createElement(\"canvas\");\n    s.width = n, s.height = i;\n    const l = s.getContext(\"2d\");\n    l.fillStyle = e, l.fillRect(0, 0, n, i), l.globalCompositeOperation = \"destination-in\", l.drawImage(r, 0, 0);\n    const c = s.toDataURL();\n    return d.put(o, c), c;\n  });\n}\n\nfunction j(t) {\n  if (!t) return null;\n  let e;\n\n  switch (t.type) {\n    case l:\n    case s:\n    case a:\n      e = j(t.outline);\n      break;\n\n    case c:\n      {\n        const r = n(t.width);\n        \"none\" !== t.style && 0 !== r && (e = {\n          color: t.color,\n          style: x(t.style),\n          width: r,\n          cap: t.cap,\n          join: \"miter\" === t.join ? n(t.miterLimit) : t.join\n        });\n        break;\n      }\n\n    default:\n      e = null;\n  }\n\n  return e;\n}\n\nconst x = function () {\n  const t = {};\n  return function (e) {\n    if (t[e]) return t[e];\n    const r = e.replace(/-/g, \"\");\n    return t[e] = r, r;\n  };\n}(),\n      k = new e([128, 128, 128]);\n\nexport { k as defaultThematicColor, b as getFill, w as getPatternUrlWithColor, h as getSVGAlign, g as getSVGBaseline, y as getSVGBaselineShift, j as getStroke };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/symbols/support/gfxUtils.js"],"names":["getAssetUrl","t","e","r","o","pt2px","n","getCIMSymbolColor","i","s","l","c","a","m","u","p","left","center","right","justify","f","top","middle","baseline","bottom","d","h","horizontalAlignment","toLowerCase","g","verticalAlignment","y","b","style","type","color","x","src","width","height","url","xscale","yscale","xoffset","yoffset","w","get","Promise","resolve","responseType","then","data","naturalWidth","naturalHeight","document","createElement","getContext","fillStyle","fillRect","globalCompositeOperation","drawImage","toDataURL","put","j","outline","cap","join","miterLimit","replace","k","defaultThematicColor","getFill","getPatternUrlWithColor","getSVGAlign","getSVGBaseline","getSVGBaselineShift","getStroke"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";import e from\"../../Color.js\";import r from\"../../request.js\";import o from\"../../core/ItemCache.js\";import{pt2px as n}from\"../../core/screenUtils.js\";import{getCIMSymbolColor as i}from\"./cimSymbolUtils.js\";const s=\"picture-fill\",l=\"simple-fill\",c=\"simple-line\",a=\"simple-marker\",m=\"text\",u=\"cim\",p={left:\"start\",center:\"middle\",right:\"end\",justify:\"start\"},f={top:\"text-before-edge\",middle:\"central\",baseline:\"alphabetic\",bottom:\"text-after-edge\"},d=new o(1e3);function h(t){let e=t.horizontalAlignment;return e=e&&p[e.toLowerCase()]||\"middle\",e}function g(t){const e=t.verticalAlignment;return e&&f[e.toLowerCase()]||\"alphabetic\"}function y(t){return\"bottom\"===t.verticalAlignment?\"super\":null}function b(e){const r=e.style;let o=null;if(e)switch(e.type){case a:\"cross\"!==r&&\"x\"!==r&&(o=e.color);break;case l:\"solid\"===r?o=e.color:\"none\"!==r&&(o={type:\"pattern\",x:0,y:0,src:t(`esri/symbols/patterns/${r}.png`),width:5,height:5});break;case s:o={type:\"pattern\",src:e.url,width:n(e.width)*e.xscale,height:n(e.height)*e.yscale,x:n(e.xoffset),y:n(e.yoffset)};break;case m:o=e.color;break;case u:o=i(e)}return o}function w(t,e){const o=t+\"-\"+e;return void 0!==d.get(o)?Promise.resolve(d.get(o)):r(t,{responseType:\"image\"}).then((t=>{const r=t.data,n=r.naturalWidth,i=r.naturalHeight,s=document.createElement(\"canvas\");s.width=n,s.height=i;const l=s.getContext(\"2d\");l.fillStyle=e,l.fillRect(0,0,n,i),l.globalCompositeOperation=\"destination-in\",l.drawImage(r,0,0);const c=s.toDataURL();return d.put(o,c),c}))}function j(t){if(!t)return null;let e;switch(t.type){case l:case s:case a:e=j(t.outline);break;case c:{const r=n(t.width);\"none\"!==t.style&&0!==r&&(e={color:t.color,style:x(t.style),width:r,cap:t.cap,join:\"miter\"===t.join?n(t.miterLimit):t.join});break}default:e=null}return e}const x=function(){const t={};return function(e){if(t[e])return t[e];const r=e.replace(/-/g,\"\");return t[e]=r,r}}(),k=new e([128,128,128]);export{k as defaultThematicColor,b as getFill,w as getPatternUrlWithColor,h as getSVGAlign,g as getSVGBaseline,y as getSVGBaselineShift,j as getStroke};\n"]},"metadata":{},"sourceType":"module"}