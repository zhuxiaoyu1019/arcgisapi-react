{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { WGLGeometryType as e } from \"../enums.js\";\nimport { createProgramDescriptor as t } from \"../Utils.js\";\nimport a from \"./WGLGeometryBrush.js\";\nimport { LineMaterialKey as o } from \"../materialKey/MaterialKey.js\";\n\nconst i = e => t(e.data, {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: 5122\n  }, {\n    location: 1,\n    name: \"a_id\",\n    count: 4,\n    type: 5121\n  }, {\n    location: 2,\n    name: \"a_color\",\n    count: 4,\n    type: 5121,\n    normalized: !0\n  }, {\n    location: 3,\n    name: \"a_offsetAndNormal\",\n    count: 4,\n    type: 5120\n  }, {\n    location: 4,\n    name: \"a_accumulatedDistanceAndHalfWidth\",\n    count: 2,\n    type: 5123\n  }, {\n    location: 5,\n    name: \"a_tlbr\",\n    count: 4,\n    type: 5123\n  }, {\n    location: 6,\n    name: \"a_segmentDirection\",\n    count: 4,\n    type: 5120\n  }, {\n    location: 7,\n    name: \"a_aux\",\n    count: 2,\n    type: 5123\n  }, {\n    location: 8,\n    name: \"a_zoomRange\",\n    count: 2,\n    type: 5123\n  }]\n});\n\nclass n extends a {\n  dispose() {}\n\n  getGeometryType() {\n    return e.LINE;\n  }\n\n  drawGeometry(e, t, a, n) {\n    const {\n      context: l,\n      painter: r,\n      rendererInfo: s,\n      displayLevel: v\n    } = e,\n          u = o.load(a.materialKey),\n          {\n      bufferLayouts: m,\n      attributes: c\n    } = i(u),\n          f = r.materialManager.getMaterialProgram(e, u, \"materials/line\", c, n),\n          p = 1 / e.pixelRatio,\n          S = 0;\n    l.useProgram(f), this._setSharedUniforms(f, e, t), u.textureBinding && r.textureManager.bindTextures(l, f, u);\n    const d = 2 ** (v - t.key.level) / e.pixelRatio;\n\n    if (f.setUniform1f(\"u_zoomFactor\", d), f.setUniform1f(\"u_blur\", S + p), f.setUniform1f(\"u_antialiasing\", p), u.vvSizeMinMaxValue && f.setUniform4fv(\"u_vvSizeMinMaxValue\", s.vvSizeMinMaxValue), u.vvSizeScaleStops && f.setUniform1f(\"u_vvSizeScaleStopsValue\", s.vvSizeScaleStopsValue), u.vvSizeFieldStops) {\n      const e = s.getSizeVVFieldStops(t.key.level);\n      f.setUniform1fv(\"u_vvSizeFieldStopsValues\", e.values), f.setUniform1fv(\"u_vvSizeFieldStopsSizes\", e.sizes);\n    }\n\n    u.vvSizeUnitValue && f.setUniform1f(\"u_vvSizeUnitValueWorldToPixelsRatio\", s.vvSizeUnitValueToPixelsRatio), u.vvColor && (f.setUniform1fv(\"u_vvColorValues\", s.vvColorValues), f.setUniform4fv(\"u_vvColors\", s.vvColors)), u.vvOpacity && (f.setUniform1fv(\"u_vvOpacityValues\", s.vvOpacityValues), f.setUniform1fv(\"u_vvOpacities\", s.vvOpacities)), l.setFaceCullingEnabled(!1), a.draw(l, m, c);\n  }\n\n}\n\nexport default n;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushLine.js"],"names":["WGLGeometryType","e","createProgramDescriptor","t","a","LineMaterialKey","o","i","data","geometry","location","name","count","type","normalized","n","dispose","getGeometryType","LINE","drawGeometry","context","l","painter","r","rendererInfo","s","displayLevel","v","u","load","materialKey","bufferLayouts","m","attributes","c","f","materialManager","getMaterialProgram","p","pixelRatio","S","useProgram","_setSharedUniforms","textureBinding","textureManager","bindTextures","d","key","level","setUniform1f","vvSizeMinMaxValue","setUniform4fv","vvSizeScaleStops","vvSizeScaleStopsValue","vvSizeFieldStops","getSizeVVFieldStops","setUniform1fv","values","sizes","vvSizeUnitValue","vvSizeUnitValueToPixelsRatio","vvColor","vvColorValues","vvColors","vvOpacity","vvOpacityValues","vvOpacities","setFaceCullingEnabled","draw"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{WGLGeometryType as e}from\"../enums.js\";import{createProgramDescriptor as t}from\"../Utils.js\";import a from\"./WGLGeometryBrush.js\";import{LineMaterialKey as o}from\"../materialKey/MaterialKey.js\";const i=e=>t(e.data,{geometry:[{location:0,name:\"a_pos\",count:2,type:5122},{location:1,name:\"a_id\",count:4,type:5121},{location:2,name:\"a_color\",count:4,type:5121,normalized:!0},{location:3,name:\"a_offsetAndNormal\",count:4,type:5120},{location:4,name:\"a_accumulatedDistanceAndHalfWidth\",count:2,type:5123},{location:5,name:\"a_tlbr\",count:4,type:5123},{location:6,name:\"a_segmentDirection\",count:4,type:5120},{location:7,name:\"a_aux\",count:2,type:5123},{location:8,name:\"a_zoomRange\",count:2,type:5123}]});class n extends a{dispose(){}getGeometryType(){return e.LINE}drawGeometry(e,t,a,n){const{context:l,painter:r,rendererInfo:s,displayLevel:v}=e,u=o.load(a.materialKey),{bufferLayouts:m,attributes:c}=i(u),f=r.materialManager.getMaterialProgram(e,u,\"materials/line\",c,n),p=1/e.pixelRatio,S=0;l.useProgram(f),this._setSharedUniforms(f,e,t),u.textureBinding&&r.textureManager.bindTextures(l,f,u);const d=2**(v-t.key.level)/e.pixelRatio;if(f.setUniform1f(\"u_zoomFactor\",d),f.setUniform1f(\"u_blur\",S+p),f.setUniform1f(\"u_antialiasing\",p),u.vvSizeMinMaxValue&&f.setUniform4fv(\"u_vvSizeMinMaxValue\",s.vvSizeMinMaxValue),u.vvSizeScaleStops&&f.setUniform1f(\"u_vvSizeScaleStopsValue\",s.vvSizeScaleStopsValue),u.vvSizeFieldStops){const e=s.getSizeVVFieldStops(t.key.level);f.setUniform1fv(\"u_vvSizeFieldStopsValues\",e.values),f.setUniform1fv(\"u_vvSizeFieldStopsSizes\",e.sizes)}u.vvSizeUnitValue&&f.setUniform1f(\"u_vvSizeUnitValueWorldToPixelsRatio\",s.vvSizeUnitValueToPixelsRatio),u.vvColor&&(f.setUniform1fv(\"u_vvColorValues\",s.vvColorValues),f.setUniform4fv(\"u_vvColors\",s.vvColors)),u.vvOpacity&&(f.setUniform1fv(\"u_vvOpacityValues\",s.vvOpacityValues),f.setUniform1fv(\"u_vvOpacities\",s.vvOpacities)),l.setFaceCullingEnabled(!1),a.draw(l,m,c)}}export default n;\n"]},"metadata":{},"sourceType":"module"}