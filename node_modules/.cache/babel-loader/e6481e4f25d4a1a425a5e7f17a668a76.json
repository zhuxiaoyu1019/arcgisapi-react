{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { deduplicate as e } from \"../../../../../geometry/support/meshUtils/deduplicate.js\";\nimport { computeNeighbors as t } from \"../../../support/meshProcessing.js\";\nimport { packInterleavedBuffer as n } from \"../../../support/buffer/workerHelper.js\";\nimport { EdgeInputBufferLayout as r } from \"./bufferLayouts.js\";\nimport { RegularEdgeBufferWriter as i, SilhouetteEdgeBufferWriter as s } from \"./edgeBufferWriters.js\";\nimport { extractEdges as o } from \"./edgePreprocessing.js\";\n\nasync function a(e) {\n  const t = u(e),\n        n = f(t),\n        r = [t.data.buffer];\n  return {\n    result: c(n, r),\n    transferList: r\n  };\n}\n\nfunction f(e) {\n  const t = g(e.data, e.skipDeduplicate, e.indices, e.indicesLength);\n  return d.updateSettings(e.writerSettings), l.updateSettings(e.writerSettings), o(t, d, l);\n}\n\nfunction u(e) {\n  return {\n    data: r.createView(e.dataBuffer),\n    indices: \"Uint32Array\" === e.indicesType ? new Uint32Array(e.indicesBuffer) : \"Uint16Array\" === e.indicesType ? new Uint16Array(e.indicesBuffer) : void 0,\n    indicesLength: e.indicesLength,\n    writerSettings: e.writerSettings,\n    skipDeduplicate: e.skipDeduplicate\n  };\n}\n\nfunction c(e, t) {\n  t.push(e.regular.lodInfo.lengths.buffer), t.push(e.silhouette.lodInfo.lengths.buffer);\n  return {\n    regular: {\n      instancesData: n(e.regular.instancesData, t),\n      lodInfo: {\n        lengths: e.regular.lodInfo.lengths.buffer\n      }\n    },\n    silhouette: {\n      instancesData: n(e.silhouette.instancesData, t),\n      lodInfo: {\n        lengths: e.silhouette.lodInfo.lengths.buffer\n      }\n    },\n    averageEdgeLength: e.averageEdgeLength\n  };\n}\n\nfunction g(n, i, s, o) {\n  if (i) {\n    return {\n      faces: s,\n      facesLength: o,\n      neighbors: t(s, o, n.count),\n      vertices: n\n    };\n  }\n\n  const a = e(n.buffer, n.stride / 4, {\n    originalIndices: s,\n    originalIndicesLength: o\n  }),\n        f = t(a.indices, o, a.uniqueCount);\n  return {\n    faces: a.indices,\n    facesLength: a.indices.length,\n    neighbors: f,\n    vertices: r.createView(a.buffer)\n  };\n}\n\nconst d = new i(),\n      l = new s();\nexport { f as work, a as wrappedWork };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js"],"names":["deduplicate","e","computeNeighbors","t","packInterleavedBuffer","n","EdgeInputBufferLayout","r","RegularEdgeBufferWriter","i","SilhouetteEdgeBufferWriter","s","extractEdges","o","a","u","f","data","buffer","result","c","transferList","g","skipDeduplicate","indices","indicesLength","d","updateSettings","writerSettings","l","createView","dataBuffer","indicesType","Uint32Array","indicesBuffer","Uint16Array","push","regular","lodInfo","lengths","silhouette","instancesData","averageEdgeLength","faces","facesLength","neighbors","count","vertices","stride","originalIndices","originalIndicesLength","uniqueCount","length","work","wrappedWork"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,WAAW,IAAIC,CAAtB,QAA4B,0DAA5B;AAAuF,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,oCAAjC;AAAsE,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,yCAAtC;AAAgF,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,oBAAtC;AAA2D,SAAOC,uBAAuB,IAAIC,CAAlC,EAAoCC,0BAA0B,IAAIC,CAAlE,QAAwE,wBAAxE;AAAiG,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,wBAA7B;;AAAsD,eAAeC,CAAf,CAAiBb,CAAjB,EAAmB;AAAC,QAAME,CAAC,GAACY,CAAC,CAACd,CAAD,CAAT;AAAA,QAAaI,CAAC,GAACW,CAAC,CAACb,CAAD,CAAhB;AAAA,QAAoBI,CAAC,GAAC,CAACJ,CAAC,CAACc,IAAF,CAAOC,MAAR,CAAtB;AAAsC,SAAM;AAACC,IAAAA,MAAM,EAACC,CAAC,CAACf,CAAD,EAAGE,CAAH,CAAT;AAAec,IAAAA,YAAY,EAACd;AAA5B,GAAN;AAAqC;;AAAA,SAASS,CAAT,CAAWf,CAAX,EAAa;AAAC,QAAME,CAAC,GAACmB,CAAC,CAACrB,CAAC,CAACgB,IAAH,EAAQhB,CAAC,CAACsB,eAAV,EAA0BtB,CAAC,CAACuB,OAA5B,EAAoCvB,CAAC,CAACwB,aAAtC,CAAT;AAA8D,SAAOC,CAAC,CAACC,cAAF,CAAiB1B,CAAC,CAAC2B,cAAnB,GAAmCC,CAAC,CAACF,cAAF,CAAiB1B,CAAC,CAAC2B,cAAnB,CAAnC,EAAsEf,CAAC,CAACV,CAAD,EAAGuB,CAAH,EAAKG,CAAL,CAA9E;AAAsF;;AAAA,SAASd,CAAT,CAAWd,CAAX,EAAa;AAAC,SAAM;AAACgB,IAAAA,IAAI,EAACV,CAAC,CAACuB,UAAF,CAAa7B,CAAC,CAAC8B,UAAf,CAAN;AAAiCP,IAAAA,OAAO,EAAC,kBAAgBvB,CAAC,CAAC+B,WAAlB,GAA8B,IAAIC,WAAJ,CAAgBhC,CAAC,CAACiC,aAAlB,CAA9B,GAA+D,kBAAgBjC,CAAC,CAAC+B,WAAlB,GAA8B,IAAIG,WAAJ,CAAgBlC,CAAC,CAACiC,aAAlB,CAA9B,GAA+D,KAAK,CAA5K;AAA8KT,IAAAA,aAAa,EAACxB,CAAC,CAACwB,aAA9L;AAA4MG,IAAAA,cAAc,EAAC3B,CAAC,CAAC2B,cAA7N;AAA4OL,IAAAA,eAAe,EAACtB,CAAC,CAACsB;AAA9P,GAAN;AAAqR;;AAAA,SAASH,CAAT,CAAWnB,CAAX,EAAaE,CAAb,EAAe;AAACA,EAAAA,CAAC,CAACiC,IAAF,CAAOnC,CAAC,CAACoC,OAAF,CAAUC,OAAV,CAAkBC,OAAlB,CAA0BrB,MAAjC,GAAyCf,CAAC,CAACiC,IAAF,CAAOnC,CAAC,CAACuC,UAAF,CAAaF,OAAb,CAAqBC,OAArB,CAA6BrB,MAApC,CAAzC;AAAqF,SAAM;AAACmB,IAAAA,OAAO,EAAC;AAACI,MAAAA,aAAa,EAACpC,CAAC,CAACJ,CAAC,CAACoC,OAAF,CAAUI,aAAX,EAAyBtC,CAAzB,CAAhB;AAA4CmC,MAAAA,OAAO,EAAC;AAACC,QAAAA,OAAO,EAACtC,CAAC,CAACoC,OAAF,CAAUC,OAAV,CAAkBC,OAAlB,CAA0BrB;AAAnC;AAApD,KAAT;AAAyGsB,IAAAA,UAAU,EAAC;AAACC,MAAAA,aAAa,EAACpC,CAAC,CAACJ,CAAC,CAACuC,UAAF,CAAaC,aAAd,EAA4BtC,CAA5B,CAAhB;AAA+CmC,MAAAA,OAAO,EAAC;AAACC,QAAAA,OAAO,EAACtC,CAAC,CAACuC,UAAF,CAAaF,OAAb,CAAqBC,OAArB,CAA6BrB;AAAtC;AAAvD,KAApH;AAA0NwB,IAAAA,iBAAiB,EAACzC,CAAC,CAACyC;AAA9O,GAAN;AAAuQ;;AAAA,SAASpB,CAAT,CAAWjB,CAAX,EAAaI,CAAb,EAAeE,CAAf,EAAiBE,CAAjB,EAAmB;AAAC,MAAGJ,CAAH,EAAK;AAAC,WAAM;AAACkC,MAAAA,KAAK,EAAChC,CAAP;AAASiC,MAAAA,WAAW,EAAC/B,CAArB;AAAuBgC,MAAAA,SAAS,EAAC1C,CAAC,CAACQ,CAAD,EAAGE,CAAH,EAAKR,CAAC,CAACyC,KAAP,CAAlC;AAAgDC,MAAAA,QAAQ,EAAC1C;AAAzD,KAAN;AAAkE;;AAAA,QAAMS,CAAC,GAACb,CAAC,CAACI,CAAC,CAACa,MAAH,EAAUb,CAAC,CAAC2C,MAAF,GAAS,CAAnB,EAAqB;AAACC,IAAAA,eAAe,EAACtC,CAAjB;AAAmBuC,IAAAA,qBAAqB,EAACrC;AAAzC,GAArB,CAAT;AAAA,QAA2EG,CAAC,GAACb,CAAC,CAACW,CAAC,CAACU,OAAH,EAAWX,CAAX,EAAaC,CAAC,CAACqC,WAAf,CAA9E;AAA0G,SAAM;AAACR,IAAAA,KAAK,EAAC7B,CAAC,CAACU,OAAT;AAAiBoB,IAAAA,WAAW,EAAC9B,CAAC,CAACU,OAAF,CAAU4B,MAAvC;AAA8CP,IAAAA,SAAS,EAAC7B,CAAxD;AAA0D+B,IAAAA,QAAQ,EAACxC,CAAC,CAACuB,UAAF,CAAahB,CAAC,CAACI,MAAf;AAAnE,GAAN;AAAiG;;AAAA,MAAMQ,CAAC,GAAC,IAAIjB,CAAJ,EAAR;AAAA,MAAcoB,CAAC,GAAC,IAAIlB,CAAJ,EAAhB;AAAsB,SAAOK,CAAC,IAAIqC,IAAZ,EAAiBvC,CAAC,IAAIwC,WAAtB","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{deduplicate as e}from\"../../../../../geometry/support/meshUtils/deduplicate.js\";import{computeNeighbors as t}from\"../../../support/meshProcessing.js\";import{packInterleavedBuffer as n}from\"../../../support/buffer/workerHelper.js\";import{EdgeInputBufferLayout as r}from\"./bufferLayouts.js\";import{RegularEdgeBufferWriter as i,SilhouetteEdgeBufferWriter as s}from\"./edgeBufferWriters.js\";import{extractEdges as o}from\"./edgePreprocessing.js\";async function a(e){const t=u(e),n=f(t),r=[t.data.buffer];return{result:c(n,r),transferList:r}}function f(e){const t=g(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return d.updateSettings(e.writerSettings),l.updateSettings(e.writerSettings),o(t,d,l)}function u(e){return{data:r.createView(e.dataBuffer),indices:\"Uint32Array\"===e.indicesType?new Uint32Array(e.indicesBuffer):\"Uint16Array\"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function c(e,t){t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:n(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:n(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function g(n,i,s,o){if(i){return{faces:s,facesLength:o,neighbors:t(s,o,n.count),vertices:n}}const a=e(n.buffer,n.stride/4,{originalIndices:s,originalIndicesLength:o}),f=t(a.indices,o,a.uniqueCount);return{faces:a.indices,facesLength:a.indices.length,neighbors:f,vertices:r.createView(a.buffer)}}const d=new i,l=new s;export{f as work,a as wrappedWork};\n"]},"metadata":{},"sourceType":"module"}