{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../../../core/maybe.js\";\nimport { MIN_MAX_ZOOM_PRECISION_FACTOR as e, TEXTURE_BINDING_ATTRIBUTE_DATA_0 as i, TEXTURE_BINDING_ATTRIBUTE_DATA_1 as r, TEXTURE_BINDING_ATTRIBUTE_DATA_2 as s, TEXTURE_BINDING_ATTRIBUTE_DATA_3 as a } from \"../definitions.js\";\nimport n from \"./WGLBrush.js\";\n\nclass o extends n {\n  prepareState({\n    context: t\n  }, e, i) {\n    const r = i && -1 !== i.indexOf(\"id\");\n    t.setBlendingEnabled(!r), t.setBlendFunctionSeparate(1, 771, 1, 771), t.setColorMask(!0, !0, !0, !0), t.setStencilWriteMask(0), t.setStencilTestEnabled(!0), t.setStencilFunction(514, e.stencilRef, 255);\n  }\n\n  draw(e, i, r) {\n    const s = this.getGeometryType();\n    i.commit(e);\n    const a = i.getGeometry(s);\n    t(a) || (e.timeline.begin(this.name), e.attributeView.bindTextures(e.context), a.forEachCommand(t => this.drawGeometry(e, i, t, r)));\n  }\n\n  _setSharedUniforms(t, n, o) {\n    const {\n      displayLevel: m,\n      pixelRatio: u,\n      state: f\n    } = n;\n    t.setUniform1f(\"u_pixelRatio\", u), t.setUniformMatrix3fv(\"u_dvsMat3\", o.transforms.dvs), t.setUniformMatrix3fv(\"u_displayViewMat3\", f.displayViewMat3), t.setUniform1f(\"u_currentZoom\", Math.round(m * e)), t.setUniform1i(\"u_attributeTextureSize\", n.attributeView.size), t.setUniform1i(\"u_attributeData0\", i), t.setUniform1i(\"u_attributeData1\", r), t.setUniform1i(\"u_attributeData2\", s), t.setUniform1i(\"u_attributeData3\", a);\n  }\n\n}\n\nexport default o;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrush.js"],"names":["isNone","t","MIN_MAX_ZOOM_PRECISION_FACTOR","e","TEXTURE_BINDING_ATTRIBUTE_DATA_0","i","TEXTURE_BINDING_ATTRIBUTE_DATA_1","r","TEXTURE_BINDING_ATTRIBUTE_DATA_2","s","TEXTURE_BINDING_ATTRIBUTE_DATA_3","a","n","o","prepareState","context","indexOf","setBlendingEnabled","setBlendFunctionSeparate","setColorMask","setStencilWriteMask","setStencilTestEnabled","setStencilFunction","stencilRef","draw","getGeometryType","commit","getGeometry","timeline","begin","name","attributeView","bindTextures","forEachCommand","drawGeometry","_setSharedUniforms","displayLevel","m","pixelRatio","u","state","f","setUniform1f","setUniformMatrix3fv","transforms","dvs","displayViewMat3","Math","round","setUniform1i","size"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,8BAAvB;AAAsD,SAAOC,6BAA6B,IAAIC,CAAxC,EAA0CC,gCAAgC,IAAIC,CAA9E,EAAgFC,gCAAgC,IAAIC,CAApH,EAAsHC,gCAAgC,IAAIC,CAA1J,EAA4JC,gCAAgC,IAAIC,CAAhM,QAAsM,mBAAtM;AAA0N,OAAOC,CAAP,MAAa,eAAb;;AAA6B,MAAMC,CAAN,SAAgBD,CAAhB,CAAiB;AAACE,EAAAA,YAAY,CAAC;AAACC,IAAAA,OAAO,EAACd;AAAT,GAAD,EAAaE,CAAb,EAAeE,CAAf,EAAiB;AAAC,UAAME,CAAC,GAACF,CAAC,IAAE,CAAC,CAAD,KAAKA,CAAC,CAACW,OAAF,CAAU,IAAV,CAAhB;AAAgCf,IAAAA,CAAC,CAACgB,kBAAF,CAAqB,CAACV,CAAtB,GAAyBN,CAAC,CAACiB,wBAAF,CAA2B,CAA3B,EAA6B,GAA7B,EAAiC,CAAjC,EAAmC,GAAnC,CAAzB,EAAiEjB,CAAC,CAACkB,YAAF,CAAe,CAAC,CAAhB,EAAkB,CAAC,CAAnB,EAAqB,CAAC,CAAtB,EAAwB,CAAC,CAAzB,CAAjE,EAA6FlB,CAAC,CAACmB,mBAAF,CAAsB,CAAtB,CAA7F,EAAsHnB,CAAC,CAACoB,qBAAF,CAAwB,CAAC,CAAzB,CAAtH,EAAkJpB,CAAC,CAACqB,kBAAF,CAAqB,GAArB,EAAyBnB,CAAC,CAACoB,UAA3B,EAAsC,GAAtC,CAAlJ;AAA6L;;AAAAC,EAAAA,IAAI,CAACrB,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAME,CAAC,GAAC,KAAKgB,eAAL,EAAR;AAA+BpB,IAAAA,CAAC,CAACqB,MAAF,CAASvB,CAAT;AAAY,UAAMQ,CAAC,GAACN,CAAC,CAACsB,WAAF,CAAclB,CAAd,CAAR;AAAyBR,IAAAA,CAAC,CAACU,CAAD,CAAD,KAAOR,CAAC,CAACyB,QAAF,CAAWC,KAAX,CAAiB,KAAKC,IAAtB,GAA4B3B,CAAC,CAAC4B,aAAF,CAAgBC,YAAhB,CAA6B7B,CAAC,CAACY,OAA/B,CAA5B,EAAoEJ,CAAC,CAACsB,cAAF,CAAkBhC,CAAC,IAAE,KAAKiC,YAAL,CAAkB/B,CAAlB,EAAoBE,CAApB,EAAsBJ,CAAtB,EAAwBM,CAAxB,CAArB,CAA3E;AAA8H;;AAAA4B,EAAAA,kBAAkB,CAAClC,CAAD,EAAGW,CAAH,EAAKC,CAAL,EAAO;AAAC,UAAK;AAACuB,MAAAA,YAAY,EAACC,CAAd;AAAgBC,MAAAA,UAAU,EAACC,CAA3B;AAA6BC,MAAAA,KAAK,EAACC;AAAnC,QAAsC7B,CAA3C;AAA6CX,IAAAA,CAAC,CAACyC,YAAF,CAAe,cAAf,EAA8BH,CAA9B,GAAiCtC,CAAC,CAAC0C,mBAAF,CAAsB,WAAtB,EAAkC9B,CAAC,CAAC+B,UAAF,CAAaC,GAA/C,CAAjC,EAAqF5C,CAAC,CAAC0C,mBAAF,CAAsB,mBAAtB,EAA0CF,CAAC,CAACK,eAA5C,CAArF,EAAkJ7C,CAAC,CAACyC,YAAF,CAAe,eAAf,EAA+BK,IAAI,CAACC,KAAL,CAAWX,CAAC,GAAClC,CAAb,CAA/B,CAAlJ,EAAkMF,CAAC,CAACgD,YAAF,CAAe,wBAAf,EAAwCrC,CAAC,CAACmB,aAAF,CAAgBmB,IAAxD,CAAlM,EAAgQjD,CAAC,CAACgD,YAAF,CAAe,kBAAf,EAAkC5C,CAAlC,CAAhQ,EAAqSJ,CAAC,CAACgD,YAAF,CAAe,kBAAf,EAAkC1C,CAAlC,CAArS,EAA0UN,CAAC,CAACgD,YAAF,CAAe,kBAAf,EAAkCxC,CAAlC,CAA1U,EAA+WR,CAAC,CAACgD,YAAF,CAAe,kBAAf,EAAkCtC,CAAlC,CAA/W;AAAoZ;;AAAr6B;;AAAs6B,eAAeE,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../../core/maybe.js\";import{MIN_MAX_ZOOM_PRECISION_FACTOR as e,TEXTURE_BINDING_ATTRIBUTE_DATA_0 as i,TEXTURE_BINDING_ATTRIBUTE_DATA_1 as r,TEXTURE_BINDING_ATTRIBUTE_DATA_2 as s,TEXTURE_BINDING_ATTRIBUTE_DATA_3 as a}from\"../definitions.js\";import n from\"./WGLBrush.js\";class o extends n{prepareState({context:t},e,i){const r=i&&-1!==i.indexOf(\"id\");t.setBlendingEnabled(!r),t.setBlendFunctionSeparate(1,771,1,771),t.setColorMask(!0,!0,!0,!0),t.setStencilWriteMask(0),t.setStencilTestEnabled(!0),t.setStencilFunction(514,e.stencilRef,255)}draw(e,i,r){const s=this.getGeometryType();i.commit(e);const a=i.getGeometry(s);t(a)||(e.timeline.begin(this.name),e.attributeView.bindTextures(e.context),a.forEachCommand((t=>this.drawGeometry(e,i,t,r))))}_setSharedUniforms(t,n,o){const{displayLevel:m,pixelRatio:u,state:f}=n;t.setUniform1f(\"u_pixelRatio\",u),t.setUniformMatrix3fv(\"u_dvsMat3\",o.transforms.dvs),t.setUniformMatrix3fv(\"u_displayViewMat3\",f.displayViewMat3),t.setUniform1f(\"u_currentZoom\",Math.round(m*e)),t.setUniform1i(\"u_attributeTextureSize\",n.attributeView.size),t.setUniform1i(\"u_attributeData0\",i),t.setUniform1i(\"u_attributeData1\",r),t.setUniform1i(\"u_attributeData2\",s),t.setUniform1i(\"u_attributeData3\",a)}}export default o;\n"]},"metadata":{},"sourceType":"module"}