{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { Slice as e } from \"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";\nimport { Transform as r } from \"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";\nimport { VertexColor as o } from \"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";\nimport { OutputDepth as i } from \"../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js\";\nimport { OutputHighlight as t } from \"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";\nimport { ReadLinearDepth as a } from \"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";\nimport { multipassTerrainTest as l } from \"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";\nimport { symbolAlphaCutoff as s } from \"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";\nimport { ColorConversion as d } from \"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";\nimport { glsl as n } from \"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";\nimport { ShaderBuilder as p } from \"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";\n\nfunction g(g) {\n  const u = new p(),\n        c = 1 === g.output;\n  return u.include(r, {\n    linearDepth: c\n  }), u.include(o, g), u.vertex.uniforms.add(\"proj\", \"mat4\").add(\"view\", \"mat4\"), u.attributes.add(\"position\", \"vec3\"), u.varyings.add(\"vpos\", \"vec3\"), g.multipassTerrainEnabled && u.varyings.add(\"depth\", \"float\"), c && (u.include(i, g), u.vertex.uniforms.add(\"cameraNearFar\", \"vec2\"), u.varyings.add(\"linearDepth\", \"float\")), u.vertex.code.add(n`\n    void main(void) {\n      vpos = position;\n      forwardNormalizedVertexColor();\n      ${g.multipassTerrainEnabled ? \"depth = (view * vec4(vpos, 1.0)).z;\" : \"\"}\n      gl_Position = ${c ? n`transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);` : n`transformPosition(proj, view, vpos);`}\n    }\n  `), u.include(e, g), u.fragment.include(d), g.multipassTerrainEnabled && (u.fragment.include(a), u.include(l, g)), u.fragment.uniforms.add(\"eColor\", \"vec4\"), 4 === g.output && u.include(t), u.fragment.code.add(n`\n  void main() {\n    discardBySlice(vpos);\n    ${g.multipassTerrainEnabled ? \"terrainDepthTest(gl_FragCoord, depth);\" : \"\"}\n    vec4 color = ${g.attributeColor ? \"vColor * eColor;\" : \"eColor;\"}\n\n    if (color.a < ${n.float(s)}) {\n      discard;\n    }\n\n    ${7 === g.output ? n`gl_FragColor = vec4(color.a);` : \"\"}\n\n    ${0 === g.output ? n`gl_FragColor = highlightSlice(color, vpos); ${g.OITEnabled ? \"gl_FragColor = premultiplyAlpha(gl_FragColor);\" : \"\"}` : \"\"}\n    ${4 === g.output ? n`outputHighlight();` : \"\"};\n    ${1 === g.output ? n`outputDepth(linearDepth);` : \"\"};\n  }\n  `), u;\n}\n\nvar u = Object.freeze({\n  __proto__: null,\n  build: g\n});\nexport { u as C, g as b };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js"],"names":["Slice","e","Transform","r","VertexColor","o","OutputDepth","i","OutputHighlight","t","ReadLinearDepth","a","multipassTerrainTest","l","symbolAlphaCutoff","s","ColorConversion","d","glsl","n","ShaderBuilder","p","g","u","c","output","include","linearDepth","vertex","uniforms","add","attributes","varyings","multipassTerrainEnabled","code","fragment","attributeColor","float","OITEnabled","Object","freeze","__proto__","build","C","b"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Slice as e}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{VertexColor as o}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{OutputDepth as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js\";import{OutputHighlight as t}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{ReadLinearDepth as a}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{symbolAlphaCutoff as s}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as n}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as p}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function g(g){const u=new p,c=1===g.output;return u.include(r,{linearDepth:c}),u.include(o,g),u.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),u.attributes.add(\"position\",\"vec3\"),u.varyings.add(\"vpos\",\"vec3\"),g.multipassTerrainEnabled&&u.varyings.add(\"depth\",\"float\"),c&&(u.include(i,g),u.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),u.varyings.add(\"linearDepth\",\"float\")),u.vertex.code.add(n`\n    void main(void) {\n      vpos = position;\n      forwardNormalizedVertexColor();\n      ${g.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n      gl_Position = ${c?n`transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);`:n`transformPosition(proj, view, vpos);`}\n    }\n  `),u.include(e,g),u.fragment.include(d),g.multipassTerrainEnabled&&(u.fragment.include(a),u.include(l,g)),u.fragment.uniforms.add(\"eColor\",\"vec4\"),4===g.output&&u.include(t),u.fragment.code.add(n`\n  void main() {\n    discardBySlice(vpos);\n    ${g.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    vec4 color = ${g.attributeColor?\"vColor * eColor;\":\"eColor;\"}\n\n    if (color.a < ${n.float(s)}) {\n      discard;\n    }\n\n    ${7===g.output?n`gl_FragColor = vec4(color.a);`:\"\"}\n\n    ${0===g.output?n`gl_FragColor = highlightSlice(color, vpos); ${g.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    ${4===g.output?n`outputHighlight();`:\"\"};\n    ${1===g.output?n`outputDepth(linearDepth);`:\"\"};\n  }\n  `),u}var u=Object.freeze({__proto__:null,build:g});export{u as C,g as b};\n"]},"metadata":{},"sourceType":"module"}