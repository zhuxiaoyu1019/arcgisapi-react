{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isExtent as t, isPolygon as e, isPolyline as s } from \"../../../geometry/support/jsonUtils.js\";\nimport { CurveHelper as i, PIXEL_TOLERANCE as n } from \"../CurveHelper.js\";\n\nclass o {\n  static local() {\n    return null === o.instance && (o.instance = new o()), o.instance;\n  }\n\n  execute(t, e, s) {\n    return new r(t, e, s);\n  }\n\n}\n\no.instance = null;\n\nclass r {\n  constructor(t, e, s) {\n    this._inputGeometries = t, this._curveHelper = new i(), this._offset = (void 0 !== e.offset ? e.offset : 1) * s, this._method = e.method, this._option = e.option, this._offsetFlattenError = n * s;\n  }\n\n  next() {\n    let i = this._inputGeometries.next();\n\n    for (; i;) {\n      if (0 === this._offset) return i;\n\n      if (t(i)) {\n        if (\"Rounded\" === this._method && this._offset > 0) {\n          const t = [[i.xmin, i.ymin], [i.xmin, i.ymax], [i.xmax, i.ymax], [i.xmax, i.ymin], [i.xmin, i.ymin]],\n                e = this._curveHelper.offset(t, this._offset, this._method, 4, this._offsetFlattenError);\n\n          return e ? {\n            rings: [e]\n          } : null;\n        }\n\n        if (Math.min(i.xmax - i.xmin, i.ymax - i.ymin) + 2 * this._offset > 0) return {\n          xmin: i.xmin - this._offset,\n          xmax: i.xmax + this._offset,\n          ymin: i.ymin - this._offset,\n          ymax: i.ymax + this._offset\n        };\n      }\n\n      if (e(i)) {\n        const t = [];\n\n        for (const e of i.rings) {\n          const s = this._curveHelper.offset(e, this._offset, this._method, 4, this._offsetFlattenError);\n\n          s && t.push(s);\n        }\n\n        if (t.length) return {\n          rings: t\n        };\n      }\n\n      if (s(i)) {\n        const t = [];\n\n        for (const e of i.paths) {\n          const s = this._curveHelper.offset(e, this._offset, this._method, 4, this._offsetFlattenError);\n\n          s && t.push(s);\n        }\n\n        if (t.length) return {\n          paths: t\n        };\n      }\n\n      i = this._inputGeometries.next();\n    }\n\n    return null;\n  }\n\n}\n\nexport { o as EffectOffset };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/symbols/cim/effects/EffectOffset.js"],"names":["isExtent","t","isPolygon","e","isPolyline","s","CurveHelper","i","PIXEL_TOLERANCE","n","o","local","instance","execute","r","constructor","_inputGeometries","_curveHelper","_offset","offset","_method","method","_option","option","_offsetFlattenError","next","xmin","ymin","ymax","xmax","rings","Math","min","push","length","paths","EffectOffset"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isExtent as t,isPolygon as e,isPolyline as s}from\"../../../geometry/support/jsonUtils.js\";import{CurveHelper as i,PIXEL_TOLERANCE as n}from\"../CurveHelper.js\";class o{static local(){return null===o.instance&&(o.instance=new o),o.instance}execute(t,e,s){return new r(t,e,s)}}o.instance=null;class r{constructor(t,e,s){this._inputGeometries=t,this._curveHelper=new i,this._offset=(void 0!==e.offset?e.offset:1)*s,this._method=e.method,this._option=e.option,this._offsetFlattenError=n*s}next(){let i=this._inputGeometries.next();for(;i;){if(0===this._offset)return i;if(t(i)){if(\"Rounded\"===this._method&&this._offset>0){const t=[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]],e=this._curveHelper.offset(t,this._offset,this._method,4,this._offsetFlattenError);return e?{rings:[e]}:null}if(Math.min(i.xmax-i.xmin,i.ymax-i.ymin)+2*this._offset>0)return{xmin:i.xmin-this._offset,xmax:i.xmax+this._offset,ymin:i.ymin-this._offset,ymax:i.ymax+this._offset}}if(e(i)){const t=[];for(const e of i.rings){const s=this._curveHelper.offset(e,this._offset,this._method,4,this._offsetFlattenError);s&&t.push(s)}if(t.length)return{rings:t}}if(s(i)){const t=[];for(const e of i.paths){const s=this._curveHelper.offset(e,this._offset,this._method,4,this._offsetFlattenError);s&&t.push(s)}if(t.length)return{paths:t}}i=this._inputGeometries.next()}return null}}export{o as EffectOffset};\n"]},"metadata":{},"sourceType":"module"}