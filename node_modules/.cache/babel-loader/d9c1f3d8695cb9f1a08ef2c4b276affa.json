{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../core/Accessor.js\";\nimport o from \"../../core/Handles.js\";\nimport { init as r } from \"../../core/watchUtils.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as i } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { GoToMixin as a } from \"../support/GoTo.js\";\nconst n = \"esri.widgets.CompassViewModel\";\nlet h = class extends a(e) {\n  constructor(t) {\n    super(t), this._handles = new o(), this.orientation = {\n      x: 0,\n      y: 0,\n      z: 0\n    }, this.view = null, this._updateForCamera = this._updateForCamera.bind(this), this._updateForRotation = this._updateForRotation.bind(this), this._updateRotationWatcher = this._updateRotationWatcher.bind(this);\n  }\n\n  initialize() {\n    this._handles.add(r(this, \"view\", this._updateRotationWatcher));\n  }\n\n  destroy() {\n    this._handles.destroy(), this._handles = null, this.view = null;\n  }\n\n  get canShowNorth() {\n    const t = this.get(\"view.spatialReference\");\n    return !(!t || !t.isWebMercator && !t.isGeographic);\n  }\n\n  get state() {\n    return this.get(\"view.ready\") ? this.canShowNorth ? \"compass\" : \"rotation\" : \"disabled\";\n  }\n\n  reset() {\n    if (!this.get(\"view.ready\")) return;\n    const t = {};\n    \"2d\" === this.view.type ? t.rotation = 0 : t.heading = 0, this.callGoTo({\n      target: t\n    });\n  }\n\n  _updateForRotation(t) {\n    null != t && (this.orientation = {\n      z: t\n    });\n  }\n\n  _updateForCamera(t) {\n    if (!t) return;\n    const e = -t.heading;\n    this.orientation = {\n      x: 0,\n      y: 0,\n      z: e\n    };\n  }\n\n  _updateRotationWatcher(t) {\n    this._handles.removeAll(), t && (\"2d\" === t.type ? this._handles.add(r(this, \"view.rotation\", this._updateForRotation)) : this._handles.add(r(this, \"view.camera\", this._updateForCamera)));\n  }\n\n};\nt([s({\n  readOnly: !0\n})], h.prototype, \"canShowNorth\", null), t([s()], h.prototype, \"orientation\", void 0), t([s({\n  readOnly: !0\n})], h.prototype, \"state\", null), t([s()], h.prototype, \"view\", void 0), h = t([i(n)], h);\nvar d = h;\nexport default d;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/widgets/Compass/CompassViewModel.js"],"names":["_","t","e","o","init","r","property","s","subclass","i","GoToMixin","a","n","h","constructor","_handles","orientation","x","y","z","view","_updateForCamera","bind","_updateForRotation","_updateRotationWatcher","initialize","add","destroy","canShowNorth","get","isWebMercator","isGeographic","state","reset","type","rotation","heading","callGoTo","target","removeAll","readOnly","prototype","d"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,2BAAlB;AAA8C,OAAOC,CAAP,MAAa,wBAAb;AAAsC,OAAOC,CAAP,MAAa,uBAAb;AAAqC,SAAOC,IAAI,IAAIC,CAAf,QAAqB,0BAArB;AAAgD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,mDAAzB;AAA6E,OAAM,mBAAN;AAA0B,OAAM,0CAAN;AAAiD,OAAM,sBAAN;AAA6B,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,mDAAzB;AAA6E,SAAOC,SAAS,IAAIC,CAApB,QAA0B,oBAA1B;AAA+C,MAAMC,CAAC,GAAC,+BAAR;AAAwC,IAAIC,CAAC,GAAC,cAAcF,CAAC,CAACT,CAAD,CAAf,CAAmB;AAACY,EAAAA,WAAW,CAACb,CAAD,EAAG;AAAC,UAAMA,CAAN,GAAS,KAAKc,QAAL,GAAc,IAAIZ,CAAJ,EAAvB,EAA6B,KAAKa,WAAL,GAAiB;AAACC,MAAAA,CAAC,EAAC,CAAH;AAAKC,MAAAA,CAAC,EAAC,CAAP;AAASC,MAAAA,CAAC,EAAC;AAAX,KAA9C,EAA4D,KAAKC,IAAL,GAAU,IAAtE,EAA2E,KAAKC,gBAAL,GAAsB,KAAKA,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAjG,EAAkI,KAAKC,kBAAL,GAAwB,KAAKA,kBAAL,CAAwBD,IAAxB,CAA6B,IAA7B,CAA1J,EAA6L,KAAKE,sBAAL,GAA4B,KAAKA,sBAAL,CAA4BF,IAA5B,CAAiC,IAAjC,CAAzN;AAAgQ;;AAAAG,EAAAA,UAAU,GAAE;AAAC,SAAKV,QAAL,CAAcW,GAAd,CAAkBrB,CAAC,CAAC,IAAD,EAAM,MAAN,EAAa,KAAKmB,sBAAlB,CAAnB;AAA8D;;AAAAG,EAAAA,OAAO,GAAE;AAAC,SAAKZ,QAAL,CAAcY,OAAd,IAAwB,KAAKZ,QAAL,GAAc,IAAtC,EAA2C,KAAKK,IAAL,GAAU,IAArD;AAA0D;;AAAgB,MAAZQ,YAAY,GAAE;AAAC,UAAM3B,CAAC,GAAC,KAAK4B,GAAL,CAAS,uBAAT,CAAR;AAA0C,WAAM,EAAE,CAAC5B,CAAD,IAAI,CAACA,CAAC,CAAC6B,aAAH,IAAkB,CAAC7B,CAAC,CAAC8B,YAA3B,CAAN;AAA+C;;AAAS,MAALC,KAAK,GAAE;AAAC,WAAO,KAAKH,GAAL,CAAS,YAAT,IAAuB,KAAKD,YAAL,GAAkB,SAAlB,GAA4B,UAAnD,GAA8D,UAArE;AAAgF;;AAAAK,EAAAA,KAAK,GAAE;AAAC,QAAG,CAAC,KAAKJ,GAAL,CAAS,YAAT,CAAJ,EAA2B;AAAO,UAAM5B,CAAC,GAAC,EAAR;AAAW,aAAO,KAAKmB,IAAL,CAAUc,IAAjB,GAAsBjC,CAAC,CAACkC,QAAF,GAAW,CAAjC,GAAmClC,CAAC,CAACmC,OAAF,GAAU,CAA7C,EAA+C,KAAKC,QAAL,CAAc;AAACC,MAAAA,MAAM,EAACrC;AAAR,KAAd,CAA/C;AAAyE;;AAAAsB,EAAAA,kBAAkB,CAACtB,CAAD,EAAG;AAAC,YAAMA,CAAN,KAAU,KAAKe,WAAL,GAAiB;AAACG,MAAAA,CAAC,EAAClB;AAAH,KAA3B;AAAkC;;AAAAoB,EAAAA,gBAAgB,CAACpB,CAAD,EAAG;AAAC,QAAG,CAACA,CAAJ,EAAM;AAAO,UAAMC,CAAC,GAAC,CAACD,CAAC,CAACmC,OAAX;AAAmB,SAAKpB,WAAL,GAAiB;AAACC,MAAAA,CAAC,EAAC,CAAH;AAAKC,MAAAA,CAAC,EAAC,CAAP;AAASC,MAAAA,CAAC,EAACjB;AAAX,KAAjB;AAA+B;;AAAAsB,EAAAA,sBAAsB,CAACvB,CAAD,EAAG;AAAC,SAAKc,QAAL,CAAcwB,SAAd,IAA0BtC,CAAC,KAAG,SAAOA,CAAC,CAACiC,IAAT,GAAc,KAAKnB,QAAL,CAAcW,GAAd,CAAkBrB,CAAC,CAAC,IAAD,EAAM,eAAN,EAAsB,KAAKkB,kBAA3B,CAAnB,CAAd,GAAiF,KAAKR,QAAL,CAAcW,GAAd,CAAkBrB,CAAC,CAAC,IAAD,EAAM,aAAN,EAAoB,KAAKgB,gBAAzB,CAAnB,CAApF,CAA3B;AAA+K;;AAAzjC,CAAzB;AAAolCpB,CAAC,CAAC,CAACM,CAAC,CAAC;AAACiC,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB3B,CAAC,CAAC4B,SAAtB,EAAgC,cAAhC,EAA+C,IAA/C,CAAD,EAAsDxC,CAAC,CAAC,CAACM,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC4B,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAAvD,EAAgGxC,CAAC,CAAC,CAACM,CAAC,CAAC;AAACiC,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB3B,CAAC,CAAC4B,SAAtB,EAAgC,OAAhC,EAAwC,IAAxC,CAAjG,EAA+IxC,CAAC,CAAC,CAACM,CAAC,EAAF,CAAD,EAAOM,CAAC,CAAC4B,SAAT,EAAmB,MAAnB,EAA0B,KAAK,CAA/B,CAAhJ,EAAkL5B,CAAC,GAACZ,CAAC,CAAC,CAACQ,CAAC,CAACG,CAAD,CAAF,CAAD,EAAQC,CAAR,CAArL;AAAgM,IAAI6B,CAAC,GAAC7B,CAAN;AAAQ,eAAe6B,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import o from\"../../core/Handles.js\";import{init as r}from\"../../core/watchUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{GoToMixin as a}from\"../support/GoTo.js\";const n=\"esri.widgets.CompassViewModel\";let h=class extends(a(e)){constructor(t){super(t),this._handles=new o,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(r(this,\"view\",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const t=this.get(\"view.spatialReference\");return!(!t||!t.isWebMercator&&!t.isGeographic)}get state(){return this.get(\"view.ready\")?this.canShowNorth?\"compass\":\"rotation\":\"disabled\"}reset(){if(!this.get(\"view.ready\"))return;const t={};\"2d\"===this.view.type?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){null!=t&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;const e=-t.heading;this.orientation={x:0,y:0,z:e}}_updateRotationWatcher(t){this._handles.removeAll(),t&&(\"2d\"===t.type?this._handles.add(r(this,\"view.rotation\",this._updateForRotation)):this._handles.add(r(this,\"view.camera\",this._updateForCamera)))}};t([s({readOnly:!0})],h.prototype,\"canShowNorth\",null),t([s()],h.prototype,\"orientation\",void 0),t([s({readOnly:!0})],h.prototype,\"state\",null),t([s()],h.prototype,\"view\",void 0),h=t([i(n)],h);var d=h;export default d;\n"]},"metadata":{},"sourceType":"module"}