{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { nextHighestPowerOfTwo as t } from \"../../../../../../core/mathUtils.js\";\nimport { pt2px as e } from \"../../../../../../core/screenUtils.js\";\nimport { premultiplyAlphaRGBA as s } from \"../../color.js\";\nimport { MIN_MAX_ZOOM_PRECISION_FACTOR as i, SPRITE_PADDING as r } from \"../../definitions.js\";\nimport { radToByte as o } from \"../../GeometryUtils.js\";\nimport { i1616to32 as a, i8888to32 as l } from \"../../number.js\";\nimport { FillMaterialKey as n } from \"../../materialKey/MaterialKey.js\";\nimport { isFunction as c, getMinMaxZoom as h } from \"./util.js\";\nimport f from \"./WGLBaseFillTemplate.js\";\nimport m from \"./WGLDynamicMeshTemplate.js\";\nimport { ok as p } from \"../../util/Result.js\";\nconst d = 128;\n\nclass y extends f(m) {\n  constructor(t, r, l) {\n    var h;\n\n    if (super(t), this._minMaxZoom = a(Math.round(r * i), Math.round(l * i)), c(t.color)) {\n      const e = (e, i, r) => {\n        const o = t.color(e, i, r);\n        return o && s(o) || 0;\n      };\n\n      this._dynamicPropertyMap.set(\"fillColor\", e);\n    } else {\n      const e = t.color;\n      this.fillColor = e && s(e) || 0;\n    }\n\n    let f = 0;\n    c(t.height) || (f = t.height || 0);\n\n    const m = \"CIMMarkerPlacementInsidePolygon\" === (null == (h = t.cim.placement) ? void 0 : h.type) && t.cim.placement.shiftOddRows ? 2 : 1,\n          p = (e, s, i) => c(t.height) ? t.height(e, s, i) * m : f * m;\n\n    this._dynamicPropertyMap.set(\"_height\", p);\n\n    let y = 0;\n    c(t.offsetX) || (y = e(t.offsetX || 0) + d, y > 255 && (y = 255));\n\n    const u = (s, i, r) => {\n      if (c(t.offsetX)) {\n        let o = e(t.offsetX(s, i, r)) + d;\n        return o > 255 && (o = 255), o;\n      }\n\n      return y;\n    };\n\n    this._dynamicPropertyMap.set(\"_offsetX\", u);\n\n    let _ = 1;\n    c(t.scaleX) || (_ = t.scaleX || 1);\n\n    const g = (e, s, i) => c(t.scaleX) ? t.scaleX(e, s, i) : _;\n\n    this._dynamicPropertyMap.set(\"_scaleX\", g);\n\n    let M = 0;\n    c(t.offsetY) || (M = e(-t.offsetY || 0) + d, M > 255 && (M = 255));\n\n    const x = (s, i, r) => {\n      if (c(t.offsetY)) {\n        let o = e(-t.offsetY(s, i, r)) + d;\n        return o > 255 && (o = 255), o;\n      }\n\n      return M;\n    };\n\n    this._dynamicPropertyMap.set(\"_offsetY\", x);\n\n    let X = 0;\n    c(t.angle) || (X = o(t.angle) || 0);\n\n    const j = (e, s, i) => c(t.angle) ? o(t.angle(e, s, i)) : X;\n\n    this._dynamicPropertyMap.set(\"_angle\", j), this._effects = t.effects, this._cimFillLayer = t, this._fillMaterialKey = n.load(t.materialKey);\n  }\n\n  static fromCIMFill(t, e) {\n    const [s, i] = h(t.scaleInfo, e);\n    return new y(t, s, i);\n  }\n\n  bindFeature(s, i, o) {\n    const n = s.readLegacyFeature();\n\n    this._dynamicPropertyMap.forEach((t, e) => {\n      this[e] = t(n, i, o);\n    });\n\n    const c = this._fillMaterialKey,\n          h = this._materialCache,\n          f = this._cimFillLayer;\n    this.aux3 = l(0, 0, this._angle, f.colorLocked ? 1 : 0);\n    const m = (0, f.materialHash)(n, i, o),\n          y = h.get(m);\n    let u = null;\n\n    if (y && p(y.spriteMosaicItem) && (u = y.spriteMosaicItem), u) {\n      const {\n        rect: s,\n        width: i,\n        height: o\n      } = u,\n            n = s.x + r,\n            h = s.y + r,\n            f = n + i,\n            m = h + o;\n      let p = t(e(this._height));\n      p > 255 ? p = 255 : p <= 0 && (p = t(m - h));\n      let y = t(e(this._height / o * i || 0));\n      y > 255 ? y = 255 : y <= 0 && (y = t(f - n));\n      const _ = this._scaleX,\n            g = 1;\n      this.tl = a(n, h), this.br = a(f, m), this.aux1 = l(y, p, this._offsetX, this._offsetY), this.aux2 = a(d * _, d * g), c.sdf = u.sdf, c.pattern = !0, c.textureBinding = u.textureBinding;\n    } else this.tl = 0, this.br = 0, this.aux1 = 0, this.aux2 = 0, c.sdf = !1, c.pattern = !1, c.textureBinding = 0;\n\n    this._materialKey = c.data;\n  }\n\n}\n\nexport default y;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate.js"],"names":["nextHighestPowerOfTwo","t","pt2px","e","premultiplyAlphaRGBA","s","MIN_MAX_ZOOM_PRECISION_FACTOR","i","SPRITE_PADDING","r","radToByte","o","i1616to32","a","i8888to32","l","FillMaterialKey","n","isFunction","c","getMinMaxZoom","h","f","m","ok","p","d","y","constructor","_minMaxZoom","Math","round","color","_dynamicPropertyMap","set","fillColor","height","cim","placement","type","shiftOddRows","offsetX","u","_","scaleX","g","M","offsetY","x","X","angle","j","_effects","effects","_cimFillLayer","_fillMaterialKey","load","materialKey","fromCIMFill","scaleInfo","bindFeature","readLegacyFeature","forEach","_materialCache","aux3","_angle","colorLocked","materialHash","get","spriteMosaicItem","rect","width","_height","_scaleX","tl","br","aux1","_offsetX","_offsetY","aux2","sdf","pattern","textureBinding","_materialKey","data"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../../../../core/mathUtils.js\";import{pt2px as e}from\"../../../../../../core/screenUtils.js\";import{premultiplyAlphaRGBA as s}from\"../../color.js\";import{MIN_MAX_ZOOM_PRECISION_FACTOR as i,SPRITE_PADDING as r}from\"../../definitions.js\";import{radToByte as o}from\"../../GeometryUtils.js\";import{i1616to32 as a,i8888to32 as l}from\"../../number.js\";import{FillMaterialKey as n}from\"../../materialKey/MaterialKey.js\";import{isFunction as c,getMinMaxZoom as h}from\"./util.js\";import f from\"./WGLBaseFillTemplate.js\";import m from\"./WGLDynamicMeshTemplate.js\";import{ok as p}from\"../../util/Result.js\";const d=128;class y extends(f(m)){constructor(t,r,l){var h;if(super(t),this._minMaxZoom=a(Math.round(r*i),Math.round(l*i)),c(t.color)){const e=(e,i,r)=>{const o=t.color(e,i,r);return o&&s(o)||0};this._dynamicPropertyMap.set(\"fillColor\",e)}else{const e=t.color;this.fillColor=e&&s(e)||0}let f=0;c(t.height)||(f=t.height||0);const m=\"CIMMarkerPlacementInsidePolygon\"===(null==(h=t.cim.placement)?void 0:h.type)&&t.cim.placement.shiftOddRows?2:1,p=(e,s,i)=>c(t.height)?t.height(e,s,i)*m:f*m;this._dynamicPropertyMap.set(\"_height\",p);let y=0;c(t.offsetX)||(y=e(t.offsetX||0)+d,y>255&&(y=255));const u=(s,i,r)=>{if(c(t.offsetX)){let o=e(t.offsetX(s,i,r))+d;return o>255&&(o=255),o}return y};this._dynamicPropertyMap.set(\"_offsetX\",u);let _=1;c(t.scaleX)||(_=t.scaleX||1);const g=(e,s,i)=>c(t.scaleX)?t.scaleX(e,s,i):_;this._dynamicPropertyMap.set(\"_scaleX\",g);let M=0;c(t.offsetY)||(M=e(-t.offsetY||0)+d,M>255&&(M=255));const x=(s,i,r)=>{if(c(t.offsetY)){let o=e(-t.offsetY(s,i,r))+d;return o>255&&(o=255),o}return M};this._dynamicPropertyMap.set(\"_offsetY\",x);let X=0;c(t.angle)||(X=o(t.angle)||0);const j=(e,s,i)=>c(t.angle)?o(t.angle(e,s,i)):X;this._dynamicPropertyMap.set(\"_angle\",j),this._effects=t.effects,this._cimFillLayer=t,this._fillMaterialKey=n.load(t.materialKey)}static fromCIMFill(t,e){const[s,i]=h(t.scaleInfo,e);return new y(t,s,i)}bindFeature(s,i,o){const n=s.readLegacyFeature();this._dynamicPropertyMap.forEach(((t,e)=>{this[e]=t(n,i,o)}));const c=this._fillMaterialKey,h=this._materialCache,f=this._cimFillLayer;this.aux3=l(0,0,this._angle,f.colorLocked?1:0);const m=(0,f.materialHash)(n,i,o),y=h.get(m);let u=null;if(y&&p(y.spriteMosaicItem)&&(u=y.spriteMosaicItem),u){const{rect:s,width:i,height:o}=u,n=s.x+r,h=s.y+r,f=n+i,m=h+o;let p=t(e(this._height));p>255?p=255:p<=0&&(p=t(m-h));let y=t(e(this._height/o*i||0));y>255?y=255:y<=0&&(y=t(f-n));const _=this._scaleX,g=1;this.tl=a(n,h),this.br=a(f,m),this.aux1=l(y,p,this._offsetX,this._offsetY),this.aux2=a(d*_,d*g),c.sdf=u.sdf,c.pattern=!0,c.textureBinding=u.textureBinding}else this.tl=0,this.br=0,this.aux1=0,this.aux2=0,c.sdf=!1,c.pattern=!1,c.textureBinding=0;this._materialKey=c.data}}export default y;\n"]},"metadata":{},"sourceType":"module"}