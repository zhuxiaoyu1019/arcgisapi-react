{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst e = new Float32Array(1);\n\nfunction t(e) {\n  return i(Math.max(-n, Math.min(e, n)));\n}\n\nfunction i(t) {\n  return e[0] = t, e[0];\n}\n\nconst n = i(34028234663852886e22);\nvar a = {};\na.defaultNoDataValue = t(-1 / 0), a.decode = function (e, i) {\n  var n = (i = i || {}).encodedMaskData || null === i.encodedMaskData,\n      f = o(e, i.inputOffset || 0, n),\n      m = null != i.noDataValue ? t(i.noDataValue) : a.defaultNoDataValue,\n      u = l(f, i.pixelType || Float32Array, i.encodedMaskData, m, i.returnMask),\n      d = {\n    width: f.width,\n    height: f.height,\n    pixelData: u.resultPixels,\n    minValue: f.pixels.minValue,\n    maxValue: f.pixels.maxValue,\n    noDataValue: m\n  };\n  return u.resultMask && (d.maskData = u.resultMask), i.returnEncodedMask && f.mask && (d.encodedMaskData = f.mask.bitset ? f.mask.bitset : null), i.returnFileInfo && (d.fileInfo = s(f, m), i.computeUsedBitDepths && (d.fileInfo.bitDepths = r(f))), d;\n};\n\nvar l = function (e, t, i, n, a) {\n  var l,\n      s,\n      r = 0,\n      o = e.pixels.numBlocksX,\n      m = e.pixels.numBlocksY,\n      u = Math.floor(e.width / o),\n      d = Math.floor(e.height / m),\n      c = 2 * e.maxZError;\n  i = i || (e.mask ? e.mask.bitset : null), l = new t(e.width * e.height), a && i && (s = new Uint8Array(e.width * e.height));\n\n  for (var g, h, k = new Float32Array(u * d), x = 0; x <= m; x++) {\n    var w = x !== m ? d : e.height % m;\n    if (0 !== w) for (var p = 0; p <= o; p++) {\n      var y = p !== o ? u : e.width % o;\n\n      if (0 !== y) {\n        var V,\n            B,\n            v,\n            U,\n            M = x * e.width * d + p * u,\n            D = e.width - y,\n            b = e.pixels.blocks[r];\n        if (b.encoding < 2 ? (0 === b.encoding ? V = b.rawData : (f(b.stuffedData, b.bitsPerPixel, b.numValidPixels, b.offset, c, k, e.pixels.maxValue), V = k), B = 0) : v = 2 === b.encoding ? 0 : b.offset, i) for (h = 0; h < w; h++) {\n          for (7 & M && (U = i[M >> 3], U <<= 7 & M), g = 0; g < y; g++) 7 & M || (U = i[M >> 3]), 128 & U ? (s && (s[M] = 1), l[M++] = b.encoding < 2 ? V[B++] : v) : (s && (s[M] = 0), l[M++] = n), U <<= 1;\n\n          M += D;\n        } else if (b.encoding < 2) for (h = 0; h < w; h++) {\n          for (g = 0; g < y; g++) l[M++] = V[B++];\n\n          M += D;\n        } else for (h = 0; h < w; h++) if (l.fill) l.fill(v, M, M + y), M += y + D;else {\n          for (g = 0; g < y; g++) l[M++] = v;\n\n          M += D;\n        }\n        if (1 === b.encoding && B !== b.numValidPixels) throw \"Block and Mask do not match\";\n        r++;\n      }\n    }\n  }\n\n  return {\n    resultPixels: l,\n    resultMask: s\n  };\n},\n    s = function (e, t) {\n  return {\n    fileIdentifierString: e.fileIdentifierString,\n    fileVersion: e.fileVersion,\n    imageType: e.imageType,\n    height: e.height,\n    width: e.width,\n    maxZError: e.maxZError,\n    eofOffset: e.eofOffset,\n    mask: e.mask ? {\n      numBlocksX: e.mask.numBlocksX,\n      numBlocksY: e.mask.numBlocksY,\n      numBytes: e.mask.numBytes,\n      maxValue: e.mask.maxValue\n    } : null,\n    pixels: {\n      numBlocksX: e.pixels.numBlocksX,\n      numBlocksY: e.pixels.numBlocksY,\n      numBytes: e.pixels.numBytes,\n      maxValue: e.pixels.maxValue,\n      minValue: e.pixels.minValue,\n      noDataValue: t\n    }\n  };\n},\n    r = function (e) {\n  for (var t = e.pixels.numBlocksX * e.pixels.numBlocksY, i = {}, n = 0; n < t; n++) {\n    var a = e.pixels.blocks[n];\n    0 === a.encoding ? i.float32 = !0 : 1 === a.encoding ? i[a.bitsPerPixel] = !0 : i[0] = !0;\n  }\n\n  return Object.keys(i);\n},\n    o = function (e, t, i) {\n  var n = {},\n      a = new Uint8Array(e, t, 10);\n  if (n.fileIdentifierString = String.fromCharCode.apply(null, a), \"CntZImage\" != n.fileIdentifierString.trim()) throw \"Unexpected file identifier string: \" + n.fileIdentifierString;\n  t += 10;\n  var l = new DataView(e, t, 24);\n  if (n.fileVersion = l.getInt32(0, !0), n.imageType = l.getInt32(4, !0), n.height = l.getUint32(8, !0), n.width = l.getUint32(12, !0), n.maxZError = l.getFloat64(16, !0), t += 24, !i) if (l = new DataView(e, t, 16), n.mask = {}, n.mask.numBlocksY = l.getUint32(0, !0), n.mask.numBlocksX = l.getUint32(4, !0), n.mask.numBytes = l.getUint32(8, !0), n.mask.maxValue = l.getFloat32(12, !0), t += 16, n.mask.numBytes > 0) {\n    var s = new Uint8Array(Math.ceil(n.width * n.height / 8)),\n        r = (l = new DataView(e, t, n.mask.numBytes)).getInt16(0, !0),\n        o = 2,\n        f = 0;\n\n    do {\n      if (r > 0) for (; r--;) s[f++] = l.getUint8(o++);else {\n        var m = l.getUint8(o++);\n\n        for (r = -r; r--;) s[f++] = m;\n      }\n      r = l.getInt16(o, !0), o += 2;\n    } while (o < n.mask.numBytes);\n\n    if (-32768 !== r || f < s.length) throw \"Unexpected end of mask RLE encoding\";\n    n.mask.bitset = s, t += n.mask.numBytes;\n  } else if (0 == (n.mask.numBytes | n.mask.numBlocksY | n.mask.maxValue)) {\n    s = new Uint8Array(Math.ceil(n.width * n.height / 8));\n    n.mask.bitset = s;\n  }\n  l = new DataView(e, t, 16), n.pixels = {}, n.pixels.numBlocksY = l.getUint32(0, !0), n.pixels.numBlocksX = l.getUint32(4, !0), n.pixels.numBytes = l.getUint32(8, !0), n.pixels.maxValue = l.getFloat32(12, !0), t += 16;\n  var u = n.pixels.numBlocksX,\n      d = n.pixels.numBlocksY,\n      c = u + (n.width % u > 0 ? 1 : 0),\n      g = d + (n.height % d > 0 ? 1 : 0);\n  n.pixels.blocks = new Array(c * g);\n\n  for (var h = 1e9, k = 0, x = 0; x < g; x++) for (var w = 0; w < c; w++) {\n    var p = 0,\n        y = e.byteLength - t;\n    l = new DataView(e, t, Math.min(10, y));\n    var V = {};\n    n.pixels.blocks[k++] = V;\n    var B = l.getUint8(0);\n    if (p++, V.encoding = 63 & B, V.encoding > 3) throw \"Invalid block encoding (\" + V.encoding + \")\";\n\n    if (2 !== V.encoding) {\n      if (0 !== B && 2 !== B) {\n        if (B >>= 6, V.offsetType = B, 2 === B) V.offset = l.getInt8(1), p++;else if (1 === B) V.offset = l.getInt16(1, !0), p += 2;else {\n          if (0 !== B) throw \"Invalid block offset type\";\n          V.offset = l.getFloat32(1, !0), p += 4;\n        }\n        if (h = Math.min(V.offset, h), 1 === V.encoding) if (B = l.getUint8(p), p++, V.bitsPerPixel = 63 & B, B >>= 6, V.numValidPixelsType = B, 2 === B) V.numValidPixels = l.getUint8(p), p++;else if (1 === B) V.numValidPixels = l.getUint16(p, !0), p += 2;else {\n          if (0 !== B) throw \"Invalid valid pixel count type\";\n          V.numValidPixels = l.getUint32(p, !0), p += 4;\n        }\n      }\n\n      var v;\n      if (t += p, 3 != V.encoding) if (0 === V.encoding) {\n        var U = (n.pixels.numBytes - 1) / 4;\n        if (U !== Math.floor(U)) throw \"uncompressed block has invalid length\";\n        v = new ArrayBuffer(4 * U), new Uint8Array(v).set(new Uint8Array(e, t, 4 * U));\n\n        for (var M = new Float32Array(v), D = 0; D < M.length; D++) h = Math.min(h, M[D]);\n\n        V.rawData = M, t += 4 * U;\n      } else if (1 === V.encoding) {\n        var b = Math.ceil(V.numValidPixels * V.bitsPerPixel / 8),\n            I = Math.ceil(b / 4);\n        v = new ArrayBuffer(4 * I), new Uint8Array(v).set(new Uint8Array(e, t, b)), V.stuffedData = new Uint32Array(v), t += b;\n      }\n    } else t++, h = Math.min(h, 0);\n  }\n\n  return n.pixels.minValue = h, n.eofOffset = t, n;\n},\n    f = function (e, t, i, n, a, l, s) {\n  var r,\n      o,\n      f,\n      m = (1 << t) - 1,\n      u = 0,\n      d = 0,\n      c = Math.ceil((s - n) / a),\n      g = 4 * e.length - Math.ceil(t * i / 8);\n\n  for (e[e.length - 1] <<= 8 * g, r = 0; r < i; r++) {\n    if (0 === d && (f = e[u++], d = 32), d >= t) o = f >>> d - t & m, d -= t;else {\n      var h = t - d;\n      o = (f & m) << h & m, o += (f = e[u++]) >>> (d = 32 - h);\n    }\n    l[r] = o < c ? n + o * a : s;\n  }\n\n  return l;\n};\n\nconst m = a.decode;\nexport { m as d };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/chunks/LercCodec.js"],"names":["e","Float32Array","t","i","Math","max","n","min","a","defaultNoDataValue","decode","encodedMaskData","f","o","inputOffset","m","noDataValue","u","l","pixelType","returnMask","d","width","height","pixelData","resultPixels","minValue","pixels","maxValue","resultMask","maskData","returnEncodedMask","mask","bitset","returnFileInfo","fileInfo","s","computeUsedBitDepths","bitDepths","r","numBlocksX","numBlocksY","floor","c","maxZError","Uint8Array","g","h","k","x","w","p","y","V","B","v","U","M","D","b","blocks","encoding","rawData","stuffedData","bitsPerPixel","numValidPixels","offset","fill","fileIdentifierString","fileVersion","imageType","eofOffset","numBytes","float32","Object","keys","String","fromCharCode","apply","trim","DataView","getInt32","getUint32","getFloat64","getFloat32","ceil","getInt16","getUint8","length","Array","byteLength","offsetType","getInt8","numValidPixelsType","getUint16","ArrayBuffer","set","I","Uint32Array"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst e=new Float32Array(1);function t(e){return i(Math.max(-n,Math.min(e,n)))}function i(t){return e[0]=t,e[0]}const n=i(34028234663852886e22);var a={};a.defaultNoDataValue=t(-1/0),a.decode=function(e,i){var n=(i=i||{}).encodedMaskData||null===i.encodedMaskData,f=o(e,i.inputOffset||0,n),m=null!=i.noDataValue?t(i.noDataValue):a.defaultNoDataValue,u=l(f,i.pixelType||Float32Array,i.encodedMaskData,m,i.returnMask),d={width:f.width,height:f.height,pixelData:u.resultPixels,minValue:f.pixels.minValue,maxValue:f.pixels.maxValue,noDataValue:m};return u.resultMask&&(d.maskData=u.resultMask),i.returnEncodedMask&&f.mask&&(d.encodedMaskData=f.mask.bitset?f.mask.bitset:null),i.returnFileInfo&&(d.fileInfo=s(f,m),i.computeUsedBitDepths&&(d.fileInfo.bitDepths=r(f))),d};var l=function(e,t,i,n,a){var l,s,r=0,o=e.pixels.numBlocksX,m=e.pixels.numBlocksY,u=Math.floor(e.width/o),d=Math.floor(e.height/m),c=2*e.maxZError;i=i||(e.mask?e.mask.bitset:null),l=new t(e.width*e.height),a&&i&&(s=new Uint8Array(e.width*e.height));for(var g,h,k=new Float32Array(u*d),x=0;x<=m;x++){var w=x!==m?d:e.height%m;if(0!==w)for(var p=0;p<=o;p++){var y=p!==o?u:e.width%o;if(0!==y){var V,B,v,U,M=x*e.width*d+p*u,D=e.width-y,b=e.pixels.blocks[r];if(b.encoding<2?(0===b.encoding?V=b.rawData:(f(b.stuffedData,b.bitsPerPixel,b.numValidPixels,b.offset,c,k,e.pixels.maxValue),V=k),B=0):v=2===b.encoding?0:b.offset,i)for(h=0;h<w;h++){for(7&M&&(U=i[M>>3],U<<=7&M),g=0;g<y;g++)7&M||(U=i[M>>3]),128&U?(s&&(s[M]=1),l[M++]=b.encoding<2?V[B++]:v):(s&&(s[M]=0),l[M++]=n),U<<=1;M+=D}else if(b.encoding<2)for(h=0;h<w;h++){for(g=0;g<y;g++)l[M++]=V[B++];M+=D}else for(h=0;h<w;h++)if(l.fill)l.fill(v,M,M+y),M+=y+D;else{for(g=0;g<y;g++)l[M++]=v;M+=D}if(1===b.encoding&&B!==b.numValidPixels)throw\"Block and Mask do not match\";r++}}}return{resultPixels:l,resultMask:s}},s=function(e,t){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:t}}},r=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,i={},n=0;n<t;n++){var a=e.pixels.blocks[n];0===a.encoding?i.float32=!0:1===a.encoding?i[a.bitsPerPixel]=!0:i[0]=!0}return Object.keys(i)},o=function(e,t,i){var n={},a=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,a),\"CntZImage\"!=n.fileIdentifierString.trim())throw\"Unexpected file identifier string: \"+n.fileIdentifierString;t+=10;var l=new DataView(e,t,24);if(n.fileVersion=l.getInt32(0,!0),n.imageType=l.getInt32(4,!0),n.height=l.getUint32(8,!0),n.width=l.getUint32(12,!0),n.maxZError=l.getFloat64(16,!0),t+=24,!i)if(l=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=l.getUint32(0,!0),n.mask.numBlocksX=l.getUint32(4,!0),n.mask.numBytes=l.getUint32(8,!0),n.mask.maxValue=l.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var s=new Uint8Array(Math.ceil(n.width*n.height/8)),r=(l=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),o=2,f=0;do{if(r>0)for(;r--;)s[f++]=l.getUint8(o++);else{var m=l.getUint8(o++);for(r=-r;r--;)s[f++]=m}r=l.getInt16(o,!0),o+=2}while(o<n.mask.numBytes);if(-32768!==r||f<s.length)throw\"Unexpected end of mask RLE encoding\";n.mask.bitset=s,t+=n.mask.numBytes}else if(0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)){s=new Uint8Array(Math.ceil(n.width*n.height/8));n.mask.bitset=s}l=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=l.getUint32(0,!0),n.pixels.numBlocksX=l.getUint32(4,!0),n.pixels.numBytes=l.getUint32(8,!0),n.pixels.maxValue=l.getFloat32(12,!0),t+=16;var u=n.pixels.numBlocksX,d=n.pixels.numBlocksY,c=u+(n.width%u>0?1:0),g=d+(n.height%d>0?1:0);n.pixels.blocks=new Array(c*g);for(var h=1e9,k=0,x=0;x<g;x++)for(var w=0;w<c;w++){var p=0,y=e.byteLength-t;l=new DataView(e,t,Math.min(10,y));var V={};n.pixels.blocks[k++]=V;var B=l.getUint8(0);if(p++,V.encoding=63&B,V.encoding>3)throw\"Invalid block encoding (\"+V.encoding+\")\";if(2!==V.encoding){if(0!==B&&2!==B){if(B>>=6,V.offsetType=B,2===B)V.offset=l.getInt8(1),p++;else if(1===B)V.offset=l.getInt16(1,!0),p+=2;else{if(0!==B)throw\"Invalid block offset type\";V.offset=l.getFloat32(1,!0),p+=4}if(h=Math.min(V.offset,h),1===V.encoding)if(B=l.getUint8(p),p++,V.bitsPerPixel=63&B,B>>=6,V.numValidPixelsType=B,2===B)V.numValidPixels=l.getUint8(p),p++;else if(1===B)V.numValidPixels=l.getUint16(p,!0),p+=2;else{if(0!==B)throw\"Invalid valid pixel count type\";V.numValidPixels=l.getUint32(p,!0),p+=4}}var v;if(t+=p,3!=V.encoding)if(0===V.encoding){var U=(n.pixels.numBytes-1)/4;if(U!==Math.floor(U))throw\"uncompressed block has invalid length\";v=new ArrayBuffer(4*U),new Uint8Array(v).set(new Uint8Array(e,t,4*U));for(var M=new Float32Array(v),D=0;D<M.length;D++)h=Math.min(h,M[D]);V.rawData=M,t+=4*U}else if(1===V.encoding){var b=Math.ceil(V.numValidPixels*V.bitsPerPixel/8),I=Math.ceil(b/4);v=new ArrayBuffer(4*I),new Uint8Array(v).set(new Uint8Array(e,t,b)),V.stuffedData=new Uint32Array(v),t+=b}}else t++,h=Math.min(h,0)}return n.pixels.minValue=h,n.eofOffset=t,n},f=function(e,t,i,n,a,l,s){var r,o,f,m=(1<<t)-1,u=0,d=0,c=Math.ceil((s-n)/a),g=4*e.length-Math.ceil(t*i/8);for(e[e.length-1]<<=8*g,r=0;r<i;r++){if(0===d&&(f=e[u++],d=32),d>=t)o=f>>>d-t&m,d-=t;else{var h=t-d;o=(f&m)<<h&m,o+=(f=e[u++])>>>(d=32-h)}l[r]=o<c?n+o*a:s}return l};const m=a.decode;export{m as d};\n"]},"metadata":{},"sourceType":"module"}