{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { width as t, height as e, intersects as n } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { Geometry as i } from \"../../webgl-engine/lib/Geometry.js\";\nimport r from \"../../webgl-engine/lib/GeometryUtil.js\";\n\nfunction o(n, i, r) {\n  const o = t(n) / e(n),\n        a = {\n    width: r,\n    height: r\n  };\n  return o > 1.0001 ? a.height = r / o : o < .9999 && (a.width = r * o), a.width = Math.round(a.width / (t(n) / t(i))), a.height = Math.round(a.height / (e(n) / e(i))), a;\n}\n\nfunction a(t) {\n  return r.createSquareGeometry([[t[0], t[1], -1], [t[2], t[1], -1], [t[2], t[3], -1], [t[0], t[3], -1]]);\n}\n\nfunction h(t, e) {\n  if (!n(t, e)) return a(e);\n  const r = [t[1] - e[1], Math.min(t[3], e[3]) - Math.max(t[1], e[1]), e[3] - t[3], 123456],\n        o = [t[0] - e[0], Math.min(t[2], e[2]) - Math.max(t[0], e[0]), e[2] - t[2], 123456],\n        h = e[2] - e[0],\n        u = e[3] - e[1],\n        l = o[0] > 0 && o[2] > 0 ? 3 : 2,\n        m = r[0] > 0 && r[2] > 0 ? 3 : 2,\n        c = (m + 1) * (l + 1),\n        g = new Float64Array(3 * c),\n        w = new Float32Array(2 * c),\n        d = new Uint32Array(6 * (m * l - 1));\n  let f = 0,\n      p = 0,\n      y = 0,\n      x = 0,\n      M = 0;\n\n  for (let n = 0; n < 4; n++) {\n    const t = r[n];\n    if (t <= 0) continue;\n    let i = 0;\n\n    for (let r = 0; r < 4; r++) {\n      const t = o[r];\n      t <= 0 || (g[p++] = e[0] + i, g[p++] = e[1] + f, g[p++] = -1, w[y++] = i / h, w[y++] = f / u, r < 3 && n < 3 && (1 !== r || 1 !== n) && (d[M++] = x, d[M++] = x + 1, d[M++] = x + l + 1, d[M++] = x + 1, d[M++] = x + l + 2, d[M++] = x + l + 1), x++, i += t);\n    }\n\n    f += t;\n  }\n\n  const v = new Uint32Array(d.length);\n  return new i([[\"position\", {\n    size: 3,\n    data: g,\n    exclusive: !0\n  }], [\"normal\", {\n    size: 3,\n    data: s,\n    exclusive: !0\n  }], [\"uv0\", {\n    size: 2,\n    data: w,\n    exclusive: !0\n  }]], [[\"position\", d], [\"normal\", v], [\"uv0\", d]]);\n}\n\nconst s = [0, 0, 1];\nexport { o as computeImageExportSize, a as createGeometryForExtent, h as createOuterImageGeometry };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/support/overlayImageUtils.js"],"names":["width","t","height","e","intersects","n","Geometry","i","r","o","a","Math","round","createSquareGeometry","h","min","max","u","l","m","c","g","Float64Array","w","Float32Array","d","Uint32Array","f","p","y","x","M","v","length","size","data","exclusive","s","computeImageExportSize","createGeometryForExtent","createOuterImageGeometry"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{width as t,height as e,intersects as n}from\"../../../../geometry/support/aaBoundingRect.js\";import{Geometry as i}from\"../../webgl-engine/lib/Geometry.js\";import r from\"../../webgl-engine/lib/GeometryUtil.js\";function o(n,i,r){const o=t(n)/e(n),a={width:r,height:r};return o>1.0001?a.height=r/o:o<.9999&&(a.width=r*o),a.width=Math.round(a.width/(t(n)/t(i))),a.height=Math.round(a.height/(e(n)/e(i))),a}function a(t){return r.createSquareGeometry([[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function h(t,e){if(!n(t,e))return a(e);const r=[t[1]-e[1],Math.min(t[3],e[3])-Math.max(t[1],e[1]),e[3]-t[3],123456],o=[t[0]-e[0],Math.min(t[2],e[2])-Math.max(t[0],e[0]),e[2]-t[2],123456],h=e[2]-e[0],u=e[3]-e[1],l=o[0]>0&&o[2]>0?3:2,m=r[0]>0&&r[2]>0?3:2,c=(m+1)*(l+1),g=new Float64Array(3*c),w=new Float32Array(2*c),d=new Uint32Array(6*(m*l-1));let f=0,p=0,y=0,x=0,M=0;for(let n=0;n<4;n++){const t=r[n];if(t<=0)continue;let i=0;for(let r=0;r<4;r++){const t=o[r];t<=0||(g[p++]=e[0]+i,g[p++]=e[1]+f,g[p++]=-1,w[y++]=i/h,w[y++]=f/u,r<3&&n<3&&(1!==r||1!==n)&&(d[M++]=x,d[M++]=x+1,d[M++]=x+l+1,d[M++]=x+1,d[M++]=x+l+2,d[M++]=x+l+1),x++,i+=t)}f+=t}const v=new Uint32Array(d.length);return new i([[\"position\",{size:3,data:g,exclusive:!0}],[\"normal\",{size:3,data:s,exclusive:!0}],[\"uv0\",{size:2,data:w,exclusive:!0}]],[[\"position\",d],[\"normal\",v],[\"uv0\",d]])}const s=[0,0,1];export{o as computeImageExportSize,a as createGeometryForExtent,h as createOuterImageGeometry};\n"]},"metadata":{},"sourceType":"module"}