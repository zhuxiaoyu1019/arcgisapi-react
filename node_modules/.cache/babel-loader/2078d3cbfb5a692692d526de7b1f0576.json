{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"./ArcadePortal.js\";\nimport r from \"./Attachment.js\";\nimport t from \"./Dictionary.js\";\nimport n from \"./Feature.js\";\nimport o from \"./FunctionWrapper.js\";\nimport a from \"./ImmutablePathArray.js\";\nimport i from \"./ImmutablePointArray.js\";\nimport { p as s, i as l, e as c, N as u, R as f, I as p, v as h, m as w, n as m, c as E, g as d, a as g, b as N, k as I, t as y, d as v, h as T, j as R, f as O, o as S, q as b, r as U } from \"../chunks/languageUtils.js\";\nimport { addFunctionDeclaration as A, findFieldLiterals as C, validateScript as M, referencesMember as x, referencesFunction as F, findFunctionCalls as P, nodeErrorMessage as D } from \"./treeAnalysis.js\";\nimport { registerFunctions as L } from \"./functions/array.js\";\nimport { registerFunctions as j } from \"./functions/date.js\";\nimport { registerFunctions as _ } from \"./functions/geometry.js\";\nimport { registerFunctions as k } from \"./functions/geomsync.js\";\nimport { registerFunctions as V } from \"./functions/maths.js\";\nimport { registerFunctions as B } from \"./functions/stats.js\";\nimport { registerFunctions as Y } from \"./functions/string.js\";\nimport G from \"../geometry/Extent.js\";\nimport z from \"../geometry/Geometry.js\";\nimport q from \"../geometry/Multipoint.js\";\nimport Z from \"../geometry/Point.js\";\nimport H from \"../geometry/Polygon.js\";\nimport W from \"../geometry/Polyline.js\";\nimport K from \"../geometry/SpatialReference.js\";\n\nfunction X(e, r) {\n  const t = [];\n\n  for (let n = 0; n < r.arguments.length; n++) t.push(Q(e, r.arguments[n]));\n\n  return t;\n}\n\nfunction J(e, r, t) {\n  try {\n    return t(e, r, X(e, r));\n  } catch (n) {\n    throw n;\n  }\n}\n\nfunction Q(e, r) {\n  try {\n    switch (r.type) {\n      case \"EmptyStatement\":\n        return h;\n\n      case \"VariableDeclarator\":\n        return he(e, r);\n\n      case \"VariableDeclaration\":\n        return pe(e, r);\n\n      case \"BlockStatement\":\n        return ce(e, r);\n\n      case \"FunctionDeclaration\":\n        return fe(e, r);\n\n      case \"ReturnStatement\":\n        return ue(e, r);\n\n      case \"IfStatement\":\n        return le(e, r);\n\n      case \"ExpressionStatement\":\n        return se(e, r);\n\n      case \"AssignmentExpression\":\n        return ie(e, r);\n\n      case \"UpdateExpression\":\n        return oe(e, r);\n\n      case \"BreakStatement\":\n        return w;\n\n      case \"ContinueStatement\":\n        return m;\n\n      case \"TemplateElement\":\n        return ye(e, r);\n\n      case \"TemplateLiteral\":\n        return ve(e, r);\n\n      case \"ForStatement\":\n        return te(e, r);\n\n      case \"ForInStatement\":\n        return re(e, r);\n\n      case \"Identifier\":\n        return Te(e, r);\n\n      case \"MemberExpression\":\n        return Ee(e, r);\n\n      case \"Literal\":\n        return r.value;\n\n      case \"CallExpression\":\n        return Re(e, r);\n\n      case \"UnaryExpression\":\n        return de(e, r);\n\n      case \"BinaryExpression\":\n        return Ne(e, r);\n\n      case \"LogicalExpression\":\n        return Ie(e, r);\n\n      case \"ConditionalExpression\":\n        throw new Error(D(r, \"RUNTIME\", \"NOTSUPPORTED\"));\n\n      case \"ArrayExpression\":\n        return ge(e, r);\n\n      case \"ObjectExpression\":\n        return $(e, r);\n\n      case \"Property\":\n        return ee(e, r);\n\n      default:\n        throw new Error(D(r, \"RUNTIME\", \"UNREOGNISED\"));\n    }\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction $(e, r) {\n  const n = {};\n\n  for (let t = 0; t < r.properties.length; t++) {\n    const o = Q(e, r.properties[t]);\n    if (E(o.value)) throw new Error(\"Illegal Argument\");\n    if (!1 === d(o.key)) throw new Error(\"Illegal Argument\");\n    o.value === h ? n[o.key.toString()] = null : n[o.key.toString()] = o.value;\n  }\n\n  const o = new t(n);\n  return o.immutable = !1, o;\n}\n\nfunction ee(e, r) {\n  return {\n    key: \"Identifier\" === r.key.type ? r.key.name : Q(e, r.key),\n    value: Q(e, r.value)\n  };\n}\n\nfunction re(e, r) {\n  const o = Q(e, r.right);\n  \"VariableDeclaration\" === r.left.type && Q(e, r.left);\n  let a = null,\n      i = \"\";\n\n  if (\"VariableDeclaration\" === r.left.type) {\n    const e = r.left.declarations[0].id;\n    \"Identifier\" === e.type && (i = e.name);\n  } else \"Identifier\" === r.left.type && (i = r.left.name);\n\n  if (!i) throw new Error(D(r, \"RUNTIME\", \"INVALIDVARIABLE\"));\n  if (i = i.toLowerCase(), null !== e.localScope && void 0 !== e.localScope[i] && (a = e.localScope[i]), null === a && void 0 !== e.globalScope[i] && (a = e.globalScope[i]), null === a) throw new Error(D(r, \"RUNTIME\", \"VARIABLENOTDECLARED\"));\n\n  if (g(o) || d(o)) {\n    const t = o.length;\n\n    for (let n = 0; n < t; n++) {\n      a.value = n;\n      const t = Q(e, r.body);\n      if (t === w) break;\n      if (t instanceof f) return t;\n    }\n\n    return h;\n  }\n\n  if (N(o)) {\n    for (let t = 0; t < o.length(); t++) {\n      a.value = t;\n      const n = Q(e, r.body);\n      if (n === w) break;\n      if (n instanceof f) return n;\n    }\n\n    return h;\n  }\n\n  if (!(o instanceof t || o instanceof n)) return h;\n  {\n    const t = o.keys();\n\n    for (let n = 0; n < t.length; n++) {\n      a.value = t[n];\n      const o = Q(e, r.body);\n      if (o === w) break;\n      if (o instanceof f) return o;\n    }\n  }\n}\n\nfunction te(e, r) {\n  null !== r.init && Q(e, r.init);\n  const t = {\n    testResult: !0,\n    lastAction: h\n  };\n\n  do {\n    ne(e, r, t);\n  } while (!0 === t.testResult);\n\n  return t.lastAction instanceof f ? t.lastAction : h;\n}\n\nfunction ne(e, r, t) {\n  if (null !== r.test) {\n    if (t.testResult = Q(e, r.test), !1 === t.testResult) return;\n    if (!0 !== t.testResult) throw new Error(D(r, \"RUNTIME\", \"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"));\n  }\n\n  t.lastAction = Q(e, r.body), t.lastAction !== w ? t.lastAction instanceof f ? t.testResult = !1 : null !== r.update && Q(e, r.update) : t.testResult = !1;\n}\n\nfunction oe(e, r) {\n  let o,\n      a = null,\n      i = \"\";\n\n  if (\"MemberExpression\" === r.argument.type) {\n    if (a = Q(e, r.argument.object), !0 === r.argument.computed ? i = Q(e, r.argument.property) : \"Identifier\" === r.argument.property.type && (i = r.argument.property.name), g(a)) {\n      if (!I(i)) throw new Error(\"Invalid Parameter\");\n      if (i < 0 && (i = a.length + i), i < 0 || i >= a.length) throw new Error(\"Assignment outside of array bounds\");\n      o = y(a[i]), a[i] = \"++\" === r.operator ? o + 1 : o - 1;\n    } else if (a instanceof t) {\n      if (!1 === d(i)) throw new Error(\"Dictionary accessor must be a string\");\n      if (!0 !== a.hasField(i)) throw new Error(\"Invalid Parameter\");\n      o = y(a.field(i)), a.setField(i, \"++\" === r.operator ? o + 1 : o - 1);\n    } else {\n      if (!(a instanceof n)) throw N(a) ? new Error(\"Array is Immutable\") : new Error(\"Invalid Parameter\");\n      if (!1 === d(i)) throw new Error(\"Feature accessor must be a string\");\n      if (!0 !== a.hasField(i)) throw new Error(\"Invalid Parameter\");\n      o = y(a.field(i)), a.setField(i, \"++\" === r.operator ? o + 1 : o - 1);\n    }\n\n    return !1 === r.prefix ? o : \"++\" === r.operator ? o + 1 : o - 1;\n  }\n\n  if (a = \"Identifier\" === r.argument.type ? r.argument.name.toLowerCase() : \"\", !a) throw new Error(\"Invalid identifier\");\n  if (null !== e.localScope && void 0 !== e.localScope[a]) return o = y(e.localScope[a].value), e.localScope[a] = {\n    value: \"++\" === r.operator ? o + 1 : o - 1,\n    valueset: !0,\n    node: r\n  }, !1 === r.prefix ? o : \"++\" === r.operator ? o + 1 : o - 1;\n  if (void 0 !== e.globalScope[a]) return o = y(e.globalScope[a].value), e.globalScope[a] = {\n    value: \"++\" === r.operator ? o + 1 : o - 1,\n    valueset: !0,\n    node: r\n  }, !1 === r.prefix ? o : \"++\" === r.operator ? o + 1 : o - 1;\n  throw new Error(\"Variable not recognised\");\n}\n\nfunction ae(e, r, t, n) {\n  switch (r) {\n    case \"=\":\n      return e === h ? null : e;\n\n    case \"/=\":\n      return y(t) / y(e);\n\n    case \"*=\":\n      return y(t) * y(e);\n\n    case \"-=\":\n      return y(t) - y(e);\n\n    case \"+=\":\n      return d(t) || d(e) ? v(t) + v(e) : y(t) + y(e);\n\n    case \"%=\":\n      return y(t) % y(e);\n\n    default:\n      throw new Error(D(n, \"RUNTIME\", \"OPERATORNOTRECOGNISED\"));\n  }\n}\n\nfunction ie(e, r) {\n  const o = Q(e, r.right);\n  let a = null,\n      i = \"\";\n\n  if (\"MemberExpression\" === r.left.type) {\n    if (a = Q(e, r.left.object), !0 === r.left.computed ? i = Q(e, r.left.property) : \"Identifier\" === r.left.property.type && (i = r.left.property.name), g(a)) {\n      if (!I(i)) throw new Error(\"Invalid Parameter\");\n      if (i < 0 && (i = a.length + i), i < 0 || i > a.length) throw new Error(\"Assignment outside of array bounds\");\n\n      if (i === a.length) {\n        if (\"=\" !== r.operator) throw new Error(\"Invalid Parameter\");\n        a[i] = ae(o, r.operator, a[i], r);\n      } else a[i] = ae(o, r.operator, a[i], r);\n    } else if (a instanceof t) {\n      if (!1 === d(i)) throw new Error(\"Dictionary accessor must be a string\");\n      if (!0 === a.hasField(i)) a.setField(i, ae(o, r.operator, a.field(i), r));else {\n        if (\"=\" !== r.operator) throw new Error(\"Invalid Parameter\");\n        a.setField(i, ae(o, r.operator, null, r));\n      }\n    } else {\n      if (!(a instanceof n)) throw N(a) ? new Error(\"Array is Immutable\") : new Error(\"Invalid Parameter\");\n      if (!1 === d(i)) throw new Error(\"Feature accessor must be a string\");\n      if (!0 === a.hasField(i)) a.setField(i, ae(o, r.operator, a.field(i), r));else {\n        if (\"=\" !== r.operator) throw new Error(\"Invalid Parameter\");\n        a.setField(i, ae(o, r.operator, null, r));\n      }\n    }\n\n    return h;\n  }\n\n  if (a = r.left.name.toLowerCase(), null !== e.localScope && void 0 !== e.localScope[a]) return e.localScope[a] = {\n    value: ae(o, r.operator, e.localScope[a].value, r),\n    valueset: !0,\n    node: r.right\n  }, h;\n  if (void 0 !== e.globalScope[a]) return e.globalScope[a] = {\n    value: ae(o, r.operator, e.globalScope[a].value, r),\n    valueset: !0,\n    node: r.right\n  }, h;\n  throw new Error(\"Variable not recognised\");\n}\n\nfunction se(e, r) {\n  if (\"AssignmentExpression\" === r.expression.type || \"UpdateExpression\" === r.expression.type) return Q(e, r.expression);\n\n  if (\"CallExpression\" === r.expression.type) {\n    const t = Q(e, r.expression);\n    return t === h ? h : new p(t);\n  }\n\n  {\n    const t = Q(e, r.expression);\n    return t === h ? h : new p(t);\n  }\n}\n\nfunction le(e, r) {\n  if (\"AssignmentExpression\" === r.test.type || \"UpdateExpression\" === r.test.type) throw new Error(D(r.test, \"RUNTIME\", \"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));\n  const t = Q(e, r.test);\n  if (!0 === t) return Q(e, r.consequent);\n  if (!1 === t) return null !== r.alternate ? Q(e, r.alternate) : h;\n  throw new Error(D(r, \"RUNTIME\", \"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"));\n}\n\nfunction ce(e, r) {\n  let t = h;\n\n  for (let n = 0; n < r.body.length; n++) if (t = Q(e, r.body[n]), t instanceof f || t === w || t === m) return t;\n\n  return t;\n}\n\nfunction ue(e, r) {\n  if (null === r.argument) return new f(h);\n  const t = Q(e, r.argument);\n  return new f(t);\n}\n\nfunction fe(e, r) {\n  const t = r.id.name.toLowerCase();\n  return e.globalScope[t] = {\n    valueset: !0,\n    node: null,\n    value: new o(r, e)\n  }, h;\n}\n\nfunction pe(e, r) {\n  for (let t = 0; t < r.declarations.length; t++) Q(e, r.declarations[t]);\n\n  return h;\n}\n\nfunction he(e, r) {\n  let t = null === r.init ? null : Q(e, r.init);\n  if (t === h && (t = null), \"Identifier\" !== r.id.type) throw new Error(\"Can only assign a regular variable\");\n  const n = r.id.name.toLowerCase();\n  return null !== e.localScope ? e.localScope[n] = {\n    value: t,\n    valueset: !0,\n    node: r.init\n  } : e.globalScope[n] = {\n    value: t,\n    valueset: !0,\n    node: r.init\n  }, h;\n}\n\nlet we = 0;\n\nfunction me(e, r, n) {\n  let o;\n\n  switch (r = r.toLowerCase()) {\n    case \"hasz\":\n      {\n        const r = e.hasZ;\n        return void 0 !== r && r;\n      }\n\n    case \"hasm\":\n      {\n        const r = e.hasM;\n        return void 0 !== r && r;\n      }\n\n    case \"spatialreference\":\n      {\n        let r = e.spatialReference._arcadeCacheId;\n\n        if (void 0 === r) {\n          let t = !0;\n          Object.freeze && Object.isFrozen(e.spatialReference) && (t = !1), t && (we++, e.spatialReference._arcadeCacheId = we, r = we);\n        }\n\n        const n = new t({\n          wkt: e.spatialReference.wkt,\n          wkid: e.spatialReference.wkid\n        });\n        return void 0 !== r && (n._arcadeCacheId = \"SPREF\" + r.toString()), n;\n      }\n  }\n\n  switch (e.type) {\n    case \"extent\":\n      switch (r) {\n        case \"xmin\":\n        case \"xmax\":\n        case \"ymin\":\n        case \"ymax\":\n        case \"zmin\":\n        case \"zmax\":\n        case \"mmin\":\n        case \"mmax\":\n          {\n            const t = e[r];\n            return void 0 !== t ? t : null;\n          }\n\n        case \"type\":\n          return \"Extent\";\n      }\n\n      break;\n\n    case \"polygon\":\n      switch (r) {\n        case \"rings\":\n          o = e.cache._arcadeCacheId, void 0 === o && (we++, o = we, e.cache._arcadeCacheId = o);\n          return new a(e.rings, e.spatialReference, !0 === e.hasZ, !0 === e.hasM, o);\n\n        case \"type\":\n          return \"Polygon\";\n      }\n\n      break;\n\n    case \"point\":\n      switch (r) {\n        case \"x\":\n        case \"y\":\n        case \"z\":\n        case \"m\":\n          return void 0 !== e[r] ? e[r] : null;\n\n        case \"type\":\n          return \"Point\";\n      }\n\n      break;\n\n    case \"polyline\":\n      switch (r) {\n        case \"paths\":\n          o = e.cache._arcadeCacheId, void 0 === o && (we++, o = we, e.cache._arcadeCacheId = o);\n          return new a(e.paths, e.spatialReference, !0 === e.hasZ, !0 === e.hasM, o);\n\n        case \"type\":\n          return \"Polyline\";\n      }\n\n      break;\n\n    case \"multipoint\":\n      switch (r) {\n        case \"points\":\n          o = e.cache._arcadeCacheId, void 0 === o && (we++, o = we, e.cache._arcadeCacheId = o);\n          return new i(e.points, e.spatialReference, !0 === e.hasZ, !0 === e.hasM, o, 1);\n\n        case \"type\":\n          return \"Multipoint\";\n      }\n\n  }\n\n  throw new Error(D(n, \"RUNTIME\", \"PROPERTYNOTFOUND\"));\n}\n\nfunction Ee(e, r) {\n  try {\n    const o = Q(e, r.object);\n    if (null === o) throw new Error(D(r, \"RUNTIME\", \"NOTFOUND\"));\n\n    if (!1 === r.computed) {\n      if (\"Identifier\" === r.property.type) {\n        if (o instanceof t || o instanceof n) return o.field(r.property.name);\n        if (o instanceof z) return me(o, r.property.name, r);\n      }\n\n      throw new Error(D(r, \"RUNTIME\", \"INVALIDTYPE\"));\n    }\n\n    {\n      let a = Q(e, r.property);\n\n      if (o instanceof t || o instanceof n) {\n        if (d(a)) return o.field(a);\n        throw new Error(D(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (o instanceof z) {\n        if (d(a)) return me(o, a, r);\n        throw new Error(D(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (g(o)) {\n        if (I(a) && isFinite(a) && Math.floor(a) === a) {\n          if (a < 0 && (a = o.length + a), a >= o.length || a < 0) throw new Error(D(r, \"RUNTIME\", \"OUTOFBOUNDS\"));\n          return o[a];\n        }\n\n        throw new Error(D(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (d(o)) {\n        if (I(a) && isFinite(a) && Math.floor(a) === a) {\n          if (a < 0 && (a = o.length + a), a >= o.length || a < 0) throw new Error(D(r, \"RUNTIME\", \"OUTOFBOUNDS\"));\n          return o[a];\n        }\n\n        throw new Error(D(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (N(o)) {\n        if (I(a) && isFinite(a) && Math.floor(a) === a) {\n          if (a < 0 && (a = o.length() + a), a >= o.length() || a < 0) throw new Error(D(r, \"RUNTIME\", \"OUTOFBOUNDS\"));\n          return o.get(a);\n        }\n\n        throw new Error(D(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      throw new Error(D(r, \"RUNTIME\", \"INVALIDTYPE\"));\n    }\n  } catch (o) {\n    throw o;\n  }\n}\n\nfunction de(e, r) {\n  try {\n    const t = Q(e, r.argument);\n\n    if (l(t)) {\n      if (\"!\" === r.operator) return !t;\n      if (\"-\" === r.operator) return -1 * y(t);\n      if (\"+\" === r.operator) return 1 * y(t);\n      if (\"~\" === r.operator) return ~y(t);\n      throw new Error(D(r, \"RUNTIME\", \"NOTSUPPORTEDUNARYOPERATOR\"));\n    }\n\n    if (\"~\" === r.operator) return ~y(t);\n    if (\"-\" === r.operator) return -1 * y(t);\n    if (\"+\" === r.operator) return 1 * y(t);\n    throw new Error(D(r, \"RUNTIME\", \"NOTSUPPORTEDUNARYOPERATOR\"));\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction ge(e, r) {\n  try {\n    const t = [];\n\n    for (let n = 0; n < r.elements.length; n++) {\n      const o = Q(e, r.elements[n]);\n      if (E(o)) throw new Error(D(r, \"RUNTIME\", \"FUNCTIONCONTEXTILLEGAL\"));\n      o === h ? t.push(null) : t.push(o);\n    }\n\n    return t;\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction Ne(e, r) {\n  try {\n    const t = [Q(e, r.left), Q(e, r.right)],\n          n = t[0],\n          o = t[1];\n\n    switch (r.operator) {\n      case \"|\":\n      case \"<<\":\n      case \">>\":\n      case \">>>\":\n      case \"^\":\n      case \"&\":\n        return R(y(n), y(o), r.operator);\n\n      case \"==\":\n        return c(n, o);\n\n      case \"!=\":\n        return !c(n, o);\n\n      case \"<\":\n      case \">\":\n      case \"<=\":\n      case \">=\":\n        return T(n, o, r.operator);\n\n      case \"+\":\n        return d(n) || d(o) ? v(n) + v(o) : y(n) + y(o);\n\n      case \"-\":\n        return y(n) - y(o);\n\n      case \"*\":\n        return y(n) * y(o);\n\n      case \"/\":\n        return y(n) / y(o);\n\n      case \"%\":\n        return y(n) % y(o);\n\n      default:\n        throw new Error(D(r, \"RUNTIME\", \"OPERATORNOTRECOGNISED\"));\n    }\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction Ie(e, r) {\n  try {\n    if (\"AssignmentExpression\" === r.left.type || \"UpdateExpression\" === r.left.type) throw new Error(D(r.left, \"RUNTIME\", \"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));\n    if (\"AssignmentExpression\" === r.right.type || \"UpdateExpression\" === r.right.type) throw new Error(D(r.right, \"RUNTIME\", \"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));\n    const t = Q(e, r.left);\n    if (l(t)) switch (r.operator) {\n      case \"||\":\n        if (!0 === t) return t;\n        {\n          const t = Q(e, r.right);\n          if (l(t)) return t;\n          throw new Error(D(r, \"RUNTIME\", \"ONLYORORAND\"));\n        }\n\n      case \"&&\":\n        if (!1 === t) return t;\n        {\n          const t = Q(e, r.right);\n          if (l(t)) return t;\n          throw new Error(D(r, \"RUNTIME\", \"ONLYORORAND\"));\n        }\n\n      default:\n        throw new Error(D(r, \"RUNTIME\", \"ONLYORORAND\"));\n    }\n    throw new Error(D(r, \"RUNTIME\", \"ONLYBOOLEAN\"));\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction ye(e, r) {\n  return r.value ? r.value.cooked : \"\";\n}\n\nfunction ve(e, r) {\n  let t = \"\",\n      n = 0;\n\n  for (const o of r.quasis) if (t += o.value ? o.value.cooked : \"\", !1 === o.tail) {\n    t += r.expressions[n] ? v(Q(e, r.expressions[n])) : \"\", n++;\n  }\n\n  return t;\n}\n\nfunction Te(e, r) {\n  let t;\n\n  try {\n    const n = r.name.toLowerCase();\n    if (null !== e.localScope && void 0 !== e.localScope[n]) return t = e.localScope[n], !0 === t.valueset || (t.value = Q(e, t.node), t.valueset = !0), t.value;\n    if (void 0 !== e.globalScope[n]) return t = e.globalScope[n], !0 === t.valueset || (t.value = Q(e, t.node), t.valueset = !0), t.value;\n    throw new Error(D(r, \"RUNTIME\", \"VARIABLENOTFOUND\"));\n  } catch (n) {\n    throw n;\n  }\n}\n\nfunction Re(e, r) {\n  try {\n    if (\"Identifier\" !== r.callee.type) throw new Error(D(r, \"RUNTIME\", \"ONLYNODESSUPPORTED\"));\n\n    if (null !== e.localScope && void 0 !== e.localScope[r.callee.name.toLowerCase()]) {\n      const t = e.localScope[r.callee.name.toLowerCase()];\n      if (t.value instanceof u) return t.value.fn(e, r);\n      if (t.value instanceof o) return xe(e, r, t.value.definition);\n      throw new Error(D(r, \"RUNTIME\", \"NOTAFUNCTION\"));\n    }\n\n    if (void 0 !== e.globalScope[r.callee.name.toLowerCase()]) {\n      const t = e.globalScope[r.callee.name.toLowerCase()];\n      if (t.value instanceof u) return t.value.fn(e, r);\n      if (t.value instanceof o) return xe(e, r, t.value.definition);\n      throw new Error(D(r, \"RUNTIME\", \"NOTAFUNCTION\"));\n    }\n\n    throw new Error(D(r, \"RUNTIME\", \"NOTFOUND\"));\n  } catch (t) {\n    throw t;\n  }\n}\n\nconst Oe = {};\n\nfunction Se(o) {\n  return null == o ? \"\" : g(o) || N(o) ? \"Array\" : S(o) ? \"Date\" : d(o) ? \"String\" : l(o) ? \"Boolean\" : I(o) ? \"Number\" : o instanceof r ? \"Attachment\" : o instanceof e ? \"Portal\" : o instanceof t ? \"Dictionary\" : o instanceof n ? \"Feature\" : o instanceof Z ? \"Point\" : o instanceof H ? \"Polygon\" : o instanceof W ? \"Polyline\" : o instanceof q ? \"Multipoint\" : o instanceof G ? \"Extent\" : E(o) ? \"Function\" : b(o) ? \"FeatureSet\" : U(o) ? \"FeatureSetCollection\" : o === h ? \"\" : \"number\" == typeof o && isNaN(o) ? \"Number\" : \"Unrecognised Type\";\n}\n\nfunction be(e, r, t, n) {\n  try {\n    const o = Q(e, r.arguments[t]);\n    if (c(o, n)) return Q(e, r.arguments[t + 1]);\n    {\n      const o = r.arguments.length - t;\n      return 1 === o ? Q(e, r.arguments[t]) : 2 === o ? null : 3 === o ? Q(e, r.arguments[t + 2]) : be(e, r, t + 2, n);\n    }\n  } catch (o) {\n    throw o;\n  }\n}\n\nfunction Ue(e, r, t, n) {\n  try {\n    if (!0 === n) return Q(e, r.arguments[t + 1]);\n    if (3 === r.arguments.length - t) return Q(e, r.arguments[t + 2]);\n    {\n      const n = Q(e, r.arguments[t + 2]);\n      if (!1 === l(n)) throw new Error(\"WHEN needs boolean test conditions\");\n      return Ue(e, r, t + 2, n);\n    }\n  } catch (o) {\n    throw o;\n  }\n}\n\nfunction Ae(e, r) {\n  const t = e.length,\n        n = Math.floor(t / 2);\n  return 0 === t ? [] : 1 === t ? [e[0]] : Ce(Ae(e.slice(0, n), r), Ae(e.slice(n, t), r), r);\n}\n\nfunction Ce(e, r, t) {\n  const n = [];\n\n  for (; e.length > 0 || r.length > 0;) if (e.length > 0 && r.length > 0) {\n    let o = t(e[0], r[0]);\n    isNaN(o) && (o = 0), o <= 0 ? (n.push(e[0]), e = e.slice(1)) : (n.push(r[0]), r = r.slice(1));\n  } else e.length > 0 ? (n.push(e[0]), e = e.slice(1)) : r.length > 0 && (n.push(r[0]), r = r.slice(1));\n\n  return n;\n}\n\nfunction Me(e, r, t) {\n  try {\n    const n = e.body;\n    if (t.length !== e.params.length) throw new Error(\"Invalid Parameter calls to function.\");\n\n    for (let a = 0; a < t.length; a++) r.localScope[e.params[a].name.toLowerCase()] = {\n      value: t[a],\n      valueset: !0,\n      node: null\n    };\n\n    const o = Q(r, n);\n    if (o instanceof f) return o.value;\n    if (o === w) throw new Error(\"Cannot Break from a Function\");\n    if (o === m) throw new Error(\"Cannot Continue from a Function\");\n    return o instanceof p ? o.value : o;\n  } catch (n) {\n    throw n;\n  }\n}\n\nfunction xe(e, r, t) {\n  return J(e, r, function (r, n, o) {\n    const a = {\n      spatialReference: e.spatialReference,\n      globalScope: e.globalScope,\n      depthCounter: e.depthCounter + 1,\n      console: e.console,\n      lrucache: e.lrucache,\n      interceptor: e.interceptor,\n      localScope: {}\n    };\n    if (a.depthCounter > 64) throw new Error(\"Exceeded maximum function depth\");\n    return Me(t, a, o);\n  });\n}\n\nfunction Fe(e) {\n  return function () {\n    const r = {\n      spatialReference: e.context.spatialReference,\n      console: e.context.console,\n      lrucache: e.context.lrucache,\n      interceptor: e.context.interceptor,\n      localScope: {},\n      depthCounter: e.context.depthCounter + 1,\n      globalScope: e.context.globalScope\n    };\n    if (r.depthCounter > 64) throw new Error(\"Exceeded maximum function depth\");\n    return Me(e.definition, r, arguments);\n  };\n}\n\nL(Oe, J), j(Oe, J), Y(Oe, J), V(Oe, J), _(Oe, J), B(Oe, J), k(Oe, J), Oe.typeof = function (e, r) {\n  return J(e, r, function (e, r, t) {\n    s(t, 1, 1);\n    const n = Se(t[0]);\n    if (\"Unrecognised Type\" === n) throw new Error(\"Unrecognised Type\");\n    return n;\n  });\n}, Oe.iif = function (e, r) {\n  try {\n    s(null === r.arguments ? [] : r.arguments, 3, 3);\n    const t = Q(e, r.arguments[0]);\n    if (!1 === l(t)) throw new Error(\"IF Function must have a boolean test condition\");\n    const n = Q(e, r.arguments[1]),\n          o = Q(e, r.arguments[2]);\n    return !0 === t ? n : o;\n  } catch (t) {\n    throw t;\n  }\n}, Oe.decode = function (e, r) {\n  try {\n    if (r.arguments.length < 2) throw new Error(\"Missing Parameters\");\n    if (2 === r.arguments.length) return Q(e, r.arguments[1]);\n    {\n      if ((r.arguments.length - 1) % 2 == 0) throw new Error(\"Must have a default value result.\");\n      const t = Q(e, r.arguments[0]);\n      return be(e, r, 1, t);\n    }\n  } catch (t) {\n    throw t;\n  }\n}, Oe.when = function (e, r) {\n  try {\n    if (r.arguments.length < 3) throw new Error(\"Missing Parameters\");\n    if (r.arguments.length % 2 == 0) throw new Error(\"Must have a default value result.\");\n    const t = Q(e, r.arguments[0]);\n    if (!1 === l(t)) throw new Error(\"WHEN needs boolean test conditions\");\n    return Ue(e, r, 0, t);\n  } catch (t) {\n    throw t;\n  }\n}, Oe.top = function (e, r) {\n  return J(e, r, function (e, r, t) {\n    if (s(t, 2, 2), g(t[0])) return y(t[1]) >= t[0].length ? t[0].slice(0) : t[0].slice(0, y(t[1]));\n    if (N(t[0])) return y(t[1]) >= t[0].length() ? t[0].slice(0) : t[0].slice(0, y(t[1]));\n    throw new Error(\"Top cannot accept this parameter type\");\n  });\n}, Oe.first = function (e, r) {\n  return J(e, r, function (e, r, t) {\n    return s(t, 1, 1), g(t[0]) ? 0 === t[0].length ? null : t[0][0] : N(t[0]) ? 0 === t[0].length() ? null : t[0].get(0) : null;\n  });\n}, Oe.sort = function (e, r) {\n  return J(e, r, function (e, r, t) {\n    s(t, 1, 2);\n    let n = t[0];\n    if (N(n) && (n = n.toArray()), !1 === g(n)) throw new Error(\"Illegal Argument\");\n\n    if (t.length > 1) {\n      if (!1 === E(t[1])) throw new Error(\"Illegal Argument\");\n      let e = n;\n      const r = Fe(t[1]);\n      return e = Ae(e, function (e, t) {\n        return r(e, t);\n      }), e;\n    }\n\n    {\n      let e = n;\n      if (0 === e.length) return [];\n      const r = {};\n\n      for (let n = 0; n < e.length; n++) {\n        const t = Se(e[n]);\n        \"\" !== t && (r[t] = !0);\n      }\n\n      if (!0 === r.Array || !0 === r.Dictionary || !0 === r.Feature || !0 === r.Point || !0 === r.Polygon || !0 === r.Polyline || !0 === r.Multipoint || !0 === r.Extent || !0 === r.Function) return e.slice(0);\n      let t = 0,\n          o = \"\";\n\n      for (const n in r) t++, o = n;\n\n      return e = t > 1 || \"String\" === o ? Ae(e, function (e, r) {\n        if (null == e || e === h) return null == r || r === h ? 0 : 1;\n        if (null == r || r === h) return -1;\n        const t = v(e),\n              n = v(r);\n        return t < n ? -1 : t === n ? 0 : 1;\n      }) : \"Number\" === o ? Ae(e, function (e, r) {\n        return e - r;\n      }) : \"Boolean\" === o ? Ae(e, function (e, r) {\n        return e === r ? 0 : r ? -1 : 1;\n      }) : \"Date\" === o ? Ae(e, function (e, r) {\n        return r - e;\n      }) : e.slice(0), e;\n    }\n  });\n};\n\nfor (const qe in Oe) Oe[qe] = {\n  value: new u(Oe[qe]),\n  valueset: !0,\n  node: null\n};\n\nconst Pe = function () {};\n\nfunction De(e, r) {\n  const o = new Pe();\n  e || (e = {}), r || (r = {});\n  const a = new t({\n    newline: \"\\n\",\n    tab: \"\\t\",\n    singlequote: \"'\",\n    doublequote: '\"',\n    forwardslash: \"/\",\n    backwardslash: \"\\\\\"\n  });\n  a.immutable = !1, o.textformatting = {\n    value: a,\n    valueset: !0,\n    node: null\n  };\n\n  for (const t in r) o[t] = {\n    value: new u(r[t]),\n    native: !0,\n    valueset: !0,\n    node: null\n  };\n\n  for (const t in e) e[t] && \"esri.Graphic\" === e[t].declaredClass ? o[t] = {\n    value: n.createFromGraphic(e[t]),\n    valueset: !0,\n    node: null\n  } : o[t] = {\n    value: e[t],\n    valueset: !0,\n    node: null\n  };\n\n  return o;\n}\n\nPe.prototype = Oe, Pe.prototype.infinity = {\n  value: Number.POSITIVE_INFINITY,\n  valueset: !0,\n  node: null\n}, Pe.prototype.pi = {\n  value: Math.PI,\n  valueset: !0,\n  node: null\n};\nconst Le = {\n  fixSpatialReference: O,\n  parseArguments: X,\n  standardFunction: J\n};\n\nfunction je(e) {\n  console.log(e);\n}\n\nfunction _e(e) {\n  const r = {\n    mode: \"sync\",\n    compiled: !1,\n    functions: {},\n    signatures: [],\n    standardFunction: J,\n    evaluateIdentifier: Te,\n    arcadeCustomFunctionHandler: Fe\n  };\n\n  for (let t = 0; t < e.length; t++) e[t].registerFunctions(r);\n\n  for (const t in r.functions) Oe[t] = {\n    value: new u(r.functions[t]),\n    valueset: !0,\n    node: null\n  }, Pe.prototype[t] = Oe[t];\n\n  for (let t = 0; t < r.signatures.length; t++) A(r.signatures[t], \"async\");\n}\n\nfunction ke(e, r) {\n  let t = r.spatialReference;\n  null == t && (t = new K({\n    wkid: 102100\n  }));\n  let n = Q({\n    spatialReference: t,\n    globalScope: De(r.vars, r.customfunctions),\n    localScope: null,\n    console: r.console ? r.console : je,\n    lrucache: r.lrucache,\n    interceptor: r.interceptor,\n    depthCounter: 1\n  }, e.body[0].body);\n  if (n instanceof f && (n = n.value), n instanceof p && (n = n.value), n === h && (n = null), n === w) throw new Error(\"Cannot return BREAK\");\n  if (n === m) throw new Error(\"Cannot return CONTINUE\");\n  if (n instanceof o) throw new Error(\"Cannot return FUNCTION\");\n  if (n instanceof u) throw new Error(\"Cannot return FUNCTION\");\n  return n;\n}\n\nfunction Ve(e, r) {\n  return C(e);\n}\n\nfunction Be(e, r) {\n  return M(e, r, \"simple\");\n}\n\nfunction Ye(e, r) {\n  return x(e, r);\n}\n\nfunction Ge(e, r) {\n  return F(e, r);\n}\n\nfunction ze(e) {\n  return P(e);\n}\n\nexport { ke as executeScript, _e as extend, Ve as extractFieldLiterals, ze as findFunctionCalls, Le as functionHelper, Ge as referencesFunction, Ye as referencesMember, Be as validateScript };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/arcade/arcadeRuntime.js"],"names":["e","r","t","n","o","a","i","p","s","l","c","N","u","R","f","I","v","h","m","w","E","g","d","b","k","y","T","j","O","S","q","U","addFunctionDeclaration","A","findFieldLiterals","C","validateScript","M","referencesMember","x","referencesFunction","F","findFunctionCalls","P","nodeErrorMessage","D","registerFunctions","L","_","V","B","Y","G","z","Z","H","W","K","X","arguments","length","push","Q","J","type","he","pe","ce","fe","ue","le","se","ie","oe","ye","ve","te","re","Te","Ee","value","Re","de","Ne","Ie","Error","ge","$","ee","properties","key","toString","immutable","name","right","left","declarations","id","toLowerCase","localScope","globalScope","body","keys","init","testResult","lastAction","ne","test","update","argument","object","computed","property","operator","hasField","field","setField","prefix","valueset","node","ae","expression","consequent","alternate","we","me","hasZ","hasM","spatialReference","_arcadeCacheId","Object","freeze","isFrozen","wkt","wkid","cache","rings","paths","points","isFinite","Math","floor","get","elements","cooked","quasis","tail","expressions","callee","fn","xe","definition","Oe","Se","isNaN","be","Ue","Ae","Ce","slice","Me","params","depthCounter","console","lrucache","interceptor","Fe","context","typeof","iif","decode","when","top","first","sort","toArray","Array","Dictionary","Feature","Point","Polygon","Polyline","Multipoint","Extent","Function","qe","Pe","De","newline","tab","singlequote","doublequote","forwardslash","backwardslash","textformatting","native","declaredClass","createFromGraphic","prototype","infinity","Number","POSITIVE_INFINITY","pi","PI","Le","fixSpatialReference","parseArguments","standardFunction","je","log","_e","mode","compiled","functions","signatures","evaluateIdentifier","arcadeCustomFunctionHandler","ke","vars","customfunctions","Ve","Be","Ye","Ge","ze","executeScript","extend","extractFieldLiterals","functionHelper"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"./ArcadePortal.js\";import r from\"./Attachment.js\";import t from\"./Dictionary.js\";import n from\"./Feature.js\";import o from\"./FunctionWrapper.js\";import a from\"./ImmutablePathArray.js\";import i from\"./ImmutablePointArray.js\";import{p as s,i as l,e as c,N as u,R as f,I as p,v as h,m as w,n as m,c as E,g as d,a as g,b as N,k as I,t as y,d as v,h as T,j as R,f as O,o as S,q as b,r as U}from\"../chunks/languageUtils.js\";import{addFunctionDeclaration as A,findFieldLiterals as C,validateScript as M,referencesMember as x,referencesFunction as F,findFunctionCalls as P,nodeErrorMessage as D}from\"./treeAnalysis.js\";import{registerFunctions as L}from\"./functions/array.js\";import{registerFunctions as j}from\"./functions/date.js\";import{registerFunctions as _}from\"./functions/geometry.js\";import{registerFunctions as k}from\"./functions/geomsync.js\";import{registerFunctions as V}from\"./functions/maths.js\";import{registerFunctions as B}from\"./functions/stats.js\";import{registerFunctions as Y}from\"./functions/string.js\";import G from\"../geometry/Extent.js\";import z from\"../geometry/Geometry.js\";import q from\"../geometry/Multipoint.js\";import Z from\"../geometry/Point.js\";import H from\"../geometry/Polygon.js\";import W from\"../geometry/Polyline.js\";import K from\"../geometry/SpatialReference.js\";function X(e,r){const t=[];for(let n=0;n<r.arguments.length;n++)t.push(Q(e,r.arguments[n]));return t}function J(e,r,t){try{return t(e,r,X(e,r))}catch(n){throw n}}function Q(e,r){try{switch(r.type){case\"EmptyStatement\":return h;case\"VariableDeclarator\":return he(e,r);case\"VariableDeclaration\":return pe(e,r);case\"BlockStatement\":return ce(e,r);case\"FunctionDeclaration\":return fe(e,r);case\"ReturnStatement\":return ue(e,r);case\"IfStatement\":return le(e,r);case\"ExpressionStatement\":return se(e,r);case\"AssignmentExpression\":return ie(e,r);case\"UpdateExpression\":return oe(e,r);case\"BreakStatement\":return w;case\"ContinueStatement\":return m;case\"TemplateElement\":return ye(e,r);case\"TemplateLiteral\":return ve(e,r);case\"ForStatement\":return te(e,r);case\"ForInStatement\":return re(e,r);case\"Identifier\":return Te(e,r);case\"MemberExpression\":return Ee(e,r);case\"Literal\":return r.value;case\"CallExpression\":return Re(e,r);case\"UnaryExpression\":return de(e,r);case\"BinaryExpression\":return Ne(e,r);case\"LogicalExpression\":return Ie(e,r);case\"ConditionalExpression\":throw new Error(D(r,\"RUNTIME\",\"NOTSUPPORTED\"));case\"ArrayExpression\":return ge(e,r);case\"ObjectExpression\":return $(e,r);case\"Property\":return ee(e,r);default:throw new Error(D(r,\"RUNTIME\",\"UNREOGNISED\"))}}catch(t){throw t}}function $(e,r){const n={};for(let t=0;t<r.properties.length;t++){const o=Q(e,r.properties[t]);if(E(o.value))throw new Error(\"Illegal Argument\");if(!1===d(o.key))throw new Error(\"Illegal Argument\");o.value===h?n[o.key.toString()]=null:n[o.key.toString()]=o.value}const o=new t(n);return o.immutable=!1,o}function ee(e,r){return{key:\"Identifier\"===r.key.type?r.key.name:Q(e,r.key),value:Q(e,r.value)}}function re(e,r){const o=Q(e,r.right);\"VariableDeclaration\"===r.left.type&&Q(e,r.left);let a=null,i=\"\";if(\"VariableDeclaration\"===r.left.type){const e=r.left.declarations[0].id;\"Identifier\"===e.type&&(i=e.name)}else\"Identifier\"===r.left.type&&(i=r.left.name);if(!i)throw new Error(D(r,\"RUNTIME\",\"INVALIDVARIABLE\"));if(i=i.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[i]&&(a=e.localScope[i]),null===a&&void 0!==e.globalScope[i]&&(a=e.globalScope[i]),null===a)throw new Error(D(r,\"RUNTIME\",\"VARIABLENOTDECLARED\"));if(g(o)||d(o)){const t=o.length;for(let n=0;n<t;n++){a.value=n;const t=Q(e,r.body);if(t===w)break;if(t instanceof f)return t}return h}if(N(o)){for(let t=0;t<o.length();t++){a.value=t;const n=Q(e,r.body);if(n===w)break;if(n instanceof f)return n}return h}if(!(o instanceof t||o instanceof n))return h;{const t=o.keys();for(let n=0;n<t.length;n++){a.value=t[n];const o=Q(e,r.body);if(o===w)break;if(o instanceof f)return o}}}function te(e,r){null!==r.init&&Q(e,r.init);const t={testResult:!0,lastAction:h};do{ne(e,r,t)}while(!0===t.testResult);return t.lastAction instanceof f?t.lastAction:h}function ne(e,r,t){if(null!==r.test){if(t.testResult=Q(e,r.test),!1===t.testResult)return;if(!0!==t.testResult)throw new Error(D(r,\"RUNTIME\",\"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"))}t.lastAction=Q(e,r.body),t.lastAction!==w?t.lastAction instanceof f?t.testResult=!1:null!==r.update&&Q(e,r.update):t.testResult=!1}function oe(e,r){let o,a=null,i=\"\";if(\"MemberExpression\"===r.argument.type){if(a=Q(e,r.argument.object),!0===r.argument.computed?i=Q(e,r.argument.property):\"Identifier\"===r.argument.property.type&&(i=r.argument.property.name),g(a)){if(!I(i))throw new Error(\"Invalid Parameter\");if(i<0&&(i=a.length+i),i<0||i>=a.length)throw new Error(\"Assignment outside of array bounds\");o=y(a[i]),a[i]=\"++\"===r.operator?o+1:o-1}else if(a instanceof t){if(!1===d(i))throw new Error(\"Dictionary accessor must be a string\");if(!0!==a.hasField(i))throw new Error(\"Invalid Parameter\");o=y(a.field(i)),a.setField(i,\"++\"===r.operator?o+1:o-1)}else{if(!(a instanceof n))throw N(a)?new Error(\"Array is Immutable\"):new Error(\"Invalid Parameter\");if(!1===d(i))throw new Error(\"Feature accessor must be a string\");if(!0!==a.hasField(i))throw new Error(\"Invalid Parameter\");o=y(a.field(i)),a.setField(i,\"++\"===r.operator?o+1:o-1)}return!1===r.prefix?o:\"++\"===r.operator?o+1:o-1}if(a=\"Identifier\"===r.argument.type?r.argument.name.toLowerCase():\"\",!a)throw new Error(\"Invalid identifier\");if(null!==e.localScope&&void 0!==e.localScope[a])return o=y(e.localScope[a].value),e.localScope[a]={value:\"++\"===r.operator?o+1:o-1,valueset:!0,node:r},!1===r.prefix?o:\"++\"===r.operator?o+1:o-1;if(void 0!==e.globalScope[a])return o=y(e.globalScope[a].value),e.globalScope[a]={value:\"++\"===r.operator?o+1:o-1,valueset:!0,node:r},!1===r.prefix?o:\"++\"===r.operator?o+1:o-1;throw new Error(\"Variable not recognised\")}function ae(e,r,t,n){switch(r){case\"=\":return e===h?null:e;case\"/=\":return y(t)/y(e);case\"*=\":return y(t)*y(e);case\"-=\":return y(t)-y(e);case\"+=\":return d(t)||d(e)?v(t)+v(e):y(t)+y(e);case\"%=\":return y(t)%y(e);default:throw new Error(D(n,\"RUNTIME\",\"OPERATORNOTRECOGNISED\"))}}function ie(e,r){const o=Q(e,r.right);let a=null,i=\"\";if(\"MemberExpression\"===r.left.type){if(a=Q(e,r.left.object),!0===r.left.computed?i=Q(e,r.left.property):\"Identifier\"===r.left.property.type&&(i=r.left.property.name),g(a)){if(!I(i))throw new Error(\"Invalid Parameter\");if(i<0&&(i=a.length+i),i<0||i>a.length)throw new Error(\"Assignment outside of array bounds\");if(i===a.length){if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");a[i]=ae(o,r.operator,a[i],r)}else a[i]=ae(o,r.operator,a[i],r)}else if(a instanceof t){if(!1===d(i))throw new Error(\"Dictionary accessor must be a string\");if(!0===a.hasField(i))a.setField(i,ae(o,r.operator,a.field(i),r));else{if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");a.setField(i,ae(o,r.operator,null,r))}}else{if(!(a instanceof n))throw N(a)?new Error(\"Array is Immutable\"):new Error(\"Invalid Parameter\");if(!1===d(i))throw new Error(\"Feature accessor must be a string\");if(!0===a.hasField(i))a.setField(i,ae(o,r.operator,a.field(i),r));else{if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");a.setField(i,ae(o,r.operator,null,r))}}return h}if(a=r.left.name.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[a])return e.localScope[a]={value:ae(o,r.operator,e.localScope[a].value,r),valueset:!0,node:r.right},h;if(void 0!==e.globalScope[a])return e.globalScope[a]={value:ae(o,r.operator,e.globalScope[a].value,r),valueset:!0,node:r.right},h;throw new Error(\"Variable not recognised\")}function se(e,r){if(\"AssignmentExpression\"===r.expression.type||\"UpdateExpression\"===r.expression.type)return Q(e,r.expression);if(\"CallExpression\"===r.expression.type){const t=Q(e,r.expression);return t===h?h:new p(t)}{const t=Q(e,r.expression);return t===h?h:new p(t)}}function le(e,r){if(\"AssignmentExpression\"===r.test.type||\"UpdateExpression\"===r.test.type)throw new Error(D(r.test,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));const t=Q(e,r.test);if(!0===t)return Q(e,r.consequent);if(!1===t)return null!==r.alternate?Q(e,r.alternate):h;throw new Error(D(r,\"RUNTIME\",\"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"))}function ce(e,r){let t=h;for(let n=0;n<r.body.length;n++)if(t=Q(e,r.body[n]),t instanceof f||t===w||t===m)return t;return t}function ue(e,r){if(null===r.argument)return new f(h);const t=Q(e,r.argument);return new f(t)}function fe(e,r){const t=r.id.name.toLowerCase();return e.globalScope[t]={valueset:!0,node:null,value:new o(r,e)},h}function pe(e,r){for(let t=0;t<r.declarations.length;t++)Q(e,r.declarations[t]);return h}function he(e,r){let t=null===r.init?null:Q(e,r.init);if(t===h&&(t=null),\"Identifier\"!==r.id.type)throw new Error(\"Can only assign a regular variable\");const n=r.id.name.toLowerCase();return null!==e.localScope?e.localScope[n]={value:t,valueset:!0,node:r.init}:e.globalScope[n]={value:t,valueset:!0,node:r.init},h}let we=0;function me(e,r,n){let o;switch(r=r.toLowerCase()){case\"hasz\":{const r=e.hasZ;return void 0!==r&&r}case\"hasm\":{const r=e.hasM;return void 0!==r&&r}case\"spatialreference\":{let r=e.spatialReference._arcadeCacheId;if(void 0===r){let t=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(t=!1),t&&(we++,e.spatialReference._arcadeCacheId=we,r=we)}const n=new t({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==r&&(n._arcadeCacheId=\"SPREF\"+r.toString()),n}}switch(e.type){case\"extent\":switch(r){case\"xmin\":case\"xmax\":case\"ymin\":case\"ymax\":case\"zmin\":case\"zmax\":case\"mmin\":case\"mmax\":{const t=e[r];return void 0!==t?t:null}case\"type\":return\"Extent\"}break;case\"polygon\":switch(r){case\"rings\":o=e.cache._arcadeCacheId,void 0===o&&(we++,o=we,e.cache._arcadeCacheId=o);return new a(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case\"type\":return\"Polygon\"}break;case\"point\":switch(r){case\"x\":case\"y\":case\"z\":case\"m\":return void 0!==e[r]?e[r]:null;case\"type\":return\"Point\"}break;case\"polyline\":switch(r){case\"paths\":o=e.cache._arcadeCacheId,void 0===o&&(we++,o=we,e.cache._arcadeCacheId=o);return new a(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case\"type\":return\"Polyline\"}break;case\"multipoint\":switch(r){case\"points\":o=e.cache._arcadeCacheId,void 0===o&&(we++,o=we,e.cache._arcadeCacheId=o);return new i(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,o,1);case\"type\":return\"Multipoint\"}}throw new Error(D(n,\"RUNTIME\",\"PROPERTYNOTFOUND\"))}function Ee(e,r){try{const o=Q(e,r.object);if(null===o)throw new Error(D(r,\"RUNTIME\",\"NOTFOUND\"));if(!1===r.computed){if(\"Identifier\"===r.property.type){if(o instanceof t||o instanceof n)return o.field(r.property.name);if(o instanceof z)return me(o,r.property.name,r)}throw new Error(D(r,\"RUNTIME\",\"INVALIDTYPE\"))}{let a=Q(e,r.property);if(o instanceof t||o instanceof n){if(d(a))return o.field(a);throw new Error(D(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(o instanceof z){if(d(a))return me(o,a,r);throw new Error(D(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(g(o)){if(I(a)&&isFinite(a)&&Math.floor(a)===a){if(a<0&&(a=o.length+a),a>=o.length||a<0)throw new Error(D(r,\"RUNTIME\",\"OUTOFBOUNDS\"));return o[a]}throw new Error(D(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(d(o)){if(I(a)&&isFinite(a)&&Math.floor(a)===a){if(a<0&&(a=o.length+a),a>=o.length||a<0)throw new Error(D(r,\"RUNTIME\",\"OUTOFBOUNDS\"));return o[a]}throw new Error(D(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(N(o)){if(I(a)&&isFinite(a)&&Math.floor(a)===a){if(a<0&&(a=o.length()+a),a>=o.length()||a<0)throw new Error(D(r,\"RUNTIME\",\"OUTOFBOUNDS\"));return o.get(a)}throw new Error(D(r,\"RUNTIME\",\"INVALIDTYPE\"))}throw new Error(D(r,\"RUNTIME\",\"INVALIDTYPE\"))}}catch(o){throw o}}function de(e,r){try{const t=Q(e,r.argument);if(l(t)){if(\"!\"===r.operator)return!t;if(\"-\"===r.operator)return-1*y(t);if(\"+\"===r.operator)return 1*y(t);if(\"~\"===r.operator)return~y(t);throw new Error(D(r,\"RUNTIME\",\"NOTSUPPORTEDUNARYOPERATOR\"))}if(\"~\"===r.operator)return~y(t);if(\"-\"===r.operator)return-1*y(t);if(\"+\"===r.operator)return 1*y(t);throw new Error(D(r,\"RUNTIME\",\"NOTSUPPORTEDUNARYOPERATOR\"))}catch(t){throw t}}function ge(e,r){try{const t=[];for(let n=0;n<r.elements.length;n++){const o=Q(e,r.elements[n]);if(E(o))throw new Error(D(r,\"RUNTIME\",\"FUNCTIONCONTEXTILLEGAL\"));o===h?t.push(null):t.push(o)}return t}catch(t){throw t}}function Ne(e,r){try{const t=[Q(e,r.left),Q(e,r.right)],n=t[0],o=t[1];switch(r.operator){case\"|\":case\"<<\":case\">>\":case\">>>\":case\"^\":case\"&\":return R(y(n),y(o),r.operator);case\"==\":return c(n,o);case\"!=\":return!c(n,o);case\"<\":case\">\":case\"<=\":case\">=\":return T(n,o,r.operator);case\"+\":return d(n)||d(o)?v(n)+v(o):y(n)+y(o);case\"-\":return y(n)-y(o);case\"*\":return y(n)*y(o);case\"/\":return y(n)/y(o);case\"%\":return y(n)%y(o);default:throw new Error(D(r,\"RUNTIME\",\"OPERATORNOTRECOGNISED\"))}}catch(t){throw t}}function Ie(e,r){try{if(\"AssignmentExpression\"===r.left.type||\"UpdateExpression\"===r.left.type)throw new Error(D(r.left,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));if(\"AssignmentExpression\"===r.right.type||\"UpdateExpression\"===r.right.type)throw new Error(D(r.right,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));const t=Q(e,r.left);if(l(t))switch(r.operator){case\"||\":if(!0===t)return t;{const t=Q(e,r.right);if(l(t))return t;throw new Error(D(r,\"RUNTIME\",\"ONLYORORAND\"))}case\"&&\":if(!1===t)return t;{const t=Q(e,r.right);if(l(t))return t;throw new Error(D(r,\"RUNTIME\",\"ONLYORORAND\"))}default:throw new Error(D(r,\"RUNTIME\",\"ONLYORORAND\"))}throw new Error(D(r,\"RUNTIME\",\"ONLYBOOLEAN\"))}catch(t){throw t}}function ye(e,r){return r.value?r.value.cooked:\"\"}function ve(e,r){let t=\"\",n=0;for(const o of r.quasis)if(t+=o.value?o.value.cooked:\"\",!1===o.tail){t+=r.expressions[n]?v(Q(e,r.expressions[n])):\"\",n++}return t}function Te(e,r){let t;try{const n=r.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[n])return t=e.localScope[n],!0===t.valueset||(t.value=Q(e,t.node),t.valueset=!0),t.value;if(void 0!==e.globalScope[n])return t=e.globalScope[n],!0===t.valueset||(t.value=Q(e,t.node),t.valueset=!0),t.value;throw new Error(D(r,\"RUNTIME\",\"VARIABLENOTFOUND\"))}catch(n){throw n}}function Re(e,r){try{if(\"Identifier\"!==r.callee.type)throw new Error(D(r,\"RUNTIME\",\"ONLYNODESSUPPORTED\"));if(null!==e.localScope&&void 0!==e.localScope[r.callee.name.toLowerCase()]){const t=e.localScope[r.callee.name.toLowerCase()];if(t.value instanceof u)return t.value.fn(e,r);if(t.value instanceof o)return xe(e,r,t.value.definition);throw new Error(D(r,\"RUNTIME\",\"NOTAFUNCTION\"))}if(void 0!==e.globalScope[r.callee.name.toLowerCase()]){const t=e.globalScope[r.callee.name.toLowerCase()];if(t.value instanceof u)return t.value.fn(e,r);if(t.value instanceof o)return xe(e,r,t.value.definition);throw new Error(D(r,\"RUNTIME\",\"NOTAFUNCTION\"))}throw new Error(D(r,\"RUNTIME\",\"NOTFOUND\"))}catch(t){throw t}}const Oe={};function Se(o){return null==o?\"\":g(o)||N(o)?\"Array\":S(o)?\"Date\":d(o)?\"String\":l(o)?\"Boolean\":I(o)?\"Number\":o instanceof r?\"Attachment\":o instanceof e?\"Portal\":o instanceof t?\"Dictionary\":o instanceof n?\"Feature\":o instanceof Z?\"Point\":o instanceof H?\"Polygon\":o instanceof W?\"Polyline\":o instanceof q?\"Multipoint\":o instanceof G?\"Extent\":E(o)?\"Function\":b(o)?\"FeatureSet\":U(o)?\"FeatureSetCollection\":o===h?\"\":\"number\"==typeof o&&isNaN(o)?\"Number\":\"Unrecognised Type\"}function be(e,r,t,n){try{const o=Q(e,r.arguments[t]);if(c(o,n))return Q(e,r.arguments[t+1]);{const o=r.arguments.length-t;return 1===o?Q(e,r.arguments[t]):2===o?null:3===o?Q(e,r.arguments[t+2]):be(e,r,t+2,n)}}catch(o){throw o}}function Ue(e,r,t,n){try{if(!0===n)return Q(e,r.arguments[t+1]);if(3===r.arguments.length-t)return Q(e,r.arguments[t+2]);{const n=Q(e,r.arguments[t+2]);if(!1===l(n))throw new Error(\"WHEN needs boolean test conditions\");return Ue(e,r,t+2,n)}}catch(o){throw o}}function Ae(e,r){const t=e.length,n=Math.floor(t/2);return 0===t?[]:1===t?[e[0]]:Ce(Ae(e.slice(0,n),r),Ae(e.slice(n,t),r),r)}function Ce(e,r,t){const n=[];for(;e.length>0||r.length>0;)if(e.length>0&&r.length>0){let o=t(e[0],r[0]);isNaN(o)&&(o=0),o<=0?(n.push(e[0]),e=e.slice(1)):(n.push(r[0]),r=r.slice(1))}else e.length>0?(n.push(e[0]),e=e.slice(1)):r.length>0&&(n.push(r[0]),r=r.slice(1));return n}function Me(e,r,t){try{const n=e.body;if(t.length!==e.params.length)throw new Error(\"Invalid Parameter calls to function.\");for(let a=0;a<t.length;a++)r.localScope[e.params[a].name.toLowerCase()]={value:t[a],valueset:!0,node:null};const o=Q(r,n);if(o instanceof f)return o.value;if(o===w)throw new Error(\"Cannot Break from a Function\");if(o===m)throw new Error(\"Cannot Continue from a Function\");return o instanceof p?o.value:o}catch(n){throw n}}function xe(e,r,t){return J(e,r,(function(r,n,o){const a={spatialReference:e.spatialReference,globalScope:e.globalScope,depthCounter:e.depthCounter+1,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{}};if(a.depthCounter>64)throw new Error(\"Exceeded maximum function depth\");return Me(t,a,o)}))}function Fe(e){return function(){const r={spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,localScope:{},depthCounter:e.context.depthCounter+1,globalScope:e.context.globalScope};if(r.depthCounter>64)throw new Error(\"Exceeded maximum function depth\");return Me(e.definition,r,arguments)}}L(Oe,J),j(Oe,J),Y(Oe,J),V(Oe,J),_(Oe,J),B(Oe,J),k(Oe,J),Oe.typeof=function(e,r){return J(e,r,(function(e,r,t){s(t,1,1);const n=Se(t[0]);if(\"Unrecognised Type\"===n)throw new Error(\"Unrecognised Type\");return n}))},Oe.iif=function(e,r){try{s(null===r.arguments?[]:r.arguments,3,3);const t=Q(e,r.arguments[0]);if(!1===l(t))throw new Error(\"IF Function must have a boolean test condition\");const n=Q(e,r.arguments[1]),o=Q(e,r.arguments[2]);return!0===t?n:o}catch(t){throw t}},Oe.decode=function(e,r){try{if(r.arguments.length<2)throw new Error(\"Missing Parameters\");if(2===r.arguments.length)return Q(e,r.arguments[1]);{if((r.arguments.length-1)%2==0)throw new Error(\"Must have a default value result.\");const t=Q(e,r.arguments[0]);return be(e,r,1,t)}}catch(t){throw t}},Oe.when=function(e,r){try{if(r.arguments.length<3)throw new Error(\"Missing Parameters\");if(r.arguments.length%2==0)throw new Error(\"Must have a default value result.\");const t=Q(e,r.arguments[0]);if(!1===l(t))throw new Error(\"WHEN needs boolean test conditions\");return Ue(e,r,0,t)}catch(t){throw t}},Oe.top=function(e,r){return J(e,r,(function(e,r,t){if(s(t,2,2),g(t[0]))return y(t[1])>=t[0].length?t[0].slice(0):t[0].slice(0,y(t[1]));if(N(t[0]))return y(t[1])>=t[0].length()?t[0].slice(0):t[0].slice(0,y(t[1]));throw new Error(\"Top cannot accept this parameter type\")}))},Oe.first=function(e,r){return J(e,r,(function(e,r,t){return s(t,1,1),g(t[0])?0===t[0].length?null:t[0][0]:N(t[0])?0===t[0].length()?null:t[0].get(0):null}))},Oe.sort=function(e,r){return J(e,r,(function(e,r,t){s(t,1,2);let n=t[0];if(N(n)&&(n=n.toArray()),!1===g(n))throw new Error(\"Illegal Argument\");if(t.length>1){if(!1===E(t[1]))throw new Error(\"Illegal Argument\");let e=n;const r=Fe(t[1]);return e=Ae(e,(function(e,t){return r(e,t)})),e}{let e=n;if(0===e.length)return[];const r={};for(let n=0;n<e.length;n++){const t=Se(e[n]);\"\"!==t&&(r[t]=!0)}if(!0===r.Array||!0===r.Dictionary||!0===r.Feature||!0===r.Point||!0===r.Polygon||!0===r.Polyline||!0===r.Multipoint||!0===r.Extent||!0===r.Function)return e.slice(0);let t=0,o=\"\";for(const n in r)t++,o=n;return e=t>1||\"String\"===o?Ae(e,(function(e,r){if(null==e||e===h)return null==r||r===h?0:1;if(null==r||r===h)return-1;const t=v(e),n=v(r);return t<n?-1:t===n?0:1})):\"Number\"===o?Ae(e,(function(e,r){return e-r})):\"Boolean\"===o?Ae(e,(function(e,r){return e===r?0:r?-1:1})):\"Date\"===o?Ae(e,(function(e,r){return r-e})):e.slice(0),e}}))};for(const qe in Oe)Oe[qe]={value:new u(Oe[qe]),valueset:!0,node:null};const Pe=function(){};function De(e,r){const o=new Pe;e||(e={}),r||(r={});const a=new t({newline:\"\\n\",tab:\"\\t\",singlequote:\"'\",doublequote:'\"',forwardslash:\"/\",backwardslash:\"\\\\\"});a.immutable=!1,o.textformatting={value:a,valueset:!0,node:null};for(const t in r)o[t]={value:new u(r[t]),native:!0,valueset:!0,node:null};for(const t in e)e[t]&&\"esri.Graphic\"===e[t].declaredClass?o[t]={value:n.createFromGraphic(e[t]),valueset:!0,node:null}:o[t]={value:e[t],valueset:!0,node:null};return o}Pe.prototype=Oe,Pe.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},Pe.prototype.pi={value:Math.PI,valueset:!0,node:null};const Le={fixSpatialReference:O,parseArguments:X,standardFunction:J};function je(e){console.log(e)}function _e(e){const r={mode:\"sync\",compiled:!1,functions:{},signatures:[],standardFunction:J,evaluateIdentifier:Te,arcadeCustomFunctionHandler:Fe};for(let t=0;t<e.length;t++)e[t].registerFunctions(r);for(const t in r.functions)Oe[t]={value:new u(r.functions[t]),valueset:!0,node:null},Pe.prototype[t]=Oe[t];for(let t=0;t<r.signatures.length;t++)A(r.signatures[t],\"async\")}function ke(e,r){let t=r.spatialReference;null==t&&(t=new K({wkid:102100}));let n=Q({spatialReference:t,globalScope:De(r.vars,r.customfunctions),localScope:null,console:r.console?r.console:je,lrucache:r.lrucache,interceptor:r.interceptor,depthCounter:1},e.body[0].body);if(n instanceof f&&(n=n.value),n instanceof p&&(n=n.value),n===h&&(n=null),n===w)throw new Error(\"Cannot return BREAK\");if(n===m)throw new Error(\"Cannot return CONTINUE\");if(n instanceof o)throw new Error(\"Cannot return FUNCTION\");if(n instanceof u)throw new Error(\"Cannot return FUNCTION\");return n}function Ve(e,r){return C(e)}function Be(e,r){return M(e,r,\"simple\")}function Ye(e,r){return x(e,r)}function Ge(e,r){return F(e,r)}function ze(e){return P(e)}export{ke as executeScript,_e as extend,Ve as extractFieldLiterals,ze as findFunctionCalls,Le as functionHelper,Ge as referencesFunction,Ye as referencesMember,Be as validateScript};\n"]},"metadata":{},"sourceType":"module"}