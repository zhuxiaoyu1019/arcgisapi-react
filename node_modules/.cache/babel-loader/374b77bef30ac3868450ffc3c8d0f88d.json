{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { d as i } from \"../../../../chunks/mat4.js\";\nimport { c as t } from \"../../../../chunks/mat4f64.js\";\nimport { applyToViewMatrix as r } from \"./localOriginHelper.js\";\n\nclass e {\n  constructor(i) {\n    this.factory = i, this.originData = new Map();\n  }\n\n  acquire(i) {\n    return this.register(this.factory.getOrigin(i));\n  }\n\n  register(i) {\n    const r = this.originData.get(i.id);\n    return r ? (r.refCount++, r.origin) : (this.originData.set(i.id, {\n      refCount: 1,\n      viewMatrix: t(),\n      origin: i\n    }), i);\n  }\n\n  release(i) {\n    const t = this.originData.get(i.id);\n    t && (t.refCount--, 0 === t.refCount && this.originData.delete(i.id));\n  }\n\n  updateViewMatrices(t) {\n    this.originData.forEach(e => {\n      i(e.viewMatrix, t), r(e.origin.vec3, e.viewMatrix);\n    });\n  }\n\n  getViewMatrix(i) {\n    return this.originData.get(i.id).viewMatrix;\n  }\n\n}\n\nexport { e as LocalOriginManager };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginManager.js"],"names":["d","i","c","t","applyToViewMatrix","r","e","constructor","factory","originData","Map","acquire","register","getOrigin","get","id","refCount","origin","set","viewMatrix","release","delete","updateViewMatrices","forEach","vec3","getViewMatrix","LocalOriginManager"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,4BAAlB;AAA+C,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,wBAAlC;;AAA2D,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACN,CAAD,EAAG;AAAC,SAAKO,OAAL,GAAaP,CAAb,EAAe,KAAKQ,UAAL,GAAgB,IAAIC,GAAJ,EAA/B;AAAuC;;AAAAC,EAAAA,OAAO,CAACV,CAAD,EAAG;AAAC,WAAO,KAAKW,QAAL,CAAc,KAAKJ,OAAL,CAAaK,SAAb,CAAuBZ,CAAvB,CAAd,CAAP;AAAgD;;AAAAW,EAAAA,QAAQ,CAACX,CAAD,EAAG;AAAC,UAAMI,CAAC,GAAC,KAAKI,UAAL,CAAgBK,GAAhB,CAAoBb,CAAC,CAACc,EAAtB,CAAR;AAAkC,WAAOV,CAAC,IAAEA,CAAC,CAACW,QAAF,IAAaX,CAAC,CAACY,MAAjB,KAA0B,KAAKR,UAAL,CAAgBS,GAAhB,CAAoBjB,CAAC,CAACc,EAAtB,EAAyB;AAACC,MAAAA,QAAQ,EAAC,CAAV;AAAYG,MAAAA,UAAU,EAAChB,CAAC,EAAxB;AAA2Bc,MAAAA,MAAM,EAAChB;AAAlC,KAAzB,GAA+DA,CAAzF,CAAR;AAAoG;;AAAAmB,EAAAA,OAAO,CAACnB,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKM,UAAL,CAAgBK,GAAhB,CAAoBb,CAAC,CAACc,EAAtB,CAAR;AAAkCZ,IAAAA,CAAC,KAAGA,CAAC,CAACa,QAAF,IAAa,MAAIb,CAAC,CAACa,QAAN,IAAgB,KAAKP,UAAL,CAAgBY,MAAhB,CAAuBpB,CAAC,CAACc,EAAzB,CAAhC,CAAD;AAA+D;;AAAAO,EAAAA,kBAAkB,CAACnB,CAAD,EAAG;AAAC,SAAKM,UAAL,CAAgBc,OAAhB,CAAyBjB,CAAC,IAAE;AAACL,MAAAA,CAAC,CAACK,CAAC,CAACa,UAAH,EAAchB,CAAd,CAAD,EAAkBE,CAAC,CAACC,CAAC,CAACW,MAAF,CAASO,IAAV,EAAelB,CAAC,CAACa,UAAjB,CAAnB;AAAgD,KAA7E;AAAgF;;AAAAM,EAAAA,aAAa,CAACxB,CAAD,EAAG;AAAC,WAAO,KAAKQ,UAAL,CAAgBK,GAAhB,CAAoBb,CAAC,CAACc,EAAtB,EAA0BI,UAAjC;AAA4C;;AAAnhB;;AAAohB,SAAOb,CAAC,IAAIoB,kBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{d as i}from\"../../../../chunks/mat4.js\";import{c as t}from\"../../../../chunks/mat4f64.js\";import{applyToViewMatrix as r}from\"./localOriginHelper.js\";class e{constructor(i){this.factory=i,this.originData=new Map}acquire(i){return this.register(this.factory.getOrigin(i))}register(i){const r=this.originData.get(i.id);return r?(r.refCount++,r.origin):(this.originData.set(i.id,{refCount:1,viewMatrix:t(),origin:i}),i)}release(i){const t=this.originData.get(i.id);t&&(t.refCount--,0===t.refCount&&this.originData.delete(i.id))}updateViewMatrices(t){this.originData.forEach((e=>{i(e.viewMatrix,t),r(e.origin.vec3,e.viewMatrix)}))}getViewMatrix(i){return this.originData.get(i.id).viewMatrix}}export{e as LocalOriginManager};\n"]},"metadata":{},"sourceType":"module"}