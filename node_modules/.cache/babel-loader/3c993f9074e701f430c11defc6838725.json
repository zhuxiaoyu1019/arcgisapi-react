{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { create as e, resolve as r, reject as t } from \"../../../core/promiseUtils.js\";\nimport i from \"../../../geometry/Extent.js\";\nimport n from \"../../../layers/support/Field.js\";\nvar o, l;\n\nfunction s(e) {\n  return n.fromJSON(e.toJSON());\n}\n\nfunction y(e) {\n  return e.toJSON();\n}\n\nfunction u(e) {\n  return \"string\" == typeof e || e instanceof String;\n}\n\nfunction p(e) {\n  return \"boolean\" == typeof e;\n}\n\nfunction c(e) {\n  return \"number\" == typeof e;\n}\n\nfunction a(e) {\n  return e instanceof Array;\n}\n\nfunction m(e) {\n  return e instanceof Date;\n}\n\nfunction f(e, r) {\n  return e === r || !(!m(e) || !m(r)) && e.getTime() === r.getTime();\n}\n\nfunction d(e) {\n  const r = {};\n\n  for (const t in e) r[t] = e[t];\n\n  return r;\n}\n\nfunction g(e) {\n  if (void 0 === e) return null;\n  if (\"number\" == typeof e) return e;\n\n  switch (e.toLowerCase()) {\n    case \"meters\":\n    case \"meter\":\n      return 109404;\n\n    case \"miles\":\n    case \"mile\":\n      return 109413;\n\n    case \"kilometers\":\n    case \"kilometer\":\n    case \"km\":\n      return 109414;\n  }\n\n  return null;\n}\n\nfunction F(e) {\n  if (null === e) return null;\n\n  switch (e.type) {\n    case \"polygon\":\n    case \"multipoint\":\n    case \"polyline\":\n      return e.extent;\n\n    case \"point\":\n      return new i({\n        xmin: e.x,\n        ymin: e.y,\n        xmax: e.x,\n        ymax: e.y,\n        spatialReference: e.spatialReference\n      });\n\n    case \"extent\":\n      return e;\n  }\n\n  return null;\n}\n\nfunction G(e) {\n  if (void 0 === e) return null;\n  if (\"number\" == typeof e) return e;\n  if (\"number\" == typeof e) return e;\n\n  switch (e.toLowerCase()) {\n    case \"meters\":\n    case \"meter\":\n      return 9001;\n\n    case \"miles\":\n    case \"mile\":\n      return 9035;\n\n    case \"kilometers\":\n    case \"kilometer\":\n    case \"km\":\n      return 9036;\n  }\n\n  return null;\n}\n\nfunction T(e, r) {\n  return e === r || \"point\" === e && \"esriGeometryPoint\" === r || \"polyline\" === e && \"esriGeometryPolyline\" === r || \"polygon\" === e && \"esriGeometryPolygon\" === r || \"extent\" === e && \"esriGeometryEnvelope\" === r || \"multipoint\" === e && \"esriGeometryMultipoint\" === r || \"point\" === r && \"esriGeometryPoint\" === e || \"polyline\" === r && \"esriGeometryPolyline\" === e || \"polygon\" === r && \"esriGeometryPolygon\" === e || \"extent\" === r && \"esriGeometryEnvelope\" === e || \"multipoint\" === r && \"esriGeometryMultipoint\" === e;\n}\n\n!function (e) {\n  e[e.Standardised = 0] = \"Standardised\", e[e.StandardisedNoInterval = 1] = \"StandardisedNoInterval\", e[e.SqlServer = 2] = \"SqlServer\", e[e.Oracle = 3] = \"Oracle\", e[e.Postgres = 4] = \"Postgres\", e[e.PGDB = 5] = \"PGDB\", e[e.FILEGDB = 6] = \"FILEGDB\", e[e.NotEvaluated = 7] = \"NotEvaluated\";\n}(o || (o = {})), function (e) {\n  e[e.InFeatureSet = 0] = \"InFeatureSet\", e[e.NotInFeatureSet = 1] = \"NotInFeatureSet\", e[e.Unknown = 2] = \"Unknown\";\n}(l || (l = {}));\nconst S = 1e3;\n\nfunction v(e) {\n  return function (r) {\n    e.reject(r);\n  };\n}\n\nfunction P(e, r) {\n  return function () {\n    try {\n      e.apply(null, arguments);\n    } catch (t) {\n      r.reject(t);\n    }\n  };\n}\n\nconst I = {\n  point: \"point\",\n  polygon: \"polygon\",\n  polyline: \"polyline\",\n  multipoint: \"multipoint\",\n  extent: \"extent\",\n  esriGeometryPoint: \"point\",\n  esriGeometryPolygon: \"polygon\",\n  esriGeometryPolyline: \"polyline\",\n  esriGeometryMultipoint: \"multipoint\",\n  esriGeometryEnvelope: \"extent\",\n  envelope: \"extent\"\n},\n      b = {\n  point: \"esriGeometryPoint\",\n  polygon: \"esriGeometryPolygon\",\n  polyline: \"esriGeometryPolyline\",\n  multipoint: \"esriGeometryMultipoint\",\n  extent: \"esriGeometryEnvelope\",\n  esriGeometryPoint: \"esriGeometryPoint\",\n  esriGeometryPolygon: \"esriGeometryPolygon\",\n  esriGeometryPolyline: \"esriGeometryPolyline\",\n  esriGeometryMultipoint: \"esriGeometryMultipoint\",\n  esriGeometryEnvelope: \"esriGeometryEnvelope\",\n  envelope: \"esriGeometryEnvelope\"\n},\n      D = {\n  \"small-integer\": \"esriFieldTypeSmallInteger\",\n  integer: \"esriFieldTypeInteger\",\n  long: \"esriFieldTypeLong\",\n  single: \"esriFieldTypeSingle\",\n  double: \"esriFieldTypeDouble\",\n  string: \"esriFieldTypeString\",\n  date: \"esriFieldTypeDate\",\n  oid: \"esriFieldTypeOID\",\n  geometry: \"esriFieldTypeGeometry\",\n  blob: \"esriFieldTypeBlob\",\n  raster: \"esriFieldTypeRaster\",\n  guid: \"esriFieldTypeGUID\",\n  \"global-id\": \"esriFieldTypeGlobalID\",\n  xml: \"eesriFieldTypeXML\",\n  esriFieldTypeSmallInteger: \"esriFieldTypeSmallInteger\",\n  esriFieldTypeInteger: \"esriFieldTypeInteger\",\n  esriFieldTypeLong: \"esriFieldTypeLong\",\n  esriFieldTypeSingle: \"esriFieldTypeSingle\",\n  esriFieldTypeDouble: \"esriFieldTypeDouble\",\n  esriFieldTypeString: \"esriFieldTypeString\",\n  esriFieldTypeDate: \"esriFieldTypeDate\",\n  esriFieldTypeOID: \"esriFieldTypeOID\",\n  esriFieldTypeGeometry: \"esriFieldTypeGeometry\",\n  esriFieldTypeBlob: \"esriFieldTypeBlob\",\n  esriFieldTypeRaster: \"esriFieldTypeRaster\",\n  esriFieldTypeGUID: \"esriFieldTypeGUID\",\n  esriFieldTypeGlobalID: \"esriFieldTypeGlobalID\",\n  esriFieldTypeXML: \"eesriFieldTypeXML\"\n};\n\nfunction x(e) {\n  switch (e) {\n    case \"point\":\n      return \"esriGeometryPoint\";\n\n    case \"polygon\":\n      return \"esriGeometryPolygon\";\n\n    case \"multipoint\":\n      return \"esriGeometryMultipoint\";\n\n    case \"polyline\":\n      return \"esriGeometryPolyline\";\n\n    default:\n      return \"esriGeometryPoint\";\n  }\n}\n\nfunction O(i, n) {\n  return e((e, o) => {\n    const l = r(!0);\n    i.reduce((e, r, i, o) => e.then(e => {\n      try {\n        return n(e, r, i, o);\n      } catch (l) {\n        return t(l);\n      }\n    }, e => t(e)), l).then(e, o);\n  });\n}\n\nfunction N(e) {\n  return void 0 === e ? \"\" : e = (e = (e = e.replace(/\\/featureserver\\/[0-9]*/i, \"/FeatureServer\")).replace(/\\/mapserver\\/[0-9]*/i, \"/MapServer\")).split(\"?\")[0];\n}\n\nfunction E(e, r) {\n  r || (r = {}), \"function\" == typeof r && (r = {\n    cmp: r\n  });\n  const t = \"boolean\" == typeof r.cycles && r.cycles,\n        i = r.cmp && (n = r.cmp, function (e) {\n    return function (r, t) {\n      const i = {\n        key: r,\n        value: e[r]\n      },\n            o = {\n        key: t,\n        value: e[t]\n      };\n      return n(i, o);\n    };\n  });\n  var n;\n  const o = [];\n  return function e(r) {\n    if (r && r.toJSON && \"function\" == typeof r.toJSON && (r = r.toJSON()), void 0 === r) return;\n    if (\"number\" == typeof r) return isFinite(r) ? \"\" + r : \"null\";\n    if (\"object\" != typeof r) return JSON.stringify(r);\n    let n, l;\n\n    if (Array.isArray(r)) {\n      for (l = \"[\", n = 0; n < r.length; n++) n && (l += \",\"), l += e(r[n]) || \"null\";\n\n      return l + \"]\";\n    }\n\n    if (null === r) return \"null\";\n\n    if (-1 !== o.indexOf(r)) {\n      if (t) return JSON.stringify(\"__cycle__\");\n      throw new TypeError(\"Converting circular structure to JSON\");\n    }\n\n    const s = o.push(r) - 1,\n          y = Object.keys(r).sort(i && i(r));\n\n    for (l = \"\", n = 0; n < y.length; n++) {\n      const t = y[n],\n            i = e(r[t]);\n      i && (l && (l += \",\"), l += JSON.stringify(t) + \":\" + i);\n    }\n\n    return o.splice(s, 1), \"{\" + l + \"}\";\n  }(e);\n}\n\nexport { o as FeatureServiceDatabaseType, l as IdState, P as callback, d as cloneAttributes, s as cloneField, G as convertLinearUnitsToCode, g as convertSquareUnitsToCode, S as defaultMaxRecords, f as equalityTest, v as errback, y as esriFieldToJson, N as extractServiceUrl, a as isArray, p as isBoolean, m as isDate, c as isNumber, u as isString, D as layerFieldEsriConstants, I as layerGeometryEsriConstants, b as layerGeometryEsriRestConstants, O as reduceArrayWithPromises, T as sameGeomType, F as shapeExtent, E as stableStringify, x as toEsriGeometryType };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/arcade/featureset/support/shared.js"],"names":["create","e","resolve","r","reject","t","i","n","o","l","s","fromJSON","toJSON","y","u","String","p","c","a","Array","m","Date","f","getTime","d","g","toLowerCase","F","type","extent","xmin","x","ymin","xmax","ymax","spatialReference","G","T","Standardised","StandardisedNoInterval","SqlServer","Oracle","Postgres","PGDB","FILEGDB","NotEvaluated","InFeatureSet","NotInFeatureSet","Unknown","S","v","P","apply","arguments","I","point","polygon","polyline","multipoint","esriGeometryPoint","esriGeometryPolygon","esriGeometryPolyline","esriGeometryMultipoint","esriGeometryEnvelope","envelope","b","D","integer","long","single","double","string","date","oid","geometry","blob","raster","guid","xml","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeLong","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","O","reduce","then","N","replace","split","E","cmp","cycles","key","value","isFinite","JSON","stringify","isArray","length","indexOf","TypeError","push","Object","keys","sort","splice","FeatureServiceDatabaseType","IdState","callback","cloneAttributes","cloneField","convertLinearUnitsToCode","convertSquareUnitsToCode","defaultMaxRecords","equalityTest","errback","esriFieldToJson","extractServiceUrl","isBoolean","isDate","isNumber","isString","layerFieldEsriConstants","layerGeometryEsriConstants","layerGeometryEsriRestConstants","reduceArrayWithPromises","sameGeomType","shapeExtent","stableStringify","toEsriGeometryType"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{create as e,resolve as r,reject as t}from\"../../../core/promiseUtils.js\";import i from\"../../../geometry/Extent.js\";import n from\"../../../layers/support/Field.js\";var o,l;function s(e){return n.fromJSON(e.toJSON())}function y(e){return e.toJSON()}function u(e){return\"string\"==typeof e||e instanceof String}function p(e){return\"boolean\"==typeof e}function c(e){return\"number\"==typeof e}function a(e){return e instanceof Array}function m(e){return e instanceof Date}function f(e,r){return e===r||!(!m(e)||!m(r))&&e.getTime()===r.getTime()}function d(e){const r={};for(const t in e)r[t]=e[t];return r}function g(e){if(void 0===e)return null;if(\"number\"==typeof e)return e;switch(e.toLowerCase()){case\"meters\":case\"meter\":return 109404;case\"miles\":case\"mile\":return 109413;case\"kilometers\":case\"kilometer\":case\"km\":return 109414}return null}function F(e){if(null===e)return null;switch(e.type){case\"polygon\":case\"multipoint\":case\"polyline\":return e.extent;case\"point\":return new i({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case\"extent\":return e}return null}function G(e){if(void 0===e)return null;if(\"number\"==typeof e)return e;if(\"number\"==typeof e)return e;switch(e.toLowerCase()){case\"meters\":case\"meter\":return 9001;case\"miles\":case\"mile\":return 9035;case\"kilometers\":case\"kilometer\":case\"km\":return 9036}return null}function T(e,r){return e===r||(\"point\"===e&&\"esriGeometryPoint\"===r||(\"polyline\"===e&&\"esriGeometryPolyline\"===r||(\"polygon\"===e&&\"esriGeometryPolygon\"===r||(\"extent\"===e&&\"esriGeometryEnvelope\"===r||(\"multipoint\"===e&&\"esriGeometryMultipoint\"===r||(\"point\"===r&&\"esriGeometryPoint\"===e||(\"polyline\"===r&&\"esriGeometryPolyline\"===e||(\"polygon\"===r&&\"esriGeometryPolygon\"===e||(\"extent\"===r&&\"esriGeometryEnvelope\"===e||\"multipoint\"===r&&\"esriGeometryMultipoint\"===e)))))))))}!function(e){e[e.Standardised=0]=\"Standardised\",e[e.StandardisedNoInterval=1]=\"StandardisedNoInterval\",e[e.SqlServer=2]=\"SqlServer\",e[e.Oracle=3]=\"Oracle\",e[e.Postgres=4]=\"Postgres\",e[e.PGDB=5]=\"PGDB\",e[e.FILEGDB=6]=\"FILEGDB\",e[e.NotEvaluated=7]=\"NotEvaluated\"}(o||(o={})),function(e){e[e.InFeatureSet=0]=\"InFeatureSet\",e[e.NotInFeatureSet=1]=\"NotInFeatureSet\",e[e.Unknown=2]=\"Unknown\"}(l||(l={}));const S=1e3;function v(e){return function(r){e.reject(r)}}function P(e,r){return function(){try{e.apply(null,arguments)}catch(t){r.reject(t)}}}const I={point:\"point\",polygon:\"polygon\",polyline:\"polyline\",multipoint:\"multipoint\",extent:\"extent\",esriGeometryPoint:\"point\",esriGeometryPolygon:\"polygon\",esriGeometryPolyline:\"polyline\",esriGeometryMultipoint:\"multipoint\",esriGeometryEnvelope:\"extent\",envelope:\"extent\"},b={point:\"esriGeometryPoint\",polygon:\"esriGeometryPolygon\",polyline:\"esriGeometryPolyline\",multipoint:\"esriGeometryMultipoint\",extent:\"esriGeometryEnvelope\",esriGeometryPoint:\"esriGeometryPoint\",esriGeometryPolygon:\"esriGeometryPolygon\",esriGeometryPolyline:\"esriGeometryPolyline\",esriGeometryMultipoint:\"esriGeometryMultipoint\",esriGeometryEnvelope:\"esriGeometryEnvelope\",envelope:\"esriGeometryEnvelope\"},D={\"small-integer\":\"esriFieldTypeSmallInteger\",integer:\"esriFieldTypeInteger\",long:\"esriFieldTypeLong\",single:\"esriFieldTypeSingle\",double:\"esriFieldTypeDouble\",string:\"esriFieldTypeString\",date:\"esriFieldTypeDate\",oid:\"esriFieldTypeOID\",geometry:\"esriFieldTypeGeometry\",blob:\"esriFieldTypeBlob\",raster:\"esriFieldTypeRaster\",guid:\"esriFieldTypeGUID\",\"global-id\":\"esriFieldTypeGlobalID\",xml:\"eesriFieldTypeXML\",esriFieldTypeSmallInteger:\"esriFieldTypeSmallInteger\",esriFieldTypeInteger:\"esriFieldTypeInteger\",esriFieldTypeLong:\"esriFieldTypeLong\",esriFieldTypeSingle:\"esriFieldTypeSingle\",esriFieldTypeDouble:\"esriFieldTypeDouble\",esriFieldTypeString:\"esriFieldTypeString\",esriFieldTypeDate:\"esriFieldTypeDate\",esriFieldTypeOID:\"esriFieldTypeOID\",esriFieldTypeGeometry:\"esriFieldTypeGeometry\",esriFieldTypeBlob:\"esriFieldTypeBlob\",esriFieldTypeRaster:\"esriFieldTypeRaster\",esriFieldTypeGUID:\"esriFieldTypeGUID\",esriFieldTypeGlobalID:\"esriFieldTypeGlobalID\",esriFieldTypeXML:\"eesriFieldTypeXML\"};function x(e){switch(e){case\"point\":return\"esriGeometryPoint\";case\"polygon\":return\"esriGeometryPolygon\";case\"multipoint\":return\"esriGeometryMultipoint\";case\"polyline\":return\"esriGeometryPolyline\";default:return\"esriGeometryPoint\"}}function O(i,n){return e(((e,o)=>{const l=r(!0);i.reduce(((e,r,i,o)=>e.then((e=>{try{return n(e,r,i,o)}catch(l){return t(l)}}),(e=>t(e)))),l).then(e,o)}))}function N(e){return void 0===e?\"\":e=(e=(e=e.replace(/\\/featureserver\\/[0-9]*/i,\"/FeatureServer\")).replace(/\\/mapserver\\/[0-9]*/i,\"/MapServer\")).split(\"?\")[0]}function E(e,r){r||(r={}),\"function\"==typeof r&&(r={cmp:r});const t=\"boolean\"==typeof r.cycles&&r.cycles,i=r.cmp&&(n=r.cmp,function(e){return function(r,t){const i={key:r,value:e[r]},o={key:t,value:e[t]};return n(i,o)}});var n;const o=[];return function e(r){if(r&&r.toJSON&&\"function\"==typeof r.toJSON&&(r=r.toJSON()),void 0===r)return;if(\"number\"==typeof r)return isFinite(r)?\"\"+r:\"null\";if(\"object\"!=typeof r)return JSON.stringify(r);let n,l;if(Array.isArray(r)){for(l=\"[\",n=0;n<r.length;n++)n&&(l+=\",\"),l+=e(r[n])||\"null\";return l+\"]\"}if(null===r)return\"null\";if(-1!==o.indexOf(r)){if(t)return JSON.stringify(\"__cycle__\");throw new TypeError(\"Converting circular structure to JSON\")}const s=o.push(r)-1,y=Object.keys(r).sort(i&&i(r));for(l=\"\",n=0;n<y.length;n++){const t=y[n],i=e(r[t]);i&&(l&&(l+=\",\"),l+=JSON.stringify(t)+\":\"+i)}return o.splice(s,1),\"{\"+l+\"}\"}(e)}export{o as FeatureServiceDatabaseType,l as IdState,P as callback,d as cloneAttributes,s as cloneField,G as convertLinearUnitsToCode,g as convertSquareUnitsToCode,S as defaultMaxRecords,f as equalityTest,v as errback,y as esriFieldToJson,N as extractServiceUrl,a as isArray,p as isBoolean,m as isDate,c as isNumber,u as isString,D as layerFieldEsriConstants,I as layerGeometryEsriConstants,b as layerGeometryEsriRestConstants,O as reduceArrayWithPromises,T as sameGeomType,F as shapeExtent,E as stableStringify,x as toEsriGeometryType};\n"]},"metadata":{},"sourceType":"module"}