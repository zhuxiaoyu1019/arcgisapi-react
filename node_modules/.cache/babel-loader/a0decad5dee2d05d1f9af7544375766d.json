{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../request.js\";\nimport t from \"../core/Error.js\";\nimport n from \"../core/global.js\";\nimport { isSome as r } from \"../core/maybe.js\";\nimport { normalizeMessageBundleLocale as o } from \"./messages.js\";\n\nasync function s(e, n, r, s) {\n  const a = n.exec(r);\n  if (!a) throw new t(\"esri-intl:invalid-bundle\", `Bundle id \"${r}\" is not compatible with the pattern \"${n}\"`);\n  const c = a[1] ? `${a[1]}/` : \"\",\n        l = a[2],\n        h = o(s),\n        u = `${c}${l}.json`,\n        w = h ? `${c}${l}_${h}.json` : u;\n  let f;\n\n  try {\n    f = await i(e(w));\n  } catch (d) {\n    if (w === u) throw new t(\"intl:unknown-bundle\", `Bundle \"${r}\" cannot be loaded`, {\n      error: d\n    });\n\n    try {\n      f = await i(e(u));\n    } catch (d) {\n      throw new t(\"intl:unknown-bundle\", `Bundle \"${r}\" cannot be loaded`, {\n        error: d\n      });\n    }\n  }\n\n  return f;\n}\n\nasync function i(t) {\n  if (r(l.fetchBundleAsset)) return l.fetchBundleAsset(t);\n  const n = await e(t, {\n    responseType: \"text\"\n  });\n  return JSON.parse(n.data);\n}\n\nclass a {\n  constructor({\n    base: e = \"\",\n    pattern: t,\n    location: r = new URL(window.location.href)\n  }) {\n    let o;\n    o = \"string\" == typeof r ? e => new URL(e, new URL(r, n.location)).href : r instanceof URL ? e => new URL(e, r).href : r, this.pattern = \"string\" == typeof t ? new RegExp(`^${t}`) : t, this.getAssetUrl = o, e = e ? e.endsWith(\"/\") ? e : e + \"/\" : \"\", this.matcher = new RegExp(`^${e}(?:(.*)/)?(.*)$`);\n  }\n\n  fetchMessageBundle(e, t) {\n    return s(this.getAssetUrl, this.matcher, e, t);\n  }\n\n}\n\nfunction c(e) {\n  return new a(e);\n}\n\nconst l = {};\nexport { a as JSONLoader, c as createJSONLoader, l as test };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/intl/t9n.js"],"names":["e","t","n","isSome","r","normalizeMessageBundleLocale","o","s","a","exec","c","l","h","u","w","f","i","d","error","fetchBundleAsset","responseType","JSON","parse","data","constructor","base","pattern","location","URL","window","href","RegExp","getAssetUrl","endsWith","matcher","fetchMessageBundle","JSONLoader","createJSONLoader","test"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import t from\"../core/Error.js\";import n from\"../core/global.js\";import{isSome as r}from\"../core/maybe.js\";import{normalizeMessageBundleLocale as o}from\"./messages.js\";async function s(e,n,r,s){const a=n.exec(r);if(!a)throw new t(\"esri-intl:invalid-bundle\",`Bundle id \"${r}\" is not compatible with the pattern \"${n}\"`);const c=a[1]?`${a[1]}/`:\"\",l=a[2],h=o(s),u=`${c}${l}.json`,w=h?`${c}${l}_${h}.json`:u;let f;try{f=await i(e(w))}catch(d){if(w===u)throw new t(\"intl:unknown-bundle\",`Bundle \"${r}\" cannot be loaded`,{error:d});try{f=await i(e(u))}catch(d){throw new t(\"intl:unknown-bundle\",`Bundle \"${r}\" cannot be loaded`,{error:d})}}return f}async function i(t){if(r(l.fetchBundleAsset))return l.fetchBundleAsset(t);const n=await e(t,{responseType:\"text\"});return JSON.parse(n.data)}class a{constructor({base:e=\"\",pattern:t,location:r=new URL(window.location.href)}){let o;o=\"string\"==typeof r?e=>new URL(e,new URL(r,n.location)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern=\"string\"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=o,e=e?e.endsWith(\"/\")?e:e+\"/\":\"\",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,t){return s(this.getAssetUrl,this.matcher,e,t)}}function c(e){return new a(e)}const l={};export{a as JSONLoader,c as createJSONLoader,l as test};\n"]},"metadata":{},"sourceType":"module"}