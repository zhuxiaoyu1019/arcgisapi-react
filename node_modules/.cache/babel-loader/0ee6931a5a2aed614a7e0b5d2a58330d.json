{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport r from \"../core/Collection.js\";\nimport { referenceSetter as t } from \"../core/collectionUtils.js\";\nimport s from \"../core/Logger.js\";\nimport { isPromiseLike as o } from \"../core/promiseUtils.js\";\nimport { property as i } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../core/accessorSupport/decorators/subclass.js\";\nimport n from \"../layers/Layer.js\";\n\nfunction l(e) {\n  return e && \"group\" === e.type;\n}\n\nfunction d(e, r, t) {\n  let s, o;\n  if (e) for (let i = 0, a = e.length; i < a; i++) {\n    if (s = e.getItemAt(i), s[r] === t) return s;\n    if (l(s) && (o = d(s.layers, r, t), o)) return o;\n  }\n}\n\nconst y = s.getLogger(\"esri.support.LayersMixin\"),\n      p = s => {\n  let l = class extends s {\n    constructor(...e) {\n      super(...e), this.layers = new r();\n\n      const t = e => {\n        e.parent && \"remove\" in e.parent && e.parent.remove(e);\n      },\n            s = e => {\n        e.parent = this, this.layerAdded(e), \"elevation\" !== e.type && \"base-elevation\" !== e.type || y.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`);\n      },\n            o = e => {\n        e.parent = null, this.layerRemoved(e);\n      };\n\n      this.layers.on(\"before-add\", e => t(e.item)), this.layers.on(\"after-add\", e => s(e.item)), this.layers.on(\"after-remove\", e => o(e.item));\n    }\n\n    destroy() {\n      const e = this.layers.removeAll();\n\n      for (const r of e) this.layerRemoved(r), r.destroy();\n\n      this.layers.destroy();\n    }\n\n    set layers(e) {\n      this._set(\"layers\", t(e, this._get(\"layers\")));\n    }\n\n    add(e, r) {\n      const t = this.layers;\n\n      if (r = t.getNextIndex(r), e instanceof n) {\n        const s = e;\n        s.parent === this ? this.reorder(s, r) : t.add(s, r);\n      } else o(e) ? e.then(e => {\n        this.destroyed || this.add(e, r);\n      }) : y.error(\"#add()\", \"The item being added is not a Layer or a Promise that resolves to a Layer.\");\n    }\n\n    addMany(e, r) {\n      const t = this.layers;\n      r = t.getNextIndex(r), e.slice().forEach(e => {\n        e.parent !== this ? (t.add(e, r), r += 1) : this.reorder(e, r);\n      });\n    }\n\n    findLayerById(e) {\n      return d(this.layers, \"id\", e);\n    }\n\n    findLayerByUid(e) {\n      return d(this.layers, \"uid\", e);\n    }\n\n    remove(e) {\n      return this.layers.remove(e);\n    }\n\n    removeMany(e) {\n      return this.layers.removeMany(e);\n    }\n\n    removeAll() {\n      return this.layers.removeAll();\n    }\n\n    reorder(e, r) {\n      return this.layers.reorder(e, r);\n    }\n\n    layerAdded(e) {}\n\n    layerRemoved(e) {}\n\n  };\n  return e([i()], l.prototype, \"layers\", null), l = e([a(\"esri.support.LayersMixin\")], l), l;\n};\n\nexport { p as LayersMixin };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/support/LayersMixin.js"],"names":["_","e","r","referenceSetter","t","s","isPromiseLike","o","property","i","subclass","a","n","l","type","d","length","getItemAt","layers","y","getLogger","p","constructor","parent","remove","layerAdded","error","title","id","layerRemoved","on","item","destroy","removeAll","_set","_get","add","getNextIndex","reorder","then","destroyed","addMany","slice","forEach","findLayerById","findLayerByUid","removeMany","prototype","LayersMixin"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import{referenceSetter as t}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{isPromiseLike as o}from\"../core/promiseUtils.js\";import{property as i}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"../layers/Layer.js\";function l(e){return e&&\"group\"===e.type}function d(e,r,t){let s,o;if(e)for(let i=0,a=e.length;i<a;i++){if(s=e.getItemAt(i),s[r]===t)return s;if(l(s)&&(o=d(s.layers,r,t),o))return o}}const y=s.getLogger(\"esri.support.LayersMixin\"),p=s=>{let l=class extends s{constructor(...e){super(...e),this.layers=new r;const t=e=>{e.parent&&\"remove\"in e.parent&&e.parent.remove(e)},s=e=>{e.parent=this,this.layerAdded(e),\"elevation\"!==e.type&&\"base-elevation\"!==e.type||y.error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},o=e=>{e.parent=null,this.layerRemoved(e)};this.layers.on(\"before-add\",(e=>t(e.item))),this.layers.on(\"after-add\",(e=>s(e.item))),this.layers.on(\"after-remove\",(e=>o(e.item)))}destroy(){const e=this.layers.removeAll();for(const r of e)this.layerRemoved(r),r.destroy();this.layers.destroy()}set layers(e){this._set(\"layers\",t(e,this._get(\"layers\")))}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof n){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r)}else o(e)?e.then((e=>{this.destroyed||this.add(e,r)})):y.error(\"#add()\",\"The item being added is not a Layer or a Promise that resolves to a Layer.\")}addMany(e,r){const t=this.layers;r=t.getNextIndex(r),e.slice().forEach((e=>{e.parent!==this?(t.add(e,r),r+=1):this.reorder(e,r)}))}findLayerById(e){return d(this.layers,\"id\",e)}findLayerByUid(e){return d(this.layers,\"uid\",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([i()],l.prototype,\"layers\",null),l=e([a(\"esri.support.LayersMixin\")],l),l};export{p as LayersMixin};\n"]},"metadata":{},"sourceType":"module"}