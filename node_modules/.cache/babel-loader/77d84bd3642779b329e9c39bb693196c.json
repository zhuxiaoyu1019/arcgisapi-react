{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { p as n, q as t, a as r, g as e, b as u, C as i } from \"../../chunks/languageUtils.js\";\nimport { calculateStat as a } from \"./fieldStats.js\";\nimport { resolve as o, all as c, reject as s } from \"../../core/promiseUtils.js\";\nimport { WhereClause as f } from \"../../core/sql/WhereClause.js\";\n\nfunction l(n, e, c, s, l, m) {\n  if (1 === s.length) {\n    if (r(s[0])) return o(a(n, s[0], i(s[1], -1)));\n    if (u(s[0])) return o(a(n, s[0].toArray(), i(s[1], -1)));\n  } else if (2 === s.length) {\n    if (r(s[0])) return o(a(n, s[0], i(s[1], -1)));\n    if (u(s[0])) return o(a(n, s[0].toArray(), i(s[1], -1)));\n    if (t(s[0])) return s[0].load().then(t => d(f.create(s[1], t.getFieldsIndex()), m, l).then(t => s[0].calculateStatistic(n, t, i(s[2], 1e3), e.abortSignal)));\n  } else if (3 === s.length && t(s[0])) return s[0].load().then(t => d(f.create(s[1], t.getFieldsIndex()), m, l).then(t => s[0].calculateStatistic(n, t, i(s[2], 1e3), e.abortSignal)));\n\n  return o(a(n, s, -1));\n}\n\nfunction d(n, t, r) {\n  try {\n    const e = n.getVariables();\n\n    if (e.length > 0) {\n      const u = [];\n\n      for (let n = 0; n < e.length; n++) {\n        const i = {\n          name: e[n]\n        };\n        u.push(t.evaluateIdentifier(r, i));\n      }\n\n      return c(u).then(t => {\n        const r = {};\n\n        for (let n = 0; n < e.length; n++) r[e[n]] = t[n];\n\n        return n.parameters = r, n;\n      });\n    }\n\n    return o(n);\n  } catch (e) {\n    return s(e);\n  }\n}\n\nfunction m(i) {\n  \"async\" === i.mode && (i.functions.stdev = function (n, t) {\n    return i.standardFunctionAsync(n, t, function (t, r, e) {\n      return l(\"stdev\", t, r, e, n, i);\n    });\n  }, i.functions.variance = function (n, t) {\n    return i.standardFunctionAsync(n, t, function (t, r, e) {\n      return l(\"variance\", t, r, e, n, i);\n    });\n  }, i.functions.average = function (n, t) {\n    return i.standardFunctionAsync(n, t, function (t, r, e) {\n      return l(\"mean\", t, r, e, n, i);\n    });\n  }, i.functions.mean = function (n, t) {\n    return i.standardFunctionAsync(n, t, function (t, r, e) {\n      return l(\"mean\", t, r, e, n, i);\n    });\n  }, i.functions.sum = function (n, t) {\n    return i.standardFunctionAsync(n, t, function (t, r, e) {\n      return l(\"sum\", t, r, e, n, i);\n    });\n  }, i.functions.min = function (n, t) {\n    return i.standardFunctionAsync(n, t, function (t, r, e) {\n      return l(\"min\", t, r, e, n, i);\n    });\n  }, i.functions.max = function (n, t) {\n    return i.standardFunctionAsync(n, t, function (t, r, e) {\n      return l(\"max\", t, r, e, n, i);\n    });\n  }, i.functions.count = function (a, o) {\n    return i.standardFunctionAsync(a, o, function (i, a, o) {\n      if (n(o, 1, 1), t(o[0])) return o[0].count(i.abortSignal);\n      if (r(o[0]) || e(o[0])) return o[0].length;\n      if (u(o[0])) return o[0].length();\n      throw new Error(\"Invalid Parameters for Count\");\n    });\n  });\n}\n\nexport { m as registerFunctions };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/arcade/functions/featuresetstats.js"],"names":["p","n","q","t","a","r","g","e","b","u","C","i","calculateStat","resolve","o","all","c","reject","s","WhereClause","f","l","m","length","toArray","load","then","d","create","getFieldsIndex","calculateStatistic","abortSignal","getVariables","name","push","evaluateIdentifier","parameters","mode","functions","stdev","standardFunctionAsync","variance","average","mean","sum","min","max","count","Error","registerFunctions"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{p as n,q as t,a as r,g as e,b as u,C as i}from\"../../chunks/languageUtils.js\";import{calculateStat as a}from\"./fieldStats.js\";import{resolve as o,all as c,reject as s}from\"../../core/promiseUtils.js\";import{WhereClause as f}from\"../../core/sql/WhereClause.js\";function l(n,e,c,s,l,m){if(1===s.length){if(r(s[0]))return o(a(n,s[0],i(s[1],-1)));if(u(s[0]))return o(a(n,s[0].toArray(),i(s[1],-1)))}else if(2===s.length){if(r(s[0]))return o(a(n,s[0],i(s[1],-1)));if(u(s[0]))return o(a(n,s[0].toArray(),i(s[1],-1)));if(t(s[0]))return s[0].load().then((t=>d(f.create(s[1],t.getFieldsIndex()),m,l).then((t=>s[0].calculateStatistic(n,t,i(s[2],1e3),e.abortSignal)))))}else if(3===s.length&&t(s[0]))return s[0].load().then((t=>d(f.create(s[1],t.getFieldsIndex()),m,l).then((t=>s[0].calculateStatistic(n,t,i(s[2],1e3),e.abortSignal)))));return o(a(n,s,-1))}function d(n,t,r){try{const e=n.getVariables();if(e.length>0){const u=[];for(let n=0;n<e.length;n++){const i={name:e[n]};u.push(t.evaluateIdentifier(r,i))}return c(u).then((t=>{const r={};for(let n=0;n<e.length;n++)r[e[n]]=t[n];return n.parameters=r,n}))}return o(n)}catch(e){return s(e)}}function m(i){\"async\"===i.mode&&(i.functions.stdev=function(n,t){return i.standardFunctionAsync(n,t,(function(t,r,e){return l(\"stdev\",t,r,e,n,i)}))},i.functions.variance=function(n,t){return i.standardFunctionAsync(n,t,(function(t,r,e){return l(\"variance\",t,r,e,n,i)}))},i.functions.average=function(n,t){return i.standardFunctionAsync(n,t,(function(t,r,e){return l(\"mean\",t,r,e,n,i)}))},i.functions.mean=function(n,t){return i.standardFunctionAsync(n,t,(function(t,r,e){return l(\"mean\",t,r,e,n,i)}))},i.functions.sum=function(n,t){return i.standardFunctionAsync(n,t,(function(t,r,e){return l(\"sum\",t,r,e,n,i)}))},i.functions.min=function(n,t){return i.standardFunctionAsync(n,t,(function(t,r,e){return l(\"min\",t,r,e,n,i)}))},i.functions.max=function(n,t){return i.standardFunctionAsync(n,t,(function(t,r,e){return l(\"max\",t,r,e,n,i)}))},i.functions.count=function(a,o){return i.standardFunctionAsync(a,o,(function(i,a,o){if(n(o,1,1),t(o[0]))return o[0].count(i.abortSignal);if(r(o[0])||e(o[0]))return o[0].length;if(u(o[0]))return o[0].length();throw new Error(\"Invalid Parameters for Count\")}))})}export{m as registerFunctions};\n"]},"metadata":{},"sourceType":"module"}