{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { clamp as t, acosClamped as s, lerp as e } from \"../../../../core/mathUtils.js\";\nimport { isSome as a, disposeMaybe as i } from \"../../../../core/maybe.js\";\nimport { c as r } from \"../../../../chunks/mat3f64.js\";\nimport { t as h, m as o, o as c, a as n, l as u } from \"../../../../chunks/mat4.js\";\nimport { c as d } from \"../../../../chunks/mat4f64.js\";\nimport { s as m, i as p, b as l, m as f, j as x, a as b, h as S, n as g, f as T, c as w } from \"../../../../chunks/vec2.js\";\nimport { a as M } from \"../../../../chunks/vec2f64.js\";\nimport { g as _, o as C, m as j, s as v } from \"../../../../chunks/vec3.js\";\nimport { c as z } from \"../../../../chunks/vec3f64.js\";\nimport { s as D, t as U } from \"../../../../chunks/vec4.js\";\nimport { c as y } from \"../../../../chunks/vec4f64.js\";\nimport F from \"./Camera.js\";\nimport { assert as N, logWithBase as O, verify as k, rayRay2D as A } from \"./Util.js\";\nimport P from \"../../../webgl/FramebufferObject.js\";\nimport R from \"../../../webgl/Texture.js\";\nimport { getGpuMemoryUsage as E } from \"../../../webgl/Util.js\";\n\nclass L {\n  constructor() {\n    this.camera = new F(), this.lightMat = d();\n  }\n\n}\n\nclass H {\n  constructor(t, s, e = 0) {\n    this.rctx = t, this.viewingMode = s, this._enabled = !1, this._snapshots = new Array(), this.textureSize = 0, this.maxTextureSize = 0, this.numCascades = 1, this.maxNumCascades = 4, this.splitSchemeLambda = 0, this.warp = !0, this.cascadeDistances = [0, 0, 0, 0, 0], this.cascades = [], this.maxTextureSize = this.rctx.parameters.maxTextureSize;\n\n    for (let a = 0; a < 4; ++a) this.cascades.push(new L());\n\n    this.snapshotCount = e;\n  }\n\n  dispose() {\n    this.discardDepthTexture(), this.discardAllSnapshots();\n  }\n\n  set maxCascades(s) {\n    this.maxNumCascades = t(Math.floor(s), 1, 4);\n  }\n\n  get maxCascades() {\n    return this.maxNumCascades;\n  }\n\n  set enabled(t) {\n    this._enabled = t, t || (this.discardDepthTexture(), this.discardAllSnapshots());\n  }\n\n  get enabled() {\n    return this._enabled;\n  }\n\n  get snapshotCount() {\n    return this._snapshots.length;\n  }\n\n  set snapshotCount(t) {\n    const s = this._snapshots.length;\n\n    if (t > s) {\n      const e = t - s;\n      this._snapshots.length = t;\n\n      for (let t = 0; t < e; ++t) this._snapshots[s + t] = null;\n    } else if (t < this.snapshotCount) {\n      const e = s - t;\n\n      for (let s = 0; s < e; ++s) this.discardSnapshot(t + s);\n\n      this._snapshots.length = t;\n    }\n  }\n\n  getSnapshot(t) {\n    return this.enabled ? this._snapshots[t] : null;\n  }\n\n  getCascades() {\n    for (let t = 0; t < this.numCascades; ++t) st[t] = this.cascades[t];\n\n    return st.length = this.numCascades, st;\n  }\n\n  start(t, s, e) {\n    N(this.enabled), this.textureSize = this.computeTextureSize(t.fullWidth, t.fullHeight), this.ensureDepthTexture();\n    const {\n      near: a,\n      far: i\n    } = this.clampNearFar(e);\n    this.computeCascadeDistances(i, a), this.setupMatrices(t, s);\n    const r = t.viewMatrix,\n          h = t.projectionMatrix;\n\n    for (let o = 0; o < this.numCascades; ++o) this.constructCascade(o, h, r, s);\n\n    this.lastOrigin = null, this.clear();\n  }\n\n  finish(t) {\n    N(this.enabled), this.rctx.bindFramebuffer(t);\n  }\n\n  bind(t) {\n    this.enabled ? (this._depthTextureUnit = t.bindTexture(this._depthTexture, \"uShadowMapTex\"), t.setUniform1f(\"uDepthHalfPixelSz\", .5 / this.textureSize), t.setUniform1i(\"uShadowMapNum\", this.numCascades), t.setUniform4f(\"uShadowMapDistance\", this.cascadeDistances[0], this.numCascades > 1 ? this.cascadeDistances[1] : 1 / 0, this.numCascades > 2 ? this.cascadeDistances[2] : 1 / 0, this.numCascades > 3 ? this.cascadeDistances[3] : 1 / 0)) : t.setUniform1f(\"uDepthHalfPixelSz\", -1);\n  }\n\n  bindView(t, s) {\n    if (!this.enabled) return;\n    const e = this.lastOrigin;\n\n    if (!(e && e[0] === s[0] && e[1] === s[1] && e[2] === s[2])) {\n      this.lastOrigin = this.lastOrigin || z(), _(this.lastOrigin, s);\n\n      for (let t = 0; t < this.numCascades; ++t) {\n        h(et, this.cascades[t].lightMat, s);\n\n        for (let s = 0; s < 16; ++s) at[16 * t + s] = et[s];\n      }\n    }\n\n    t.setUniformMatrix4fv(\"uShadowMapMatrix\", at);\n  }\n\n  takeCascadeSnapshotTo(t, s) {\n    N(this.enabled), this.ensureSnapshot(s), this._bindFbo();\n    const e = this.rctx,\n          a = e.bindTexture(this._snapshots[s], R.TEXTURE_UNIT_FOR_UPDATES);\n    e.gl.copyTexSubImage2D(3553, 0, t.camera.viewport[0], t.camera.viewport[1], t.camera.viewport[0], t.camera.viewport[1], t.camera.viewport[2], t.camera.viewport[3]), e.bindTexture(a, R.TEXTURE_UNIT_FOR_UPDATES);\n  }\n\n  clear() {\n    const t = this.rctx;\n    this._bindFbo(), t.setClearColor(1, 1, 1, 1), t.clearSafe(16640);\n  }\n\n  computeTextureSize(t, s) {\n    const e = .5 * Math.log(t * t + s * s) * Math.LOG2E,\n          a = .35,\n          i = 2 ** Math.round(e + a);\n    return Math.min(this.maxTextureSize, 2 * i);\n  }\n\n  ensureDepthTexture() {\n    if (null != this._depthTexture && this._depthTexture.descriptor.width === this.textureSize) return;\n    this.discardDepthTexture();\n    const t = {\n      target: 3553,\n      pixelFormat: 6408,\n      dataType: 5121,\n      wrapMode: 33071,\n      samplingMode: 9728,\n      flipped: !0,\n      width: this.textureSize,\n      height: this.textureSize\n    };\n    this._depthTexture = new R(this.rctx, t), this.fbo = new P(this.rctx, {\n      colorTarget: 0,\n      depthStencilTarget: 1,\n      width: this.textureSize,\n      height: this.textureSize\n    }, this._depthTexture);\n  }\n\n  ensureSnapshot(t) {\n    const s = this._snapshots[t];\n    if (a(s) && s.descriptor.width === this.textureSize) return;\n    this.discardSnapshot(t);\n    const e = {\n      target: 3553,\n      pixelFormat: 6408,\n      dataType: 5121,\n      wrapMode: 33071,\n      samplingMode: 9728,\n      flipped: !0,\n      width: this.textureSize,\n      height: this.textureSize\n    };\n    this._snapshots[t] = new R(this.rctx, e);\n  }\n\n  discardDepthTexture() {\n    this.fbo = i(this.fbo), this._depthTexture = i(this._depthTexture);\n  }\n\n  discardSnapshot(t) {\n    this._snapshots[t] = i(this._snapshots[t]);\n  }\n\n  discardAllSnapshots() {\n    for (let t = 0; t < this.snapshotCount; ++t) this.discardSnapshot(t);\n  }\n\n  _bindFbo() {\n    const t = this.rctx;\n    a(this._depthTextureUnit) && (t.bindTexture(null, this._depthTextureUnit), this._depthTextureUnit = null), t.bindFramebuffer(this.fbo);\n  }\n\n  constructCascade(t, s, e, a) {\n    const i = this.cascades[t],\n          r = -this.cascadeDistances[t],\n          c = -this.cascadeDistances[t + 1],\n          n = (s[10] * r + s[14]) / Math.abs(s[11] * r + s[15]),\n          u = (s[10] * c + s[14]) / Math.abs(s[11] * c + s[15]);\n    N(n < u);\n\n    for (let h = 0; h < 8; ++h) {\n      D(q, h % 4 == 0 || h % 4 == 3 ? -1 : 1, h % 4 == 0 || h % 4 == 1 ? -1 : 1, h < 4 ? n : u, 1), U(V[h], q, X);\n\n      for (let t = 0; t < 3; ++t) V[h][t] /= V[h][3];\n    }\n\n    C(tt, V[0]), h(I, $, tt), i.camera.viewMatrix = I;\n\n    for (let h = 0; h < 8; ++h) j(V[h], V[h], i.camera.viewMatrix);\n\n    _(W, V[0]), _(B, V[0]);\n\n    for (let h = 1; h < 8; ++h) for (let t = 0; t < 3; ++t) W[t] = Math.min(W[t], V[h][t]), B[t] = Math.max(B[t], V[h][t]);\n\n    W[2] -= 200, B[2] += 200, i.camera.near = -B[2], i.camera.far = -W[2], this.warp ? this.constructTrapezoidalProjection(e, a, i) : this.constructOrthogonalProjection(i), o(i.lightMat, i.camera.projectionMatrix, i.camera.viewMatrix);\n    const d = this.textureSize / 2;\n    i.camera.viewport[0] = t % 2 == 0 ? 0 : d, i.camera.viewport[1] = 0 === Math.floor(t / 2) ? 0 : d, i.camera.viewport[2] = d, i.camera.viewport[3] = d;\n  }\n\n  constructOrthogonalProjection(t) {\n    c(t.camera.projectionMatrix, W[0], B[0], W[1], B[1], t.camera.near, t.camera.far);\n  }\n\n  constructTrapezoidalProjection(t, e, a) {\n    const i = 1 / V[0][3],\n          r = 1 / V[4][3];\n    N(i < r);\n    let h = i + Math.sqrt(i * r);\n    const o = Math.sin(s(t[2] * e[0] + t[6] * e[1] + t[10] * e[2]));\n    h /= o, lt(V, h, o, J, K, Q, Y, Z), Tt(J, K, Y, Z, a.camera.projectionMatrix), a.camera.projectionMatrix[10] = 2 / (W[2] - B[2]), a.camera.projectionMatrix[14] = -(W[2] + B[2]) / (W[2] - B[2]);\n  }\n\n  setupMatrices(t, s) {\n    o(G, t.projectionMatrix, t.viewMatrix), n(X, G);\n    const e = 1 === this.viewingMode ? t.eye : v(tt, 0, 0, 1);\n    u($, [0, 0, 0], [-s[0], -s[1], -s[2]], e);\n  }\n\n  clampNearFar(t) {\n    let {\n      near: s,\n      far: e\n    } = t;\n    return s < 2 && (s = 2), e < 2 && (e = 2), s >= e && (s = 2, e = 4), {\n      near: s,\n      far: e\n    };\n  }\n\n  computeCascadeDistances(t, s) {\n    this.numCascades = Math.min(1 + Math.floor(O(t / s, 4)), this.maxNumCascades);\n    const a = (t - s) / this.numCascades,\n          i = (t / s) ** (1 / this.numCascades);\n    let r = s,\n        h = s;\n\n    for (let o = 0; o < this.numCascades + 1; ++o) this.cascadeDistances[o] = e(r, h, this.splitSchemeLambda), r *= i, h += a;\n  }\n\n  getGpuMemoryUsage() {\n    var t, s;\n    return this._snapshots.reduce((t, s) => t + E(s), null != (t = null == (s = this.fbo) ? void 0 : s.gpuMemoryUsage) ? t : 0);\n  }\n\n  get test() {\n    const t = this;\n    return {\n      maxNumCascades: this.maxNumCascades,\n      cascades: this.cascades,\n      textureSize: this.textureSize,\n      depthTexture: this._depthTexture,\n\n      set splitSchemeLambda(s) {\n        t.splitSchemeLambda = s;\n      },\n\n      get splitSchemeLambda() {\n        return t.splitSchemeLambda;\n      },\n\n      set warp(s) {\n        t.warp = s;\n      },\n\n      get warp() {\n        return t.warp;\n      }\n\n    };\n  }\n\n}\n\nconst I = d(),\n      G = d(),\n      X = d(),\n      q = y(),\n      V = [];\n\nfor (let wt = 0; wt < 8; ++wt) V.push(y());\n\nconst W = z(),\n      B = z(),\n      J = M(),\n      K = M(),\n      Q = M(),\n      Y = M(),\n      Z = M(),\n      $ = d(),\n      tt = z(),\n      st = [],\n      et = d(),\n      at = new Float32Array(64),\n      it = M(),\n      rt = M(),\n      ht = [M(), M(), M(), M()],\n      ot = M(),\n      ct = M(),\n      nt = M(),\n      ut = M(),\n      dt = M(),\n      mt = M(),\n      pt = M();\n\nfunction lt(t, s, e, a, i, r, h, o) {\n  m(it, 0, 0);\n\n  for (let m = 0; m < 4; ++m) p(it, it, t[m]);\n\n  l(it, it, .25), m(rt, 0, 0);\n\n  for (let m = 4; m < 8; ++m) p(rt, rt, t[m]);\n\n  l(rt, rt, .25), f(ht[0], t[4], t[5], .5), f(ht[1], t[5], t[6], .5), f(ht[2], t[6], t[7], .5), f(ht[3], t[7], t[4], .5);\n  let c = 0,\n      n = x(ht[0], it);\n\n  for (let m = 1; m < 4; ++m) {\n    const t = x(ht[m], it);\n    t < n && (n = t, c = m);\n  }\n\n  b(ot, ht[c], t[c + 4]);\n  const u = ot[0];\n  let d, M;\n  ot[0] = -ot[1], ot[1] = u, b(ct, rt, it), S(ct, ot) < 0 && g(ot, ot), f(ot, ot, ct, e), T(ot, ot), d = M = S(b(nt, t[0], it), ot);\n\n  for (let m = 1; m < 8; ++m) {\n    const s = S(b(nt, t[m], it), ot);\n    s < d ? d = s : s > M && (M = s);\n  }\n\n  w(a, it), l(nt, ot, d - s), p(a, a, nt);\n\n  let _ = -1,\n      C = 1,\n      j = 0,\n      v = 0;\n\n  for (let m = 0; m < 8; ++m) {\n    b(ut, t[m], a), T(ut, ut);\n    const s = ot[0] * ut[1] - ot[1] * ut[0];\n    s > 0 ? s > _ && (_ = s, j = m) : s < C && (C = s, v = m);\n  }\n\n  k(_ > 0, \"leftArea\"), k(C < 0, \"rightArea\"), l(dt, ot, d), p(dt, dt, it), l(mt, ot, M), p(mt, mt, it), pt[0] = -ot[1], pt[1] = ot[0];\n  const z = A(a, t[v], mt, p(nt, mt, pt), 1, i),\n        D = A(a, t[j], mt, nt, 1, r),\n        U = A(a, t[j], dt, p(nt, dt, pt), 1, h),\n        y = A(a, t[v], dt, nt, 1, o);\n  k(z, \"rayRay\"), k(D, \"rayRay\"), k(U, \"rayRay\"), k(y, \"rayRay\");\n}\n\nfunction ft(t, s) {\n  return 3 * s + t;\n}\n\nconst xt = M();\n\nfunction bt(t, s) {\n  return m(xt, t[s], t[s + 3]), xt;\n}\n\nconst St = M(),\n      gt = r();\n\nfunction Tt(t, s, e, a, i) {\n  b(St, e, a), l(St, St, .5), gt[0] = St[0], gt[1] = St[1], gt[2] = 0, gt[3] = St[1], gt[4] = -St[0], gt[5] = 0, gt[6] = St[0] * St[0] + St[1] * St[1], gt[7] = St[0] * St[1] - St[1] * St[0], gt[8] = 1, gt[ft(0, 2)] = -S(bt(gt, 0), t), gt[ft(1, 2)] = -S(bt(gt, 1), t);\n  let r = S(bt(gt, 0), e) + gt[ft(0, 2)],\n      h = S(bt(gt, 1), e) + gt[ft(1, 2)],\n      o = S(bt(gt, 0), a) + gt[ft(0, 2)],\n      c = S(bt(gt, 1), a) + gt[ft(1, 2)];\n  r = -(r + o) / (h + c), gt[ft(0, 0)] += gt[ft(1, 0)] * r, gt[ft(0, 1)] += gt[ft(1, 1)] * r, gt[ft(0, 2)] += gt[ft(1, 2)] * r, r = 1 / (S(bt(gt, 0), e) + gt[ft(0, 2)]), h = 1 / (S(bt(gt, 1), e) + gt[ft(1, 2)]), gt[ft(0, 0)] *= r, gt[ft(0, 1)] *= r, gt[ft(0, 2)] *= r, gt[ft(1, 0)] *= h, gt[ft(1, 1)] *= h, gt[ft(1, 2)] *= h, gt[ft(2, 0)] = gt[ft(1, 0)], gt[ft(2, 1)] = gt[ft(1, 1)], gt[ft(2, 2)] = gt[ft(1, 2)], gt[ft(1, 2)] += 1, r = S(bt(gt, 1), s) + gt[ft(1, 2)], h = S(bt(gt, 2), s) + gt[ft(2, 2)], o = S(bt(gt, 1), e) + gt[ft(1, 2)], c = S(bt(gt, 2), e) + gt[ft(2, 2)], r = -.5 * (r / h + o / c), gt[ft(1, 0)] += gt[ft(2, 0)] * r, gt[ft(1, 1)] += gt[ft(2, 1)] * r, gt[ft(1, 2)] += gt[ft(2, 2)] * r, r = S(bt(gt, 1), s) + gt[ft(1, 2)], h = S(bt(gt, 2), s) + gt[ft(2, 2)], o = -h / r, gt[ft(1, 0)] *= o, gt[ft(1, 1)] *= o, gt[ft(1, 2)] *= o, i[0] = gt[0], i[1] = gt[1], i[2] = 0, i[3] = gt[2], i[4] = gt[3], i[5] = gt[4], i[6] = 0, i[7] = gt[5], i[8] = 0, i[9] = 0, i[10] = 1, i[11] = 0, i[12] = gt[6], i[13] = gt[7], i[14] = 0, i[15] = gt[8];\n}\n\nexport default H;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/ShadowMap.js"],"names":["clamp","t","acosClamped","s","lerp","e","isSome","a","disposeMaybe","i","c","r","h","m","o","n","l","u","d","p","b","f","j","x","S","g","T","w","M","_","C","v","z","D","U","y","F","assert","N","logWithBase","O","verify","k","rayRay2D","A","P","R","getGpuMemoryUsage","E","L","constructor","camera","lightMat","H","rctx","viewingMode","_enabled","_snapshots","Array","textureSize","maxTextureSize","numCascades","maxNumCascades","splitSchemeLambda","warp","cascadeDistances","cascades","parameters","push","snapshotCount","dispose","discardDepthTexture","discardAllSnapshots","maxCascades","Math","floor","enabled","length","discardSnapshot","getSnapshot","getCascades","st","start","computeTextureSize","fullWidth","fullHeight","ensureDepthTexture","near","far","clampNearFar","computeCascadeDistances","setupMatrices","viewMatrix","projectionMatrix","constructCascade","lastOrigin","clear","finish","bindFramebuffer","bind","_depthTextureUnit","bindTexture","_depthTexture","setUniform1f","setUniform1i","setUniform4f","bindView","et","at","setUniformMatrix4fv","takeCascadeSnapshotTo","ensureSnapshot","_bindFbo","TEXTURE_UNIT_FOR_UPDATES","gl","copyTexSubImage2D","viewport","setClearColor","clearSafe","log","LOG2E","round","min","descriptor","width","target","pixelFormat","dataType","wrapMode","samplingMode","flipped","height","fbo","colorTarget","depthStencilTarget","abs","q","V","X","tt","I","$","W","B","max","constructTrapezoidalProjection","constructOrthogonalProjection","sqrt","sin","lt","J","K","Q","Y","Z","Tt","G","eye","reduce","gpuMemoryUsage","test","depthTexture","wt","Float32Array","it","rt","ht","ot","ct","nt","ut","dt","mt","pt","ft","xt","bt","St","gt"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{clamp as t,acosClamped as s,lerp as e}from\"../../../../core/mathUtils.js\";import{isSome as a,disposeMaybe as i}from\"../../../../core/maybe.js\";import{c as r}from\"../../../../chunks/mat3f64.js\";import{t as h,m as o,o as c,a as n,l as u}from\"../../../../chunks/mat4.js\";import{c as d}from\"../../../../chunks/mat4f64.js\";import{s as m,i as p,b as l,m as f,j as x,a as b,h as S,n as g,f as T,c as w}from\"../../../../chunks/vec2.js\";import{a as M}from\"../../../../chunks/vec2f64.js\";import{g as _,o as C,m as j,s as v}from\"../../../../chunks/vec3.js\";import{c as z}from\"../../../../chunks/vec3f64.js\";import{s as D,t as U}from\"../../../../chunks/vec4.js\";import{c as y}from\"../../../../chunks/vec4f64.js\";import F from\"./Camera.js\";import{assert as N,logWithBase as O,verify as k,rayRay2D as A}from\"./Util.js\";import P from\"../../../webgl/FramebufferObject.js\";import R from\"../../../webgl/Texture.js\";import{getGpuMemoryUsage as E}from\"../../../webgl/Util.js\";class L{constructor(){this.camera=new F,this.lightMat=d()}}class H{constructor(t,s,e=0){this.rctx=t,this.viewingMode=s,this._enabled=!1,this._snapshots=new Array,this.textureSize=0,this.maxTextureSize=0,this.numCascades=1,this.maxNumCascades=4,this.splitSchemeLambda=0,this.warp=!0,this.cascadeDistances=[0,0,0,0,0],this.cascades=[],this.maxTextureSize=this.rctx.parameters.maxTextureSize;for(let a=0;a<4;++a)this.cascades.push(new L);this.snapshotCount=e}dispose(){this.discardDepthTexture(),this.discardAllSnapshots()}set maxCascades(s){this.maxNumCascades=t(Math.floor(s),1,4)}get maxCascades(){return this.maxNumCascades}set enabled(t){this._enabled=t,t||(this.discardDepthTexture(),this.discardAllSnapshots())}get enabled(){return this._enabled}get snapshotCount(){return this._snapshots.length}set snapshotCount(t){const s=this._snapshots.length;if(t>s){const e=t-s;this._snapshots.length=t;for(let t=0;t<e;++t)this._snapshots[s+t]=null}else if(t<this.snapshotCount){const e=s-t;for(let s=0;s<e;++s)this.discardSnapshot(t+s);this._snapshots.length=t}}getSnapshot(t){return this.enabled?this._snapshots[t]:null}getCascades(){for(let t=0;t<this.numCascades;++t)st[t]=this.cascades[t];return st.length=this.numCascades,st}start(t,s,e){N(this.enabled),this.textureSize=this.computeTextureSize(t.fullWidth,t.fullHeight),this.ensureDepthTexture();const{near:a,far:i}=this.clampNearFar(e);this.computeCascadeDistances(i,a),this.setupMatrices(t,s);const r=t.viewMatrix,h=t.projectionMatrix;for(let o=0;o<this.numCascades;++o)this.constructCascade(o,h,r,s);this.lastOrigin=null,this.clear()}finish(t){N(this.enabled),this.rctx.bindFramebuffer(t)}bind(t){this.enabled?(this._depthTextureUnit=t.bindTexture(this._depthTexture,\"uShadowMapTex\"),t.setUniform1f(\"uDepthHalfPixelSz\",.5/this.textureSize),t.setUniform1i(\"uShadowMapNum\",this.numCascades),t.setUniform4f(\"uShadowMapDistance\",this.cascadeDistances[0],this.numCascades>1?this.cascadeDistances[1]:1/0,this.numCascades>2?this.cascadeDistances[2]:1/0,this.numCascades>3?this.cascadeDistances[3]:1/0)):t.setUniform1f(\"uDepthHalfPixelSz\",-1)}bindView(t,s){if(!this.enabled)return;const e=this.lastOrigin;if(!(e&&e[0]===s[0]&&e[1]===s[1]&&e[2]===s[2])){this.lastOrigin=this.lastOrigin||z(),_(this.lastOrigin,s);for(let t=0;t<this.numCascades;++t){h(et,this.cascades[t].lightMat,s);for(let s=0;s<16;++s)at[16*t+s]=et[s]}}t.setUniformMatrix4fv(\"uShadowMapMatrix\",at)}takeCascadeSnapshotTo(t,s){N(this.enabled),this.ensureSnapshot(s),this._bindFbo();const e=this.rctx,a=e.bindTexture(this._snapshots[s],R.TEXTURE_UNIT_FOR_UPDATES);e.gl.copyTexSubImage2D(3553,0,t.camera.viewport[0],t.camera.viewport[1],t.camera.viewport[0],t.camera.viewport[1],t.camera.viewport[2],t.camera.viewport[3]),e.bindTexture(a,R.TEXTURE_UNIT_FOR_UPDATES)}clear(){const t=this.rctx;this._bindFbo(),t.setClearColor(1,1,1,1),t.clearSafe(16640)}computeTextureSize(t,s){const e=.5*Math.log(t*t+s*s)*Math.LOG2E,a=.35,i=2**Math.round(e+a);return Math.min(this.maxTextureSize,2*i)}ensureDepthTexture(){if(null!=this._depthTexture&&this._depthTexture.descriptor.width===this.textureSize)return;this.discardDepthTexture();const t={target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0,width:this.textureSize,height:this.textureSize};this._depthTexture=new R(this.rctx,t),this.fbo=new P(this.rctx,{colorTarget:0,depthStencilTarget:1,width:this.textureSize,height:this.textureSize},this._depthTexture)}ensureSnapshot(t){const s=this._snapshots[t];if(a(s)&&s.descriptor.width===this.textureSize)return;this.discardSnapshot(t);const e={target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0,width:this.textureSize,height:this.textureSize};this._snapshots[t]=new R(this.rctx,e)}discardDepthTexture(){this.fbo=i(this.fbo),this._depthTexture=i(this._depthTexture)}discardSnapshot(t){this._snapshots[t]=i(this._snapshots[t])}discardAllSnapshots(){for(let t=0;t<this.snapshotCount;++t)this.discardSnapshot(t)}_bindFbo(){const t=this.rctx;a(this._depthTextureUnit)&&(t.bindTexture(null,this._depthTextureUnit),this._depthTextureUnit=null),t.bindFramebuffer(this.fbo)}constructCascade(t,s,e,a){const i=this.cascades[t],r=-this.cascadeDistances[t],c=-this.cascadeDistances[t+1],n=(s[10]*r+s[14])/Math.abs(s[11]*r+s[15]),u=(s[10]*c+s[14])/Math.abs(s[11]*c+s[15]);N(n<u);for(let h=0;h<8;++h){D(q,h%4==0||h%4==3?-1:1,h%4==0||h%4==1?-1:1,h<4?n:u,1),U(V[h],q,X);for(let t=0;t<3;++t)V[h][t]/=V[h][3]}C(tt,V[0]),h(I,$,tt),i.camera.viewMatrix=I;for(let h=0;h<8;++h)j(V[h],V[h],i.camera.viewMatrix);_(W,V[0]),_(B,V[0]);for(let h=1;h<8;++h)for(let t=0;t<3;++t)W[t]=Math.min(W[t],V[h][t]),B[t]=Math.max(B[t],V[h][t]);W[2]-=200,B[2]+=200,i.camera.near=-B[2],i.camera.far=-W[2],this.warp?this.constructTrapezoidalProjection(e,a,i):this.constructOrthogonalProjection(i),o(i.lightMat,i.camera.projectionMatrix,i.camera.viewMatrix);const d=this.textureSize/2;i.camera.viewport[0]=t%2==0?0:d,i.camera.viewport[1]=0===Math.floor(t/2)?0:d,i.camera.viewport[2]=d,i.camera.viewport[3]=d}constructOrthogonalProjection(t){c(t.camera.projectionMatrix,W[0],B[0],W[1],B[1],t.camera.near,t.camera.far)}constructTrapezoidalProjection(t,e,a){const i=1/V[0][3],r=1/V[4][3];N(i<r);let h=i+Math.sqrt(i*r);const o=Math.sin(s(t[2]*e[0]+t[6]*e[1]+t[10]*e[2]));h/=o,lt(V,h,o,J,K,Q,Y,Z),Tt(J,K,Y,Z,a.camera.projectionMatrix),a.camera.projectionMatrix[10]=2/(W[2]-B[2]),a.camera.projectionMatrix[14]=-(W[2]+B[2])/(W[2]-B[2])}setupMatrices(t,s){o(G,t.projectionMatrix,t.viewMatrix),n(X,G);const e=1===this.viewingMode?t.eye:v(tt,0,0,1);u($,[0,0,0],[-s[0],-s[1],-s[2]],e)}clampNearFar(t){let{near:s,far:e}=t;return s<2&&(s=2),e<2&&(e=2),s>=e&&(s=2,e=4),{near:s,far:e}}computeCascadeDistances(t,s){this.numCascades=Math.min(1+Math.floor(O(t/s,4)),this.maxNumCascades);const a=(t-s)/this.numCascades,i=(t/s)**(1/this.numCascades);let r=s,h=s;for(let o=0;o<this.numCascades+1;++o)this.cascadeDistances[o]=e(r,h,this.splitSchemeLambda),r*=i,h+=a}getGpuMemoryUsage(){var t,s;return this._snapshots.reduce(((t,s)=>t+E(s)),null!=(t=null==(s=this.fbo)?void 0:s.gpuMemoryUsage)?t:0)}get test(){const t=this;return{maxNumCascades:this.maxNumCascades,cascades:this.cascades,textureSize:this.textureSize,depthTexture:this._depthTexture,set splitSchemeLambda(s){t.splitSchemeLambda=s},get splitSchemeLambda(){return t.splitSchemeLambda},set warp(s){t.warp=s},get warp(){return t.warp}}}}const I=d(),G=d(),X=d(),q=y(),V=[];for(let wt=0;wt<8;++wt)V.push(y());const W=z(),B=z(),J=M(),K=M(),Q=M(),Y=M(),Z=M(),$=d(),tt=z(),st=[],et=d(),at=new Float32Array(64),it=M(),rt=M(),ht=[M(),M(),M(),M()],ot=M(),ct=M(),nt=M(),ut=M(),dt=M(),mt=M(),pt=M();function lt(t,s,e,a,i,r,h,o){m(it,0,0);for(let m=0;m<4;++m)p(it,it,t[m]);l(it,it,.25),m(rt,0,0);for(let m=4;m<8;++m)p(rt,rt,t[m]);l(rt,rt,.25),f(ht[0],t[4],t[5],.5),f(ht[1],t[5],t[6],.5),f(ht[2],t[6],t[7],.5),f(ht[3],t[7],t[4],.5);let c=0,n=x(ht[0],it);for(let m=1;m<4;++m){const t=x(ht[m],it);t<n&&(n=t,c=m)}b(ot,ht[c],t[c+4]);const u=ot[0];let d,M;ot[0]=-ot[1],ot[1]=u,b(ct,rt,it),S(ct,ot)<0&&g(ot,ot),f(ot,ot,ct,e),T(ot,ot),d=M=S(b(nt,t[0],it),ot);for(let m=1;m<8;++m){const s=S(b(nt,t[m],it),ot);s<d?d=s:s>M&&(M=s)}w(a,it),l(nt,ot,d-s),p(a,a,nt);let _=-1,C=1,j=0,v=0;for(let m=0;m<8;++m){b(ut,t[m],a),T(ut,ut);const s=ot[0]*ut[1]-ot[1]*ut[0];s>0?s>_&&(_=s,j=m):s<C&&(C=s,v=m)}k(_>0,\"leftArea\"),k(C<0,\"rightArea\"),l(dt,ot,d),p(dt,dt,it),l(mt,ot,M),p(mt,mt,it),pt[0]=-ot[1],pt[1]=ot[0];const z=A(a,t[v],mt,p(nt,mt,pt),1,i),D=A(a,t[j],mt,nt,1,r),U=A(a,t[j],dt,p(nt,dt,pt),1,h),y=A(a,t[v],dt,nt,1,o);k(z,\"rayRay\"),k(D,\"rayRay\"),k(U,\"rayRay\"),k(y,\"rayRay\")}function ft(t,s){return 3*s+t}const xt=M();function bt(t,s){return m(xt,t[s],t[s+3]),xt}const St=M(),gt=r();function Tt(t,s,e,a,i){b(St,e,a),l(St,St,.5),gt[0]=St[0],gt[1]=St[1],gt[2]=0,gt[3]=St[1],gt[4]=-St[0],gt[5]=0,gt[6]=St[0]*St[0]+St[1]*St[1],gt[7]=St[0]*St[1]-St[1]*St[0],gt[8]=1,gt[ft(0,2)]=-S(bt(gt,0),t),gt[ft(1,2)]=-S(bt(gt,1),t);let r=S(bt(gt,0),e)+gt[ft(0,2)],h=S(bt(gt,1),e)+gt[ft(1,2)],o=S(bt(gt,0),a)+gt[ft(0,2)],c=S(bt(gt,1),a)+gt[ft(1,2)];r=-(r+o)/(h+c),gt[ft(0,0)]+=gt[ft(1,0)]*r,gt[ft(0,1)]+=gt[ft(1,1)]*r,gt[ft(0,2)]+=gt[ft(1,2)]*r,r=1/(S(bt(gt,0),e)+gt[ft(0,2)]),h=1/(S(bt(gt,1),e)+gt[ft(1,2)]),gt[ft(0,0)]*=r,gt[ft(0,1)]*=r,gt[ft(0,2)]*=r,gt[ft(1,0)]*=h,gt[ft(1,1)]*=h,gt[ft(1,2)]*=h,gt[ft(2,0)]=gt[ft(1,0)],gt[ft(2,1)]=gt[ft(1,1)],gt[ft(2,2)]=gt[ft(1,2)],gt[ft(1,2)]+=1,r=S(bt(gt,1),s)+gt[ft(1,2)],h=S(bt(gt,2),s)+gt[ft(2,2)],o=S(bt(gt,1),e)+gt[ft(1,2)],c=S(bt(gt,2),e)+gt[ft(2,2)],r=-.5*(r/h+o/c),gt[ft(1,0)]+=gt[ft(2,0)]*r,gt[ft(1,1)]+=gt[ft(2,1)]*r,gt[ft(1,2)]+=gt[ft(2,2)]*r,r=S(bt(gt,1),s)+gt[ft(1,2)],h=S(bt(gt,2),s)+gt[ft(2,2)],o=-h/r,gt[ft(1,0)]*=o,gt[ft(1,1)]*=o,gt[ft(1,2)]*=o,i[0]=gt[0],i[1]=gt[1],i[2]=0,i[3]=gt[2],i[4]=gt[3],i[5]=gt[4],i[6]=0,i[7]=gt[5],i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=gt[6],i[13]=gt[7],i[14]=0,i[15]=gt[8]}export default H;\n"]},"metadata":{},"sourceType":"module"}