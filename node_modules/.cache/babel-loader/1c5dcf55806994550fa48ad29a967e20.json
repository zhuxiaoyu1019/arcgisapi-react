{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/PooledArray.js\";\nimport { create as e, set as r, area as s, expand as n, contains as o, containsPoint as i } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { noBudget as h } from \"../../../support/Scheduler.js\";\nconst a = .05;\n\nclass c {\n  constructor() {\n    this._extents = new t({\n      allocator: t => t || e()\n    }), this._tmpExtent = e(), this._dirty = !1;\n  }\n\n  get empty() {\n    return 0 === this._extents.length;\n  }\n\n  get size() {\n    return this._extents.length;\n  }\n\n  clear() {\n    this._extents.clear();\n  }\n\n  add(t) {\n    this.contains(t) || (this.removeContained(t), r(this._extents.pushNew(), t), this._dirty = !0);\n  }\n\n  pop() {\n    return this._dirty && this.mergeTight(), this._extents.pop();\n  }\n\n  merge(t) {\n    return this.mergeTight(t), t.hasProgressed;\n  }\n\n  mergeTight(t = h) {\n    const e = this._extents,\n          o = new Set();\n    let i = 0;\n\n    for (; i !== e.length;) {\n      e.sort((t, e) => t[0] - e[0]), i = e.length, o.clear();\n\n      for (let i = 0; i < e.length; ++i) {\n        if (t.done) return;\n        const h = e.getItemAt(i);\n\n        for (let t = i + 1; t < e.length; ++t) {\n          const r = e.getItemAt(t);\n          if (r[0] >= h[2]) break;\n          o.add(r);\n        }\n\n        o.forEach(i => {\n          if (h === i) return;\n          if (i[2] <= h[0]) return void o.delete(i);\n          const c = s(h),\n                g = s(i),\n                m = this._tmpExtent;\n          n(h, i, m);\n          const d = c + g;\n          (s(m) - d) / d < a && (r(h, m), o.delete(i), e.remove(i), t.madeProgress());\n        }), o.add(h);\n      }\n    }\n\n    this._dirty = !1;\n  }\n\n  contains(t) {\n    return this._extents.some(e => o(e, t));\n  }\n\n  removeContained(t) {\n    this._extents.filterInPlace(e => !o(t, e));\n  }\n\n  get test() {\n    const t = this;\n    return {\n      containsPoint: e => t._extents.some(t => i(t, e))\n    };\n  }\n\n}\n\nexport { c as ExtentSet };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js"],"names":["t","create","e","set","r","area","s","expand","n","contains","o","containsPoint","i","noBudget","h","a","c","constructor","_extents","allocator","_tmpExtent","_dirty","empty","length","size","clear","add","removeContained","pushNew","pop","mergeTight","merge","hasProgressed","Set","sort","done","getItemAt","forEach","delete","g","m","d","remove","madeProgress","some","filterInPlace","test","ExtentSet"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,set as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this._extents=new t({allocator:t=>t||e()}),this._tmpExtent=e(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this.mergeTight(),this._extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),g=s(i),m=this._tmpExtent;n(h,i,m);const d=c+g;(s(m)-d)/d<a&&(r(h,m),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this._dirty=!1}contains(t){return this._extents.some((e=>o(e,t)))}removeContained(t){this._extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n"]},"metadata":{},"sourceType":"module"}