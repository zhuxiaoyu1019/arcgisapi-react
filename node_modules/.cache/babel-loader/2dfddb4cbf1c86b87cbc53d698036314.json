{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { T as r } from \"../../../../chunks/Terrain.glsl.js\";\nimport { ReloadableShaderModule as o } from \"../core/shaderTechnique/ReloadableShaderModule.js\";\nimport { ShaderTechnique as t } from \"../core/shaderTechnique/ShaderTechnique.js\";\nimport { ShaderTechniqueConfiguration as i, parameter as d } from \"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";\nimport { Default3D as s } from \"../lib/DefaultVertexAttributeLocations.js\";\nimport { Program as n } from \"../lib/Program.js\";\nimport { renderWhenBitIsNotSet as l } from \"../lib/StencilUtils.js\";\nimport { makePipelineState as a, simpleBlendingParams as c, backFaceCullingParams as p, defaultDepthWriteParams as u, defaultColorWriteParams as h } from \"../../../webgl/renderState.js\";\n\nclass b extends t {\n  initializeProgram(e) {\n    const r = b.shader.get(),\n          o = this.configuration,\n          t = r.build({\n      overlayMode: o.overlayMode,\n      output: o.output,\n      viewingMode: e.viewingMode,\n      slicePlaneEnabled: o.slicePlaneEnabled,\n      sliceHighlightDisabled: !1,\n      sliceEnabledForVertexPrograms: !1,\n      textureFadingEnabled: o.textureFadingEnabled && !o.renderOccluded,\n      hasBackgroundColor: o.hasBackgroundColor,\n      useGrid: o.useGrid,\n      receiveShadows: o.receiveShadows && !o.renderOccluded,\n      receiveAmbientOcclusion: !1,\n      atmosphere: o.atmosphere,\n      tileBorders: o.tileBorders,\n      screenSizePerspective: o.screenSizePerspective,\n      pbrMode: 0,\n      ssrEnabled: o.ssrEnabled,\n      highStepCount: !1\n    });\n    return new n(e.rctx, t, s);\n  }\n\n  initializePipeline() {\n    const e = this.configuration,\n          r = e.backfaceCullingEnabled && !e.renderOccluded;\n    return a({\n      blending: e.renderOccluded ? c(1, 771) : null,\n      culling: r && p,\n      depthTest: !e.renderOccluded && {\n        func: 513\n      },\n      depthWrite: !e.renderOccluded && u,\n      colorWrite: h,\n      stencilTest: e.stencilEnabled ? l(1) : null\n    });\n  }\n\n}\n\nb.shader = new o(r, () => import(\"../core/shaderLibrary/terrain/Terrain.glsl.js\"));\n\nclass v extends i {\n  constructor() {\n    super(...arguments), this.output = 0, this.overlayMode = 0, this.atmosphere = !1, this.receiveShadows = !1, this.slicePlaneEnabled = !1, this.backfaceCullingEnabled = !1, this.stencilEnabled = !1, this.textureFadingEnabled = !1, this.hasBackgroundColor = !1, this.useGrid = !1, this.renderOccluded = !1, this.ssrEnabled = !1, this.tileBorders = !1, this.screenSizePerspective = !1;\n  }\n\n}\n\ne([d({\n  count: 8\n})], v.prototype, \"output\", void 0), e([d({\n  count: 3\n})], v.prototype, \"overlayMode\", void 0), e([d()], v.prototype, \"atmosphere\", void 0), e([d()], v.prototype, \"receiveShadows\", void 0), e([d()], v.prototype, \"slicePlaneEnabled\", void 0), e([d()], v.prototype, \"backfaceCullingEnabled\", void 0), e([d()], v.prototype, \"stencilEnabled\", void 0), e([d()], v.prototype, \"textureFadingEnabled\", void 0), e([d()], v.prototype, \"hasBackgroundColor\", void 0), e([d()], v.prototype, \"useGrid\", void 0), e([d()], v.prototype, \"renderOccluded\", void 0), e([d()], v.prototype, \"ssrEnabled\", void 0), e([d()], v.prototype, \"tileBorders\", void 0), e([d()], v.prototype, \"screenSizePerspective\", void 0);\nexport { b as TerrainTechnique, v as TerrainTechniqueConfiguration };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/shaders/TerrainTechnique.js"],"names":["_","e","T","r","ReloadableShaderModule","o","ShaderTechnique","t","ShaderTechniqueConfiguration","i","parameter","d","Default3D","s","Program","n","renderWhenBitIsNotSet","l","makePipelineState","a","simpleBlendingParams","c","backFaceCullingParams","p","defaultDepthWriteParams","u","defaultColorWriteParams","h","b","initializeProgram","shader","get","configuration","build","overlayMode","output","viewingMode","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","textureFadingEnabled","renderOccluded","hasBackgroundColor","useGrid","receiveShadows","receiveAmbientOcclusion","atmosphere","tileBorders","screenSizePerspective","pbrMode","ssrEnabled","highStepCount","rctx","initializePipeline","backfaceCullingEnabled","blending","culling","depthTest","func","depthWrite","colorWrite","stencilTest","stencilEnabled","v","constructor","arguments","count","prototype","TerrainTechnique","TerrainTechniqueConfiguration"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{T as r}from\"../../../../chunks/Terrain.glsl.js\";import{ReloadableShaderModule as o}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as i,parameter as d}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as n}from\"../lib/Program.js\";import{renderWhenBitIsNotSet as l}from\"../lib/StencilUtils.js\";import{makePipelineState as a,simpleBlendingParams as c,backFaceCullingParams as p,defaultDepthWriteParams as u,defaultColorWriteParams as h}from\"../../../webgl/renderState.js\";class b extends t{initializeProgram(e){const r=b.shader.get(),o=this.configuration,t=r.build({overlayMode:o.overlayMode,output:o.output,viewingMode:e.viewingMode,slicePlaneEnabled:o.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,textureFadingEnabled:o.textureFadingEnabled&&!o.renderOccluded,hasBackgroundColor:o.hasBackgroundColor,useGrid:o.useGrid,receiveShadows:o.receiveShadows&&!o.renderOccluded,receiveAmbientOcclusion:!1,atmosphere:o.atmosphere,tileBorders:o.tileBorders,screenSizePerspective:o.screenSizePerspective,pbrMode:0,ssrEnabled:o.ssrEnabled,highStepCount:!1});return new n(e.rctx,t,s)}initializePipeline(){const e=this.configuration,r=e.backfaceCullingEnabled&&!e.renderOccluded;return a({blending:e.renderOccluded?c(1,771):null,culling:r&&p,depthTest:!e.renderOccluded&&{func:513},depthWrite:!e.renderOccluded&&u,colorWrite:h,stencilTest:e.stencilEnabled?l(1):null})}}b.shader=new o(r,(()=>import(\"../core/shaderLibrary/terrain/Terrain.glsl.js\")));class v extends i{constructor(){super(...arguments),this.output=0,this.overlayMode=0,this.atmosphere=!1,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.backfaceCullingEnabled=!1,this.stencilEnabled=!1,this.textureFadingEnabled=!1,this.hasBackgroundColor=!1,this.useGrid=!1,this.renderOccluded=!1,this.ssrEnabled=!1,this.tileBorders=!1,this.screenSizePerspective=!1}}e([d({count:8})],v.prototype,\"output\",void 0),e([d({count:3})],v.prototype,\"overlayMode\",void 0),e([d()],v.prototype,\"atmosphere\",void 0),e([d()],v.prototype,\"receiveShadows\",void 0),e([d()],v.prototype,\"slicePlaneEnabled\",void 0),e([d()],v.prototype,\"backfaceCullingEnabled\",void 0),e([d()],v.prototype,\"stencilEnabled\",void 0),e([d()],v.prototype,\"textureFadingEnabled\",void 0),e([d()],v.prototype,\"hasBackgroundColor\",void 0),e([d()],v.prototype,\"useGrid\",void 0),e([d()],v.prototype,\"renderOccluded\",void 0),e([d()],v.prototype,\"ssrEnabled\",void 0),e([d()],v.prototype,\"tileBorders\",void 0),e([d()],v.prototype,\"screenSizePerspective\",void 0);export{b as TerrainTechnique,v as TerrainTechniqueConfiguration};\n"]},"metadata":{},"sourceType":"module"}