{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { getInfo as t } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport r from \"./TileKey.js\";\n\nfunction o(t, r) {\n  return [t, r];\n}\n\nfunction i(t, r, o) {\n  return t[0] = r, t[1] = o, t;\n}\n\nfunction e(t, r, o, i, e) {\n  return t[0] = r, t[1] = o, t[2] = i, t[3] = e, t;\n}\n\nconst s = new r(\"0/0/0/0\");\n\nclass n {\n  constructor(t, r, o, i, e, s, n, l, h, a, u, m) {\n    this.level = t, this.resolution = r, this.scale = o, this.origin = i, this.first = e, this.last = s, this.size = n, this.norm = l, this.worldStart = h, this.worldEnd = a, this.worldSize = u, this.wrap = m;\n  }\n\n  static create(r, e, s) {\n    const l = t(r.spatialReference),\n          h = o(r.origin.x, r.origin.y),\n          a = o(r.size[0] * e.resolution, r.size[1] * e.resolution),\n          u = o(-1 / 0, -1 / 0),\n          m = o(1 / 0, 1 / 0),\n          g = o(1 / 0, 1 / 0);\n    let w, d, c, f;\n    return s && (i(u, Math.max(0, Math.floor((s.xmin - h[0]) / a[0])), Math.max(0, Math.floor((h[1] - s.ymax) / a[1]))), i(m, Math.max(0, Math.floor((s.xmax - h[0]) / a[0])), Math.max(0, Math.floor((h[1] - s.ymin) / a[1]))), i(g, m[0] - u[0] + 1, m[1] - u[1] + 1)), r.isWrappable ? (w = o(Math.ceil(Math.round((l.valid[1] - l.valid[0]) / e.resolution) / r.size[0]), g[1]), d = o(Math.floor((l.origin[0] - h[0]) / a[0]), u[1]), c = o(w[0] + d[0] - 1, m[1]), f = !0) : (d = u, c = m, w = g, f = !1), new n(e.level, e.resolution, e.scale, h, u, m, g, a, d, c, w, f);\n  }\n\n  normalizeCol(t) {\n    if (!this.wrap) return t;\n    const r = this.worldSize[0];\n    return t < 0 ? r - 1 - Math.abs((t + 1) % r) : t % r;\n  }\n\n  denormalizeCol(t, r) {\n    return this.wrap ? this.worldSize[0] * r + t : t;\n  }\n\n  getWorldForColumn(t) {\n    return this.wrap ? Math.floor(t / this.worldSize[0]) : 0;\n  }\n\n  getFirstColumnForWorld(t) {\n    return t * this.worldSize[0] + this.first[0];\n  }\n\n  getLastColumnForWorld(t) {\n    return t * this.worldSize[0] + this.first[0] + this.size[0] - 1;\n  }\n\n  getColumnForX(t) {\n    return (t - this.origin[0]) / this.norm[0];\n  }\n\n  getXForColumn(t) {\n    return this.origin[0] + t * this.norm[0];\n  }\n\n  getRowForY(t) {\n    return (this.origin[1] - t) / this.norm[1];\n  }\n\n  getYForRow(t) {\n    return this.origin[1] - t * this.norm[1];\n  }\n\n  getTileBounds(t, r, o = !1) {\n    s.set(r);\n    const i = o ? s.col : this.denormalizeCol(s.col, s.world),\n          n = s.row;\n    return e(t, this.getXForColumn(i), this.getYForRow(n + 1), this.getXForColumn(i + 1), this.getYForRow(n)), t;\n  }\n\n  getTileCoords(t, r, o = !1) {\n    s.set(r);\n    const e = o ? s.col : this.denormalizeCol(s.col, s.world);\n    return Array.isArray(t) ? i(t, this.getXForColumn(e), this.getYForRow(s.row)) : (t.x = this.getXForColumn(e), t.y = this.getYForRow(s.row)), t;\n  }\n\n}\n\nexport default n;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/tiling/LODInfo.js"],"names":["getInfo","t","r","o","i","e","s","n","constructor","l","h","a","u","m","level","resolution","scale","origin","first","last","size","norm","worldStart","worldEnd","worldSize","wrap","create","spatialReference","x","y","g","w","d","c","f","Math","max","floor","xmin","ymax","xmax","ymin","isWrappable","ceil","round","valid","normalizeCol","abs","denormalizeCol","getWorldForColumn","getFirstColumnForWorld","getLastColumnForWorld","getColumnForX","getXForColumn","getRowForY","getYForRow","getTileBounds","set","col","world","row","getTileCoords","Array","isArray"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getInfo as t}from\"../../../geometry/support/spatialReferenceUtils.js\";import r from\"./TileKey.js\";function o(t,r){return[t,r]}function i(t,r,o){return t[0]=r,t[1]=o,t}function e(t,r,o,i,e){return t[0]=r,t[1]=o,t[2]=i,t[3]=e,t}const s=new r(\"0/0/0/0\");class n{constructor(t,r,o,i,e,s,n,l,h,a,u,m){this.level=t,this.resolution=r,this.scale=o,this.origin=i,this.first=e,this.last=s,this.size=n,this.norm=l,this.worldStart=h,this.worldEnd=a,this.worldSize=u,this.wrap=m}static create(r,e,s){const l=t(r.spatialReference),h=o(r.origin.x,r.origin.y),a=o(r.size[0]*e.resolution,r.size[1]*e.resolution),u=o(-1/0,-1/0),m=o(1/0,1/0),g=o(1/0,1/0);let w,d,c,f;return s&&(i(u,Math.max(0,Math.floor((s.xmin-h[0])/a[0])),Math.max(0,Math.floor((h[1]-s.ymax)/a[1]))),i(m,Math.max(0,Math.floor((s.xmax-h[0])/a[0])),Math.max(0,Math.floor((h[1]-s.ymin)/a[1]))),i(g,m[0]-u[0]+1,m[1]-u[1]+1)),r.isWrappable?(w=o(Math.ceil(Math.round((l.valid[1]-l.valid[0])/e.resolution)/r.size[0]),g[1]),d=o(Math.floor((l.origin[0]-h[0])/a[0]),u[1]),c=o(w[0]+d[0]-1,m[1]),f=!0):(d=u,c=m,w=g,f=!1),new n(e.level,e.resolution,e.scale,h,u,m,g,a,d,c,w,f)}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,o=!1){s.set(r);const i=o?s.col:this.denormalizeCol(s.col,s.world),n=s.row;return e(t,this.getXForColumn(i),this.getYForRow(n+1),this.getXForColumn(i+1),this.getYForRow(n)),t}getTileCoords(t,r,o=!1){s.set(r);const e=o?s.col:this.denormalizeCol(s.col,s.world);return Array.isArray(t)?i(t,this.getXForColumn(e),this.getYForRow(s.row)):(t.x=this.getXForColumn(e),t.y=this.getYForRow(s.row)),t}}export default n;\n"]},"metadata":{},"sourceType":"module"}