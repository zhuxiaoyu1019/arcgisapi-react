{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport s from \"../../Viewpoint.js\";\nimport { JSONSupport as i } from \"../../core/JSONSupport.js\";\nimport { property as e } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as o } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { t as r } from \"../../chunks/common.js\";\nimport { i as n, t as a, r as p, a as h } from \"../../chunks/mat2d.js\";\nimport { c } from \"../../chunks/mat2df32.js\";\nimport { c as m } from \"../../chunks/mat2df64.js\";\nimport { s as l, b as f, c as u, r as w, m as v } from \"../../chunks/mat3.js\";\nimport { c as d } from \"../../chunks/mat3f32.js\";\nimport { c as j, t as y } from \"../../chunks/vec2.js\";\nimport { f as R } from \"../../chunks/vec2f32.js\";\nimport { a as _ } from \"../../chunks/vec2f64.js\";\nimport { isVec2 as x } from \"../../core/libs/gl-matrix-2/types/vec2.js\";\nimport { copy as z, getMatrix as g, getResolution as S, getExtent as k, getTransform as M, getTransformNoRotation as N, getWorldScreenWidth as T } from \"./viewpointUtils.js\";\nimport b from \"../../geometry/Extent.js\";\nimport D from \"../../geometry/Point.js\";\nvar V;\nconst G = [0, 0];\nlet O = V = class extends i {\n  constructor(t) {\n    super(t), this._viewpoint2D = {\n      center: _(),\n      rotation: 0,\n      scale: 0,\n      spatialReference: null\n    }, this.center = [0, 0], this.extent = new b(), this.id = 0, this.inverseTransform = m(), this.resolution = 0, this.rotation = 0, this.scale = 0, this.transform = m(), this.transformNoRotation = m(), this.displayMat3 = d(), this.displayViewMat3 = d(), this.viewMat3 = d(), this.viewMat2d = c(), this.worldScreenWidth = 0, this.size = [0, 0];\n  }\n\n  set pixelRatio(t) {\n    this._set(\"pixelRatio\", t), this._update();\n  }\n\n  set size(t) {\n    this._set(\"size\", t), this._update();\n  }\n\n  set viewpoint(t) {\n    if (t) {\n      const s = this._viewpoint2D,\n            i = t.targetGeometry;\n      s.center[0] = i.x, s.center[1] = i.y, s.rotation = t.rotation, s.scale = t.scale, s.spatialReference = i.spatialReference;\n    }\n\n    this._update();\n  }\n\n  copy(t) {\n    const s = this.size,\n          i = this.viewpoint;\n    return i && s ? (this.viewpoint = z(i, t.viewpoint), this._set(\"size\", j(s, t.size))) : (this.viewpoint = t.viewpoint.clone(), this._set(\"size\", [t.size[0], t.size[1]])), this._set(\"pixelRatio\", t.pixelRatio), this;\n  }\n\n  clone() {\n    return new V({\n      size: this.size,\n      viewpoint: this.viewpoint.clone(),\n      pixelRatio: this.pixelRatio\n    });\n  }\n\n  toMap(t, s, i) {\n    return x(s) ? y(t, s, this.inverseTransform) : (G[0] = s, G[1] = i, y(t, G, this.inverseTransform));\n  }\n\n  toScreen(t, s, i) {\n    return x(s) ? y(t, s, this.transform) : (G[0] = s, G[1] = i, y(t, G, this.transform));\n  }\n\n  toScreenNoRotation(t, s, i) {\n    return x(s) ? y(t, s, this.transformNoRotation) : (G[0] = s, G[1] = i, y(t, G, this.transformNoRotation));\n  }\n\n  getScreenTransform(t, s) {\n    const {\n      center: i\n    } = this._viewpoint2D,\n          e = this._get(\"pixelRatio\") || 1,\n          o = this._get(\"size\");\n\n    return g(t, i, o, s, 0, e), t;\n  }\n\n  _update() {\n    const {\n      center: t,\n      spatialReference: i,\n      scale: e,\n      rotation: o\n    } = this._viewpoint2D,\n          c = this._get(\"pixelRatio\") || 1,\n          m = this._get(\"size\"),\n          d = new s({\n      targetGeometry: new D(t[0], t[1], i),\n      scale: e,\n      rotation: o\n    });\n\n    if (this._set(\"viewpoint\", d), !m || !i || !e) return;\n    this.resolution = S(d), this.rotation = o, this.scale = e, this.spatialReference = i, j(this.center, t);\n\n    const y = 0 !== m[0] ? 2 / m[0] : 0,\n          _ = 0 !== m[1] ? -2 / m[1] : 0;\n\n    l(this.displayMat3, y, 0, 0, 0, _, 0, -1, 1, 1);\n    const x = f(this.viewMat3),\n          z = R(m[0] / 2, m[1] / 2),\n          g = R(-m[0] / 2, -m[1] / 2),\n          b = r(o);\n    u(x, x, z), w(x, x, b), u(x, x, g), v(this.displayViewMat3, this.displayMat3, x);\n    const V = n(this.viewMat2d);\n    return a(V, V, z), p(V, V, b), a(V, V, g), k(this.extent, d, m), M(this.transform, d, m, c), h(this.inverseTransform, this.transform), N(this.transformNoRotation, d, m, c), this.worldScreenWidth = T(this.spatialReference, this.resolution), this._set(\"id\", this.id + 1), this;\n  }\n\n};\nt([e({\n  readOnly: !0\n})], O.prototype, \"id\", void 0), t([e({\n  value: 1,\n  json: {\n    write: !0\n  }\n})], O.prototype, \"pixelRatio\", null), t([e({\n  json: {\n    write: !0\n  }\n})], O.prototype, \"size\", null), t([e({\n  type: s,\n  json: {\n    write: !0\n  }\n})], O.prototype, \"viewpoint\", null), O = V = t([o(\"esri.views.2d.ViewState\")], O);\nvar W = O;\nexport default W;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/ViewState.js"],"names":["_","t","s","JSONSupport","i","property","e","subclass","o","r","n","a","p","h","c","m","l","b","f","u","w","v","d","j","y","R","isVec2","x","copy","z","getMatrix","g","getResolution","S","getExtent","k","getTransform","M","getTransformNoRotation","N","getWorldScreenWidth","T","D","V","G","O","constructor","_viewpoint2D","center","rotation","scale","spatialReference","extent","id","inverseTransform","resolution","transform","transformNoRotation","displayMat3","displayViewMat3","viewMat3","viewMat2d","worldScreenWidth","size","pixelRatio","_set","_update","viewpoint","targetGeometry","clone","toMap","toScreen","toScreenNoRotation","getScreenTransform","_get","readOnly","prototype","value","json","write","type","W"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import s from\"../../Viewpoint.js\";import{JSONSupport as i}from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{t as r}from\"../../chunks/common.js\";import{i as n,t as a,r as p,a as h}from\"../../chunks/mat2d.js\";import{c}from\"../../chunks/mat2df32.js\";import{c as m}from\"../../chunks/mat2df64.js\";import{s as l,b as f,c as u,r as w,m as v}from\"../../chunks/mat3.js\";import{c as d}from\"../../chunks/mat3f32.js\";import{c as j,t as y}from\"../../chunks/vec2.js\";import{f as R}from\"../../chunks/vec2f32.js\";import{a as _}from\"../../chunks/vec2f64.js\";import{isVec2 as x}from\"../../core/libs/gl-matrix-2/types/vec2.js\";import{copy as z,getMatrix as g,getResolution as S,getExtent as k,getTransform as M,getTransformNoRotation as N,getWorldScreenWidth as T}from\"./viewpointUtils.js\";import b from\"../../geometry/Extent.js\";import D from\"../../geometry/Point.js\";var V;const G=[0,0];let O=V=class extends i{constructor(t){super(t),this._viewpoint2D={center:_(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new b,this.id=0,this.inverseTransform=m(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=m(),this.transformNoRotation=m(),this.displayMat3=d(),this.displayViewMat3=d(),this.viewMat3=d(),this.viewMat2d=c(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set(\"pixelRatio\",t),this._update()}set size(t){this._set(\"size\",t),this._update()}set viewpoint(t){if(t){const s=this._viewpoint2D,i=t.targetGeometry;s.center[0]=i.x,s.center[1]=i.y,s.rotation=t.rotation,s.scale=t.scale,s.spatialReference=i.spatialReference}this._update()}copy(t){const s=this.size,i=this.viewpoint;return i&&s?(this.viewpoint=z(i,t.viewpoint),this._set(\"size\",j(s,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set(\"size\",[t.size[0],t.size[1]])),this._set(\"pixelRatio\",t.pixelRatio),this}clone(){return new V({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,s,i){return x(s)?y(t,s,this.inverseTransform):(G[0]=s,G[1]=i,y(t,G,this.inverseTransform))}toScreen(t,s,i){return x(s)?y(t,s,this.transform):(G[0]=s,G[1]=i,y(t,G,this.transform))}toScreenNoRotation(t,s,i){return x(s)?y(t,s,this.transformNoRotation):(G[0]=s,G[1]=i,y(t,G,this.transformNoRotation))}getScreenTransform(t,s){const{center:i}=this._viewpoint2D,e=this._get(\"pixelRatio\")||1,o=this._get(\"size\");return g(t,i,o,s,0,e),t}_update(){const{center:t,spatialReference:i,scale:e,rotation:o}=this._viewpoint2D,c=this._get(\"pixelRatio\")||1,m=this._get(\"size\"),d=new s({targetGeometry:new D(t[0],t[1],i),scale:e,rotation:o});if(this._set(\"viewpoint\",d),!m||!i||!e)return;this.resolution=S(d),this.rotation=o,this.scale=e,this.spatialReference=i,j(this.center,t);const y=0!==m[0]?2/m[0]:0,_=0!==m[1]?-2/m[1]:0;l(this.displayMat3,y,0,0,0,_,0,-1,1,1);const x=f(this.viewMat3),z=R(m[0]/2,m[1]/2),g=R(-m[0]/2,-m[1]/2),b=r(o);u(x,x,z),w(x,x,b),u(x,x,g),v(this.displayViewMat3,this.displayMat3,x);const V=n(this.viewMat2d);return a(V,V,z),p(V,V,b),a(V,V,g),k(this.extent,d,m),M(this.transform,d,m,c),h(this.inverseTransform,this.transform),N(this.transformNoRotation,d,m,c),this.worldScreenWidth=T(this.spatialReference,this.resolution),this._set(\"id\",this.id+1),this}};t([e({readOnly:!0})],O.prototype,\"id\",void 0),t([e({value:1,json:{write:!0}})],O.prototype,\"pixelRatio\",null),t([e({json:{write:!0}})],O.prototype,\"size\",null),t([e({type:s,json:{write:!0}})],O.prototype,\"viewpoint\",null),O=V=t([o(\"esri.views.2d.ViewState\")],O);var W=O;export default W;\n"]},"metadata":{},"sourceType":"module"}