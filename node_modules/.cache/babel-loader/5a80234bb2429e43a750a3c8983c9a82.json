{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../../webgl/BufferObject.js\";\n\nclass t {\n  constructor(t, r, i) {\n    this._elementSize = r, this._buffer = e.createVertex(t, 35044), this.resize(i);\n  }\n\n  destroy() {\n    this._buffer.dispose();\n  }\n\n  get elementSize() {\n    return this._elementSize;\n  }\n\n  get capacity() {\n    return this._capacity;\n  }\n\n  get array() {\n    return this._array;\n  }\n\n  get buffer() {\n    return this._buffer;\n  }\n\n  get memoryUsage() {\n    return {\n      cpu: this._capacity * this._elementSize,\n      gpu: this._capacity * this._elementSize\n    };\n  }\n\n  copyRange(e, t, r, i = 0) {\n    const a = new Uint8Array(this.array, e * this.elementSize, (t - e) * this.elementSize);\n    new Uint8Array(r.array, i * this.elementSize).set(a);\n  }\n\n  transferAll() {\n    this._buffer.setData(this._array);\n  }\n\n  transferRange(e, t) {\n    const r = e * this._elementSize,\n          i = t * this._elementSize;\n\n    this._buffer.setSubData(this._array, r, r, i);\n  }\n\n  resize(e) {\n    const t = e * this._elementSize,\n          r = new ArrayBuffer(t);\n    this._array && (e >= this._capacity ? new Uint8Array(r).set(new Uint8Array(this._array)) : new Uint8Array(r).set(new Uint8Array(this._array).subarray(0, e * this._elementSize))), this._array = r, this._buffer.setData(t), this._capacity = e;\n  }\n\n}\n\nexport default t;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js"],"names":["e","t","constructor","r","i","_elementSize","_buffer","createVertex","resize","destroy","dispose","elementSize","capacity","_capacity","array","_array","buffer","memoryUsage","cpu","gpu","copyRange","a","Uint8Array","set","transferAll","setData","transferRange","setSubData","ArrayBuffer","subarray"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,mCAAb;;AAAiD,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACD,CAAD,EAAGE,CAAH,EAAKC,CAAL,EAAO;AAAC,SAAKC,YAAL,GAAkBF,CAAlB,EAAoB,KAAKG,OAAL,GAAaN,CAAC,CAACO,YAAF,CAAeN,CAAf,EAAiB,KAAjB,CAAjC,EAAyD,KAAKO,MAAL,CAAYJ,CAAZ,CAAzD;AAAwE;;AAAAK,EAAAA,OAAO,GAAE;AAAC,SAAKH,OAAL,CAAaI,OAAb;AAAuB;;AAAe,MAAXC,WAAW,GAAE;AAAC,WAAO,KAAKN,YAAZ;AAAyB;;AAAY,MAARO,QAAQ,GAAE;AAAC,WAAO,KAAKC,SAAZ;AAAsB;;AAAS,MAALC,KAAK,GAAE;AAAC,WAAO,KAAKC,MAAZ;AAAmB;;AAAU,MAANC,MAAM,GAAE;AAAC,WAAO,KAAKV,OAAZ;AAAoB;;AAAe,MAAXW,WAAW,GAAE;AAAC,WAAM;AAACC,MAAAA,GAAG,EAAC,KAAKL,SAAL,GAAe,KAAKR,YAAzB;AAAsCc,MAAAA,GAAG,EAAC,KAAKN,SAAL,GAAe,KAAKR;AAA9D,KAAN;AAAkF;;AAAAe,EAAAA,SAAS,CAACpB,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOC,CAAC,GAAC,CAAT,EAAW;AAAC,UAAMiB,CAAC,GAAC,IAAIC,UAAJ,CAAe,KAAKR,KAApB,EAA0Bd,CAAC,GAAC,KAAKW,WAAjC,EAA6C,CAACV,CAAC,GAACD,CAAH,IAAM,KAAKW,WAAxD,CAAR;AAA6E,QAAIW,UAAJ,CAAenB,CAAC,CAACW,KAAjB,EAAuBV,CAAC,GAAC,KAAKO,WAA9B,EAA2CY,GAA3C,CAA+CF,CAA/C;AAAkD;;AAAAG,EAAAA,WAAW,GAAE;AAAC,SAAKlB,OAAL,CAAamB,OAAb,CAAqB,KAAKV,MAA1B;AAAkC;;AAAAW,EAAAA,aAAa,CAAC1B,CAAD,EAAGC,CAAH,EAAK;AAAC,UAAME,CAAC,GAACH,CAAC,GAAC,KAAKK,YAAf;AAAA,UAA4BD,CAAC,GAACH,CAAC,GAAC,KAAKI,YAArC;;AAAkD,SAAKC,OAAL,CAAaqB,UAAb,CAAwB,KAAKZ,MAA7B,EAAoCZ,CAApC,EAAsCA,CAAtC,EAAwCC,CAAxC;AAA2C;;AAAAI,EAAAA,MAAM,CAACR,CAAD,EAAG;AAAC,UAAMC,CAAC,GAACD,CAAC,GAAC,KAAKK,YAAf;AAAA,UAA4BF,CAAC,GAAC,IAAIyB,WAAJ,CAAgB3B,CAAhB,CAA9B;AAAiD,SAAKc,MAAL,KAAcf,CAAC,IAAE,KAAKa,SAAR,GAAkB,IAAIS,UAAJ,CAAenB,CAAf,EAAkBoB,GAAlB,CAAsB,IAAID,UAAJ,CAAe,KAAKP,MAApB,CAAtB,CAAlB,GAAqE,IAAIO,UAAJ,CAAenB,CAAf,EAAkBoB,GAAlB,CAAsB,IAAID,UAAJ,CAAe,KAAKP,MAApB,EAA4Bc,QAA5B,CAAqC,CAArC,EAAuC7B,CAAC,GAAC,KAAKK,YAA9C,CAAtB,CAAnF,GAAuK,KAAKU,MAAL,GAAYZ,CAAnL,EAAqL,KAAKG,OAAL,CAAamB,OAAb,CAAqBxB,CAArB,CAArL,EAA6M,KAAKY,SAAL,GAAeb,CAA5N;AAA8N;;AAA97B;;AAA+7B,eAAeC,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../webgl/BufferObject.js\";class t{constructor(t,r,i){this._elementSize=r,this._buffer=e.createVertex(t,35044),this.resize(i)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get memoryUsage(){return{cpu:this._capacity*this._elementSize,gpu:this._capacity*this._elementSize}}copyRange(e,t,r,i=0){const a=new Uint8Array(this.array,e*this.elementSize,(t-e)*this.elementSize);new Uint8Array(r.array,i*this.elementSize).set(a)}transferAll(){this._buffer.setData(this._array)}transferRange(e,t){const r=e*this._elementSize,i=t*this._elementSize;this._buffer.setSubData(this._array,r,r,i)}resize(e){const t=e*this._elementSize,r=new ArrayBuffer(t);this._array&&(e>=this._capacity?new Uint8Array(r).set(new Uint8Array(this._array)):new Uint8Array(r).set(new Uint8Array(this._array).subarray(0,e*this._elementSize))),this._array=r,this._buffer.setData(t),this._capacity=e}}export default t;\n"]},"metadata":{},"sourceType":"module"}