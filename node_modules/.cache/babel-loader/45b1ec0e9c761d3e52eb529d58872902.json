{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../../layers/support/LOD.js\";\nimport i from \"../../../../layers/support/TileInfo.js\";\n\nclass t {\n  constructor(e, i) {\n    this.lockedSchemaPixelSize = e, this.isGCS = i;\n  }\n\n  getLevelRowColumn(e) {\n    return this.isGCS ? [e[0], e[1] >> 1, e[2] >> 1] : 256 === this.lockedSchemaPixelSize && e[0] > 0 ? [e[0] - 1, e[1] >> 1, e[2] >> 1] : e;\n  }\n\n  adjustLevel(e) {\n    return this.isGCS ? e : 256 === this.lockedSchemaPixelSize ? e > 0 ? e - 1 : 0 : e;\n  }\n\n  getShift(e, i) {\n    let t = 0,\n        s = 0;\n    return (256 === this.lockedSchemaPixelSize || this.isGCS) && (e[2] % 2 && (t = i), e[1] % 2 && (s = i)), [t, s];\n  }\n\n  getScale(e) {\n    if (this.isGCS) {\n      if (512 === this.lockedSchemaPixelSize) return 4;\n    } else if (256 === this.lockedSchemaPixelSize && 0 === e) return 1;\n\n    return 2;\n  }\n\n  static create256x256CompatibleTileInfo(t) {\n    if (!t) return null;\n    if (256 === t.size[0] && 256 === t.size[1]) return t;\n    const s = 256,\n          l = t.spatialReference.isGeographic,\n          r = [],\n          o = t.lods.length;\n\n    for (let i = 0; i < o; i++) {\n      const s = t.lods[i],\n            o = l ? s.resolution : 2 * s.resolution;\n      r.push(new e({\n        level: s.level,\n        scale: s.scale,\n        resolution: o\n      }));\n    }\n\n    return new i({\n      size: [s, s],\n      dpi: t.dpi,\n      format: t.format,\n      compressionQuality: t.compressionQuality,\n      origin: t.origin,\n      spatialReference: t.spatialReference,\n      lods: r\n    });\n  }\n\n  static create512x512CompatibleTileInfo(t) {\n    if (!t) return null;\n    if (256 === t.size[0] || 256 === t.size[1]) return null;\n    const s = 512,\n          l = [],\n          r = t.lods.length;\n\n    for (let i = 0; i < r; i++) {\n      const s = t.lods[i],\n            r = .5 * s.resolution;\n      l.push(new e({\n        level: s.level,\n        scale: s.scale,\n        resolution: r\n      }));\n    }\n\n    return new i({\n      size: [s, s],\n      dpi: t.dpi,\n      format: t.format,\n      compressionQuality: t.compressionQuality,\n      origin: t.origin,\n      spatialReference: t.spatialReference,\n      lods: l\n    });\n  }\n\n}\n\nexport default t;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/vectorTiles/SchemaHelper.js"],"names":["e","i","t","constructor","lockedSchemaPixelSize","isGCS","getLevelRowColumn","adjustLevel","getShift","s","getScale","create256x256CompatibleTileInfo","size","l","spatialReference","isGeographic","r","o","lods","length","resolution","push","level","scale","dpi","format","compressionQuality","origin","create512x512CompatibleTileInfo"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../layers/support/LOD.js\";import i from\"../../../../layers/support/TileInfo.js\";class t{constructor(e,i){this.lockedSchemaPixelSize=e,this.isGCS=i}getLevelRowColumn(e){return this.isGCS?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e}adjustLevel(e){return this.isGCS?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e}getShift(e,i){let t=0,s=0;return(256===this.lockedSchemaPixelSize||this.isGCS)&&(e[2]%2&&(t=i),e[1]%2&&(s=i)),[t,s]}getScale(e){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===e)return 1;return 2}static create256x256CompatibleTileInfo(t){if(!t)return null;if(256===t.size[0]&&256===t.size[1])return t;const s=256,l=t.spatialReference.isGeographic,r=[],o=t.lods.length;for(let i=0;i<o;i++){const s=t.lods[i],o=l?s.resolution:2*s.resolution;r.push(new e({level:s.level,scale:s.scale,resolution:o}))}return new i({size:[s,s],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:r})}static create512x512CompatibleTileInfo(t){if(!t)return null;if(256===t.size[0]||256===t.size[1])return null;const s=512,l=[],r=t.lods.length;for(let i=0;i<r;i++){const s=t.lods[i],r=.5*s.resolution;l.push(new e({level:s.level,scale:s.scale,resolution:r}))}return new i({size:[s,s],dpi:t.dpi,format:t.format,compressionQuality:t.compressionQuality,origin:t.origin,spatialReference:t.spatialReference,lods:l})}}export default t;\n"]},"metadata":{},"sourceType":"module"}