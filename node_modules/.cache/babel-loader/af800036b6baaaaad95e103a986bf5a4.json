{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { indexOf as t, PositionHint as i } from \"../../arrayUtils.js\";\nimport { assumeNonNull as n } from \"../../maybe.js\";\nimport e from \"../../PooledArray.js\";\nimport { q as s } from \"../../../chunks/quickselect.js\";\n\nclass h {\n  constructor(t = 9, i) {\n    this.compareMinX = l, this.compareMinY = c, this.toBBox = function (t) {\n      return t;\n    }, this._maxEntries = Math.max(4, t || 9), this._minEntries = Math.max(2, Math.ceil(.4 * this._maxEntries)), i && (\"function\" == typeof i ? this.toBBox = i : this._initFormat(i)), this.clear();\n  }\n\n  destroy() {\n    this.clear(), M.prune(), X.prune(), Y.prune(), B.prune();\n  }\n\n  all(t) {\n    this._all(this.data, t);\n  }\n\n  search(t, i) {\n    let n = this.data;\n    const e = this.toBBox;\n    if (p(t, n)) for (M.clear(); n;) {\n      for (let s = 0, h = n.children.length; s < h; s++) {\n        const h = n.children[s],\n              a = n.leaf ? e(h) : h;\n        p(t, a) && (n.leaf ? i(h) : x(t, a) ? this._all(h, i) : M.push(h));\n      }\n\n      n = M.pop();\n    }\n  }\n\n  collides(t) {\n    let i = this.data;\n    const n = this.toBBox;\n    if (!p(t, i)) return !1;\n\n    for (M.clear(); i;) {\n      for (let e = 0, s = i.children.length; e < s; e++) {\n        const s = i.children[e],\n              h = i.leaf ? n(s) : s;\n\n        if (p(t, h)) {\n          if (i.leaf || x(t, h)) return !0;\n          M.push(s);\n        }\n      }\n\n      i = M.pop();\n    }\n\n    return !1;\n  }\n\n  load(t) {\n    if (!t.length) return this;\n\n    if (t.length < this._minEntries) {\n      for (let i = 0, n = t.length; i < n; i++) this.insert(t[i]);\n\n      return this;\n    }\n\n    let i = this._build(t.slice(0, t.length), 0, t.length - 1, 0);\n\n    if (this.data.children.length) {\n      if (this.data.height === i.height) this._splitRoot(this.data, i);else {\n        if (this.data.height < i.height) {\n          const t = this.data;\n          this.data = i, i = t;\n        }\n\n        this._insert(i, this.data.height - i.height - 1, !0);\n      }\n    } else this.data = i;\n    return this;\n  }\n\n  insert(t) {\n    return t && this._insert(t, this.data.height - 1), this;\n  }\n\n  clear() {\n    return this.data = new b([]), this;\n  }\n\n  remove(i) {\n    if (!i) return this;\n    let e,\n        s = this.data,\n        h = null,\n        a = 0,\n        r = !1;\n    const o = this.toBBox(i);\n\n    for (Y.clear(), B.clear(); s || Y.length > 0;) {\n      var l;\n      if (!s) s = n(Y.pop()), h = Y.data[Y.length - 1], a = null != (l = B.pop()) ? l : 0, r = !0;\n      if (s.leaf && (e = t(s.children, i, s.children.length, s.indexHint), -1 !== e)) return s.children.splice(e, 1), Y.push(s), this._condense(Y), this;\n      r || s.leaf || !x(s, o) ? h ? (a++, s = h.children[a], r = !1) : s = null : (Y.push(s), B.push(a), a = 0, h = s, s = s.children[0]);\n    }\n\n    return this;\n  }\n\n  toJSON() {\n    return this.data;\n  }\n\n  fromJSON(t) {\n    return this.data = t, this;\n  }\n\n  _all(t, i) {\n    let n = t;\n\n    for (X.clear(); n;) {\n      var e;\n      if (!0 === n.leaf) for (const t of n.children) i(t);else X.pushArray(n.children);\n      n = null != (e = X.pop()) ? e : null;\n    }\n  }\n\n  _build(t, i, n, e) {\n    const s = n - i + 1;\n    let h = this._maxEntries;\n\n    if (s <= h) {\n      const e = new b(t.slice(i, n + 1));\n      return a(e, this.toBBox), e;\n    }\n\n    e || (e = Math.ceil(Math.log(s) / Math.log(h)), h = Math.ceil(s / h ** (e - 1)));\n    const r = new j([]);\n    r.height = e;\n    const o = Math.ceil(s / h),\n          l = o * Math.ceil(Math.sqrt(h));\n    g(t, i, n, l, this.compareMinX);\n\n    for (let a = i; a <= n; a += l) {\n      const i = Math.min(a + l - 1, n);\n      g(t, a, i, o, this.compareMinY);\n\n      for (let n = a; n <= i; n += o) {\n        const s = Math.min(n + o - 1, i);\n        r.children.push(this._build(t, n, s, e - 1));\n      }\n    }\n\n    return a(r, this.toBBox), r;\n  }\n\n  _chooseSubtree(t, i, n, e) {\n    for (; e.push(i), !0 !== i.leaf && e.length - 1 !== n;) {\n      let n,\n          e = 1 / 0,\n          s = 1 / 0;\n\n      for (let h = 0, a = i.children.length; h < a; h++) {\n        const a = i.children[h],\n              r = m(a),\n              o = d(t, a) - r;\n        o < s ? (s = o, e = r < e ? r : e, n = a) : o === s && r < e && (e = r, n = a);\n      }\n\n      i = n || i.children[0];\n    }\n\n    return i;\n  }\n\n  _insert(t, i, n) {\n    const e = this.toBBox,\n          s = n ? t : e(t);\n    Y.clear();\n\n    const h = this._chooseSubtree(s, this.data, i, Y);\n\n    for (h.children.push(t), o(h, s); i >= 0 && Y.data[i].children.length > this._maxEntries;) this._split(Y, i), i--;\n\n    this._adjustParentBBoxes(s, Y, i);\n  }\n\n  _split(t, i) {\n    const n = t.data[i],\n          e = n.children.length,\n          s = this._minEntries;\n\n    this._chooseSplitAxis(n, s, e);\n\n    const h = this._chooseSplitIndex(n, s, e);\n\n    if (!h) return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");\n    const r = n.children.splice(h, n.children.length - h),\n          o = n.leaf ? new b(r) : new j(r);\n    o.height = n.height, a(n, this.toBBox), a(o, this.toBBox), i ? t.data[i - 1].children.push(o) : this._splitRoot(n, o);\n  }\n\n  _splitRoot(t, i) {\n    this.data = new j([t, i]), this.data.height = t.height + 1, a(this.data, this.toBBox);\n  }\n\n  _chooseSplitIndex(t, i, n) {\n    let e, s, h;\n    e = s = 1 / 0;\n\n    for (let a = i; a <= n - i; a++) {\n      const i = r(t, 0, a, this.toBBox),\n            o = r(t, a, n, this.toBBox),\n            l = f(i, o),\n            c = m(i) + m(o);\n      l < e ? (e = l, h = a, s = c < s ? c : s) : l === e && c < s && (s = c, h = a);\n    }\n\n    return h;\n  }\n\n  _chooseSplitAxis(t, i, n) {\n    const e = t.leaf ? this.compareMinX : l,\n          s = t.leaf ? this.compareMinY : c;\n    this._allDistMargin(t, i, n, e) < this._allDistMargin(t, i, n, s) && t.children.sort(e);\n  }\n\n  _allDistMargin(t, i, n, e) {\n    t.children.sort(e);\n    const s = this.toBBox,\n          h = r(t, 0, i, s),\n          a = r(t, n - i, n, s);\n    let l = u(h) + u(a);\n\n    for (let r = i; r < n - i; r++) {\n      const i = t.children[r];\n      o(h, t.leaf ? s(i) : i), l += u(h);\n    }\n\n    for (let r = n - i - 1; r >= i; r--) {\n      const i = t.children[r];\n      o(a, t.leaf ? s(i) : i), l += u(a);\n    }\n\n    return l;\n  }\n\n  _adjustParentBBoxes(t, i, n) {\n    for (let e = n; e >= 0; e--) o(i.data[e], t);\n  }\n\n  _condense(i) {\n    for (let n = i.length - 1; n >= 0; n--) {\n      const e = i.data[n];\n      if (0 === e.children.length) {\n        if (n > 0) {\n          const s = i.data[n - 1],\n                h = s.children;\n          h.splice(t(h, e, h.length, s.indexHint), 1);\n        } else this.clear();\n      } else a(e, this.toBBox);\n    }\n  }\n\n  _initFormat(t) {\n    const i = [\"return a\", \" - b\", \";\"];\n    this.compareMinX = new Function(\"a\", \"b\", i.join(t[0])), this.compareMinY = new Function(\"a\", \"b\", i.join(t[1])), this.toBBox = new Function(\"a\", \"return {minX: a\" + t[0] + \", minY: a\" + t[1] + \", maxX: a\" + t[2] + \", maxY: a\" + t[3] + \"};\");\n  }\n\n}\n\nfunction a(t, i) {\n  r(t, 0, t.children.length, i, t);\n}\n\nfunction r(t, i, n, e, s) {\n  s || (s = new b([])), s.minX = 1 / 0, s.minY = 1 / 0, s.maxX = -1 / 0, s.maxY = -1 / 0;\n\n  for (let h, a = i; a < n; a++) h = t.children[a], o(s, t.leaf ? e(h) : h);\n\n  return s;\n}\n\nfunction o(t, i) {\n  t.minX = Math.min(t.minX, i.minX), t.minY = Math.min(t.minY, i.minY), t.maxX = Math.max(t.maxX, i.maxX), t.maxY = Math.max(t.maxY, i.maxY);\n}\n\nfunction l(t, i) {\n  return t.minX - i.minX;\n}\n\nfunction c(t, i) {\n  return t.minY - i.minY;\n}\n\nfunction m(t) {\n  return (t.maxX - t.minX) * (t.maxY - t.minY);\n}\n\nfunction u(t) {\n  return t.maxX - t.minX + (t.maxY - t.minY);\n}\n\nfunction d(t, i) {\n  return (Math.max(i.maxX, t.maxX) - Math.min(i.minX, t.minX)) * (Math.max(i.maxY, t.maxY) - Math.min(i.minY, t.minY));\n}\n\nfunction f(t, i) {\n  const n = Math.max(t.minX, i.minX),\n        e = Math.max(t.minY, i.minY),\n        s = Math.min(t.maxX, i.maxX),\n        h = Math.min(t.maxY, i.maxY);\n  return Math.max(0, s - n) * Math.max(0, h - e);\n}\n\nfunction x(t, i) {\n  return t.minX <= i.minX && t.minY <= i.minY && i.maxX <= t.maxX && i.maxY <= t.maxY;\n}\n\nfunction p(t, i) {\n  return i.minX <= t.maxX && i.minY <= t.maxY && i.maxX >= t.minX && i.maxY >= t.minY;\n}\n\nfunction g(t, i, e, h, a) {\n  const r = [i, e];\n\n  for (; r.length;) {\n    const i = n(r.pop()),\n          e = n(r.pop());\n    if (i - e <= h) continue;\n    const o = e + Math.ceil((i - e) / h / 2) * h;\n    s(t, o, e, i, a), r.push(e, o, o, i);\n  }\n}\n\nconst M = new e(),\n      X = new e(),\n      Y = new e(),\n      B = new e({\n  deallocator: void 0\n});\n\nclass _ {\n  constructor() {\n    this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0;\n  }\n\n}\n\nclass w extends _ {\n  constructor() {\n    super(...arguments), this.height = 1, this.indexHint = new i();\n  }\n\n}\n\nclass b extends w {\n  constructor(t) {\n    super(), this.children = t, this.leaf = !0;\n  }\n\n}\n\nclass j extends w {\n  constructor(t) {\n    super(), this.children = t, this.leaf = !1;\n  }\n\n}\n\nexport default h;\nexport { _ as BBox, h as PooledRBush };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"],"names":["indexOf","t","PositionHint","i","assumeNonNull","n","e","q","s","h","constructor","compareMinX","l","compareMinY","c","toBBox","_maxEntries","Math","max","_minEntries","ceil","_initFormat","clear","destroy","M","prune","X","Y","B","all","_all","data","search","p","children","length","a","leaf","x","push","pop","collides","load","insert","_build","slice","height","_splitRoot","_insert","b","remove","r","o","indexHint","splice","_condense","toJSON","fromJSON","pushArray","log","j","sqrt","g","min","_chooseSubtree","m","d","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","f","_allDistMargin","sort","u","Function","join","minX","minY","maxX","maxY","deallocator","_","w","arguments","BBox","PooledRBush"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),M.prune(),X.prune(),Y.prune(),B.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this.toBBox;if(p(t,n))for(M.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):x(t,a)?this._all(h,i):M.push(h))}n=M.pop()}}collides(t){let i=this.data;const n=this.toBBox;if(!p(t,i))return!1;for(M.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||x(t,h))return!0;M.push(s)}}i=M.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this.toBBox(i);for(Y.clear(),B.clear();s||Y.length>0;){var l;if(!s)s=n(Y.pop()),h=Y.data[Y.length-1],a=null!=(l=B.pop())?l:0,r=!0;if(s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),Y.push(s),this._condense(Y),this;r||s.leaf||!x(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(Y.push(s),B.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(X.clear();n;){var e;if(!0===n.leaf)for(const t of n.children)i(t);else X.pushArray(n.children);n=null!=(e=X.pop())?e:null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this.toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));g(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);g(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this.toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this.toBBox,s=n?t:e(t);Y.clear();const h=this._chooseSubtree(s,this.data,i,Y);for(h.children.push(t),o(h,s);i>=0&&Y.data[i].children.length>this._maxEntries;)this._split(Y,i),i--;this._adjustParentBBoxes(s,Y,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this.toBBox),a(o,this.toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this.toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this.toBBox),o=r(t,a,n,this.toBBox),l=f(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this.toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=u(h)+u(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=u(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=u(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this.toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this.toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function f(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function x(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function g(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const M=new e,X=new e,Y=new e,B=new e({deallocator:void 0});class _{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends _{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export default h;export{_ as BBox,h as PooledRBush};\n"]},"metadata":{},"sourceType":"module"}