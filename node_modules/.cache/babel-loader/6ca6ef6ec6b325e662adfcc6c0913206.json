{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport t from \"../../../core/Logger.js\";\nimport { unwrap as r } from \"../../../core/maybe.js\";\nimport { throwIfAborted as s, createTask as a, isAbortError as i } from \"../../../core/promiseUtils.js\";\nimport { equals as n, WGS84 as o } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { convertFromGeometry as u, convertToGeometry as p } from \"../featureConversionUtils.js\";\nimport h from \"../data/FeatureStore.js\";\nimport { project as y, checkProjectionSupport as l } from \"../data/projectionSupport.js\";\nimport m from \"../data/QueryEngine.js\";\nimport { validateGeoJSON as c, createOptimizedFeatures as g } from \"./geojson/geojson.js\";\nimport { mixAttributes as _ } from \"./support/sourceUtils.js\";\nimport { getFeature as f } from \"../../ogc/wfsUtils.js\";\nimport d from \"../../support/FieldsIndex.js\";\n\nclass w {\n  constructor() {\n    this._queryEngine = null, this._customParameters = null, this._snapshotFeatures = async e => {\n      const {\n        objectIdField: t\n      } = this._queryEngine,\n            r = await f(this._getFeatureUrl, this._featureType.typeName, this._getFeatureOutputFormat, {\n        customParameters: this._customParameters,\n        dateFields: this._queryEngine.fieldsIndex.dateFields.map(e => e.name),\n        signal: e\n      });\n      await c(r), s(e);\n      const a = g(r, {\n        geometryType: this._queryEngine.geometryType,\n        hasZ: !1,\n        objectIdField: t\n      });\n      if (!n(this._queryEngine.spatialReference, o)) for (const s of a) s.geometry && (s.geometry = u(y(p(s.geometry, this._queryEngine.geometryType, !1, !1), o, this._queryEngine.spatialReference)));\n      let i = 1;\n\n      for (const s of a) {\n        const e = {};\n        _(this._fieldsIndex, e, s.attributes, null, !0), s.attributes = e, null == s.attributes[t] && (s.objectId = s.attributes[t] = i++);\n      }\n\n      return a;\n    };\n  }\n\n  destroy() {\n    var e;\n    null == (e = this._queryEngine) || e.destroy(), this._queryEngine = null;\n  }\n\n  async load(e, t) {\n    const {\n      getFeatureUrl: a,\n      getFeatureOutputFormat: i,\n      spatialReference: n,\n      fields: o,\n      geometryType: u,\n      featureType: p,\n      objectIdField: y,\n      customParameters: l\n    } = e;\n    this._featureType = p, this._customParameters = l, this._getFeatureUrl = a, this._getFeatureOutputFormat = i, this._fieldsIndex = new d(o), await this._checkProjection(n), s(t), this._queryEngine = new m({\n      fields: o,\n      geometryType: u,\n      hasM: !1,\n      hasZ: !1,\n      objectIdField: y,\n      spatialReference: n,\n      timeInfo: null,\n      featureStore: new h({\n        geometryType: u,\n        hasM: !1,\n        hasZ: !1\n      })\n    });\n    const c = await this._snapshotFeatures(r(t.signal));\n    return this._queryEngine.featureStore.addMany(c), {\n      extent: this._queryEngine.fullExtent\n    };\n  }\n\n  async applyEdits() {\n    throw new e(\"wfs-source:editing-not-supported\", \"applyEdits() is not supported on WFSLayer\");\n  }\n\n  async queryFeatures(e = {}, t = {}) {\n    return await this._waitSnapshotComplete(), this._queryEngine.executeQuery(e, t.signal);\n  }\n\n  async queryFeatureCount(e = {}, t = {}) {\n    return await this._waitSnapshotComplete(), this._queryEngine.executeQueryForCount(e, t.signal);\n  }\n\n  async queryObjectIds(e = {}, t = {}) {\n    return await this._waitSnapshotComplete(), this._queryEngine.executeQueryForIds(e, t.signal);\n  }\n\n  async queryExtent(e = {}, t = {}) {\n    return await this._waitSnapshotComplete(), this._queryEngine.executeQueryForExtent(e, t.signal);\n  }\n\n  async querySnapping(e, t = {}) {\n    return await this._waitSnapshotComplete(), this._queryEngine.executeQueryForSnapping(e, t.signal);\n  }\n\n  setCustomParameters(e) {\n    this._customParameters = e;\n  }\n\n  async refresh() {\n    var r;\n    return null == (r = this._snapshotTask) || r.abort(), this._snapshotTask = a(this._snapshotFeatures), this._snapshotTask.promise.then(e => {\n      this._queryEngine.featureStore.clear(), e && this._queryEngine.featureStore.addMany(e);\n    }, r => {\n      this._queryEngine.featureStore.clear(), i(r) || t.getLogger(\"esri.layers.WFSLayer\").error(new e(\"wfs-layer:getfeature-error\", \"An error occurred during the GetFeature request\", {\n        error: r\n      }));\n    }), await this._waitSnapshotComplete(), {\n      extent: this._queryEngine.fullExtent\n    };\n  }\n\n  async _waitSnapshotComplete() {\n    if (this._snapshotTask && !this._snapshotTask.finished) {\n      try {\n        await this._snapshotTask.promise;\n      } catch {}\n\n      return this._waitSnapshotComplete();\n    }\n  }\n\n  async _checkProjection(t) {\n    try {\n      await l(o, t);\n    } catch {\n      throw new e(\"unsupported-projection\", \"Projection not supported\", {\n        spatialReference: t\n      });\n    }\n  }\n\n}\n\nexport default w;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js"],"names":["e","t","unwrap","r","throwIfAborted","s","createTask","a","isAbortError","i","equals","n","WGS84","o","convertFromGeometry","u","convertToGeometry","p","h","project","y","checkProjectionSupport","l","m","validateGeoJSON","c","createOptimizedFeatures","g","mixAttributes","_","getFeature","f","d","w","constructor","_queryEngine","_customParameters","_snapshotFeatures","objectIdField","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","name","signal","geometryType","hasZ","spatialReference","geometry","_fieldsIndex","attributes","objectId","destroy","load","getFeatureUrl","getFeatureOutputFormat","fields","featureType","_checkProjection","hasM","timeInfo","featureStore","addMany","extent","fullExtent","applyEdits","queryFeatures","_waitSnapshotComplete","executeQuery","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","setCustomParameters","refresh","_snapshotTask","abort","promise","then","clear","getLogger","error","finished"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Logger.js\";import{unwrap as r}from\"../../../core/maybe.js\";import{throwIfAborted as s,createTask as a,isAbortError as i}from\"../../../core/promiseUtils.js\";import{equals as n,WGS84 as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as u,convertToGeometry as p}from\"../featureConversionUtils.js\";import h from\"../data/FeatureStore.js\";import{project as y,checkProjectionSupport as l}from\"../data/projectionSupport.js\";import m from\"../data/QueryEngine.js\";import{validateGeoJSON as c,createOptimizedFeatures as g}from\"./geojson/geojson.js\";import{mixAttributes as _}from\"./support/sourceUtils.js\";import{getFeature as f}from\"../../ogc/wfsUtils.js\";import d from\"../../support/FieldsIndex.js\";class w{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await f(this._getFeatureUrl,this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await c(r),s(e);const a=g(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!n(this._queryEngine.spatialReference,o))for(const s of a)s.geometry&&(s.geometry=u(y(p(s.geometry,this._queryEngine.geometryType,!1,!1),o,this._queryEngine.spatialReference)));let i=1;for(const s of a){const e={};_(this._fieldsIndex,e,s.attributes,null,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=i++)}return a}}destroy(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:a,getFeatureOutputFormat:i,spatialReference:n,fields:o,geometryType:u,featureType:p,objectIdField:y,customParameters:l}=e;this._featureType=p,this._customParameters=l,this._getFeatureUrl=a,this._getFeatureOutputFormat=i,this._fieldsIndex=new d(o),await this._checkProjection(n),s(t),this._queryEngine=new m({fields:o,geometryType:u,hasM:!1,hasZ:!1,objectIdField:y,spatialReference:n,timeInfo:null,featureStore:new h({geometryType:u,hasM:!1,hasZ:!1})});const c=await this._snapshotFeatures(r(t.signal));return this._queryEngine.featureStore.addMany(c),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new e(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}setCustomParameters(e){this._customParameters=e}async refresh(){var r;return null==(r=this._snapshotTask)||r.abort(),this._snapshotTask=a(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(r=>{this._queryEngine.featureStore.clear(),i(r)||t.getLogger(\"esri.layers.WFSLayer\").error(new e(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:r}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(t){try{await l(o,t)}catch{throw new e(\"unsupported-projection\",\"Projection not supported\",{spatialReference:t})}}}export default w;\n"]},"metadata":{},"sourceType":"module"}