{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../core/Error.js\";\nimport o from \"../core/Loadable.js\";\nimport r from \"../core/Logger.js\";\nimport { isNone as n, isSome as s } from \"../core/maybe.js\";\nimport { EsriPromiseMixin as i } from \"../core/Promise.js\";\nimport { whenOrAbort as a } from \"../core/promiseUtils.js\";\nimport { property as l } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { subclass as p } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { f as c, c as m } from \"../chunks/vec3f64.js\";\nimport h from \"./Extent.js\";\nimport u from \"./Geometry.js\";\nimport f from \"./Point.js\";\nimport d from \"./Polygon.js\";\nimport { fromAxisAndAngle as x, compose as y, create as g } from \"./support/axisAngleDegrees.js\";\nimport b from \"./support/MeshComponent.js\";\nimport j from \"./support/MeshTransform.js\";\nimport { MeshVertexAttributes as v } from \"./support/MeshVertexAttributes.js\";\nimport { triangulate as w } from \"./support/triangulationUtils.js\";\nimport { centerAt as M } from \"./support/meshUtils/centerAt.js\";\nimport { loadExternal as P } from \"./support/meshUtils/loadExternal.js\";\nimport { offset as R } from \"./support/meshUtils/offset.js\";\nimport { convertUnitGeometry as A, createUnitSizeBox as F, extractSingleFaceOfBox as z, createUnitSizeSphere as C, createUnitSizeCylinder as O, createUnitSizePlane as L } from \"./support/meshUtils/primitives.js\";\nimport { rotate as U } from \"./support/meshUtils/rotate.js\";\nimport { scale as T } from \"./support/meshUtils/scale.js\";\nvar E;\nconst G = r.getLogger(\"esri.geometry.Mesh\");\nlet S = E = class extends o.LoadableMixin(i(u)) {\n  constructor(e) {\n    super(e), this.components = null, this.transform = null, this.external = null, this.hasZ = !0, this.hasM = !1, this.vertexAttributes = new v(), this.type = \"mesh\";\n  }\n\n  initialize() {\n    (n(this.external) || this.vertexAttributes.position.length) && (this.loadStatus = \"loaded\");\n  }\n\n  get hasExtent() {\n    return !this.loaded && s(this.external) && s(this.external.extent) || this.loaded && this.vertexAttributes.position.length > 0 && (!this.components || this.components.length > 0);\n  }\n\n  get boundingInfo() {\n    const e = this.vertexAttributes.position,\n          t = this.spatialReference;\n    if (0 === e.length || this.components && 0 === this.components.length) return {\n      extent: new h({\n        xmin: 0,\n        ymin: 0,\n        zmin: 0,\n        xmax: 0,\n        ymax: 0,\n        zmax: 0,\n        spatialReference: t\n      }),\n      center: new f({\n        x: 0,\n        y: 0,\n        z: 0,\n        spatialReference: t\n      })\n    };\n    const o = s(this.transform) ? this.transform.project(e, t) : e;\n    let r = 1 / 0,\n        n = 1 / 0,\n        i = 1 / 0,\n        a = -1 / 0,\n        l = -1 / 0,\n        p = -1 / 0,\n        c = 0,\n        m = 0,\n        u = 0;\n    const d = o.length,\n          x = 1 / (d / 3);\n    let y = 0;\n\n    for (; y < d;) {\n      const e = o[y++],\n            t = o[y++],\n            s = o[y++];\n      r = Math.min(r, e), n = Math.min(n, t), i = Math.min(i, s), a = Math.max(a, e), l = Math.max(l, t), p = Math.max(p, s), c += x * e, m += x * t, u += x * s;\n    }\n\n    return {\n      extent: new h({\n        xmin: r,\n        ymin: n,\n        zmin: i,\n        xmax: a,\n        ymax: l,\n        zmax: p,\n        spatialReference: t\n      }),\n      center: new f({\n        x: c,\n        y: m,\n        z: u,\n        spatialReference: t\n      })\n    };\n  }\n\n  get anchor() {\n    if (s(this.transform)) return this.transform.getOriginPoint(this.spatialReference);\n    const e = this.boundingInfo;\n    return new f({\n      x: e.center.x,\n      y: e.center.y,\n      z: e.extent.zmin,\n      spatialReference: this.spatialReference\n    });\n  }\n\n  get origin() {\n    return s(this.transform) ? this.transform.getOriginPoint(this.spatialReference) : this.boundingInfo.center;\n  }\n\n  get extent() {\n    return !this.loaded && s(this.external) && s(this.external.extent) ? this.external.extent.clone() : this.boundingInfo.extent;\n  }\n\n  addComponent(e) {\n    this.loaded ? (this.components || (this.components = []), this.components.push(b.from(e)), this.notifyChange(\"components\")) : G.error(\"addComponent()\", \"Mesh must be loaded before applying operations\");\n  }\n\n  removeComponent(e) {\n    if (this.loaded) {\n      if (this.components) {\n        const t = this.components.indexOf(e);\n        if (-1 !== t) return this.components.splice(t, 1), void this.notifyChange(\"components\");\n      }\n\n      G.error(\"removeComponent()\", \"Provided component is not part of the list of components\");\n    } else G.error(\"removeComponent()\", \"Mesh must be loaded before applying operations\");\n  }\n\n  rotate(e, t, o, r) {\n    return x(I.x, e, B), x(I.y, t, k), x(I.z, o, D), y(B, k, B), y(B, D, B), U(this, B, r), this;\n  }\n\n  offset(e, t, o, r) {\n    return this.loaded ? (W[0] = e, W[1] = t, W[2] = o, R(this, W, r), this) : (G.error(\"offset()\", \"Mesh must be loaded before applying operations\"), this);\n  }\n\n  scale(e, t) {\n    return this.loaded ? (T(this, e, t), this) : (G.error(\"scale()\", \"Mesh must be loaded before applying operations\"), this);\n  }\n\n  centerAt(e, t) {\n    return this.loaded ? (M(this, e, t), this) : (G.error(\"centerAt()\", \"Mesh must be loaded before applying operations\"), this);\n  }\n\n  load(e) {\n    return s(this.external) && this.addResolvingPromise(P(this, this.external.source, e)), Promise.resolve(this);\n  }\n\n  clone() {\n    const e = this.components ? new Map() : null,\n          t = this.components ? new Map() : null,\n          o = {\n      components: this.components ? this.components.map(o => o.cloneWithDeduplication(e, t)) : null,\n      spatialReference: this.spatialReference,\n      vertexAttributes: this.vertexAttributes.clone(),\n      transform: s(this.transform) ? this.transform.clone() : null,\n      external: s(this.external) ? {\n        source: this.external.source,\n        extent: s(this.external.extent) ? this.external.extent.clone() : null\n      } : null\n    };\n    return new E(o);\n  }\n\n  vertexAttributesChanged() {\n    this.notifyChange(\"vertexAttributes\");\n  }\n\n  async toBinaryGLTF(e) {\n    const {\n      toBinaryGLTF: t\n    } = await import(\"./support/meshUtils/exporters/gltf/gltfexport.js\");\n    return t(this, e);\n  }\n\n  static createBox(e, t) {\n    if (!(e instanceof f)) return G.error(\".createBox()\", \"expected location to be a Point instance\"), null;\n    const o = new E(A(F(), e, t));\n    return t && t.imageFace && \"all\" !== t.imageFace ? z(o, t.imageFace) : o;\n  }\n\n  static createSphere(e, t) {\n    return e instanceof f ? new E(A(C(t && t.densificationFactor || 0), e, t)) : (G.error(\".createSphere()\", \"expected location to be a Point instance\"), null);\n  }\n\n  static createCylinder(e, t) {\n    return e instanceof f ? new E(A(O(t && t.densificationFactor || 0), e, t)) : (G.error(\".createCylinder()\", \"expected location to be a Point instance\"), null);\n  }\n\n  static createPlane(e, t) {\n    return e instanceof f ? new E(A(L(t && t.facing || \"up\"), e, t)) : (G.error(\".createPlane()\", \"expected location to be a Point instance\"), null);\n  }\n\n  static createFromPolygon(e, t) {\n    if (!(e instanceof d)) return G.error(\".createFromPolygon()\", \"expected polygon to be a Polygon instance\"), null;\n    const o = w(e);\n    return new E({\n      vertexAttributes: new v({\n        position: o.position\n      }),\n      components: [new b({\n        faces: o.faces,\n        shading: \"flat\",\n        material: t && t.material || null\n      })],\n      spatialReference: e.spatialReference\n    });\n  }\n\n  static async createFromGLTF(e, o, r) {\n    if (!(e instanceof f)) throw G.error(\".createfromGLTF()\", \"expected location to be a Point instance\"), new t(\"invalid-input\", \"Expected location to be a Point instance\");\n    const {\n      loadGLTFMesh: n\n    } = await a(import(\"./support/meshUtils/loadGLTFMesh.js\"), r);\n    return new E(await n(e, o, r));\n  }\n\n  static createWithExternalSource(e, t, o) {\n    var r, n, s;\n    const i = null != (r = null == o ? void 0 : o.extent) ? r : null,\n          a = null != (n = null == o ? void 0 : o.transform.clone()) ? n : new j();\n    a.origin = [e.x, e.y, null != (s = e.z) ? s : 0];\n    const l = e.spatialReference;\n    return new E({\n      external: {\n        source: t,\n        extent: i\n      },\n      transform: a,\n      spatialReference: l\n    });\n  }\n\n  static createIncomplete(e, o) {\n    var r, n;\n    const s = null != (r = null == o ? void 0 : o.transform.clone()) ? r : new j();\n    s.origin = [e.x, e.y, null != (n = e.z) ? n : 0];\n    const i = e.spatialReference,\n          a = new E({\n      transform: s,\n      spatialReference: i\n    });\n    return a.addResolvingPromise(Promise.reject(new t(\"mesh-incomplete\", \"Mesh resources are not complete\"))), a;\n  }\n\n};\ne([l({\n  type: [b],\n  json: {\n    write: !0\n  }\n})], S.prototype, \"components\", void 0), e([l({\n  type: j,\n  json: {\n    write: !0\n  }\n})], S.prototype, \"transform\", void 0), e([l({\n  constructOnly: !0\n})], S.prototype, \"external\", void 0), e([l({\n  readOnly: !0\n})], S.prototype, \"hasExtent\", null), e([l({\n  readOnly: !0\n})], S.prototype, \"boundingInfo\", null), e([l({\n  readOnly: !0\n})], S.prototype, \"anchor\", null), e([l({\n  readOnly: !0\n})], S.prototype, \"origin\", null), e([l({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], S.prototype, \"extent\", null), e([l({\n  readOnly: !0,\n  json: {\n    read: !1,\n    write: !0,\n    default: !0\n  }\n})], S.prototype, \"hasZ\", void 0), e([l({\n  readOnly: !0,\n  json: {\n    read: !1,\n    write: !0,\n    default: !1\n  }\n})], S.prototype, \"hasM\", void 0), e([l({\n  type: v,\n  nonNullable: !0,\n  json: {\n    write: !0\n  }\n})], S.prototype, \"vertexAttributes\", void 0), S = E = e([p(\"esri.geometry.Mesh\")], S);\nconst I = {\n  x: c(1, 0, 0),\n  y: c(0, 1, 0),\n  z: c(0, 0, 1)\n},\n      B = g(),\n      k = g(),\n      D = g(),\n      W = m();\nvar Z = S;\nexport default Z;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/Mesh.js"],"names":["_","e","t","o","r","isNone","n","isSome","s","EsriPromiseMixin","i","whenOrAbort","a","property","l","subclass","p","f","c","m","h","u","d","fromAxisAndAngle","x","compose","y","create","g","b","j","MeshVertexAttributes","v","triangulate","w","centerAt","M","loadExternal","P","offset","R","convertUnitGeometry","A","createUnitSizeBox","F","extractSingleFaceOfBox","z","createUnitSizeSphere","C","createUnitSizeCylinder","O","createUnitSizePlane","L","rotate","U","scale","T","E","G","getLogger","S","LoadableMixin","constructor","components","transform","external","hasZ","hasM","vertexAttributes","type","initialize","position","length","loadStatus","hasExtent","loaded","extent","boundingInfo","spatialReference","xmin","ymin","zmin","xmax","ymax","zmax","center","project","Math","min","max","anchor","getOriginPoint","origin","clone","addComponent","push","from","notifyChange","error","removeComponent","indexOf","splice","I","B","k","D","W","load","addResolvingPromise","source","Promise","resolve","Map","map","cloneWithDeduplication","vertexAttributesChanged","toBinaryGLTF","createBox","imageFace","createSphere","densificationFactor","createCylinder","createPlane","facing","createFromPolygon","faces","shading","material","createFromGLTF","loadGLTFMesh","createWithExternalSource","createIncomplete","reject","json","write","prototype","constructOnly","readOnly","read","default","nonNullable","Z"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/Error.js\";import o from\"../core/Loadable.js\";import r from\"../core/Logger.js\";import{isNone as n,isSome as s}from\"../core/maybe.js\";import{EsriPromiseMixin as i}from\"../core/Promise.js\";import{whenOrAbort as a}from\"../core/promiseUtils.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{f as c,c as m}from\"../chunks/vec3f64.js\";import h from\"./Extent.js\";import u from\"./Geometry.js\";import f from\"./Point.js\";import d from\"./Polygon.js\";import{fromAxisAndAngle as x,compose as y,create as g}from\"./support/axisAngleDegrees.js\";import b from\"./support/MeshComponent.js\";import j from\"./support/MeshTransform.js\";import{MeshVertexAttributes as v}from\"./support/MeshVertexAttributes.js\";import{triangulate as w}from\"./support/triangulationUtils.js\";import{centerAt as M}from\"./support/meshUtils/centerAt.js\";import{loadExternal as P}from\"./support/meshUtils/loadExternal.js\";import{offset as R}from\"./support/meshUtils/offset.js\";import{convertUnitGeometry as A,createUnitSizeBox as F,extractSingleFaceOfBox as z,createUnitSizeSphere as C,createUnitSizeCylinder as O,createUnitSizePlane as L}from\"./support/meshUtils/primitives.js\";import{rotate as U}from\"./support/meshUtils/rotate.js\";import{scale as T}from\"./support/meshUtils/scale.js\";var E;const G=r.getLogger(\"esri.geometry.Mesh\");let S=E=class extends(o.LoadableMixin(i(u))){constructor(e){super(e),this.components=null,this.transform=null,this.external=null,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new v,this.type=\"mesh\"}initialize(){(n(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus=\"loaded\")}get hasExtent(){return!this.loaded&&s(this.external)&&s(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}get boundingInfo(){const e=this.vertexAttributes.position,t=this.spatialReference;if(0===e.length||this.components&&0===this.components.length)return{extent:new h({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t}),center:new f({x:0,y:0,z:0,spatialReference:t})};const o=s(this.transform)?this.transform.project(e,t):e;let r=1/0,n=1/0,i=1/0,a=-1/0,l=-1/0,p=-1/0,c=0,m=0,u=0;const d=o.length,x=1/(d/3);let y=0;for(;y<d;){const e=o[y++],t=o[y++],s=o[y++];r=Math.min(r,e),n=Math.min(n,t),i=Math.min(i,s),a=Math.max(a,e),l=Math.max(l,t),p=Math.max(p,s),c+=x*e,m+=x*t,u+=x*s}return{extent:new h({xmin:r,ymin:n,zmin:i,xmax:a,ymax:l,zmax:p,spatialReference:t}),center:new f({x:c,y:m,z:u,spatialReference:t})}}get anchor(){if(s(this.transform))return this.transform.getOriginPoint(this.spatialReference);const e=this.boundingInfo;return new f({x:e.center.x,y:e.center.y,z:e.extent.zmin,spatialReference:this.spatialReference})}get origin(){return s(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}get extent(){return!this.loaded&&s(this.external)&&s(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}addComponent(e){this.loaded?(this.components||(this.components=[]),this.components.push(b.from(e)),this.notifyChange(\"components\")):G.error(\"addComponent()\",\"Mesh must be loaded before applying operations\")}removeComponent(e){if(this.loaded){if(this.components){const t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange(\"components\")}G.error(\"removeComponent()\",\"Provided component is not part of the list of components\")}else G.error(\"removeComponent()\",\"Mesh must be loaded before applying operations\")}rotate(e,t,o,r){return x(I.x,e,B),x(I.y,t,k),x(I.z,o,D),y(B,k,B),y(B,D,B),U(this,B,r),this}offset(e,t,o,r){return this.loaded?(W[0]=e,W[1]=t,W[2]=o,R(this,W,r),this):(G.error(\"offset()\",\"Mesh must be loaded before applying operations\"),this)}scale(e,t){return this.loaded?(T(this,e,t),this):(G.error(\"scale()\",\"Mesh must be loaded before applying operations\"),this)}centerAt(e,t){return this.loaded?(M(this,e,t),this):(G.error(\"centerAt()\",\"Mesh must be loaded before applying operations\"),this)}load(e){return s(this.external)&&this.addResolvingPromise(P(this,this.external.source,e)),Promise.resolve(this)}clone(){const e=this.components?new Map:null,t=this.components?new Map:null,o={components:this.components?this.components.map((o=>o.cloneWithDeduplication(e,t))):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:s(this.transform)?this.transform.clone():null,external:s(this.external)?{source:this.external.source,extent:s(this.external.extent)?this.external.extent.clone():null}:null};return new E(o)}vertexAttributesChanged(){this.notifyChange(\"vertexAttributes\")}async toBinaryGLTF(e){const{toBinaryGLTF:t}=await import(\"./support/meshUtils/exporters/gltf/gltfexport.js\");return t(this,e)}static createBox(e,t){if(!(e instanceof f))return G.error(\".createBox()\",\"expected location to be a Point instance\"),null;const o=new E(A(F(),e,t));return t&&t.imageFace&&\"all\"!==t.imageFace?z(o,t.imageFace):o}static createSphere(e,t){return e instanceof f?new E(A(C(t&&t.densificationFactor||0),e,t)):(G.error(\".createSphere()\",\"expected location to be a Point instance\"),null)}static createCylinder(e,t){return e instanceof f?new E(A(O(t&&t.densificationFactor||0),e,t)):(G.error(\".createCylinder()\",\"expected location to be a Point instance\"),null)}static createPlane(e,t){return e instanceof f?new E(A(L(t&&t.facing||\"up\"),e,t)):(G.error(\".createPlane()\",\"expected location to be a Point instance\"),null)}static createFromPolygon(e,t){if(!(e instanceof d))return G.error(\".createFromPolygon()\",\"expected polygon to be a Polygon instance\"),null;const o=w(e);return new E({vertexAttributes:new v({position:o.position}),components:[new b({faces:o.faces,shading:\"flat\",material:t&&t.material||null})],spatialReference:e.spatialReference})}static async createFromGLTF(e,o,r){if(!(e instanceof f))throw G.error(\".createfromGLTF()\",\"expected location to be a Point instance\"),new t(\"invalid-input\",\"Expected location to be a Point instance\");const{loadGLTFMesh:n}=await a(import(\"./support/meshUtils/loadGLTFMesh.js\"),r);return new E(await n(e,o,r))}static createWithExternalSource(e,t,o){var r,n,s;const i=null!=(r=null==o?void 0:o.extent)?r:null,a=null!=(n=null==o?void 0:o.transform.clone())?n:new j;a.origin=[e.x,e.y,null!=(s=e.z)?s:0];const l=e.spatialReference;return new E({external:{source:t,extent:i},transform:a,spatialReference:l})}static createIncomplete(e,o){var r,n;const s=null!=(r=null==o?void 0:o.transform.clone())?r:new j;s.origin=[e.x,e.y,null!=(n=e.z)?n:0];const i=e.spatialReference,a=new E({transform:s,spatialReference:i});return a.addResolvingPromise(Promise.reject(new t(\"mesh-incomplete\",\"Mesh resources are not complete\"))),a}};e([l({type:[b],json:{write:!0}})],S.prototype,\"components\",void 0),e([l({type:j,json:{write:!0}})],S.prototype,\"transform\",void 0),e([l({constructOnly:!0})],S.prototype,\"external\",void 0),e([l({readOnly:!0})],S.prototype,\"hasExtent\",null),e([l({readOnly:!0})],S.prototype,\"boundingInfo\",null),e([l({readOnly:!0})],S.prototype,\"anchor\",null),e([l({readOnly:!0})],S.prototype,\"origin\",null),e([l({readOnly:!0,json:{read:!1}})],S.prototype,\"extent\",null),e([l({readOnly:!0,json:{read:!1,write:!0,default:!0}})],S.prototype,\"hasZ\",void 0),e([l({readOnly:!0,json:{read:!1,write:!0,default:!1}})],S.prototype,\"hasM\",void 0),e([l({type:v,nonNullable:!0,json:{write:!0}})],S.prototype,\"vertexAttributes\",void 0),S=E=e([p(\"esri.geometry.Mesh\")],S);const I={x:c(1,0,0),y:c(0,1,0),z:c(0,0,1)},B=g(),k=g(),D=g(),W=m();var Z=S;export default Z;\n"]},"metadata":{},"sourceType":"module"}