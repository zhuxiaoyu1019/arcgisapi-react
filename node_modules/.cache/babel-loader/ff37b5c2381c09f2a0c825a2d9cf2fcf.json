{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { ReentrantObjectPool as e } from \"../../../core/ReentrantObjectPool.js\";\nimport { afterDispatch as t, isValueInUse as r } from \"../../../core/accessorSupport/watch.js\";\n\nclass o {\n  constructor(r, o) {\n    this.owner = o, this.properties = {}, this.afterDispatchHandle = null;\n\n    for (const t in r) {\n      const o = r[t],\n            s = new e(o, null, null, 2, 2);\n      this.properties[t] = {\n        pool: s,\n        acquired: []\n      };\n    }\n\n    this.afterDispatchHandle = t(() => this.release());\n  }\n\n  destroy() {\n    this.afterDispatchHandle && (this.afterDispatchHandle.remove(), this.afterDispatchHandle = null);\n\n    for (const e in this.properties) {\n      const t = this.properties[e];\n\n      for (const e of t.acquired) r(e) || t.pool.release(e);\n\n      t.pool.destroy(), t.pool = null, t.acquired = null;\n    }\n\n    this.properties = null, this.owner = null;\n  }\n\n  get(e) {\n    const t = this.owner._get(e),\n          r = this.properties[e];\n\n    let o = r.pool.acquire();\n\n    for (r.acquired.push(o); o === t;) r.acquired.push(o), o = r.pool.acquire();\n\n    return o;\n  }\n\n  release() {\n    for (const e in this.properties) {\n      const t = this.properties[e];\n      let o = 0;\n\n      for (const e of t.acquired) r(e) ? t.acquired[o++] = e : t.pool.release(e);\n\n      t.acquired.length = o;\n    }\n  }\n\n}\n\nexport default o;\nexport { o as PropertiesPool };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/support/PropertiesPool.js"],"names":["ReentrantObjectPool","e","afterDispatch","t","isValueInUse","r","o","constructor","owner","properties","afterDispatchHandle","s","pool","acquired","release","destroy","remove","get","_get","acquire","push","length","PropertiesPool"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,mBAAmB,IAAIC,CAA9B,QAAoC,sCAApC;AAA2E,SAAOC,aAAa,IAAIC,CAAxB,EAA0BC,YAAY,IAAIC,CAA1C,QAAgD,wCAAhD;;AAAyF,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACF,CAAD,EAAGC,CAAH,EAAK;AAAC,SAAKE,KAAL,GAAWF,CAAX,EAAa,KAAKG,UAAL,GAAgB,EAA7B,EAAgC,KAAKC,mBAAL,GAAyB,IAAzD;;AAA8D,SAAI,MAAMP,CAAV,IAAeE,CAAf,EAAiB;AAAC,YAAMC,CAAC,GAACD,CAAC,CAACF,CAAD,CAAT;AAAA,YAAaQ,CAAC,GAAC,IAAIV,CAAJ,CAAMK,CAAN,EAAQ,IAAR,EAAa,IAAb,EAAkB,CAAlB,EAAoB,CAApB,CAAf;AAAsC,WAAKG,UAAL,CAAgBN,CAAhB,IAAmB;AAACS,QAAAA,IAAI,EAACD,CAAN;AAAQE,QAAAA,QAAQ,EAAC;AAAjB,OAAnB;AAAwC;;AAAA,SAAKH,mBAAL,GAAyBP,CAAC,CAAE,MAAI,KAAKW,OAAL,EAAN,CAA1B;AAAiD;;AAAAC,EAAAA,OAAO,GAAE;AAAC,SAAKL,mBAAL,KAA2B,KAAKA,mBAAL,CAAyBM,MAAzB,IAAkC,KAAKN,mBAAL,GAAyB,IAAtF;;AAA4F,SAAI,MAAMT,CAAV,IAAe,KAAKQ,UAApB,EAA+B;AAAC,YAAMN,CAAC,GAAC,KAAKM,UAAL,CAAgBR,CAAhB,CAAR;;AAA2B,WAAI,MAAMA,CAAV,IAAeE,CAAC,CAACU,QAAjB,EAA0BR,CAAC,CAACJ,CAAD,CAAD,IAAME,CAAC,CAACS,IAAF,CAAOE,OAAP,CAAeb,CAAf,CAAN;;AAAwBE,MAAAA,CAAC,CAACS,IAAF,CAAOG,OAAP,IAAiBZ,CAAC,CAACS,IAAF,GAAO,IAAxB,EAA6BT,CAAC,CAACU,QAAF,GAAW,IAAxC;AAA6C;;AAAA,SAAKJ,UAAL,GAAgB,IAAhB,EAAqB,KAAKD,KAAL,GAAW,IAAhC;AAAqC;;AAAAS,EAAAA,GAAG,CAAChB,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKK,KAAL,CAAWU,IAAX,CAAgBjB,CAAhB,CAAR;AAAA,UAA2BI,CAAC,GAAC,KAAKI,UAAL,CAAgBR,CAAhB,CAA7B;;AAAgD,QAAIK,CAAC,GAACD,CAAC,CAACO,IAAF,CAAOO,OAAP,EAAN;;AAAuB,SAAId,CAAC,CAACQ,QAAF,CAAWO,IAAX,CAAgBd,CAAhB,CAAJ,EAAuBA,CAAC,KAAGH,CAA3B,GAA8BE,CAAC,CAACQ,QAAF,CAAWO,IAAX,CAAgBd,CAAhB,GAAmBA,CAAC,GAACD,CAAC,CAACO,IAAF,CAAOO,OAAP,EAArB;;AAAsC,WAAOb,CAAP;AAAS;;AAAAQ,EAAAA,OAAO,GAAE;AAAC,SAAI,MAAMb,CAAV,IAAe,KAAKQ,UAApB,EAA+B;AAAC,YAAMN,CAAC,GAAC,KAAKM,UAAL,CAAgBR,CAAhB,CAAR;AAA2B,UAAIK,CAAC,GAAC,CAAN;;AAAQ,WAAI,MAAML,CAAV,IAAeE,CAAC,CAACU,QAAjB,EAA0BR,CAAC,CAACJ,CAAD,CAAD,GAAKE,CAAC,CAACU,QAAF,CAAWP,CAAC,EAAZ,IAAgBL,CAArB,GAAuBE,CAAC,CAACS,IAAF,CAAOE,OAAP,CAAeb,CAAf,CAAvB;;AAAyCE,MAAAA,CAAC,CAACU,QAAF,CAAWQ,MAAX,GAAkBf,CAAlB;AAAoB;AAAC;;AAAt0B;;AAAu0B,eAAeA,CAAf;AAAiB,SAAOA,CAAC,IAAIgB,cAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ReentrantObjectPool as e}from\"../../../core/ReentrantObjectPool.js\";import{afterDispatch as t,isValueInUse as r}from\"../../../core/accessorSupport/watch.js\";class o{constructor(r,o){this.owner=o,this.properties={},this.afterDispatchHandle=null;for(const t in r){const o=r[t],s=new e(o,null,null,2,2);this.properties[t]={pool:s,acquired:[]}}this.afterDispatchHandle=t((()=>this.release()))}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const e in this.properties){const t=this.properties[e];for(const e of t.acquired)r(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this.properties=null,this.owner=null}get(e){const t=this.owner._get(e),r=this.properties[e];let o=r.pool.acquire();for(r.acquired.push(o);o===t;)r.acquired.push(o),o=r.pool.acquire();return o}release(){for(const e in this.properties){const t=this.properties[e];let o=0;for(const e of t.acquired)r(e)?t.acquired[o++]=e:t.pool.release(e);t.acquired.length=o}}}export default o;export{o as PropertiesPool};\n"]},"metadata":{},"sourceType":"module"}