{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../../core/Logger.js\";\nimport { pt2px as t } from \"../../../../../../core/screenUtils.js\";\nimport { premultiplyAlphaRGBAArray as i, premultiplyAlphaRGBA as r } from \"../../color.js\";\nimport { MIN_MAX_ZOOM_PRECISION_FACTOR as s, SPRITE_PADDING as o } from \"../../definitions.js\";\nimport { i1616to32 as l } from \"../../number.js\";\nimport { getCapType as n, getJoinType as a } from \"../../Utils.js\";\nimport { LineMaterialKey as m } from \"../../materialKey/MaterialKey.js\";\nimport { getLimitCosine as c, getMinMaxZoom as h, DEFAULT_MIN_ZOOM as f, DEFAULT_MAX_ZOOM as d } from \"./util.js\";\nimport p from \"./WGLBaseLineTemplate.js\";\nimport u from \"./WGLMeshTemplate.js\";\nconst L = e.getLogger(\"esri.views.2d.engine.webgl.WGLLineTemplate\");\n\nclass y extends p(u) {\n  constructor(e, t, i, r, o, n, a, h, f, d, p, u, L, y, _, j, S) {\n    super();\n    const g = m.load(e);\n    t && (g.sdf = t.sdf, g.pattern = !0, g.textureBinding = t.textureBinding), this._capType = r, this._joinType = o, this._miterLimitCosine = c(n), this.tessellationProperties._fillColor = a, this.tessellationProperties._tl = h, this.tessellationProperties._br = f, this._hasPattern = d, this._isDashed = p, this._isColorLocked = u, this._zOrder = y, this._effects = _, this._minMaxZoom = l(Math.round(j * s), Math.round(S * s)), this._materialKey = g.data, this.tessellationProperties._bitset = u ? 1 : 0, this.tessellationProperties._halfWidth = .5 * i, this.tessellationProperties._halfReferenceWidth = .5 * L, this.tessellationProperties.offset = 0, this._initializeTessellator(!1);\n  }\n\n  static fromCIMLine(e, i, s) {\n    const n = e.color,\n          a = e.scaleFactor || 1,\n          m = e.isDashed;\n    let c = e.cap;\n    m && 1 === c && (c = 2);\n    const f = e.join,\n          d = t(e.width) * a,\n          p = t(e.referenceWidth),\n          u = t(e.miterLimit),\n          L = n && r(n) || 0,\n          [_, j] = h(e.scaleInfo, s);\n    if (!i) return new y(e.materialKey, i, d, c, f, u, L, 0, 0, !1, m, e.colorLocked, p, e.zOrder, e.effects, _, j);\n    const {\n      rect: S,\n      width: g,\n      height: w\n    } = i,\n          P = S.x + o,\n          x = S.y + o,\n          K = P + g,\n          b = x + w,\n          M = l(P, x),\n          T = l(K, b);\n    return new y(e.materialKey, i, d, c, f, u, L, M, T, !0, m, e.colorLocked, p, e.zOrder, e.effects, _, j);\n  }\n\n  static fromSimpleLine(e, r) {\n    const {\n      color: s\n    } = e,\n          m = \"esriSLSSolid\" !== e.style && \"esriSLSNull\" !== e.style,\n          c = n(e.cap || \"round\"),\n          h = a(e.join || \"round\");\n    let p = s && \"esriSLSNull\" !== e.style && i(s) || 0;\n    \"esriSLSNull\" === e.style && (p = 0);\n    const u = t(e.width),\n          L = e.miterLimit;\n    if (!r) return new y(e.materialKey, r, u, c, h, L, p, 0, 0, !1, m, !1, u, 0, null, f, d);\n    const {\n      rect: _,\n      width: j,\n      height: S\n    } = r,\n          g = _.x + o,\n          w = _.y + o,\n          P = g + j,\n          x = w + S,\n          K = l(g, w),\n          b = l(P, x);\n    return new y(e.materialKey, r, u, c, h, L, p, K, b, !0, m, !1, u, 0, null, f, d);\n  }\n\n  static fromPictureLineSymbol(e, t, i, r) {\n    return L.error(\"PictureLineSymbol support does not exist!\"), null;\n  }\n\n}\n\nexport default y;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLLineTemplate.js"],"names":["e","pt2px","t","premultiplyAlphaRGBAArray","i","premultiplyAlphaRGBA","r","MIN_MAX_ZOOM_PRECISION_FACTOR","s","SPRITE_PADDING","o","i1616to32","l","getCapType","n","getJoinType","a","LineMaterialKey","m","getLimitCosine","c","getMinMaxZoom","h","DEFAULT_MIN_ZOOM","f","DEFAULT_MAX_ZOOM","d","p","u","L","getLogger","y","constructor","_","j","S","g","load","sdf","pattern","textureBinding","_capType","_joinType","_miterLimitCosine","tessellationProperties","_fillColor","_tl","_br","_hasPattern","_isDashed","_isColorLocked","_zOrder","_effects","_minMaxZoom","Math","round","_materialKey","data","_bitset","_halfWidth","_halfReferenceWidth","offset","_initializeTessellator","fromCIMLine","color","scaleFactor","isDashed","cap","join","width","referenceWidth","miterLimit","scaleInfo","materialKey","colorLocked","zOrder","effects","rect","height","w","P","x","K","b","M","T","fromSimpleLine","style","fromPictureLineSymbol","error"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Logger.js\";import{pt2px as t}from\"../../../../../../core/screenUtils.js\";import{premultiplyAlphaRGBAArray as i,premultiplyAlphaRGBA as r}from\"../../color.js\";import{MIN_MAX_ZOOM_PRECISION_FACTOR as s,SPRITE_PADDING as o}from\"../../definitions.js\";import{i1616to32 as l}from\"../../number.js\";import{getCapType as n,getJoinType as a}from\"../../Utils.js\";import{LineMaterialKey as m}from\"../../materialKey/MaterialKey.js\";import{getLimitCosine as c,getMinMaxZoom as h,DEFAULT_MIN_ZOOM as f,DEFAULT_MAX_ZOOM as d}from\"./util.js\";import p from\"./WGLBaseLineTemplate.js\";import u from\"./WGLMeshTemplate.js\";const L=e.getLogger(\"esri.views.2d.engine.webgl.WGLLineTemplate\");class y extends(p(u)){constructor(e,t,i,r,o,n,a,h,f,d,p,u,L,y,_,j,S){super();const g=m.load(e);t&&(g.sdf=t.sdf,g.pattern=!0,g.textureBinding=t.textureBinding),this._capType=r,this._joinType=o,this._miterLimitCosine=c(n),this.tessellationProperties._fillColor=a,this.tessellationProperties._tl=h,this.tessellationProperties._br=f,this._hasPattern=d,this._isDashed=p,this._isColorLocked=u,this._zOrder=y,this._effects=_,this._minMaxZoom=l(Math.round(j*s),Math.round(S*s)),this._materialKey=g.data,this.tessellationProperties._bitset=u?1:0,this.tessellationProperties._halfWidth=.5*i,this.tessellationProperties._halfReferenceWidth=.5*L,this.tessellationProperties.offset=0,this._initializeTessellator(!1)}static fromCIMLine(e,i,s){const n=e.color,a=e.scaleFactor||1,m=e.isDashed;let c=e.cap;m&&1===c&&(c=2);const f=e.join,d=t(e.width)*a,p=t(e.referenceWidth),u=t(e.miterLimit),L=n&&r(n)||0,[_,j]=h(e.scaleInfo,s);if(!i)return new y(e.materialKey,i,d,c,f,u,L,0,0,!1,m,e.colorLocked,p,e.zOrder,e.effects,_,j);const{rect:S,width:g,height:w}=i,P=S.x+o,x=S.y+o,K=P+g,b=x+w,M=l(P,x),T=l(K,b);return new y(e.materialKey,i,d,c,f,u,L,M,T,!0,m,e.colorLocked,p,e.zOrder,e.effects,_,j)}static fromSimpleLine(e,r){const{color:s}=e,m=\"esriSLSSolid\"!==e.style&&\"esriSLSNull\"!==e.style,c=n(e.cap||\"round\"),h=a(e.join||\"round\");let p=s&&\"esriSLSNull\"!==e.style&&i(s)||0;\"esriSLSNull\"===e.style&&(p=0);const u=t(e.width),L=e.miterLimit;if(!r)return new y(e.materialKey,r,u,c,h,L,p,0,0,!1,m,!1,u,0,null,f,d);const{rect:_,width:j,height:S}=r,g=_.x+o,w=_.y+o,P=g+j,x=w+S,K=l(g,w),b=l(P,x);return new y(e.materialKey,r,u,c,h,L,p,K,b,!0,m,!1,u,0,null,f,d)}static fromPictureLineSymbol(e,t,i,r){return L.error(\"PictureLineSymbol support does not exist!\"),null}}export default y;\n"]},"metadata":{},"sourceType":"module"}