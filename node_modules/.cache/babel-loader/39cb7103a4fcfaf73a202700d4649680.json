{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../../core/maybe.js\";\nimport { t as e, b as o } from \"../../../../chunks/vec3.js\";\nimport { c as r } from \"../../../../chunks/vec3f64.js\";\nimport { projectBuffer as n } from \"../../../../geometry/projection.js\";\nimport { set as a, NEGATIVE_INFINITY as m, expandWithBuffer as s, ZERO as c, create as f } from \"../../../../geometry/support/aaBoundingBox.js\";\n\nfunction i(t, r, n, a) {\n  const m = r.getComponentAabb(n, t, p),\n        s = r.getObjectTransform(n);\n\n  for (let c = 0; c < 8; ++c) b[0] = 1 & c ? m[0] : m[3], b[1] = 2 & c ? m[1] : m[4], b[2] = 4 & c ? m[2] : m[5], e(b, b, s.rotationScale), o(b, b, s.position), a[3 * c] = b[0], a[3 * c + 1] = b[1], a[3 * c + 2] = b[2];\n\n  return a;\n}\n\nfunction u(e, o, r) {\n  const f = new Float64Array(24);\n  return u => {\n    let l = u.meta.featureExtents;\n\n    if (t(l)) {\n      l = new Float64Array(6 * u.meta.featureIds.length), u.meta.featureExtents = l;\n\n      for (let t = 0; t < l.length; t += 6) l[t] = Number.POSITIVE_INFINITY;\n    }\n\n    const p = new Float64Array(l.buffer, 6 * u.index * Float64Array.BYTES_PER_ELEMENT, 6);\n    return p[0] === Number.POSITIVE_INFINITY && (i(u.index, r, u.meta.objectHandle, f), n(f, o, 0, f, e, 0, 8) ? (a(p, m), s(p, f, 0, 8)) : a(p, c)), p;\n  };\n}\n\nfunction l(t, r, n, a) {\n  const m = r.getComponentAabb(n, t, p),\n        s = r.getObjectTransform(n);\n  a[0] = 0, a[1] = 0, a[2] = 0;\n\n  for (let c = 0; c < 8; ++c) b[0] = 1 & c ? m[0] : m[3], b[1] = 2 & c ? m[1] : m[4], b[2] = m[5], e(b, b, s.rotationScale), o(b, b, s.position), a[0] += b[0], a[1] += b[1], a[2] += b[2];\n\n  return a[0] /= 8, a[1] /= 8, a[2] /= 8, a;\n}\n\nconst p = f(),\n      b = r();\nexport { i as boundingBoxCornerPoints, l as boundingBoxTop, u as createGetFeatureExtent };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js"],"names":["isNone","t","e","b","o","c","r","projectBuffer","n","set","a","NEGATIVE_INFINITY","m","expandWithBuffer","s","ZERO","create","f","i","getComponentAabb","p","getObjectTransform","rotationScale","position","u","Float64Array","l","meta","featureExtents","featureIds","length","Number","POSITIVE_INFINITY","buffer","index","BYTES_PER_ELEMENT","objectHandle","boundingBoxCornerPoints","boundingBoxTop","createGetFeatureExtent"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../core/maybe.js\";import{t as e,b as o}from\"../../../../chunks/vec3.js\";import{c as r}from\"../../../../chunks/vec3f64.js\";import{projectBuffer as n}from\"../../../../geometry/projection.js\";import{set as a,NEGATIVE_INFINITY as m,expandWithBuffer as s,ZERO as c,create as f}from\"../../../../geometry/support/aaBoundingBox.js\";function i(t,r,n,a){const m=r.getComponentAabb(n,t,p),s=r.getObjectTransform(n);for(let c=0;c<8;++c)b[0]=1&c?m[0]:m[3],b[1]=2&c?m[1]:m[4],b[2]=4&c?m[2]:m[5],e(b,b,s.rotationScale),o(b,b,s.position),a[3*c]=b[0],a[3*c+1]=b[1],a[3*c+2]=b[2];return a}function u(e,o,r){const f=new Float64Array(24);return u=>{let l=u.meta.featureExtents;if(t(l)){l=new Float64Array(6*u.meta.featureIds.length),u.meta.featureExtents=l;for(let t=0;t<l.length;t+=6)l[t]=Number.POSITIVE_INFINITY}const p=new Float64Array(l.buffer,6*u.index*Float64Array.BYTES_PER_ELEMENT,6);return p[0]===Number.POSITIVE_INFINITY&&(i(u.index,r,u.meta.objectHandle,f),n(f,o,0,f,e,0,8)?(a(p,m),s(p,f,0,8)):a(p,c)),p}}function l(t,r,n,a){const m=r.getComponentAabb(n,t,p),s=r.getObjectTransform(n);a[0]=0,a[1]=0,a[2]=0;for(let c=0;c<8;++c)b[0]=1&c?m[0]:m[3],b[1]=2&c?m[1]:m[4],b[2]=m[5],e(b,b,s.rotationScale),o(b,b,s.position),a[0]+=b[0],a[1]+=b[1],a[2]+=b[2];return a[0]/=8,a[1]/=8,a[2]/=8,a}const p=f(),b=r();export{i as boundingBoxCornerPoints,l as boundingBoxTop,u as createGetFeatureExtent};\n"]},"metadata":{},"sourceType":"module"}