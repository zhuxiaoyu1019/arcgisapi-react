{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { JSONMap as t } from \"../../core/jsonMap.js\";\nimport { JSONSupport as o } from \"../../core/JSONSupport.js\";\nimport { getMetersPerUnitForSR as r } from \"../../core/unitUtils.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport { Integer as i } from \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { reader as l } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as n } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as a } from \"../../core/accessorSupport/decorators/writer.js\";\nimport p from \"../../geometry/Point.js\";\nimport c from \"../../geometry/SpatialReference.js\";\nimport { create as u } from \"../../geometry/support/aaBoundingRect.js\";\nimport { isValid as f, getInfo as h, isGeographic as m, equals as d } from \"../../geometry/support/spatialReferenceUtils.js\";\nimport { project as g } from \"../../geometry/support/webMercatorUtils.js\";\nimport y from \"./LOD.js\";\nvar v;\nconst w = new t({\n  PNG: \"png\",\n  PNG8: \"png8\",\n  PNG24: \"png24\",\n  PNG32: \"png32\",\n  JPEG: \"jpg\",\n  JPG: \"jpg\",\n  DIB: \"dib\",\n  TIFF: \"tiff\",\n  EMF: \"emf\",\n  PS: \"ps\",\n  PDF: \"pdf\",\n  GIF: \"gif\",\n  SVG: \"svg\",\n  SVGZ: \"svgz\",\n  Mixed: \"mixed\",\n  MIXED: \"mixed\",\n  LERC: \"lerc\",\n  LERC2D: \"lerc2d\",\n  RAW: \"raw\",\n  pbf: \"pbf\"\n});\nlet x = v = class extends o {\n  constructor(e) {\n    super(e), this.dpi = 96, this.format = null, this.origin = null, this.minScale = 0, this.maxScale = 0, this.size = null, this.spatialReference = null;\n  }\n\n  static create(e = {}) {\n    const {\n      resolutionFactor: t = 1,\n      scales: o,\n      size: s = 256,\n      spatialReference: i = c.WebMercator,\n      numLODs: l = 24\n    } = e;\n\n    if (!f(i)) {\n      const e = [];\n      if (o) for (let t = 0; t < o.length; t++) {\n        const r = o[t];\n        e.push({\n          level: t,\n          scale: r,\n          resolution: r\n        });\n      } else {\n        let t = 5e-4;\n\n        for (let o = l - 1; o >= 0; o--) e.unshift({\n          level: o,\n          scale: t,\n          resolution: t\n        }), t *= 2;\n      }\n      return new v({\n        dpi: 96,\n        lods: e,\n        origin: new p(0, 0, i),\n        size: [s, s],\n        spatialReference: i\n      });\n    }\n\n    const n = h(i),\n          a = e.origin ? new p({\n      x: e.origin.x,\n      y: e.origin.y,\n      spatialReference: i\n    }) : new p(n ? {\n      x: n.origin[0],\n      y: n.origin[1],\n      spatialReference: i\n    } : {\n      x: 0,\n      y: 0,\n      spatialReference: i\n    }),\n          u = 96,\n          d = 1 / (r(i) * 39.37 * u),\n          g = [];\n    if (o) for (let r = 0; r < o.length; r++) {\n      const e = o[r],\n            t = e * d;\n      g.push({\n        level: r,\n        scale: e,\n        resolution: t\n      });\n    } else {\n      let e = m(i) ? 512 / s * 591657527.5917094 : 256 / s * 591657527.591555;\n      const o = Math.ceil(l / t);\n      g.push({\n        level: 0,\n        scale: e,\n        resolution: e * d\n      });\n\n      for (let r = 1; r < o; r++) {\n        const o = e / 2 ** t,\n              s = o * d;\n        g.push({\n          level: r,\n          scale: o,\n          resolution: s\n        }), e = o;\n      }\n    }\n    return new v({\n      dpi: u,\n      lods: g,\n      origin: a,\n      size: [s, s],\n      spatialReference: i\n    });\n  }\n\n  get isWrappable() {\n    const {\n      spatialReference: e,\n      origin: t\n    } = this;\n\n    if (e && t) {\n      const o = h(e);\n      return e.isWrappable && Math.abs(o.origin[0] - t.x) <= o.dx;\n    }\n\n    return !1;\n  }\n\n  readOrigin(e, t) {\n    return p.fromJSON({\n      spatialReference: t.spatialReference,\n      ...e\n    });\n  }\n\n  set lods(e) {\n    let t = 0,\n        o = 0;\n    const r = [];\n    this._levelToLOD = {}, e && (t = -1 / 0, o = 1 / 0, e.forEach(e => {\n      r.push(e.scale), t = e.scale > t ? e.scale : t, o = e.scale < o ? e.scale : o, this._levelToLOD[e.level] = e;\n    })), this._set(\"scales\", r), this._set(\"minScale\", t), this._set(\"maxScale\", o), this._set(\"lods\", e), this._initializeUpsampleLevels();\n  }\n\n  readSize(e, t) {\n    return [t.cols, t.rows];\n  }\n\n  writeSize(e, t) {\n    t.cols = e[0], t.rows = e[0];\n  }\n\n  zoomToScale(e) {\n    const t = this.scales;\n    if (e <= 0) return t[0];\n    if (e >= t.length - 1) return t[t.length - 1];\n    {\n      const o = Math.floor(e),\n            r = o + 1;\n      return t[o] / (t[o] / t[r]) ** (e - o);\n    }\n  }\n\n  scaleToZoom(e) {\n    const t = this.scales,\n          o = t.length - 1;\n    let r = 0;\n\n    for (; r < o; r++) {\n      const o = t[r],\n            s = t[r + 1];\n      if (o <= e) return r;\n      if (s === e) return r + 1;\n      if (o > e && s < e) return r + Math.log(o / e) / Math.log(o / s);\n    }\n\n    return r;\n  }\n\n  snapScale(e, t = .95) {\n    const o = this.scaleToZoom(e);\n    return o % Math.floor(o) >= t ? this.zoomToScale(Math.ceil(o)) : this.zoomToScale(Math.floor(o));\n  }\n\n  tileAt(e, t, o, r) {\n    const s = this.lodAt(e);\n    if (!s) return null;\n    let i, l;\n    if (\"number\" == typeof t) i = t, l = o;else if (d(t.spatialReference, this.spatialReference)) i = t.x, l = t.y, r = o;else {\n      const e = g(t, this.spatialReference);\n      if (!e) return null;\n      i = e.x, l = e.y, r = o;\n    }\n    const n = s.resolution * this.size[0],\n          a = s.resolution * this.size[1];\n    return r || (r = {\n      id: null,\n      level: 0,\n      row: 0,\n      col: 0,\n      extent: u()\n    }), r.level = e, r.row = Math.floor((this.origin.y - l) / a + .001), r.col = Math.floor((i - this.origin.x) / n + .001), this.updateTileInfo(r), r;\n  }\n\n  updateTileInfo(e, t = 0) {\n    let o = this.lodAt(e.level);\n\n    if (!o && 1 === t) {\n      const t = this.lods[this.lods.length - 1];\n      t.level < e.level && (o = t);\n    }\n\n    if (!o) return;\n    const r = e.level - o.level,\n          s = o.resolution * this.size[0] / 2 ** r,\n          i = o.resolution * this.size[1] / 2 ** r;\n    e.id = `${e.level}/${e.row}/${e.col}`, e.extent || (e.extent = u()), e.extent[0] = this.origin.x + e.col * s, e.extent[1] = this.origin.y - (e.row + 1) * i, e.extent[2] = e.extent[0] + s, e.extent[3] = e.extent[1] + i;\n  }\n\n  upsampleTile(e) {\n    const t = this._upsampleLevels[e.level];\n    return !(!t || -1 === t.parentLevel) && (e.level = t.parentLevel, e.row = Math.floor(e.row / t.factor + .001), e.col = Math.floor(e.col / t.factor + .001), this.updateTileInfo(e), !0);\n  }\n\n  getTileBounds(e, t) {\n    const {\n      resolution: o\n    } = this.lodAt(t.level),\n          r = o * this.size[0],\n          s = o * this.size[1];\n    return e[0] = this.origin.x + t.col * r, e[1] = this.origin.y - (t.row + 1) * s, e[2] = e[0] + r, e[3] = e[1] + s, e;\n  }\n\n  lodAt(e) {\n    return this._levelToLOD && this._levelToLOD[e] || null;\n  }\n\n  clone() {\n    return v.fromJSON(this.write({}));\n  }\n\n  _initializeUpsampleLevels() {\n    const e = this.lods;\n    this._upsampleLevels = [];\n    let t = null;\n\n    for (let o = 0; o < e.length; o++) {\n      const r = e[o];\n      this._upsampleLevels[r.level] = {\n        parentLevel: t ? t.level : -1,\n        factor: t ? t.resolution / r.resolution : 0\n      }, t = r;\n    }\n  }\n\n};\ne([s({\n  type: Number,\n  json: {\n    write: !0\n  }\n})], x.prototype, \"compressionQuality\", void 0), e([s({\n  type: Number,\n  json: {\n    write: !0\n  }\n})], x.prototype, \"dpi\", void 0), e([s({\n  type: String,\n  json: {\n    read: w.read,\n    write: w.write,\n    origins: {\n      \"web-scene\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], x.prototype, \"format\", void 0), e([s({\n  readOnly: !0\n})], x.prototype, \"isWrappable\", null), e([s({\n  type: p,\n  json: {\n    write: !0\n  }\n})], x.prototype, \"origin\", void 0), e([l(\"origin\")], x.prototype, \"readOrigin\", null), e([s({\n  type: [y],\n  value: null,\n  json: {\n    write: !0\n  }\n})], x.prototype, \"lods\", null), e([s({\n  readOnly: !0\n})], x.prototype, \"minScale\", void 0), e([s({\n  readOnly: !0\n})], x.prototype, \"maxScale\", void 0), e([s({\n  readOnly: !0\n})], x.prototype, \"scales\", void 0), e([s({\n  cast: e => Array.isArray(e) ? e : \"number\" == typeof e ? [e, e] : [256, 256]\n})], x.prototype, \"size\", void 0), e([l(\"size\", [\"rows\", \"cols\"])], x.prototype, \"readSize\", null), e([a(\"size\", {\n  cols: {\n    type: i\n  },\n  rows: {\n    type: i\n  }\n})], x.prototype, \"writeSize\", null), e([s({\n  type: c,\n  json: {\n    write: !0\n  }\n})], x.prototype, \"spatialReference\", void 0), x = v = e([n(\"esri.layers.support.TileInfo\")], x);\nvar S = x;\nexport default S;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/support/TileInfo.js"],"names":["_","e","JSONMap","t","JSONSupport","o","getMetersPerUnitForSR","r","property","s","Integer","i","reader","l","subclass","n","writer","a","p","c","create","u","isValid","f","getInfo","h","isGeographic","m","equals","d","project","g","y","v","w","PNG","PNG8","PNG24","PNG32","JPEG","JPG","DIB","TIFF","EMF","PS","PDF","GIF","SVG","SVGZ","Mixed","MIXED","LERC","LERC2D","RAW","pbf","x","constructor","dpi","format","origin","minScale","maxScale","size","spatialReference","resolutionFactor","scales","WebMercator","numLODs","length","push","level","scale","resolution","unshift","lods","Math","ceil","isWrappable","abs","dx","readOrigin","fromJSON","_levelToLOD","forEach","_set","_initializeUpsampleLevels","readSize","cols","rows","writeSize","zoomToScale","floor","scaleToZoom","log","snapScale","tileAt","lodAt","id","row","col","extent","updateTileInfo","upsampleTile","_upsampleLevels","parentLevel","factor","getTileBounds","clone","write","type","Number","json","prototype","String","read","origins","readOnly","value","cast","Array","isArray","S"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,2BAAlB;AAA8C,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,uBAAxB;AAAgD,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,2BAA5B;AAAwD,SAAOC,qBAAqB,IAAIC,CAAhC,QAAsC,yBAAtC;AAAgE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,mDAAzB;AAA6E,OAAM,mBAAN;AAA0B,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,0CAAxB;AAAmE,OAAM,sBAAN;AAA6B,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,iDAAvB;AAAyE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,mDAAzB;AAA6E,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,iDAAvB;AAAyE,OAAOC,CAAP,MAAa,yBAAb;AAAuC,OAAOC,CAAP,MAAa,oCAAb;AAAkD,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,0CAAvB;AAAkE,SAAOC,OAAO,IAAIC,CAAlB,EAAoBC,OAAO,IAAIC,CAA/B,EAAiCC,YAAY,IAAIC,CAAjD,EAAmDC,MAAM,IAAIC,CAA7D,QAAmE,iDAAnE;AAAqH,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,4CAAxB;AAAqE,OAAOC,CAAP,MAAa,UAAb;AAAwB,IAAIC,CAAJ;AAAM,MAAMC,CAAC,GAAC,IAAI/B,CAAJ,CAAM;AAACgC,EAAAA,GAAG,EAAC,KAAL;AAAWC,EAAAA,IAAI,EAAC,MAAhB;AAAuBC,EAAAA,KAAK,EAAC,OAA7B;AAAqCC,EAAAA,KAAK,EAAC,OAA3C;AAAmDC,EAAAA,IAAI,EAAC,KAAxD;AAA8DC,EAAAA,GAAG,EAAC,KAAlE;AAAwEC,EAAAA,GAAG,EAAC,KAA5E;AAAkFC,EAAAA,IAAI,EAAC,MAAvF;AAA8FC,EAAAA,GAAG,EAAC,KAAlG;AAAwGC,EAAAA,EAAE,EAAC,IAA3G;AAAgHC,EAAAA,GAAG,EAAC,KAApH;AAA0HC,EAAAA,GAAG,EAAC,KAA9H;AAAoIC,EAAAA,GAAG,EAAC,KAAxI;AAA8IC,EAAAA,IAAI,EAAC,MAAnJ;AAA0JC,EAAAA,KAAK,EAAC,OAAhK;AAAwKC,EAAAA,KAAK,EAAC,OAA9K;AAAsLC,EAAAA,IAAI,EAAC,MAA3L;AAAkMC,EAAAA,MAAM,EAAC,QAAzM;AAAkNC,EAAAA,GAAG,EAAC,KAAtN;AAA4NC,EAAAA,GAAG,EAAC;AAAhO,CAAN,CAAR;AAAsP,IAAIC,CAAC,GAACtB,CAAC,GAAC,cAAc5B,CAAd,CAAe;AAACmD,EAAAA,WAAW,CAACvD,CAAD,EAAG;AAAC,UAAMA,CAAN,GAAS,KAAKwD,GAAL,GAAS,EAAlB,EAAqB,KAAKC,MAAL,GAAY,IAAjC,EAAsC,KAAKC,MAAL,GAAY,IAAlD,EAAuD,KAAKC,QAAL,GAAc,CAArE,EAAuE,KAAKC,QAAL,GAAc,CAArF,EAAuF,KAAKC,IAAL,GAAU,IAAjG,EAAsG,KAAKC,gBAAL,GAAsB,IAA5H;AAAiI;;AAAa,SAAN3C,MAAM,CAACnB,CAAC,GAAC,EAAH,EAAM;AAAC,UAAK;AAAC+D,MAAAA,gBAAgB,EAAC7D,CAAC,GAAC,CAApB;AAAsB8D,MAAAA,MAAM,EAAC5D,CAA7B;AAA+ByD,MAAAA,IAAI,EAACrD,CAAC,GAAC,GAAtC;AAA0CsD,MAAAA,gBAAgB,EAACpD,CAAC,GAACQ,CAAC,CAAC+C,WAA/D;AAA2EC,MAAAA,OAAO,EAACtD,CAAC,GAAC;AAArF,QAAyFZ,CAA9F;;AAAgG,QAAG,CAACsB,CAAC,CAACZ,CAAD,CAAL,EAAS;AAAC,YAAMV,CAAC,GAAC,EAAR;AAAW,UAAGI,CAAH,EAAK,KAAI,IAAIF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACE,CAAC,CAAC+D,MAAhB,EAAuBjE,CAAC,EAAxB,EAA2B;AAAC,cAAMI,CAAC,GAACF,CAAC,CAACF,CAAD,CAAT;AAAaF,QAAAA,CAAC,CAACoE,IAAF,CAAO;AAACC,UAAAA,KAAK,EAACnE,CAAP;AAASoE,UAAAA,KAAK,EAAChE,CAAf;AAAiBiE,UAAAA,UAAU,EAACjE;AAA5B,SAAP;AAAuC,OAArF,MAAyF;AAAC,YAAIJ,CAAC,GAAC,IAAN;;AAAW,aAAI,IAAIE,CAAC,GAACQ,CAAC,GAAC,CAAZ,EAAcR,CAAC,IAAE,CAAjB,EAAmBA,CAAC,EAApB,EAAuBJ,CAAC,CAACwE,OAAF,CAAU;AAACH,UAAAA,KAAK,EAACjE,CAAP;AAASkE,UAAAA,KAAK,EAACpE,CAAf;AAAiBqE,UAAAA,UAAU,EAACrE;AAA5B,SAAV,GAA0CA,CAAC,IAAE,CAA7C;AAA+C;AAAA,aAAO,IAAI8B,CAAJ,CAAM;AAACwB,QAAAA,GAAG,EAAC,EAAL;AAAQiB,QAAAA,IAAI,EAACzE,CAAb;AAAe0D,QAAAA,MAAM,EAAC,IAAIzC,CAAJ,CAAM,CAAN,EAAQ,CAAR,EAAUP,CAAV,CAAtB;AAAmCmD,QAAAA,IAAI,EAAC,CAACrD,CAAD,EAAGA,CAAH,CAAxC;AAA8CsD,QAAAA,gBAAgB,EAACpD;AAA/D,OAAN,CAAP;AAAgF;;AAAA,UAAMI,CAAC,GAACU,CAAC,CAACd,CAAD,CAAT;AAAA,UAAaM,CAAC,GAAChB,CAAC,CAAC0D,MAAF,GAAS,IAAIzC,CAAJ,CAAM;AAACqC,MAAAA,CAAC,EAACtD,CAAC,CAAC0D,MAAF,CAASJ,CAAZ;AAAcvB,MAAAA,CAAC,EAAC/B,CAAC,CAAC0D,MAAF,CAAS3B,CAAzB;AAA2B+B,MAAAA,gBAAgB,EAACpD;AAA5C,KAAN,CAAT,GAA+D,IAAIO,CAAJ,CAAMH,CAAC,GAAC;AAACwC,MAAAA,CAAC,EAACxC,CAAC,CAAC4C,MAAF,CAAS,CAAT,CAAH;AAAe3B,MAAAA,CAAC,EAACjB,CAAC,CAAC4C,MAAF,CAAS,CAAT,CAAjB;AAA6BI,MAAAA,gBAAgB,EAACpD;AAA9C,KAAD,GAAkD;AAAC4C,MAAAA,CAAC,EAAC,CAAH;AAAKvB,MAAAA,CAAC,EAAC,CAAP;AAAS+B,MAAAA,gBAAgB,EAACpD;AAA1B,KAAzD,CAA9E;AAAA,UAAqKU,CAAC,GAAC,EAAvK;AAAA,UAA0KQ,CAAC,GAAC,KAAGtB,CAAC,CAACI,CAAD,CAAD,GAAK,KAAL,GAAWU,CAAd,CAA5K;AAAA,UAA6LU,CAAC,GAAC,EAA/L;AAAkM,QAAG1B,CAAH,EAAK,KAAI,IAAIE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAC,CAAC+D,MAAhB,EAAuB7D,CAAC,EAAxB,EAA2B;AAAC,YAAMN,CAAC,GAACI,CAAC,CAACE,CAAD,CAAT;AAAA,YAAaJ,CAAC,GAACF,CAAC,GAAC4B,CAAjB;AAAmBE,MAAAA,CAAC,CAACsC,IAAF,CAAO;AAACC,QAAAA,KAAK,EAAC/D,CAAP;AAASgE,QAAAA,KAAK,EAACtE,CAAf;AAAiBuE,QAAAA,UAAU,EAACrE;AAA5B,OAAP;AAAuC,KAA3F,MAA+F;AAAC,UAAIF,CAAC,GAAC0B,CAAC,CAAChB,CAAD,CAAD,GAAK,MAAIF,CAAJ,GAAM,iBAAX,GAA6B,MAAIA,CAAJ,GAAM,gBAAzC;AAA0D,YAAMJ,CAAC,GAACsE,IAAI,CAACC,IAAL,CAAU/D,CAAC,GAACV,CAAZ,CAAR;AAAuB4B,MAAAA,CAAC,CAACsC,IAAF,CAAO;AAACC,QAAAA,KAAK,EAAC,CAAP;AAASC,QAAAA,KAAK,EAACtE,CAAf;AAAiBuE,QAAAA,UAAU,EAACvE,CAAC,GAAC4B;AAA9B,OAAP;;AAAyC,WAAI,IAAItB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAd,EAAgBE,CAAC,EAAjB,EAAoB;AAAC,cAAMF,CAAC,GAACJ,CAAC,GAAC,KAAGE,CAAb;AAAA,cAAeM,CAAC,GAACJ,CAAC,GAACwB,CAAnB;AAAqBE,QAAAA,CAAC,CAACsC,IAAF,CAAO;AAACC,UAAAA,KAAK,EAAC/D,CAAP;AAASgE,UAAAA,KAAK,EAAClE,CAAf;AAAiBmE,UAAAA,UAAU,EAAC/D;AAA5B,SAAP,GAAuCR,CAAC,GAACI,CAAzC;AAA2C;AAAC;AAAA,WAAO,IAAI4B,CAAJ,CAAM;AAACwB,MAAAA,GAAG,EAACpC,CAAL;AAAOqD,MAAAA,IAAI,EAAC3C,CAAZ;AAAc4B,MAAAA,MAAM,EAAC1C,CAArB;AAAuB6C,MAAAA,IAAI,EAAC,CAACrD,CAAD,EAAGA,CAAH,CAA5B;AAAkCsD,MAAAA,gBAAgB,EAACpD;AAAnD,KAAN,CAAP;AAAoE;;AAAe,MAAXkE,WAAW,GAAE;AAAC,UAAK;AAACd,MAAAA,gBAAgB,EAAC9D,CAAlB;AAAoB0D,MAAAA,MAAM,EAACxD;AAA3B,QAA8B,IAAnC;;AAAwC,QAAGF,CAAC,IAAEE,CAAN,EAAQ;AAAC,YAAME,CAAC,GAACoB,CAAC,CAACxB,CAAD,CAAT;AAAa,aAAOA,CAAC,CAAC4E,WAAF,IAAeF,IAAI,CAACG,GAAL,CAASzE,CAAC,CAACsD,MAAF,CAAS,CAAT,IAAYxD,CAAC,CAACoD,CAAvB,KAA2BlD,CAAC,CAAC0E,EAAnD;AAAsD;;AAAA,WAAM,CAAC,CAAP;AAAS;;AAAAC,EAAAA,UAAU,CAAC/E,CAAD,EAAGE,CAAH,EAAK;AAAC,WAAOe,CAAC,CAAC+D,QAAF,CAAW;AAAClB,MAAAA,gBAAgB,EAAC5D,CAAC,CAAC4D,gBAApB;AAAqC,SAAG9D;AAAxC,KAAX,CAAP;AAA8D;;AAAQ,MAAJyE,IAAI,CAACzE,CAAD,EAAG;AAAC,QAAIE,CAAC,GAAC,CAAN;AAAA,QAAQE,CAAC,GAAC,CAAV;AAAY,UAAME,CAAC,GAAC,EAAR;AAAW,SAAK2E,WAAL,GAAiB,EAAjB,EAAoBjF,CAAC,KAAGE,CAAC,GAAC,CAAC,CAAD,GAAG,CAAL,EAAOE,CAAC,GAAC,IAAE,CAAX,EAAaJ,CAAC,CAACkF,OAAF,CAAWlF,CAAC,IAAE;AAACM,MAAAA,CAAC,CAAC8D,IAAF,CAAOpE,CAAC,CAACsE,KAAT,GAAgBpE,CAAC,GAACF,CAAC,CAACsE,KAAF,GAAQpE,CAAR,GAAUF,CAAC,CAACsE,KAAZ,GAAkBpE,CAApC,EAAsCE,CAAC,GAACJ,CAAC,CAACsE,KAAF,GAAQlE,CAAR,GAAUJ,CAAC,CAACsE,KAAZ,GAAkBlE,CAA1D,EAA4D,KAAK6E,WAAL,CAAiBjF,CAAC,CAACqE,KAAnB,IAA0BrE,CAAtF;AAAwF,KAAvG,CAAhB,CAArB,EAAgJ,KAAKmF,IAAL,CAAU,QAAV,EAAmB7E,CAAnB,CAAhJ,EAAsK,KAAK6E,IAAL,CAAU,UAAV,EAAqBjF,CAArB,CAAtK,EAA8L,KAAKiF,IAAL,CAAU,UAAV,EAAqB/E,CAArB,CAA9L,EAAsN,KAAK+E,IAAL,CAAU,MAAV,EAAiBnF,CAAjB,CAAtN,EAA0O,KAAKoF,yBAAL,EAA1O;AAA2Q;;AAAAC,EAAAA,QAAQ,CAACrF,CAAD,EAAGE,CAAH,EAAK;AAAC,WAAM,CAACA,CAAC,CAACoF,IAAH,EAAQpF,CAAC,CAACqF,IAAV,CAAN;AAAsB;;AAAAC,EAAAA,SAAS,CAACxF,CAAD,EAAGE,CAAH,EAAK;AAACA,IAAAA,CAAC,CAACoF,IAAF,GAAOtF,CAAC,CAAC,CAAD,CAAR,EAAYE,CAAC,CAACqF,IAAF,GAAOvF,CAAC,CAAC,CAAD,CAApB;AAAwB;;AAAAyF,EAAAA,WAAW,CAACzF,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAK8D,MAAb;AAAoB,QAAGhE,CAAC,IAAE,CAAN,EAAQ,OAAOE,CAAC,CAAC,CAAD,CAAR;AAAY,QAAGF,CAAC,IAAEE,CAAC,CAACiE,MAAF,GAAS,CAAf,EAAiB,OAAOjE,CAAC,CAACA,CAAC,CAACiE,MAAF,GAAS,CAAV,CAAR;AAAqB;AAAC,YAAM/D,CAAC,GAACsE,IAAI,CAACgB,KAAL,CAAW1F,CAAX,CAAR;AAAA,YAAsBM,CAAC,GAACF,CAAC,GAAC,CAA1B;AAA4B,aAAOF,CAAC,CAACE,CAAD,CAAD,GAAK,CAACF,CAAC,CAACE,CAAD,CAAD,GAAKF,CAAC,CAACI,CAAD,CAAP,MAAcN,CAAC,GAACI,CAAhB,CAAZ;AAA+B;AAAC;;AAAAuF,EAAAA,WAAW,CAAC3F,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAK8D,MAAb;AAAA,UAAoB5D,CAAC,GAACF,CAAC,CAACiE,MAAF,GAAS,CAA/B;AAAiC,QAAI7D,CAAC,GAAC,CAAN;;AAAQ,WAAKA,CAAC,GAACF,CAAP,EAASE,CAAC,EAAV,EAAa;AAAC,YAAMF,CAAC,GAACF,CAAC,CAACI,CAAD,CAAT;AAAA,YAAaE,CAAC,GAACN,CAAC,CAACI,CAAC,GAAC,CAAH,CAAhB;AAAsB,UAAGF,CAAC,IAAEJ,CAAN,EAAQ,OAAOM,CAAP;AAAS,UAAGE,CAAC,KAAGR,CAAP,EAAS,OAAOM,CAAC,GAAC,CAAT;AAAW,UAAGF,CAAC,GAACJ,CAAF,IAAKQ,CAAC,GAACR,CAAV,EAAY,OAAOM,CAAC,GAACoE,IAAI,CAACkB,GAAL,CAASxF,CAAC,GAACJ,CAAX,IAAc0E,IAAI,CAACkB,GAAL,CAASxF,CAAC,GAACI,CAAX,CAAvB;AAAqC;;AAAA,WAAOF,CAAP;AAAS;;AAAAuF,EAAAA,SAAS,CAAC7F,CAAD,EAAGE,CAAC,GAAC,GAAL,EAAS;AAAC,UAAME,CAAC,GAAC,KAAKuF,WAAL,CAAiB3F,CAAjB,CAAR;AAA4B,WAAOI,CAAC,GAACsE,IAAI,CAACgB,KAAL,CAAWtF,CAAX,CAAF,IAAiBF,CAAjB,GAAmB,KAAKuF,WAAL,CAAiBf,IAAI,CAACC,IAAL,CAAUvE,CAAV,CAAjB,CAAnB,GAAkD,KAAKqF,WAAL,CAAiBf,IAAI,CAACgB,KAAL,CAAWtF,CAAX,CAAjB,CAAzD;AAAyF;;AAAA0F,EAAAA,MAAM,CAAC9F,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;AAAC,UAAME,CAAC,GAAC,KAAKuF,KAAL,CAAW/F,CAAX,CAAR;AAAsB,QAAG,CAACQ,CAAJ,EAAM,OAAO,IAAP;AAAY,QAAIE,CAAJ,EAAME,CAAN;AAAQ,QAAG,YAAU,OAAOV,CAApB,EAAsBQ,CAAC,GAACR,CAAF,EAAIU,CAAC,GAACR,CAAN,CAAtB,KAAmC,IAAGwB,CAAC,CAAC1B,CAAC,CAAC4D,gBAAH,EAAoB,KAAKA,gBAAzB,CAAJ,EAA+CpD,CAAC,GAACR,CAAC,CAACoD,CAAJ,EAAM1C,CAAC,GAACV,CAAC,CAAC6B,CAAV,EAAYzB,CAAC,GAACF,CAAd,CAA/C,KAAmE;AAAC,YAAMJ,CAAC,GAAC8B,CAAC,CAAC5B,CAAD,EAAG,KAAK4D,gBAAR,CAAT;AAAmC,UAAG,CAAC9D,CAAJ,EAAM,OAAO,IAAP;AAAYU,MAAAA,CAAC,GAACV,CAAC,CAACsD,CAAJ,EAAM1C,CAAC,GAACZ,CAAC,CAAC+B,CAAV,EAAYzB,CAAC,GAACF,CAAd;AAAgB;AAAA,UAAMU,CAAC,GAACN,CAAC,CAAC+D,UAAF,GAAa,KAAKV,IAAL,CAAU,CAAV,CAArB;AAAA,UAAkC7C,CAAC,GAACR,CAAC,CAAC+D,UAAF,GAAa,KAAKV,IAAL,CAAU,CAAV,CAAjD;AAA8D,WAAOvD,CAAC,KAAGA,CAAC,GAAC;AAAC0F,MAAAA,EAAE,EAAC,IAAJ;AAAS3B,MAAAA,KAAK,EAAC,CAAf;AAAiB4B,MAAAA,GAAG,EAAC,CAArB;AAAuBC,MAAAA,GAAG,EAAC,CAA3B;AAA6BC,MAAAA,MAAM,EAAC/E,CAAC;AAArC,KAAL,CAAD,EAAgDd,CAAC,CAAC+D,KAAF,GAAQrE,CAAxD,EAA0DM,CAAC,CAAC2F,GAAF,GAAMvB,IAAI,CAACgB,KAAL,CAAW,CAAC,KAAKhC,MAAL,CAAY3B,CAAZ,GAAcnB,CAAf,IAAkBI,CAAlB,GAAoB,IAA/B,CAAhE,EAAqGV,CAAC,CAAC4F,GAAF,GAAMxB,IAAI,CAACgB,KAAL,CAAW,CAAChF,CAAC,GAAC,KAAKgD,MAAL,CAAYJ,CAAf,IAAkBxC,CAAlB,GAAoB,IAA/B,CAA3G,EAAgJ,KAAKsF,cAAL,CAAoB9F,CAApB,CAAhJ,EAAuKA,CAA9K;AAAgL;;AAAA8F,EAAAA,cAAc,CAACpG,CAAD,EAAGE,CAAC,GAAC,CAAL,EAAO;AAAC,QAAIE,CAAC,GAAC,KAAK2F,KAAL,CAAW/F,CAAC,CAACqE,KAAb,CAAN;;AAA0B,QAAG,CAACjE,CAAD,IAAI,MAAIF,CAAX,EAAa;AAAC,YAAMA,CAAC,GAAC,KAAKuE,IAAL,CAAU,KAAKA,IAAL,CAAUN,MAAV,GAAiB,CAA3B,CAAR;AAAsCjE,MAAAA,CAAC,CAACmE,KAAF,GAAQrE,CAAC,CAACqE,KAAV,KAAkBjE,CAAC,GAACF,CAApB;AAAuB;;AAAA,QAAG,CAACE,CAAJ,EAAM;AAAO,UAAME,CAAC,GAACN,CAAC,CAACqE,KAAF,GAAQjE,CAAC,CAACiE,KAAlB;AAAA,UAAwB7D,CAAC,GAACJ,CAAC,CAACmE,UAAF,GAAa,KAAKV,IAAL,CAAU,CAAV,CAAb,GAA0B,KAAGvD,CAAvD;AAAA,UAAyDI,CAAC,GAACN,CAAC,CAACmE,UAAF,GAAa,KAAKV,IAAL,CAAU,CAAV,CAAb,GAA0B,KAAGvD,CAAxF;AAA0FN,IAAAA,CAAC,CAACgG,EAAF,GAAM,GAAEhG,CAAC,CAACqE,KAAM,IAAGrE,CAAC,CAACiG,GAAI,IAAGjG,CAAC,CAACkG,GAAI,EAAlC,EAAoClG,CAAC,CAACmG,MAAF,KAAWnG,CAAC,CAACmG,MAAF,GAAS/E,CAAC,EAArB,CAApC,EAA6DpB,CAAC,CAACmG,MAAF,CAAS,CAAT,IAAY,KAAKzC,MAAL,CAAYJ,CAAZ,GAActD,CAAC,CAACkG,GAAF,GAAM1F,CAA7F,EAA+FR,CAAC,CAACmG,MAAF,CAAS,CAAT,IAAY,KAAKzC,MAAL,CAAY3B,CAAZ,GAAc,CAAC/B,CAAC,CAACiG,GAAF,GAAM,CAAP,IAAUvF,CAAnI,EAAqIV,CAAC,CAACmG,MAAF,CAAS,CAAT,IAAYnG,CAAC,CAACmG,MAAF,CAAS,CAAT,IAAY3F,CAA7J,EAA+JR,CAAC,CAACmG,MAAF,CAAS,CAAT,IAAYnG,CAAC,CAACmG,MAAF,CAAS,CAAT,IAAYzF,CAAvL;AAAyL;;AAAA2F,EAAAA,YAAY,CAACrG,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKoG,eAAL,CAAqBtG,CAAC,CAACqE,KAAvB,CAAR;AAAsC,WAAM,EAAE,CAACnE,CAAD,IAAI,CAAC,CAAD,KAAKA,CAAC,CAACqG,WAAb,MAA4BvG,CAAC,CAACqE,KAAF,GAAQnE,CAAC,CAACqG,WAAV,EAAsBvG,CAAC,CAACiG,GAAF,GAAMvB,IAAI,CAACgB,KAAL,CAAW1F,CAAC,CAACiG,GAAF,GAAM/F,CAAC,CAACsG,MAAR,GAAe,IAA1B,CAA5B,EAA4DxG,CAAC,CAACkG,GAAF,GAAMxB,IAAI,CAACgB,KAAL,CAAW1F,CAAC,CAACkG,GAAF,GAAMhG,CAAC,CAACsG,MAAR,GAAe,IAA1B,CAAlE,EAAkG,KAAKJ,cAAL,CAAoBpG,CAApB,CAAlG,EAAyH,CAAC,CAAtJ,CAAN;AAA+J;;AAAAyG,EAAAA,aAAa,CAACzG,CAAD,EAAGE,CAAH,EAAK;AAAC,UAAK;AAACqE,MAAAA,UAAU,EAACnE;AAAZ,QAAe,KAAK2F,KAAL,CAAW7F,CAAC,CAACmE,KAAb,CAApB;AAAA,UAAwC/D,CAAC,GAACF,CAAC,GAAC,KAAKyD,IAAL,CAAU,CAAV,CAA5C;AAAA,UAAyDrD,CAAC,GAACJ,CAAC,GAAC,KAAKyD,IAAL,CAAU,CAAV,CAA7D;AAA0E,WAAO7D,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK0D,MAAL,CAAYJ,CAAZ,GAAcpD,CAAC,CAACgG,GAAF,GAAM5F,CAAzB,EAA2BN,CAAC,CAAC,CAAD,CAAD,GAAK,KAAK0D,MAAL,CAAY3B,CAAZ,GAAc,CAAC7B,CAAC,CAAC+F,GAAF,GAAM,CAAP,IAAUzF,CAAxD,EAA0DR,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKM,CAApE,EAAsEN,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAD,GAAKQ,CAAhF,EAAkFR,CAAzF;AAA2F;;AAAA+F,EAAAA,KAAK,CAAC/F,CAAD,EAAG;AAAC,WAAO,KAAKiF,WAAL,IAAkB,KAAKA,WAAL,CAAiBjF,CAAjB,CAAlB,IAAuC,IAA9C;AAAmD;;AAAA0G,EAAAA,KAAK,GAAE;AAAC,WAAO1E,CAAC,CAACgD,QAAF,CAAW,KAAK2B,KAAL,CAAW,EAAX,CAAX,CAAP;AAAkC;;AAAAvB,EAAAA,yBAAyB,GAAE;AAAC,UAAMpF,CAAC,GAAC,KAAKyE,IAAb;AAAkB,SAAK6B,eAAL,GAAqB,EAArB;AAAwB,QAAIpG,CAAC,GAAC,IAAN;;AAAW,SAAI,IAAIE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACJ,CAAC,CAACmE,MAAhB,EAAuB/D,CAAC,EAAxB,EAA2B;AAAC,YAAME,CAAC,GAACN,CAAC,CAACI,CAAD,CAAT;AAAa,WAAKkG,eAAL,CAAqBhG,CAAC,CAAC+D,KAAvB,IAA8B;AAACkC,QAAAA,WAAW,EAACrG,CAAC,GAACA,CAAC,CAACmE,KAAH,GAAS,CAAC,CAAxB;AAA0BmC,QAAAA,MAAM,EAACtG,CAAC,GAACA,CAAC,CAACqE,UAAF,GAAajE,CAAC,CAACiE,UAAhB,GAA2B;AAA7D,OAA9B,EAA8FrE,CAAC,GAACI,CAAhG;AAAkG;AAAC;;AAAnsH,CAAvB;AAA4tHN,CAAC,CAAC,CAACQ,CAAC,CAAC;AAACoG,EAAAA,IAAI,EAACC,MAAN;AAAaC,EAAAA,IAAI,EAAC;AAACH,IAAAA,KAAK,EAAC,CAAC;AAAR;AAAlB,CAAD,CAAF,CAAD,EAAoCrD,CAAC,CAACyD,SAAtC,EAAgD,oBAAhD,EAAqE,KAAK,CAA1E,CAAD,EAA8E/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAACoG,EAAAA,IAAI,EAACC,MAAN;AAAaC,EAAAA,IAAI,EAAC;AAACH,IAAAA,KAAK,EAAC,CAAC;AAAR;AAAlB,CAAD,CAAF,CAAD,EAAoCrD,CAAC,CAACyD,SAAtC,EAAgD,KAAhD,EAAsD,KAAK,CAA3D,CAA/E,EAA6I/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAACoG,EAAAA,IAAI,EAACI,MAAN;AAAaF,EAAAA,IAAI,EAAC;AAACG,IAAAA,IAAI,EAAChF,CAAC,CAACgF,IAAR;AAAaN,IAAAA,KAAK,EAAC1E,CAAC,CAAC0E,KAArB;AAA2BO,IAAAA,OAAO,EAAC;AAAC,mBAAY;AAACD,QAAAA,IAAI,EAAC,CAAC,CAAP;AAASN,QAAAA,KAAK,EAAC,CAAC;AAAhB;AAAb;AAAnC;AAAlB,CAAD,CAAF,CAAD,EAA8FrD,CAAC,CAACyD,SAAhG,EAA0G,QAA1G,EAAmH,KAAK,CAAxH,CAA9I,EAAyQ/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAAC2G,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7D,CAAC,CAACyD,SAAtB,EAAgC,aAAhC,EAA8C,IAA9C,CAA1Q,EAA8T/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAACoG,EAAAA,IAAI,EAAC3F,CAAN;AAAQ6F,EAAAA,IAAI,EAAC;AAACH,IAAAA,KAAK,EAAC,CAAC;AAAR;AAAb,CAAD,CAAF,CAAD,EAA+BrD,CAAC,CAACyD,SAAjC,EAA2C,QAA3C,EAAoD,KAAK,CAAzD,CAA/T,EAA2X/G,CAAC,CAAC,CAACY,CAAC,CAAC,QAAD,CAAF,CAAD,EAAe0C,CAAC,CAACyD,SAAjB,EAA2B,YAA3B,EAAwC,IAAxC,CAA5X,EAA0a/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAACoG,EAAAA,IAAI,EAAC,CAAC7E,CAAD,CAAN;AAAUqF,EAAAA,KAAK,EAAC,IAAhB;AAAqBN,EAAAA,IAAI,EAAC;AAACH,IAAAA,KAAK,EAAC,CAAC;AAAR;AAA1B,CAAD,CAAF,CAAD,EAA4CrD,CAAC,CAACyD,SAA9C,EAAwD,MAAxD,EAA+D,IAA/D,CAA3a,EAAgf/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAAC2G,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7D,CAAC,CAACyD,SAAtB,EAAgC,UAAhC,EAA2C,KAAK,CAAhD,CAAjf,EAAoiB/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAAC2G,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7D,CAAC,CAACyD,SAAtB,EAAgC,UAAhC,EAA2C,KAAK,CAAhD,CAAriB,EAAwlB/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAAC2G,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7D,CAAC,CAACyD,SAAtB,EAAgC,QAAhC,EAAyC,KAAK,CAA9C,CAAzlB,EAA0oB/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAAC6G,EAAAA,IAAI,EAACrH,CAAC,IAAEsH,KAAK,CAACC,OAAN,CAAcvH,CAAd,IAAiBA,CAAjB,GAAmB,YAAU,OAAOA,CAAjB,GAAmB,CAACA,CAAD,EAAGA,CAAH,CAAnB,GAAyB,CAAC,GAAD,EAAK,GAAL;AAArD,CAAD,CAAF,CAAD,EAAsEsD,CAAC,CAACyD,SAAxE,EAAkF,MAAlF,EAAyF,KAAK,CAA9F,CAA3oB,EAA4uB/G,CAAC,CAAC,CAACY,CAAC,CAAC,MAAD,EAAQ,CAAC,MAAD,EAAQ,MAAR,CAAR,CAAF,CAAD,EAA6B0C,CAAC,CAACyD,SAA/B,EAAyC,UAAzC,EAAoD,IAApD,CAA7uB,EAAuyB/G,CAAC,CAAC,CAACgB,CAAC,CAAC,MAAD,EAAQ;AAACsE,EAAAA,IAAI,EAAC;AAACsB,IAAAA,IAAI,EAAClG;AAAN,GAAN;AAAe6E,EAAAA,IAAI,EAAC;AAACqB,IAAAA,IAAI,EAAClG;AAAN;AAApB,CAAR,CAAF,CAAD,EAA2C4C,CAAC,CAACyD,SAA7C,EAAuD,WAAvD,EAAmE,IAAnE,CAAxyB,EAAi3B/G,CAAC,CAAC,CAACQ,CAAC,CAAC;AAACoG,EAAAA,IAAI,EAAC1F,CAAN;AAAQ4F,EAAAA,IAAI,EAAC;AAACH,IAAAA,KAAK,EAAC,CAAC;AAAR;AAAb,CAAD,CAAF,CAAD,EAA+BrD,CAAC,CAACyD,SAAjC,EAA2C,kBAA3C,EAA8D,KAAK,CAAnE,CAAl3B,EAAw7BzD,CAAC,GAACtB,CAAC,GAAChC,CAAC,CAAC,CAACc,CAAC,CAAC,8BAAD,CAAF,CAAD,EAAqCwC,CAArC,CAA77B;AAAq+B,IAAIkE,CAAC,GAAClE,CAAN;AAAQ,eAAekE,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONMap as t}from\"../../core/jsonMap.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import{Integer as i}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import p from\"../../geometry/Point.js\";import c from\"../../geometry/SpatialReference.js\";import{create as u}from\"../../geometry/support/aaBoundingRect.js\";import{isValid as f,getInfo as h,isGeographic as m,equals as d}from\"../../geometry/support/spatialReferenceUtils.js\";import{project as g}from\"../../geometry/support/webMercatorUtils.js\";import y from\"./LOD.js\";var v;const w=new t({PNG:\"png\",PNG8:\"png8\",PNG24:\"png24\",PNG32:\"png32\",JPEG:\"jpg\",JPG:\"jpg\",DIB:\"dib\",TIFF:\"tiff\",EMF:\"emf\",PS:\"ps\",PDF:\"pdf\",GIF:\"gif\",SVG:\"svg\",SVGZ:\"svgz\",Mixed:\"mixed\",MIXED:\"mixed\",LERC:\"lerc\",LERC2D:\"lerc2d\",RAW:\"raw\",pbf:\"pbf\"});let x=v=class extends o{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:o,size:s=256,spatialReference:i=c.WebMercator,numLODs:l=24}=e;if(!f(i)){const e=[];if(o)for(let t=0;t<o.length;t++){const r=o[t];e.push({level:t,scale:r,resolution:r})}else{let t=5e-4;for(let o=l-1;o>=0;o--)e.unshift({level:o,scale:t,resolution:t}),t*=2}return new v({dpi:96,lods:e,origin:new p(0,0,i),size:[s,s],spatialReference:i})}const n=h(i),a=e.origin?new p({x:e.origin.x,y:e.origin.y,spatialReference:i}):new p(n?{x:n.origin[0],y:n.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),u=96,d=1/(r(i)*39.37*u),g=[];if(o)for(let r=0;r<o.length;r++){const e=o[r],t=e*d;g.push({level:r,scale:e,resolution:t})}else{let e=m(i)?512/s*591657527.5917094:256/s*591657527.591555;const o=Math.ceil(l/t);g.push({level:0,scale:e,resolution:e*d});for(let r=1;r<o;r++){const o=e/2**t,s=o*d;g.push({level:r,scale:o,resolution:s}),e=o}}return new v({dpi:u,lods:g,origin:a,size:[s,s],spatialReference:i})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const o=h(e);return e.isWrappable&&Math.abs(o.origin[0]-t.x)<=o.dx}return!1}readOrigin(e,t){return p.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,o=0;const r=[];this._levelToLOD={},e&&(t=-1/0,o=1/0,e.forEach((e=>{r.push(e.scale),t=e.scale>t?e.scale:t,o=e.scale<o?e.scale:o,this._levelToLOD[e.level]=e}))),this._set(\"scales\",r),this._set(\"minScale\",t),this._set(\"maxScale\",o),this._set(\"lods\",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[0]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const o=Math.floor(e),r=o+1;return t[o]/(t[o]/t[r])**(e-o)}}scaleToZoom(e){const t=this.scales,o=t.length-1;let r=0;for(;r<o;r++){const o=t[r],s=t[r+1];if(o<=e)return r;if(s===e)return r+1;if(o>e&&s<e)return r+Math.log(o/e)/Math.log(o/s)}return r}snapScale(e,t=.95){const o=this.scaleToZoom(e);return o%Math.floor(o)>=t?this.zoomToScale(Math.ceil(o)):this.zoomToScale(Math.floor(o))}tileAt(e,t,o,r){const s=this.lodAt(e);if(!s)return null;let i,l;if(\"number\"==typeof t)i=t,l=o;else if(d(t.spatialReference,this.spatialReference))i=t.x,l=t.y,r=o;else{const e=g(t,this.spatialReference);if(!e)return null;i=e.x,l=e.y,r=o}const n=s.resolution*this.size[0],a=s.resolution*this.size[1];return r||(r={id:null,level:0,row:0,col:0,extent:u()}),r.level=e,r.row=Math.floor((this.origin.y-l)/a+.001),r.col=Math.floor((i-this.origin.x)/n+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=0){let o=this.lodAt(e.level);if(!o&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(o=t)}if(!o)return;const r=e.level-o.level,s=o.resolution*this.size[0]/2**r,i=o.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=u()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*i,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+i}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:o}=this.lodAt(t.level),r=o*this.size[0],s=o*this.size[1];return e[0]=this.origin.x+t.col*r,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+r,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return v.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let o=0;o<e.length;o++){const r=e[o];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};e([s({type:Number,json:{write:!0}})],x.prototype,\"compressionQuality\",void 0),e([s({type:Number,json:{write:!0}})],x.prototype,\"dpi\",void 0),e([s({type:String,json:{read:w.read,write:w.write,origins:{\"web-scene\":{read:!1,write:!1}}}})],x.prototype,\"format\",void 0),e([s({readOnly:!0})],x.prototype,\"isWrappable\",null),e([s({type:p,json:{write:!0}})],x.prototype,\"origin\",void 0),e([l(\"origin\")],x.prototype,\"readOrigin\",null),e([s({type:[y],value:null,json:{write:!0}})],x.prototype,\"lods\",null),e([s({readOnly:!0})],x.prototype,\"minScale\",void 0),e([s({readOnly:!0})],x.prototype,\"maxScale\",void 0),e([s({readOnly:!0})],x.prototype,\"scales\",void 0),e([s({cast:e=>Array.isArray(e)?e:\"number\"==typeof e?[e,e]:[256,256]})],x.prototype,\"size\",void 0),e([l(\"size\",[\"rows\",\"cols\"])],x.prototype,\"readSize\",null),e([a(\"size\",{cols:{type:i},rows:{type:i}})],x.prototype,\"writeSize\",null),e([s({type:c,json:{write:!0}})],x.prototype,\"spatialReference\",void 0),x=v=e([n(\"esri.layers.support.TileInfo\")],x);var S=x;export default S;\n"]},"metadata":{},"sourceType":"module"}