{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Evented.js\";\nimport o from \"../../core/Handles.js\";\nimport { isSome as i } from \"../../core/maybe.js\";\nimport { watch as n, pausable as s } from \"../../core/watchUtils.js\";\nimport { property as r } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nlet c = class extends t.EventedAccessor {\n  constructor(e) {\n    super(e), this._anchorHandles = new o(), this.location = null, this.screenLocation = null, this.screenLocationEnabled = !1, this.view = null, this._anchorHandles.add([n(this, [\"screenLocationEnabled\", \"location\", \"view.size\", \"view.stationary\"], () => this._updateScreenPointAndHandle()), n(this, [\"view\", \"view.ready\"], () => this._wireUpView())]);\n  }\n\n  destroy() {\n    this.view = null, this._anchorHandles && this._anchorHandles.destroy(), this._anchorHandles = null, this._viewpointHandle = null;\n  }\n\n  _wireUpView() {\n    const e = \"view\";\n    this._anchorHandles.remove(e), this._viewpointHandle = null;\n    if (!this.get(\"view.ready\")) return;\n\n    this._setScreenLocation();\n\n    const {\n      view: t\n    } = this,\n          o = \"3d\" === t.type ? \"camera\" : \"viewpoint\",\n          i = s(t, o, () => this._viewpointChange());\n    this._anchorHandles.add(i, e), this._viewpointHandle = i, this._toggleWatchingViewpoint();\n  }\n\n  _viewpointChange() {\n    this._setScreenLocation(), this.emit(\"view-change\");\n  }\n\n  _updateScreenPointAndHandle() {\n    this._setScreenLocation(), this._toggleWatchingViewpoint();\n  }\n\n  _toggleWatchingViewpoint() {\n    const {\n      _viewpointHandle: e,\n      location: t,\n      screenLocationEnabled: o\n    } = this;\n    if (!e) return;\n    t && o ? e.resume() : e.pause();\n  }\n\n  _setScreenLocation() {\n    const {\n      location: e,\n      view: t,\n      screenLocationEnabled: o\n    } = this,\n          n = this.get(\"view.ready\"),\n          s = o && n && i(e) ? t.toScreen(e) : null;\n\n    this._set(\"screenLocation\", s);\n  }\n\n};\ne([r()], c.prototype, \"location\", void 0), e([r({\n  readOnly: !0\n})], c.prototype, \"screenLocation\", void 0), e([r()], c.prototype, \"screenLocationEnabled\", void 0), e([r()], c.prototype, \"view\", void 0), c = e([a(\"esri.widgets.support.AnchorElementViewModel\")], c);\nvar l = c;\nexport default l;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/widgets/support/AnchorElementViewModel.js"],"names":["_","e","t","o","isSome","i","watch","n","pausable","s","property","r","subclass","a","c","EventedAccessor","constructor","_anchorHandles","location","screenLocation","screenLocationEnabled","view","add","_updateScreenPointAndHandle","_wireUpView","destroy","_viewpointHandle","remove","get","_setScreenLocation","type","_viewpointChange","_toggleWatchingViewpoint","emit","resume","pause","toScreen","_set","prototype","readOnly","l"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Evented.js\";import o from\"../../core/Handles.js\";import{isSome as i}from\"../../core/maybe.js\";import{watch as n,pausable as s}from\"../../core/watchUtils.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";let c=class extends t.EventedAccessor{constructor(e){super(e),this._anchorHandles=new o,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([n(this,[\"screenLocationEnabled\",\"location\",\"view.size\",\"view.stationary\"],(()=>this._updateScreenPointAndHandle())),n(this,[\"view\",\"view.ready\"],(()=>this._wireUpView()))])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const e=\"view\";this._anchorHandles.remove(e),this._viewpointHandle=null;if(!this.get(\"view.ready\"))return;this._setScreenLocation();const{view:t}=this,o=\"3d\"===t.type?\"camera\":\"viewpoint\",i=s(t,o,(()=>this._viewpointChange()));this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit(\"view-change\")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:o}=this;if(!e)return;t&&o?e.resume():e.pause()}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:o}=this,n=this.get(\"view.ready\"),s=o&&n&&i(e)?t.toScreen(e):null;this._set(\"screenLocation\",s)}};e([r()],c.prototype,\"location\",void 0),e([r({readOnly:!0})],c.prototype,\"screenLocation\",void 0),e([r()],c.prototype,\"screenLocationEnabled\",void 0),e([r()],c.prototype,\"view\",void 0),c=e([a(\"esri.widgets.support.AnchorElementViewModel\")],c);var l=c;export default l;\n"]},"metadata":{},"sourceType":"module"}