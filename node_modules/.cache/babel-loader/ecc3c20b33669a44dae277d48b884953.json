{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport \"../../core/has.js\";\nimport o from \"../../core/Logger.js\";\nimport { isSome as i } from \"../../core/maybe.js\";\nimport { debounce as s } from \"../../core/promiseUtils.js\";\nimport { urlToObject as a } from \"../../core/urlUtils.js\";\nimport { property as n } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { reader as l } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as p } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as d } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { updateOrigins as c } from \"../../core/accessorSupport/originUtils.js\";\nimport u from \"../../geometry/Extent.js\";\nimport m from \"../../geometry/HeightModelInfo.js\";\nimport y from \"../../geometry/SpatialReference.js\";\nimport { titleFromUrlAndName as h, parse as f, cleanTitle as v, sanitizeUrlWithLayerId as g, writeUrlWithLayerId as S } from \"../support/arcgisLayerUrl.js\";\nimport { id as w, url as I } from \"../support/commonProperties.js\";\nimport { fetchIndexInfo as x } from \"../support/I3SIndexInfo.js\";\nimport b from \"../../portal/Portal.js\";\nimport j from \"../../portal/PortalItem.js\";\nimport { saveResources as _ } from \"../../webdoc/support/saveUtils.js\";\n\nconst N = o.getLogger(\"esri.layers.mixins.SceneService\"),\n      R = o => {\n  let R = class extends o {\n    constructor() {\n      super(...arguments), this.spatialReference = null, this.fullExtent = null, this.heightModelInfo = null, this.minScale = 0, this.maxScale = 0, this.version = {\n        major: Number.NaN,\n        minor: Number.NaN,\n        versionString: \"\"\n      }, this.copyright = null, this.sublayerTitleMode = \"item-title\", this.title = null, this.layerId = null, this.indexInfo = null, this._debouncedSaveOperations = s(async (e, t, r) => {\n        switch (e) {\n          case 0:\n            return this._save(t);\n\n          case 1:\n            return this._saveAs(r, t);\n        }\n      });\n    }\n\n    readSpatialReference(e, t) {\n      return this._readSpatialReference(t);\n    }\n\n    _readSpatialReference(e) {\n      if (null != e.spatialReference) return y.fromJSON(e.spatialReference);\n      {\n        const t = e.store,\n              r = t.indexCRS || t.geographicCRS,\n              o = r && parseInt(r.substring(r.lastIndexOf(\"/\") + 1, r.length), 10);\n        return null != o ? new y(o) : null;\n      }\n    }\n\n    readFullExtent(e, t, r) {\n      if (null != e && \"object\" == typeof e) return u.fromJSON(e, r);\n\n      const o = t.store,\n            i = this._readSpatialReference(t);\n\n      return null == i || null == o || null == o.extent || !Array.isArray(o.extent) || o.extent.some(e => e < O) ? null : new u({\n        xmin: o.extent[0],\n        ymin: o.extent[1],\n        xmax: o.extent[2],\n        ymax: o.extent[3],\n        spatialReference: i\n      });\n    }\n\n    readVersion(e, t) {\n      const r = t.store,\n            o = null != r.version ? r.version.toString() : \"\",\n            i = {\n        major: Number.NaN,\n        minor: Number.NaN,\n        versionString: o\n      },\n            s = o.split(\".\");\n      return s.length >= 2 && (i.major = parseInt(s[0], 10), i.minor = parseInt(s[1], 10)), i;\n    }\n\n    readTitlePortalItem(e) {\n      return \"item-title\" !== this.sublayerTitleMode ? void 0 : e;\n    }\n\n    readTitleService(e, t) {\n      const r = this.portalItem && this.portalItem.title;\n      if (\"item-title\" === this.sublayerTitleMode) return h(this.url, t.name);\n      let o = t.name;\n\n      if (!o && this.url) {\n        const e = f(this.url);\n        i(e) && (o = e.title);\n      }\n\n      return \"item-title-and-service-name\" === this.sublayerTitleMode && r && (o = r + \" - \" + o), v(o);\n    }\n\n    set url(e) {\n      const t = g({\n        layer: this,\n        url: e,\n        nonStandardUrlAllowed: !1,\n        logger: N\n      });\n      this._set(\"url\", t.url), null != t.layerId && this._set(\"layerId\", t.layerId);\n    }\n\n    writeUrl(e, t, r, o) {\n      S(this, e, \"layers\", t, o);\n    }\n\n    get parsedUrl() {\n      const e = this._get(\"url\");\n\n      if (!e) return null;\n      const t = a(e);\n      return null != this.layerId && (t.path = `${t.path}/layers/${this.layerId}`), t;\n    }\n\n    async _fetchIndexAndUpdateExtent(e, t) {\n      this.indexInfo = x(this.parsedUrl.path, this.rootNode, e, this.apiKey, N, t), null == this.fullExtent || this.fullExtent.hasZ || this._updateExtent(await this.indexInfo);\n    }\n\n    _updateExtent(e) {\n      if (\"page\" === (null == e ? void 0 : e.type)) {\n        var t, o;\n        const i = e.rootIndex % e.pageSize,\n              s = null == (t = e.rootPage) || null == (o = t.nodes) ? void 0 : o[i];\n        if (null == s || null == s.obb || null == s.obb.center || null == s.obb.halfSize) throw new r(\"sceneservice:invalid-node-page\", \"Invalid node page.\");\n        if (s.obb.center[0] < O || null == this.fullExtent || this.fullExtent.hasZ) return;\n        const a = s.obb.halfSize,\n              n = s.obb.center[2],\n              l = Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);\n        this.fullExtent.zmin = n - l, this.fullExtent.zmax = n + l;\n      } else if (\"node\" === (null == e ? void 0 : e.type)) {\n        var i;\n        const t = null == (i = e.rootNode) ? void 0 : i.mbs;\n        if (!Array.isArray(t) || 4 !== t.length || t[0] < O) return;\n        const r = t[2],\n              o = t[3];\n        this.fullExtent.zmin = r - o, this.fullExtent.zmax = r + o;\n      }\n    }\n\n    async _fetchService(e) {\n      if (null == this.url) throw new r(\"sceneservice:url-not-set\", \"Scene service can not be loaded without valid portal item or url\");\n\n      if (null == this.layerId && /SceneServer\\/*$/i.test(this.url)) {\n        const t = await this._fetchFirstLayerId(e);\n        null != t && (this.layerId = t);\n      }\n\n      return this._fetchServiceLayer(e);\n    }\n\n    async _fetchFirstLayerId(e) {\n      const r = await t(this.url, {\n        query: {\n          f: \"json\",\n          token: this.apiKey\n        },\n        responseType: \"json\",\n        signal: e\n      });\n      if (r.data && Array.isArray(r.data.layers) && r.data.layers.length > 0) return r.data.layers[0].id;\n    }\n\n    async _fetchServiceLayer(e) {\n      const r = await t(this.parsedUrl.path, {\n        query: {\n          f: \"json\",\n          token: this.apiKey\n        },\n        responseType: \"json\",\n        signal: e\n      });\n      r.ssl && (this.url = this.url.replace(/^http:/i, \"https:\"));\n      const o = r.data;\n      this.read(o, {\n        origin: \"service\",\n        url: this.parsedUrl\n      }), this.validateLayer(o);\n    }\n\n    async _ensureLoadBeforeSave() {\n      await this.load(), \"beforeSave\" in this && \"function\" == typeof this.beforeSave && (await this.beforeSave());\n    }\n\n    validateLayer(e) {}\n\n    _updateTypeKeywords(e, t, r) {\n      e.typeKeywords || (e.typeKeywords = []);\n      const o = t.getTypeKeywords();\n\n      for (const i of o) e.typeKeywords.push(i);\n\n      e.typeKeywords && (e.typeKeywords = e.typeKeywords.filter((e, t, r) => r.indexOf(e) === t), 1 === r && (e.typeKeywords = e.typeKeywords.filter(e => \"Hosted Service\" !== e)));\n    }\n\n    async _saveAs(e, t) {\n      const o = { ...E,\n        ...t\n      };\n      let i = j.from(e);\n      i || (N.error(\"_saveAs(): requires a portal item parameter\"), await Promise.reject(new r(\"sceneservice:portal-item-required\", \"_saveAs() requires a portal item to save to\"))), i.id && (i = i.clone(), i.id = null);\n      const s = i.portal || b.getDefault();\n      await this._ensureLoadBeforeSave(), i.type = T, i.portal = s;\n      const a = {\n        origin: \"portal-item\",\n        url: null,\n        messages: [],\n        portal: s,\n        portalItem: i,\n        writtenProperties: [],\n        blockedRelativeUrls: [],\n        resources: {\n          toAdd: [],\n          toUpdate: [],\n          toKeep: [],\n          pendingOperations: []\n        }\n      },\n            n = {\n        layers: [this.write(null, a)]\n      };\n      return await Promise.all(a.resources.pendingOperations), await this._validateAgainstJSONSchema(n, a, o), i.url = this.url, i.title || (i.title = this.title), this._updateTypeKeywords(i, o, 1), await s._signIn(), await s.user.addItem({\n        item: i,\n        folder: o && o.folder,\n        data: n\n      }), await _(this.resourceReferences, a, null), this.portalItem = i, c(a), a.portalItem = i, i;\n    }\n\n    async _save(e) {\n      const t = { ...E,\n        ...e\n      };\n      this.portalItem || (N.error(\"_save(): requires the .portalItem property to be set\"), await Promise.reject(new r(\"sceneservice:portal-item-not-set\", \"Portal item to save to has not been set on this SceneService\"))), this.portalItem.type !== T && (N.error(\"_save(): Non-matching portal item type. Got \" + this.portalItem.type + \", expected \" + T), await Promise.reject(new r(\"sceneservice:portal-item-wrong-type\", `Portal item needs to have type \"${T}\"`))), await this._ensureLoadBeforeSave();\n      const o = {\n        origin: \"portal-item\",\n        url: this.portalItem.itemUrl && a(this.portalItem.itemUrl),\n        messages: [],\n        portal: this.portalItem.portal || b.getDefault(),\n        portalItem: this.portalItem,\n        writtenProperties: [],\n        blockedRelativeUrls: [],\n        resources: {\n          toAdd: [],\n          toUpdate: [],\n          toKeep: [],\n          pendingOperations: []\n        }\n      },\n            i = {\n        layers: [this.write(null, o)]\n      };\n      return await Promise.all(o.resources.pendingOperations), await this._validateAgainstJSONSchema(i, o, t), this.portalItem.url = this.url, this.portalItem.title || (this.portalItem.title = this.title), this._updateTypeKeywords(this.portalItem, t, 0), await this.portalItem.update({\n        data: i\n      }), await _(this.resourceReferences, o, null), c(o), this.portalItem;\n    }\n\n    async _validateAgainstJSONSchema(e, t, o) {\n      let i = t.messages.filter(e => \"error\" === e.type).map(e => new r(e.name, e.message, e.details));\n\n      if (o && o.validationOptions.ignoreUnsupported && (i = i.filter(e => \"layer:unsupported\" !== e.name && \"symbol:unsupported\" !== e.name && \"symbol-layer:unsupported\" !== e.name && \"property:unsupported\" !== e.name && \"url:unsupported\" !== e.name && \"scenemodification:unsupported\" !== e.name)), o.validationOptions.enabled || U) {\n        const t = (await import(\"../support/schemaValidator.js\")).validate(e, o.portalItemLayerType);\n\n        if (t.length > 0) {\n          const e = `Layer item did not validate:\\n${t.join(\"\\n\")}`;\n\n          if (N.error(`_validateAgainstJSONSchema(): ${e}`), \"throw\" === o.validationOptions.failPolicy) {\n            const e = t.map(e => new r(\"sceneservice:schema-validation\", e)).concat(i);\n            throw new r(\"sceneservice-validate:error\", \"Failed to save layer item due to schema validation, see `details.errors`.\", {\n              combined: e\n            });\n          }\n        }\n      }\n\n      if (i.length > 0) throw new r(\"sceneservice:save\", \"Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information\", {\n        errors: i\n      });\n    }\n\n  };\n  return e([n(w)], R.prototype, \"id\", void 0), e([n({\n    type: y\n  })], R.prototype, \"spatialReference\", void 0), e([l(\"spatialReference\", [\"spatialReference\", \"store.indexCRS\", \"store.geographicCRS\"])], R.prototype, \"readSpatialReference\", null), e([n({\n    type: u\n  })], R.prototype, \"fullExtent\", void 0), e([l(\"fullExtent\", [\"fullExtent\", \"store.extent\", \"spatialReference\", \"store.indexCRS\", \"store.geographicCRS\"])], R.prototype, \"readFullExtent\", null), e([n({\n    readOnly: !0,\n    type: m\n  })], R.prototype, \"heightModelInfo\", void 0), e([n({\n    type: Number,\n    json: {\n      name: \"layerDefinition.minScale\",\n      write: !0,\n      origins: {\n        service: {\n          read: {\n            source: \"minScale\"\n          },\n          write: !1\n        }\n      }\n    }\n  })], R.prototype, \"minScale\", void 0), e([n({\n    type: Number,\n    json: {\n      name: \"layerDefinition.maxScale\",\n      write: !0,\n      origins: {\n        service: {\n          read: {\n            source: \"maxScale\"\n          },\n          write: !1\n        }\n      }\n    }\n  })], R.prototype, \"maxScale\", void 0), e([n({\n    readOnly: !0\n  })], R.prototype, \"version\", void 0), e([l(\"version\", [\"store.version\"])], R.prototype, \"readVersion\", null), e([n({\n    type: String,\n    json: {\n      read: {\n        source: \"copyrightText\"\n      }\n    }\n  })], R.prototype, \"copyright\", void 0), e([n({\n    type: String,\n    json: {\n      read: !1\n    }\n  })], R.prototype, \"sublayerTitleMode\", void 0), e([n({\n    type: String\n  })], R.prototype, \"title\", void 0), e([l(\"portal-item\", \"title\")], R.prototype, \"readTitlePortalItem\", null), e([l(\"service\", \"title\", [\"name\"])], R.prototype, \"readTitleService\", null), e([n({\n    type: Number,\n    json: {\n      origins: {\n        service: {\n          read: {\n            source: \"id\"\n          }\n        },\n        \"portal-item\": {\n          write: {\n            target: \"id\",\n            isRequired: !0,\n            ignoreOrigin: !0\n          },\n          read: !1\n        }\n      }\n    }\n  })], R.prototype, \"layerId\", void 0), e([n(I)], R.prototype, \"url\", null), e([d(\"url\")], R.prototype, \"writeUrl\", null), e([n()], R.prototype, \"parsedUrl\", null), e([n({\n    readOnly: !0\n  })], R.prototype, \"store\", void 0), e([n({\n    type: String,\n    readOnly: !0,\n    json: {\n      read: {\n        source: \"store.rootNode\"\n      }\n    }\n  })], R.prototype, \"rootNode\", void 0), R = e([p(\"esri.layers.mixins.SceneService\")], R), R;\n},\n      O = -1e38,\n      U = !1,\n      T = \"Scene Service\",\n      E = {\n  getTypeKeywords: () => [],\n  portalItemLayerType: \"unknown\",\n  validationOptions: {\n    enabled: !0,\n    ignoreUnsupported: !1,\n    failPolicy: \"throw\"\n  }\n};\n\nexport { T as SCENE_SERVICE_ITEM_TYPE, R as SceneService };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/mixins/SceneService.js"],"names":["_","e","t","r","o","isSome","i","debounce","s","urlToObject","a","property","n","reader","l","subclass","p","writer","d","updateOrigins","c","u","m","y","titleFromUrlAndName","h","parse","f","cleanTitle","v","sanitizeUrlWithLayerId","g","writeUrlWithLayerId","S","id","w","url","I","fetchIndexInfo","x","b","j","saveResources","N","getLogger","R","constructor","arguments","spatialReference","fullExtent","heightModelInfo","minScale","maxScale","version","major","Number","NaN","minor","versionString","copyright","sublayerTitleMode","title","layerId","indexInfo","_debouncedSaveOperations","_save","_saveAs","readSpatialReference","_readSpatialReference","fromJSON","store","indexCRS","geographicCRS","parseInt","substring","lastIndexOf","length","readFullExtent","extent","Array","isArray","some","O","xmin","ymin","xmax","ymax","readVersion","toString","split","readTitlePortalItem","readTitleService","portalItem","name","layer","nonStandardUrlAllowed","logger","_set","writeUrl","parsedUrl","_get","path","_fetchIndexAndUpdateExtent","rootNode","apiKey","hasZ","_updateExtent","type","rootIndex","pageSize","rootPage","nodes","obb","center","halfSize","Math","sqrt","zmin","zmax","mbs","_fetchService","test","_fetchFirstLayerId","_fetchServiceLayer","query","token","responseType","signal","data","layers","ssl","replace","read","origin","validateLayer","_ensureLoadBeforeSave","load","beforeSave","_updateTypeKeywords","typeKeywords","getTypeKeywords","push","filter","indexOf","E","from","error","Promise","reject","clone","portal","getDefault","T","messages","writtenProperties","blockedRelativeUrls","resources","toAdd","toUpdate","toKeep","pendingOperations","write","all","_validateAgainstJSONSchema","_signIn","user","addItem","item","folder","resourceReferences","itemUrl","update","map","message","details","validationOptions","ignoreUnsupported","enabled","U","validate","portalItemLayerType","join","failPolicy","concat","combined","errors","prototype","readOnly","json","origins","service","source","String","target","isRequired","ignoreOrigin","SCENE_SERVICE_ITEM_TYPE","SceneService"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,2BAAlB;AAA8C,OAAOC,CAAP,MAAa,kBAAb;AAAgC,OAAOC,CAAP,MAAa,qBAAb;AAAmC,OAAM,mBAAN;AAA0B,OAAOC,CAAP,MAAa,sBAAb;AAAoC,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,qBAAvB;AAA6C,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,4BAAzB;AAAsD,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,wBAA5B;AAAqD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,mDAAzB;AAA6E,OAAM,0CAAN;AAAiD,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,iDAAvB;AAAyE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,mDAAzB;AAA6E,SAAOC,MAAM,IAAIC,CAAjB,QAAuB,iDAAvB;AAAyE,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,2CAA9B;AAA0E,OAAOC,CAAP,MAAa,0BAAb;AAAwC,OAAOC,CAAP,MAAa,mCAAb;AAAiD,OAAOC,CAAP,MAAa,oCAAb;AAAkD,SAAOC,mBAAmB,IAAIC,CAA9B,EAAgCC,KAAK,IAAIC,CAAzC,EAA2CC,UAAU,IAAIC,CAAzD,EAA2DC,sBAAsB,IAAIC,CAArF,EAAuFC,mBAAmB,IAAIC,CAA9G,QAAoH,8BAApH;AAAmJ,SAAOC,EAAE,IAAIC,CAAb,EAAeC,GAAG,IAAIC,CAAtB,QAA4B,gCAA5B;AAA6D,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,4BAA/B;AAA4D,OAAOC,CAAP,MAAa,wBAAb;AAAsC,OAAOC,CAAP,MAAa,4BAAb;AAA0C,SAAOC,aAAa,IAAI1C,CAAxB,QAA8B,mCAA9B;;AAAkE,MAAM2C,CAAC,GAACvC,CAAC,CAACwC,SAAF,CAAY,iCAAZ,CAAR;AAAA,MAAuDC,CAAC,GAACzC,CAAC,IAAE;AAAC,MAAIyC,CAAC,GAAC,cAAczC,CAAd,CAAe;AAAC0C,IAAAA,WAAW,GAAE;AAAC,YAAM,GAAGC,SAAT,GAAoB,KAAKC,gBAAL,GAAsB,IAA1C,EAA+C,KAAKC,UAAL,GAAgB,IAA/D,EAAoE,KAAKC,eAAL,GAAqB,IAAzF,EAA8F,KAAKC,QAAL,GAAc,CAA5G,EAA8G,KAAKC,QAAL,GAAc,CAA5H,EAA8H,KAAKC,OAAL,GAAa;AAACC,QAAAA,KAAK,EAACC,MAAM,CAACC,GAAd;AAAkBC,QAAAA,KAAK,EAACF,MAAM,CAACC,GAA/B;AAAmCE,QAAAA,aAAa,EAAC;AAAjD,OAA3I,EAAgM,KAAKC,SAAL,GAAe,IAA/M,EAAoN,KAAKC,iBAAL,GAAuB,YAA3O,EAAwP,KAAKC,KAAL,GAAW,IAAnQ,EAAwQ,KAAKC,OAAL,GAAa,IAArR,EAA0R,KAAKC,SAAL,GAAe,IAAzS,EAA8S,KAAKC,wBAAL,GAA8BxD,CAAC,CAAE,OAAMP,CAAN,EAAQC,CAAR,EAAUC,CAAV,KAAc;AAAC,gBAAOF,CAAP;AAAU,eAAK,CAAL;AAAO,mBAAO,KAAKgE,KAAL,CAAW/D,CAAX,CAAP;;AAAqB,eAAK,CAAL;AAAO,mBAAO,KAAKgE,OAAL,CAAa/D,CAAb,EAAeD,CAAf,CAAP;AAA7C;AAAuE,OAAxF,CAA7U;AAAwa;;AAAAiE,IAAAA,oBAAoB,CAAClE,CAAD,EAAGC,CAAH,EAAK;AAAC,aAAO,KAAKkE,qBAAL,CAA2BlE,CAA3B,CAAP;AAAqC;;AAAAkE,IAAAA,qBAAqB,CAACnE,CAAD,EAAG;AAAC,UAAG,QAAMA,CAAC,CAAC+C,gBAAX,EAA4B,OAAOzB,CAAC,CAAC8C,QAAF,CAAWpE,CAAC,CAAC+C,gBAAb,CAAP;AAAsC;AAAC,cAAM9C,CAAC,GAACD,CAAC,CAACqE,KAAV;AAAA,cAAgBnE,CAAC,GAACD,CAAC,CAACqE,QAAF,IAAYrE,CAAC,CAACsE,aAAhC;AAAA,cAA8CpE,CAAC,GAACD,CAAC,IAAEsE,QAAQ,CAACtE,CAAC,CAACuE,SAAF,CAAYvE,CAAC,CAACwE,WAAF,CAAc,GAAd,IAAmB,CAA/B,EAAiCxE,CAAC,CAACyE,MAAnC,CAAD,EAA4C,EAA5C,CAA3D;AAA2G,eAAO,QAAMxE,CAAN,GAAQ,IAAImB,CAAJ,CAAMnB,CAAN,CAAR,GAAiB,IAAxB;AAA6B;AAAC;;AAAAyE,IAAAA,cAAc,CAAC5E,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAO;AAAC,UAAG,QAAMF,CAAN,IAAS,YAAU,OAAOA,CAA7B,EAA+B,OAAOoB,CAAC,CAACgD,QAAF,CAAWpE,CAAX,EAAaE,CAAb,CAAP;;AAAuB,YAAMC,CAAC,GAACF,CAAC,CAACoE,KAAV;AAAA,YAAgBhE,CAAC,GAAC,KAAK8D,qBAAL,CAA2BlE,CAA3B,CAAlB;;AAAgD,aAAO,QAAMI,CAAN,IAAS,QAAMF,CAAf,IAAkB,QAAMA,CAAC,CAAC0E,MAA1B,IAAkC,CAACC,KAAK,CAACC,OAAN,CAAc5E,CAAC,CAAC0E,MAAhB,CAAnC,IAA4D1E,CAAC,CAAC0E,MAAF,CAASG,IAAT,CAAehF,CAAC,IAAEA,CAAC,GAACiF,CAApB,CAA5D,GAAoF,IAApF,GAAyF,IAAI7D,CAAJ,CAAM;AAAC8D,QAAAA,IAAI,EAAC/E,CAAC,CAAC0E,MAAF,CAAS,CAAT,CAAN;AAAkBM,QAAAA,IAAI,EAAChF,CAAC,CAAC0E,MAAF,CAAS,CAAT,CAAvB;AAAmCO,QAAAA,IAAI,EAACjF,CAAC,CAAC0E,MAAF,CAAS,CAAT,CAAxC;AAAoDQ,QAAAA,IAAI,EAAClF,CAAC,CAAC0E,MAAF,CAAS,CAAT,CAAzD;AAAqE9B,QAAAA,gBAAgB,EAAC1C;AAAtF,OAAN,CAAhG;AAAgM;;AAAAiF,IAAAA,WAAW,CAACtF,CAAD,EAAGC,CAAH,EAAK;AAAC,YAAMC,CAAC,GAACD,CAAC,CAACoE,KAAV;AAAA,YAAgBlE,CAAC,GAAC,QAAMD,CAAC,CAACkD,OAAR,GAAgBlD,CAAC,CAACkD,OAAF,CAAUmC,QAAV,EAAhB,GAAqC,EAAvD;AAAA,YAA0DlF,CAAC,GAAC;AAACgD,QAAAA,KAAK,EAACC,MAAM,CAACC,GAAd;AAAkBC,QAAAA,KAAK,EAACF,MAAM,CAACC,GAA/B;AAAmCE,QAAAA,aAAa,EAACtD;AAAjD,OAA5D;AAAA,YAAgHI,CAAC,GAACJ,CAAC,CAACqF,KAAF,CAAQ,GAAR,CAAlH;AAA+H,aAAOjF,CAAC,CAACoE,MAAF,IAAU,CAAV,KAActE,CAAC,CAACgD,KAAF,GAAQmB,QAAQ,CAACjE,CAAC,CAAC,CAAD,CAAF,EAAM,EAAN,CAAhB,EAA0BF,CAAC,CAACmD,KAAF,GAAQgB,QAAQ,CAACjE,CAAC,CAAC,CAAD,CAAF,EAAM,EAAN,CAAxD,GAAmEF,CAA1E;AAA4E;;AAAAoF,IAAAA,mBAAmB,CAACzF,CAAD,EAAG;AAAC,aAAM,iBAAe,KAAK2D,iBAApB,GAAsC,KAAK,CAA3C,GAA6C3D,CAAnD;AAAqD;;AAAA0F,IAAAA,gBAAgB,CAAC1F,CAAD,EAAGC,CAAH,EAAK;AAAC,YAAMC,CAAC,GAAC,KAAKyF,UAAL,IAAiB,KAAKA,UAAL,CAAgB/B,KAAzC;AAA+C,UAAG,iBAAe,KAAKD,iBAAvB,EAAyC,OAAOnC,CAAC,CAAC,KAAKW,GAAN,EAAUlC,CAAC,CAAC2F,IAAZ,CAAR;AAA0B,UAAIzF,CAAC,GAACF,CAAC,CAAC2F,IAAR;;AAAa,UAAG,CAACzF,CAAD,IAAI,KAAKgC,GAAZ,EAAgB;AAAC,cAAMnC,CAAC,GAAC0B,CAAC,CAAC,KAAKS,GAAN,CAAT;AAAoB9B,QAAAA,CAAC,CAACL,CAAD,CAAD,KAAOG,CAAC,GAACH,CAAC,CAAC4D,KAAX;AAAkB;;AAAA,aAAM,kCAAgC,KAAKD,iBAArC,IAAwDzD,CAAxD,KAA4DC,CAAC,GAACD,CAAC,GAAC,KAAF,GAAQC,CAAtE,GAAyEyB,CAAC,CAACzB,CAAD,CAAhF;AAAoF;;AAAO,QAAHgC,GAAG,CAACnC,CAAD,EAAG;AAAC,YAAMC,CAAC,GAAC6B,CAAC,CAAC;AAAC+D,QAAAA,KAAK,EAAC,IAAP;AAAY1D,QAAAA,GAAG,EAACnC,CAAhB;AAAkB8F,QAAAA,qBAAqB,EAAC,CAAC,CAAzC;AAA2CC,QAAAA,MAAM,EAACrD;AAAlD,OAAD,CAAT;AAAgE,WAAKsD,IAAL,CAAU,KAAV,EAAgB/F,CAAC,CAACkC,GAAlB,GAAuB,QAAMlC,CAAC,CAAC4D,OAAR,IAAiB,KAAKmC,IAAL,CAAU,SAAV,EAAoB/F,CAAC,CAAC4D,OAAtB,CAAxC;AAAuE;;AAAAoC,IAAAA,QAAQ,CAACjG,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAOC,CAAP,EAAS;AAAC6B,MAAAA,CAAC,CAAC,IAAD,EAAMhC,CAAN,EAAQ,QAAR,EAAiBC,CAAjB,EAAmBE,CAAnB,CAAD;AAAuB;;AAAa,QAAT+F,SAAS,GAAE;AAAC,YAAMlG,CAAC,GAAC,KAAKmG,IAAL,CAAU,KAAV,CAAR;;AAAyB,UAAG,CAACnG,CAAJ,EAAM,OAAO,IAAP;AAAY,YAAMC,CAAC,GAACQ,CAAC,CAACT,CAAD,CAAT;AAAa,aAAO,QAAM,KAAK6D,OAAX,KAAqB5D,CAAC,CAACmG,IAAF,GAAQ,GAAEnG,CAAC,CAACmG,IAAK,WAAU,KAAKvC,OAAQ,EAA7D,GAAgE5D,CAAvE;AAAyE;;AAAgC,UAA1BoG,0BAA0B,CAACrG,CAAD,EAAGC,CAAH,EAAK;AAAC,WAAK6D,SAAL,GAAexB,CAAC,CAAC,KAAK4D,SAAL,CAAeE,IAAhB,EAAqB,KAAKE,QAA1B,EAAmCtG,CAAnC,EAAqC,KAAKuG,MAA1C,EAAiD7D,CAAjD,EAAmDzC,CAAnD,CAAhB,EAAsE,QAAM,KAAK+C,UAAX,IAAuB,KAAKA,UAAL,CAAgBwD,IAAvC,IAA6C,KAAKC,aAAL,CAAmB,MAAM,KAAK3C,SAA9B,CAAnH;AAA4J;;AAAA2C,IAAAA,aAAa,CAACzG,CAAD,EAAG;AAAC,UAAG,YAAU,QAAMA,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC0G,IAA3B,CAAH,EAAoC;AAAC,YAAIzG,CAAJ,EAAME,CAAN;AAAQ,cAAME,CAAC,GAACL,CAAC,CAAC2G,SAAF,GAAY3G,CAAC,CAAC4G,QAAtB;AAAA,cAA+BrG,CAAC,GAAC,SAAON,CAAC,GAACD,CAAC,CAAC6G,QAAX,KAAsB,SAAO1G,CAAC,GAACF,CAAC,CAAC6G,KAAX,CAAtB,GAAwC,KAAK,CAA7C,GAA+C3G,CAAC,CAACE,CAAD,CAAjF;AAAqF,YAAG,QAAME,CAAN,IAAS,QAAMA,CAAC,CAACwG,GAAjB,IAAsB,QAAMxG,CAAC,CAACwG,GAAF,CAAMC,MAAlC,IAA0C,QAAMzG,CAAC,CAACwG,GAAF,CAAME,QAAzD,EAAkE,MAAM,IAAI/G,CAAJ,CAAM,gCAAN,EAAuC,oBAAvC,CAAN;AAAmE,YAAGK,CAAC,CAACwG,GAAF,CAAMC,MAAN,CAAa,CAAb,IAAgB/B,CAAhB,IAAmB,QAAM,KAAKjC,UAA9B,IAA0C,KAAKA,UAAL,CAAgBwD,IAA7D,EAAkE;AAAO,cAAM/F,CAAC,GAACF,CAAC,CAACwG,GAAF,CAAME,QAAd;AAAA,cAAuBtG,CAAC,GAACJ,CAAC,CAACwG,GAAF,CAAMC,MAAN,CAAa,CAAb,CAAzB;AAAA,cAAyCnG,CAAC,GAACqG,IAAI,CAACC,IAAL,CAAU1G,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAApC,CAA3C;AAAoF,aAAKuC,UAAL,CAAgBoE,IAAhB,GAAqBzG,CAAC,GAACE,CAAvB,EAAyB,KAAKmC,UAAL,CAAgBqE,IAAhB,GAAqB1G,CAAC,GAACE,CAAhD;AAAkD,OAAtd,MAA2d,IAAG,YAAU,QAAMb,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC0G,IAA3B,CAAH,EAAoC;AAAC,YAAIrG,CAAJ;AAAM,cAAMJ,CAAC,GAAC,SAAOI,CAAC,GAACL,CAAC,CAACsG,QAAX,IAAqB,KAAK,CAA1B,GAA4BjG,CAAC,CAACiH,GAAtC;AAA0C,YAAG,CAACxC,KAAK,CAACC,OAAN,CAAc9E,CAAd,CAAD,IAAmB,MAAIA,CAAC,CAAC0E,MAAzB,IAAiC1E,CAAC,CAAC,CAAD,CAAD,GAAKgF,CAAzC,EAA2C;AAAO,cAAM/E,CAAC,GAACD,CAAC,CAAC,CAAD,CAAT;AAAA,cAAaE,CAAC,GAACF,CAAC,CAAC,CAAD,CAAhB;AAAoB,aAAK+C,UAAL,CAAgBoE,IAAhB,GAAqBlH,CAAC,GAACC,CAAvB,EAAyB,KAAK6C,UAAL,CAAgBqE,IAAhB,GAAqBnH,CAAC,GAACC,CAAhD;AAAkD;AAAC;;AAAmB,UAAboH,aAAa,CAACvH,CAAD,EAAG;AAAC,UAAG,QAAM,KAAKmC,GAAd,EAAkB,MAAM,IAAIjC,CAAJ,CAAM,0BAAN,EAAiC,kEAAjC,CAAN;;AAA2G,UAAG,QAAM,KAAK2D,OAAX,IAAoB,mBAAmB2D,IAAnB,CAAwB,KAAKrF,GAA7B,CAAvB,EAAyD;AAAC,cAAMlC,CAAC,GAAC,MAAM,KAAKwH,kBAAL,CAAwBzH,CAAxB,CAAd;AAAyC,gBAAMC,CAAN,KAAU,KAAK4D,OAAL,GAAa5D,CAAvB;AAA0B;;AAAA,aAAO,KAAKyH,kBAAL,CAAwB1H,CAAxB,CAAP;AAAkC;;AAAwB,UAAlByH,kBAAkB,CAACzH,CAAD,EAAG;AAAC,YAAME,CAAC,GAAC,MAAMD,CAAC,CAAC,KAAKkC,GAAN,EAAU;AAACwF,QAAAA,KAAK,EAAC;AAACjG,UAAAA,CAAC,EAAC,MAAH;AAAUkG,UAAAA,KAAK,EAAC,KAAKrB;AAArB,SAAP;AAAoCsB,QAAAA,YAAY,EAAC,MAAjD;AAAwDC,QAAAA,MAAM,EAAC9H;AAA/D,OAAV,CAAf;AAA4F,UAAGE,CAAC,CAAC6H,IAAF,IAAQjD,KAAK,CAACC,OAAN,CAAc7E,CAAC,CAAC6H,IAAF,CAAOC,MAArB,CAAR,IAAsC9H,CAAC,CAAC6H,IAAF,CAAOC,MAAP,CAAcrD,MAAd,GAAqB,CAA9D,EAAgE,OAAOzE,CAAC,CAAC6H,IAAF,CAAOC,MAAP,CAAc,CAAd,EAAiB/F,EAAxB;AAA2B;;AAAwB,UAAlByF,kBAAkB,CAAC1H,CAAD,EAAG;AAAC,YAAME,CAAC,GAAC,MAAMD,CAAC,CAAC,KAAKiG,SAAL,CAAeE,IAAhB,EAAqB;AAACuB,QAAAA,KAAK,EAAC;AAACjG,UAAAA,CAAC,EAAC,MAAH;AAAUkG,UAAAA,KAAK,EAAC,KAAKrB;AAArB,SAAP;AAAoCsB,QAAAA,YAAY,EAAC,MAAjD;AAAwDC,QAAAA,MAAM,EAAC9H;AAA/D,OAArB,CAAf;AAAuGE,MAAAA,CAAC,CAAC+H,GAAF,KAAQ,KAAK9F,GAAL,GAAS,KAAKA,GAAL,CAAS+F,OAAT,CAAiB,SAAjB,EAA2B,QAA3B,CAAjB;AAAuD,YAAM/H,CAAC,GAACD,CAAC,CAAC6H,IAAV;AAAe,WAAKI,IAAL,CAAUhI,CAAV,EAAY;AAACiI,QAAAA,MAAM,EAAC,SAAR;AAAkBjG,QAAAA,GAAG,EAAC,KAAK+D;AAA3B,OAAZ,GAAmD,KAAKmC,aAAL,CAAmBlI,CAAnB,CAAnD;AAAyE;;AAA2B,UAArBmI,qBAAqB,GAAE;AAAC,YAAM,KAAKC,IAAL,EAAN,EAAkB,gBAAe,IAAf,IAAqB,cAAY,OAAO,KAAKC,UAA7C,KAAyD,MAAM,KAAKA,UAAL,EAA/D,CAAlB;AAAmG;;AAAAH,IAAAA,aAAa,CAACrI,CAAD,EAAG,CAAE;;AAAAyI,IAAAA,mBAAmB,CAACzI,CAAD,EAAGC,CAAH,EAAKC,CAAL,EAAO;AAACF,MAAAA,CAAC,CAAC0I,YAAF,KAAiB1I,CAAC,CAAC0I,YAAF,GAAe,EAAhC;AAAoC,YAAMvI,CAAC,GAACF,CAAC,CAAC0I,eAAF,EAAR;;AAA4B,WAAI,MAAMtI,CAAV,IAAeF,CAAf,EAAiBH,CAAC,CAAC0I,YAAF,CAAeE,IAAf,CAAoBvI,CAApB;;AAAuBL,MAAAA,CAAC,CAAC0I,YAAF,KAAiB1I,CAAC,CAAC0I,YAAF,GAAe1I,CAAC,CAAC0I,YAAF,CAAeG,MAAf,CAAuB,CAAC7I,CAAD,EAAGC,CAAH,EAAKC,CAAL,KAASA,CAAC,CAAC4I,OAAF,CAAU9I,CAAV,MAAeC,CAA/C,CAAf,EAAkE,MAAIC,CAAJ,KAAQF,CAAC,CAAC0I,YAAF,GAAe1I,CAAC,CAAC0I,YAAF,CAAeG,MAAf,CAAuB7I,CAAC,IAAE,qBAAmBA,CAA7C,CAAvB,CAAnF;AAA6J;;AAAa,UAAPiE,OAAO,CAACjE,CAAD,EAAGC,CAAH,EAAK;AAAC,YAAME,CAAC,GAAC,EAAC,GAAG4I,CAAJ;AAAM,WAAG9I;AAAT,OAAR;AAAoB,UAAII,CAAC,GAACmC,CAAC,CAACwG,IAAF,CAAOhJ,CAAP,CAAN;AAAgBK,MAAAA,CAAC,KAAGqC,CAAC,CAACuG,KAAF,CAAQ,6CAAR,GAAuD,MAAMC,OAAO,CAACC,MAAR,CAAe,IAAIjJ,CAAJ,CAAM,mCAAN,EAA0C,6CAA1C,CAAf,CAAhE,CAAD,EAA2KG,CAAC,CAAC4B,EAAF,KAAO5B,CAAC,GAACA,CAAC,CAAC+I,KAAF,EAAF,EAAY/I,CAAC,CAAC4B,EAAF,GAAK,IAAxB,CAA3K;AAAyM,YAAM1B,CAAC,GAACF,CAAC,CAACgJ,MAAF,IAAU9G,CAAC,CAAC+G,UAAF,EAAlB;AAAiC,YAAM,KAAKhB,qBAAL,EAAN,EAAmCjI,CAAC,CAACqG,IAAF,GAAO6C,CAA1C,EAA4ClJ,CAAC,CAACgJ,MAAF,GAAS9I,CAArD;AAAuD,YAAME,CAAC,GAAC;AAAC2H,QAAAA,MAAM,EAAC,aAAR;AAAsBjG,QAAAA,GAAG,EAAC,IAA1B;AAA+BqH,QAAAA,QAAQ,EAAC,EAAxC;AAA2CH,QAAAA,MAAM,EAAC9I,CAAlD;AAAoDoF,QAAAA,UAAU,EAACtF,CAA/D;AAAiEoJ,QAAAA,iBAAiB,EAAC,EAAnF;AAAsFC,QAAAA,mBAAmB,EAAC,EAA1G;AAA6GC,QAAAA,SAAS,EAAC;AAACC,UAAAA,KAAK,EAAC,EAAP;AAAUC,UAAAA,QAAQ,EAAC,EAAnB;AAAsBC,UAAAA,MAAM,EAAC,EAA7B;AAAgCC,UAAAA,iBAAiB,EAAC;AAAlD;AAAvH,OAAR;AAAA,YAAsLpJ,CAAC,GAAC;AAACqH,QAAAA,MAAM,EAAC,CAAC,KAAKgC,KAAL,CAAW,IAAX,EAAgBvJ,CAAhB,CAAD;AAAR,OAAxL;AAAsN,aAAO,MAAMyI,OAAO,CAACe,GAAR,CAAYxJ,CAAC,CAACkJ,SAAF,CAAYI,iBAAxB,CAAN,EAAiD,MAAM,KAAKG,0BAAL,CAAgCvJ,CAAhC,EAAkCF,CAAlC,EAAoCN,CAApC,CAAvD,EAA8FE,CAAC,CAAC8B,GAAF,GAAM,KAAKA,GAAzG,EAA6G9B,CAAC,CAACuD,KAAF,KAAUvD,CAAC,CAACuD,KAAF,GAAQ,KAAKA,KAAvB,CAA7G,EAA2I,KAAK6E,mBAAL,CAAyBpI,CAAzB,EAA2BF,CAA3B,EAA6B,CAA7B,CAA3I,EAA2K,MAAMI,CAAC,CAAC4J,OAAF,EAAjL,EAA6L,MAAM5J,CAAC,CAAC6J,IAAF,CAAOC,OAAP,CAAe;AAACC,QAAAA,IAAI,EAACjK,CAAN;AAAQkK,QAAAA,MAAM,EAACpK,CAAC,IAAEA,CAAC,CAACoK,MAApB;AAA2BxC,QAAAA,IAAI,EAACpH;AAAhC,OAAf,CAAnM,EAAsP,MAAMZ,CAAC,CAAC,KAAKyK,kBAAN,EAAyB/J,CAAzB,EAA2B,IAA3B,CAA7P,EAA8R,KAAKkF,UAAL,GAAgBtF,CAA9S,EAAgTc,CAAC,CAACV,CAAD,CAAjT,EAAqTA,CAAC,CAACkF,UAAF,GAAatF,CAAlU,EAAoUA,CAA3U;AAA6U;;AAAW,UAAL2D,KAAK,CAAChE,CAAD,EAAG;AAAC,YAAMC,CAAC,GAAC,EAAC,GAAG8I,CAAJ;AAAM,WAAG/I;AAAT,OAAR;AAAoB,WAAK2F,UAAL,KAAkBjD,CAAC,CAACuG,KAAF,CAAQ,sDAAR,GAAgE,MAAMC,OAAO,CAACC,MAAR,CAAe,IAAIjJ,CAAJ,CAAM,kCAAN,EAAyC,8DAAzC,CAAf,CAAxF,GAAkN,KAAKyF,UAAL,CAAgBe,IAAhB,KAAuB6C,CAAvB,KAA2B7G,CAAC,CAACuG,KAAF,CAAQ,iDAA+C,KAAKtD,UAAL,CAAgBe,IAA/D,GAAoE,aAApE,GAAkF6C,CAA1F,GAA6F,MAAML,OAAO,CAACC,MAAR,CAAe,IAAIjJ,CAAJ,CAAM,qCAAN,EAA6C,mCAAkCqJ,CAAE,GAAjF,CAAf,CAA9H,CAAlN,EAAsb,MAAM,KAAKjB,qBAAL,EAA5b;AAAyd,YAAMnI,CAAC,GAAC;AAACiI,QAAAA,MAAM,EAAC,aAAR;AAAsBjG,QAAAA,GAAG,EAAC,KAAKwD,UAAL,CAAgB8E,OAAhB,IAAyBhK,CAAC,CAAC,KAAKkF,UAAL,CAAgB8E,OAAjB,CAApD;AAA8EjB,QAAAA,QAAQ,EAAC,EAAvF;AAA0FH,QAAAA,MAAM,EAAC,KAAK1D,UAAL,CAAgB0D,MAAhB,IAAwB9G,CAAC,CAAC+G,UAAF,EAAzH;AAAwI3D,QAAAA,UAAU,EAAC,KAAKA,UAAxJ;AAAmK8D,QAAAA,iBAAiB,EAAC,EAArL;AAAwLC,QAAAA,mBAAmB,EAAC,EAA5M;AAA+MC,QAAAA,SAAS,EAAC;AAACC,UAAAA,KAAK,EAAC,EAAP;AAAUC,UAAAA,QAAQ,EAAC,EAAnB;AAAsBC,UAAAA,MAAM,EAAC,EAA7B;AAAgCC,UAAAA,iBAAiB,EAAC;AAAlD;AAAzN,OAAR;AAAA,YAAwR1J,CAAC,GAAC;AAAC2H,QAAAA,MAAM,EAAC,CAAC,KAAKgC,KAAL,CAAW,IAAX,EAAgB7J,CAAhB,CAAD;AAAR,OAA1R;AAAwT,aAAO,MAAM+I,OAAO,CAACe,GAAR,CAAY9J,CAAC,CAACwJ,SAAF,CAAYI,iBAAxB,CAAN,EAAiD,MAAM,KAAKG,0BAAL,CAAgC7J,CAAhC,EAAkCF,CAAlC,EAAoCF,CAApC,CAAvD,EAA8F,KAAK0F,UAAL,CAAgBxD,GAAhB,GAAoB,KAAKA,GAAvH,EAA2H,KAAKwD,UAAL,CAAgB/B,KAAhB,KAAwB,KAAK+B,UAAL,CAAgB/B,KAAhB,GAAsB,KAAKA,KAAnD,CAA3H,EAAqL,KAAK6E,mBAAL,CAAyB,KAAK9C,UAA9B,EAAyC1F,CAAzC,EAA2C,CAA3C,CAArL,EAAmO,MAAM,KAAK0F,UAAL,CAAgB+E,MAAhB,CAAuB;AAAC3C,QAAAA,IAAI,EAAC1H;AAAN,OAAvB,CAAzO,EAA0Q,MAAMN,CAAC,CAAC,KAAKyK,kBAAN,EAAyBrK,CAAzB,EAA2B,IAA3B,CAAjR,EAAkTgB,CAAC,CAAChB,CAAD,CAAnT,EAAuT,KAAKwF,UAAnU;AAA8U;;AAAgC,UAA1BuE,0BAA0B,CAAClK,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAIE,CAAC,GAACJ,CAAC,CAACuJ,QAAF,CAAWX,MAAX,CAAmB7I,CAAC,IAAE,YAAUA,CAAC,CAAC0G,IAAlC,EAAyCiE,GAAzC,CAA8C3K,CAAC,IAAE,IAAIE,CAAJ,CAAMF,CAAC,CAAC4F,IAAR,EAAa5F,CAAC,CAAC4K,OAAf,EAAuB5K,CAAC,CAAC6K,OAAzB,CAAjD,CAAN;;AAA2F,UAAG1K,CAAC,IAAEA,CAAC,CAAC2K,iBAAF,CAAoBC,iBAAvB,KAA2C1K,CAAC,GAACA,CAAC,CAACwI,MAAF,CAAU7I,CAAC,IAAE,wBAAsBA,CAAC,CAAC4F,IAAxB,IAA8B,yBAAuB5F,CAAC,CAAC4F,IAAvD,IAA6D,+BAA6B5F,CAAC,CAAC4F,IAA5F,IAAkG,2BAAyB5F,CAAC,CAAC4F,IAA7H,IAAmI,sBAAoB5F,CAAC,CAAC4F,IAAzJ,IAA+J,oCAAkC5F,CAAC,CAAC4F,IAAhN,CAA7C,GAAqQzF,CAAC,CAAC2K,iBAAF,CAAoBE,OAApB,IAA6BC,CAArS,EAAuS;AAAC,cAAMhL,CAAC,GAAC,CAAC,MAAM,OAAO,+BAAP,CAAP,EAAgDiL,QAAhD,CAAyDlL,CAAzD,EAA2DG,CAAC,CAACgL,mBAA7D,CAAR;;AAA0F,YAAGlL,CAAC,CAAC0E,MAAF,GAAS,CAAZ,EAAc;AAAC,gBAAM3E,CAAC,GAAE,iCAAgCC,CAAC,CAACmL,IAAF,CAAO,IAAP,CAAa,EAAtD;;AAAwD,cAAG1I,CAAC,CAACuG,KAAF,CAAS,iCAAgCjJ,CAAE,EAA3C,GAA8C,YAAUG,CAAC,CAAC2K,iBAAF,CAAoBO,UAA/E,EAA0F;AAAC,kBAAMrL,CAAC,GAACC,CAAC,CAAC0K,GAAF,CAAO3K,CAAC,IAAE,IAAIE,CAAJ,CAAM,gCAAN,EAAuCF,CAAvC,CAAV,EAAsDsL,MAAtD,CAA6DjL,CAA7D,CAAR;AAAwE,kBAAM,IAAIH,CAAJ,CAAM,6BAAN,EAAoC,2EAApC,EAAgH;AAACqL,cAAAA,QAAQ,EAACvL;AAAV,aAAhH,CAAN;AAAoI;AAAC;AAAC;;AAAA,UAAGK,CAAC,CAACsE,MAAF,GAAS,CAAZ,EAAc,MAAM,IAAIzE,CAAJ,CAAM,mBAAN,EAA0B,uHAA1B,EAAkJ;AAACsL,QAAAA,MAAM,EAACnL;AAAR,OAAlJ,CAAN;AAAoK;;AAAthO,GAArB;AAA6iO,SAAOL,CAAC,CAAC,CAACW,CAAC,CAACuB,CAAD,CAAF,CAAD,EAAQU,CAAC,CAAC6I,SAAV,EAAoB,IAApB,EAAyB,KAAK,CAA9B,CAAD,EAAkCzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACpF;AAAN,GAAD,CAAF,CAAD,EAAesB,CAAC,CAAC6I,SAAjB,EAA2B,kBAA3B,EAA8C,KAAK,CAAnD,CAAnC,EAAyFzL,CAAC,CAAC,CAACa,CAAC,CAAC,kBAAD,EAAoB,CAAC,kBAAD,EAAoB,gBAApB,EAAqC,qBAArC,CAApB,CAAF,CAAD,EAAqF+B,CAAC,CAAC6I,SAAvF,EAAiG,sBAAjG,EAAwH,IAAxH,CAA1F,EAAwNzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACtF;AAAN,GAAD,CAAF,CAAD,EAAewB,CAAC,CAAC6I,SAAjB,EAA2B,YAA3B,EAAwC,KAAK,CAA7C,CAAzN,EAAyQzL,CAAC,CAAC,CAACa,CAAC,CAAC,YAAD,EAAc,CAAC,YAAD,EAAc,cAAd,EAA6B,kBAA7B,EAAgD,gBAAhD,EAAiE,qBAAjE,CAAd,CAAF,CAAD,EAA2G+B,CAAC,CAAC6I,SAA7G,EAAuH,gBAAvH,EAAwI,IAAxI,CAA1Q,EAAwZzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+K,IAAAA,QAAQ,EAAC,CAAC,CAAX;AAAahF,IAAAA,IAAI,EAACrF;AAAlB,GAAD,CAAF,CAAD,EAA2BuB,CAAC,CAAC6I,SAA7B,EAAuC,iBAAvC,EAAyD,KAAK,CAA9D,CAAzZ,EAA0dzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACpD,MAAN;AAAaqI,IAAAA,IAAI,EAAC;AAAC/F,MAAAA,IAAI,EAAC,0BAAN;AAAiCoE,MAAAA,KAAK,EAAC,CAAC,CAAxC;AAA0C4B,MAAAA,OAAO,EAAC;AAACC,QAAAA,OAAO,EAAC;AAAC1D,UAAAA,IAAI,EAAC;AAAC2D,YAAAA,MAAM,EAAC;AAAR,WAAN;AAA0B9B,UAAAA,KAAK,EAAC,CAAC;AAAjC;AAAT;AAAlD;AAAlB,GAAD,CAAF,CAAD,EAA0HpH,CAAC,CAAC6I,SAA5H,EAAsI,UAAtI,EAAiJ,KAAK,CAAtJ,CAA3d,EAAonBzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACpD,MAAN;AAAaqI,IAAAA,IAAI,EAAC;AAAC/F,MAAAA,IAAI,EAAC,0BAAN;AAAiCoE,MAAAA,KAAK,EAAC,CAAC,CAAxC;AAA0C4B,MAAAA,OAAO,EAAC;AAACC,QAAAA,OAAO,EAAC;AAAC1D,UAAAA,IAAI,EAAC;AAAC2D,YAAAA,MAAM,EAAC;AAAR,WAAN;AAA0B9B,UAAAA,KAAK,EAAC,CAAC;AAAjC;AAAT;AAAlD;AAAlB,GAAD,CAAF,CAAD,EAA0HpH,CAAC,CAAC6I,SAA5H,EAAsI,UAAtI,EAAiJ,KAAK,CAAtJ,CAArnB,EAA8wBzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+K,IAAAA,QAAQ,EAAC,CAAC;AAAX,GAAD,CAAF,CAAD,EAAoB9I,CAAC,CAAC6I,SAAtB,EAAgC,SAAhC,EAA0C,KAAK,CAA/C,CAA/wB,EAAi0BzL,CAAC,CAAC,CAACa,CAAC,CAAC,SAAD,EAAW,CAAC,eAAD,CAAX,CAAF,CAAD,EAAkC+B,CAAC,CAAC6I,SAApC,EAA8C,aAA9C,EAA4D,IAA5D,CAAl0B,EAAo4BzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACqF,MAAN;AAAaJ,IAAAA,IAAI,EAAC;AAACxD,MAAAA,IAAI,EAAC;AAAC2D,QAAAA,MAAM,EAAC;AAAR;AAAN;AAAlB,GAAD,CAAF,CAAD,EAAyDlJ,CAAC,CAAC6I,SAA3D,EAAqE,WAArE,EAAiF,KAAK,CAAtF,CAAr4B,EAA89BzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACqF,MAAN;AAAaJ,IAAAA,IAAI,EAAC;AAACxD,MAAAA,IAAI,EAAC,CAAC;AAAP;AAAlB,GAAD,CAAF,CAAD,EAAmCvF,CAAC,CAAC6I,SAArC,EAA+C,mBAA/C,EAAmE,KAAK,CAAxE,CAA/9B,EAA0iCzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACqF;AAAN,GAAD,CAAF,CAAD,EAAoBnJ,CAAC,CAAC6I,SAAtB,EAAgC,OAAhC,EAAwC,KAAK,CAA7C,CAA3iC,EAA2lCzL,CAAC,CAAC,CAACa,CAAC,CAAC,aAAD,EAAe,OAAf,CAAF,CAAD,EAA4B+B,CAAC,CAAC6I,SAA9B,EAAwC,qBAAxC,EAA8D,IAA9D,CAA5lC,EAAgqCzL,CAAC,CAAC,CAACa,CAAC,CAAC,SAAD,EAAW,OAAX,EAAmB,CAAC,MAAD,CAAnB,CAAF,CAAD,EAAiC+B,CAAC,CAAC6I,SAAnC,EAA6C,kBAA7C,EAAgE,IAAhE,CAAjqC,EAAuuCzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACpD,MAAN;AAAaqI,IAAAA,IAAI,EAAC;AAACC,MAAAA,OAAO,EAAC;AAACC,QAAAA,OAAO,EAAC;AAAC1D,UAAAA,IAAI,EAAC;AAAC2D,YAAAA,MAAM,EAAC;AAAR;AAAN,SAAT;AAA8B,uBAAc;AAAC9B,UAAAA,KAAK,EAAC;AAACgC,YAAAA,MAAM,EAAC,IAAR;AAAaC,YAAAA,UAAU,EAAC,CAAC,CAAzB;AAA2BC,YAAAA,YAAY,EAAC,CAAC;AAAzC,WAAP;AAAmD/D,UAAAA,IAAI,EAAC,CAAC;AAAzD;AAA5C;AAAT;AAAlB,GAAD,CAAF,CAAD,EAA4IvF,CAAC,CAAC6I,SAA9I,EAAwJ,SAAxJ,EAAkK,KAAK,CAAvK,CAAxuC,EAAk5CzL,CAAC,CAAC,CAACW,CAAC,CAACyB,CAAD,CAAF,CAAD,EAAQQ,CAAC,CAAC6I,SAAV,EAAoB,KAApB,EAA0B,IAA1B,CAAn5C,EAAm7CzL,CAAC,CAAC,CAACiB,CAAC,CAAC,KAAD,CAAF,CAAD,EAAY2B,CAAC,CAAC6I,SAAd,EAAwB,UAAxB,EAAmC,IAAnC,CAAp7C,EAA69CzL,CAAC,CAAC,CAACW,CAAC,EAAF,CAAD,EAAOiC,CAAC,CAAC6I,SAAT,EAAmB,WAAnB,EAA+B,IAA/B,CAA99C,EAAmgDzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+K,IAAAA,QAAQ,EAAC,CAAC;AAAX,GAAD,CAAF,CAAD,EAAoB9I,CAAC,CAAC6I,SAAtB,EAAgC,OAAhC,EAAwC,KAAK,CAA7C,CAApgD,EAAojDzL,CAAC,CAAC,CAACW,CAAC,CAAC;AAAC+F,IAAAA,IAAI,EAACqF,MAAN;AAAaL,IAAAA,QAAQ,EAAC,CAAC,CAAvB;AAAyBC,IAAAA,IAAI,EAAC;AAACxD,MAAAA,IAAI,EAAC;AAAC2D,QAAAA,MAAM,EAAC;AAAR;AAAN;AAA9B,GAAD,CAAF,CAAD,EAAsElJ,CAAC,CAAC6I,SAAxE,EAAkF,UAAlF,EAA6F,KAAK,CAAlG,CAArjD,EAA0pD7I,CAAC,GAAC5C,CAAC,CAAC,CAACe,CAAC,CAAC,iCAAD,CAAF,CAAD,EAAwC6B,CAAxC,CAA7pD,EAAwsDA,CAA/sD;AAAitD,CAA3zR;AAAA,MAA4zRqC,CAAC,GAAC,CAAC,IAA/zR;AAAA,MAAo0RgG,CAAC,GAAC,CAAC,CAAv0R;AAAA,MAAy0R1B,CAAC,GAAC,eAA30R;AAAA,MAA21RR,CAAC,GAAC;AAACJ,EAAAA,eAAe,EAAC,MAAI,EAArB;AAAwBwC,EAAAA,mBAAmB,EAAC,SAA5C;AAAsDL,EAAAA,iBAAiB,EAAC;AAACE,IAAAA,OAAO,EAAC,CAAC,CAAV;AAAYD,IAAAA,iBAAiB,EAAC,CAAC,CAA/B;AAAiCM,IAAAA,UAAU,EAAC;AAA5C;AAAxE,CAA71R;;AAA29R,SAAO9B,CAAC,IAAI4C,uBAAZ,EAAoCvJ,CAAC,IAAIwJ,YAAzC","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import\"../../core/has.js\";import o from\"../../core/Logger.js\";import{isSome as i}from\"../../core/maybe.js\";import{debounce as s}from\"../../core/promiseUtils.js\";import{urlToObject as a}from\"../../core/urlUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../../core/accessorSupport/decorators/writer.js\";import{updateOrigins as c}from\"../../core/accessorSupport/originUtils.js\";import u from\"../../geometry/Extent.js\";import m from\"../../geometry/HeightModelInfo.js\";import y from\"../../geometry/SpatialReference.js\";import{titleFromUrlAndName as h,parse as f,cleanTitle as v,sanitizeUrlWithLayerId as g,writeUrlWithLayerId as S}from\"../support/arcgisLayerUrl.js\";import{id as w,url as I}from\"../support/commonProperties.js\";import{fetchIndexInfo as x}from\"../support/I3SIndexInfo.js\";import b from\"../../portal/Portal.js\";import j from\"../../portal/PortalItem.js\";import{saveResources as _}from\"../../webdoc/support/saveUtils.js\";const N=o.getLogger(\"esri.layers.mixins.SceneService\"),R=o=>{let R=class extends o{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.copyright=null,this.sublayerTitleMode=\"item-title\",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=s((async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return y.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.substring(r.lastIndexOf(\"/\")+1,r.length),10);return null!=o?new y(o):null}}readFullExtent(e,t,r){if(null!=e&&\"object\"==typeof e)return u.fromJSON(e,r);const o=t.store,i=this._readSpatialReference(t);return null==i||null==o||null==o.extent||!Array.isArray(o.extent)||o.extent.some((e=>e<O))?null:new u({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():\"\",i={major:Number.NaN,minor:Number.NaN,versionString:o},s=o.split(\".\");return s.length>=2&&(i.major=parseInt(s[0],10),i.minor=parseInt(s[1],10)),i}readTitlePortalItem(e){return\"item-title\"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if(\"item-title\"===this.sublayerTitleMode)return h(this.url,t.name);let o=t.name;if(!o&&this.url){const e=f(this.url);i(e)&&(o=e.title)}return\"item-title-and-service-name\"===this.sublayerTitleMode&&r&&(o=r+\" - \"+o),v(o)}set url(e){const t=g({layer:this,url:e,nonStandardUrlAllowed:!1,logger:N});this._set(\"url\",t.url),null!=t.layerId&&this._set(\"layerId\",t.layerId)}writeUrl(e,t,r,o){S(this,e,\"layers\",t,o)}get parsedUrl(){const e=this._get(\"url\");if(!e)return null;const t=a(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=x(this.parsedUrl.path,this.rootNode,e,this.apiKey,N,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if(\"page\"===(null==e?void 0:e.type)){var t,o;const i=e.rootIndex%e.pageSize,s=null==(t=e.rootPage)||null==(o=t.nodes)?void 0:o[i];if(null==s||null==s.obb||null==s.obb.center||null==s.obb.halfSize)throw new r(\"sceneservice:invalid-node-page\",\"Invalid node page.\");if(s.obb.center[0]<O||null==this.fullExtent||this.fullExtent.hasZ)return;const a=s.obb.halfSize,n=s.obb.center[2],l=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);this.fullExtent.zmin=n-l,this.fullExtent.zmax=n+l}else if(\"node\"===(null==e?void 0:e.type)){var i;const t=null==(i=e.rootNode)?void 0:i.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<O)return;const r=t[2],o=t[3];this.fullExtent.zmin=r-o,this.fullExtent.zmax=r+o}}async _fetchService(e){if(null==this.url)throw new r(\"sceneservice:url-not-set\",\"Scene service can not be loaded without valid portal item or url\");if(null==this.layerId&&/SceneServer\\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await t(this.url,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await t(this.parsedUrl.path,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});r.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\"));const o=r.data;this.read(o,{origin:\"service\",url:this.parsedUrl}),this.validateLayer(o)}async _ensureLoadBeforeSave(){await this.load(),\"beforeSave\"in this&&\"function\"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),1===r&&(e.typeKeywords=e.typeKeywords.filter((e=>\"Hosted Service\"!==e))))}async _saveAs(e,t){const o={...E,...t};let i=j.from(e);i||(N.error(\"_saveAs(): requires a portal item parameter\"),await Promise.reject(new r(\"sceneservice:portal-item-required\",\"_saveAs() requires a portal item to save to\"))),i.id&&(i=i.clone(),i.id=null);const s=i.portal||b.getDefault();await this._ensureLoadBeforeSave(),i.type=T,i.portal=s;const a={origin:\"portal-item\",url:null,messages:[],portal:s,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write(null,a)]};return await Promise.all(a.resources.pendingOperations),await this._validateAgainstJSONSchema(n,a,o),i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,o,1),await s._signIn(),await s.user.addItem({item:i,folder:o&&o.folder,data:n}),await _(this.resourceReferences,a,null),this.portalItem=i,c(a),a.portalItem=i,i}async _save(e){const t={...E,...e};this.portalItem||(N.error(\"_save(): requires the .portalItem property to be set\"),await Promise.reject(new r(\"sceneservice:portal-item-not-set\",\"Portal item to save to has not been set on this SceneService\"))),this.portalItem.type!==T&&(N.error(\"_save(): Non-matching portal item type. Got \"+this.portalItem.type+\", expected \"+T),await Promise.reject(new r(\"sceneservice:portal-item-wrong-type\",`Portal item needs to have type \"${T}\"`))),await this._ensureLoadBeforeSave();const o={origin:\"portal-item\",url:this.portalItem.itemUrl&&a(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||b.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write(null,o)]};return await Promise.all(o.resources.pendingOperations),await this._validateAgainstJSONSchema(i,o,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:i}),await _(this.resourceReferences,o,null),c(o),this.portalItem}async _validateAgainstJSONSchema(e,t,o){let i=t.messages.filter((e=>\"error\"===e.type)).map((e=>new r(e.name,e.message,e.details)));if(o&&o.validationOptions.ignoreUnsupported&&(i=i.filter((e=>\"layer:unsupported\"!==e.name&&\"symbol:unsupported\"!==e.name&&\"symbol-layer:unsupported\"!==e.name&&\"property:unsupported\"!==e.name&&\"url:unsupported\"!==e.name&&\"scenemodification:unsupported\"!==e.name))),o.validationOptions.enabled||U){const t=(await import(\"../support/schemaValidator.js\")).validate(e,o.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\\n${t.join(\"\\n\")}`;if(N.error(`_validateAgainstJSONSchema(): ${e}`),\"throw\"===o.validationOptions.failPolicy){const e=t.map((e=>new r(\"sceneservice:schema-validation\",e))).concat(i);throw new r(\"sceneservice-validate:error\",\"Failed to save layer item due to schema validation, see `details.errors`.\",{combined:e})}}}if(i.length>0)throw new r(\"sceneservice:save\",\"Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:i})}};return e([n(w)],R.prototype,\"id\",void 0),e([n({type:y})],R.prototype,\"spatialReference\",void 0),e([l(\"spatialReference\",[\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],R.prototype,\"readSpatialReference\",null),e([n({type:u})],R.prototype,\"fullExtent\",void 0),e([l(\"fullExtent\",[\"fullExtent\",\"store.extent\",\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],R.prototype,\"readFullExtent\",null),e([n({readOnly:!0,type:m})],R.prototype,\"heightModelInfo\",void 0),e([n({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:{source:\"minScale\"},write:!1}}}})],R.prototype,\"minScale\",void 0),e([n({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:{source:\"maxScale\"},write:!1}}}})],R.prototype,\"maxScale\",void 0),e([n({readOnly:!0})],R.prototype,\"version\",void 0),e([l(\"version\",[\"store.version\"])],R.prototype,\"readVersion\",null),e([n({type:String,json:{read:{source:\"copyrightText\"}}})],R.prototype,\"copyright\",void 0),e([n({type:String,json:{read:!1}})],R.prototype,\"sublayerTitleMode\",void 0),e([n({type:String})],R.prototype,\"title\",void 0),e([l(\"portal-item\",\"title\")],R.prototype,\"readTitlePortalItem\",null),e([l(\"service\",\"title\",[\"name\"])],R.prototype,\"readTitleService\",null),e([n({type:Number,json:{origins:{service:{read:{source:\"id\"}},\"portal-item\":{write:{target:\"id\",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],R.prototype,\"layerId\",void 0),e([n(I)],R.prototype,\"url\",null),e([d(\"url\")],R.prototype,\"writeUrl\",null),e([n()],R.prototype,\"parsedUrl\",null),e([n({readOnly:!0})],R.prototype,\"store\",void 0),e([n({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],R.prototype,\"rootNode\",void 0),R=e([p(\"esri.layers.mixins.SceneService\")],R),R},O=-1e38,U=!1,T=\"Scene Service\",E={getTypeKeywords:()=>[],portalItemLayerType:\"unknown\",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:\"throw\"}};export{T as SCENE_SERVICE_ITEM_TYPE,R as SceneService};\n"]},"metadata":{},"sourceType":"module"}