{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { unwrap as e, isSome as r } from \"../../core/maybe.js\";\nimport { WorkerHandle as t } from \"../../core/workers/WorkerHandle.js\";\n\nclass s extends t {\n  constructor(e = null) {\n    super(\"LercWorker\", \"_decode\", e, {\n      strategy: \"dedicated\"\n    }), this.schedule = e, this.ref = 0;\n  }\n\n  decode(e, r, t) {\n    return e && 0 !== e.byteLength ? this.invoke({\n      buffer: e,\n      options: r\n    }, t) : Promise.resolve(null);\n  }\n\n  getTransferList(e) {\n    return [e.buffer];\n  }\n\n  release() {\n    --this.ref <= 0 && (o.forEach((e, r) => {\n      e === this && o.delete(r);\n    }), this.destroy());\n  }\n\n}\n\nconst o = new Map();\n\nfunction n(t = null) {\n  let n = o.get(e(t));\n  return n || (r(t) ? (n = new s(e => t.schedule(e)), o.set(t, n)) : (n = new s(), o.set(null, n))), ++n.ref, n;\n}\n\nexport { n as acquireDecoder };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/layers/support/LercDecoder.js"],"names":["unwrap","e","isSome","r","WorkerHandle","t","s","constructor","strategy","schedule","ref","decode","byteLength","invoke","buffer","options","Promise","resolve","getTransferList","release","o","forEach","delete","destroy","Map","n","get","set","acquireDecoder"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,qBAAnC;AAAyD,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,oCAA7B;;AAAkE,MAAMC,CAAN,SAAgBD,CAAhB,CAAiB;AAACE,EAAAA,WAAW,CAACN,CAAC,GAAC,IAAH,EAAQ;AAAC,UAAM,YAAN,EAAmB,SAAnB,EAA6BA,CAA7B,EAA+B;AAACO,MAAAA,QAAQ,EAAC;AAAV,KAA/B,GAAuD,KAAKC,QAAL,GAAcR,CAArE,EAAuE,KAAKS,GAAL,GAAS,CAAhF;AAAkF;;AAAAC,EAAAA,MAAM,CAACV,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,WAAOJ,CAAC,IAAE,MAAIA,CAAC,CAACW,UAAT,GAAoB,KAAKC,MAAL,CAAY;AAACC,MAAAA,MAAM,EAACb,CAAR;AAAUc,MAAAA,OAAO,EAACZ;AAAlB,KAAZ,EAAiCE,CAAjC,CAApB,GAAwDW,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAA/D;AAAqF;;AAAAC,EAAAA,eAAe,CAACjB,CAAD,EAAG;AAAC,WAAM,CAACA,CAAC,CAACa,MAAH,CAAN;AAAiB;;AAAAK,EAAAA,OAAO,GAAE;AAAC,MAAE,KAAKT,GAAP,IAAY,CAAZ,KAAgBU,CAAC,CAACC,OAAF,CAAW,CAACpB,CAAD,EAAGE,CAAH,KAAO;AAACF,MAAAA,CAAC,KAAG,IAAJ,IAAUmB,CAAC,CAACE,MAAF,CAASnB,CAAT,CAAV;AAAsB,KAAzC,GAA4C,KAAKoB,OAAL,EAA5D;AAA4E;;AAApU;;AAAqU,MAAMH,CAAC,GAAC,IAAII,GAAJ,EAAR;;AAAgB,SAASC,CAAT,CAAWpB,CAAC,GAAC,IAAb,EAAkB;AAAC,MAAIoB,CAAC,GAACL,CAAC,CAACM,GAAF,CAAMzB,CAAC,CAACI,CAAD,CAAP,CAAN;AAAkB,SAAOoB,CAAC,KAAGtB,CAAC,CAACE,CAAD,CAAD,IAAMoB,CAAC,GAAC,IAAInB,CAAJ,CAAOL,CAAC,IAAEI,CAAC,CAACI,QAAF,CAAWR,CAAX,CAAV,CAAF,EAA4BmB,CAAC,CAACO,GAAF,CAAMtB,CAAN,EAAQoB,CAAR,CAAlC,KAA+CA,CAAC,GAAC,IAAInB,CAAJ,EAAF,EAAQc,CAAC,CAACO,GAAF,CAAM,IAAN,EAAWF,CAAX,CAAvD,CAAH,CAAD,EAA2E,EAAEA,CAAC,CAACf,GAA/E,EAAmFe,CAA1F;AAA4F;;AAAA,SAAOA,CAAC,IAAIG,cAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{unwrap as e,isSome as r}from\"../../core/maybe.js\";import{WorkerHandle as t}from\"../../core/workers/WorkerHandle.js\";class s extends t{constructor(e=null){super(\"LercWorker\",\"_decode\",e,{strategy:\"dedicated\"}),this.schedule=e,this.ref=0}decode(e,r,t){return e&&0!==e.byteLength?this.invoke({buffer:e,options:r},t):Promise.resolve(null)}getTransferList(e){return[e.buffer]}release(){--this.ref<=0&&(o.forEach(((e,r)=>{e===this&&o.delete(r)})),this.destroy())}}const o=new Map;function n(t=null){let n=o.get(e(t));return n||(r(t)?(n=new s((e=>t.schedule(e))),o.set(t,n)):(n=new s,o.set(null,n))),++n.ref,n}export{n as acquireDecoder};\n"]},"metadata":{},"sourceType":"module"}