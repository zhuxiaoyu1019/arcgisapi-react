{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { isSome as r } from \"../../../../core/maybe.js\";\nimport { f as e } from \"../../../../chunks/vec4f64.js\";\nimport { BufferViewMat3f64 as t, BufferViewVec3f64 as a, BufferViewVec4f as n } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { perVertexElevationAligner as o } from \"../graphics/ElevationAligners.js\";\nimport { createMapSpaceUVCoords as s } from \"./uvUtils.js\";\nimport { ColorMaterial as i } from \"../../webgl-engine/materials/ColorMaterial.js\";\nimport { PatternMaterial as c } from \"../../webgl-engine/materials/PatternMaterial.js\";\n\nfunction l(r, e, t) {\n  return f(u(r), e, t);\n}\n\nfunction u(r) {\n  return r && r.pattern || null;\n}\n\nfunction f(t, a, n) {\n  return r(t) ? \"none\" === t.style || \"solid\" === t.style ? (\"none\" === t.style && (a.color = e(0, 0, 0, 0), a.transparent = !0), new i(a)) : (a.style = m(t.style), a.draped = n.isDraped, new c(a)) : new i(a);\n}\n\nfunction m(r) {\n  switch (r) {\n    case \"horizontal\":\n      return 0;\n\n    case \"vertical\":\n      return 1;\n\n    case \"cross\":\n      return 2;\n\n    case \"forward-diagonal\":\n      return 3;\n\n    case \"backward-diagonal\":\n      return 4;\n\n    case \"diagonal-cross\":\n      return 5;\n\n    default:\n      return;\n  }\n}\n\nfunction p(r) {\n  return r.material instanceof c && !r.material.params.draped;\n}\n\nfunction d(r, e) {\n  if (p(r)) {\n    const o = r.geometry.vertexAttributes,\n          i = o.get(\"position\").data,\n          c = o.get(\"uvMapSpace\").data,\n          l = o.get(\"boundingRect\").data;\n    s(n.fromTypedArray(c), a.fromTypedArray(i), e, t.fromTypedArray(l));\n  }\n}\n\nfunction g(r, e, t, a) {\n  const n = o(r, e, t, a),\n        s = r.stageObject.geometryRecords;\n\n  for (let o = 0; o < s.length; o++) d(s[o], a);\n\n  return n;\n}\n\nexport { l as createMaterial, f as createMaterialFromPattern, m as parsePatternStyle, p as requiresUVUpdates, d as updateMapSpaceUVCoords, g as uvElevationAligner };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/support/patternUtils.js"],"names":["isSome","r","f","e","BufferViewMat3f64","t","BufferViewVec3f64","a","BufferViewVec4f","n","perVertexElevationAligner","o","createMapSpaceUVCoords","s","ColorMaterial","i","PatternMaterial","c","l","u","pattern","style","color","transparent","m","draped","isDraped","p","material","params","d","geometry","vertexAttributes","get","data","fromTypedArray","g","stageObject","geometryRecords","length","createMaterial","createMaterialFromPattern","parsePatternStyle","requiresUVUpdates","updateMapSpaceUVCoords","uvElevationAligner"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{f as e}from\"../../../../chunks/vec4f64.js\";import{BufferViewMat3f64 as t,BufferViewVec3f64 as a,BufferViewVec4f as n}from\"../../../../geometry/support/buffer/BufferView.js\";import{perVertexElevationAligner as o}from\"../graphics/ElevationAligners.js\";import{createMapSpaceUVCoords as s}from\"./uvUtils.js\";import{ColorMaterial as i}from\"../../webgl-engine/materials/ColorMaterial.js\";import{PatternMaterial as c}from\"../../webgl-engine/materials/PatternMaterial.js\";function l(r,e,t){return f(u(r),e,t)}function u(r){return r&&r.pattern||null}function f(t,a,n){return r(t)?\"none\"===t.style||\"solid\"===t.style?(\"none\"===t.style&&(a.color=e(0,0,0,0),a.transparent=!0),new i(a)):(a.style=m(t.style),a.draped=n.isDraped,new c(a)):new i(a)}function m(r){switch(r){case\"horizontal\":return 0;case\"vertical\":return 1;case\"cross\":return 2;case\"forward-diagonal\":return 3;case\"backward-diagonal\":return 4;case\"diagonal-cross\":return 5;default:return}}function p(r){return r.material instanceof c&&!r.material.params.draped}function d(r,e){if(p(r)){const o=r.geometry.vertexAttributes,i=o.get(\"position\").data,c=o.get(\"uvMapSpace\").data,l=o.get(\"boundingRect\").data;s(n.fromTypedArray(c),a.fromTypedArray(i),e,t.fromTypedArray(l))}}function g(r,e,t,a){const n=o(r,e,t,a),s=r.stageObject.geometryRecords;for(let o=0;o<s.length;o++)d(s[o],a);return n}export{l as createMaterial,f as createMaterialFromPattern,m as parsePatternStyle,p as requiresUVUpdates,d as updateMapSpaceUVCoords,g as uvElevationAligner};\n"]},"metadata":{},"sourceType":"module"}