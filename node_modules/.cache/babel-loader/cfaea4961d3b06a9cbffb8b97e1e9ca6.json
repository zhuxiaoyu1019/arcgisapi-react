{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Error.js\";\nimport { property as t } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as o } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { combinedViewLayerTimeExtentProperty as s } from \"../../layers/support/commonProperties.js\";\nimport { ExportWMSImageParameters as p } from \"../../layers/support/ExportWMSImageParameters.js\";\n\nconst a = a => {\n  let i = class extends a {\n    initialize() {\n      this.exportImageParameters = new p({\n        layer: this.layer\n      });\n    }\n\n    destroy() {\n      this.exportImageParameters.destroy(), this.exportImageParameters = null;\n    }\n\n    get exportImageVersion() {\n      var e;\n      return null == (e = this.exportImageParameters) || e.commitProperty(\"version\"), this.commitProperty(\"timeExtent\"), (this._get(\"exportImageVersion\") || 0) + 1;\n    }\n\n    fetchPopupFeatures(e) {\n      const {\n        layer: t\n      } = this;\n      if (!e) return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\", \"Nothing to fetch without area\", {\n        layer: t\n      }));\n      const {\n        popupEnabled: o\n      } = t;\n      if (!o) return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\", \"popupEnabled should be true\", {\n        popupEnabled: o\n      }));\n      const s = this.createFetchPopupFeaturesQuery(e);\n      if (!s) return Promise.resolve([]);\n      const {\n        extent: p,\n        width: a,\n        height: i,\n        x: m,\n        y: n\n      } = s;\n      if (!(p && a && i)) throw new r(\"wmslayerview:fetchPopupFeatures\", \"WMSLayer does not support fetching features.\", {\n        extent: p,\n        width: a,\n        height: i\n      });\n      const u = t.fetchFeatureInfo(p, a, i, m, n);\n      return Promise.resolve(u ? [u] : []);\n    }\n\n  };\n  return e([t()], i.prototype, \"exportImageParameters\", void 0), e([t({\n    readOnly: !0\n  })], i.prototype, \"exportImageVersion\", null), e([t()], i.prototype, \"layer\", void 0), e([t(s)], i.prototype, \"timeExtent\", void 0), i = e([o(\"esri.layers.mixins.WMSLayerView\")], i), i;\n};\n\nexport default a;\nexport { a as WMSLayerView };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/layers/WMSLayerView.js"],"names":["_","e","r","property","t","subclass","o","combinedViewLayerTimeExtentProperty","s","ExportWMSImageParameters","p","a","i","initialize","exportImageParameters","layer","destroy","exportImageVersion","commitProperty","_get","fetchPopupFeatures","Promise","reject","popupEnabled","createFetchPopupFeaturesQuery","resolve","extent","width","height","x","m","y","n","u","fetchFeatureInfo","prototype","readOnly","WMSLayerView"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as s}from\"../../layers/support/commonProperties.js\";import{ExportWMSImageParameters as p}from\"../../layers/support/ExportWMSImageParameters.js\";const a=a=>{let i=class extends a{initialize(){this.exportImageParameters=new p({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get exportImageVersion(){var e;return null==(e=this.exportImageParameters)||e.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),(this._get(\"exportImageVersion\")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new r(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new r(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:p,width:a,height:i});const u=t.fetchFeatureInfo(p,a,i,m,n);return Promise.resolve(u?[u]:[])}};return e([t()],i.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],i.prototype,\"exportImageVersion\",null),e([t()],i.prototype,\"layer\",void 0),e([t(s)],i.prototype,\"timeExtent\",void 0),i=e([o(\"esri.layers.mixins.WMSLayerView\")],i),i};export default a;export{a as WMSLayerView};\n"]},"metadata":{},"sourceType":"module"}