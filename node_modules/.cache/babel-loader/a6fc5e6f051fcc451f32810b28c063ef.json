{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Logger.js\";\nimport { isSome as t } from \"../../../core/maybe.js\";\nimport { s as r, f as o, a as i, b as n } from \"../../../chunks/vec3.js\";\nimport { c as s, Z as a } from \"../../../chunks/vec3f64.js\";\nimport { projectPointToVector as c } from \"../../projection.js\";\nimport { getSphericalPCPF as l } from \"../../projectionEllipsoid.js\";\nimport { isGeographicMesh as p } from \"./geographicUtils.js\";\nimport { projectToPCPF as f, projectNormalToPCPF as g, projectTangentToPCPF as m, projectFromPCPF as u, projectNormalFromPCPF as h, projectTangentFromPCPF as v } from \"./projection.js\";\nconst d = e.getLogger(\"esri.geometry.support.meshUtils.scale\");\n\nfunction j(e, r, o) {\n  if (!e.vertexAttributes || !e.vertexAttributes.position) return;\n  const i = e.spatialReference;\n\n  if (t(e.transform)) {\n    var n;\n    null != (null == o ? void 0 : o.geographic) && o.geographic !== e.transform.geographic && d.warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${e.transform.geographic}) is not supported`);\n    const t = null != (n = null == o ? void 0 : o.origin) ? n : e.transform.getOriginPoint(i);\n    x(e.transform, r, t);\n  } else {\n    const t = p(e.spatialReference, o),\n          i = o && o.origin || e.origin;\n    t ? A(e, r, i) : b(e, r, i);\n  }\n}\n\nfunction x(e, t, a) {\n  const c = r(w, a.x, a.y, a.z),\n        l = o(w, c, e.origin);\n  e.applyLocalInverse(l, k);\n  const p = i(s(), e.scale, t);\n  e.scale = p, e.applyLocalInverse(l, l), o(l, l, k), e.translation = n(s(), e.translation, l);\n}\n\nfunction A(e, r, o) {\n  const i = e.spatialReference,\n        n = l(i),\n        s = R;\n  c(o, s, n) || c(e.origin, s, n);\n  const a = e.vertexAttributes.position,\n        p = e.vertexAttributes.normal,\n        d = e.vertexAttributes.tangent,\n        j = new Float64Array(a.length),\n        x = t(p) ? new Float32Array(p.length) : null,\n        A = t(d) ? new Float32Array(d.length) : null;\n  f(a, i, j), t(p) && g(p, a, j, i, x), t(d) && m(d, a, j, i, A), y(j, r, s), u(j, a, i), t(p) && h(x, a, j, i, p), t(d) && v(A, a, j, i, d), e.vertexAttributesChanged();\n}\n\nfunction b(e, t, r) {\n  const o = R;\n\n  if (!c(r, o, e.spatialReference)) {\n    const t = e.origin;\n    o[0] = t.x, o[1] = t.y, o[2] = t.z, d.error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}).`);\n  }\n\n  y(e.vertexAttributes.position, t, o), e.vertexAttributesChanged();\n}\n\nfunction y(e, t, r = a) {\n  if (e) for (let o = 0; o < e.length; o += 3) {\n    for (let t = 0; t < 3; t++) w[t] = e[o + t] - r[t];\n\n    i(w, w, t);\n\n    for (let t = 0; t < 3; t++) e[o + t] = w[t] + r[t];\n  }\n}\n\nconst w = s(),\n      k = s(),\n      R = s();\nexport { j as scale };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/support/meshUtils/scale.js"],"names":["e","isSome","t","s","r","f","o","a","i","b","n","c","Z","projectPointToVector","getSphericalPCPF","l","isGeographicMesh","p","projectToPCPF","projectNormalToPCPF","g","projectTangentToPCPF","m","projectFromPCPF","u","projectNormalFromPCPF","h","projectTangentFromPCPF","v","d","getLogger","j","vertexAttributes","position","spatialReference","transform","geographic","warn","origin","getOriginPoint","x","A","w","y","z","applyLocalInverse","k","scale","translation","R","normal","tangent","Float64Array","length","Float32Array","vertexAttributesChanged","error","wkid"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Logger.js\";import{isSome as t}from\"../../../core/maybe.js\";import{s as r,f as o,a as i,b as n}from\"../../../chunks/vec3.js\";import{c as s,Z as a}from\"../../../chunks/vec3f64.js\";import{projectPointToVector as c}from\"../../projection.js\";import{getSphericalPCPF as l}from\"../../projectionEllipsoid.js\";import{isGeographicMesh as p}from\"./geographicUtils.js\";import{projectToPCPF as f,projectNormalToPCPF as g,projectTangentToPCPF as m,projectFromPCPF as u,projectNormalFromPCPF as h,projectTangentFromPCPF as v}from\"./projection.js\";const d=e.getLogger(\"esri.geometry.support.meshUtils.scale\");function j(e,r,o){if(!e.vertexAttributes||!e.vertexAttributes.position)return;const i=e.spatialReference;if(t(e.transform)){var n;null!=(null==o?void 0:o.geographic)&&o.geographic!==e.transform.geographic&&d.warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${e.transform.geographic}) is not supported`);const t=null!=(n=null==o?void 0:o.origin)?n:e.transform.getOriginPoint(i);x(e.transform,r,t)}else{const t=p(e.spatialReference,o),i=o&&o.origin||e.origin;t?A(e,r,i):b(e,r,i)}}function x(e,t,a){const c=r(w,a.x,a.y,a.z),l=o(w,c,e.origin);e.applyLocalInverse(l,k);const p=i(s(),e.scale,t);e.scale=p,e.applyLocalInverse(l,l),o(l,l,k),e.translation=n(s(),e.translation,l)}function A(e,r,o){const i=e.spatialReference,n=l(i),s=R;c(o,s,n)||c(e.origin,s,n);const a=e.vertexAttributes.position,p=e.vertexAttributes.normal,d=e.vertexAttributes.tangent,j=new Float64Array(a.length),x=t(p)?new Float32Array(p.length):null,A=t(d)?new Float32Array(d.length):null;f(a,i,j),t(p)&&g(p,a,j,i,x),t(d)&&m(d,a,j,i,A),y(j,r,s),u(j,a,i),t(p)&&h(x,a,j,i,p),t(d)&&v(A,a,j,i,d),e.vertexAttributesChanged()}function b(e,t,r){const o=R;if(!c(r,o,e.spatialReference)){const t=e.origin;o[0]=t.x,o[1]=t.y,o[2]=t.z,d.error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}).`)}y(e.vertexAttributes.position,t,o),e.vertexAttributesChanged()}function y(e,t,r=a){if(e)for(let o=0;o<e.length;o+=3){for(let t=0;t<3;t++)w[t]=e[o+t]-r[t];i(w,w,t);for(let t=0;t<3;t++)e[o+t]=w[t]+r[t]}}const w=s(),k=s(),R=s();export{j as scale};\n"]},"metadata":{},"sourceType":"module"}