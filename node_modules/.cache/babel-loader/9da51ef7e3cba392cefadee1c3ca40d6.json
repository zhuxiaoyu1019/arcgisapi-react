{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { s as e, n as t, f as s, c as r, i, m as o } from \"../../../../chunks/vec3.js\";\nimport { c as n } from \"../../../../chunks/vec3f64.js\";\nimport { newLayout as a } from \"../../support/buffer/InterleavedLayout.js\";\nimport c from \"../lib/GLMaterial.js\";\nimport { Material as u, materialParametersDefaults as f } from \"../lib/Material.js\";\nimport { MeasurementArrowTechniqueConfiguration as l, MeasurementArrowTechnique as p } from \"../shaders/MeasurementArrowTechnique.js\";\n\nclass h extends u {\n  constructor(e) {\n    super(e, d), this.techniqueConfig = new l();\n  }\n\n  getTechniqueConfig() {\n    return this.techniqueConfig.polygonOffsetEnabled = this.params.polygonOffset, this.techniqueConfig;\n  }\n\n  dispose() {}\n\n  getPassParameters() {\n    return this.params;\n  }\n\n  intersect() {}\n\n  createBufferWriter() {\n    return new w();\n  }\n\n  getGLMaterial(e) {\n    return 0 === e.output ? new m(e) : void 0;\n  }\n\n}\n\nclass m extends c {\n  constructor(e) {\n    super(e), this.updateParameters();\n  }\n\n  updateParameters() {\n    this._technique = this._techniqueRep.releaseAndAcquire(p, this._material.getTechniqueConfig(), this._technique);\n  }\n\n  beginSlot(e) {\n    return 3 === e;\n  }\n\n  bind(e) {\n    this._technique.bindPass(this._material.getPassParameters(), e);\n  }\n\n}\n\nconst d = {\n  width: 32,\n  outlineSize: .2,\n  outlineColor: [1, .5, 0, 1],\n  stripeLength: 1,\n  stripeEvenColor: [1, 1, 1, 1],\n  stripeOddColor: [1, .5, 0, 1],\n  polygonOffset: !1,\n  ...f\n},\n      g = a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),\n      v = n(),\n      q = n(),\n      b = n(),\n      x = n(),\n      C = n();\n\nclass w {\n  constructor() {\n    this.vertexBufferLayout = g;\n  }\n\n  allocate(e) {\n    return this.vertexBufferLayout.createBuffer(e);\n  }\n\n  elementCount(e) {\n    return 2 * (e.indices.get(\"position\").length / 2 + 1);\n  }\n\n  write(n, a, c, u) {\n    const f = a.vertexAttributes.get(\"position\").data,\n          l = a.vertexAttributes.get(\"normal\").data,\n          p = f.length / 3,\n          h = a && a.indices && a.indices.get(\"position\");\n    h && h.length !== 2 * (p - 1) && console.warn(\"MeasurementArrowMaterial does not support indices\");\n    const m = v,\n          d = q,\n          g = b,\n          w = x,\n          P = C,\n          j = n.transformation,\n          y = n.invTranspTransformation,\n          A = c.position,\n          L = c.normal,\n          M = c.uv0;\n    let _ = 0;\n\n    for (let v = 0; v < p; ++v) {\n      const n = 3 * v;\n\n      if (e(m, f[n], f[n + 1], f[n + 2]), v < p - 1) {\n        const i = 3 * (v + 1);\n        e(d, f[i], f[i + 1], f[i + 2]), e(P, l[i], l[i + 1], l[i + 2]), t(P, P), s(g, d, m), t(g, g), r(w, P, g), t(w, w);\n      }\n\n      const a = i(m, d);\n      j && y && (o(m, m, j), o(d, d, j), o(w, w, y));\n      const c = u + 2 * v,\n            h = c + 1;\n      A.setVec(c, m), A.setVec(h, m), L.setVec(c, w), L.setVec(h, w), M.set(c, 0, _), M.set(c, 1, -1), M.set(h, 0, _), M.set(h, 1, 1), v < p - 1 && (_ += a);\n    }\n\n    const T = c.auxpos1;\n\n    for (let e = 0; e < 2 * p; ++e) T.set(u + e, _);\n  }\n\n}\n\nexport { h as MeasurementArrowMaterial };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/materials/MeasurementArrowMaterial.js"],"names":["s","e","n","t","f","c","r","i","m","o","newLayout","a","Material","u","materialParametersDefaults","MeasurementArrowTechniqueConfiguration","l","MeasurementArrowTechnique","p","h","constructor","d","techniqueConfig","getTechniqueConfig","polygonOffsetEnabled","params","polygonOffset","dispose","getPassParameters","intersect","createBufferWriter","w","getGLMaterial","output","updateParameters","_technique","_techniqueRep","releaseAndAcquire","_material","beginSlot","bind","bindPass","width","outlineSize","outlineColor","stripeLength","stripeEvenColor","stripeOddColor","g","vec3f","vec2f","f32","v","q","b","x","C","vertexBufferLayout","allocate","createBuffer","elementCount","indices","get","length","write","vertexAttributes","data","console","warn","P","j","transformation","y","invTranspTransformation","A","position","L","normal","M","uv0","_","setVec","set","T","auxpos1","MeasurementArrowMaterial"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{s as e,n as t,f as s,c as r,i,m as o}from\"../../../../chunks/vec3.js\";import{c as n}from\"../../../../chunks/vec3f64.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{Material as u,materialParametersDefaults as f}from\"../lib/Material.js\";import{MeasurementArrowTechniqueConfiguration as l,MeasurementArrowTechnique as p}from\"../shaders/MeasurementArrowTechnique.js\";class h extends u{constructor(e){super(e,d),this.techniqueConfig=new l}getTechniqueConfig(){return this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset,this.techniqueConfig}dispose(){}getPassParameters(){return this.params}intersect(){}createBufferWriter(){return new w}getGLMaterial(e){return 0===e.output?new m(e):void 0}}class m extends c{constructor(e){super(e),this.updateParameters()}updateParameters(){this._technique=this._techniqueRep.releaseAndAcquire(p,this._material.getTechniqueConfig(),this._technique)}beginSlot(e){return 3===e}bind(e){this._technique.bindPass(this._material.getPassParameters(),e)}}const d={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...f},g=a().vec3f(\"position\").vec3f(\"normal\").vec2f(\"uv0\").f32(\"auxpos1\"),v=n(),q=n(),b=n(),x=n(),C=n();class w{constructor(){this.vertexBufferLayout=g}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return 2*(e.indices.get(\"position\").length/2+1)}write(n,a,c,u){const f=a.vertexAttributes.get(\"position\").data,l=a.vertexAttributes.get(\"normal\").data,p=f.length/3,h=a&&a.indices&&a.indices.get(\"position\");h&&h.length!==2*(p-1)&&console.warn(\"MeasurementArrowMaterial does not support indices\");const m=v,d=q,g=b,w=x,P=C,j=n.transformation,y=n.invTranspTransformation,A=c.position,L=c.normal,M=c.uv0;let _=0;for(let v=0;v<p;++v){const n=3*v;if(e(m,f[n],f[n+1],f[n+2]),v<p-1){const i=3*(v+1);e(d,f[i],f[i+1],f[i+2]),e(P,l[i],l[i+1],l[i+2]),t(P,P),s(g,d,m),t(g,g),r(w,P,g),t(w,w)}const a=i(m,d);j&&y&&(o(m,m,j),o(d,d,j),o(w,w,y));const c=u+2*v,h=c+1;A.setVec(c,m),A.setVec(h,m),L.setVec(c,w),L.setVec(h,w),M.set(c,0,_),M.set(c,1,-1),M.set(h,0,_),M.set(h,1,1),v<p-1&&(_+=a)}const T=c.auxpos1;for(let e=0;e<2*p;++e)T.set(u+e,_)}}export{h as MeasurementArrowMaterial};\n"]},"metadata":{},"sourceType":"module"}