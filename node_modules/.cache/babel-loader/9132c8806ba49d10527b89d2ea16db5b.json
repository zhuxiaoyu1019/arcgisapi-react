{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { ErrorHandler as e } from \"./error-handler.js\";\nimport { Scanner as t } from \"./scanner.js\";\nimport { TokenName as s } from \"./token.js\";\n\nclass n {\n  constructor() {\n    this.values = [], this.curly = this.paren = -1;\n  }\n\n  beforeFunctionExpression(e) {\n    return [\"(\", \"{\", \"[\", \"in\", \"typeof\", \"instanceof\", \"new\", \"return\", \"case\", \"delete\", \"throw\", \"void\", \"=\", \"+=\", \"-=\", \"*=\", \"**=\", \"/=\", \"%=\", \"<<=\", \">>=\", \">>>=\", \"&=\", \"|=\", \"^=\", \",\", \"+\", \"-\", \"*\", \"**\", \"/\", \"%\", \"++\", \"--\", \"<<\", \">>\", \">>>\", \"&\", \"|\", \"^\", \"!\", \"~\", \"&&\", \"||\", \"?\", \":\", \"===\", \"==\", \">=\", \"<=\", \"<\", \">\", \"!=\", \"!==\"].indexOf(e) >= 0;\n  }\n\n  isRegexStart() {\n    const e = this.values[this.values.length - 1];\n    let t = null !== e;\n\n    switch (e) {\n      case \"this\":\n      case \"]\":\n        t = !1;\n        break;\n\n      case \")\":\n        {\n          const e = this.values[this.paren - 1];\n          t = \"if\" === e || \"while\" === e || \"for\" === e || \"with\" === e;\n          break;\n        }\n\n      case \"}\":\n        if (t = !0, \"function\" === this.values[this.curly - 3]) {\n          const e = this.values[this.curly - 4];\n          t = !!e && !this.beforeFunctionExpression(e);\n        } else if (\"function\" === this.values[this.curly - 4]) {\n          const e = this.values[this.curly - 5];\n          t = !e || !this.beforeFunctionExpression(e);\n        }\n\n    }\n\n    return t;\n  }\n\n  push(e) {\n    7 === e.type || 4 === e.type ? (\"{\" === e.value ? this.curly = this.values.length : \"(\" === e.value && (this.paren = this.values.length), this.values.push(e.value)) : this.values.push(null);\n  }\n\n}\n\nclass r {\n  constructor(s, r) {\n    this.errorHandler = new e(), this.errorHandler.tolerant = !!r && \"boolean\" == typeof r.tolerant && r.tolerant, this.scanner = new t(s, this.errorHandler), this.scanner.trackComment = !!r && \"boolean\" == typeof r.comment && r.comment, this.trackRange = !!r && \"boolean\" == typeof r.range && r.range, this.trackLoc = !!r && \"boolean\" == typeof r.loc && r.loc, this.buffer = [], this.reader = new n();\n  }\n\n  errors() {\n    return this.errorHandler.errors;\n  }\n\n  getNextToken() {\n    if (0 === this.buffer.length) {\n      const t = this.scanner.scanComments();\n      if (this.scanner.trackComment) for (let e = 0; e < t.length; ++e) {\n        const s = t[e],\n              n = this.scanner.source.slice(s.slice[0], s.slice[1]),\n              r = {\n          type: s.multiLine ? \"BlockComment\" : \"LineComment\",\n          value: n\n        };\n        this.trackRange && (r.range = s.range), this.trackLoc && (r.loc = s.loc), this.buffer.push(r);\n      }\n\n      if (!this.scanner.eof()) {\n        let t;\n        this.trackLoc && (t = {\n          start: {\n            line: this.scanner.lineNumber,\n            column: this.scanner.index - this.scanner.lineStart\n          },\n          end: {}\n        });\n        let n;\n\n        if (\"/\" === this.scanner.source[this.scanner.index] && this.reader.isRegexStart()) {\n          const t = this.scanner.saveState();\n\n          try {\n            n = this.scanner.scanRegExp();\n          } catch (e) {\n            this.scanner.restoreState(t), n = this.scanner.lex();\n          }\n        } else n = this.scanner.lex();\n\n        this.reader.push(n);\n        const r = {\n          type: s[n.type],\n          value: this.scanner.source.slice(n.start, n.end)\n        };\n\n        if (this.trackRange && (r.range = [n.start, n.end]), this.trackLoc && (t.end = {\n          line: this.scanner.lineNumber,\n          column: this.scanner.index - this.scanner.lineStart\n        }, r.loc = t), 9 === n.type) {\n          const e = n.pattern,\n                t = n.flags;\n          r.regex = {\n            pattern: e,\n            flags: t\n          };\n        }\n\n        this.buffer.push(r);\n      }\n    }\n\n    return this.buffer.shift();\n  }\n\n}\n\nexport { r as Tokenizer };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/arcade/lib/tokenizer.js"],"names":["ErrorHandler","e","Scanner","t","TokenName","s","n","constructor","values","curly","paren","beforeFunctionExpression","indexOf","isRegexStart","length","push","type","value","r","errorHandler","tolerant","scanner","trackComment","comment","trackRange","range","trackLoc","loc","buffer","reader","errors","getNextToken","scanComments","source","slice","multiLine","eof","start","line","lineNumber","column","index","lineStart","end","saveState","scanRegExp","restoreState","lex","pattern","flags","regex","shift","Tokenizer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ErrorHandler as e}from\"./error-handler.js\";import{Scanner as t}from\"./scanner.js\";import{TokenName as s}from\"./token.js\";class n{constructor(){this.values=[],this.curly=this.paren=-1}beforeFunctionExpression(e){return[\"(\",\"{\",\"[\",\"in\",\"typeof\",\"instanceof\",\"new\",\"return\",\"case\",\"delete\",\"throw\",\"void\",\"=\",\"+=\",\"-=\",\"*=\",\"**=\",\"/=\",\"%=\",\"<<=\",\">>=\",\">>>=\",\"&=\",\"|=\",\"^=\",\",\",\"+\",\"-\",\"*\",\"**\",\"/\",\"%\",\"++\",\"--\",\"<<\",\">>\",\">>>\",\"&\",\"|\",\"^\",\"!\",\"~\",\"&&\",\"||\",\"?\",\":\",\"===\",\"==\",\">=\",\"<=\",\"<\",\">\",\"!=\",\"!==\"].indexOf(e)>=0}isRegexStart(){const e=this.values[this.values.length-1];let t=null!==e;switch(e){case\"this\":case\"]\":t=!1;break;case\")\":{const e=this.values[this.paren-1];t=\"if\"===e||\"while\"===e||\"for\"===e||\"with\"===e;break}case\"}\":if(t=!0,\"function\"===this.values[this.curly-3]){const e=this.values[this.curly-4];t=!!e&&!this.beforeFunctionExpression(e)}else if(\"function\"===this.values[this.curly-4]){const e=this.values[this.curly-5];t=!e||!this.beforeFunctionExpression(e)}}return t}push(e){7===e.type||4===e.type?(\"{\"===e.value?this.curly=this.values.length:\"(\"===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)}}class r{constructor(s,r){this.errorHandler=new e,this.errorHandler.tolerant=!!r&&(\"boolean\"==typeof r.tolerant&&r.tolerant),this.scanner=new t(s,this.errorHandler),this.scanner.trackComment=!!r&&(\"boolean\"==typeof r.comment&&r.comment),this.trackRange=!!r&&(\"boolean\"==typeof r.range&&r.range),this.trackLoc=!!r&&(\"boolean\"==typeof r.loc&&r.loc),this.buffer=[],this.reader=new n}errors(){return this.errorHandler.errors}getNextToken(){if(0===this.buffer.length){const t=this.scanner.scanComments();if(this.scanner.trackComment)for(let e=0;e<t.length;++e){const s=t[e],n=this.scanner.source.slice(s.slice[0],s.slice[1]),r={type:s.multiLine?\"BlockComment\":\"LineComment\",value:n};this.trackRange&&(r.range=s.range),this.trackLoc&&(r.loc=s.loc),this.buffer.push(r)}if(!this.scanner.eof()){let t;this.trackLoc&&(t={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});let n;if(\"/\"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){const t=this.scanner.saveState();try{n=this.scanner.scanRegExp()}catch(e){this.scanner.restoreState(t),n=this.scanner.lex()}}else n=this.scanner.lex();this.reader.push(n);const r={type:s[n.type],value:this.scanner.source.slice(n.start,n.end)};if(this.trackRange&&(r.range=[n.start,n.end]),this.trackLoc&&(t.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},r.loc=t),9===n.type){const e=n.pattern,t=n.flags;r.regex={pattern:e,flags:t}}this.buffer.push(r)}}return this.buffer.shift()}}export{r as Tokenizer};\n"]},"metadata":{},"sourceType":"module"}