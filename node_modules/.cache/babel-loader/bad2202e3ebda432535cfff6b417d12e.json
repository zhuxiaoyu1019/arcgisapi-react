{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../../../../chunks/tslib.es6.js\";\nimport { property as t } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/Logger.js\";\nimport { subclass as e } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { c as n } from \"../../../../chunks/vec3f64.js\";\nimport o from \"../../../ViewAnimation.js\";\nimport { Animation as s } from \"../../animation/pointToPoint/Animation.js\";\nimport { AnimationController as r } from \"./AnimationController.js\";\nimport a from \"../../webgl-engine/lib/Camera.js\";\nimport { Intersector as m } from \"../../webgl-engine/lib/Intersector.js\";\nimport { EasingFunctions as c } from \"../../../animation/easing.js\";\nlet h = class extends r {\n  constructor(i) {\n    super(i), this.view = null, this.mode = \"interaction\", this.hasTarget = !1;\n  }\n\n  get intersectionHelper() {\n    return this.view.sceneIntersectionHelper;\n  }\n\n  initialize() {\n    this.animation = new s(this.view.state.viewingMode), this.viewAnimation = \"interaction\" === this.mode ? null : new o();\n  }\n\n  get isInteractive() {\n    return \"interaction\" === this.mode;\n  }\n\n  begin(i, t) {\n    this.hasTarget = !0;\n    const e = this.animationSettings(t);\n    p.copyFrom(this.view.state.camera);\n    const n = new m(this.view.state.viewingMode);\n    this.intersectionHelper.intersectRay(p.ray, n, l) && (p.center = l), this.animation.update(p, i, e), this.animation.finished && this.finish();\n  }\n\n  finish() {\n    this.animation.currentTime = this.animation.time, super.finish();\n  }\n\n  get steppingFinished() {\n    return this.hasTarget && this.animation.finished;\n  }\n\n  stepController(i, t) {\n    this.hasTarget && this.animation.step(i, t);\n  }\n\n  onControllerEnd(i) {\n    this.hasTarget && (this.animation.cameraAt(this.animation.currentTime / this.animation.time, i), this.animation.currentTime = this.animation.time), super.onControllerEnd(i);\n  }\n\n  animationSettings(i = {}) {\n    return {\n      apex: {\n        maximumDistance: this.view.state.constraints.clampAltitude(1 / 0) / 6,\n        ascensionFactor: void 0,\n        descensionFactor: void 0\n      },\n      ...i,\n      easing: \"string\" == typeof i.easing ? c[i.easing] : i.easing\n    };\n  }\n\n};\ni([t({\n  constructOnly: !0\n})], h.prototype, \"view\", void 0), i([t({\n  constructOnly: !0\n})], h.prototype, \"mode\", void 0), h = i([e(\"esri.views.3d.state.controllers.PointToPointAnimationController\")], h);\nconst p = new a(),\n      l = n();\nexport { h as PointToPointAnimationController };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/state/controllers/PointToPointAnimationController.js"],"names":["_","i","property","t","subclass","e","c","n","o","Animation","s","AnimationController","r","a","Intersector","m","EasingFunctions","h","constructor","view","mode","hasTarget","intersectionHelper","sceneIntersectionHelper","initialize","animation","state","viewingMode","viewAnimation","isInteractive","begin","animationSettings","p","copyFrom","camera","intersectRay","ray","l","center","update","finished","finish","currentTime","time","steppingFinished","stepController","step","onControllerEnd","cameraAt","apex","maximumDistance","constraints","clampAltitude","ascensionFactor","descensionFactor","easing","constructOnly","prototype","PointToPointAnimationController"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c as n}from\"../../../../chunks/vec3f64.js\";import o from\"../../../ViewAnimation.js\";import{Animation as s}from\"../../animation/pointToPoint/Animation.js\";import{AnimationController as r}from\"./AnimationController.js\";import a from\"../../webgl-engine/lib/Camera.js\";import{Intersector as m}from\"../../webgl-engine/lib/Intersector.js\";import{EasingFunctions as c}from\"../../../animation/easing.js\";let h=class extends r{constructor(i){super(i),this.view=null,this.mode=\"interaction\",this.hasTarget=!1}get intersectionHelper(){return this.view.sceneIntersectionHelper}initialize(){this.animation=new s(this.view.state.viewingMode),this.viewAnimation=\"interaction\"===this.mode?null:new o}get isInteractive(){return\"interaction\"===this.mode}begin(i,t){this.hasTarget=!0;const e=this.animationSettings(t);p.copyFrom(this.view.state.camera);const n=new m(this.view.state.viewingMode);this.intersectionHelper.intersectRay(p.ray,n,l)&&(p.center=l),this.animation.update(p,i,e),this.animation.finished&&this.finish()}finish(){this.animation.currentTime=this.animation.time,super.finish()}get steppingFinished(){return this.hasTarget&&this.animation.finished}stepController(i,t){this.hasTarget&&this.animation.step(i,t)}onControllerEnd(i){this.hasTarget&&(this.animation.cameraAt(this.animation.currentTime/this.animation.time,i),this.animation.currentTime=this.animation.time),super.onControllerEnd(i)}animationSettings(i={}){return{apex:{maximumDistance:this.view.state.constraints.clampAltitude(1/0)/6,ascensionFactor:void 0,descensionFactor:void 0},...i,easing:\"string\"==typeof i.easing?c[i.easing]:i.easing}}};i([t({constructOnly:!0})],h.prototype,\"view\",void 0),i([t({constructOnly:!0})],h.prototype,\"mode\",void 0),h=i([e(\"esri.views.3d.state.controllers.PointToPointAnimationController\")],h);const p=new a,l=n();export{h as PointToPointAnimationController};\n"]},"metadata":{},"sourceType":"module"}