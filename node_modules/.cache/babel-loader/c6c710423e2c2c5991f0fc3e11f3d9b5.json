{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport r from \"../../../core/Handles.js\";\nimport { init as o } from \"../../../core/watchUtils.js\";\nimport { property as n } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/Logger.js\";\nimport { subclass as i } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { DoubleClickZoom as a } from \"./handlers/DoubleClickZoom.js\";\nimport { DragRotate as s } from \"./handlers/DragRotate.js\";\nimport { DragZoom as p } from \"./handlers/DragZoom.js\";\nimport { GamepadNavigation as m } from \"./handlers/GamepadNavigation.js\";\nimport { KeyboardNavigation as d } from \"./handlers/KeyboardNavigation.js\";\nimport { MouseWheelZoom as c } from \"./handlers/MouseWheelZoom.js\";\nimport { PinchAndPanNavigation as g } from \"./handlers/PinchAndPanNavigation.js\";\nimport { PointerDownCancelAnimation as l } from \"./handlers/PointerDownCancelAnimation.js\";\nimport { SingleKeyResetHeading as h } from \"./handlers/SingleKeyResetHeading.js\";\nimport { SingleKeyResetTilt as u } from \"./handlers/SingleKeyResetTilt.js\";\nimport { TwoFingerTilt as w } from \"./handlers/TwoFingerTilt.js\";\nimport { BrowserEventSource as _ } from \"../../input/BrowserEventSource.js\";\nimport { InputManager as y, ViewEventPriorities as f } from \"../../input/InputManager.js\";\nimport { PreventContextMenu as D } from \"../../input/handlers/PreventContextMenu.js\";\nimport { Drag as v } from \"../../input/recognizers/Drag.js\";\nimport { ImmediateDoubleClick as j } from \"../../input/recognizers/ImmediateDoubleClick.js\";\nimport { PointerClickHoldAndDrag as A } from \"../../input/recognizers/PointerClickHoldAndDrag.js\";\nimport { SingleAndDoubleClick as M } from \"../../input/recognizers/SingleAndDoubleClick.js\";\nimport { VerticalTwoFingerDrag as P } from \"../../input/recognizers/VerticalTwoFingerDrag.js\";\nlet z = class extends t {\n  constructor() {\n    super(...arguments), this._handles = new r();\n  }\n\n  destroy() {\n    this._handles && (this._handles.removeAll(), this._handles = null), this.disconnect();\n  }\n\n  get primaryDragAction() {\n    return this._get(\"primaryDragAction\");\n  }\n\n  set primaryDragAction(e) {\n    \"pan\" !== e && \"rotate\" !== e || e === this._get(\"primaryDragAction\") || (this._set(\"primaryDragAction\", e), this._updateMode());\n  }\n\n  get mode() {\n    return this._get(\"mode\");\n  }\n\n  set mode(e) {\n    \"default\" !== e && \"pro\" !== e || e === this._get(\"mode\") || (this._set(\"mode\", e), this._updateMode());\n  }\n\n  disconnect() {\n    this.view.viewEvents.disconnect(), this._inputManager && (this._inputManager.destroy(), this._inputManager = null), this._source && (this._source.destroy(), this._source = null);\n  }\n\n  connect() {\n    const e = this.view;\n    this._source = new _(this.view.surface, e.input);\n    const t = [new j(), new A(), new M(), new v(this.view.navigation), new P()],\n          r = new y({\n      eventSource: this._source,\n      recognizers: t\n    });\n    this._inputManager = r, r.installHandlers(\"prevent-context-menu\", [new D()], f.INTERNAL), this._modeDragPan = new g(e, \"primary\"), this._modeDragRotate = new s(e, \"secondary\", 0), this._modeDragZoom = new p(e, \"tertiary\");\n    const n = {\n      lookAround: \"b\",\n      pan: {\n        left: \"ArrowLeft\",\n        right: \"ArrowRight\",\n        forward: \"ArrowUp\",\n        backward: \"ArrowDown\",\n        up: \"u\",\n        down: \"j\",\n        headingLeft: \"a\",\n        headingRight: \"d\",\n        tiltUp: \"w\",\n        tiltDown: \"s\",\n        zoomIn: \"+\",\n        zoomOut: \"-\"\n      },\n      resetHeading: \"n\",\n      resetTilt: \"p\"\n    };\n    r.installHandlers(\"navigation\", [new l(e), new a(e), new m(e), new d(e, n.pan), new c(e), new u(e, n.resetTilt), new h(e, n.resetHeading), new s(e, \"primary\", 1, [n.lookAround]), new s(e, \"secondary\", 0, [n.lookAround]), new g(e, \"tertiary\", [n.lookAround]), this._modeDragRotate, this._modeDragZoom, this._modeDragPan, new w(e)], f.INTERNAL), this.view.viewEvents.connect(r), this._updateMode(), o(this.view.navigation, \"browserTouchPanEnabled\", e => {\n      this._source.browserTouchPanningEnabled = !e;\n    });\n  }\n\n  _updateMode() {\n    const e = this.mode,\n          t = this.primaryDragAction,\n          r = R.get(e).get(t);\n    this._modeDragPan && (this._modeDragPan.pointerAction = r.pan), this._modeDragRotate && (this._modeDragRotate.pointerAction = r.rotate), this._modeDragZoom && (this._modeDragZoom.pointerAction = r.zoom);\n  }\n\n  get test() {\n    return {\n      inputManager: this._inputManager,\n      modeDragPan: this._modeDragPan,\n      modeDragRotate: this._modeDragRotate,\n      modeDragZoom: this._modeDragZoom\n    };\n  }\n\n};\ne([n()], z.prototype, \"view\", void 0), e([n({\n  value: \"pan\"\n})], z.prototype, \"primaryDragAction\", null), e([n({\n  value: \"default\"\n})], z.prototype, \"mode\", null), e([n({\n  readOnly: !0,\n  aliasOf: \"_inputManager.hasPendingInputs\"\n})], z.prototype, \"hasPendingInputs\", void 0), e([n({\n  readOnly: !0,\n  aliasOf: \"_inputManager.latestPointerType\"\n})], z.prototype, \"latestPointerType\", void 0), e([n()], z.prototype, \"_inputManager\", void 0), z = e([i(\"esri.views.3d.input.SceneInputManager\")], z);\nconst R = new Map(),\n      T = new Map(),\n      b = new Map();\nT.set(\"pan\", {\n  pan: \"primary\",\n  rotate: \"secondary\",\n  zoom: \"tertiary\"\n}), T.set(\"rotate\", {\n  pan: \"secondary\",\n  rotate: \"primary\",\n  zoom: \"tertiary\"\n}), b.set(\"pan\", {\n  pan: \"primary\",\n  rotate: \"tertiary\",\n  zoom: \"secondary\"\n}), b.set(\"rotate\", {\n  pan: \"tertiary\",\n  rotate: \"primary\",\n  zoom: \"secondary\"\n}), R.set(\"default\", T), R.set(\"pro\", b);\nvar k = z;\nexport default k;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/input/SceneInputManager.js"],"names":["_","e","t","r","init","o","property","n","subclass","i","DoubleClickZoom","a","DragRotate","s","DragZoom","p","GamepadNavigation","m","KeyboardNavigation","d","MouseWheelZoom","c","PinchAndPanNavigation","g","PointerDownCancelAnimation","l","SingleKeyResetHeading","h","SingleKeyResetTilt","u","TwoFingerTilt","w","BrowserEventSource","InputManager","y","ViewEventPriorities","f","PreventContextMenu","D","Drag","v","ImmediateDoubleClick","j","PointerClickHoldAndDrag","A","SingleAndDoubleClick","M","VerticalTwoFingerDrag","P","z","constructor","arguments","_handles","destroy","removeAll","disconnect","primaryDragAction","_get","_set","_updateMode","mode","view","viewEvents","_inputManager","_source","connect","surface","input","navigation","eventSource","recognizers","installHandlers","INTERNAL","_modeDragPan","_modeDragRotate","_modeDragZoom","lookAround","pan","left","right","forward","backward","up","down","headingLeft","headingRight","tiltUp","tiltDown","zoomIn","zoomOut","resetHeading","resetTilt","browserTouchPanningEnabled","R","get","pointerAction","rotate","zoom","test","inputManager","modeDragPan","modeDragRotate","modeDragZoom","prototype","value","readOnly","aliasOf","Map","T","b","set","k"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import r from\"../../../core/Handles.js\";import{init as o}from\"../../../core/watchUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{DoubleClickZoom as a}from\"./handlers/DoubleClickZoom.js\";import{DragRotate as s}from\"./handlers/DragRotate.js\";import{DragZoom as p}from\"./handlers/DragZoom.js\";import{GamepadNavigation as m}from\"./handlers/GamepadNavigation.js\";import{KeyboardNavigation as d}from\"./handlers/KeyboardNavigation.js\";import{MouseWheelZoom as c}from\"./handlers/MouseWheelZoom.js\";import{PinchAndPanNavigation as g}from\"./handlers/PinchAndPanNavigation.js\";import{PointerDownCancelAnimation as l}from\"./handlers/PointerDownCancelAnimation.js\";import{SingleKeyResetHeading as h}from\"./handlers/SingleKeyResetHeading.js\";import{SingleKeyResetTilt as u}from\"./handlers/SingleKeyResetTilt.js\";import{TwoFingerTilt as w}from\"./handlers/TwoFingerTilt.js\";import{BrowserEventSource as _}from\"../../input/BrowserEventSource.js\";import{InputManager as y,ViewEventPriorities as f}from\"../../input/InputManager.js\";import{PreventContextMenu as D}from\"../../input/handlers/PreventContextMenu.js\";import{Drag as v}from\"../../input/recognizers/Drag.js\";import{ImmediateDoubleClick as j}from\"../../input/recognizers/ImmediateDoubleClick.js\";import{PointerClickHoldAndDrag as A}from\"../../input/recognizers/PointerClickHoldAndDrag.js\";import{SingleAndDoubleClick as M}from\"../../input/recognizers/SingleAndDoubleClick.js\";import{VerticalTwoFingerDrag as P}from\"../../input/recognizers/VerticalTwoFingerDrag.js\";let z=class extends t{constructor(){super(...arguments),this._handles=new r}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this.disconnect()}get primaryDragAction(){return this._get(\"primaryDragAction\")}set primaryDragAction(e){\"pan\"!==e&&\"rotate\"!==e||e===this._get(\"primaryDragAction\")||(this._set(\"primaryDragAction\",e),this._updateMode())}get mode(){return this._get(\"mode\")}set mode(e){\"default\"!==e&&\"pro\"!==e||e===this._get(\"mode\")||(this._set(\"mode\",e),this._updateMode())}disconnect(){this.view.viewEvents.disconnect(),this._inputManager&&(this._inputManager.destroy(),this._inputManager=null),this._source&&(this._source.destroy(),this._source=null)}connect(){const e=this.view;this._source=new _(this.view.surface,e.input);const t=[new j,new A,new M,new v(this.view.navigation),new P],r=new y({eventSource:this._source,recognizers:t});this._inputManager=r,r.installHandlers(\"prevent-context-menu\",[new D],f.INTERNAL),this._modeDragPan=new g(e,\"primary\"),this._modeDragRotate=new s(e,\"secondary\",0),this._modeDragZoom=new p(e,\"tertiary\");const n={lookAround:\"b\",pan:{left:\"ArrowLeft\",right:\"ArrowRight\",forward:\"ArrowUp\",backward:\"ArrowDown\",up:\"u\",down:\"j\",headingLeft:\"a\",headingRight:\"d\",tiltUp:\"w\",tiltDown:\"s\",zoomIn:\"+\",zoomOut:\"-\"},resetHeading:\"n\",resetTilt:\"p\"};r.installHandlers(\"navigation\",[new l(e),new a(e),new m(e),new d(e,n.pan),new c(e),new u(e,n.resetTilt),new h(e,n.resetHeading),new s(e,\"primary\",1,[n.lookAround]),new s(e,\"secondary\",0,[n.lookAround]),new g(e,\"tertiary\",[n.lookAround]),this._modeDragRotate,this._modeDragZoom,this._modeDragPan,new w(e)],f.INTERNAL),this.view.viewEvents.connect(r),this._updateMode(),o(this.view.navigation,\"browserTouchPanEnabled\",(e=>{this._source.browserTouchPanningEnabled=!e}))}_updateMode(){const e=this.mode,t=this.primaryDragAction,r=R.get(e).get(t);this._modeDragPan&&(this._modeDragPan.pointerAction=r.pan),this._modeDragRotate&&(this._modeDragRotate.pointerAction=r.rotate),this._modeDragZoom&&(this._modeDragZoom.pointerAction=r.zoom)}get test(){return{inputManager:this._inputManager,modeDragPan:this._modeDragPan,modeDragRotate:this._modeDragRotate,modeDragZoom:this._modeDragZoom}}};e([n()],z.prototype,\"view\",void 0),e([n({value:\"pan\"})],z.prototype,\"primaryDragAction\",null),e([n({value:\"default\"})],z.prototype,\"mode\",null),e([n({readOnly:!0,aliasOf:\"_inputManager.hasPendingInputs\"})],z.prototype,\"hasPendingInputs\",void 0),e([n({readOnly:!0,aliasOf:\"_inputManager.latestPointerType\"})],z.prototype,\"latestPointerType\",void 0),e([n()],z.prototype,\"_inputManager\",void 0),z=e([i(\"esri.views.3d.input.SceneInputManager\")],z);const R=new Map,T=new Map,b=new Map;T.set(\"pan\",{pan:\"primary\",rotate:\"secondary\",zoom:\"tertiary\"}),T.set(\"rotate\",{pan:\"secondary\",rotate:\"primary\",zoom:\"tertiary\"}),b.set(\"pan\",{pan:\"primary\",rotate:\"tertiary\",zoom:\"secondary\"}),b.set(\"rotate\",{pan:\"tertiary\",rotate:\"primary\",zoom:\"secondary\"}),R.set(\"default\",T),R.set(\"pro\",b);var k=z;export default k;\n"]},"metadata":{},"sourceType":"module"}