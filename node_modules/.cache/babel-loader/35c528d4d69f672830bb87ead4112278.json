{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../../../../geometry.js\";\nimport { isNaN as t } from \"../../../../../core/mathUtils.js\";\nimport { isNone as e, isSome as r } from \"../../../../../core/maybe.js\";\nimport { s as o, f as s, c as i, n } from \"../../../../../chunks/vec3.js\";\nimport { c as a } from \"../../../../../chunks/vec3f64.js\";\nimport m from \"../../../../Point.js\";\n\nfunction x(t) {\n  if (t.components) {\n    for (const e of t.components) \"smooth\" === e.shading && e.faces && u(t, e);\n\n    t.vertexAttributesChanged();\n  }\n}\n\nfunction u(r, a) {\n  e(r.vertexAttributes.normal) && (r.vertexAttributes.normal = new Float32Array(r.vertexAttributes.position.length));\n  const m = a.faces.length / 3;\n\n  for (let e = 0; e < m; ++e) {\n    const n = a.faces[3 * e + 0],\n          m = a.faces[3 * e + 1],\n          x = a.faces[3 * e + 2],\n          u = o(b, r.vertexAttributes.position[3 * n + 0], r.vertexAttributes.position[3 * n + 1], r.vertexAttributes.position[3 * n + 2]),\n          v = o(A, r.vertexAttributes.position[3 * m + 0], r.vertexAttributes.position[3 * m + 1], r.vertexAttributes.position[3 * m + 2]),\n          c = o(l, r.vertexAttributes.position[3 * x + 0], r.vertexAttributes.position[3 * x + 1], r.vertexAttributes.position[3 * x + 2]),\n          f = s(v, v, u),\n          p = s(c, c, u),\n          h = i(f, f, p);\n    t(r.vertexAttributes.normal[3 * n + 0]) && (r.vertexAttributes.normal[3 * n + 0] = 0), t(r.vertexAttributes.normal[3 * n + 1]) && (r.vertexAttributes.normal[3 * n + 1] = 0), t(r.vertexAttributes.normal[3 * n + 2]) && (r.vertexAttributes.normal[3 * n + 2] = 0), t(r.vertexAttributes.normal[3 * m + 0]) && (r.vertexAttributes.normal[3 * m + 0] = 0), t(r.vertexAttributes.normal[3 * m + 1]) && (r.vertexAttributes.normal[3 * m + 1] = 0), t(r.vertexAttributes.normal[3 * m + 2]) && (r.vertexAttributes.normal[3 * m + 2] = 0), t(r.vertexAttributes.normal[3 * x + 0]) && (r.vertexAttributes.normal[3 * x + 0] = 0), t(r.vertexAttributes.normal[3 * x + 1]) && (r.vertexAttributes.normal[3 * x + 1] = 0), t(r.vertexAttributes.normal[3 * x + 2]) && (r.vertexAttributes.normal[3 * x + 2] = 0), r.vertexAttributes.normal[3 * n + 0] += h[0], r.vertexAttributes.normal[3 * n + 1] += h[1], r.vertexAttributes.normal[3 * n + 2] += h[2], r.vertexAttributes.normal[3 * m + 0] += h[0], r.vertexAttributes.normal[3 * m + 1] += h[1], r.vertexAttributes.normal[3 * m + 2] += h[2], r.vertexAttributes.normal[3 * x + 0] += h[0], r.vertexAttributes.normal[3 * x + 1] += h[1], r.vertexAttributes.normal[3 * x + 2] += h[2];\n  }\n\n  for (let t = 0; t < r.vertexAttributes.normal.length; t += 3) o(c, r.vertexAttributes.normal[t], r.vertexAttributes.normal[t + 1], r.vertexAttributes.normal[t + 2]), n(c, c), r.vertexAttributes.normal[t + 0] = c[0], r.vertexAttributes.normal[t + 1] = c[1], r.vertexAttributes.normal[t + 2] = c[2];\n}\n\nfunction v(t) {\n  if (r(t.transform)) return t.transform.getOriginPoint(t.spatialReference);\n  const e = t.extent.xmax - t.extent.width / 2,\n        o = t.extent.ymax - t.extent.height / 2,\n        s = t.extent.zmin;\n  return new m({\n    x: e,\n    y: o,\n    z: s,\n    spatialReference: t.extent.spatialReference\n  });\n}\n\nconst b = a(),\n      A = a(),\n      l = a(),\n      c = a();\nexport { v as computeOrigin, x as smoothNormalsMesh };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/geometry.js"],"names":["isNaN","t","isNone","e","isSome","r","s","o","f","c","i","n","a","m","x","components","shading","faces","u","vertexAttributesChanged","vertexAttributes","normal","Float32Array","position","length","b","v","A","l","p","h","transform","getOriginPoint","spatialReference","extent","xmax","width","ymax","height","zmin","y","z","computeOrigin","smoothNormalsMesh"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../../../geometry.js\";import{isNaN as t}from\"../../../../../core/mathUtils.js\";import{isNone as e,isSome as r}from\"../../../../../core/maybe.js\";import{s as o,f as s,c as i,n}from\"../../../../../chunks/vec3.js\";import{c as a}from\"../../../../../chunks/vec3f64.js\";import m from\"../../../../Point.js\";function x(t){if(t.components){for(const e of t.components)\"smooth\"===e.shading&&e.faces&&u(t,e);t.vertexAttributesChanged()}}function u(r,a){e(r.vertexAttributes.normal)&&(r.vertexAttributes.normal=new Float32Array(r.vertexAttributes.position.length));const m=a.faces.length/3;for(let e=0;e<m;++e){const n=a.faces[3*e+0],m=a.faces[3*e+1],x=a.faces[3*e+2],u=o(b,r.vertexAttributes.position[3*n+0],r.vertexAttributes.position[3*n+1],r.vertexAttributes.position[3*n+2]),v=o(A,r.vertexAttributes.position[3*m+0],r.vertexAttributes.position[3*m+1],r.vertexAttributes.position[3*m+2]),c=o(l,r.vertexAttributes.position[3*x+0],r.vertexAttributes.position[3*x+1],r.vertexAttributes.position[3*x+2]),f=s(v,v,u),p=s(c,c,u),h=i(f,f,p);t(r.vertexAttributes.normal[3*n+0])&&(r.vertexAttributes.normal[3*n+0]=0),t(r.vertexAttributes.normal[3*n+1])&&(r.vertexAttributes.normal[3*n+1]=0),t(r.vertexAttributes.normal[3*n+2])&&(r.vertexAttributes.normal[3*n+2]=0),t(r.vertexAttributes.normal[3*m+0])&&(r.vertexAttributes.normal[3*m+0]=0),t(r.vertexAttributes.normal[3*m+1])&&(r.vertexAttributes.normal[3*m+1]=0),t(r.vertexAttributes.normal[3*m+2])&&(r.vertexAttributes.normal[3*m+2]=0),t(r.vertexAttributes.normal[3*x+0])&&(r.vertexAttributes.normal[3*x+0]=0),t(r.vertexAttributes.normal[3*x+1])&&(r.vertexAttributes.normal[3*x+1]=0),t(r.vertexAttributes.normal[3*x+2])&&(r.vertexAttributes.normal[3*x+2]=0),r.vertexAttributes.normal[3*n+0]+=h[0],r.vertexAttributes.normal[3*n+1]+=h[1],r.vertexAttributes.normal[3*n+2]+=h[2],r.vertexAttributes.normal[3*m+0]+=h[0],r.vertexAttributes.normal[3*m+1]+=h[1],r.vertexAttributes.normal[3*m+2]+=h[2],r.vertexAttributes.normal[3*x+0]+=h[0],r.vertexAttributes.normal[3*x+1]+=h[1],r.vertexAttributes.normal[3*x+2]+=h[2]}for(let t=0;t<r.vertexAttributes.normal.length;t+=3)o(c,r.vertexAttributes.normal[t],r.vertexAttributes.normal[t+1],r.vertexAttributes.normal[t+2]),n(c,c),r.vertexAttributes.normal[t+0]=c[0],r.vertexAttributes.normal[t+1]=c[1],r.vertexAttributes.normal[t+2]=c[2]}function v(t){if(r(t.transform))return t.transform.getOriginPoint(t.spatialReference);const e=t.extent.xmax-t.extent.width/2,o=t.extent.ymax-t.extent.height/2,s=t.extent.zmin;return new m({x:e,y:o,z:s,spatialReference:t.extent.spatialReference})}const b=a(),A=a(),l=a(),c=a();export{v as computeOrigin,x as smoothNormalsMesh};\n"]},"metadata":{},"sourceType":"module"}