{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { WGLGeometryType as e } from \"../enums.js\";\nimport { createProgramDescriptor as t } from \"../Utils.js\";\nimport o from \"./WGLGeometryBrush.js\";\nimport { MarkerMaterialKey as a } from \"../materialKey/MaterialKey.js\";\n\nconst i = e => t(e.data, {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: 5122\n  }, {\n    location: 1,\n    name: \"a_vertexOffset\",\n    count: 2,\n    type: 5122\n  }, {\n    location: 2,\n    name: \"a_texCoords\",\n    count: 2,\n    type: 5123\n  }, {\n    location: 3,\n    name: \"a_bitSetAndDistRatio\",\n    count: 2,\n    type: 5123\n  }, {\n    location: 4,\n    name: \"a_id\",\n    count: 4,\n    type: 5121\n  }, {\n    location: 5,\n    name: \"a_color\",\n    count: 4,\n    type: 5121,\n    normalized: !0\n  }, {\n    location: 6,\n    name: \"a_outlineColor\",\n    count: 4,\n    type: 5121,\n    normalized: !0\n  }, {\n    location: 7,\n    name: \"a_sizeAndOutlineWidth\",\n    count: 4,\n    type: 5121\n  }, {\n    location: 8,\n    name: \"a_zoomRange\",\n    count: 2,\n    type: 5123\n  }]\n});\n\nclass n extends o {\n  dispose() {}\n\n  getGeometryType() {\n    return e.MARKER;\n  }\n\n  drawGeometry(e, t, o, n) {\n    const {\n      context: r,\n      painter: s,\n      rendererInfo: v,\n      state: l\n    } = e,\n          u = a.load(o.materialKey),\n          {\n      bufferLayouts: m,\n      attributes: p\n    } = i(u),\n          c = s.materialManager.getMaterialProgram(e, u, \"materials/icon\", p, n);\n    r.useProgram(c), u.textureBinding && s.textureManager.bindTextures(r, c, u, !0), this._setSharedUniforms(c, e, t);\n    const f = u.vvRotation ? l.displayViewMat3 : l.displayMat3;\n\n    if (c.setUniformMatrix3fv(\"u_displayMat3\", f), u.vvSizeMinMaxValue && c.setUniform4fv(\"u_vvSizeMinMaxValue\", v.vvSizeMinMaxValue), u.vvSizeScaleStops && c.setUniform1f(\"u_vvSizeScaleStopsValue\", v.vvSizeScaleStopsValue), u.vvSizeFieldStops) {\n      const e = v.getSizeVVFieldStops(t.key.level);\n      c.setUniform1fv(\"u_vvSizeFieldStopsValues\", e.values), c.setUniform1fv(\"u_vvSizeFieldStopsSizes\", e.sizes);\n    }\n\n    u.vvSizeUnitValue && c.setUniform1f(\"u_vvSizeUnitValueWorldToPixelsRatio\", v.vvSizeUnitValueToPixelsRatio), u.vvColor && (c.setUniform1fv(\"u_vvColorValues\", v.vvColorValues), c.setUniform4fv(\"u_vvColors\", v.vvColors)), u.vvOpacity && (c.setUniform1fv(\"u_vvOpacityValues\", v.vvOpacityValues), c.setUniform1fv(\"u_vvOpacities\", v.vvOpacities)), u.vvRotation && c.setUniform1f(\"u_vvRotationType\", \"geographic\" === v.vvMaterialParameters.vvRotationType ? 0 : 1), o.draw(r, m, p);\n  }\n\n}\n\nexport default n;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker.js"],"names":["WGLGeometryType","e","createProgramDescriptor","t","o","MarkerMaterialKey","a","i","data","geometry","location","name","count","type","normalized","n","dispose","getGeometryType","MARKER","drawGeometry","context","r","painter","s","rendererInfo","v","state","l","u","load","materialKey","bufferLayouts","m","attributes","p","c","materialManager","getMaterialProgram","useProgram","textureBinding","textureManager","bindTextures","_setSharedUniforms","f","vvRotation","displayViewMat3","displayMat3","setUniformMatrix3fv","vvSizeMinMaxValue","setUniform4fv","vvSizeScaleStops","setUniform1f","vvSizeScaleStopsValue","vvSizeFieldStops","getSizeVVFieldStops","key","level","setUniform1fv","values","sizes","vvSizeUnitValue","vvSizeUnitValueToPixelsRatio","vvColor","vvColorValues","vvColors","vvOpacity","vvOpacityValues","vvOpacities","vvMaterialParameters","vvRotationType","draw"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{WGLGeometryType as e}from\"../enums.js\";import{createProgramDescriptor as t}from\"../Utils.js\";import o from\"./WGLGeometryBrush.js\";import{MarkerMaterialKey as a}from\"../materialKey/MaterialKey.js\";const i=e=>t(e.data,{geometry:[{location:0,name:\"a_pos\",count:2,type:5122},{location:1,name:\"a_vertexOffset\",count:2,type:5122},{location:2,name:\"a_texCoords\",count:2,type:5123},{location:3,name:\"a_bitSetAndDistRatio\",count:2,type:5123},{location:4,name:\"a_id\",count:4,type:5121},{location:5,name:\"a_color\",count:4,type:5121,normalized:!0},{location:6,name:\"a_outlineColor\",count:4,type:5121,normalized:!0},{location:7,name:\"a_sizeAndOutlineWidth\",count:4,type:5121},{location:8,name:\"a_zoomRange\",count:2,type:5123}]});class n extends o{dispose(){}getGeometryType(){return e.MARKER}drawGeometry(e,t,o,n){const{context:r,painter:s,rendererInfo:v,state:l}=e,u=a.load(o.materialKey),{bufferLayouts:m,attributes:p}=i(u),c=s.materialManager.getMaterialProgram(e,u,\"materials/icon\",p,n);r.useProgram(c),u.textureBinding&&s.textureManager.bindTextures(r,c,u,!0),this._setSharedUniforms(c,e,t);const f=u.vvRotation?l.displayViewMat3:l.displayMat3;if(c.setUniformMatrix3fv(\"u_displayMat3\",f),u.vvSizeMinMaxValue&&c.setUniform4fv(\"u_vvSizeMinMaxValue\",v.vvSizeMinMaxValue),u.vvSizeScaleStops&&c.setUniform1f(\"u_vvSizeScaleStopsValue\",v.vvSizeScaleStopsValue),u.vvSizeFieldStops){const e=v.getSizeVVFieldStops(t.key.level);c.setUniform1fv(\"u_vvSizeFieldStopsValues\",e.values),c.setUniform1fv(\"u_vvSizeFieldStopsSizes\",e.sizes)}u.vvSizeUnitValue&&c.setUniform1f(\"u_vvSizeUnitValueWorldToPixelsRatio\",v.vvSizeUnitValueToPixelsRatio),u.vvColor&&(c.setUniform1fv(\"u_vvColorValues\",v.vvColorValues),c.setUniform4fv(\"u_vvColors\",v.vvColors)),u.vvOpacity&&(c.setUniform1fv(\"u_vvOpacityValues\",v.vvOpacityValues),c.setUniform1fv(\"u_vvOpacities\",v.vvOpacities)),u.vvRotation&&c.setUniform1f(\"u_vvRotationType\",\"geographic\"===v.vvMaterialParameters.vvRotationType?0:1),o.draw(r,m,p)}}export default n;\n"]},"metadata":{},"sourceType":"module"}