{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../core/maybe.js\";\nimport { c as o } from \"../../../../chunks/mat4f64.js\";\nimport { s as e } from \"../../../../chunks/vec2.js\";\nimport { a as r } from \"../../../../chunks/vec2f64.js\";\nimport { s, d as n, f as c, a, b as f, g as m, F as u, n as i, c as I } from \"../../../../chunks/vec3.js\";\nimport { c as p } from \"../../../../chunks/vec3f64.js\";\nimport { lonLatToWebMercatorComparable as N } from \"../../../../geometry/projection.js\";\nimport { getReferenceEllipsoid as h } from \"../../../../geometry/projectionEllipsoid.js\";\nimport { fromManyPointsSampleAt as l, create as V, normal as T } from \"../../../../geometry/support/plane.js\";\nimport { BufferViewVec3f64 as b } from \"../../../../geometry/support/buffer/BufferView.js\";\n\nfunction g(t, o, r, s = 1) {\n  if (r.isGeographic) {\n    const t = new Float64Array(o.typedBuffer.length),\n          e = 3 * o.count;\n\n    for (let s = 0; s < e; s += 3) N(o.typedBuffer, s, t, s, h(r));\n\n    o = b.fromTypedArray(t);\n  }\n\n  e(d, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n\n  for (let e = 0; e < o.count; e++) o.getVec(e, y), d[0] = Math.min(d[0], y[0]), d[1] = Math.min(d[1], y[1]);\n\n  const n = d[0] % s,\n        c = d[1] % s;\n  A[0] = d[0] - n, A[1] = d[1] - c;\n\n  for (let e = 0; e < o.count; e++) o.getVec(e, y), t.setValues(e, (y[0] - A[0]) / s, (y[1] - A[1]) / s, A[0] / s, A[1] / s);\n}\n\nfunction j(t, o, r, m, u = 1) {\n  s(F, 1, 0, 0), s(Y, 0, 1, 0), s(_, 0, 0, 1), z(M, o), O(o, E) && S(E, F, Y, _, r, M), e(d, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY), e(k, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\n\n  for (let e = 0; e < o.count; e++) {\n    o.getVec(e, y);\n    const t = n(F, y),\n          r = n(Y, y);\n    d[0] = Math.min(d[0], t), d[1] = Math.min(d[1], r), k[0] = Math.max(k[0], t), k[1] = Math.max(k[1], r);\n  }\n\n  const i = n(_, M);\n  D(P, d[0], d[1], i, F, Y, _), D(v, k[0], d[1], i, F, Y, _), D(x, d[0], k[1], i, F, Y, _), c(v, v, P), a(v, v, .5), c(x, x, P), a(x, x, .5), f(P, P, v), f(P, P, x);\n  const I = d[0] % u,\n        p = d[1] % u;\n  A[0] = d[0] - I, A[1] = d[1] - p;\n\n  for (let e = 0; e < o.count; e++) {\n    o.getVec(e, y), t.setValues(e, (n(F, y) - A[0]) / u, (n(Y, y) - A[1]) / u, A[0] / u, A[1] / u);\n\n    for (let t = 0; t < 3; t++) m.set(e, t, P[t]), m.set(e, t + 3, v[t]), m.set(e, t + 6, x[t]);\n  }\n}\n\nconst M = p(),\n      y = p(),\n      E = V(),\n      F = p(),\n      Y = p(),\n      _ = p(),\n      d = r(),\n      k = r(),\n      A = r(),\n      P = p(),\n      v = p(),\n      x = p();\n\nfunction O(t, o) {\n  const e = t.count - 1;\n  return l(t, o, 0, Math.floor(e / 3), Math.floor(e * (2 / 3)));\n}\n\nfunction S(o, e, r, c, f, p) {\n  t(f) ? (f.basisMatrixAtPosition(p, B), s(G, B[0], B[1], B[2]), s(w, B[4], B[5], B[6]), s(q, B[8], B[9], B[10])) : (s(G, 1, 0, 0), s(w, 0, 1, 0), s(q, 0, 0, 1));\n  const N = T(o);\n  n(N, q) < 0 && a(N, N, -1), m(c, N);\n  const h = n(N, w),\n        l = n(N, G);\n  Math.abs(h) < Math.abs(l) ? (u(e, G, N, -l), i(e, e), I(r, e, N), i(r, r), a(r, r, -1)) : (u(r, w, N, -h), i(r, r), I(e, r, N), i(e, e));\n}\n\nconst B = o(),\n      G = p(),\n      w = p(),\n      q = p();\n\nfunction z(t, o) {\n  s(C, 0, 0, 0);\n\n  for (let e = 0; e < o.count - 1; e++) o.getVec(e, y), f(C, C, y);\n\n  a(t, C, 1 / (o.count - 1));\n}\n\nconst C = p();\n\nfunction D(t, o, e, r, n, c, a) {\n  s(t, o * n[0] + e * c[0] + r * a[0], o * n[1] + e * c[1] + r * a[1], o * n[2] + e * c[2] + r * a[2]);\n}\n\nexport { j as createMapSpaceUVCoords, g as createMapSpaceUVCoordsDraped };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/layers/support/uvUtils.js"],"names":["isSome","t","c","o","s","e","a","r","d","n","f","b","g","m","F","u","i","I","p","lonLatToWebMercatorComparable","N","getReferenceEllipsoid","h","fromManyPointsSampleAt","l","create","V","normal","T","BufferViewVec3f64","isGeographic","Float64Array","typedBuffer","length","count","fromTypedArray","Number","POSITIVE_INFINITY","getVec","y","Math","min","A","setValues","j","Y","_","z","M","O","E","S","k","NEGATIVE_INFINITY","max","D","P","v","x","set","floor","basisMatrixAtPosition","B","G","w","q","abs","C","createMapSpaceUVCoords","createMapSpaceUVCoordsDraped"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{c as o}from\"../../../../chunks/mat4f64.js\";import{s as e}from\"../../../../chunks/vec2.js\";import{a as r}from\"../../../../chunks/vec2f64.js\";import{s,d as n,f as c,a,b as f,g as m,F as u,n as i,c as I}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{lonLatToWebMercatorComparable as N}from\"../../../../geometry/projection.js\";import{getReferenceEllipsoid as h}from\"../../../../geometry/projectionEllipsoid.js\";import{fromManyPointsSampleAt as l,create as V,normal as T}from\"../../../../geometry/support/plane.js\";import{BufferViewVec3f64 as b}from\"../../../../geometry/support/buffer/BufferView.js\";function g(t,o,r,s=1){if(r.isGeographic){const t=new Float64Array(o.typedBuffer.length),e=3*o.count;for(let s=0;s<e;s+=3)N(o.typedBuffer,s,t,s,h(r));o=b.fromTypedArray(t)}e(d,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);for(let e=0;e<o.count;e++)o.getVec(e,y),d[0]=Math.min(d[0],y[0]),d[1]=Math.min(d[1],y[1]);const n=d[0]%s,c=d[1]%s;A[0]=d[0]-n,A[1]=d[1]-c;for(let e=0;e<o.count;e++)o.getVec(e,y),t.setValues(e,(y[0]-A[0])/s,(y[1]-A[1])/s,A[0]/s,A[1]/s)}function j(t,o,r,m,u=1){s(F,1,0,0),s(Y,0,1,0),s(_,0,0,1),z(M,o),O(o,E)&&S(E,F,Y,_,r,M),e(d,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),e(k,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(let e=0;e<o.count;e++){o.getVec(e,y);const t=n(F,y),r=n(Y,y);d[0]=Math.min(d[0],t),d[1]=Math.min(d[1],r),k[0]=Math.max(k[0],t),k[1]=Math.max(k[1],r)}const i=n(_,M);D(P,d[0],d[1],i,F,Y,_),D(v,k[0],d[1],i,F,Y,_),D(x,d[0],k[1],i,F,Y,_),c(v,v,P),a(v,v,.5),c(x,x,P),a(x,x,.5),f(P,P,v),f(P,P,x);const I=d[0]%u,p=d[1]%u;A[0]=d[0]-I,A[1]=d[1]-p;for(let e=0;e<o.count;e++){o.getVec(e,y),t.setValues(e,(n(F,y)-A[0])/u,(n(Y,y)-A[1])/u,A[0]/u,A[1]/u);for(let t=0;t<3;t++)m.set(e,t,P[t]),m.set(e,t+3,v[t]),m.set(e,t+6,x[t])}}const M=p(),y=p(),E=V(),F=p(),Y=p(),_=p(),d=r(),k=r(),A=r(),P=p(),v=p(),x=p();function O(t,o){const e=t.count-1;return l(t,o,0,Math.floor(e/3),Math.floor(e*(2/3)))}function S(o,e,r,c,f,p){t(f)?(f.basisMatrixAtPosition(p,B),s(G,B[0],B[1],B[2]),s(w,B[4],B[5],B[6]),s(q,B[8],B[9],B[10])):(s(G,1,0,0),s(w,0,1,0),s(q,0,0,1));const N=T(o);n(N,q)<0&&a(N,N,-1),m(c,N);const h=n(N,w),l=n(N,G);Math.abs(h)<Math.abs(l)?(u(e,G,N,-l),i(e,e),I(r,e,N),i(r,r),a(r,r,-1)):(u(r,w,N,-h),i(r,r),I(e,r,N),i(e,e))}const B=o(),G=p(),w=p(),q=p();function z(t,o){s(C,0,0,0);for(let e=0;e<o.count-1;e++)o.getVec(e,y),f(C,C,y);a(t,C,1/(o.count-1))}const C=p();function D(t,o,e,r,n,c,a){s(t,o*n[0]+e*c[0]+r*a[0],o*n[1]+e*c[1]+r*a[1],o*n[2]+e*c[2]+r*a[2])}export{j as createMapSpaceUVCoords,g as createMapSpaceUVCoordsDraped};\n"]},"metadata":{},"sourceType":"module"}