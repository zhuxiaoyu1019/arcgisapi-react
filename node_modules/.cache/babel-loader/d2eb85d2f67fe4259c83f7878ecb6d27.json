{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { symbolTypesLabel as r, symbolTypesLabel3D as t } from \"../../symbols.js\";\nimport { JSONMap as o } from \"../../core/jsonMap.js\";\nimport { JSONSupport as n } from \"../../core/JSONSupport.js\";\nimport { clone as s } from \"../../core/lang.js\";\nimport { property as l } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/has.js\";\nimport \"../../core/Logger.js\";\nimport { reader as i } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as c } from \"../../core/accessorSupport/decorators/writer.js\";\nimport p from \"./LabelExpressionInfo.js\";\nimport { templateStringToSql as b, getSingleFieldArcadeExpression as u, getLabelExpression as m, getLabelExpressionArcade as f, getLabelExpressionSingleField as v } from \"./labelUtils.js\";\nimport { defaultTextSymbol2D as S } from \"../../symbols/support/defaults.js\";\nimport { write as h } from \"../../symbols/support/jsonUtils.js\";\nvar d;\nconst y = new o({\n  esriServerPointLabelPlacementAboveCenter: \"above-center\",\n  esriServerPointLabelPlacementAboveLeft: \"above-left\",\n  esriServerPointLabelPlacementAboveRight: \"above-right\",\n  esriServerPointLabelPlacementBelowCenter: \"below-center\",\n  esriServerPointLabelPlacementBelowLeft: \"below-left\",\n  esriServerPointLabelPlacementBelowRight: \"below-right\",\n  esriServerPointLabelPlacementCenterCenter: \"center-center\",\n  esriServerPointLabelPlacementCenterLeft: \"center-left\",\n  esriServerPointLabelPlacementCenterRight: \"center-right\",\n  esriServerLinePlacementAboveAfter: \"above-after\",\n  esriServerLinePlacementAboveAlong: \"above-along\",\n  esriServerLinePlacementAboveBefore: \"above-before\",\n  esriServerLinePlacementAboveStart: \"above-start\",\n  esriServerLinePlacementAboveEnd: \"above-end\",\n  esriServerLinePlacementBelowAfter: \"below-after\",\n  esriServerLinePlacementBelowAlong: \"below-along\",\n  esriServerLinePlacementBelowBefore: \"below-before\",\n  esriServerLinePlacementBelowStart: \"below-start\",\n  esriServerLinePlacementBelowEnd: \"below-end\",\n  esriServerLinePlacementCenterAfter: \"center-after\",\n  esriServerLinePlacementCenterAlong: \"center-along\",\n  esriServerLinePlacementCenterBefore: \"center-before\",\n  esriServerLinePlacementCenterStart: \"center-start\",\n  esriServerLinePlacementCenterEnd: \"center-end\",\n  esriServerPolygonPlacementAlwaysHorizontal: \"always-horizontal\"\n}, {\n  ignoreUnknown: !0\n});\n\nfunction w(e) {\n  return !e || \"service\" !== e.origin && !x(e.layer);\n}\n\nfunction x(e) {\n  return \"map-image\" === (null == e ? void 0 : e.type);\n}\n\nfunction L(e) {\n  var r, t;\n  return !!x(e) && !(null == (r = e.capabilities) || null == (t = r.exportMap) || !t.supportsArcadeExpressionForLabeling);\n}\n\nfunction P(e) {\n  return w(e) || L(e.layer);\n}\n\nlet g = d = class extends n {\n  constructor(e) {\n    super(e), this.type = \"label\", this.name = null, this.deconflictionStrategy = \"static\", this.labelExpression = null, this.labelExpressionInfo = null, this.labelPlacement = null, this.maxScale = 0, this.minScale = 0, this.symbol = S, this.useCodedValues = void 0, this.where = null;\n  }\n\n  static evaluateWhere(e, r) {\n    const t = function (e, r, t) {\n      switch (r) {\n        case \"=\":\n          return e == t;\n\n        case \"<>\":\n          return e != t;\n\n        case \">\":\n          return e > t;\n\n        case \">=\":\n          return e >= t;\n\n        case \"<\":\n          return e < t;\n\n        case \"<=\":\n          return e <= t;\n      }\n\n      return !1;\n    };\n\n    try {\n      if (null == e) return !0;\n      const o = e.split(\" \");\n      if (3 === o.length) return t(r[o[0]], o[1], o[2]);\n\n      if (7 === o.length) {\n        const e = t(r[o[0]], o[1], o[2]),\n              n = o[3],\n              s = t(r[o[4]], o[5], o[6]);\n\n        switch (n) {\n          case \"AND\":\n            return e && s;\n\n          case \"OR\":\n            return e || s;\n        }\n      }\n\n      return !1;\n    } catch (o) {\n      console.log(\"Error.: can't parse = \" + e);\n    }\n  }\n\n  readLabelExpression(e, r) {\n    const t = r.labelExpressionInfo;\n    if (!t || !t.value && !t.expression) return e;\n  }\n\n  writeLabelExpression(e, r, t) {\n    if (this.labelExpressionInfo) if (null != this.labelExpressionInfo.value) e = b(this.labelExpressionInfo.value);else if (null != this.labelExpressionInfo.expression) {\n      const r = u(this.labelExpressionInfo.expression);\n      r && (e = \"[\" + r + \"]\");\n    }\n    null != e && (r[t] = e);\n  }\n\n  writeLabelExpressionInfo(e, r, t, o) {\n    if (null == e && null != this.labelExpression && w(o)) e = new p({\n      expression: this.getLabelExpressionArcade()\n    });else if (!e) return;\n    const n = e.toJSON(o);\n    n.expression && (r[t] = n);\n  }\n\n  writeMaxScale(e, r) {\n    (e || this.minScale) && (r.maxScale = e);\n  }\n\n  writeMinScale(e, r) {\n    (e || this.maxScale) && (r.minScale = e);\n  }\n\n  getLabelExpression() {\n    return m(this);\n  }\n\n  getLabelExpressionArcade() {\n    return f(this);\n  }\n\n  getLabelExpressionSingleField() {\n    return v(this);\n  }\n\n  hash() {\n    return JSON.stringify(this);\n  }\n\n  clone() {\n    return new d({\n      deconflictionStrategy: this.deconflictionStrategy,\n      labelExpression: this.labelExpression,\n      labelExpressionInfo: s(this.labelExpressionInfo),\n      labelPlacement: this.labelPlacement,\n      maxScale: this.maxScale,\n      minScale: this.minScale,\n      name: this.name,\n      symbol: s(this.symbol),\n      where: this.where,\n      useCodedValues: this.useCodedValues\n    });\n  }\n\n};\ne([l({\n  type: String,\n  json: {\n    write: !0\n  }\n})], g.prototype, \"name\", void 0), e([l({\n  type: String,\n  json: {\n    write: !0,\n    default: \"static\",\n    origins: {\n      \"web-scene\": {\n        write: !1\n      }\n    }\n  }\n})], g.prototype, \"deconflictionStrategy\", void 0), e([l({\n  type: String,\n  json: {\n    write: {\n      overridePolicy(e, r, t) {\n        return this.labelExpressionInfo && \"service\" === (null == t ? void 0 : t.origin) && L(t.layer) ? {\n          enabled: !1\n        } : {\n          allowNull: !0\n        };\n      }\n\n    }\n  }\n})], g.prototype, \"labelExpression\", void 0), e([i(\"labelExpression\")], g.prototype, \"readLabelExpression\", null), e([c(\"labelExpression\")], g.prototype, \"writeLabelExpression\", null), e([l({\n  type: p,\n  json: {\n    write: {\n      overridePolicy: (e, r, t) => P(t) ? {\n        allowNull: !0\n      } : {\n        enabled: !1\n      }\n    }\n  }\n})], g.prototype, \"labelExpressionInfo\", void 0), e([c(\"labelExpressionInfo\")], g.prototype, \"writeLabelExpressionInfo\", null), e([l({\n  type: y.apiValues,\n  json: {\n    type: y.jsonValues,\n    read: y.read,\n    write: y.write\n  }\n})], g.prototype, \"labelPlacement\", void 0), e([l({\n  type: Number\n})], g.prototype, \"maxScale\", void 0), e([c(\"maxScale\")], g.prototype, \"writeMaxScale\", null), e([l({\n  type: Number\n})], g.prototype, \"minScale\", void 0), e([c(\"minScale\")], g.prototype, \"writeMinScale\", null), e([l({\n  types: r,\n  json: {\n    origins: {\n      \"web-scene\": {\n        types: t,\n        write: h,\n        default: null\n      }\n    },\n    write: h,\n    default: null\n  }\n})], g.prototype, \"symbol\", void 0), e([l({\n  type: Boolean,\n  json: {\n    write: !0\n  }\n})], g.prototype, \"useCodedValues\", void 0), e([l({\n  type: String,\n  json: {\n    write: !0\n  }\n})], g.prototype, \"where\", void 0), g = d = e([a(\"esri.layers.support.LabelClass\")], g);\nvar E = g;\nexport default E;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/support/LabelClass.js"],"names":["_","e","symbolTypesLabel","r","symbolTypesLabel3D","t","JSONMap","o","JSONSupport","n","clone","s","property","l","reader","i","subclass","a","writer","c","p","templateStringToSql","b","getSingleFieldArcadeExpression","u","getLabelExpression","m","getLabelExpressionArcade","f","getLabelExpressionSingleField","v","defaultTextSymbol2D","S","write","h","d","y","esriServerPointLabelPlacementAboveCenter","esriServerPointLabelPlacementAboveLeft","esriServerPointLabelPlacementAboveRight","esriServerPointLabelPlacementBelowCenter","esriServerPointLabelPlacementBelowLeft","esriServerPointLabelPlacementBelowRight","esriServerPointLabelPlacementCenterCenter","esriServerPointLabelPlacementCenterLeft","esriServerPointLabelPlacementCenterRight","esriServerLinePlacementAboveAfter","esriServerLinePlacementAboveAlong","esriServerLinePlacementAboveBefore","esriServerLinePlacementAboveStart","esriServerLinePlacementAboveEnd","esriServerLinePlacementBelowAfter","esriServerLinePlacementBelowAlong","esriServerLinePlacementBelowBefore","esriServerLinePlacementBelowStart","esriServerLinePlacementBelowEnd","esriServerLinePlacementCenterAfter","esriServerLinePlacementCenterAlong","esriServerLinePlacementCenterBefore","esriServerLinePlacementCenterStart","esriServerLinePlacementCenterEnd","esriServerPolygonPlacementAlwaysHorizontal","ignoreUnknown","w","origin","x","layer","type","L","capabilities","exportMap","supportsArcadeExpressionForLabeling","P","g","constructor","name","deconflictionStrategy","labelExpression","labelExpressionInfo","labelPlacement","maxScale","minScale","symbol","useCodedValues","where","evaluateWhere","split","length","console","log","readLabelExpression","value","expression","writeLabelExpression","writeLabelExpressionInfo","toJSON","writeMaxScale","writeMinScale","hash","JSON","stringify","String","json","prototype","default","origins","overridePolicy","enabled","allowNull","apiValues","jsonValues","read","Number","types","Boolean","E"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{symbolTypesLabel as r,symbolTypesLabel3D as t}from\"../../symbols.js\";import{JSONMap as o}from\"../../core/jsonMap.js\";import{JSONSupport as n}from\"../../core/JSONSupport.js\";import{clone as s}from\"../../core/lang.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as c}from\"../../core/accessorSupport/decorators/writer.js\";import p from\"./LabelExpressionInfo.js\";import{templateStringToSql as b,getSingleFieldArcadeExpression as u,getLabelExpression as m,getLabelExpressionArcade as f,getLabelExpressionSingleField as v}from\"./labelUtils.js\";import{defaultTextSymbol2D as S}from\"../../symbols/support/defaults.js\";import{write as h}from\"../../symbols/support/jsonUtils.js\";var d;const y=new o({esriServerPointLabelPlacementAboveCenter:\"above-center\",esriServerPointLabelPlacementAboveLeft:\"above-left\",esriServerPointLabelPlacementAboveRight:\"above-right\",esriServerPointLabelPlacementBelowCenter:\"below-center\",esriServerPointLabelPlacementBelowLeft:\"below-left\",esriServerPointLabelPlacementBelowRight:\"below-right\",esriServerPointLabelPlacementCenterCenter:\"center-center\",esriServerPointLabelPlacementCenterLeft:\"center-left\",esriServerPointLabelPlacementCenterRight:\"center-right\",esriServerLinePlacementAboveAfter:\"above-after\",esriServerLinePlacementAboveAlong:\"above-along\",esriServerLinePlacementAboveBefore:\"above-before\",esriServerLinePlacementAboveStart:\"above-start\",esriServerLinePlacementAboveEnd:\"above-end\",esriServerLinePlacementBelowAfter:\"below-after\",esriServerLinePlacementBelowAlong:\"below-along\",esriServerLinePlacementBelowBefore:\"below-before\",esriServerLinePlacementBelowStart:\"below-start\",esriServerLinePlacementBelowEnd:\"below-end\",esriServerLinePlacementCenterAfter:\"center-after\",esriServerLinePlacementCenterAlong:\"center-along\",esriServerLinePlacementCenterBefore:\"center-before\",esriServerLinePlacementCenterStart:\"center-start\",esriServerLinePlacementCenterEnd:\"center-end\",esriServerPolygonPlacementAlwaysHorizontal:\"always-horizontal\"},{ignoreUnknown:!0});function w(e){return!e||\"service\"!==e.origin&&!x(e.layer)}function x(e){return\"map-image\"===(null==e?void 0:e.type)}function L(e){var r,t;return!!x(e)&&!(null==(r=e.capabilities)||null==(t=r.exportMap)||!t.supportsArcadeExpressionForLabeling)}function P(e){return w(e)||L(e.layer)}let g=d=class extends n{constructor(e){super(e),this.type=\"label\",this.name=null,this.deconflictionStrategy=\"static\",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.maxScale=0,this.minScale=0,this.symbol=S,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,r){const t=function(e,r,t){switch(r){case\"=\":return e==t;case\"<>\":return e!=t;case\">\":return e>t;case\">=\":return e>=t;case\"<\":return e<t;case\"<=\":return e<=t}return!1};try{if(null==e)return!0;const o=e.split(\" \");if(3===o.length)return t(r[o[0]],o[1],o[2]);if(7===o.length){const e=t(r[o[0]],o[1],o[2]),n=o[3],s=t(r[o[4]],o[5],o[6]);switch(n){case\"AND\":return e&&s;case\"OR\":return e||s}}return!1}catch(o){console.log(\"Error.: can't parse = \"+e)}}readLabelExpression(e,r){const t=r.labelExpressionInfo;if(!t||!t.value&&!t.expression)return e}writeLabelExpression(e,r,t){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=b(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const r=u(this.labelExpressionInfo.expression);r&&(e=\"[\"+r+\"]\")}null!=e&&(r[t]=e)}writeLabelExpressionInfo(e,r,t,o){if(null==e&&null!=this.labelExpression&&w(o))e=new p({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(o);n.expression&&(r[t]=n)}writeMaxScale(e,r){(e||this.minScale)&&(r.maxScale=e)}writeMinScale(e,r){(e||this.maxScale)&&(r.minScale=e)}getLabelExpression(){return m(this)}getLabelExpressionArcade(){return f(this)}getLabelExpressionSingleField(){return v(this)}hash(){return JSON.stringify(this)}clone(){return new d({deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:s(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:s(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};e([l({type:String,json:{write:!0}})],g.prototype,\"name\",void 0),e([l({type:String,json:{write:!0,default:\"static\",origins:{\"web-scene\":{write:!1}}}})],g.prototype,\"deconflictionStrategy\",void 0),e([l({type:String,json:{write:{overridePolicy(e,r,t){return this.labelExpressionInfo&&\"service\"===(null==t?void 0:t.origin)&&L(t.layer)?{enabled:!1}:{allowNull:!0}}}}})],g.prototype,\"labelExpression\",void 0),e([i(\"labelExpression\")],g.prototype,\"readLabelExpression\",null),e([c(\"labelExpression\")],g.prototype,\"writeLabelExpression\",null),e([l({type:p,json:{write:{overridePolicy:(e,r,t)=>P(t)?{allowNull:!0}:{enabled:!1}}}})],g.prototype,\"labelExpressionInfo\",void 0),e([c(\"labelExpressionInfo\")],g.prototype,\"writeLabelExpressionInfo\",null),e([l({type:y.apiValues,json:{type:y.jsonValues,read:y.read,write:y.write}})],g.prototype,\"labelPlacement\",void 0),e([l({type:Number})],g.prototype,\"maxScale\",void 0),e([c(\"maxScale\")],g.prototype,\"writeMaxScale\",null),e([l({type:Number})],g.prototype,\"minScale\",void 0),e([c(\"minScale\")],g.prototype,\"writeMinScale\",null),e([l({types:r,json:{origins:{\"web-scene\":{types:t,write:h,default:null}},write:h,default:null}})],g.prototype,\"symbol\",void 0),e([l({type:Boolean,json:{write:!0}})],g.prototype,\"useCodedValues\",void 0),e([l({type:String,json:{write:!0}})],g.prototype,\"where\",void 0),g=d=e([a(\"esri.layers.support.LabelClass\")],g);var E=g;export default E;\n"]},"metadata":{},"sourceType":"module"}