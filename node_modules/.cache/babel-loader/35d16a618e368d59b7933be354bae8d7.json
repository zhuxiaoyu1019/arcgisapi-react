{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport r from \"../request.js\";\nimport t from \"../TimeExtent.js\";\nimport i from \"../core/Error.js\";\nimport { HandleOwnerMixin as o } from \"../core/HandleOwner.js\";\nimport { loadAll as s } from \"../core/loadAll.js\";\nimport { isSome as a } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as p } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as n, isAbortError as l } from \"../core/promiseUtils.js\";\nimport { property as m } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/has.js\";\nimport { Integer as c } from \"../core/accessorSupport/ensureType.js\";\nimport \"../core/Logger.js\";\nimport { reader as u } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as y } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as d } from \"../core/accessorSupport/decorators/writer.js\";\nimport { nameToId as h } from \"../core/accessorSupport/PropertyOrigin.js\";\nimport f from \"../geometry/Extent.js\";\nimport { getScale as g } from \"../geometry/support/scaleUtils.js\";\nimport v from \"./Layer.js\";\nimport { APIKeyMixin as x } from \"./mixins/APIKeyMixin.js\";\nimport { ArcGISMapService as b } from \"./mixins/ArcGISMapService.js\";\nimport { ArcGISService as j } from \"./mixins/ArcGISService.js\";\nimport { BlendLayer as S } from \"./mixins/BlendLayer.js\";\nimport { CustomParametersMixin as w } from \"./mixins/CustomParametersMixin.js\";\nimport { OperationalLayer as O } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as L } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as I } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as M } from \"./mixins/ScaleRangeLayer.js\";\nimport { SublayersOwner as E } from \"./mixins/SublayersOwner.js\";\nimport { TemporalLayer as P } from \"./mixins/TemporalLayer.js\";\nimport { url as N } from \"./support/commonProperties.js\";\nimport { ExportImageParameters as R } from \"./support/ExportImageParameters.js\";\nimport J from \"./support/Sublayer.js\";\nimport { shouldWriteSublayerStructure as T } from \"./support/sublayerUtils.js\";\nlet U = class extends S(P(M(I(E(b(j(O(L(p(x(w(o(v))))))))))))) {\n  constructor(...e) {\n    super(...e), this.alwaysRefetch = !1, this.dpi = 96, this.gdbVersion = null, this.imageFormat = \"png24\", this.imageMaxHeight = 2048, this.imageMaxWidth = 2048, this.imageTransparency = !0, this.isReference = null, this.labelsVisible = !1, this.operationalLayerType = \"ArcGISMapServiceLayer\", this.sourceJSON = null, this.sublayers = null, this.type = \"map-image\", this.url = null;\n  }\n\n  normalizeCtorArgs(e, r) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...r\n    } : e;\n  }\n\n  load(e) {\n    const r = a(e) ? e.signal : null;\n    return this.addResolvingPromise(this.loadFromPortal({\n      supportedTypes: [\"Map Service\"]\n    }, e).catch(n).then(() => this._fetchService(r))), Promise.resolve(this);\n  }\n\n  readImageFormat(e, r) {\n    const t = r.supportedImageFormatTypes;\n    return t && t.indexOf(\"PNG32\") > -1 ? \"png32\" : \"png24\";\n  }\n\n  writeSublayers(e, r, t, i) {\n    if (!this.loaded || !e) return;\n    const o = e.slice().reverse().flatten(({\n      sublayers: e\n    }) => e && e.toArray().reverse()).toArray();\n    let s = !1;\n\n    if (this.capabilities && this.capabilities.operations.supportsExportMap && this.capabilities.exportMap.supportsDynamicLayers) {\n      const e = h(i.origin);\n\n      if (3 === e) {\n        const e = this.createSublayersForOrigin(\"service\").sublayers;\n        s = T(o, e, 2);\n      } else if (e > 3) {\n        const e = this.createSublayersForOrigin(\"portal-item\");\n        s = T(o, e.sublayers, h(e.origin));\n      }\n    }\n\n    const a = [],\n          p = {\n      writeSublayerStructure: s,\n      ...i\n    };\n    let n = s;\n    o.forEach(e => {\n      const r = e.write({}, p);\n      a.push(r), n = n || \"user\" === e.originOf(\"visible\");\n    });\n    a.some(e => Object.keys(e).length > 1) && (r.layers = a), n && (r.visibleLayers = o.filter(e => e.visible).map(e => e.id));\n  }\n\n  createExportImageParameters(e, r, t, i) {\n    const o = i && i.pixelRatio || 1;\n    e && this.version >= 10 && (e = e.clone().shiftCentralMeridian());\n    const s = new R({\n      layer: this,\n      scale: g({\n        extent: e,\n        width: r\n      }) * o\n    }),\n          a = s.toJSON();\n    s.destroy();\n    const p = !i || !i.rotation || this.version < 10.3 ? {} : {\n      rotation: -i.rotation\n    },\n          n = e && e.spatialReference,\n          l = n.wkid || JSON.stringify(n.toJSON());\n    a.dpi *= o;\n    const m = {};\n\n    if (null != i && i.timeExtent) {\n      const {\n        start: e,\n        end: r\n      } = i.timeExtent.toJSON();\n      m.time = e && r && e === r ? \"\" + e : `${null == e ? \"null\" : e},${null == r ? \"null\" : r}`;\n    } else this.timeInfo && !this.timeInfo.hasLiveData && (m.time = \"null,null\");\n\n    return {\n      bbox: e && e.xmin + \",\" + e.ymin + \",\" + e.xmax + \",\" + e.ymax,\n      bboxSR: l,\n      imageSR: l,\n      size: r + \",\" + t,\n      ...a,\n      ...p,\n      ...m\n    };\n  }\n\n  async fetchImage(e, t, o, s) {\n    var a, p;\n    const n = {\n      responseType: \"image\",\n      signal: null != (a = null == s ? void 0 : s.signal) ? a : null,\n      query: { ...this.parsedUrl.query,\n        ...this.createExportImageParameters(e, t, o, s),\n        f: \"image\",\n        _ts: this.alwaysRefetch ? Date.now() : null != (p = null == s ? void 0 : s.timestamp) ? p : null,\n        ...this.customParameters,\n        token: this.apiKey\n      }\n    },\n          m = this.parsedUrl.path + \"/export\";\n    if (null != n.query.dynamicLayers && !this.capabilities.exportMap.supportsDynamicLayers) return Promise.reject(new i(\"mapimagelayer:dynamiclayer-not-supported\", `service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`, {\n      query: n.query\n    }));\n    return r(m, n).then(e => e.data).catch(e => {\n      if (l(e)) throw e;\n      throw new i(\"mapimagelayer:image-fetch-error\", `Unable to load image: ${m}`, {\n        error: e\n      });\n    });\n  }\n\n  async fetchRecomputedExtents(e = {}) {\n    const i = { ...e,\n      query: {\n        returnUpdates: !0,\n        f: \"json\"\n      }\n    },\n          {\n      data: o\n    } = await r(this.url, i),\n          {\n      extent: s,\n      fullExtent: a,\n      timeExtent: p\n    } = o,\n          n = s || a;\n    return {\n      fullExtent: n && f.fromJSON(n),\n      timeExtent: p && t.fromJSON({\n        start: p[0],\n        end: p[1]\n      })\n    };\n  }\n\n  loadAll() {\n    return s(this, e => {\n      e(this.allSublayers);\n    });\n  }\n\n  async _fetchService(e) {\n    if (this.sourceJSON) return void this.read(this.sourceJSON, {\n      origin: \"service\",\n      url: this.parsedUrl\n    });\n    const {\n      data: t,\n      ssl: i\n    } = await r(this.parsedUrl.path, {\n      query: {\n        f: \"json\",\n        ...this.parsedUrl.query,\n        ...this.customParameters,\n        token: this.apiKey\n      },\n      signal: e\n    });\n    i && (this.url = this.url.replace(/^http:/i, \"https:\")), this.sourceJSON = t, this.read(t, {\n      origin: \"service\",\n      url: this.parsedUrl\n    });\n  }\n\n};\ne([m()], U.prototype, \"alwaysRefetch\", void 0), e([m()], U.prototype, \"dpi\", void 0), e([m()], U.prototype, \"gdbVersion\", void 0), e([m()], U.prototype, \"imageFormat\", void 0), e([u(\"imageFormat\", [\"supportedImageFormatTypes\"])], U.prototype, \"readImageFormat\", null), e([m({\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"maxImageHeight\"\n        }\n      }\n    }\n  }\n})], U.prototype, \"imageMaxHeight\", void 0), e([m({\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"maxImageWidth\"\n        }\n      }\n    }\n  }\n})], U.prototype, \"imageMaxWidth\", void 0), e([m()], U.prototype, \"imageTransparency\", void 0), e([m({\n  type: Boolean,\n  json: {\n    read: !1,\n    write: {\n      enabled: !0,\n      overridePolicy: () => ({\n        enabled: !1\n      })\n    }\n  }\n})], U.prototype, \"isReference\", void 0), e([m({\n  json: {\n    read: !1,\n    write: !1\n  }\n})], U.prototype, \"labelsVisible\", void 0), e([m({\n  type: [\"ArcGISMapServiceLayer\"]\n})], U.prototype, \"operationalLayerType\", void 0), e([m({\n  json: {\n    read: !1,\n    write: !1\n  }\n})], U.prototype, \"popupEnabled\", void 0), e([m()], U.prototype, \"sourceJSON\", void 0), e([m({\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], U.prototype, \"sublayers\", void 0), e([d(\"sublayers\", {\n  layers: {\n    type: [J]\n  },\n  visibleLayers: {\n    type: [c]\n  }\n})], U.prototype, \"writeSublayers\", null), e([m({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], U.prototype, \"listMode\", void 0), e([m({\n  json: {\n    read: !1\n  },\n  readOnly: !0,\n  value: \"map-image\"\n})], U.prototype, \"type\", void 0), e([m(N)], U.prototype, \"url\", void 0), U = e([y(\"esri.layers.MapImageLayer\")], U);\nvar q = U;\nexport default q;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/MapImageLayer.js"],"names":["_","e","r","t","i","HandleOwnerMixin","o","loadAll","s","isSome","a","MultiOriginJSONMixin","p","throwIfAbortError","n","isAbortError","l","property","m","Integer","c","reader","u","subclass","y","writer","d","nameToId","h","f","getScale","g","v","APIKeyMixin","x","ArcGISMapService","b","ArcGISService","j","BlendLayer","S","CustomParametersMixin","w","OperationalLayer","O","PortalLayer","L","RefreshableLayer","I","ScaleRangeLayer","M","SublayersOwner","E","TemporalLayer","P","url","N","ExportImageParameters","R","J","shouldWriteSublayerStructure","T","U","constructor","alwaysRefetch","dpi","gdbVersion","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","isReference","labelsVisible","operationalLayerType","sourceJSON","sublayers","type","normalizeCtorArgs","load","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","then","_fetchService","Promise","resolve","readImageFormat","supportedImageFormatTypes","indexOf","writeSublayers","loaded","slice","reverse","flatten","toArray","capabilities","operations","supportsExportMap","exportMap","supportsDynamicLayers","origin","createSublayersForOrigin","writeSublayerStructure","forEach","write","push","originOf","some","Object","keys","length","layers","visibleLayers","filter","visible","map","id","createExportImageParameters","pixelRatio","version","clone","shiftCentralMeridian","layer","scale","extent","width","toJSON","destroy","rotation","spatialReference","wkid","JSON","stringify","timeExtent","start","end","time","timeInfo","hasLiveData","bbox","xmin","ymin","xmax","ymax","bboxSR","imageSR","size","fetchImage","responseType","query","parsedUrl","_ts","Date","now","timestamp","customParameters","token","apiKey","path","dynamicLayers","reject","data","error","fetchRecomputedExtents","returnUpdates","fullExtent","fromJSON","allSublayers","read","ssl","replace","prototype","json","origins","service","source","Boolean","enabled","overridePolicy","ignoreOrigin","readOnly","value","q"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../TimeExtent.js\";import i from\"../core/Error.js\";import{HandleOwnerMixin as o}from\"../core/HandleOwner.js\";import{loadAll as s}from\"../core/loadAll.js\";import{isSome as a}from\"../core/maybe.js\";import{MultiOriginJSONMixin as p}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as n,isAbortError as l}from\"../core/promiseUtils.js\";import{property as m}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import{Integer as c}from\"../core/accessorSupport/ensureType.js\";import\"../core/Logger.js\";import{reader as u}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import{nameToId as h}from\"../core/accessorSupport/PropertyOrigin.js\";import f from\"../geometry/Extent.js\";import{getScale as g}from\"../geometry/support/scaleUtils.js\";import v from\"./Layer.js\";import{APIKeyMixin as x}from\"./mixins/APIKeyMixin.js\";import{ArcGISMapService as b}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as j}from\"./mixins/ArcGISService.js\";import{BlendLayer as S}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as w}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as O}from\"./mixins/OperationalLayer.js\";import{PortalLayer as L}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as I}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as M}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as E}from\"./mixins/SublayersOwner.js\";import{TemporalLayer as P}from\"./mixins/TemporalLayer.js\";import{url as N}from\"./support/commonProperties.js\";import{ExportImageParameters as R}from\"./support/ExportImageParameters.js\";import J from\"./support/Sublayer.js\";import{shouldWriteSublayerStructure as T}from\"./support/sublayerUtils.js\";let U=class extends(S(P(M(I(E(b(j(O(L(p(x(w(o(v)))))))))))))){constructor(...e){super(...e),this.alwaysRefetch=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat=\"png24\",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType=\"ArcGISMapServiceLayer\",this.sourceJSON=null,this.sublayers=null,this.type=\"map-image\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=a(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(n).then((()=>this._fetchService(r)))),Promise.resolve(this)}readImageFormat(e,r){const t=r.supportedImageFormatTypes;return t&&t.indexOf(\"PNG32\")>-1?\"png32\":\"png24\"}writeSublayers(e,r,t,i){if(!this.loaded||!e)return;const o=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const e=h(i.origin);if(3===e){const e=this.createSublayersForOrigin(\"service\").sublayers;s=T(o,e,2)}else if(e>3){const e=this.createSublayersForOrigin(\"portal-item\");s=T(o,e.sublayers,h(e.origin))}}const a=[],p={writeSublayerStructure:s,...i};let n=s;o.forEach((e=>{const r=e.write({},p);a.push(r),n=n||\"user\"===e.originOf(\"visible\")}));a.some((e=>Object.keys(e).length>1))&&(r.layers=a),n&&(r.visibleLayers=o.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,r,t,i){const o=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new R({layer:this,scale:g({extent:e,width:r})*o}),a=s.toJSON();s.destroy();const p=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},n=e&&e.spatialReference,l=n.wkid||JSON.stringify(n.toJSON());a.dpi*=o;const m={};if(null!=i&&i.timeExtent){const{start:e,end:r}=i.timeExtent.toJSON();m.time=e&&r&&e===r?\"\"+e:`${null==e?\"null\":e},${null==r?\"null\":r}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(m.time=\"null,null\");return{bbox:e&&e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:l,imageSR:l,size:r+\",\"+t,...a,...p,...m}}async fetchImage(e,t,o,s){var a,p;const n={responseType:\"image\",signal:null!=(a=null==s?void 0:s.signal)?a:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,t,o,s),f:\"image\",_ts:this.alwaysRefetch?Date.now():null!=(p=null==s?void 0:s.timestamp)?p:null,...this.customParameters,token:this.apiKey}},m=this.parsedUrl.path+\"/export\";if(null!=n.query.dynamicLayers&&!this.capabilities.exportMap.supportsDynamicLayers)return Promise.reject(new i(\"mapimagelayer:dynamiclayer-not-supported\",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n.query}));return r(m,n).then((e=>e.data)).catch((e=>{if(l(e))throw e;throw new i(\"mapimagelayer:image-fetch-error\",`Unable to load image: ${m}`,{error:e})}))}async fetchRecomputedExtents(e={}){const i={...e,query:{returnUpdates:!0,f:\"json\"}},{data:o}=await r(this.url,i),{extent:s,fullExtent:a,timeExtent:p}=o,n=s||a;return{fullExtent:n&&f.fromJSON(n),timeExtent:p&&t.fromJSON({start:p[0],end:p[1]})}}loadAll(){return s(this,(e=>{e(this.allSublayers)}))}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl});const{data:t,ssl:i}=await r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});i&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=t,this.read(t,{origin:\"service\",url:this.parsedUrl})}};e([m()],U.prototype,\"alwaysRefetch\",void 0),e([m()],U.prototype,\"dpi\",void 0),e([m()],U.prototype,\"gdbVersion\",void 0),e([m()],U.prototype,\"imageFormat\",void 0),e([u(\"imageFormat\",[\"supportedImageFormatTypes\"])],U.prototype,\"readImageFormat\",null),e([m({json:{origins:{service:{read:{source:\"maxImageHeight\"}}}}})],U.prototype,\"imageMaxHeight\",void 0),e([m({json:{origins:{service:{read:{source:\"maxImageWidth\"}}}}})],U.prototype,\"imageMaxWidth\",void 0),e([m()],U.prototype,\"imageTransparency\",void 0),e([m({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],U.prototype,\"isReference\",void 0),e([m({json:{read:!1,write:!1}})],U.prototype,\"labelsVisible\",void 0),e([m({type:[\"ArcGISMapServiceLayer\"]})],U.prototype,\"operationalLayerType\",void 0),e([m({json:{read:!1,write:!1}})],U.prototype,\"popupEnabled\",void 0),e([m()],U.prototype,\"sourceJSON\",void 0),e([m({json:{write:{ignoreOrigin:!0}}})],U.prototype,\"sublayers\",void 0),e([d(\"sublayers\",{layers:{type:[J]},visibleLayers:{type:[c]}})],U.prototype,\"writeSublayers\",null),e([m({type:[\"show\",\"hide\",\"hide-children\"]})],U.prototype,\"listMode\",void 0),e([m({json:{read:!1},readOnly:!0,value:\"map-image\"})],U.prototype,\"type\",void 0),e([m(N)],U.prototype,\"url\",void 0),U=e([y(\"esri.layers.MapImageLayer\")],U);var q=U;export default q;\n"]},"metadata":{},"sourceType":"module"}