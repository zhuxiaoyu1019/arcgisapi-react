{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../../../../geometry.js\";\nimport { neverReached as e } from \"../../../../../core/compilerUtils.js\";\nimport t from \"../../../../../core/Logger.js\";\nimport { rad2deg as s, deg2rad as i } from \"../../../../../core/mathUtils.js\";\nimport { isSome as r, isNone as o } from \"../../../../../core/maybe.js\";\nimport { castRenderScreenPointArray3 as n } from \"../../../../../core/screenUtils.js\";\nimport { r as a, i as c, s as l, m, b as g, t as d, w as u } from \"../../../../../chunks/mat4.js\";\nimport { c as p } from \"../../../../../chunks/mat4f64.js\";\nimport { r as f } from \"../../../../../chunks/quat.js\";\nimport { a as b, g as h, d as w, c as y, n as j, b as M, l as k, f as P, p as v, s as O } from \"../../../../../chunks/vec3.js\";\nimport { a as T, c as U, f as R } from \"../../../../../chunks/vec3f64.js\";\nimport { r as S, f as L, a as A, n as E, u as F, i as G } from \"../../../../../chunks/boundedPlane.js\";\nimport { fromVectorsAndPoint as C, fromPositionAndNormal as I } from \"../../../../../geometry/support/plane.js\";\nimport { create as x } from \"../../../../../geometry/support/ray.js\";\nimport { angleAroundAxis as z } from \"../../../../../geometry/support/vector.js\";\nimport { sv3d as D, sm4d as B, sq4d as V } from \"../../../../../geometry/support/vectorStacks.js\";\nimport { Manipulator3D as q } from \"../../Manipulator3D.js\";\nimport { calculateTranslateRotateFromBases as H } from \"../../manipulatorUtils.js\";\nimport { SMALL_ANGLE_DOT_THRESHOLD as N, RESIZE_HANDLE_EDGE_PADDING_FRAC as W, PLANE_MIN_BASIS_SCREEN_LEN2 as $, INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION as J, SHIFT_RESTART_OFFSET_DISTANCE as K, SHIFT_RESTART_ARROW_TIP_COLOR as Q, SHIFT_RESTART_ARROW_CAP_COLOR as X, SHIFT_RESTART_TUBE_COLOR as Y, SHIFT_RESTART_OUTLINE_COLOR as Z, SHIFT_RESTART_CALLOUT_COLOR as _, SHIFT_RESTART_TIP_RADIUS as ee, ROTATE_HEADING_CALLOUT_COLOR as te, PLANE_OUTLINE_COLOR as se, PLANE_OUTLINE_WIDTH as ie, PLANE_BACKGROUND_COLOR as re, GRID_COLOR as oe, RESIZE_HANDLE_CORNER_INPUT_RADIUS as ne, RESIZE_HANDLE_EDGE_INPUT_RADIUS as ae, ROTATE_HEADING_TIP_LENGTH as ce, VERTICAL_DOT_THRESHOLD as le, SHIFT_RESTART_TUBE_RADIUS as me, SHIFT_RESTART_TIP_LENGTH as ge, SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER as de, SHIFT_RESTART_TIP_FOCUS_MULTIPLIER as ue, SHIFT_RESTART_ARROW_OUTLINE_WIDTH as pe, ROTATE_HEADING_OFFSET_DISTANCE as fe, ROTATE_HEADING_DISC_RADIUS as be, ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER as he, HANDLE_COLOR as we, DISPLAY_FOCUS_MULTIPLIER as ye, RESIZE_HANDLE_EDGE_WIDTH as je, SHIFT_RESTART_ARROW_LENGTH as Me, RESIZE_HANDLE_CORNER_WIDTH as ke } from \"./sliceToolConfig.js\";\nimport { LineVisualElement as Pe } from \"../../visualElements/LineVisualElement.js\";\nimport { SlicePlaneVisualElement as ve } from \"../../visualElements/SlicePlaneVisualElement.js\";\nimport { fromRender as Oe } from \"../../../support/geometryUtils/ray.js\";\nimport { Geometry as Te } from \"../../../webgl-engine/lib/Geometry.js\";\nimport Ue from \"../../../webgl-engine/lib/GeometryUtil.js\";\nimport { ColorMaterial as Re } from \"../../../webgl-engine/materials/ColorMaterial.js\";\nimport { ImageMaterial as Se } from \"../../../webgl-engine/materials/ImageMaterial.js\";\nimport { NativeLineMaterial as Le } from \"../../../webgl-engine/materials/NativeLineMaterial.js\";\nimport { RibbonLineMaterial as Ae } from \"../../../webgl-engine/materials/RibbonLineMaterial.js\";\nimport Ee from \"../../../../../widgets/Slice/SlicePlane.js\";\nimport Fe from \"../../../../../geometry/Point.js\";\nconst Ge = t.getLogger(\"esri.views.3d.interactive.analysisTools.slice.sliceToolUtils\");\n\nfunction Ce(e, t, s, i, r, o, n, a) {\n  return Ie(t, n.worldUpAtPosition(e, D.get()), r, o, a.basis1, a.basis2), b(a.basis1, a.basis1, s), b(a.basis2, a.basis2, i), h(a.origin, e), C(a.basis2, a.basis1, a.origin, a.plane), a;\n}\n\nfunction Ie(e, t, s, i, r, o) {\n  const n = w(e, t),\n        a = D.get(),\n        c = D.get();\n\n  switch (0 === i ? Math.abs(n) > le ? 1 : 2 : i) {\n    case 2:\n      {\n        const i = Math.abs(n) <= N ? e : s.viewUp;\n        y(a, i, t), h(c, t);\n        break;\n      }\n\n    case 1:\n      y(a, s.viewUp, t), y(c, t, a);\n      break;\n\n    case 3:\n      {\n        const i = Math.abs(n) <= N ? t : s.viewUp;\n        y(a, i, e), y(c, e, a);\n        break;\n      }\n  }\n\n  const l = y(D.get(), a, c);\n  w(l, s.viewForward) > 0 && b(c, c, -1), j(r, a), j(o, c);\n}\n\nfunction xe(e, t, s) {\n  const i = t.worldUpAtPosition(e.origin, D.get()),\n        r = e.basis1,\n        o = ct(e, i),\n        n = Math.round(o / ft) * ft;\n  return S(e, n - o, r, s);\n}\n\nfunction ze(e, t, s, i, r, o) {\n  const n = h(D.get(), r.origin);\n  M(n, n, b(D.get(), r.basis1, e.direction[0] < 0 ? 1 : -1)), M(n, n, b(D.get(), r.basis2, e.direction[1] < 0 ? 1 : -1));\n  const a = k(r.basis1),\n        c = k(r.basis2),\n        l = P(D.get(), s, n),\n        m = P(D.get(), t, n);\n  let g = 0,\n      d = 0;\n\n  if (Ze(e)) {\n    const t = Ye(r),\n          s = Ye(o);\n    g = a - .5 * e.direction[0] * w(r.basis1, m) / a, d = c - .5 * e.direction[1] * w(r.basis2, m) / c;\n    const i = s / t;\n    g *= i, d *= i;\n  }\n\n  const u = g + .5 * e.direction[0] * w(r.basis1, l) / a,\n        p = d + .5 * e.direction[1] * w(r.basis2, l) / c,\n        f = b(D.get(), r.basis1, u / a),\n        y = b(D.get(), r.basis2, p / c);\n  (u <= 0 || Qe(o.origin, f, i) <= $) && h(f, o.basis1), (p <= 0 || Qe(o.origin, y, i) <= $) && h(y, o.basis2);\n  const j = h(D.get(), n);\n  return M(j, j, b(D.get(), f, e.direction[0] < 0 ? -1 : 1)), M(j, j, b(D.get(), y, e.direction[1] < 0 ? -1 : 1)), L(j, f, y, o);\n}\n\nfunction De(e, t) {\n  return J * Math.min(t.width, t.height) * t.computeRenderPixelSizeAt(e);\n}\n\nfunction Be(e, t, s, i) {\n  const r = y(D.get(), t, s);\n  return y(r, r, t), I(e, r, i);\n}\n\nfunction Ve(e, t) {\n  return H(e.basis1, e.basis2, e.origin, t);\n}\n\nfunction qe(e, t, s, i) {\n  const r = t.worldUpAtPosition(e.origin, D.get()),\n        o = D.get();\n\n  switch (s) {\n    case 1:\n      h(o, r);\n      break;\n\n    case 2:\n      h(o, e.basis1);\n  }\n\n  return I(e.origin, o, i);\n}\n\nfunction He(e, t, s, i) {\n  const r = Ke(s, 2),\n        o = B.get();\n  a(o, t, r.edge * Math.PI / 2);\n  const c = j(D.get(), r.basis);\n  let l = b(D.get(), c, r.direction * i.computeScreenPixelSizeAt(r.position) * K);\n  M(l, l, r.position);\n  const m = i.projectToRenderScreen(l, n(D.get())),\n        g = Ne(i, m);\n  Oe(i, m, pt), j(pt.direction, pt.direction);\n  const d = D.get();\n  !g && G(s, pt, d) && (l = d), o[12] = 0, o[13] = 0, o[14] = 0, e.modelTransform = o, e.renderLocation = T(l), g ? e.state |= ut : e.state &= ~ut;\n}\n\nfunction Ne(e, t) {\n  const [s, i, r, o] = e.viewport,\n        n = Math.min(r, o) / 16;\n  let a = !0;\n  return t[0] < s + n ? (t[0] = s + n, a = !1) : t[0] > s + r - n && (t[0] = s + r - n, a = !1), t[1] < i + n ? (t[1] = i + n, a = !1) : t[1] > i + o - n && (t[1] = i + o - n, a = !1), a;\n}\n\nfunction We(e, t, s, i) {\n  const r = k(i.basis1),\n        o = k(i.basis2),\n        n = Xe(i),\n        g = Ye(i),\n        d = O(D.get(), 0, 0, 0);\n  M(d, b(D.get(), i.basis1, t.direction[0]), b(D.get(), i.basis2, t.direction[1])), M(d, i.origin, d);\n  let u = 0,\n      p = 1;\n  if (Ze(t)) 1 === t.direction[0] && -1 === t.direction[1] ? u = ft : 1 === t.direction[0] && 1 === t.direction[1] ? u = Math.PI : -1 === t.direction[0] && 1 === t.direction[1] && (u = 3 * Math.PI / 2), p = g;else {\n    const e = 0 !== t.direction[0] ? 1 : 2;\n    u = 1 === e ? ft : 0, p = (1 === e ? o : r) - n;\n  }\n  const f = c(B.get());\n  a(f, f, u), l(f, f, O(D.get(), p, p, p)), m(f, s, f), f[12] = 0, f[13] = 0, f[14] = 0, e.modelTransform = f, e.renderLocation = d;\n}\n\nfunction $e(e, t, s, i) {\n  const r = i.worldUpAtPosition(s.origin, D.get()),\n        o = Ke(s, 0),\n        n = c(B.get());\n  a(n, n, o.edge * Math.PI / 2), g(n, n, -ct(s, r)), m(n, t, n), n[12] = 0, n[13] = 0, n[14] = 0, e.modelTransform = n, e.renderLocation = o.position;\n}\n\nfunction Je(e, t, s) {\n  const i = Ke(s, 1),\n        r = c(B.get());\n  a(r, r, i.edge * Math.PI / 2), g(r, r, ft), m(r, t, r), r[12] = 0, r[13] = 0, r[14] = 0, e.modelTransform = r, e.renderLocation = i.position;\n}\n\nfunction Ke(e, t) {\n  switch (t) {\n    case 0:\n      return {\n        basis: e.basis1,\n        direction: 1,\n        position: M(D.get(), e.origin, e.basis1),\n        edge: t\n      };\n\n    case 1:\n      return {\n        basis: e.basis2,\n        direction: 1,\n        position: M(D.get(), e.origin, e.basis2),\n        edge: t\n      };\n\n    case 2:\n      return {\n        basis: e.basis1,\n        direction: -1,\n        position: P(D.get(), e.origin, e.basis1),\n        edge: t\n      };\n\n    case 3:\n      return {\n        basis: e.basis2,\n        direction: -1,\n        position: P(D.get(), e.origin, e.basis2),\n        edge: t\n      };\n  }\n}\n\nfunction Qe(e, t, s) {\n  const i = s.projectToRenderScreen(M(D.get(), e, t), n(D.get())),\n        r = s.projectToRenderScreen(P(D.get(), e, t), n(D.get()));\n  return v(P(i, i, r));\n}\n\nfunction Xe(e) {\n  const t = k(e.basis1),\n        s = k(e.basis2);\n  return W * Math.min(t, s);\n}\n\nfunction Ye(e) {\n  return Xe(e);\n}\n\nfunction Ze(e) {\n  return 0 !== e.direction[0] && 0 !== e.direction[1];\n}\n\nfunction _e(e, t = 1) {\n  const s = 0 === t ? K : 0,\n        i = [R(s, 0, -Me / 2), R(s, 0, Me / 2)],\n        r = nt(i, !0),\n        o = (e, t) => rt(i, i, {\n    tubeRadius: me,\n    tipRadius: ee,\n    tipLength: ge,\n    tubeFocusMultiplier: de,\n    tipFocusMultiplier: ue,\n    padding: e,\n    bothEnds: !0,\n    flat: null,\n    focusTipLength: !0,\n    addCap: t\n  }),\n        n = o(0, !1),\n        a = o(pe, !0),\n        c = new Re({\n    color: Q,\n    cullFace: 2,\n    renderOccluded: 16\n  }),\n        l = new Re({\n    color: X,\n    cullFace: 2,\n    renderOccluded: 16\n  }),\n        m = new Re({\n    color: Y,\n    cullFace: 2,\n    renderOccluded: 16\n  }),\n        g = new Re({\n    color: Z,\n    transparent: !0,\n    writeDepth: !1,\n    cullFace: 1,\n    renderOccluded: 2\n  }),\n        d = Ue.createPolylineGeometry([[s, 0, 0], [s - K, 0, 0]]),\n        u = Ue.createPolylineGeometry([[s, 0, 0], [s - K, 0, 0]]),\n        p = new Le({\n    color: _,\n    renderOccluded: 4\n  });\n\n  return new q({\n    view: e,\n    renderObjects: [...n.normal.map(({\n      part: e,\n      geometry: t,\n      transform: s\n    }) => ({\n      geometry: t,\n      material: \"tip\" === e ? c : \"cap\" === e ? l : m,\n      transform: s,\n      stateMask: 1 | dt\n    })), ...a.normal.map(({\n      geometry: e,\n      transform: t\n    }) => ({\n      geometry: e,\n      material: g,\n      transform: t,\n      stateMask: 1 | dt\n    })), {\n      geometry: d,\n      material: p,\n      stateMask: 1 | dt | ut\n    }, ...n.focused.map(({\n      part: e,\n      geometry: t,\n      transform: s\n    }) => ({\n      geometry: t,\n      material: \"tip\" === e ? c : \"cap\" === e ? l : m,\n      transform: s,\n      stateMask: 2 | dt\n    })), ...a.focused.map(({\n      geometry: e,\n      transform: t\n    }) => ({\n      geometry: e,\n      material: g,\n      transform: t,\n      stateMask: 2 | dt\n    })), {\n      geometry: u,\n      material: p,\n      stateMask: 2 | dt | ut\n    }],\n    autoScaleRenderObjects: !1,\n    collisionType: {\n      type: \"line\",\n      paths: [r]\n    },\n    collisionPriority: 1,\n    radius: ee,\n    state: dt\n  });\n}\n\nfunction et(e, t) {\n  const s = new Se({\n    transparent: !0,\n    writeDepth: !1,\n    textureId: t.id,\n    renderOccluded: 16\n  }),\n        i = fe,\n        r = be,\n        o = r * he,\n        n = e => {\n    const t = new Uint32Array([0, 1, 2, 2, 3, 0]);\n    return new Te([[\"position\", {\n      size: 3,\n      data: [i - e, -e, 0, i + e, -e, 0, i + e, e, 0, i - e, e, 0],\n      exclusive: !0\n    }], [\"uv0\", {\n      size: 2,\n      data: [0, 0, 1, 0, 1, 1, 0, 1]\n    }]], [[\"position\", t], [\"uv0\", t]]);\n  },\n        a = Ue.createPolylineGeometry([[0, 0, 0], [i - r, 0, 0]]),\n        c = Ue.createPolylineGeometry([[0, 0, 0], [i - o, 0, 0]]),\n        l = new Le({\n    color: te,\n    renderOccluded: 4\n  }),\n        m = [{\n    geometry: n(r),\n    material: s,\n    stateMask: 1 | dt\n  }, {\n    geometry: a,\n    material: l,\n    stateMask: 1 | dt\n  }, {\n    geometry: n(o),\n    material: s,\n    stateMask: 2 | dt\n  }, {\n    geometry: c,\n    material: l,\n    stateMask: 2 | dt\n  }];\n\n  return new q({\n    view: e,\n    renderObjects: m,\n    autoScaleRenderObjects: !1,\n    collisionType: {\n      type: \"disc\",\n      direction: [0, 0, 1],\n      offset: [i, 0, 0]\n    },\n    collisionPriority: 1,\n    radius: r / 2,\n    state: dt\n  });\n}\n\nfunction tt(e) {\n  return new Pe({\n    view: e,\n    attached: !0,\n    color: se,\n    width: ie,\n    writeDepthEnabled: !1,\n    renderOccluded: 4,\n    geometry: [[[-1, -1, 0], [1, -1, 0], [1, 1, 0], [-1, 1, 0], [-1, -1, 0]]]\n  });\n}\n\nfunction st(e) {\n  return new ve({\n    view: e,\n    attached: !0,\n    backgroundColor: [...re],\n    gridColor: oe,\n    gridWidth: 4,\n    renderOccluded: 4\n  });\n}\n\nfunction it(e, t) {\n  const s = Ze(t),\n        i = s ? [R(1, 0, 0), R(0, 0, 0), R(0, 1, 0)] : [R(1, 0, 0), R(-1, 0, 0)],\n        r = Ue.createPolylineGeometry(i),\n        o = [...we, 1],\n        n = e => new Ae({\n    color: o,\n    width: e,\n    renderOccluded: 4\n  }),\n        a = () => new Le({\n    color: o,\n    renderOccluded: 4\n  }),\n        c = s ? ke : je,\n        l = c * ye,\n        m = je,\n        g = e => e > 1 ? n(e) : a(),\n        d = [{\n    geometry: r,\n    material: g(c),\n    stateMask: 1 | bt\n  }, {\n    geometry: r,\n    material: g(l),\n    stateMask: 2 | bt\n  }, {\n    geometry: r,\n    material: g(m),\n    stateMask: ht\n  }],\n        u = new q({\n    view: e,\n    renderObjects: d,\n    collisionType: {\n      type: \"line\",\n      paths: [i]\n    },\n    autoScaleRenderObjects: !1,\n    worldSized: !0,\n    radius: s ? ne : ae,\n    idHint: s ? 1 : 2\n  });\n\n  return u.state = bt, u;\n}\n\nfunction rt(e, t, s) {\n  const i = i => {\n    const o = (i ? t : e).slice(0),\n          n = P(D.get(), o[0], o[1]);\n    j(n, n);\n    const a = P(D.get(), o[o.length - 1], o[o.length - 2]);\n\n    if (j(a, a), s.padding > 0) {\n      const e = b(U(), a, -s.padding);\n\n      if (o[o.length - 1] = M(e, e, o[o.length - 1]), s.bothEnds) {\n        const e = b(U(), n, -s.padding);\n        o[0] = M(e, e, o[0]);\n      }\n    }\n\n    const g = i ? s.tipFocusMultiplier : 1,\n          h = s.tipLength * (s.focusTipLength ? g : 1),\n          w = s.tipRadius * g,\n          y = c(B.get());\n\n    if (s.padding > 0) {\n      const e = h / 4,\n            t = O(D.get(), 0, e, 0),\n            i = 1 + s.padding / e;\n      d(y, y, t), l(y, y, O(D.get(), i, i, i)), d(y, y, b(t, t, -1 / i));\n    }\n\n    const k = c(p()),\n          v = R(0, 1, 0),\n          T = u(p(), f(V.get(), v, a));\n    T[12] = o[o.length - 1][0], T[13] = o[o.length - 1][1], T[14] = o[o.length - 1][2], m(T, T, y);\n    const S = [{\n      part: \"tube\",\n      geometry: ot(s.tubeRadius * (i ? s.tubeFocusMultiplier : 1) + s.padding, s.flat, o),\n      transform: k\n    }];\n    let L, A;\n\n    if (r(s.flat) ? L = Ue.createExtrudedTriangle(h, w, w, s.flat.thickness) : (L = Ue.createConeGeometry(h, w, 24, !1, !1, !0), A = Ue.createConeGeometry(h, w, 24, !1, !0, !1)), S.push({\n      part: \"tip\",\n      geometry: L,\n      transform: T\n    }), A && S.push({\n      part: \"cap\",\n      geometry: A,\n      transform: T\n    }), s.bothEnds) {\n      const e = u(p(), f(V.get(), v, n));\n      e[12] = o[0][0], e[13] = o[0][1], e[14] = o[0][2], m(e, e, y), S.push({\n        part: \"tip\",\n        geometry: L,\n        transform: e\n      }), A && S.push({\n        part: \"cap\",\n        geometry: A,\n        transform: e\n      });\n    }\n\n    return S;\n  };\n\n  return {\n    normal: i(!1),\n    focused: i(!0)\n  };\n}\n\nfunction ot(e, t, s) {\n  const i = [];\n  if (r(t)) i.push([e, t.thickness / 2], [-e, t.thickness / 2], [-e, -t.thickness / 2], [e, -t.thickness / 2]);else {\n    const t = 12;\n\n    for (let s = 0; s < t; s++) {\n      const r = s / t * 2 * Math.PI;\n      i.push([Math.cos(r) * e, Math.sin(r) * e]);\n    }\n  }\n  return Ue.createPathExtrusionGeometry(i, s, [], [], !1);\n}\n\nfunction nt(e, t) {\n  const s = P(U(), e[e.length - 1], e[e.length - 2]);\n\n  if (j(s, s), b(s, s, ce), M(s, s, e[e.length - 1]), t) {\n    const t = P(U(), e[0], e[1]);\n    return j(t, t), b(t, t, ce), M(t, t, e[0]), [t, ...e, s];\n  }\n\n  return [...e, s];\n}\n\nfunction at(e, t, i, n = new Ee()) {\n  if (o(e)) return null;\n  const a = r(n.position) ? n.position : new Fe();\n  t.fromRenderCoords(e.origin, a, i), n.position = a;\n  const c = t.worldUpAtPosition(e.origin, D.get()),\n        l = t.worldBasisAtPosition(e.origin, 1, D.get());\n  return n.width = 2 * k(e.basis1), n.height = 2 * k(e.basis2), n.tilt = s(ct(e, c)), n.heading = s(lt(e, c, l)), n;\n}\n\nfunction ct(e, t) {\n  return z(t, e.basis2, e.basis1) + ft;\n}\n\nfunction lt(e, t, s) {\n  return z(e.basis1, s, t) - ft;\n}\n\nfunction mt(e, t, s = A()) {\n  return o(e) || o(e.position) ? null : t.toRenderCoords(e.position, s.origin) ? (t.worldBasisAtPosition(s.origin, 0, s.basis1), t.worldBasisAtPosition(s.origin, 1, s.basis2), C(s.basis2, s.basis1, s.origin, s.plane), S(s, -i(e.heading), E(s), s), S(s, i(e.tilt), s.basis1, s), b(s.basis1, s.basis1, e.width / 2), b(s.basis2, s.basis2, e.height / 2), F(s), s) : (Ge.error(`Failed to project slice plane position, projection from ${e.position.spatialReference.wkid} is not supported`), null);\n}\n\nfunction gt(t) {\n  switch (t.type) {\n    case \"building-scene\":\n    case \"csv\":\n    case \"direct-line-measurement\":\n    case \"area-measurement\":\n    case \"feature\":\n    case \"geo-rss\":\n    case \"geojson\":\n    case \"graphics\":\n    case \"group\":\n    case \"integrated-mesh\":\n    case \"kml\":\n    case \"line-of-sight\":\n    case \"map-notes\":\n    case \"ogc-feature\":\n    case \"point-cloud\":\n    case \"route\":\n    case \"slice\":\n    case \"scene\":\n    case \"stream\":\n    case \"voxel\":\n    case \"subtype-group\":\n    case \"unknown\":\n    case \"unsupported\":\n    case \"wfs\":\n    case null:\n      return !1;\n\n    case \"base-dynamic\":\n    case \"base-elevation\":\n    case \"base-tile\":\n    case \"bing-maps\":\n    case \"elevation\":\n    case \"imagery\":\n    case \"imagery-tile\":\n    case \"map-image\":\n    case \"open-street-map\":\n    case \"tile\":\n    case \"vector-tile\":\n    case \"wcs\":\n    case \"web-tile\":\n    case \"wms\":\n    case \"wmts\":\n      return !0;\n\n    default:\n      return e(t.type), !1;\n  }\n}\n\nconst dt = 16,\n      ut = 32,\n      pt = x(),\n      ft = Math.PI / 2,\n      bt = 16,\n      ht = 32;\nexport { dt as DidPointerMoveRecentlyFlag, ut as IsShiftEdgeOnScreenFlag, nt as addArrowTips, Ve as calculateBoundedPlaneTranslateRotate, Ye as calculateDiagonalResizeHandleScale, De as calculatePlaneHalfSize, Xe as calculateResizeHandlePadding, Qe as calculateScreenSpaceBasisLength2, rt as createArrowGeometry, st as createGridVisualElement, tt as createOutlineVisualElement, Ce as createPlane, it as createResizeManipulator, et as createRotateManipulator, qe as createRotatePlane, _e as createShiftManipulator, Be as createShiftPlane, xe as forceHorizontalOrVertical, gt as isAlwaysDrapedLayer, Ze as isDiagonalResizeHandle, Ie as normalToBases, at as planeToShape, bt as resizeNormal, ht as resizeOutlineOnly, ze as resizePlane, mt as shapeToPlane, We as updateResizeHandle, $e as updateRotateHeadingHandle, Je as updateRotateTiltHandle, He as updateShiftRestartHandle };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolUtils.js"],"names":["neverReached","e","t","rad2deg","s","deg2rad","i","isSome","r","isNone","o","castRenderScreenPointArray3","n","a","c","l","m","b","g","d","w","u","p","f","h","y","j","M","k","P","v","O","T","U","R","S","L","A","E","F","G","fromVectorsAndPoint","C","fromPositionAndNormal","I","create","x","angleAroundAxis","z","sv3d","D","sm4d","B","sq4d","V","Manipulator3D","q","calculateTranslateRotateFromBases","H","SMALL_ANGLE_DOT_THRESHOLD","N","RESIZE_HANDLE_EDGE_PADDING_FRAC","W","PLANE_MIN_BASIS_SCREEN_LEN2","$","INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION","J","SHIFT_RESTART_OFFSET_DISTANCE","K","SHIFT_RESTART_ARROW_TIP_COLOR","Q","SHIFT_RESTART_ARROW_CAP_COLOR","X","SHIFT_RESTART_TUBE_COLOR","Y","SHIFT_RESTART_OUTLINE_COLOR","Z","SHIFT_RESTART_CALLOUT_COLOR","_","SHIFT_RESTART_TIP_RADIUS","ee","ROTATE_HEADING_CALLOUT_COLOR","te","PLANE_OUTLINE_COLOR","se","PLANE_OUTLINE_WIDTH","ie","PLANE_BACKGROUND_COLOR","re","GRID_COLOR","oe","RESIZE_HANDLE_CORNER_INPUT_RADIUS","ne","RESIZE_HANDLE_EDGE_INPUT_RADIUS","ae","ROTATE_HEADING_TIP_LENGTH","ce","VERTICAL_DOT_THRESHOLD","le","SHIFT_RESTART_TUBE_RADIUS","me","SHIFT_RESTART_TIP_LENGTH","ge","SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER","de","SHIFT_RESTART_TIP_FOCUS_MULTIPLIER","ue","SHIFT_RESTART_ARROW_OUTLINE_WIDTH","pe","ROTATE_HEADING_OFFSET_DISTANCE","fe","ROTATE_HEADING_DISC_RADIUS","be","ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER","he","HANDLE_COLOR","we","DISPLAY_FOCUS_MULTIPLIER","ye","RESIZE_HANDLE_EDGE_WIDTH","je","SHIFT_RESTART_ARROW_LENGTH","Me","RESIZE_HANDLE_CORNER_WIDTH","ke","LineVisualElement","Pe","SlicePlaneVisualElement","ve","fromRender","Oe","Geometry","Te","Ue","ColorMaterial","Re","ImageMaterial","Se","NativeLineMaterial","Le","RibbonLineMaterial","Ae","Ee","Fe","Ge","getLogger","Ce","Ie","worldUpAtPosition","get","basis1","basis2","origin","plane","Math","abs","viewUp","viewForward","xe","ct","round","ft","ze","direction","Ze","Ye","Qe","De","min","width","height","computeRenderPixelSizeAt","Be","Ve","qe","He","Ke","edge","PI","basis","computeScreenPixelSizeAt","position","projectToRenderScreen","Ne","pt","modelTransform","renderLocation","state","ut","viewport","We","Xe","$e","Je","_e","nt","rt","tubeRadius","tipRadius","tipLength","tubeFocusMultiplier","tipFocusMultiplier","padding","bothEnds","flat","focusTipLength","addCap","color","cullFace","renderOccluded","transparent","writeDepth","createPolylineGeometry","view","renderObjects","normal","map","part","geometry","transform","material","stateMask","dt","focused","autoScaleRenderObjects","collisionType","type","paths","collisionPriority","radius","et","textureId","id","Uint32Array","size","data","exclusive","offset","tt","attached","writeDepthEnabled","st","backgroundColor","gridColor","gridWidth","it","bt","ht","worldSized","idHint","slice","length","ot","createExtrudedTriangle","thickness","createConeGeometry","push","cos","sin","createPathExtrusionGeometry","at","fromRenderCoords","worldBasisAtPosition","tilt","heading","lt","mt","toRenderCoords","error","spatialReference","wkid","gt","DidPointerMoveRecentlyFlag","IsShiftEdgeOnScreenFlag","addArrowTips","calculateBoundedPlaneTranslateRotate","calculateDiagonalResizeHandleScale","calculatePlaneHalfSize","calculateResizeHandlePadding","calculateScreenSpaceBasisLength2","createArrowGeometry","createGridVisualElement","createOutlineVisualElement","createPlane","createResizeManipulator","createRotateManipulator","createRotatePlane","createShiftManipulator","createShiftPlane","forceHorizontalOrVertical","isAlwaysDrapedLayer","isDiagonalResizeHandle","normalToBases","planeToShape","resizeNormal","resizeOutlineOnly","resizePlane","shapeToPlane","updateResizeHandle","updateRotateHeadingHandle","updateRotateTiltHandle","updateShiftRestartHandle"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../../../geometry.js\";import{neverReached as e}from\"../../../../../core/compilerUtils.js\";import t from\"../../../../../core/Logger.js\";import{rad2deg as s,deg2rad as i}from\"../../../../../core/mathUtils.js\";import{isSome as r,isNone as o}from\"../../../../../core/maybe.js\";import{castRenderScreenPointArray3 as n}from\"../../../../../core/screenUtils.js\";import{r as a,i as c,s as l,m,b as g,t as d,w as u}from\"../../../../../chunks/mat4.js\";import{c as p}from\"../../../../../chunks/mat4f64.js\";import{r as f}from\"../../../../../chunks/quat.js\";import{a as b,g as h,d as w,c as y,n as j,b as M,l as k,f as P,p as v,s as O}from\"../../../../../chunks/vec3.js\";import{a as T,c as U,f as R}from\"../../../../../chunks/vec3f64.js\";import{r as S,f as L,a as A,n as E,u as F,i as G}from\"../../../../../chunks/boundedPlane.js\";import{fromVectorsAndPoint as C,fromPositionAndNormal as I}from\"../../../../../geometry/support/plane.js\";import{create as x}from\"../../../../../geometry/support/ray.js\";import{angleAroundAxis as z}from\"../../../../../geometry/support/vector.js\";import{sv3d as D,sm4d as B,sq4d as V}from\"../../../../../geometry/support/vectorStacks.js\";import{Manipulator3D as q}from\"../../Manipulator3D.js\";import{calculateTranslateRotateFromBases as H}from\"../../manipulatorUtils.js\";import{SMALL_ANGLE_DOT_THRESHOLD as N,RESIZE_HANDLE_EDGE_PADDING_FRAC as W,PLANE_MIN_BASIS_SCREEN_LEN2 as $,INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION as J,SHIFT_RESTART_OFFSET_DISTANCE as K,SHIFT_RESTART_ARROW_TIP_COLOR as Q,SHIFT_RESTART_ARROW_CAP_COLOR as X,SHIFT_RESTART_TUBE_COLOR as Y,SHIFT_RESTART_OUTLINE_COLOR as Z,SHIFT_RESTART_CALLOUT_COLOR as _,SHIFT_RESTART_TIP_RADIUS as ee,ROTATE_HEADING_CALLOUT_COLOR as te,PLANE_OUTLINE_COLOR as se,PLANE_OUTLINE_WIDTH as ie,PLANE_BACKGROUND_COLOR as re,GRID_COLOR as oe,RESIZE_HANDLE_CORNER_INPUT_RADIUS as ne,RESIZE_HANDLE_EDGE_INPUT_RADIUS as ae,ROTATE_HEADING_TIP_LENGTH as ce,VERTICAL_DOT_THRESHOLD as le,SHIFT_RESTART_TUBE_RADIUS as me,SHIFT_RESTART_TIP_LENGTH as ge,SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER as de,SHIFT_RESTART_TIP_FOCUS_MULTIPLIER as ue,SHIFT_RESTART_ARROW_OUTLINE_WIDTH as pe,ROTATE_HEADING_OFFSET_DISTANCE as fe,ROTATE_HEADING_DISC_RADIUS as be,ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER as he,HANDLE_COLOR as we,DISPLAY_FOCUS_MULTIPLIER as ye,RESIZE_HANDLE_EDGE_WIDTH as je,SHIFT_RESTART_ARROW_LENGTH as Me,RESIZE_HANDLE_CORNER_WIDTH as ke}from\"./sliceToolConfig.js\";import{LineVisualElement as Pe}from\"../../visualElements/LineVisualElement.js\";import{SlicePlaneVisualElement as ve}from\"../../visualElements/SlicePlaneVisualElement.js\";import{fromRender as Oe}from\"../../../support/geometryUtils/ray.js\";import{Geometry as Te}from\"../../../webgl-engine/lib/Geometry.js\";import Ue from\"../../../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as Re}from\"../../../webgl-engine/materials/ColorMaterial.js\";import{ImageMaterial as Se}from\"../../../webgl-engine/materials/ImageMaterial.js\";import{NativeLineMaterial as Le}from\"../../../webgl-engine/materials/NativeLineMaterial.js\";import{RibbonLineMaterial as Ae}from\"../../../webgl-engine/materials/RibbonLineMaterial.js\";import Ee from\"../../../../../widgets/Slice/SlicePlane.js\";import Fe from\"../../../../../geometry/Point.js\";const Ge=t.getLogger(\"esri.views.3d.interactive.analysisTools.slice.sliceToolUtils\");function Ce(e,t,s,i,r,o,n,a){return Ie(t,n.worldUpAtPosition(e,D.get()),r,o,a.basis1,a.basis2),b(a.basis1,a.basis1,s),b(a.basis2,a.basis2,i),h(a.origin,e),C(a.basis2,a.basis1,a.origin,a.plane),a}function Ie(e,t,s,i,r,o){const n=w(e,t),a=D.get(),c=D.get();switch(0===i?Math.abs(n)>le?1:2:i){case 2:{const i=Math.abs(n)<=N?e:s.viewUp;y(a,i,t),h(c,t);break}case 1:y(a,s.viewUp,t),y(c,t,a);break;case 3:{const i=Math.abs(n)<=N?t:s.viewUp;y(a,i,e),y(c,e,a);break}}const l=y(D.get(),a,c);w(l,s.viewForward)>0&&b(c,c,-1),j(r,a),j(o,c)}function xe(e,t,s){const i=t.worldUpAtPosition(e.origin,D.get()),r=e.basis1,o=ct(e,i),n=Math.round(o/ft)*ft;return S(e,n-o,r,s)}function ze(e,t,s,i,r,o){const n=h(D.get(),r.origin);M(n,n,b(D.get(),r.basis1,e.direction[0]<0?1:-1)),M(n,n,b(D.get(),r.basis2,e.direction[1]<0?1:-1));const a=k(r.basis1),c=k(r.basis2),l=P(D.get(),s,n),m=P(D.get(),t,n);let g=0,d=0;if(Ze(e)){const t=Ye(r),s=Ye(o);g=a-.5*e.direction[0]*w(r.basis1,m)/a,d=c-.5*e.direction[1]*w(r.basis2,m)/c;const i=s/t;g*=i,d*=i}const u=g+.5*e.direction[0]*w(r.basis1,l)/a,p=d+.5*e.direction[1]*w(r.basis2,l)/c,f=b(D.get(),r.basis1,u/a),y=b(D.get(),r.basis2,p/c);(u<=0||Qe(o.origin,f,i)<=$)&&h(f,o.basis1),(p<=0||Qe(o.origin,y,i)<=$)&&h(y,o.basis2);const j=h(D.get(),n);return M(j,j,b(D.get(),f,e.direction[0]<0?-1:1)),M(j,j,b(D.get(),y,e.direction[1]<0?-1:1)),L(j,f,y,o)}function De(e,t){return J*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(e)}function Be(e,t,s,i){const r=y(D.get(),t,s);return y(r,r,t),I(e,r,i)}function Ve(e,t){return H(e.basis1,e.basis2,e.origin,t)}function qe(e,t,s,i){const r=t.worldUpAtPosition(e.origin,D.get()),o=D.get();switch(s){case 1:h(o,r);break;case 2:h(o,e.basis1)}return I(e.origin,o,i)}function He(e,t,s,i){const r=Ke(s,2),o=B.get();a(o,t,r.edge*Math.PI/2);const c=j(D.get(),r.basis);let l=b(D.get(),c,r.direction*i.computeScreenPixelSizeAt(r.position)*K);M(l,l,r.position);const m=i.projectToRenderScreen(l,n(D.get())),g=Ne(i,m);Oe(i,m,pt),j(pt.direction,pt.direction);const d=D.get();!g&&G(s,pt,d)&&(l=d),o[12]=0,o[13]=0,o[14]=0,e.modelTransform=o,e.renderLocation=T(l),g?e.state|=ut:e.state&=~ut}function Ne(e,t){const[s,i,r,o]=e.viewport,n=Math.min(r,o)/16;let a=!0;return t[0]<s+n?(t[0]=s+n,a=!1):t[0]>s+r-n&&(t[0]=s+r-n,a=!1),t[1]<i+n?(t[1]=i+n,a=!1):t[1]>i+o-n&&(t[1]=i+o-n,a=!1),a}function We(e,t,s,i){const r=k(i.basis1),o=k(i.basis2),n=Xe(i),g=Ye(i),d=O(D.get(),0,0,0);M(d,b(D.get(),i.basis1,t.direction[0]),b(D.get(),i.basis2,t.direction[1])),M(d,i.origin,d);let u=0,p=1;if(Ze(t))1===t.direction[0]&&-1===t.direction[1]?u=ft:1===t.direction[0]&&1===t.direction[1]?u=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(u=3*Math.PI/2),p=g;else{const e=0!==t.direction[0]?1:2;u=1===e?ft:0,p=(1===e?o:r)-n}const f=c(B.get());a(f,f,u),l(f,f,O(D.get(),p,p,p)),m(f,s,f),f[12]=0,f[13]=0,f[14]=0,e.modelTransform=f,e.renderLocation=d}function $e(e,t,s,i){const r=i.worldUpAtPosition(s.origin,D.get()),o=Ke(s,0),n=c(B.get());a(n,n,o.edge*Math.PI/2),g(n,n,-ct(s,r)),m(n,t,n),n[12]=0,n[13]=0,n[14]=0,e.modelTransform=n,e.renderLocation=o.position}function Je(e,t,s){const i=Ke(s,1),r=c(B.get());a(r,r,i.edge*Math.PI/2),g(r,r,ft),m(r,t,r),r[12]=0,r[13]=0,r[14]=0,e.modelTransform=r,e.renderLocation=i.position}function Ke(e,t){switch(t){case 0:return{basis:e.basis1,direction:1,position:M(D.get(),e.origin,e.basis1),edge:t};case 1:return{basis:e.basis2,direction:1,position:M(D.get(),e.origin,e.basis2),edge:t};case 2:return{basis:e.basis1,direction:-1,position:P(D.get(),e.origin,e.basis1),edge:t};case 3:return{basis:e.basis2,direction:-1,position:P(D.get(),e.origin,e.basis2),edge:t}}}function Qe(e,t,s){const i=s.projectToRenderScreen(M(D.get(),e,t),n(D.get())),r=s.projectToRenderScreen(P(D.get(),e,t),n(D.get()));return v(P(i,i,r))}function Xe(e){const t=k(e.basis1),s=k(e.basis2);return W*Math.min(t,s)}function Ye(e){return Xe(e)}function Ze(e){return 0!==e.direction[0]&&0!==e.direction[1]}function _e(e,t=1){const s=0===t?K:0,i=[R(s,0,-Me/2),R(s,0,Me/2)],r=nt(i,!0),o=(e,t)=>rt(i,i,{tubeRadius:me,tipRadius:ee,tipLength:ge,tubeFocusMultiplier:de,tipFocusMultiplier:ue,padding:e,bothEnds:!0,flat:null,focusTipLength:!0,addCap:t}),n=o(0,!1),a=o(pe,!0),c=new Re({color:Q,cullFace:2,renderOccluded:16}),l=new Re({color:X,cullFace:2,renderOccluded:16}),m=new Re({color:Y,cullFace:2,renderOccluded:16}),g=new Re({color:Z,transparent:!0,writeDepth:!1,cullFace:1,renderOccluded:2}),d=Ue.createPolylineGeometry([[s,0,0],[s-K,0,0]]),u=Ue.createPolylineGeometry([[s,0,0],[s-K,0,0]]),p=new Le({color:_,renderOccluded:4});return new q({view:e,renderObjects:[...n.normal.map((({part:e,geometry:t,transform:s})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:m,transform:s,stateMask:1|dt}))),...a.normal.map((({geometry:e,transform:t})=>({geometry:e,material:g,transform:t,stateMask:1|dt}))),{geometry:d,material:p,stateMask:1|dt|ut},...n.focused.map((({part:e,geometry:t,transform:s})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:m,transform:s,stateMask:2|dt}))),...a.focused.map((({geometry:e,transform:t})=>({geometry:e,material:g,transform:t,stateMask:2|dt}))),{geometry:u,material:p,stateMask:2|dt|ut}],autoScaleRenderObjects:!1,collisionType:{type:\"line\",paths:[r]},collisionPriority:1,radius:ee,state:dt})}function et(e,t){const s=new Se({transparent:!0,writeDepth:!1,textureId:t.id,renderOccluded:16}),i=fe,r=be,o=r*he,n=e=>{const t=new Uint32Array([0,1,2,2,3,0]);return new Te([[\"position\",{size:3,data:[i-e,-e,0,i+e,-e,0,i+e,e,0,i-e,e,0],exclusive:!0}],[\"uv0\",{size:2,data:[0,0,1,0,1,1,0,1]}]],[[\"position\",t],[\"uv0\",t]])},a=Ue.createPolylineGeometry([[0,0,0],[i-r,0,0]]),c=Ue.createPolylineGeometry([[0,0,0],[i-o,0,0]]),l=new Le({color:te,renderOccluded:4}),m=[{geometry:n(r),material:s,stateMask:1|dt},{geometry:a,material:l,stateMask:1|dt},{geometry:n(o),material:s,stateMask:2|dt},{geometry:c,material:l,stateMask:2|dt}];return new q({view:e,renderObjects:m,autoScaleRenderObjects:!1,collisionType:{type:\"disc\",direction:[0,0,1],offset:[i,0,0]},collisionPriority:1,radius:r/2,state:dt})}function tt(e){return new Pe({view:e,attached:!0,color:se,width:ie,writeDepthEnabled:!1,renderOccluded:4,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]]})}function st(e){return new ve({view:e,attached:!0,backgroundColor:[...re],gridColor:oe,gridWidth:4,renderOccluded:4})}function it(e,t){const s=Ze(t),i=s?[R(1,0,0),R(0,0,0),R(0,1,0)]:[R(1,0,0),R(-1,0,0)],r=Ue.createPolylineGeometry(i),o=[...we,1],n=e=>new Ae({color:o,width:e,renderOccluded:4}),a=()=>new Le({color:o,renderOccluded:4}),c=s?ke:je,l=c*ye,m=je,g=e=>e>1?n(e):a(),d=[{geometry:r,material:g(c),stateMask:1|bt},{geometry:r,material:g(l),stateMask:2|bt},{geometry:r,material:g(m),stateMask:ht}],u=new q({view:e,renderObjects:d,collisionType:{type:\"line\",paths:[i]},autoScaleRenderObjects:!1,worldSized:!0,radius:s?ne:ae,idHint:s?1:2});return u.state=bt,u}function rt(e,t,s){const i=i=>{const o=(i?t:e).slice(0),n=P(D.get(),o[0],o[1]);j(n,n);const a=P(D.get(),o[o.length-1],o[o.length-2]);if(j(a,a),s.padding>0){const e=b(U(),a,-s.padding);if(o[o.length-1]=M(e,e,o[o.length-1]),s.bothEnds){const e=b(U(),n,-s.padding);o[0]=M(e,e,o[0])}}const g=i?s.tipFocusMultiplier:1,h=s.tipLength*(s.focusTipLength?g:1),w=s.tipRadius*g,y=c(B.get());if(s.padding>0){const e=h/4,t=O(D.get(),0,e,0),i=1+s.padding/e;d(y,y,t),l(y,y,O(D.get(),i,i,i)),d(y,y,b(t,t,-1/i))}const k=c(p()),v=R(0,1,0),T=u(p(),f(V.get(),v,a));T[12]=o[o.length-1][0],T[13]=o[o.length-1][1],T[14]=o[o.length-1][2],m(T,T,y);const S=[{part:\"tube\",geometry:ot(s.tubeRadius*(i?s.tubeFocusMultiplier:1)+s.padding,s.flat,o),transform:k}];let L,A;if(r(s.flat)?L=Ue.createExtrudedTriangle(h,w,w,s.flat.thickness):(L=Ue.createConeGeometry(h,w,24,!1,!1,!0),A=Ue.createConeGeometry(h,w,24,!1,!0,!1)),S.push({part:\"tip\",geometry:L,transform:T}),A&&S.push({part:\"cap\",geometry:A,transform:T}),s.bothEnds){const e=u(p(),f(V.get(),v,n));e[12]=o[0][0],e[13]=o[0][1],e[14]=o[0][2],m(e,e,y),S.push({part:\"tip\",geometry:L,transform:e}),A&&S.push({part:\"cap\",geometry:A,transform:e})}return S};return{normal:i(!1),focused:i(!0)}}function ot(e,t,s){const i=[];if(r(t))i.push([e,t.thickness/2],[-e,t.thickness/2],[-e,-t.thickness/2],[e,-t.thickness/2]);else{const t=12;for(let s=0;s<t;s++){const r=s/t*2*Math.PI;i.push([Math.cos(r)*e,Math.sin(r)*e])}}return Ue.createPathExtrusionGeometry(i,s,[],[],!1)}function nt(e,t){const s=P(U(),e[e.length-1],e[e.length-2]);if(j(s,s),b(s,s,ce),M(s,s,e[e.length-1]),t){const t=P(U(),e[0],e[1]);return j(t,t),b(t,t,ce),M(t,t,e[0]),[t,...e,s]}return[...e,s]}function at(e,t,i,n=new Ee){if(o(e))return null;const a=r(n.position)?n.position:new Fe;t.fromRenderCoords(e.origin,a,i),n.position=a;const c=t.worldUpAtPosition(e.origin,D.get()),l=t.worldBasisAtPosition(e.origin,1,D.get());return n.width=2*k(e.basis1),n.height=2*k(e.basis2),n.tilt=s(ct(e,c)),n.heading=s(lt(e,c,l)),n}function ct(e,t){return z(t,e.basis2,e.basis1)+ft}function lt(e,t,s){return z(e.basis1,s,t)-ft}function mt(e,t,s=A()){return o(e)||o(e.position)?null:t.toRenderCoords(e.position,s.origin)?(t.worldBasisAtPosition(s.origin,0,s.basis1),t.worldBasisAtPosition(s.origin,1,s.basis2),C(s.basis2,s.basis1,s.origin,s.plane),S(s,-i(e.heading),E(s),s),S(s,i(e.tilt),s.basis1,s),b(s.basis1,s.basis1,e.width/2),b(s.basis2,s.basis2,e.height/2),F(s),s):(Ge.error(`Failed to project slice plane position, projection from ${e.position.spatialReference.wkid} is not supported`),null)}function gt(t){switch(t.type){case\"building-scene\":case\"csv\":case\"direct-line-measurement\":case\"area-measurement\":case\"feature\":case\"geo-rss\":case\"geojson\":case\"graphics\":case\"group\":case\"integrated-mesh\":case\"kml\":case\"line-of-sight\":case\"map-notes\":case\"ogc-feature\":case\"point-cloud\":case\"route\":case\"slice\":case\"scene\":case\"stream\":case\"voxel\":case\"subtype-group\":case\"unknown\":case\"unsupported\":case\"wfs\":case null:return!1;case\"base-dynamic\":case\"base-elevation\":case\"base-tile\":case\"bing-maps\":case\"elevation\":case\"imagery\":case\"imagery-tile\":case\"map-image\":case\"open-street-map\":case\"tile\":case\"vector-tile\":case\"wcs\":case\"web-tile\":case\"wms\":case\"wmts\":return!0;default:return e(t.type),!1}}const dt=16,ut=32,pt=x(),ft=Math.PI/2,bt=16,ht=32;export{dt as DidPointerMoveRecentlyFlag,ut as IsShiftEdgeOnScreenFlag,nt as addArrowTips,Ve as calculateBoundedPlaneTranslateRotate,Ye as calculateDiagonalResizeHandleScale,De as calculatePlaneHalfSize,Xe as calculateResizeHandlePadding,Qe as calculateScreenSpaceBasisLength2,rt as createArrowGeometry,st as createGridVisualElement,tt as createOutlineVisualElement,Ce as createPlane,it as createResizeManipulator,et as createRotateManipulator,qe as createRotatePlane,_e as createShiftManipulator,Be as createShiftPlane,xe as forceHorizontalOrVertical,gt as isAlwaysDrapedLayer,Ze as isDiagonalResizeHandle,Ie as normalToBases,at as planeToShape,bt as resizeNormal,ht as resizeOutlineOnly,ze as resizePlane,mt as shapeToPlane,We as updateResizeHandle,$e as updateRotateHeadingHandle,Je as updateRotateTiltHandle,He as updateShiftRestartHandle};\n"]},"metadata":{},"sourceType":"module"}