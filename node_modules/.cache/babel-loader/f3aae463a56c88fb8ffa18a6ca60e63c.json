{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { OverlayFramebufferObject as e } from \"./OverlayFramebufferObject.js\";\n\nclass r {\n  constructor(r) {\n    this.renderTargets = null;\n\n    const s = (s, t, o = !0) => ({\n      type: t,\n      fbo: new e(r, o),\n      renderPass: s,\n      valid: !1,\n      lastUsed: 1 / 0\n    });\n\n    this.renderTargets = [s(0, 0), s(0, 1), s(5, 2, !1), s(3, 3), s(0, 4)];\n  }\n\n  getTarget(e) {\n    return this.renderTargets[e].fbo;\n  }\n\n  dispose() {\n    for (const e of this.renderTargets) e.fbo.dispose();\n  }\n\n  disposeRenderTargetMemory() {\n    for (const e of this.renderTargets) e.fbo.disposeRenderTargetMemory();\n  }\n\n  validateUsageForTarget(e, r, t) {\n    if (e) r.lastUsed = t;else if (t - r.lastUsed > s) r.fbo.disposeRenderTargetMemory(), r.lastUsed = 1 / 0;else if (r.lastUsed < 1 / 0) return !0;\n    return !1;\n  }\n\n  get gpuMemoryUsage() {\n    return this.renderTargets.reduce((e, r) => e + r.fbo.gpuMemoryUsage, 0);\n  }\n\n}\n\nconst s = 1e3;\nexport { r as OverlayRenderTarget };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTarget.js"],"names":["OverlayFramebufferObject","e","r","constructor","renderTargets","s","t","o","type","fbo","renderPass","valid","lastUsed","getTarget","dispose","disposeRenderTargetMemory","validateUsageForTarget","gpuMemoryUsage","reduce","OverlayRenderTarget"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,wBAAwB,IAAIC,CAAnC,QAAyC,+BAAzC;;AAAyE,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACD,CAAD,EAAG;AAAC,SAAKE,aAAL,GAAmB,IAAnB;;AAAwB,UAAMC,CAAC,GAAC,CAACA,CAAD,EAAGC,CAAH,EAAKC,CAAC,GAAC,CAAC,CAAR,MAAa;AAACC,MAAAA,IAAI,EAACF,CAAN;AAAQG,MAAAA,GAAG,EAAC,IAAIR,CAAJ,CAAMC,CAAN,EAAQK,CAAR,CAAZ;AAAuBG,MAAAA,UAAU,EAACL,CAAlC;AAAoCM,MAAAA,KAAK,EAAC,CAAC,CAA3C;AAA6CC,MAAAA,QAAQ,EAAC,IAAE;AAAxD,KAAb,CAAR;;AAAiF,SAAKR,aAAL,GAAmB,CAACC,CAAC,CAAC,CAAD,EAAG,CAAH,CAAF,EAAQA,CAAC,CAAC,CAAD,EAAG,CAAH,CAAT,EAAeA,CAAC,CAAC,CAAD,EAAG,CAAH,EAAK,CAAC,CAAN,CAAhB,EAAyBA,CAAC,CAAC,CAAD,EAAG,CAAH,CAA1B,EAAgCA,CAAC,CAAC,CAAD,EAAG,CAAH,CAAjC,CAAnB;AAA2D;;AAAAQ,EAAAA,SAAS,CAACZ,CAAD,EAAG;AAAC,WAAO,KAAKG,aAAL,CAAmBH,CAAnB,EAAsBQ,GAA7B;AAAiC;;AAAAK,EAAAA,OAAO,GAAE;AAAC,SAAI,MAAMb,CAAV,IAAe,KAAKG,aAApB,EAAkCH,CAAC,CAACQ,GAAF,CAAMK,OAAN;AAAgB;;AAAAC,EAAAA,yBAAyB,GAAE;AAAC,SAAI,MAAMd,CAAV,IAAe,KAAKG,aAApB,EAAkCH,CAAC,CAACQ,GAAF,CAAMM,yBAAN;AAAkC;;AAAAC,EAAAA,sBAAsB,CAACf,CAAD,EAAGC,CAAH,EAAKI,CAAL,EAAO;AAAC,QAAGL,CAAH,EAAKC,CAAC,CAACU,QAAF,GAAWN,CAAX,CAAL,KAAuB,IAAGA,CAAC,GAACJ,CAAC,CAACU,QAAJ,GAAaP,CAAhB,EAAkBH,CAAC,CAACO,GAAF,CAAMM,yBAAN,IAAkCb,CAAC,CAACU,QAAF,GAAW,IAAE,CAA/C,CAAlB,KAAwE,IAAGV,CAAC,CAACU,QAAF,GAAW,IAAE,CAAhB,EAAkB,OAAM,CAAC,CAAP;AAAS,WAAM,CAAC,CAAP;AAAS;;AAAkB,MAAdK,cAAc,GAAE;AAAC,WAAO,KAAKb,aAAL,CAAmBc,MAAnB,CAA2B,CAACjB,CAAD,EAAGC,CAAH,KAAOD,CAAC,GAACC,CAAC,CAACO,GAAF,CAAMQ,cAA1C,EAA0D,CAA1D,CAAP;AAAoE;;AAAxnB;;AAAynB,MAAMZ,CAAC,GAAC,GAAR;AAAY,SAAOH,CAAC,IAAIiB,mBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{OverlayFramebufferObject as e}from\"./OverlayFramebufferObject.js\";class r{constructor(r){this.renderTargets=null;const s=(s,t,o=!0)=>({type:t,fbo:new e(r,o),renderPass:s,valid:!1,lastUsed:1/0});this.renderTargets=[s(0,0),s(0,1),s(5,2,!1),s(3,3),s(0,4)]}getTarget(e){return this.renderTargets[e].fbo}dispose(){for(const e of this.renderTargets)e.fbo.dispose()}disposeRenderTargetMemory(){for(const e of this.renderTargets)e.fbo.disposeRenderTargetMemory()}validateUsageForTarget(e,r,t){if(e)r.lastUsed=t;else if(t-r.lastUsed>s)r.fbo.disposeRenderTargetMemory(),r.lastUsed=1/0;else if(r.lastUsed<1/0)return!0;return!1}get gpuMemoryUsage(){return this.renderTargets.reduce(((e,r)=>e+r.fbo.gpuMemoryUsage),0)}}const s=1e3;export{r as OverlayRenderTarget};\n"]},"metadata":{},"sourceType":"module"}