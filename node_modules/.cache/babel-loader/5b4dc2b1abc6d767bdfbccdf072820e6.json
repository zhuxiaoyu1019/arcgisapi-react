{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { px2pt as e } from \"../../core/screenUtils.js\";\nimport { getSize as r, getColor as t, getOpacity as n, getRotationAngle as i } from \"../../renderers/visualVariables/support/visualVariableUtils.js\";\nconst o = \"simple-marker\",\n      a = \"picture-marker\",\n      u = \"simple-line\",\n      l = \"simple-fill\",\n      s = \"shield-label-symbol\",\n      y = \"text\";\n\nfunction f(f, p) {\n  const {\n    graphic: c,\n    renderer: m,\n    symbol: g\n  } = p,\n        d = g.type;\n  if (d === y || d === s || !(\"visualVariables\" in m) || !m.visualVariables) return;\n  const b = m.getVisualVariablesForType(\"size\"),\n        h = m.getVisualVariablesForType(\"color\"),\n        w = m.getVisualVariablesForType(\"opacity\"),\n        V = m.getVisualVariablesForType(\"rotation\"),\n        T = b && b[0],\n        v = h && h[0],\n        G = w && w[0],\n        k = V && V[0];\n\n  if (T) {\n    const t = d === o ? g.style : null,\n          n = r(T, c, {\n      shape: t\n    });\n    null != n && (d === o ? f.size = e(n) : d === a ? (f.width = e(n), f.height = e(n)) : d === u ? f.width = e(n) : f.outline && (f.outline.width = e(n)));\n  }\n\n  if (v) {\n    const e = t(v, c);\n    (e && d === o || d === u || d === l) && (f.color = e ? e.toJSON() : void 0);\n  }\n\n  if (G) {\n    const e = n(G, c);\n    null != e && f.color && (f.color[3] = Math.round(255 * e));\n  }\n\n  k && (f.angle = -i(m, c));\n}\n\nfunction p() {\n  return {\n    layerDefinition: {\n      name: \"multipointLayer\",\n      geometryType: \"esriGeometryMultipoint\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryMultipoint\",\n      features: []\n    }\n  };\n}\n\nfunction c() {\n  return {\n    layerDefinition: {\n      name: \"polygonLayer\",\n      geometryType: \"esriGeometryPolygon\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryPolygon\",\n      features: []\n    }\n  };\n}\n\nfunction m() {\n  return {\n    layerDefinition: {\n      name: \"pointLayer\",\n      geometryType: \"esriGeometryPoint\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryPoint\",\n      features: []\n    }\n  };\n}\n\nfunction g() {\n  return {\n    layerDefinition: {\n      name: \"polylineLayer\",\n      geometryType: \"esriGeometryPolyline\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryPolyline\",\n      features: []\n    }\n  };\n}\n\nfunction d(e, r = 15) {\n  const t = e.canvas.width,\n        n = e.canvas.height,\n        i = e.getImageData(0, 0, t, n).data;\n  let o, a, u, l, s, y;\n\n  e: for (a = n; a--;) for (o = t; o--;) if (i[4 * (t * a + o) + 3] > r) {\n    y = a;\n    break e;\n  }\n\n  if (!y) return null;\n\n  e: for (o = t; o--;) for (a = y + 1; a--;) if (i[4 * (t * a + o) + 3] > r) {\n    s = o;\n    break e;\n  }\n\n  e: for (o = 0; o <= s; ++o) for (a = y + 1; a--;) if (i[4 * (t * a + o) + 3] > r) {\n    u = o;\n    break e;\n  }\n\n  e: for (a = 0; a <= y; ++a) for (o = u; o <= s; ++o) if (i[4 * (t * a + o) + 3] > r) {\n    l = a;\n    break e;\n  }\n\n  return {\n    x: u,\n    y: l,\n    width: s - u,\n    height: y - l\n  };\n}\n\nfunction b(e, r) {\n  const t = e.allLayerViews.items;\n  if (r === e.scale) return t.filter(e => !e.suspended);\n  const n = new Array();\n\n  for (const i of t) k(i.parent) && !n.includes(i.parent) || !i.visible || r && \"isVisibleAtScale\" in i && !i.isVisibleAtScale(r) || n.push(i);\n\n  return n;\n}\n\nfunction h(e) {\n  return e && \"bing-maps\" === e.type;\n}\n\nfunction w(e) {\n  return e && \"csv\" === e.type;\n}\n\nfunction V(e) {\n  return e && \"feature\" === e.type;\n}\n\nfunction T(e) {\n  return e && \"geojson\" === e.type;\n}\n\nfunction v(e) {\n  return e && \"graphics\" === e.type;\n}\n\nfunction G(e) {\n  return e && \"group\" === e.type;\n}\n\nfunction k(e) {\n  return e && \"esri.views.2d.layers.GroupLayerView2D\" === e.declaredClass;\n}\n\nfunction S(e) {\n  return e && \"imagery\" === e.type;\n}\n\nfunction D(e) {\n  return e && \"kml\" === e.type;\n}\n\nfunction L(e) {\n  return e && \"map-image\" === e.type;\n}\n\nfunction P(e) {\n  return e && \"map-notes\" === e.type;\n}\n\nfunction I(e) {\n  return e && \"open-street-map\" === e.type;\n}\n\nfunction F(e) {\n  return e && \"stream\" === e.type;\n}\n\nfunction j(e) {\n  return e && \"tile\" === e.type;\n}\n\nfunction x(e) {\n  return e && \"vector-tile\" === e.type;\n}\n\nfunction A(e) {\n  return e && \"web-tile\" === e.type;\n}\n\nfunction M(e) {\n  return e && \"wms\" === e.type;\n}\n\nfunction z(e) {\n  return e && \"wmts\" === e.type;\n}\n\nexport { f as applyVisualVariables, p as createMultipointLayer, m as createPointLayer, c as createPolygonLayer, g as createPolylineLayer, d as getContextBoundingBox, b as getVisibleLayerViews, h as isBingMapsLayer, w as isCSVLayer, V as isFeatureLayer, T as isGeoJSONLayer, v as isGraphicsLayer, G as isGroupLayer, S as isImageryLayer, D as isKMLLayer, L as isMapImageLayer, P as isMapNotesLayer, I as isOpenStreetMapLayer, F as isStreamLayer, j as isTileLayer, x as isVectorTileLayer, M as isWMSLayer, z as isWMTSLayer, A as isWebTileLayer };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/rest/support/printTaskUtils.js"],"names":["px2pt","e","getSize","r","getColor","t","getOpacity","n","getRotationAngle","i","o","a","u","l","s","y","f","p","graphic","c","renderer","m","symbol","g","d","type","visualVariables","b","getVisualVariablesForType","h","w","V","T","v","G","k","style","shape","size","width","height","outline","color","toJSON","Math","round","angle","layerDefinition","name","geometryType","drawingInfo","featureSet","features","canvas","getImageData","data","x","allLayerViews","items","scale","filter","suspended","Array","parent","includes","visible","isVisibleAtScale","push","declaredClass","S","D","L","P","I","F","j","A","M","z","applyVisualVariables","createMultipointLayer","createPointLayer","createPolygonLayer","createPolylineLayer","getContextBoundingBox","getVisibleLayerViews","isBingMapsLayer","isCSVLayer","isFeatureLayer","isGeoJSONLayer","isGraphicsLayer","isGroupLayer","isImageryLayer","isKMLLayer","isMapImageLayer","isMapNotesLayer","isOpenStreetMapLayer","isStreamLayer","isTileLayer","isVectorTileLayer","isWMSLayer","isWMTSLayer","isWebTileLayer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{px2pt as e}from\"../../core/screenUtils.js\";import{getSize as r,getColor as t,getOpacity as n,getRotationAngle as i}from\"../../renderers/visualVariables/support/visualVariableUtils.js\";const o=\"simple-marker\",a=\"picture-marker\",u=\"simple-line\",l=\"simple-fill\",s=\"shield-label-symbol\",y=\"text\";function f(f,p){const{graphic:c,renderer:m,symbol:g}=p,d=g.type;if(d===y||d===s||!(\"visualVariables\"in m)||!m.visualVariables)return;const b=m.getVisualVariablesForType(\"size\"),h=m.getVisualVariablesForType(\"color\"),w=m.getVisualVariablesForType(\"opacity\"),V=m.getVisualVariablesForType(\"rotation\"),T=b&&b[0],v=h&&h[0],G=w&&w[0],k=V&&V[0];if(T){const t=d===o?g.style:null,n=r(T,c,{shape:t});null!=n&&(d===o?f.size=e(n):d===a?(f.width=e(n),f.height=e(n)):d===u?f.width=e(n):f.outline&&(f.outline.width=e(n)))}if(v){const e=t(v,c);(e&&d===o||d===u||d===l)&&(f.color=e?e.toJSON():void 0)}if(G){const e=n(G,c);null!=e&&f.color&&(f.color[3]=Math.round(255*e))}k&&(f.angle=-i(m,c))}function p(){return{layerDefinition:{name:\"multipointLayer\",geometryType:\"esriGeometryMultipoint\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryMultipoint\",features:[]}}}function c(){return{layerDefinition:{name:\"polygonLayer\",geometryType:\"esriGeometryPolygon\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryPolygon\",features:[]}}}function m(){return{layerDefinition:{name:\"pointLayer\",geometryType:\"esriGeometryPoint\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryPoint\",features:[]}}}function g(){return{layerDefinition:{name:\"polylineLayer\",geometryType:\"esriGeometryPolyline\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryPolyline\",features:[]}}}function d(e,r=15){const t=e.canvas.width,n=e.canvas.height,i=e.getImageData(0,0,t,n).data;let o,a,u,l,s,y;e:for(a=n;a--;)for(o=t;o--;)if(i[4*(t*a+o)+3]>r){y=a;break e}if(!y)return null;e:for(o=t;o--;)for(a=y+1;a--;)if(i[4*(t*a+o)+3]>r){s=o;break e}e:for(o=0;o<=s;++o)for(a=y+1;a--;)if(i[4*(t*a+o)+3]>r){u=o;break e}e:for(a=0;a<=y;++a)for(o=u;o<=s;++o)if(i[4*(t*a+o)+3]>r){l=a;break e}return{x:u,y:l,width:s-u,height:y-l}}function b(e,r){const t=e.allLayerViews.items;if(r===e.scale)return t.filter((e=>!e.suspended));const n=new Array;for(const i of t)k(i.parent)&&!n.includes(i.parent)||!i.visible||r&&\"isVisibleAtScale\"in i&&!i.isVisibleAtScale(r)||n.push(i);return n}function h(e){return e&&\"bing-maps\"===e.type}function w(e){return e&&\"csv\"===e.type}function V(e){return e&&\"feature\"===e.type}function T(e){return e&&\"geojson\"===e.type}function v(e){return e&&\"graphics\"===e.type}function G(e){return e&&\"group\"===e.type}function k(e){return e&&\"esri.views.2d.layers.GroupLayerView2D\"===e.declaredClass}function S(e){return e&&\"imagery\"===e.type}function D(e){return e&&\"kml\"===e.type}function L(e){return e&&\"map-image\"===e.type}function P(e){return e&&\"map-notes\"===e.type}function I(e){return e&&\"open-street-map\"===e.type}function F(e){return e&&\"stream\"===e.type}function j(e){return e&&\"tile\"===e.type}function x(e){return e&&\"vector-tile\"===e.type}function A(e){return e&&\"web-tile\"===e.type}function M(e){return e&&\"wms\"===e.type}function z(e){return e&&\"wmts\"===e.type}export{f as applyVisualVariables,p as createMultipointLayer,m as createPointLayer,c as createPolygonLayer,g as createPolylineLayer,d as getContextBoundingBox,b as getVisibleLayerViews,h as isBingMapsLayer,w as isCSVLayer,V as isFeatureLayer,T as isGeoJSONLayer,v as isGraphicsLayer,G as isGroupLayer,S as isImageryLayer,D as isKMLLayer,L as isMapImageLayer,P as isMapNotesLayer,I as isOpenStreetMapLayer,F as isStreamLayer,j as isTileLayer,x as isVectorTileLayer,M as isWMSLayer,z as isWMTSLayer,A as isWebTileLayer};\n"]},"metadata":{},"sourceType":"module"}