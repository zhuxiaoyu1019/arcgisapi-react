{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { l as e, f as t, b as r, a as n } from \"../../../../chunks/vec3.js\";\nimport { c as s } from \"../../../../chunks/vec3f64.js\";\nimport { surfaceElevationBelowRenderLocation as o } from \"../intersectionUtils.js\";\n\nfunction i(s, i, a = 0) {\n  const f = s.state.constraints;\n  if (!f.collision.enabled) return !1;\n  const u = o(s, i.eye),\n        d = s.renderCoordsHelper.getAltitude(i.eye),\n        y = u + f.collision.elevationMargin;\n  if (d >= y) return !1;\n  const m = e(i.eye);\n  if (t(c, i.center, i.eye), i.eye = s.renderCoordsHelper.setAltitude(l, y, i.eye), 1 === a) i.center = r(c, i.eye, c);else if (2 === a) {\n    const e = (m - d + y) / m;\n    i.center = n(c, i.center, e);\n  }\n  return !0;\n}\n\nconst c = s(),\n      l = s();\nexport { i as applySurfaceCollisionConstraint };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/camera/constraintUtils/surfaceCollision.js"],"names":["l","e","f","t","b","r","a","n","c","s","surfaceElevationBelowRenderLocation","o","i","state","constraints","collision","enabled","u","eye","d","renderCoordsHelper","getAltitude","y","elevationMargin","m","center","setAltitude","applySurfaceCollisionConstraint"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,EAAcC,CAAC,IAAIC,CAAnB,EAAqBC,CAAC,IAAIC,CAA1B,EAA4BC,CAAC,IAAIC,CAAjC,QAAuC,4BAAvC;AAAoE,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,mCAAmC,IAAIC,CAA9C,QAAoD,yBAApD;;AAA8E,SAASC,CAAT,CAAWH,CAAX,EAAaG,CAAb,EAAeN,CAAC,GAAC,CAAjB,EAAmB;AAAC,QAAMJ,CAAC,GAACO,CAAC,CAACI,KAAF,CAAQC,WAAhB;AAA4B,MAAG,CAACZ,CAAC,CAACa,SAAF,CAAYC,OAAhB,EAAwB,OAAM,CAAC,CAAP;AAAS,QAAMC,CAAC,GAACN,CAAC,CAACF,CAAD,EAAGG,CAAC,CAACM,GAAL,CAAT;AAAA,QAAmBC,CAAC,GAACV,CAAC,CAACW,kBAAF,CAAqBC,WAArB,CAAiCT,CAAC,CAACM,GAAnC,CAArB;AAAA,QAA6DI,CAAC,GAACL,CAAC,GAACf,CAAC,CAACa,SAAF,CAAYQ,eAA7E;AAA6F,MAAGJ,CAAC,IAAEG,CAAN,EAAQ,OAAM,CAAC,CAAP;AAAS,QAAME,CAAC,GAACvB,CAAC,CAACW,CAAC,CAACM,GAAH,CAAT;AAAiB,MAAGf,CAAC,CAACK,CAAD,EAAGI,CAAC,CAACa,MAAL,EAAYb,CAAC,CAACM,GAAd,CAAD,EAAoBN,CAAC,CAACM,GAAF,GAAMT,CAAC,CAACW,kBAAF,CAAqBM,WAArB,CAAiC1B,CAAjC,EAAmCsB,CAAnC,EAAqCV,CAAC,CAACM,GAAvC,CAA1B,EAAsE,MAAIZ,CAA7E,EAA+EM,CAAC,CAACa,MAAF,GAASpB,CAAC,CAACG,CAAD,EAAGI,CAAC,CAACM,GAAL,EAASV,CAAT,CAAV,CAA/E,KAA0G,IAAG,MAAIF,CAAP,EAAS;AAAC,UAAML,CAAC,GAAC,CAACuB,CAAC,GAACL,CAAF,GAAIG,CAAL,IAAQE,CAAhB;AAAkBZ,IAAAA,CAAC,CAACa,MAAF,GAASlB,CAAC,CAACC,CAAD,EAAGI,CAAC,CAACa,MAAL,EAAYxB,CAAZ,CAAV;AAAyB;AAAA,SAAM,CAAC,CAAP;AAAS;;AAAA,MAAMO,CAAC,GAACC,CAAC,EAAT;AAAA,MAAYT,CAAC,GAACS,CAAC,EAAf;AAAkB,SAAOG,CAAC,IAAIe,+BAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{l as e,f as t,b as r,a as n}from\"../../../../chunks/vec3.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";import{surfaceElevationBelowRenderLocation as o}from\"../intersectionUtils.js\";function i(s,i,a=0){const f=s.state.constraints;if(!f.collision.enabled)return!1;const u=o(s,i.eye),d=s.renderCoordsHelper.getAltitude(i.eye),y=u+f.collision.elevationMargin;if(d>=y)return!1;const m=e(i.eye);if(t(c,i.center,i.eye),i.eye=s.renderCoordsHelper.setAltitude(l,y,i.eye),1===a)i.center=r(c,i.eye,c);else if(2===a){const e=(m-d+y)/m;i.center=n(c,i.center,e)}return!0}const c=s(),l=s();export{i as applySurfaceCollisionConstraint};\n"]},"metadata":{},"sourceType":"module"}