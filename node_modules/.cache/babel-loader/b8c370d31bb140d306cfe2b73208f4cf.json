{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { GamepadKeyboardController as e } from \"../../state/controllers/GamepadKeyboardController.js\";\nimport { InputHandler as t } from \"../../../input/InputHandler.js\";\n\nclass r extends t {\n  constructor(e, t) {\n    super(!0), this.view = e, this.disableMovements = {\n      pan: !0,\n      zoom: !1,\n      ascend: !0,\n      rotate: !1,\n      mode: 2\n    }, this.keyToNumber = {\n      [t.left]: 0,\n      [t.right]: 1,\n      [t.forward]: 2,\n      [t.backward]: 3,\n      [t.up]: 4,\n      [t.down]: 5,\n      [t.headingLeft]: 6,\n      [t.headingRight]: 7,\n      [t.tiltUp]: 8,\n      [t.tiltDown]: 9,\n      [t.zoomIn]: 10,\n      [t.zoomOut]: 11\n    }, this.registerIncoming(\"key-down\", null, e => this.handleKeyDown(e)), this.registerIncoming(\"key-up\", null, e => this.handleKeyUp(e)), this.registerIncoming(\"blur\", null, () => this.handleBlur());\n  }\n\n  handleKeyDown(t) {\n    if (t.data.native.ctrlKey || t.data.native.metaKey) return;\n    const r = this.keyToNumber[t.data.key];\n    null != r && (this.cameraControllerKeyboard && this.cameraControllerKeyboard.active || (this.cameraControllerKeyboard = new e({\n      view: this.view,\n      disableMovements: this.disableMovements\n    }), this.view.state.switchCameraController(this.cameraControllerKeyboard)), this.cameraControllerKeyboard.active && (this.cameraControllerKeyboard.activateDirection(r), t.stopPropagation()));\n  }\n\n  handleBlur() {\n    this.cameraControllerKeyboard && this.cameraControllerKeyboard.active && (this.cameraControllerKeyboard.finishController(), this.cameraControllerKeyboard = null);\n  }\n\n  handleKeyUp(e) {\n    if (e.data.native.ctrlKey || e.data.native.metaKey) return;\n    const t = this.keyToNumber[e.data.key];\n    null != t && this.cameraControllerKeyboard && this.cameraControllerKeyboard.active && (this.cameraControllerKeyboard.deactivateDirection(t), e.stopPropagation());\n  }\n\n}\n\nexport { r as KeyboardNavigation };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/input/handlers/KeyboardNavigation.js"],"names":["GamepadKeyboardController","e","InputHandler","t","r","constructor","view","disableMovements","pan","zoom","ascend","rotate","mode","keyToNumber","left","right","forward","backward","up","down","headingLeft","headingRight","tiltUp","tiltDown","zoomIn","zoomOut","registerIncoming","handleKeyDown","handleKeyUp","handleBlur","data","native","ctrlKey","metaKey","key","cameraControllerKeyboard","active","state","switchCameraController","activateDirection","stopPropagation","finishController","deactivateDirection","KeyboardNavigation"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{GamepadKeyboardController as e}from\"../../state/controllers/GamepadKeyboardController.js\";import{InputHandler as t}from\"../../../input/InputHandler.js\";class r extends t{constructor(e,t){super(!0),this.view=e,this.disableMovements={pan:!0,zoom:!1,ascend:!0,rotate:!1,mode:2},this.keyToNumber={[t.left]:0,[t.right]:1,[t.forward]:2,[t.backward]:3,[t.up]:4,[t.down]:5,[t.headingLeft]:6,[t.headingRight]:7,[t.tiltUp]:8,[t.tiltDown]:9,[t.zoomIn]:10,[t.zoomOut]:11},this.registerIncoming(\"key-down\",null,(e=>this.handleKeyDown(e))),this.registerIncoming(\"key-up\",null,(e=>this.handleKeyUp(e))),this.registerIncoming(\"blur\",null,(()=>this.handleBlur()))}handleKeyDown(t){if(t.data.native.ctrlKey||t.data.native.metaKey)return;const r=this.keyToNumber[t.data.key];null!=r&&(this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active||(this.cameraControllerKeyboard=new e({view:this.view,disableMovements:this.disableMovements}),this.view.state.switchCameraController(this.cameraControllerKeyboard)),this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.activateDirection(r),t.stopPropagation()))}handleBlur(){this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.finishController(),this.cameraControllerKeyboard=null)}handleKeyUp(e){if(e.data.native.ctrlKey||e.data.native.metaKey)return;const t=this.keyToNumber[e.data.key];null!=t&&this.cameraControllerKeyboard&&this.cameraControllerKeyboard.active&&(this.cameraControllerKeyboard.deactivateDirection(t),e.stopPropagation())}}export{r as KeyboardNavigation};\n"]},"metadata":{},"sourceType":"module"}