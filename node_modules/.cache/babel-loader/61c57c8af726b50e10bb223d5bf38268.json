{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../lib/GLMaterial.js\";\nimport { WaterTechnique as t } from \"./WaterTechnique.js\";\n\nclass a extends e {\n  constructor(e) {\n    super(e), this.updateParameters();\n  }\n\n  updateParameters(e) {\n    this._technique = this._techniqueRep.releaseAndAcquire(t, this._material.getTechniqueConfig(this._output, e), this._technique);\n  }\n\n  beginSlot(e) {\n    if (2 === this._output) return 22 === e;\n    if (5 === this._output) return null == e;\n    if (4 === this._output) return 3 === e;\n    let t = 3;\n    return this._material.params.transparent && (t = this._material.params.writeDepth ? 5 : 8), e === t;\n  }\n\n  setElapsedTimeUniform(e) {\n    const t = .001 * this._material.animation.time;\n    e.setUniform1f(\"timeElapsed\", t * this._material.params.animationSpeed);\n  }\n\n  _updateShadowState(e) {\n    e.shadowMappingEnabled !== this._material.params.receiveShadows && this._material.setParameterValues({\n      receiveShadows: e.shadowMappingEnabled\n    });\n  }\n\n  _updateSSRState(e) {\n    e.ssrEnabled !== this._material.params.ssrEnabled && this._material.setParameterValues({\n      ssrEnabled: e.ssrEnabled\n    });\n  }\n\n  ensureResources(e) {\n    return this._technique.ensureResource(e);\n  }\n\n  ensureParameters(e) {\n    0 === this._output && (this._updateShadowState(e), this._updateSSRState(e)), this.updateParameters(e);\n  }\n\n  bind(e) {\n    this._technique.bindPass(this._material.params, e), 2 !== this._output && 0 !== this._output || this.setElapsedTimeUniform(this._technique.program);\n  }\n\n}\n\nexport { a as WaterGLMaterial };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterGLMaterial.js"],"names":["e","WaterTechnique","t","a","constructor","updateParameters","_technique","_techniqueRep","releaseAndAcquire","_material","getTechniqueConfig","_output","beginSlot","params","transparent","writeDepth","setElapsedTimeUniform","animation","time","setUniform1f","animationSpeed","_updateShadowState","shadowMappingEnabled","receiveShadows","setParameterValues","_updateSSRState","ssrEnabled","ensureResources","ensureResource","ensureParameters","bind","bindPass","program","WaterGLMaterial"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,sBAAb;AAAoC,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,qBAA/B;;AAAqD,MAAMC,CAAN,SAAgBH,CAAhB,CAAiB;AAACI,EAAAA,WAAW,CAACJ,CAAD,EAAG;AAAC,UAAMA,CAAN,GAAS,KAAKK,gBAAL,EAAT;AAAiC;;AAAAA,EAAAA,gBAAgB,CAACL,CAAD,EAAG;AAAC,SAAKM,UAAL,GAAgB,KAAKC,aAAL,CAAmBC,iBAAnB,CAAqCN,CAArC,EAAuC,KAAKO,SAAL,CAAeC,kBAAf,CAAkC,KAAKC,OAAvC,EAA+CX,CAA/C,CAAvC,EAAyF,KAAKM,UAA9F,CAAhB;AAA0H;;AAAAM,EAAAA,SAAS,CAACZ,CAAD,EAAG;AAAC,QAAG,MAAI,KAAKW,OAAZ,EAAoB,OAAO,OAAKX,CAAZ;AAAc,QAAG,MAAI,KAAKW,OAAZ,EAAoB,OAAO,QAAMX,CAAb;AAAe,QAAG,MAAI,KAAKW,OAAZ,EAAoB,OAAO,MAAIX,CAAX;AAAa,QAAIE,CAAC,GAAC,CAAN;AAAQ,WAAO,KAAKO,SAAL,CAAeI,MAAf,CAAsBC,WAAtB,KAAoCZ,CAAC,GAAC,KAAKO,SAAL,CAAeI,MAAf,CAAsBE,UAAtB,GAAiC,CAAjC,GAAmC,CAAzE,GAA4Ef,CAAC,KAAGE,CAAvF;AAAyF;;AAAAc,EAAAA,qBAAqB,CAAChB,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,OAAK,KAAKO,SAAL,CAAeQ,SAAf,CAAyBC,IAAtC;AAA2ClB,IAAAA,CAAC,CAACmB,YAAF,CAAe,aAAf,EAA6BjB,CAAC,GAAC,KAAKO,SAAL,CAAeI,MAAf,CAAsBO,cAArD;AAAqE;;AAAAC,EAAAA,kBAAkB,CAACrB,CAAD,EAAG;AAACA,IAAAA,CAAC,CAACsB,oBAAF,KAAyB,KAAKb,SAAL,CAAeI,MAAf,CAAsBU,cAA/C,IAA+D,KAAKd,SAAL,CAAee,kBAAf,CAAkC;AAACD,MAAAA,cAAc,EAACvB,CAAC,CAACsB;AAAlB,KAAlC,CAA/D;AAA0I;;AAAAG,EAAAA,eAAe,CAACzB,CAAD,EAAG;AAACA,IAAAA,CAAC,CAAC0B,UAAF,KAAe,KAAKjB,SAAL,CAAeI,MAAf,CAAsBa,UAArC,IAAiD,KAAKjB,SAAL,CAAee,kBAAf,CAAkC;AAACE,MAAAA,UAAU,EAAC1B,CAAC,CAAC0B;AAAd,KAAlC,CAAjD;AAA8G;;AAAAC,EAAAA,eAAe,CAAC3B,CAAD,EAAG;AAAC,WAAO,KAAKM,UAAL,CAAgBsB,cAAhB,CAA+B5B,CAA/B,CAAP;AAAyC;;AAAA6B,EAAAA,gBAAgB,CAAC7B,CAAD,EAAG;AAAC,UAAI,KAAKW,OAAT,KAAmB,KAAKU,kBAAL,CAAwBrB,CAAxB,GAA2B,KAAKyB,eAAL,CAAqBzB,CAArB,CAA9C,GAAuE,KAAKK,gBAAL,CAAsBL,CAAtB,CAAvE;AAAgG;;AAAA8B,EAAAA,IAAI,CAAC9B,CAAD,EAAG;AAAC,SAAKM,UAAL,CAAgByB,QAAhB,CAAyB,KAAKtB,SAAL,CAAeI,MAAxC,EAA+Cb,CAA/C,GAAkD,MAAI,KAAKW,OAAT,IAAkB,MAAI,KAAKA,OAA3B,IAAoC,KAAKK,qBAAL,CAA2B,KAAKV,UAAL,CAAgB0B,OAA3C,CAAtF;AAA0I;;AAA/nC;;AAAgoC,SAAO7B,CAAC,IAAI8B,eAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterial.js\";import{WaterTechnique as t}from\"./WaterTechnique.js\";class a extends e{constructor(e){super(e),this.updateParameters()}updateParameters(e){this._technique=this._techniqueRep.releaseAndAcquire(t,this._material.getTechniqueConfig(this._output,e),this._technique)}beginSlot(e){if(2===this._output)return 22===e;if(5===this._output)return null==e;if(4===this._output)return 3===e;let t=3;return this._material.params.transparent&&(t=this._material.params.writeDepth?5:8),e===t}setElapsedTimeUniform(e){const t=.001*this._material.animation.time;e.setUniform1f(\"timeElapsed\",t*this._material.params.animationSpeed)}_updateShadowState(e){e.shadowMappingEnabled!==this._material.params.receiveShadows&&this._material.setParameterValues({receiveShadows:e.shadowMappingEnabled})}_updateSSRState(e){e.ssrEnabled!==this._material.params.ssrEnabled&&this._material.setParameterValues({ssrEnabled:e.ssrEnabled})}ensureResources(e){return this._technique.ensureResource(e)}ensureParameters(e){0===this._output&&(this._updateShadowState(e),this._updateSSRState(e)),this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.params,e),2!==this._output&&0!==this._output||this.setElapsedTimeUniform(this._technique.program)}}export{a as WaterGLMaterial};\n"]},"metadata":{},"sourceType":"module"}