{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport { isNone as t } from \"../../core/maybe.js\";\nimport { ResourceType as o } from \"./enums.js\";\nimport { webglValidateShadersEnabled as i } from \"./RenderingContext.js\";\nimport { transpileShader as r } from \"./ShaderTranspiler.js\";\n\nclass n {\n  constructor(t, r, n, e) {\n    this._context = t, this._locations = e, this._vShader = null, this._fShader = null, this._nameToUniformLocation = {}, this._nameToUniform1 = {}, this._nameToUniform1v = {}, this._nameToUniform2 = {}, this._nameToUniform3 = {}, this._nameToUniform4 = {}, this._nameToUniformMatrix3 = {}, this._nameToUniformMatrix4 = {}, t || console.error(\"RenderingContext isn't initialized!\"), 0 === r.length && console.error(\"Shaders source should not be empty!\"), this._vShader = s(this._context, 35633, r), this._fShader = s(this._context, 35632, n), this._vShader && this._fShader || console.error(\"Error loading shaders!\");\n    const m = this._context.gl,\n          a = m.createProgram();\n    m.attachShader(a, this._vShader), m.attachShader(a, this._fShader), e.forEach((t, o) => m.bindAttribLocation(a, t, o)), m.linkProgram(a), i() && !m.getProgramParameter(a, m.LINK_STATUS) && console.error(\"Could not initialize shader\\nVALIDATE_STATUS: \" + m.getProgramParameter(a, m.VALIDATE_STATUS) + \", gl error [\" + m.getError() + \"]infoLog: \" + m.getProgramInfoLog(a)), this._glName = a, this._context.instanceCounter.increment(o.Program, this);\n  }\n\n  get glName() {\n    return this._glName;\n  }\n\n  dispose() {\n    const t = this._context.gl;\n\n    if (this._vShader) {\n      const o = this._vShader;\n      t.deleteShader(o), this._vShader = null;\n    }\n\n    if (this._fShader) {\n      const o = this._fShader;\n      t.deleteShader(o), this._fShader = null;\n    }\n\n    this._glName && (t.deleteProgram(this._glName), this._glName = null, this._context.instanceCounter.decrement(o.Program, this));\n  }\n\n  _getUniformLocation(t) {\n    return void 0 === this._nameToUniformLocation[t] && (this._nameToUniformLocation[t] = this._context.gl.getUniformLocation(this._glName, t)), this._nameToUniformLocation[t];\n  }\n\n  hasUniform(t) {\n    return null !== this._getUniformLocation(t);\n  }\n\n  setUniform1i(t, o) {\n    const i = this._nameToUniform1[t];\n\n    if (void 0 === i || o !== i) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform1i(this._getUniformLocation(t), o), this._nameToUniform1[t] = o;\n    }\n  }\n\n  setUniform1iv(t, o) {\n    const i = this._nameToUniform1v[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform1iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform1v[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniform2iv(t, o) {\n    const i = this._nameToUniform2[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform2iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform2[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniform3iv(t, o) {\n    const i = this._nameToUniform3[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform3iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform3[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniform4iv(t, o) {\n    const i = this._nameToUniform4[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform4iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform4[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniform1f(t, o) {\n    const i = this._nameToUniform1[t];\n\n    if (void 0 === i || o !== i) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform1f(this._getUniformLocation(t), o), this._nameToUniform1[t] = o;\n    }\n  }\n\n  setUniform1fv(t, o) {\n    const i = this._nameToUniform1v[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform1fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform1v[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniform2f(t, o, i) {\n    const r = this._nameToUniform2[t];\n\n    if (void 0 === r || o !== r[0] || i !== r[1]) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform2f(this._getUniformLocation(t), o, i), void 0 === r ? this._nameToUniform2[t] = [o, i] : (r[0] = o, r[1] = i);\n    }\n  }\n\n  setUniform2fv(t, o) {\n    const i = this._nameToUniform2[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform2fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform2[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniform3f(t, o, i, r) {\n    const n = this._nameToUniform3[t];\n\n    if (void 0 === n || o !== n[0] || i !== n[1] || r !== n[2]) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform3f(this._getUniformLocation(t), o, i, r), void 0 === n ? this._nameToUniform3[t] = [o, i, r] : (n[0] = o, n[1] = i, n[2] = r);\n    }\n  }\n\n  setUniform3fv(t, o) {\n    const i = this._nameToUniform3[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform3fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform3[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniform4f(t, o, i, r, n) {\n    const e = this._nameToUniform4[t];\n\n    if (void 0 === e || o !== e[0] || i !== e[1] || r !== e[2] || n !== e[3]) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform4f(this._getUniformLocation(t), o, i, r, n), void 0 === e ? this._nameToUniform4[t] = [o, i, r, n] : (e[0] = o, e[1] = i, e[2] = r, e[3] = n);\n    }\n  }\n\n  setUniform4fv(t, o) {\n    const i = this._nameToUniform4[t];\n\n    if (e(i, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniform4fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform4[t] = Array.from(o) : h(o, i);\n    }\n  }\n\n  setUniformMatrix3fv(t, o, i = !1) {\n    const r = this._nameToUniformMatrix3[t];\n\n    if (f(r, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniformMatrix3fv(this._getUniformLocation(t), i, o), void 0 === r ? this._nameToUniformMatrix3[t] = Array.from(o) : h(o, r);\n    }\n  }\n\n  setUniformMatrix4fv(t, o, i = !1) {\n    const r = this._nameToUniformMatrix4[t];\n\n    if (c(r, o)) {\n      this._context.useProgram(this);\n\n      this._context.gl.uniformMatrix4fv(this._getUniformLocation(t), i, o), void 0 === r ? this._nameToUniformMatrix4[t] = Array.from(o) : h(o, r);\n    }\n  }\n\n  assertCompatibleVertexAttributeLocations(t) {\n    t.locations !== this._locations && console.error(\"VertexAttributeLocations are incompatible\");\n  }\n\n  stop() {}\n\n}\n\nfunction e(o, i) {\n  if (t(o) || o.length !== i.length) return !0;\n\n  for (let t = 0; t < o.length; ++t) if (o[t] !== i[t]) return !0;\n\n  return !1;\n}\n\nfunction s(t, o, n) {\n  const e = \"webgl2\" === t.webglVersion ? r(n, o) : n,\n        s = t.gl,\n        a = s.createShader(o);\n  return s.shaderSource(a, e), s.compileShader(a), i() && !s.getShaderParameter(a, s.COMPILE_STATUS) && (console.error(\"Compile error in \".concat(35633 === o ? \"vertex\" : \"fragment\", \" shader\")), console.error(s.getShaderInfoLog(a)), console.error(m(e)), \"webgl2\" === t.webglVersion && (console.log(\"Shader source before transpilation:\"), console.log(n))), a;\n}\n\nfunction m(t) {\n  let o = 2;\n  return t.replace(/\\n/g, () => \"\\n\" + a(o++) + \":\");\n}\n\nfunction a(t) {\n  return t >= 1e3 ? t.toString() : (\"  \" + t).slice(-3);\n}\n\nfunction h(t, o) {\n  for (let i = 0; i < t.length; ++i) o[i] = t[i];\n}\n\nfunction f(o, i) {\n  return !!t(o) || (9 !== o.length ? e(o, i) : 9 !== o.length || o[0] !== i[0] || o[1] !== i[1] || o[2] !== i[2] || o[3] !== i[3] || o[4] !== i[4] || o[5] !== i[5] || o[6] !== i[6] || o[7] !== i[7] || o[8] !== i[8]);\n}\n\nfunction c(o, i) {\n  return !!t(o) || (16 !== o.length ? e(o, i) : 16 !== o.length || o[0] !== i[0] || o[1] !== i[1] || o[2] !== i[2] || o[3] !== i[3] || o[4] !== i[4] || o[5] !== i[5] || o[6] !== i[6] || o[7] !== i[7] || o[8] !== i[8] || o[9] !== i[9] || o[10] !== i[10] || o[11] !== i[11] || o[12] !== i[12] || o[13] !== i[13] || o[14] !== i[14] || o[15] !== i[15]);\n}\n\nexport { n as Program };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/webgl/Program.js"],"names":["isNone","t","ResourceType","o","webglValidateShadersEnabled","i","transpileShader","r","n","constructor","e","_context","_locations","_vShader","_fShader","_nameToUniformLocation","_nameToUniform1","_nameToUniform1v","_nameToUniform2","_nameToUniform3","_nameToUniform4","_nameToUniformMatrix3","_nameToUniformMatrix4","console","error","length","s","m","gl","a","createProgram","attachShader","forEach","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","VALIDATE_STATUS","getError","getProgramInfoLog","_glName","instanceCounter","increment","Program","glName","dispose","deleteShader","deleteProgram","decrement","_getUniformLocation","getUniformLocation","hasUniform","setUniform1i","useProgram","uniform1i","setUniform1iv","uniform1iv","Array","from","h","setUniform2iv","uniform2iv","setUniform3iv","uniform3iv","setUniform4iv","uniform4iv","setUniform1f","uniform1f","setUniform1fv","uniform1fv","setUniform2f","uniform2f","setUniform2fv","uniform2fv","setUniform3f","uniform3f","setUniform3fv","uniform3fv","setUniform4f","uniform4f","setUniform4fv","uniform4fv","setUniformMatrix3fv","f","uniformMatrix3fv","setUniformMatrix4fv","c","uniformMatrix4fv","assertCompatibleVertexAttributeLocations","locations","stop","webglVersion","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","concat","getShaderInfoLog","log","replace","toString","slice"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isNone as t}from\"../../core/maybe.js\";import{ResourceType as o}from\"./enums.js\";import{webglValidateShadersEnabled as i}from\"./RenderingContext.js\";import{transpileShader as r}from\"./ShaderTranspiler.js\";class n{constructor(t,r,n,e){this._context=t,this._locations=e,this._vShader=null,this._fShader=null,this._nameToUniformLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error(\"RenderingContext isn't initialized!\"),0===r.length&&console.error(\"Shaders source should not be empty!\"),this._vShader=s(this._context,35633,r),this._fShader=s(this._context,35632,n),this._vShader&&this._fShader||console.error(\"Error loading shaders!\");const m=this._context.gl,a=m.createProgram();m.attachShader(a,this._vShader),m.attachShader(a,this._fShader),e.forEach(((t,o)=>m.bindAttribLocation(a,t,o))),m.linkProgram(a),i()&&!m.getProgramParameter(a,m.LINK_STATUS)&&console.error(\"Could not initialize shader\\nVALIDATE_STATUS: \"+m.getProgramParameter(a,m.VALIDATE_STATUS)+\", gl error [\"+m.getError()+\"]infoLog: \"+m.getProgramInfoLog(a)),this._glName=a,this._context.instanceCounter.increment(o.Program,this)}get glName(){return this._glName}dispose(){const t=this._context.gl;if(this._vShader){const o=this._vShader;t.deleteShader(o),this._vShader=null}if(this._fShader){const o=this._fShader;t.deleteShader(o),this._fShader=null}this._glName&&(t.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(o.Program,this))}_getUniformLocation(t){return void 0===this._nameToUniformLocation[t]&&(this._nameToUniformLocation[t]=this._context.gl.getUniformLocation(this._glName,t)),this._nameToUniformLocation[t]}hasUniform(t){return null!==this._getUniformLocation(t)}setUniform1i(t,o){const i=this._nameToUniform1[t];if(void 0===i||o!==i){this._context.useProgram(this);this._context.gl.uniform1i(this._getUniformLocation(t),o),this._nameToUniform1[t]=o}}setUniform1iv(t,o){const i=this._nameToUniform1v[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform1iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform1v[t]=Array.from(o):h(o,i)}}setUniform2iv(t,o){const i=this._nameToUniform2[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform2iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform2[t]=Array.from(o):h(o,i)}}setUniform3iv(t,o){const i=this._nameToUniform3[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform3iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform3[t]=Array.from(o):h(o,i)}}setUniform4iv(t,o){const i=this._nameToUniform4[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform4iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform4[t]=Array.from(o):h(o,i)}}setUniform1f(t,o){const i=this._nameToUniform1[t];if(void 0===i||o!==i){this._context.useProgram(this);this._context.gl.uniform1f(this._getUniformLocation(t),o),this._nameToUniform1[t]=o}}setUniform1fv(t,o){const i=this._nameToUniform1v[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform1fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform1v[t]=Array.from(o):h(o,i)}}setUniform2f(t,o,i){const r=this._nameToUniform2[t];if(void 0===r||o!==r[0]||i!==r[1]){this._context.useProgram(this);this._context.gl.uniform2f(this._getUniformLocation(t),o,i),void 0===r?this._nameToUniform2[t]=[o,i]:(r[0]=o,r[1]=i)}}setUniform2fv(t,o){const i=this._nameToUniform2[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform2fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform2[t]=Array.from(o):h(o,i)}}setUniform3f(t,o,i,r){const n=this._nameToUniform3[t];if(void 0===n||o!==n[0]||i!==n[1]||r!==n[2]){this._context.useProgram(this);this._context.gl.uniform3f(this._getUniformLocation(t),o,i,r),void 0===n?this._nameToUniform3[t]=[o,i,r]:(n[0]=o,n[1]=i,n[2]=r)}}setUniform3fv(t,o){const i=this._nameToUniform3[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform3fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform3[t]=Array.from(o):h(o,i)}}setUniform4f(t,o,i,r,n){const e=this._nameToUniform4[t];if(void 0===e||o!==e[0]||i!==e[1]||r!==e[2]||n!==e[3]){this._context.useProgram(this);this._context.gl.uniform4f(this._getUniformLocation(t),o,i,r,n),void 0===e?this._nameToUniform4[t]=[o,i,r,n]:(e[0]=o,e[1]=i,e[2]=r,e[3]=n)}}setUniform4fv(t,o){const i=this._nameToUniform4[t];if(e(i,o)){this._context.useProgram(this);this._context.gl.uniform4fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform4[t]=Array.from(o):h(o,i)}}setUniformMatrix3fv(t,o,i=!1){const r=this._nameToUniformMatrix3[t];if(f(r,o)){this._context.useProgram(this);this._context.gl.uniformMatrix3fv(this._getUniformLocation(t),i,o),void 0===r?this._nameToUniformMatrix3[t]=Array.from(o):h(o,r)}}setUniformMatrix4fv(t,o,i=!1){const r=this._nameToUniformMatrix4[t];if(c(r,o)){this._context.useProgram(this);this._context.gl.uniformMatrix4fv(this._getUniformLocation(t),i,o),void 0===r?this._nameToUniformMatrix4[t]=Array.from(o):h(o,r)}}assertCompatibleVertexAttributeLocations(t){t.locations!==this._locations&&console.error(\"VertexAttributeLocations are incompatible\")}stop(){}}function e(o,i){if(t(o)||o.length!==i.length)return!0;for(let t=0;t<o.length;++t)if(o[t]!==i[t])return!0;return!1}function s(t,o,n){const e=\"webgl2\"===t.webglVersion?r(n,o):n,s=t.gl,a=s.createShader(o);return s.shaderSource(a,e),s.compileShader(a),i()&&!s.getShaderParameter(a,s.COMPILE_STATUS)&&(console.error(\"Compile error in \".concat(35633===o?\"vertex\":\"fragment\",\" shader\")),console.error(s.getShaderInfoLog(a)),console.error(m(e)),\"webgl2\"===t.webglVersion&&(console.log(\"Shader source before transpilation:\"),console.log(n))),a}function m(t){let o=2;return t.replace(/\\n/g,(()=>\"\\n\"+a(o++)+\":\"))}function a(t){return t>=1e3?t.toString():(\"  \"+t).slice(-3)}function h(t,o){for(let i=0;i<t.length;++i)o[i]=t[i]}function f(o,i){return!!t(o)||(9!==o.length?e(o,i):9!==o.length||o[0]!==i[0]||o[1]!==i[1]||o[2]!==i[2]||o[3]!==i[3]||o[4]!==i[4]||o[5]!==i[5]||o[6]!==i[6]||o[7]!==i[7]||o[8]!==i[8])}function c(o,i){return!!t(o)||(16!==o.length?e(o,i):16!==o.length||o[0]!==i[0]||o[1]!==i[1]||o[2]!==i[2]||o[3]!==i[3]||o[4]!==i[4]||o[5]!==i[5]||o[6]!==i[6]||o[7]!==i[7]||o[8]!==i[8]||o[9]!==i[9]||o[10]!==i[10]||o[11]!==i[11]||o[12]!==i[12]||o[13]!==i[13]||o[14]!==i[14]||o[15]!==i[15])}export{n as Program};\n"]},"metadata":{},"sourceType":"module"}