{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { Placement as t } from \"../CIMPlacements.js\";\n\nfunction s(t) {\n  return void 0 !== t.rings;\n}\n\nclass i {\n  static local() {\n    return null === i.instance && (i.instance = new i()), i.instance;\n  }\n\n  execute(t, s, i) {\n    return new h(t, s, i);\n  }\n\n}\n\ni.instance = null;\n\nclass h {\n  constructor(i, h, e) {\n    if (this._xMin = 0, this._xMax = 0, this._yMin = 0, this._yMax = 0, this._currentX = 0, this._currentY = 0, this._stepX = (void 0 !== h.stepX ? Math.abs(h.stepX) : 16) * e, this._stepY = (void 0 !== h.stepY ? Math.abs(h.stepY) : 16) * e, 0 !== this._stepX && 0 !== this._stepY && i && s(i) && i.rings) {\n      if (this._gridType = void 0 !== h.gridType ? h.gridType : \"Fixed\", \"Random\" === this._gridType) this._randomness = void 0 !== h.randomness ? h.randomness / 100 : 1, this._gridAngle = 0, this._shiftOddRows = !1, this._cosAngle = 1, this._sinAngle = 0, this._offsetX = 0, this._offsetY = 0;else {\n        if (this._randomness = 0, this._gridAngle = void 0 !== h.gridAngle ? h.gridAngle : 0, this._shiftOddRows = void 0 !== h.shiftOddRows && h.shiftOddRows, this._offsetX = void 0 !== h.offsetX ? h.offsetX * e : 0, this._offsetY = void 0 !== h.offsetY ? h.offsetY * e : 0, this._cosAngle = Math.cos(this._gridAngle / 180 * Math.PI), this._sinAngle = -Math.sin(this._gridAngle / 180 * Math.PI), this._stepX) if (this._offsetX < 0) for (; this._offsetX < -.5 * this._stepX;) this._offsetX += this._stepX;else for (; this._offsetX >= .5 * this._stepX;) this._offsetX -= this._stepX;\n        if (this._stepY) if (this._offsetY < 0) for (; this._offsetY < -.5 * this._stepY;) this._offsetY += this._stepY;else for (; this._offsetY >= .5 * this._stepY;) this._offsetY -= this._stepY;\n      }\n      this._graphicOriginX = 0, this._graphicOriginY = 0, this._internalPlacement = new t(), this._calculateMinMax(i), this._geometry = i;\n    }\n  }\n\n  next() {\n    return this._geometry ? this._nextInside() : null;\n  }\n\n  _calculateMinMax(t) {\n    let s, i, h, e, n, _, r, o;\n\n    this._xMin = 0, this._xMax = 0, this._yMin = 0, this._yMax = 0, n = _ = Number.MAX_VALUE, r = o = -Number.MAX_VALUE;\n\n    for (const a of t.rings) {\n      const t = a ? a.length : 0;\n\n      for (let f = 0; f < t; ++f) s = a[f][0] - this._graphicOriginX - this._offsetX, i = a[f][1] - this._graphicOriginY - this._offsetY, h = this._cosAngle * s - this._sinAngle * i, e = this._sinAngle * s + this._cosAngle * i, n = Math.min(n, h), r = Math.max(r, h), _ = Math.min(_, e), o = Math.max(o, e);\n    }\n\n    n += this._graphicOriginX, r += this._graphicOriginX, _ += this._graphicOriginY, o += this._graphicOriginY, this._xMin = Math.round(n / this._stepX), this._xMax = Math.round(r / this._stepX), this._yMin = Math.round(_ / this._stepY), this._yMax = Math.round(o / this._stepY), this._currentX = this._xMax + 1, this._currentY = this._yMin - 1;\n  }\n\n  _nextInside() {\n    for (;;) {\n      if (this._currentX > this._xMax) {\n        if (this._currentY++, this._currentY > this._yMax) return null;\n        this._currentX = this._xMin, this._shiftOddRows && this._currentY % 2 && this._currentX--;\n      }\n\n      let t = this._currentX * this._stepX + this._offsetX;\n      this._shiftOddRows && this._currentY % 2 && (t += .5 * this._stepX);\n      const s = this._currentY * this._stepY + this._offsetY;\n      let i, h;\n      return this._currentX++, \"Random\" === this._gridType ? (i = this._graphicOriginX + t + this._stepX * this._randomness * (.5 - Math.random()) * 2 / 3, h = this._graphicOriginY + s + this._stepY * this._randomness * (.5 - Math.random()) * 2 / 3) : (i = this._graphicOriginX + this._cosAngle * t + this._sinAngle * s, h = this._graphicOriginY - this._sinAngle * t + this._cosAngle * s), this._internalPlacement.setTranslate(i, h), this._internalPlacement;\n    }\n  }\n\n}\n\nexport { i as PlacementInsidePolygon };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/symbols/cim/placements/PlacementInsidePolygon.js"],"names":["Placement","t","s","rings","i","local","instance","execute","h","constructor","e","_xMin","_xMax","_yMin","_yMax","_currentX","_currentY","_stepX","stepX","Math","abs","_stepY","stepY","_gridType","gridType","_randomness","randomness","_gridAngle","_shiftOddRows","_cosAngle","_sinAngle","_offsetX","_offsetY","gridAngle","shiftOddRows","offsetX","offsetY","cos","PI","sin","_graphicOriginX","_graphicOriginY","_internalPlacement","_calculateMinMax","_geometry","next","_nextInside","n","_","r","o","Number","MAX_VALUE","a","length","f","min","max","round","random","setTranslate","PlacementInsidePolygon"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,SAAS,IAAIC,CAApB,QAA0B,qBAA1B;;AAAgD,SAASC,CAAT,CAAWD,CAAX,EAAa;AAAC,SAAO,KAAK,CAAL,KAASA,CAAC,CAACE,KAAlB;AAAwB;;AAAA,MAAMC,CAAN,CAAO;AAAa,SAALC,KAAK,GAAE;AAAC,WAAO,SAAOD,CAAC,CAACE,QAAT,KAAoBF,CAAC,CAACE,QAAF,GAAW,IAAIF,CAAJ,EAA/B,GAAsCA,CAAC,CAACE,QAA/C;AAAwD;;AAAAC,EAAAA,OAAO,CAACN,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;AAAC,WAAO,IAAII,CAAJ,CAAMP,CAAN,EAAQC,CAAR,EAAUE,CAAV,CAAP;AAAoB;;AAA3G;;AAA4GA,CAAC,CAACE,QAAF,GAAW,IAAX;;AAAgB,MAAME,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACL,CAAD,EAAGI,CAAH,EAAKE,CAAL,EAAO;AAAC,QAAG,KAAKC,KAAL,GAAW,CAAX,EAAa,KAAKC,KAAL,GAAW,CAAxB,EAA0B,KAAKC,KAAL,GAAW,CAArC,EAAuC,KAAKC,KAAL,GAAW,CAAlD,EAAoD,KAAKC,SAAL,GAAe,CAAnE,EAAqE,KAAKC,SAAL,GAAe,CAApF,EAAsF,KAAKC,MAAL,GAAY,CAAC,KAAK,CAAL,KAAST,CAAC,CAACU,KAAX,GAAiBC,IAAI,CAACC,GAAL,CAASZ,CAAC,CAACU,KAAX,CAAjB,GAAmC,EAApC,IAAwCR,CAA1I,EAA4I,KAAKW,MAAL,GAAY,CAAC,KAAK,CAAL,KAASb,CAAC,CAACc,KAAX,GAAiBH,IAAI,CAACC,GAAL,CAASZ,CAAC,CAACc,KAAX,CAAjB,GAAmC,EAApC,IAAwCZ,CAAhM,EAAkM,MAAI,KAAKO,MAAT,IAAiB,MAAI,KAAKI,MAA1B,IAAkCjB,CAAlC,IAAqCF,CAAC,CAACE,CAAD,CAAtC,IAA2CA,CAAC,CAACD,KAAlP,EAAwP;AAAC,UAAG,KAAKoB,SAAL,GAAe,KAAK,CAAL,KAASf,CAAC,CAACgB,QAAX,GAAoBhB,CAAC,CAACgB,QAAtB,GAA+B,OAA9C,EAAsD,aAAW,KAAKD,SAAzE,EAAmF,KAAKE,WAAL,GAAiB,KAAK,CAAL,KAASjB,CAAC,CAACkB,UAAX,GAAsBlB,CAAC,CAACkB,UAAF,GAAa,GAAnC,GAAuC,CAAxD,EAA0D,KAAKC,UAAL,GAAgB,CAA1E,EAA4E,KAAKC,aAAL,GAAmB,CAAC,CAAhG,EAAkG,KAAKC,SAAL,GAAe,CAAjH,EAAmH,KAAKC,SAAL,GAAe,CAAlI,EAAoI,KAAKC,QAAL,GAAc,CAAlJ,EAAoJ,KAAKC,QAAL,GAAc,CAAlK,CAAnF,KAA2P;AAAC,YAAG,KAAKP,WAAL,GAAiB,CAAjB,EAAmB,KAAKE,UAAL,GAAgB,KAAK,CAAL,KAASnB,CAAC,CAACyB,SAAX,GAAqBzB,CAAC,CAACyB,SAAvB,GAAiC,CAApE,EAAsE,KAAKL,aAAL,GAAmB,KAAK,CAAL,KAASpB,CAAC,CAAC0B,YAAX,IAAyB1B,CAAC,CAAC0B,YAApH,EAAiI,KAAKH,QAAL,GAAc,KAAK,CAAL,KAASvB,CAAC,CAAC2B,OAAX,GAAmB3B,CAAC,CAAC2B,OAAF,GAAUzB,CAA7B,GAA+B,CAA9K,EAAgL,KAAKsB,QAAL,GAAc,KAAK,CAAL,KAASxB,CAAC,CAAC4B,OAAX,GAAmB5B,CAAC,CAAC4B,OAAF,GAAU1B,CAA7B,GAA+B,CAA7N,EAA+N,KAAKmB,SAAL,GAAeV,IAAI,CAACkB,GAAL,CAAS,KAAKV,UAAL,GAAgB,GAAhB,GAAoBR,IAAI,CAACmB,EAAlC,CAA9O,EAAoR,KAAKR,SAAL,GAAe,CAACX,IAAI,CAACoB,GAAL,CAAS,KAAKZ,UAAL,GAAgB,GAAhB,GAAoBR,IAAI,CAACmB,EAAlC,CAApS,EAA0U,KAAKrB,MAAlV,EAAyV,IAAG,KAAKc,QAAL,GAAc,CAAjB,EAAmB,OAAK,KAAKA,QAAL,GAAc,CAAC,EAAD,GAAI,KAAKd,MAA5B,GAAoC,KAAKc,QAAL,IAAe,KAAKd,MAApB,CAAvD,KAAuF,OAAK,KAAKc,QAAL,IAAe,KAAG,KAAKd,MAA5B,GAAoC,KAAKc,QAAL,IAAe,KAAKd,MAApB;AAA2B,YAAG,KAAKI,MAAR,EAAe,IAAG,KAAKW,QAAL,GAAc,CAAjB,EAAmB,OAAK,KAAKA,QAAL,GAAc,CAAC,EAAD,GAAI,KAAKX,MAA5B,GAAoC,KAAKW,QAAL,IAAe,KAAKX,MAApB,CAAvD,KAAuF,OAAK,KAAKW,QAAL,IAAe,KAAG,KAAKX,MAA5B,GAAoC,KAAKW,QAAL,IAAe,KAAKX,MAApB;AAA2B;AAAA,WAAKmB,eAAL,GAAqB,CAArB,EAAuB,KAAKC,eAAL,GAAqB,CAA5C,EAA8C,KAAKC,kBAAL,GAAwB,IAAIzC,CAAJ,EAAtE,EAA4E,KAAK0C,gBAAL,CAAsBvC,CAAtB,CAA5E,EAAqG,KAAKwC,SAAL,GAAexC,CAApH;AAAsH;AAAC;;AAAAyC,EAAAA,IAAI,GAAE;AAAC,WAAO,KAAKD,SAAL,GAAe,KAAKE,WAAL,EAAf,GAAkC,IAAzC;AAA8C;;AAAAH,EAAAA,gBAAgB,CAAC1C,CAAD,EAAG;AAAC,QAAIC,CAAJ,EAAME,CAAN,EAAQI,CAAR,EAAUE,CAAV,EAAYqC,CAAZ,EAAcC,CAAd,EAAgBC,CAAhB,EAAkBC,CAAlB;;AAAoB,SAAKvC,KAAL,GAAW,CAAX,EAAa,KAAKC,KAAL,GAAW,CAAxB,EAA0B,KAAKC,KAAL,GAAW,CAArC,EAAuC,KAAKC,KAAL,GAAW,CAAlD,EAAoDiC,CAAC,GAACC,CAAC,GAACG,MAAM,CAACC,SAA/D,EAAyEH,CAAC,GAACC,CAAC,GAAC,CAACC,MAAM,CAACC,SAArF;;AAA+F,SAAI,MAAMC,CAAV,IAAepD,CAAC,CAACE,KAAjB,EAAuB;AAAC,YAAMF,CAAC,GAACoD,CAAC,GAACA,CAAC,CAACC,MAAH,GAAU,CAAnB;;AAAqB,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACtD,CAAd,EAAgB,EAAEsD,CAAlB,EAAoBrD,CAAC,GAACmD,CAAC,CAACE,CAAD,CAAD,CAAK,CAAL,IAAQ,KAAKf,eAAb,GAA6B,KAAKT,QAApC,EAA6C3B,CAAC,GAACiD,CAAC,CAACE,CAAD,CAAD,CAAK,CAAL,IAAQ,KAAKd,eAAb,GAA6B,KAAKT,QAAjF,EAA0FxB,CAAC,GAAC,KAAKqB,SAAL,GAAe3B,CAAf,GAAiB,KAAK4B,SAAL,GAAe1B,CAA5H,EAA8HM,CAAC,GAAC,KAAKoB,SAAL,GAAe5B,CAAf,GAAiB,KAAK2B,SAAL,GAAezB,CAAhK,EAAkK2C,CAAC,GAAC5B,IAAI,CAACqC,GAAL,CAAST,CAAT,EAAWvC,CAAX,CAApK,EAAkLyC,CAAC,GAAC9B,IAAI,CAACsC,GAAL,CAASR,CAAT,EAAWzC,CAAX,CAApL,EAAkMwC,CAAC,GAAC7B,IAAI,CAACqC,GAAL,CAASR,CAAT,EAAWtC,CAAX,CAApM,EAAkNwC,CAAC,GAAC/B,IAAI,CAACsC,GAAL,CAASP,CAAT,EAAWxC,CAAX,CAApN;AAAkO;;AAAAqC,IAAAA,CAAC,IAAE,KAAKP,eAAR,EAAwBS,CAAC,IAAE,KAAKT,eAAhC,EAAgDQ,CAAC,IAAE,KAAKP,eAAxD,EAAwES,CAAC,IAAE,KAAKT,eAAhF,EAAgG,KAAK9B,KAAL,GAAWQ,IAAI,CAACuC,KAAL,CAAWX,CAAC,GAAC,KAAK9B,MAAlB,CAA3G,EAAqI,KAAKL,KAAL,GAAWO,IAAI,CAACuC,KAAL,CAAWT,CAAC,GAAC,KAAKhC,MAAlB,CAAhJ,EAA0K,KAAKJ,KAAL,GAAWM,IAAI,CAACuC,KAAL,CAAWV,CAAC,GAAC,KAAK3B,MAAlB,CAArL,EAA+M,KAAKP,KAAL,GAAWK,IAAI,CAACuC,KAAL,CAAWR,CAAC,GAAC,KAAK7B,MAAlB,CAA1N,EAAoP,KAAKN,SAAL,GAAe,KAAKH,KAAL,GAAW,CAA9Q,EAAgR,KAAKI,SAAL,GAAe,KAAKH,KAAL,GAAW,CAA1S;AAA4S;;AAAAiC,EAAAA,WAAW,GAAE;AAAC,aAAO;AAAC,UAAG,KAAK/B,SAAL,GAAe,KAAKH,KAAvB,EAA6B;AAAC,YAAG,KAAKI,SAAL,IAAiB,KAAKA,SAAL,GAAe,KAAKF,KAAxC,EAA8C,OAAO,IAAP;AAAY,aAAKC,SAAL,GAAe,KAAKJ,KAApB,EAA0B,KAAKiB,aAAL,IAAoB,KAAKZ,SAAL,GAAe,CAAnC,IAAsC,KAAKD,SAAL,EAAhE;AAAiF;;AAAA,UAAId,CAAC,GAAC,KAAKc,SAAL,GAAe,KAAKE,MAApB,GAA2B,KAAKc,QAAtC;AAA+C,WAAKH,aAAL,IAAoB,KAAKZ,SAAL,GAAe,CAAnC,KAAuCf,CAAC,IAAE,KAAG,KAAKgB,MAAlD;AAA0D,YAAMf,CAAC,GAAC,KAAKc,SAAL,GAAe,KAAKK,MAApB,GAA2B,KAAKW,QAAxC;AAAiD,UAAI5B,CAAJ,EAAMI,CAAN;AAAQ,aAAO,KAAKO,SAAL,IAAiB,aAAW,KAAKQ,SAAhB,IAA2BnB,CAAC,GAAC,KAAKoC,eAAL,GAAqBvC,CAArB,GAAuB,KAAKgB,MAAL,GAAY,KAAKQ,WAAjB,IAA8B,KAAGN,IAAI,CAACwC,MAAL,EAAjC,IAAgD,CAAhD,GAAkD,CAA3E,EAA6EnD,CAAC,GAAC,KAAKiC,eAAL,GAAqBvC,CAArB,GAAuB,KAAKmB,MAAL,GAAY,KAAKI,WAAjB,IAA8B,KAAGN,IAAI,CAACwC,MAAL,EAAjC,IAAgD,CAAhD,GAAkD,CAAnL,KAAuLvD,CAAC,GAAC,KAAKoC,eAAL,GAAqB,KAAKX,SAAL,GAAe5B,CAApC,GAAsC,KAAK6B,SAAL,GAAe5B,CAAvD,EAAyDM,CAAC,GAAC,KAAKiC,eAAL,GAAqB,KAAKX,SAAL,GAAe7B,CAApC,GAAsC,KAAK4B,SAAL,GAAe3B,CAAvS,CAAjB,EAA2T,KAAKwC,kBAAL,CAAwBkB,YAAxB,CAAqCxD,CAArC,EAAuCI,CAAvC,CAA3T,EAAqW,KAAKkC,kBAAjX;AAAoY;AAAC;;AAArwF;;AAAswF,SAAOtC,CAAC,IAAIyD,sBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Placement as t}from\"../CIMPlacements.js\";function s(t){return void 0!==t.rings}class i{static local(){return null===i.instance&&(i.instance=new i),i.instance}execute(t,s,i){return new h(t,s,i)}}i.instance=null;class h{constructor(i,h,e){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==h.stepX?Math.abs(h.stepX):16)*e,this._stepY=(void 0!==h.stepY?Math.abs(h.stepY):16)*e,0!==this._stepX&&0!==this._stepY&&i&&s(i)&&i.rings){if(this._gridType=void 0!==h.gridType?h.gridType:\"Fixed\",\"Random\"===this._gridType)this._randomness=void 0!==h.randomness?h.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==h.gridAngle?h.gridAngle:0,this._shiftOddRows=void 0!==h.shiftOddRows&&h.shiftOddRows,this._offsetX=void 0!==h.offsetX?h.offsetX*e:0,this._offsetY=void 0!==h.offsetY?h.offsetY*e:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new t,this._calculateMinMax(i),this._geometry=i}}next(){return this._geometry?this._nextInside():null}_calculateMinMax(t){let s,i,h,e,n,_,r,o;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,n=_=Number.MAX_VALUE,r=o=-Number.MAX_VALUE;for(const a of t.rings){const t=a?a.length:0;for(let f=0;f<t;++f)s=a[f][0]-this._graphicOriginX-this._offsetX,i=a[f][1]-this._graphicOriginY-this._offsetY,h=this._cosAngle*s-this._sinAngle*i,e=this._sinAngle*s+this._cosAngle*i,n=Math.min(n,h),r=Math.max(r,h),_=Math.min(_,e),o=Math.max(o,e)}n+=this._graphicOriginX,r+=this._graphicOriginX,_+=this._graphicOriginY,o+=this._graphicOriginY,this._xMin=Math.round(n/this._stepX),this._xMax=Math.round(r/this._stepX),this._yMin=Math.round(_/this._stepY),this._yMax=Math.round(o/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);const s=this._currentY*this._stepY+this._offsetY;let i,h;return this._currentX++,\"Random\"===this._gridType?(i=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,h=this._graphicOriginY+s+this._stepY*this._randomness*(.5-Math.random())*2/3):(i=this._graphicOriginX+this._cosAngle*t+this._sinAngle*s,h=this._graphicOriginY-this._sinAngle*t+this._cosAngle*s),this._internalPlacement.setTranslate(i,h),this._internalPlacement}}}export{i as PlacementInsidePolygon};\n"]},"metadata":{},"sourceType":"module"}