{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isValid as t } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport { sanitizeNullFieldValue as e, validateFieldValue as n, validationErrorToString as i, isNumericField as r, isStringField as s } from \"../../../support/fieldUtils.js\";\n\nclass o {\n  constructor() {\n    this.code = null, this.description = null;\n  }\n\n}\n\nclass l {\n  constructor(t) {\n    this.error = new o(), this.globalId = null, this.objectId = null, this.success = !1, this.uniqueId = null, this.error.description = t;\n  }\n\n}\n\nfunction u(t) {\n  return new l(t);\n}\n\nclass a {\n  constructor(t) {\n    this.globalId = null, this.success = !0, this.objectId = this.uniqueId = t;\n  }\n\n}\n\nfunction c(t) {\n  return new a(t);\n}\n\nconst f = new Set();\n\nfunction d(t, e, r, s, o = !1, l) {\n  f.clear();\n\n  for (const a in r) {\n    const s = t.get(a);\n    if (!s) continue;\n    const c = r[a],\n          d = m(s, c);\n\n    if (d !== c && l && l.push({\n      name: \"invalid-value-type\",\n      message: \"attribute value was converted to match the field type\",\n      details: {\n        field: s,\n        originalValue: c,\n        sanitizedValue: d\n      }\n    }), f.add(s.name), s && (o || s.editable)) {\n      const t = n(s, d);\n      if (t) return u(i(t, s, d));\n      e[s.name] = d;\n    }\n  }\n\n  if (s) for (const n of s) if (!f.has(n.name)) return u(`missing required field \"${n.name}\"`);\n  return null;\n}\n\nfunction m(t, n) {\n  let i = n;\n  return \"string\" == typeof n && r(t) ? i = parseFloat(n) : null != n && s(t) && \"string\" != typeof n && (i = String(n)), e(i);\n}\n\nlet p;\n\nfunction h(e, n) {\n  if (!e || !t(n)) return e;\n\n  if (\"rings\" in e || \"paths\" in e) {\n    if (!p) throw new TypeError(\"geometry engine not loaded\");\n    return p.simplify(n, e);\n  }\n\n  return e;\n}\n\nasync function g() {\n  return p || (p = await import(\"../../../../geometry/geometryEngineJSON.js\"), p);\n}\n\nasync function y(e, n) {\n  !t(e) || \"esriGeometryPolygon\" !== n && \"esriGeometryPolyline\" !== n || (await g());\n}\n\nexport { u as createFeatureEditErrorResult, c as createFeatureEditSuccessResult, g as loadGeometryEngine, y as loadGeometryEngineForSimplify, d as mixAttributes, h as simplify };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js"],"names":["isValid","t","sanitizeNullFieldValue","e","validateFieldValue","n","validationErrorToString","i","isNumericField","r","isStringField","s","o","constructor","code","description","l","error","globalId","objectId","success","uniqueId","u","a","c","f","Set","d","clear","get","m","push","name","message","details","field","originalValue","sanitizedValue","add","editable","has","parseFloat","String","p","h","TypeError","simplify","g","y","createFeatureEditErrorResult","createFeatureEditSuccessResult","loadGeometryEngine","loadGeometryEngineForSimplify","mixAttributes"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const a in r){const s=t.get(a);if(!s)continue;const c=r[a],d=m(s,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:s,originalValue:c,sanitizedValue:d}}),f.add(s.name),s&&(o||s.editable)){const t=n(s,d);if(t)return u(i(t,s,d));e[s.name]=d}}if(s)for(const n of s)if(!f.has(n.name))return u(`missing required field \"${n.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n"]},"metadata":{},"sourceType":"module"}