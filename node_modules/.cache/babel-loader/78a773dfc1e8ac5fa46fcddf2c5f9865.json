{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { p as t } from \"../../../../../chunks/mat4.js\";\nimport { BufferViewVec4f as e, BufferViewVec4u8 as f, BufferViewVec2f as o, BufferViewVec3f as r } from \"../../../../../geometry/support/buffer/BufferView.js\";\nimport { assert as s } from \"../../lib/Util.js\";\n\nfunction n(t, e, f, o) {\n  const r = f.typedBuffer,\n        s = f.typedBufferStride,\n        n = t.length;\n  o *= s;\n\n  for (let i = 0; i < n; ++i) {\n    const f = 2 * t[i];\n    r[o] = e[f], r[o + 1] = e[f + 1], o += s;\n  }\n}\n\nfunction i(t, e, f, o, r) {\n  const s = f.typedBuffer,\n        n = f.typedBufferStride,\n        i = t.length;\n  if (o *= n, null == r || 1 === r) for (let c = 0; c < i; ++c) {\n    const f = 3 * t[c];\n    s[o] = e[f], s[o + 1] = e[f + 1], s[o + 2] = e[f + 2], o += n;\n  } else for (let c = 0; c < i; ++c) {\n    const f = 3 * t[c];\n\n    for (let t = 0; t < r; ++t) s[o] = e[f], s[o + 1] = e[f + 1], s[o + 2] = e[f + 2], o += n;\n  }\n}\n\nfunction c(t, e, f, o, r = 1) {\n  const s = f.typedBuffer,\n        n = f.typedBufferStride,\n        i = t.length;\n  if (o *= n, 1 === r) for (let c = 0; c < i; ++c) {\n    const f = 4 * t[c];\n    s[o] = e[f], s[o + 1] = e[f + 1], s[o + 2] = e[f + 2], s[o + 3] = e[f + 3], o += n;\n  } else for (let c = 0; c < i; ++c) {\n    const f = 4 * t[c];\n\n    for (let t = 0; t < r; ++t) s[o] = e[f], s[o + 1] = e[f + 1], s[o + 2] = e[f + 2], s[o + 3] = e[f + 3], o += n;\n  }\n}\n\nfunction l(t, e, f, o) {\n  const r = f.typedBuffer,\n        s = f.typedBufferStride,\n        n = t.length;\n  o *= s;\n\n  for (let i = 0; i < n; ++i) {\n    const f = 9 * t[i];\n\n    for (let t = 0; t < 9; ++t) r[o + t] = e[f + t];\n\n    o += s;\n  }\n}\n\nfunction d(t, e, f, o) {\n  const r = f.typedBuffer,\n        s = f.typedBufferStride,\n        n = t.length;\n  o *= s;\n\n  for (let i = 0; i < n; ++i) {\n    const f = 16 * t[i];\n\n    for (let t = 0; t < 16; ++t) r[o + t] = e[f + t];\n\n    o += s;\n  }\n}\n\nfunction u(t, e, f, o, r, s = 1) {\n  if (!f) return void i(t, e, o, r, s);\n  const n = o.typedBuffer,\n        c = o.typedBufferStride,\n        l = t.length,\n        d = f[0],\n        u = f[1],\n        a = f[2],\n        p = f[4],\n        y = f[5],\n        g = f[6],\n        B = f[8],\n        h = f[9],\n        m = f[10],\n        b = f[12],\n        z = f[13],\n        S = f[14];\n  if (r *= c, 1 === s) for (let i = 0; i < l; ++i) {\n    const f = 3 * t[i],\n          o = e[f],\n          s = e[f + 1],\n          l = e[f + 2];\n    n[r] = d * o + p * s + B * l + b, n[r + 1] = u * o + y * s + h * l + z, n[r + 2] = a * o + g * s + m * l + S, r += c;\n  } else for (let i = 0; i < l; ++i) {\n    const f = 3 * t[i],\n          o = e[f],\n          l = e[f + 1],\n          k = e[f + 2],\n          F = d * o + p * l + B * k + b,\n          v = u * o + y * l + h * k + z,\n          q = a * o + g * l + m * k + S;\n\n    for (let t = 0; t < s; ++t) n[r] = F, n[r + 1] = v, n[r + 2] = q, r += c;\n  }\n}\n\nfunction a(e, f, o, r, s, n = 1) {\n  if (!o) return void i(e, f, r, s, n);\n  const c = o,\n        l = r.typedBuffer,\n        d = r.typedBufferStride,\n        u = e.length,\n        a = c[0],\n        p = c[1],\n        y = c[2],\n        g = c[4],\n        B = c[5],\n        h = c[6],\n        m = c[8],\n        b = c[9],\n        z = c[10],\n        S = !t(c),\n        k = 1e-6,\n        F = 1 - k;\n  if (s *= d, 1 === n) for (let t = 0; t < u; ++t) {\n    const o = 3 * e[t],\n          r = f[o],\n          n = f[o + 1],\n          i = f[o + 2];\n    let c = a * r + g * n + m * i,\n        u = p * r + B * n + b * i,\n        v = y * r + h * n + z * i;\n\n    if (S) {\n      const t = c * c + u * u + v * v;\n\n      if (t < F && t > k) {\n        const e = 1 / Math.sqrt(t);\n        c *= e, u *= e, v *= e;\n      }\n    }\n\n    l[s + 0] = c, l[s + 1] = u, l[s + 2] = v, s += d;\n  } else for (let t = 0; t < u; ++t) {\n    const o = 3 * e[t],\n          r = f[o],\n          i = f[o + 1],\n          c = f[o + 2];\n    let u = a * r + g * i + m * c,\n        v = p * r + B * i + b * c,\n        q = y * r + h * i + z * c;\n\n    if (S) {\n      const t = u * u + v * v + q * q;\n\n      if (t < F && t > k) {\n        const e = 1 / Math.sqrt(t);\n        u *= e, v *= e, q *= e;\n      }\n    }\n\n    for (let t = 0; t < n; ++t) l[s + 0] = u, l[s + 1] = v, l[s + 2] = q, s += d;\n  }\n}\n\nfunction p(e, f, o, r, s, n = 1) {\n  if (!o) return void c(e, f, r, s, n);\n  const i = o,\n        l = r.typedBuffer,\n        d = r.typedBufferStride,\n        u = e.length,\n        a = i[0],\n        p = i[1],\n        y = i[2],\n        g = i[4],\n        B = i[5],\n        h = i[6],\n        m = i[8],\n        b = i[9],\n        z = i[10],\n        S = !t(i),\n        k = 1e-6,\n        F = 1 - k;\n  if (s *= d, 1 === n) for (let t = 0; t < u; ++t) {\n    const o = 4 * e[t],\n          r = f[o],\n          n = f[o + 1],\n          i = f[o + 2],\n          c = f[o + 3];\n    let u = a * r + g * n + m * i,\n        v = p * r + B * n + b * i,\n        q = y * r + h * n + z * i;\n\n    if (S) {\n      const t = u * u + v * v + q * q;\n\n      if (t < F && t > k) {\n        const e = 1 / Math.sqrt(t);\n        u *= e, v *= e, q *= e;\n      }\n    }\n\n    l[s + 0] = u, l[s + 1] = v, l[s + 2] = q, l[s + 3] = c, s += d;\n  } else for (let t = 0; t < u; ++t) {\n    const o = 4 * e[t],\n          r = f[o],\n          i = f[o + 1],\n          c = f[o + 2],\n          u = f[o + 3];\n    let v = a * r + g * i + m * c,\n        q = p * r + B * i + b * c,\n        M = y * r + h * i + z * c;\n\n    if (S) {\n      const t = v * v + q * q + M * M;\n\n      if (t < F && t > k) {\n        const e = 1 / Math.sqrt(t);\n        v *= e, q *= e, M *= e;\n      }\n    }\n\n    for (let t = 0; t < n; ++t) l[s + 0] = v, l[s + 1] = q, l[s + 2] = M, l[s + 3] = u, s += d;\n  }\n}\n\nfunction y(t, e, f, o, r, s = 1) {\n  const n = o.typedBuffer,\n        i = o.typedBufferStride,\n        c = t.length;\n\n  if (r *= i, 1 === s) {\n    if (4 === f) for (let l = 0; l < c; ++l) {\n      const f = 4 * t[l];\n      n[r] = e[f], n[r + 1] = e[f + 1], n[r + 2] = e[f + 2], n[r + 3] = e[f + 3], r += i;\n    } else if (3 === f) for (let l = 0; l < c; ++l) {\n      const f = 3 * t[l];\n      n[r] = e[f], n[r + 1] = e[f + 1], n[r + 2] = e[f + 2], n[r + 3] = 255, r += i;\n    }\n  } else if (4 === f) for (let l = 0; l < c; ++l) {\n    const f = 4 * t[l];\n\n    for (let t = 0; t < s; ++t) n[r] = e[f], n[r + 1] = e[f + 1], n[r + 2] = e[f + 2], n[r + 3] = e[f + 3], r += i;\n  } else if (3 === f) for (let l = 0; l < c; ++l) {\n    const f = 3 * t[l];\n\n    for (let t = 0; t < s; ++t) n[r] = e[f], n[r + 1] = e[f + 1], n[r + 2] = e[f + 2], n[r + 3] = 255, r += i;\n  }\n}\n\nfunction g(t, i, c, l, d, g) {\n  for (const B of i.fieldNames) {\n    const i = t.vertexAttributes.get(B),\n          h = t.indices.get(B);\n    if (i && h) switch (B) {\n      case \"position\":\n        {\n          s(3 === i.size);\n          const t = d.getField(B, r);\n          t && u(h, i.data, c, t, g);\n          break;\n        }\n\n      case \"normal\":\n        {\n          s(3 === i.size);\n          const t = d.getField(B, r);\n          t && a(h, i.data, l, t, g);\n          break;\n        }\n\n      case \"uv0\":\n        {\n          s(2 === i.size);\n          const t = d.getField(B, o);\n          t && n(h, i.data, t, g);\n          break;\n        }\n\n      case \"color\":\n        {\n          s(3 === i.size || 4 === i.size);\n          const t = d.getField(B, f);\n          t && y(h, i.data, i.size, t, g);\n          break;\n        }\n\n      case \"symbolColor\":\n        {\n          s(3 === i.size || 4 === i.size);\n          const t = d.getField(B, f);\n          t && y(h, i.data, i.size, t, g);\n          break;\n        }\n\n      case \"tangent\":\n        {\n          s(4 === i.size);\n          const t = d.getField(B, e);\n          t && p(h, i.data, l, t, g);\n          break;\n        }\n    }\n  }\n}\n\nexport { l as writeBufferMat3f, d as writeBufferMat4f, n as writeBufferVec2, i as writeBufferVec3, c as writeBufferVec4, y as writeColor, g as writeDefaultAttributes, a as writeNormal, u as writePosition, p as writeTangent };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js"],"names":["p","t","BufferViewVec4f","e","BufferViewVec4u8","f","BufferViewVec2f","o","BufferViewVec3f","r","assert","s","n","typedBuffer","typedBufferStride","length","i","c","l","d","u","a","y","g","B","h","m","b","z","S","k","F","v","q","Math","sqrt","M","fieldNames","vertexAttributes","get","indices","size","getField","data","writeBufferMat3f","writeBufferMat4f","writeBufferVec2","writeBufferVec3","writeBufferVec4","writeColor","writeDefaultAttributes","writeNormal","writePosition","writeTangent"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{p as t}from\"../../../../../chunks/mat4.js\";import{BufferViewVec4f as e,BufferViewVec4u8 as f,BufferViewVec2f as o,BufferViewVec3f as r}from\"../../../../../geometry/support/buffer/BufferView.js\";import{assert as s}from\"../../lib/Util.js\";function n(t,e,f,o){const r=f.typedBuffer,s=f.typedBufferStride,n=t.length;o*=s;for(let i=0;i<n;++i){const f=2*t[i];r[o]=e[f],r[o+1]=e[f+1],o+=s}}function i(t,e,f,o,r){const s=f.typedBuffer,n=f.typedBufferStride,i=t.length;if(o*=n,null==r||1===r)for(let c=0;c<i;++c){const f=3*t[c];s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],o+=n}else for(let c=0;c<i;++c){const f=3*t[c];for(let t=0;t<r;++t)s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],o+=n}}function c(t,e,f,o,r=1){const s=f.typedBuffer,n=f.typedBufferStride,i=t.length;if(o*=n,1===r)for(let c=0;c<i;++c){const f=4*t[c];s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],s[o+3]=e[f+3],o+=n}else for(let c=0;c<i;++c){const f=4*t[c];for(let t=0;t<r;++t)s[o]=e[f],s[o+1]=e[f+1],s[o+2]=e[f+2],s[o+3]=e[f+3],o+=n}}function l(t,e,f,o){const r=f.typedBuffer,s=f.typedBufferStride,n=t.length;o*=s;for(let i=0;i<n;++i){const f=9*t[i];for(let t=0;t<9;++t)r[o+t]=e[f+t];o+=s}}function d(t,e,f,o){const r=f.typedBuffer,s=f.typedBufferStride,n=t.length;o*=s;for(let i=0;i<n;++i){const f=16*t[i];for(let t=0;t<16;++t)r[o+t]=e[f+t];o+=s}}function u(t,e,f,o,r,s=1){if(!f)return void i(t,e,o,r,s);const n=o.typedBuffer,c=o.typedBufferStride,l=t.length,d=f[0],u=f[1],a=f[2],p=f[4],y=f[5],g=f[6],B=f[8],h=f[9],m=f[10],b=f[12],z=f[13],S=f[14];if(r*=c,1===s)for(let i=0;i<l;++i){const f=3*t[i],o=e[f],s=e[f+1],l=e[f+2];n[r]=d*o+p*s+B*l+b,n[r+1]=u*o+y*s+h*l+z,n[r+2]=a*o+g*s+m*l+S,r+=c}else for(let i=0;i<l;++i){const f=3*t[i],o=e[f],l=e[f+1],k=e[f+2],F=d*o+p*l+B*k+b,v=u*o+y*l+h*k+z,q=a*o+g*l+m*k+S;for(let t=0;t<s;++t)n[r]=F,n[r+1]=v,n[r+2]=q,r+=c}}function a(e,f,o,r,s,n=1){if(!o)return void i(e,f,r,s,n);const c=o,l=r.typedBuffer,d=r.typedBufferStride,u=e.length,a=c[0],p=c[1],y=c[2],g=c[4],B=c[5],h=c[6],m=c[8],b=c[9],z=c[10],S=!t(c),k=1e-6,F=1-k;if(s*=d,1===n)for(let t=0;t<u;++t){const o=3*e[t],r=f[o],n=f[o+1],i=f[o+2];let c=a*r+g*n+m*i,u=p*r+B*n+b*i,v=y*r+h*n+z*i;if(S){const t=c*c+u*u+v*v;if(t<F&&t>k){const e=1/Math.sqrt(t);c*=e,u*=e,v*=e}}l[s+0]=c,l[s+1]=u,l[s+2]=v,s+=d}else for(let t=0;t<u;++t){const o=3*e[t],r=f[o],i=f[o+1],c=f[o+2];let u=a*r+g*i+m*c,v=p*r+B*i+b*c,q=y*r+h*i+z*c;if(S){const t=u*u+v*v+q*q;if(t<F&&t>k){const e=1/Math.sqrt(t);u*=e,v*=e,q*=e}}for(let t=0;t<n;++t)l[s+0]=u,l[s+1]=v,l[s+2]=q,s+=d}}function p(e,f,o,r,s,n=1){if(!o)return void c(e,f,r,s,n);const i=o,l=r.typedBuffer,d=r.typedBufferStride,u=e.length,a=i[0],p=i[1],y=i[2],g=i[4],B=i[5],h=i[6],m=i[8],b=i[9],z=i[10],S=!t(i),k=1e-6,F=1-k;if(s*=d,1===n)for(let t=0;t<u;++t){const o=4*e[t],r=f[o],n=f[o+1],i=f[o+2],c=f[o+3];let u=a*r+g*n+m*i,v=p*r+B*n+b*i,q=y*r+h*n+z*i;if(S){const t=u*u+v*v+q*q;if(t<F&&t>k){const e=1/Math.sqrt(t);u*=e,v*=e,q*=e}}l[s+0]=u,l[s+1]=v,l[s+2]=q,l[s+3]=c,s+=d}else for(let t=0;t<u;++t){const o=4*e[t],r=f[o],i=f[o+1],c=f[o+2],u=f[o+3];let v=a*r+g*i+m*c,q=p*r+B*i+b*c,M=y*r+h*i+z*c;if(S){const t=v*v+q*q+M*M;if(t<F&&t>k){const e=1/Math.sqrt(t);v*=e,q*=e,M*=e}}for(let t=0;t<n;++t)l[s+0]=v,l[s+1]=q,l[s+2]=M,l[s+3]=u,s+=d}}function y(t,e,f,o,r,s=1){const n=o.typedBuffer,i=o.typedBufferStride,c=t.length;if(r*=i,1===s){if(4===f)for(let l=0;l<c;++l){const f=4*t[l];n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=e[f+3],r+=i}else if(3===f)for(let l=0;l<c;++l){const f=3*t[l];n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=255,r+=i}}else if(4===f)for(let l=0;l<c;++l){const f=4*t[l];for(let t=0;t<s;++t)n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=e[f+3],r+=i}else if(3===f)for(let l=0;l<c;++l){const f=3*t[l];for(let t=0;t<s;++t)n[r]=e[f],n[r+1]=e[f+1],n[r+2]=e[f+2],n[r+3]=255,r+=i}}function g(t,i,c,l,d,g){for(const B of i.fieldNames){const i=t.vertexAttributes.get(B),h=t.indices.get(B);if(i&&h)switch(B){case\"position\":{s(3===i.size);const t=d.getField(B,r);t&&u(h,i.data,c,t,g);break}case\"normal\":{s(3===i.size);const t=d.getField(B,r);t&&a(h,i.data,l,t,g);break}case\"uv0\":{s(2===i.size);const t=d.getField(B,o);t&&n(h,i.data,t,g);break}case\"color\":{s(3===i.size||4===i.size);const t=d.getField(B,f);t&&y(h,i.data,i.size,t,g);break}case\"symbolColor\":{s(3===i.size||4===i.size);const t=d.getField(B,f);t&&y(h,i.data,i.size,t,g);break}case\"tangent\":{s(4===i.size);const t=d.getField(B,e);t&&p(h,i.data,l,t,g);break}}}}export{l as writeBufferMat3f,d as writeBufferMat4f,n as writeBufferVec2,i as writeBufferVec3,c as writeBufferVec4,y as writeColor,g as writeDefaultAttributes,a as writeNormal,u as writePosition,p as writeTangent};\n"]},"metadata":{},"sourceType":"module"}