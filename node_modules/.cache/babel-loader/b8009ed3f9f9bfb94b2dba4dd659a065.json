{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isAborted as s, createAbortError as t, isPromise as e } from \"../../core/promiseUtils.js\";\n\nclass r {\n  constructor() {\n    this._tasks = new Array();\n  }\n\n  get length() {\n    return this._tasks.length;\n  }\n\n  push(s, t, e) {\n    return new Promise((r, l) => this._tasks.push(new a(r, l, s, t, e)));\n  }\n\n  unshift(s, t, e) {\n    return new Promise((r, l) => this._tasks.unshift(new a(r, l, s, t, e)));\n  }\n\n  process() {\n    if (0 === this._tasks.length) return !1;\n\n    const r = this._tasks.shift();\n\n    try {\n      const a = s(r.signal);\n      if (a && !r.abortCallback) r.reject(t());else {\n        const s = a ? r.abortCallback(t()) : r.callback();\n        e(s) ? s.then(r.resolve, r.reject) : r.resolve(s);\n      }\n    } catch (a) {\n      r.reject(a);\n    }\n\n    return !0;\n  }\n\n  cancelAll() {\n    const s = t();\n\n    for (const t of this._tasks) if (t.abortCallback) {\n      const e = t.abortCallback(s);\n      t.resolve(e);\n    } else t.reject(s);\n\n    this._tasks.length = 0;\n  }\n\n}\n\nclass a {\n  constructor(s, t, e, r, a) {\n    this.resolve = s, this.reject = t, this.callback = e, this.signal = r, this.abortCallback = a;\n  }\n\n}\n\nexport default r;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/support/PromiseQueue.js"],"names":["isAborted","s","createAbortError","t","isPromise","e","r","constructor","_tasks","Array","length","push","Promise","l","a","unshift","process","shift","signal","abortCallback","reject","callback","then","resolve","cancelAll"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,SAAS,IAAIC,CAApB,EAAsBC,gBAAgB,IAAIC,CAA1C,EAA4CC,SAAS,IAAIC,CAAzD,QAA+D,4BAA/D;;AAA4F,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,GAAE;AAAC,SAAKC,MAAL,GAAY,IAAIC,KAAJ,EAAZ;AAAsB;;AAAU,MAANC,MAAM,GAAE;AAAC,WAAO,KAAKF,MAAL,CAAYE,MAAnB;AAA0B;;AAAAC,EAAAA,IAAI,CAACV,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,WAAO,IAAIO,OAAJ,CAAa,CAACN,CAAD,EAAGO,CAAH,KAAO,KAAKL,MAAL,CAAYG,IAAZ,CAAiB,IAAIG,CAAJ,CAAMR,CAAN,EAAQO,CAAR,EAAUZ,CAAV,EAAYE,CAAZ,EAAcE,CAAd,CAAjB,CAApB,CAAP;AAAgE;;AAAAU,EAAAA,OAAO,CAACd,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,WAAO,IAAIO,OAAJ,CAAa,CAACN,CAAD,EAAGO,CAAH,KAAO,KAAKL,MAAL,CAAYO,OAAZ,CAAoB,IAAID,CAAJ,CAAMR,CAAN,EAAQO,CAAR,EAAUZ,CAAV,EAAYE,CAAZ,EAAcE,CAAd,CAApB,CAApB,CAAP;AAAmE;;AAAAW,EAAAA,OAAO,GAAE;AAAC,QAAG,MAAI,KAAKR,MAAL,CAAYE,MAAnB,EAA0B,OAAM,CAAC,CAAP;;AAAS,UAAMJ,CAAC,GAAC,KAAKE,MAAL,CAAYS,KAAZ,EAAR;;AAA4B,QAAG;AAAC,YAAMH,CAAC,GAACb,CAAC,CAACK,CAAC,CAACY,MAAH,CAAT;AAAoB,UAAGJ,CAAC,IAAE,CAACR,CAAC,CAACa,aAAT,EAAuBb,CAAC,CAACc,MAAF,CAASjB,CAAC,EAAV,EAAvB,KAAyC;AAAC,cAAMF,CAAC,GAACa,CAAC,GAACR,CAAC,CAACa,aAAF,CAAgBhB,CAAC,EAAjB,CAAD,GAAsBG,CAAC,CAACe,QAAF,EAA/B;AAA4ChB,QAAAA,CAAC,CAACJ,CAAD,CAAD,GAAKA,CAAC,CAACqB,IAAF,CAAOhB,CAAC,CAACiB,OAAT,EAAiBjB,CAAC,CAACc,MAAnB,CAAL,GAAgCd,CAAC,CAACiB,OAAF,CAAUtB,CAAV,CAAhC;AAA6C;AAAC,KAA5J,CAA4J,OAAMa,CAAN,EAAQ;AAACR,MAAAA,CAAC,CAACc,MAAF,CAASN,CAAT;AAAY;;AAAA,WAAM,CAAC,CAAP;AAAS;;AAAAU,EAAAA,SAAS,GAAE;AAAC,UAAMvB,CAAC,GAACE,CAAC,EAAT;;AAAY,SAAI,MAAMA,CAAV,IAAe,KAAKK,MAApB,EAA2B,IAAGL,CAAC,CAACgB,aAAL,EAAmB;AAAC,YAAMd,CAAC,GAACF,CAAC,CAACgB,aAAF,CAAgBlB,CAAhB,CAAR;AAA2BE,MAAAA,CAAC,CAACoB,OAAF,CAAUlB,CAAV;AAAa,KAA5D,MAAiEF,CAAC,CAACiB,MAAF,CAASnB,CAAT;;AAAY,SAAKO,MAAL,CAAYE,MAAZ,GAAmB,CAAnB;AAAqB;;AAAloB;;AAAmoB,MAAMI,CAAN,CAAO;AAACP,EAAAA,WAAW,CAACN,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOC,CAAP,EAASQ,CAAT,EAAW;AAAC,SAAKS,OAAL,GAAatB,CAAb,EAAe,KAAKmB,MAAL,GAAYjB,CAA3B,EAA6B,KAAKkB,QAAL,GAAchB,CAA3C,EAA6C,KAAKa,MAAL,GAAYZ,CAAzD,EAA2D,KAAKa,aAAL,GAAmBL,CAA9E;AAAgF;;AAAxG;;AAAyG,eAAeR,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isAborted as s,createAbortError as t,isPromise as e}from\"../../core/promiseUtils.js\";class r{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(s,t,e){return new Promise(((r,l)=>this._tasks.push(new a(r,l,s,t,e))))}unshift(s,t,e){return new Promise(((r,l)=>this._tasks.unshift(new a(r,l,s,t,e))))}process(){if(0===this._tasks.length)return!1;const r=this._tasks.shift();try{const a=s(r.signal);if(a&&!r.abortCallback)r.reject(t());else{const s=a?r.abortCallback(t()):r.callback();e(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(a){r.reject(a)}return!0}cancelAll(){const s=t();for(const t of this._tasks)if(t.abortCallback){const e=t.abortCallback(s);t.resolve(e)}else t.reject(s);this._tasks.length=0}}class a{constructor(s,t,e,r,a){this.resolve=s,this.reject=t,this.callback=e,this.signal=r,this.abortCallback=a}}export default r;\n"]},"metadata":{},"sourceType":"module"}