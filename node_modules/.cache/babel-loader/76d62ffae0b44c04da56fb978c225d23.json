{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../Camera.js\";\nimport \"../../../geometry.js\";\nimport t from \"../../../Graphic.js\";\nimport n from \"../../../Viewpoint.js\";\nimport { result as r } from \"../../../core/asyncUtils.js\";\nimport \"../../../core/has.js\";\nimport a from \"../../../core/Error.js\";\nimport { isSome as o, isNone as i, unwrapOr as s, unwrap as c } from \"../../../core/maybe.js\";\nimport { eachAlways as l } from \"../../../core/promiseUtils.js\";\nimport { f as m, t as f } from \"../../../chunks/mat3.js\";\nimport { c as u } from \"../../../chunks/mat3f64.js\";\nimport { c as p } from \"../../../chunks/mat4f64.js\";\nimport { a as g, b as h, i as y, g as d, f as x, s as w, t as v } from \"../../../chunks/vec3.js\";\nimport { c as b } from \"../../../chunks/vec3f64.js\";\nimport { projectVectorToPoint as j, projectPointToVector as R, projectBuffer as G, computeLinearTransformation as z, projectVectorToVector as S } from \"../../../geometry/projection.js\";\nimport { empty as B, center as k, toRect as M, isPoint as Z, create as F, expandWithVec3 as A, expandWithAABB as E, width as U, height as P, depth as T } from \"../../../geometry/support/aaBoundingBox.js\";\nimport { isPoint as I, create as N } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { intersectsPoint as O } from \"../../../geometry/support/frustum.js\";\nimport { canProject as q, project as V } from \"../../../geometry/support/webMercatorUtils.js\";\nimport { cameraOnContentAlongViewDirection as W } from \"../camera/intersectionUtils.js\";\nimport { internalToExternal as C, scaleToDistance as Y, fromCenterDistance as $, fromExtent as D, scaleToResolution as X, zoomToScale as _, externalToInternal as H, computeScale as J, AsyncContext as K, distanceToScale as L, fromCenterScale as Q, directionToHeadingTilt as ee } from \"./cameraUtils.js\";\nimport { getElevationAtPoint as te } from \"./ElevationProvider.js\";\nimport { cyclicalDeg as ne } from \"./mathUtils.js\";\nimport re from \"../../../geometry/SpatialReference.js\";\nimport ae from \"../../../geometry/Extent.js\";\nimport oe from \"../../../geometry/Geometry.js\";\nimport ie from \"../../../geometry/Point.js\";\nconst se = .66;\n\nfunction ce(e) {\n  return 360 - ne.normalize(e);\n}\n\nfunction le(e) {\n  return ne.normalize(360 - e);\n}\n\nfunction me(e) {\n  return o(e) && e.resolver && e.resolver.reject(), null;\n}\n\nfunction fe(e, t) {\n  return o(e) && e.resolver && e.resolver.resolve(t), t;\n}\n\nfunction ue(e, t, n, r = null) {\n  if (!t) return me(r);\n  const a = e.spatialReference || re.WGS84;\n\n  if (o(t.camera)) {\n    const e = t.get(\"camera.position.spatialReference\");\n    if (!q(e, a)) return me(r);\n    const n = t.camera.clone();\n    return e.equals(a) || (n.position = V(n.position, a)), fe(r, n);\n  }\n\n  if (i(t.targetGeometry)) return me(r);\n  const s = t.get(\"targetGeometry.spatialReference\");\n  if (s && !q(s, a)) return me(r);\n  const c = C(e, e.state.camera);\n  let l = 1;\n\n  if (null != t.rotation && (c.heading = ce(t.rotation), l = 0), null != n && (c.tilt = n), \"point\" === t.targetGeometry.type) {\n    const n = t.targetGeometry;\n    let a;\n    const o = t.targetGeometry.clone();\n    return a = null != t.scale ? Y(e, t.scale, n.latitude) : e.state.camera.distance, $(e, o, a, c, l, r);\n  }\n\n  const m = t.targetGeometry.extent;\n  return D(e, m, c.heading, c.tilt, l, r);\n}\n\nfunction pe(e, t, r = null) {\n  return i(r) && (r = new n()), xe(e, null, t.clone(), r);\n}\n\nasync function ge(t, r, o) {\n  const i = Fe(t, r);\n  if (!i) throw new a(\"viewpointutils-create:no-target\", \"Missing target for creating viewpoint\");\n  const s = new e({\n    fov: t.camera.fov\n  }),\n        c = new n({\n    camera: s\n  });\n\n  if (i.target instanceof n) {\n    return Ae(await je(t, i.target, i, o, c));\n  }\n\n  if (i.target instanceof e) return Ae(Re(t, i.target, c));\n  const l = null != i.scale || null != i.zoom;\n\n  if (i.target instanceof ae) {\n    const e = i.target.xmin === i.target.xmax || i.target.ymin === i.target.ymax;\n    return Ae(l || e ? await ze(t, i, i.target.center, s, o, c) : await ke(t, i, i.target, s, o, c));\n  }\n\n  const m = {\n    boundingBox: B(),\n    hasZ: !1,\n    screenSpaceObjects: []\n  },\n        f = l ? ye(t, i) : void 0;\n\n  if (await be(t, i.target, f, m), isFinite(m.boundingBox[0])) {\n    let e;\n    if (k(m.boundingBox, Ue), Ce.x = Ue[0], Ce.y = Ue[1], Ce.z = Ue[2], Ce.spatialReference = t.spatialReference, isFinite(Ce.z) && m.hasZ ? e = Z(m.boundingBox) : (Ce.z = void 0, e = I(M(m.boundingBox, Ne))), l || e) return Ae(await ze(t, i, Ce, s, o, c));\n    const n = Ee(t, m.screenSpaceObjects);\n    return Ae(await Ze(t, i, Ce, m.boundingBox, n, s, o, c));\n  }\n\n  return i.position ? Ae(Se(t, i, s, c)) : Ae(await Be(t, i, s, o, c));\n}\n\nfunction he(e, t) {\n  return null == t.scale && null != t.zoom ? _(e, t.zoom) : t.scale;\n}\n\nfunction ye(e, t) {\n  return X(e, he(e, t));\n}\n\nfunction de(e, t) {\n  let n = !1;\n  return null != t.heading ? (e.heading = t.heading, n = !0) : null != t.rotation && (e.heading = ce(t.rotation), n = !0), null != t.tilt && (e.tilt = t.tilt, n = !0), null != t.fov && (e.fov = t.fov), n;\n}\n\nfunction xe(e, t, n, r) {\n  const a = e.spatialReference || re.WGS84;\n  return t = o(t) ? t : H(e, n), i(t) || (r.targetGeometry = j(t.center, e.renderSpatialReference, a), r.scale = J(e, t), r.rotation = le(n.heading), r.camera = n), r;\n}\n\nfunction we(e, t, n) {\n  if (!t) return;\n  if (!q(t.spatialReference, e.spatialReference)) throw new a(\"viewpointutils:incompatible-spatialreference\", `Spatial reference (${t.spatialReference ? t.spatialReference.wkid : \"unknown\"}) is incompatible with the view (${e.spatialReference.wkid})`, {\n    geometry: t\n  });\n  const r = [];\n\n  if (!t.hasZ && e.basemapTerrain) {\n    let n;\n\n    switch (t.type) {\n      case \"point\":\n        n = t;\n        break;\n\n      case \"multipoint\":\n      case \"polyline\":\n        n = t.extent.center;\n        break;\n\n      case \"mesh\":\n        n = t.origin;\n        break;\n\n      case \"extent\":\n        n = t.center;\n        break;\n\n      case \"polygon\":\n        n = t.centroid;\n    }\n\n    n && q(n, e.basemapTerrain.spatialReference) ? Ue[2] = s(te(e.elevationProvider, n), 0) : Ue[2] = 0;\n  }\n\n  (0, Ye[t.type])(t, e => {\n    r.push(e[0], e[1], e[2]);\n  }, Ue);\n  const o = r.length / 3;\n  if (0 === o) return;\n  const i = new Array(r.length);\n\n  if (G(r, t.spatialReference, 0, i, e.spatialReference, 0, o)) {\n    t.hasZ && (n.hasZ = !0);\n\n    for (let e = 0; e < i.length; e += 3) t.hasZ ? (Ue[0] = i[e + 0], Ue[1] = i[e + 1], Ue[2] = i[e + 2]) : (Ue[0] = i[e + 0], Ue[1] = i[e + 1]), A(n.boundingBox, Ue);\n  }\n}\n\nasync function ve(e, t, n, a) {\n  const o = await r(e.whenViewForGraphic(t));\n  if (!1 === o.ok || i(o.value) || !(\"whenGraphicBounds\" in o.value)) return void we(e, t.geometry, a);\n  const s = o.value,\n        c = await r(s.whenGraphicBounds(t, {\n    minDemResolution: n\n  }));\n  if (!1 === c.ok) return void we(e, t.geometry, a);\n  const {\n    screenSpaceObjects: l,\n    boundingBox: m\n  } = c.value;\n  E(a.boundingBox, m), l && l.forEach(e => {\n    a.screenSpaceObjects.push(e);\n  }), isFinite(m[2]) && (a.hasZ = !0);\n}\n\nasync function be(e, n, r, a) {\n  if (Array.isArray(n) && 2 === n.length) {\n    const t = n[0],\n          r = n[1];\n    if (\"number\" == typeof t && \"number\" == typeof r) return Ce.x = t, Ce.y = r, Ce.z = void 0, Ce.spatialReference = e.spatialReference.isGeographic ? e.spatialReference : re.WGS84, void we(e, Ce, a);\n  }\n\n  n && \"function\" == typeof n.map ? await l(n.map(t => be(e, t, r, a))) : n instanceof oe ? we(e, n, a) : n instanceof t && (await ve(e, n, r, a));\n}\n\nasync function je(e, t, n, r, a) {\n  if (o(t.camera)) return Re(e, t.camera, a);\n  a.scale = t.scale, a.rotation = t.rotation, a.targetGeometry = o(t.targetGeometry) ? t.targetGeometry.clone() : null, a.camera = null, null != n.heading ? a.rotation = le(n.heading) : null != n.rotation && (a.rotation = n.rotation);\n  const i = he(e, n);\n  null != i && (a.scale = i);\n  const s = new K(r);\n  return ue(e, a, n.tilt, s), a.camera = await s.resolver.promise, a;\n}\n\nfunction Re(e, t, n) {\n  const r = e.spatialReference,\n        a = t.position.spatialReference;\n  return q(a, r) ? ((t = t.clone()).fov = e.camera.fov, a.equals(r) || (t.position = V(t.position, r)), xe(e, null, t, n)) : null;\n}\n\nfunction Ge(e, t, n, r, a, o) {\n  const i = e.renderSpatialReference;\n  return R(n.position, qe, i), R(t, Ve, i), o.targetGeometry = new ie(t), a.position = new ie(n.position), x(Oe, Ve, qe), ee(e, qe, Oe, r.up, a), o.scale = L(e, y(qe, Ve), o.targetGeometry.latitude), o.rotation = le(a.heading), o.camera = a, o;\n}\n\nasync function ze(e, t, n, r, o, s) {\n  if (i(n)) throw new a(\"createfromcenter\", \"invalid point\");\n  s.targetGeometry = n.clone();\n  const c = W(e);\n  if (t.position) return Ge(e, s.targetGeometry, t, c, r, s);\n\n  if (t.zoomFactor) {\n    const r = c.distance / t.zoomFactor,\n          a = g(Ue, c.viewForward, -r);\n    c.eye = h(Ue, c.center, a), s.scale = L(e, r, n.latitude);\n  }\n\n  C(e, c, r);\n  const l = de(r, t) ? 0 : 1;\n\n  if (!t.zoomFactor) {\n    s.scale = he(e, t), null == s.scale && (R(n, Ue, e.renderSpatialReference), O(c.frustum, Ue) ? s.scale = L(e, y(c.eye, Ue), n.latitude) : s.scale = J(e, c));\n    const a = new K(o);\n    Q(e, s.targetGeometry, s.scale, r, l, a), s.camera = await a.resolver.promise;\n  }\n\n  return s;\n}\n\nfunction Se(e, t, n, r) {\n  const a = W(e);\n  return d(Oe, a.viewForward), ee(e, a.eye, Oe, a.up, We), n.position = new ie(t.position), n.heading = null != t.heading ? t.heading : We.heading, n.tilt = null != t.tilt ? t.tilt : We.tilt, xe(e, null, n, r);\n}\n\nasync function Be(e, t, n, r, a) {\n  const o = W(e);\n  return ze(e, t, j(o.center, e.renderSpatialReference, e.spatialReference), n, r, a);\n}\n\nasync function ke(e, t, n, r, a, o) {\n  o.targetGeometry = n.clone();\n  const i = W(e);\n  C(e, i, r);\n  const s = de(r, t) ? 0 : 1,\n        c = new K(a);\n  return D(e, n, r.heading, r.tilt, s, c), o.camera = await c.resolver.promise, o;\n}\n\nfunction Me(e, t, n, r, a) {\n  let o = 0;\n  n.hasZ ? o = n.z : e.basemapTerrain && (o = c(te(e.elevationProvider, n))), w(Ue, n.x, n.y, o), z(e.spatialReference, Ue, Pe, e.renderSpatialReference), m(Te, Pe), f(Te, Te), B(Ie);\n  const i = [[0, 1, 2], [3, 1, 2], [0, 4, 2], [3, 4, 2], [0, 1, 5], [3, 1, 5], [0, 4, 5], [3, 4, 5]];\n\n  for (let c = 0; c < i.length; c++) {\n    const t = i[c];\n    let n = r[t[2]];\n    isFinite(n) || (n = o), w(Ue, r[t[0]], r[t[1]], n), S(Ue, e.spatialReference, Ue, e.renderSpatialReference), A(Ie, v(Ue, Ue, Te));\n  }\n\n  const s = U(Ie),\n        l = P(Ie),\n        u = T(Ie),\n        p = 1 / Math.tan(t.fovX / 2),\n        g = 1 / Math.tan(t.fovY / 2),\n        h = .5 * Math.sqrt(s * s + u * u) * Math.max(g, p) + .5 * l,\n        y = .5 * l * g + .5 * Math.max(s, u);\n  return Math.max(h, y) / a;\n}\n\nasync function Ze(e, t, n, r, a, o, i, s) {\n  s.targetGeometry = n.clone();\n  const c = W(e),\n        l = Me(e, c, n, r, a);\n  C(e, c, o);\n  const m = de(o, t) ? 0 : 1;\n  s.scale = L(e, l, s.targetGeometry.latitude);\n  const f = new K(i);\n  return Q(e, s.targetGeometry, s.scale, o, m, f), s.camera = await f.resolver.promise, s;\n}\n\nfunction Fe(e, t) {\n  if (!t || !e.spatialReference) return null;\n  const n = {\n    target: null\n  };\n  if (\"declaredClass\" in t || Array.isArray(t)) n.target = t;else {\n    for (const e in t) n[e] = t[e];\n\n    t.center && !n.target && (n.target = t.center);\n  }\n  return n;\n}\n\nfunction Ae(e) {\n  return e && o(e.camera) && (e.rotation = le(e.camera.heading)), e;\n}\n\nfunction Ee(e, t) {\n  const n = se;\n  if (!t.length) return n;\n  let r = Number.NEGATIVE_INFINITY;\n\n  for (let a = 0; a < t.length; a++) {\n    const e = t[a].screenSpaceBoundingRect;\n    r = Math.max(r, Math.abs(e[0]), Math.abs(e[1]), Math.abs(e[2]), Math.abs(e[3]));\n  }\n\n  return n - r / Math.min(e.width, e.height) * 2;\n}\n\nconst Ue = b(),\n      Pe = p(),\n      Te = u(),\n      Ie = F(),\n      Ne = N(),\n      Oe = b(),\n      qe = b(),\n      Ve = b(),\n      We = {\n  heading: 0,\n  tilt: 0\n},\n      Ce = new ie(),\n      Ye = {\n  point(e, t, n) {\n    n[0] = e.x, n[1] = e.y, e.hasZ && (n[2] = e.z), t(n);\n  },\n\n  polygon(e, t, n) {\n    const r = e.hasZ;\n\n    for (let a = 0; a < e.rings.length; a++) {\n      const o = e.rings[a];\n\n      for (let e = 0; e < o.length; e++) n[0] = o[e][0], n[1] = o[e][1], r && (n[2] = o[e][2]), t(n);\n    }\n  },\n\n  polyline(e, t, n) {\n    const r = e.hasZ;\n\n    for (let a = 0; a < e.paths.length; a++) {\n      const o = e.paths[a];\n\n      for (let e = 0; e < o.length; e++) n[0] = o[e][0], n[1] = o[e][1], r && (n[2] = o[e][2]), t(n);\n    }\n  },\n\n  multipoint(e, t, n) {\n    const r = e.points,\n          a = e.hasZ;\n\n    for (let o = 0; o < r.length; o++) n[0] = r[o][0], n[1] = r[o][1], a && (n[2] = r[o][2]), t(n);\n  },\n\n  extent(e, t, n) {\n    e.hasZ ? (t(w(n, e.xmin, e.ymin, e.zmin)), t(w(n, e.xmax, e.ymin, e.zmin)), t(w(n, e.xmin, e.ymax, e.zmin)), t(w(n, e.xmax, e.ymax, e.zmin)), t(w(n, e.xmin, e.ymin, e.zmax)), t(w(n, e.xmax, e.ymin, e.zmax)), t(w(n, e.xmin, e.ymax, e.zmax)), t(w(n, e.xmax, e.ymax, e.zmax))) : (t(w(n, e.xmin, e.ymin, n[2])), t(w(n, e.xmax, e.ymin, n[2])), t(w(n, e.xmin, e.ymax, n[2])), t(w(n, e.xmax, e.ymax, n[2])));\n  },\n\n  mesh(e, t, n) {\n    const r = e.vertexAttributes && e.vertexAttributes.position;\n    if (r) for (let a = 0; a < r.length; a += 3) t(w(n, r[a + 0], r[a + 1], r[a + 2]));\n  }\n\n};\nexport { ge as create, pe as fromCamera, le as headingToRotation, ce as rotationToHeading, ue as toCamera };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/support/viewpointUtils.js"],"names":["e","t","n","result","r","a","isSome","o","isNone","i","unwrapOr","s","unwrap","c","eachAlways","l","f","m","u","p","g","b","h","y","d","x","w","v","projectVectorToPoint","j","projectPointToVector","R","projectBuffer","G","computeLinearTransformation","z","projectVectorToVector","S","empty","B","center","k","toRect","M","isPoint","Z","create","F","expandWithVec3","A","expandWithAABB","E","width","U","height","P","depth","T","I","N","intersectsPoint","O","canProject","q","project","V","cameraOnContentAlongViewDirection","W","internalToExternal","C","scaleToDistance","Y","fromCenterDistance","$","fromExtent","D","scaleToResolution","X","zoomToScale","_","externalToInternal","H","computeScale","J","AsyncContext","K","distanceToScale","L","fromCenterScale","Q","directionToHeadingTilt","ee","getElevationAtPoint","te","cyclicalDeg","ne","re","ae","oe","ie","se","ce","normalize","le","me","resolver","reject","fe","resolve","ue","spatialReference","WGS84","camera","get","clone","equals","position","targetGeometry","state","rotation","heading","tilt","type","scale","latitude","distance","extent","pe","xe","ge","Fe","fov","target","Ae","je","Re","zoom","xmin","xmax","ymin","ymax","ze","ke","boundingBox","hasZ","screenSpaceObjects","ye","be","isFinite","Ue","Ce","Ne","Ee","Ze","Se","Be","he","de","renderSpatialReference","we","wkid","geometry","basemapTerrain","origin","centroid","elevationProvider","Ye","push","length","Array","ve","whenViewForGraphic","ok","value","whenGraphicBounds","minDemResolution","forEach","isArray","isGeographic","map","promise","Ge","qe","Ve","Oe","up","zoomFactor","viewForward","eye","frustum","We","Me","Pe","Te","Ie","Math","tan","fovX","fovY","sqrt","max","Number","NEGATIVE_INFINITY","screenSpaceBoundingRect","abs","min","point","polygon","rings","polyline","paths","multipoint","points","zmin","zmax","mesh","vertexAttributes","fromCamera","headingToRotation","rotationToHeading","toCamera"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../Camera.js\";import\"../../../geometry.js\";import t from\"../../../Graphic.js\";import n from\"../../../Viewpoint.js\";import{result as r}from\"../../../core/asyncUtils.js\";import\"../../../core/has.js\";import a from\"../../../core/Error.js\";import{isSome as o,isNone as i,unwrapOr as s,unwrap as c}from\"../../../core/maybe.js\";import{eachAlways as l}from\"../../../core/promiseUtils.js\";import{f as m,t as f}from\"../../../chunks/mat3.js\";import{c as u}from\"../../../chunks/mat3f64.js\";import{c as p}from\"../../../chunks/mat4f64.js\";import{a as g,b as h,i as y,g as d,f as x,s as w,t as v}from\"../../../chunks/vec3.js\";import{c as b}from\"../../../chunks/vec3f64.js\";import{projectVectorToPoint as j,projectPointToVector as R,projectBuffer as G,computeLinearTransformation as z,projectVectorToVector as S}from\"../../../geometry/projection.js\";import{empty as B,center as k,toRect as M,isPoint as Z,create as F,expandWithVec3 as A,expandWithAABB as E,width as U,height as P,depth as T}from\"../../../geometry/support/aaBoundingBox.js\";import{isPoint as I,create as N}from\"../../../geometry/support/aaBoundingRect.js\";import{intersectsPoint as O}from\"../../../geometry/support/frustum.js\";import{canProject as q,project as V}from\"../../../geometry/support/webMercatorUtils.js\";import{cameraOnContentAlongViewDirection as W}from\"../camera/intersectionUtils.js\";import{internalToExternal as C,scaleToDistance as Y,fromCenterDistance as $,fromExtent as D,scaleToResolution as X,zoomToScale as _,externalToInternal as H,computeScale as J,AsyncContext as K,distanceToScale as L,fromCenterScale as Q,directionToHeadingTilt as ee}from\"./cameraUtils.js\";import{getElevationAtPoint as te}from\"./ElevationProvider.js\";import{cyclicalDeg as ne}from\"./mathUtils.js\";import re from\"../../../geometry/SpatialReference.js\";import ae from\"../../../geometry/Extent.js\";import oe from\"../../../geometry/Geometry.js\";import ie from\"../../../geometry/Point.js\";const se=.66;function ce(e){return 360-ne.normalize(e)}function le(e){return ne.normalize(360-e)}function me(e){return o(e)&&e.resolver&&e.resolver.reject(),null}function fe(e,t){return o(e)&&e.resolver&&e.resolver.resolve(t),t}function ue(e,t,n,r=null){if(!t)return me(r);const a=e.spatialReference||re.WGS84;if(o(t.camera)){const e=t.get(\"camera.position.spatialReference\");if(!q(e,a))return me(r);const n=t.camera.clone();return e.equals(a)||(n.position=V(n.position,a)),fe(r,n)}if(i(t.targetGeometry))return me(r);const s=t.get(\"targetGeometry.spatialReference\");if(s&&!q(s,a))return me(r);const c=C(e,e.state.camera);let l=1;if(null!=t.rotation&&(c.heading=ce(t.rotation),l=0),null!=n&&(c.tilt=n),\"point\"===t.targetGeometry.type){const n=t.targetGeometry;let a;const o=t.targetGeometry.clone();return a=null!=t.scale?Y(e,t.scale,n.latitude):e.state.camera.distance,$(e,o,a,c,l,r)}const m=t.targetGeometry.extent;return D(e,m,c.heading,c.tilt,l,r)}function pe(e,t,r=null){return i(r)&&(r=new n),xe(e,null,t.clone(),r)}async function ge(t,r,o){const i=Fe(t,r);if(!i)throw new a(\"viewpointutils-create:no-target\",\"Missing target for creating viewpoint\");const s=new e({fov:t.camera.fov}),c=new n({camera:s});if(i.target instanceof n){return Ae(await je(t,i.target,i,o,c))}if(i.target instanceof e)return Ae(Re(t,i.target,c));const l=null!=i.scale||null!=i.zoom;if(i.target instanceof ae){const e=i.target.xmin===i.target.xmax||i.target.ymin===i.target.ymax;return Ae(l||e?await ze(t,i,i.target.center,s,o,c):await ke(t,i,i.target,s,o,c))}const m={boundingBox:B(),hasZ:!1,screenSpaceObjects:[]},f=l?ye(t,i):void 0;if(await be(t,i.target,f,m),isFinite(m.boundingBox[0])){let e;if(k(m.boundingBox,Ue),Ce.x=Ue[0],Ce.y=Ue[1],Ce.z=Ue[2],Ce.spatialReference=t.spatialReference,isFinite(Ce.z)&&m.hasZ?e=Z(m.boundingBox):(Ce.z=void 0,e=I(M(m.boundingBox,Ne))),l||e)return Ae(await ze(t,i,Ce,s,o,c));const n=Ee(t,m.screenSpaceObjects);return Ae(await Ze(t,i,Ce,m.boundingBox,n,s,o,c))}return i.position?Ae(Se(t,i,s,c)):Ae(await Be(t,i,s,o,c))}function he(e,t){return null==t.scale&&null!=t.zoom?_(e,t.zoom):t.scale}function ye(e,t){return X(e,he(e,t))}function de(e,t){let n=!1;return null!=t.heading?(e.heading=t.heading,n=!0):null!=t.rotation&&(e.heading=ce(t.rotation),n=!0),null!=t.tilt&&(e.tilt=t.tilt,n=!0),null!=t.fov&&(e.fov=t.fov),n}function xe(e,t,n,r){const a=e.spatialReference||re.WGS84;return t=o(t)?t:H(e,n),i(t)||(r.targetGeometry=j(t.center,e.renderSpatialReference,a),r.scale=J(e,t),r.rotation=le(n.heading),r.camera=n),r}function we(e,t,n){if(!t)return;if(!q(t.spatialReference,e.spatialReference))throw new a(\"viewpointutils:incompatible-spatialreference\",`Spatial reference (${t.spatialReference?t.spatialReference.wkid:\"unknown\"}) is incompatible with the view (${e.spatialReference.wkid})`,{geometry:t});const r=[];if(!t.hasZ&&e.basemapTerrain){let n;switch(t.type){case\"point\":n=t;break;case\"multipoint\":case\"polyline\":n=t.extent.center;break;case\"mesh\":n=t.origin;break;case\"extent\":n=t.center;break;case\"polygon\":n=t.centroid}n&&q(n,e.basemapTerrain.spatialReference)?Ue[2]=s(te(e.elevationProvider,n),0):Ue[2]=0}(0,Ye[t.type])(t,(e=>{r.push(e[0],e[1],e[2])}),Ue);const o=r.length/3;if(0===o)return;const i=new Array(r.length);if(G(r,t.spatialReference,0,i,e.spatialReference,0,o)){t.hasZ&&(n.hasZ=!0);for(let e=0;e<i.length;e+=3)t.hasZ?(Ue[0]=i[e+0],Ue[1]=i[e+1],Ue[2]=i[e+2]):(Ue[0]=i[e+0],Ue[1]=i[e+1]),A(n.boundingBox,Ue)}}async function ve(e,t,n,a){const o=await r(e.whenViewForGraphic(t));if(!1===o.ok||i(o.value)||!(\"whenGraphicBounds\"in o.value))return void we(e,t.geometry,a);const s=o.value,c=await r(s.whenGraphicBounds(t,{minDemResolution:n}));if(!1===c.ok)return void we(e,t.geometry,a);const{screenSpaceObjects:l,boundingBox:m}=c.value;E(a.boundingBox,m),l&&l.forEach((e=>{a.screenSpaceObjects.push(e)})),isFinite(m[2])&&(a.hasZ=!0)}async function be(e,n,r,a){if(Array.isArray(n)&&2===n.length){const t=n[0],r=n[1];if(\"number\"==typeof t&&\"number\"==typeof r)return Ce.x=t,Ce.y=r,Ce.z=void 0,Ce.spatialReference=e.spatialReference.isGeographic?e.spatialReference:re.WGS84,void we(e,Ce,a)}n&&\"function\"==typeof n.map?await l(n.map((t=>be(e,t,r,a)))):n instanceof oe?we(e,n,a):n instanceof t&&await ve(e,n,r,a)}async function je(e,t,n,r,a){if(o(t.camera))return Re(e,t.camera,a);a.scale=t.scale,a.rotation=t.rotation,a.targetGeometry=o(t.targetGeometry)?t.targetGeometry.clone():null,a.camera=null,null!=n.heading?a.rotation=le(n.heading):null!=n.rotation&&(a.rotation=n.rotation);const i=he(e,n);null!=i&&(a.scale=i);const s=new K(r);return ue(e,a,n.tilt,s),a.camera=await s.resolver.promise,a}function Re(e,t,n){const r=e.spatialReference,a=t.position.spatialReference;return q(a,r)?((t=t.clone()).fov=e.camera.fov,a.equals(r)||(t.position=V(t.position,r)),xe(e,null,t,n)):null}function Ge(e,t,n,r,a,o){const i=e.renderSpatialReference;return R(n.position,qe,i),R(t,Ve,i),o.targetGeometry=new ie(t),a.position=new ie(n.position),x(Oe,Ve,qe),ee(e,qe,Oe,r.up,a),o.scale=L(e,y(qe,Ve),o.targetGeometry.latitude),o.rotation=le(a.heading),o.camera=a,o}async function ze(e,t,n,r,o,s){if(i(n))throw new a(\"createfromcenter\",\"invalid point\");s.targetGeometry=n.clone();const c=W(e);if(t.position)return Ge(e,s.targetGeometry,t,c,r,s);if(t.zoomFactor){const r=c.distance/t.zoomFactor,a=g(Ue,c.viewForward,-r);c.eye=h(Ue,c.center,a),s.scale=L(e,r,n.latitude)}C(e,c,r);const l=de(r,t)?0:1;if(!t.zoomFactor){s.scale=he(e,t),null==s.scale&&(R(n,Ue,e.renderSpatialReference),O(c.frustum,Ue)?s.scale=L(e,y(c.eye,Ue),n.latitude):s.scale=J(e,c));const a=new K(o);Q(e,s.targetGeometry,s.scale,r,l,a),s.camera=await a.resolver.promise}return s}function Se(e,t,n,r){const a=W(e);return d(Oe,a.viewForward),ee(e,a.eye,Oe,a.up,We),n.position=new ie(t.position),n.heading=null!=t.heading?t.heading:We.heading,n.tilt=null!=t.tilt?t.tilt:We.tilt,xe(e,null,n,r)}async function Be(e,t,n,r,a){const o=W(e);return ze(e,t,j(o.center,e.renderSpatialReference,e.spatialReference),n,r,a)}async function ke(e,t,n,r,a,o){o.targetGeometry=n.clone();const i=W(e);C(e,i,r);const s=de(r,t)?0:1,c=new K(a);return D(e,n,r.heading,r.tilt,s,c),o.camera=await c.resolver.promise,o}function Me(e,t,n,r,a){let o=0;n.hasZ?o=n.z:e.basemapTerrain&&(o=c(te(e.elevationProvider,n))),w(Ue,n.x,n.y,o),z(e.spatialReference,Ue,Pe,e.renderSpatialReference),m(Te,Pe),f(Te,Te),B(Ie);const i=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(let c=0;c<i.length;c++){const t=i[c];let n=r[t[2]];isFinite(n)||(n=o),w(Ue,r[t[0]],r[t[1]],n),S(Ue,e.spatialReference,Ue,e.renderSpatialReference),A(Ie,v(Ue,Ue,Te))}const s=U(Ie),l=P(Ie),u=T(Ie),p=1/Math.tan(t.fovX/2),g=1/Math.tan(t.fovY/2),h=.5*Math.sqrt(s*s+u*u)*Math.max(g,p)+.5*l,y=.5*l*g+.5*Math.max(s,u);return Math.max(h,y)/a}async function Ze(e,t,n,r,a,o,i,s){s.targetGeometry=n.clone();const c=W(e),l=Me(e,c,n,r,a);C(e,c,o);const m=de(o,t)?0:1;s.scale=L(e,l,s.targetGeometry.latitude);const f=new K(i);return Q(e,s.targetGeometry,s.scale,o,m,f),s.camera=await f.resolver.promise,s}function Fe(e,t){if(!t||!e.spatialReference)return null;const n={target:null};if(\"declaredClass\"in t||Array.isArray(t))n.target=t;else{for(const e in t)n[e]=t[e];t.center&&!n.target&&(n.target=t.center)}return n}function Ae(e){return e&&o(e.camera)&&(e.rotation=le(e.camera.heading)),e}function Ee(e,t){const n=se;if(!t.length)return n;let r=Number.NEGATIVE_INFINITY;for(let a=0;a<t.length;a++){const e=t[a].screenSpaceBoundingRect;r=Math.max(r,Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2]),Math.abs(e[3]))}return n-r/Math.min(e.width,e.height)*2}const Ue=b(),Pe=p(),Te=u(),Ie=F(),Ne=N(),Oe=b(),qe=b(),Ve=b(),We={heading:0,tilt:0},Ce=new ie,Ye={point(e,t,n){n[0]=e.x,n[1]=e.y,e.hasZ&&(n[2]=e.z),t(n)},polygon(e,t,n){const r=e.hasZ;for(let a=0;a<e.rings.length;a++){const o=e.rings[a];for(let e=0;e<o.length;e++)n[0]=o[e][0],n[1]=o[e][1],r&&(n[2]=o[e][2]),t(n)}},polyline(e,t,n){const r=e.hasZ;for(let a=0;a<e.paths.length;a++){const o=e.paths[a];for(let e=0;e<o.length;e++)n[0]=o[e][0],n[1]=o[e][1],r&&(n[2]=o[e][2]),t(n)}},multipoint(e,t,n){const r=e.points,a=e.hasZ;for(let o=0;o<r.length;o++)n[0]=r[o][0],n[1]=r[o][1],a&&(n[2]=r[o][2]),t(n)},extent(e,t,n){e.hasZ?(t(w(n,e.xmin,e.ymin,e.zmin)),t(w(n,e.xmax,e.ymin,e.zmin)),t(w(n,e.xmin,e.ymax,e.zmin)),t(w(n,e.xmax,e.ymax,e.zmin)),t(w(n,e.xmin,e.ymin,e.zmax)),t(w(n,e.xmax,e.ymin,e.zmax)),t(w(n,e.xmin,e.ymax,e.zmax)),t(w(n,e.xmax,e.ymax,e.zmax))):(t(w(n,e.xmin,e.ymin,n[2])),t(w(n,e.xmax,e.ymin,n[2])),t(w(n,e.xmin,e.ymax,n[2])),t(w(n,e.xmax,e.ymax,n[2])))},mesh(e,t,n){const r=e.vertexAttributes&&e.vertexAttributes.position;if(r)for(let a=0;a<r.length;a+=3)t(w(n,r[a+0],r[a+1],r[a+2]))}};export{ge as create,pe as fromCamera,le as headingToRotation,ce as rotationToHeading,ue as toCamera};\n"]},"metadata":{},"sourceType":"module"}