{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"./BaseBucket.js\";\n\nclass t extends e {\n  constructor(e, t, r, i, c) {\n    super(e, t, r), this.type = 4, this._circleVertexBuffer = i, this._circleIndexBuffer = c;\n  }\n\n  get circleIndexStart() {\n    return this._circleIndexStart;\n  }\n\n  get circleIndexCount() {\n    return this._circleIndexCount;\n  }\n\n  processFeatures(e) {\n    const t = this._circleVertexBuffer,\n          r = this._circleIndexBuffer;\n    this._circleIndexStart = 3 * r.index, this._circleIndexCount = 0;\n    const i = this.layer,\n          c = this.zoom;\n    e && e.setExtent(this.layerExtent);\n\n    for (const s of this._features) {\n      const n = s.getGeometry(e);\n      if (!n) continue;\n      const l = i.circleMaterial.encodeAttributes(s, c, i);\n\n      for (const e of n) if (e) for (const i of e) {\n        const e = t.index;\n        t.add(i.x, i.y, 0, 0, l), t.add(i.x, i.y, 0, 1, l), t.add(i.x, i.y, 1, 0, l), t.add(i.x, i.y, 1, 1, l), r.add(e + 0, e + 1, e + 2), r.add(e + 1, e + 2, e + 3), this._circleIndexCount += 6;\n      }\n    }\n  }\n\n  serialize() {\n    let e = 6;\n    e += this.layerUIDs.length, e += this._circleVertexBuffer.array.length, e += this._circleIndexBuffer.array.length;\n    const t = new Uint32Array(e),\n          r = new Int32Array(t.buffer);\n    let i = 0;\n    t[i++] = this.type, t[i++] = this.layerUIDs.length;\n\n    for (let c = 0; c < this.layerUIDs.length; c++) t[i++] = this.layerUIDs[c];\n\n    t[i++] = this._circleIndexStart, t[i++] = this._circleIndexCount, t[i++] = this._circleVertexBuffer.array.length;\n\n    for (let c = 0; c < this._circleVertexBuffer.array.length; c++) r[i++] = this._circleVertexBuffer.array[c];\n\n    t[i++] = this._circleIndexBuffer.array.length;\n\n    for (let c = 0; c < this._circleIndexBuffer.array.length; c++) t[i++] = this._circleIndexBuffer.array[c];\n\n    return t.buffer;\n  }\n\n}\n\nexport default t;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/2d/engine/vectorTiles/buckets/CircleBucket.js"],"names":["e","t","constructor","r","i","c","type","_circleVertexBuffer","_circleIndexBuffer","circleIndexStart","_circleIndexStart","circleIndexCount","_circleIndexCount","processFeatures","index","layer","zoom","setExtent","layerExtent","s","_features","n","getGeometry","l","circleMaterial","encodeAttributes","add","x","y","serialize","layerUIDs","length","array","Uint32Array","Int32Array","buffer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"./BaseBucket.js\";class t extends e{constructor(e,t,r,i,c){super(e,t,r),this.type=4,this._circleVertexBuffer=i,this._circleIndexBuffer=c}get circleIndexStart(){return this._circleIndexStart}get circleIndexCount(){return this._circleIndexCount}processFeatures(e){const t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;const i=this.layer,c=this.zoom;e&&e.setExtent(this.layerExtent);for(const s of this._features){const n=s.getGeometry(e);if(!n)continue;const l=i.circleMaterial.encodeAttributes(s,c,i);for(const e of n)if(e)for(const i of e){const e=t.index;t.add(i.x,i.y,0,0,l),t.add(i.x,i.y,0,1,l),t.add(i.x,i.y,1,0,l),t.add(i.x,i.y,1,1,l),r.add(e+0,e+1,e+2),r.add(e+1,e+2,e+3),this._circleIndexCount+=6}}}serialize(){let e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;const t=new Uint32Array(e),r=new Int32Array(t.buffer);let i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(let c=0;c<this.layerUIDs.length;c++)t[i++]=this.layerUIDs[c];t[i++]=this._circleIndexStart,t[i++]=this._circleIndexCount,t[i++]=this._circleVertexBuffer.array.length;for(let c=0;c<this._circleVertexBuffer.array.length;c++)r[i++]=this._circleVertexBuffer.array[c];t[i++]=this._circleIndexBuffer.array.length;for(let c=0;c<this._circleIndexBuffer.array.length;c++)t[i++]=this._circleIndexBuffer.array[c];return t.buffer}}export default t;\n"]},"metadata":{},"sourceType":"module"}