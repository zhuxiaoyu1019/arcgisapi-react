{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { createResolver as e } from \"../../../../../core/promiseUtils.js\";\n\nclass r {\n  constructor() {\n    this._resolver = null;\n  }\n\n  isHeld() {\n    return !!this._resolver;\n  }\n\n  async acquire() {\n    if (!this._resolver) return this._resolver = e(), Promise.resolve();\n    await this._resolver.promise, await this.acquire();\n  }\n\n  release() {\n    const e = this._resolver;\n    this._resolver = null, e.resolve();\n  }\n\n}\n\nasync function s(e, r, s) {\n  try {\n    await e.acquire(), await r(s), e.release();\n  } catch (t) {\n    throw e.release(), t;\n  }\n}\n\nexport default r;\nexport { s as withLock };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/2d/engine/webgl/util/Lock.js"],"names":["createResolver","e","r","constructor","_resolver","isHeld","acquire","Promise","resolve","promise","release","s","t","withLock"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,cAAc,IAAIC,CAAzB,QAA+B,qCAA/B;;AAAqE,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,GAAE;AAAC,SAAKC,SAAL,GAAe,IAAf;AAAoB;;AAAAC,EAAAA,MAAM,GAAE;AAAC,WAAM,CAAC,CAAC,KAAKD,SAAb;AAAuB;;AAAa,QAAPE,OAAO,GAAE;AAAC,QAAG,CAAC,KAAKF,SAAT,EAAmB,OAAO,KAAKA,SAAL,GAAeH,CAAC,EAAhB,EAAmBM,OAAO,CAACC,OAAR,EAA1B;AAA4C,UAAM,KAAKJ,SAAL,CAAeK,OAArB,EAA6B,MAAM,KAAKH,OAAL,EAAnC;AAAkD;;AAAAI,EAAAA,OAAO,GAAE;AAAC,UAAMT,CAAC,GAAC,KAAKG,SAAb;AAAuB,SAAKA,SAAL,GAAe,IAAf,EAAoBH,CAAC,CAACO,OAAF,EAApB;AAAgC;;AAArQ;;AAAsQ,eAAeG,CAAf,CAAiBV,CAAjB,EAAmBC,CAAnB,EAAqBS,CAArB,EAAuB;AAAC,MAAG;AAAC,UAAMV,CAAC,CAACK,OAAF,EAAN,EAAkB,MAAMJ,CAAC,CAACS,CAAD,CAAzB,EAA6BV,CAAC,CAACS,OAAF,EAA7B;AAAyC,GAA7C,CAA6C,OAAME,CAAN,EAAQ;AAAC,UAAMX,CAAC,CAACS,OAAF,IAAYE,CAAlB;AAAoB;AAAC;;AAAA,eAAeV,CAAf;AAAiB,SAAOS,CAAC,IAAIE,QAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{createResolver as e}from\"../../../../../core/promiseUtils.js\";class r{constructor(){this._resolver=null}isHeld(){return!!this._resolver}async acquire(){if(!this._resolver)return this._resolver=e(),Promise.resolve();await this._resolver.promise,await this.acquire()}release(){const e=this._resolver;this._resolver=null,e.resolve()}}async function s(e,r,s){try{await e.acquire(),await r(s),e.release()}catch(t){throw e.release(),t}}export default r;export{s as withLock};\n"]},"metadata":{},"sourceType":"module"}