{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Evented.js\";\nimport { someMap as t } from \"../../../core/MapUtils.js\";\n\nclass s extends e {\n  constructor() {\n    super(...arguments), this._map = new Map();\n  }\n\n  clear() {\n    if (this._map.size > 0) {\n      const e = this.toArray();\n      this._map.clear(), this.emit(\"change\", {\n        added: [],\n        removed: e\n      });\n    }\n  }\n\n  get length() {\n    return this._map.size;\n  }\n\n  get(e) {\n    return this._map.get(e);\n  }\n\n  addMany(e) {\n    if (0 === e.length) return;\n    const t = new Set();\n\n    for (let r = 0; r < e.length; r++) {\n      const s = e[r],\n            o = s.objectId,\n            n = this._map.get(o);\n\n      n ? (t.add(o), s !== n && (e[r] = n), ++n.refCount) : (s.refCount = 1, this._map.set(o, s));\n    }\n\n    const s = t.size > 0 ? e.filter(e => !t.has(e.objectId)) : e;\n    s.length > 0 && this.emit(\"change\", {\n      added: s,\n      removed: []\n    });\n  }\n\n  removeMany(e) {\n    const t = [];\n\n    for (const s of e) {\n      const e = s.objectId,\n            r = this._map.get(e);\n\n      null != r && --r.refCount <= 0 && (this._map.delete(e), t.push(s));\n    }\n\n    t.length > 0 && this.emit(\"change\", {\n      added: [],\n      removed: t\n    });\n  }\n\n  removeManyByObjectId(e) {\n    const t = [];\n\n    for (const s of e) {\n      const e = this._map.get(s);\n\n      null != e && --e.refCount <= 0 && (this._map.delete(s), t.push(e));\n    }\n\n    t.length > 0 && this.emit(\"change\", {\n      added: [],\n      removed: t\n    });\n  }\n\n  toArray() {\n    return [...this._map.values()];\n  }\n\n  find(e) {\n    let s;\n    return t(this._map, t => !!e(t) && (s = t, !0)), s;\n  }\n\n  forEach(e) {\n    this._map.forEach(t => e(t));\n  }\n\n}\n\nexport { s as GraphicsMap };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/support/GraphicsMap.js"],"names":["e","someMap","t","s","constructor","arguments","_map","Map","clear","size","toArray","emit","added","removed","length","get","addMany","Set","r","o","objectId","n","add","refCount","set","filter","has","removeMany","delete","push","removeManyByObjectId","values","find","forEach","GraphicsMap"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import{someMap as t}from\"../../../core/MapUtils.js\";class s extends e{constructor(){super(...arguments),this._map=new Map}clear(){if(this._map.size>0){const e=this.toArray();this._map.clear(),this.emit(\"change\",{added:[],removed:e})}}get length(){return this._map.size}get(e){return this._map.get(e)}addMany(e){if(0===e.length)return;const t=new Set;for(let r=0;r<e.length;r++){const s=e[r],o=s.objectId,n=this._map.get(o);n?(t.add(o),s!==n&&(e[r]=n),++n.refCount):(s.refCount=1,this._map.set(o,s))}const s=t.size>0?e.filter((e=>!t.has(e.objectId))):e;s.length>0&&this.emit(\"change\",{added:s,removed:[]})}removeMany(e){const t=[];for(const s of e){const e=s.objectId,r=this._map.get(e);null!=r&&--r.refCount<=0&&(this._map.delete(e),t.push(s))}t.length>0&&this.emit(\"change\",{added:[],removed:t})}removeManyByObjectId(e){const t=[];for(const s of e){const e=this._map.get(s);null!=e&&--e.refCount<=0&&(this._map.delete(s),t.push(e))}t.length>0&&this.emit(\"change\",{added:[],removed:t})}toArray(){return[...this._map.values()]}find(e){let s;return t(this._map,(t=>!!e(t)&&(s=t,!0))),s}forEach(e){this._map.forEach((t=>e(t)))}}export{s as GraphicsMap};\n"]},"metadata":{},"sourceType":"module"}