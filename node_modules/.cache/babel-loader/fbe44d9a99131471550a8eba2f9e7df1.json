{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isNone as e, isSome as t } from \"../../../../core/maybe.js\";\nimport { Vertex as i, Edge as s } from \"../EditGeometry.js\";\n\nclass h {\n  constructor(e, t, i) {\n    this.editGeometry = e, this.component = t, this.pos = i, this.addedVertex = null, this.originalEdge = null, this.left = null, this.right = null;\n  }\n\n  apply() {\n    let h = \"redo\";\n    e(this.addedVertex) && (h = \"apply\", this.addedVertex = new i(this.component));\n    const d = this.component.getLastVertex();\n    if (e(d)) this.component.vertices.push(this.addedVertex), this.addedVertex.pos = this.pos, this.addedVertex.index = 0;else {\n      let i = null;\n      d.right && (this.originalEdge = d.right, i = this.originalEdge.right, this.component.edges.splice(this.component.edges.indexOf(this.originalEdge), 1)), this.component.vertices.push(this.addedVertex), this.addedVertex.pos = this.pos, e(this.left) && (this.left = new s(this.component, d, this.addedVertex)), this.component.edges.push(this.left), d.right = this.left, t(this.originalEdge) && t(i) && (e(this.right) && (this.right = new s(this.component, this.addedVertex, i)), this.component.edges.push(this.right), i.left = this.right), this.component.updateVertexIndex(this.addedVertex, d.index + 1);\n    }\n    const n = {\n      addedVertices: [this.addedVertex],\n      operation: h\n    };\n    this.editGeometry.emit(\"change\", n);\n  }\n\n  undo() {\n    if (e(this.addedVertex)) return null;\n    this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex), 1), t(this.left) && (this.component.edges.splice(this.component.edges.indexOf(this.left), 1), this.left.left.right = null), t(this.right) && (this.component.edges.splice(this.component.edges.indexOf(this.right), 1), this.right.right.left = null), t(this.originalEdge) && (this.component.edges.push(this.originalEdge), this.originalEdge.left.right = this.originalEdge, this.originalEdge.right.left = this.originalEdge), t(this.left) ? this.component.updateVertexIndex(this.left.left, this.left.left.index) : this.component.updateVertexIndex(this.addedVertex, 0);\n    const i = {\n      removedVertices: [this.addedVertex],\n      operation: \"undo\"\n    };\n    this.editGeometry.emit(\"change\", i);\n  }\n\n  accumulate() {\n    return !1;\n  }\n\n}\n\nexport { h as AppendVertex };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/interactive/editGeometry/operations/AppendVertex.js"],"names":["isNone","e","isSome","t","Vertex","i","Edge","s","h","constructor","editGeometry","component","pos","addedVertex","originalEdge","left","right","apply","d","getLastVertex","vertices","push","index","edges","splice","indexOf","updateVertexIndex","n","addedVertices","operation","emit","undo","removedVertices","accumulate","AppendVertex"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../core/maybe.js\";import{Vertex as i,Edge as s}from\"../EditGeometry.js\";class h{constructor(e,t,i){this.editGeometry=e,this.component=t,this.pos=i,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}apply(){let h=\"redo\";e(this.addedVertex)&&(h=\"apply\",this.addedVertex=new i(this.component));const d=this.component.getLastVertex();if(e(d))this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{let i=null;d.right&&(this.originalEdge=d.right,i=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,e(this.left)&&(this.left=new s(this.component,d,this.addedVertex)),this.component.edges.push(this.left),d.right=this.left,t(this.originalEdge)&&t(i)&&(e(this.right)&&(this.right=new s(this.component,this.addedVertex,i)),this.component.edges.push(this.right),i.left=this.right),this.component.updateVertexIndex(this.addedVertex,d.index+1)}const n={addedVertices:[this.addedVertex],operation:h};this.editGeometry.emit(\"change\",n)}undo(){if(e(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),t(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),t(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),t(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),t(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);const i={removedVertices:[this.addedVertex],operation:\"undo\"};this.editGeometry.emit(\"change\",i)}accumulate(){return!1}}export{h as AppendVertex};\n"]},"metadata":{},"sourceType":"module"}