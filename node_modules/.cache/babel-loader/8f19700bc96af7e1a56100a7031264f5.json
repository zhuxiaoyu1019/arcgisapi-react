{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport { deg2rad as t, floatEqualAbsolute as i, floatEqualRelative as s } from \"../../../core/mathUtils.js\";\nimport { isSome as r } from \"../../../core/maybe.js\";\nimport { getMetersPerUnitForSR as l } from \"../../../core/unitUtils.js\";\nimport o from \"../../../geometry/Extent.js\";\nimport { canProjectToWGS84ComparableLonLat as n } from \"../../../geometry/projection.js\";\nimport a from \"../../../geometry/SpatialReference.js\";\nimport { create as c } from \"../../../geometry/support/aaBoundingRect.js\";\nimport { isMars as h, isMoon as u } from \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { x2lon as m, y2lat as p } from \"../../../geometry/support/webMercatorUtils.js\";\nimport f from \"../../../layers/support/TileInfo.js\";\nconst g = 12;\n\nclass x {\n  constructor(e) {\n    const t = x.checkUnsupported(e);\n    if (t) throw t;\n    this.spatialReference = e.spatialReference, this._isWebMercator = this.spatialReference.isWebMercator, this._isGCS = n(this.spatialReference) || h(this.spatialReference) || u(this.spatialReference), this.origin = [e.origin.x, e.origin.y], this.pixelSize = e.size[0], this.dpi = e.dpi;\n    const i = e.lods.reduce(function (e, t, i) {\n      return t.level < e.min && (e.min = t.level, e.minIndex = i), e.max = Math.max(e.max, t.level), e;\n    }, {\n      min: 1 / 0,\n      minIndex: 0,\n      max: -1 / 0\n    }),\n          s = e.lods[i.minIndex],\n          r = 2 ** s.level;\n    let l = s.resolution * r,\n        o = s.scale * r;\n    this.levels = new Array(i.max + 1);\n\n    for (let n = 0; n < this.levels.length; n++) this.levels[n] = {\n      resolution: l,\n      scale: o,\n      tileSize: [l * e.size[0], l * e.size[1]]\n    }, l /= 2, o /= 2;\n  }\n\n  clone() {\n    return new x(this.toTileInfo());\n  }\n\n  toTileInfo() {\n    return new f({\n      dpi: this.dpi,\n      origin: {\n        x: this.origin[0],\n        y: this.origin[1],\n        spatialReference: this.spatialReference\n      },\n      size: [this.pixelSize, this.pixelSize],\n      spatialReference: this.spatialReference,\n      lods: this.levels.map((e, t) => ({\n        level: t,\n        scale: e.scale,\n        resolution: e.resolution\n      }))\n    });\n  }\n\n  getExtent(e, t, i, s) {\n    const r = this.levels[e],\n          l = r.tileSize[0],\n          o = r.tileSize[1];\n    s[0] = this.origin[0] + i * l, s[2] = s[0] + l, s[3] = this.origin[1] - t * o, s[1] = s[3] - o;\n  }\n\n  convertExtentToRadians(e, i) {\n    this._isWebMercator ? (i[0] = m(e[0]), i[1] = p(e[1]), i[2] = m(e[2]), i[3] = p(e[3])) : this._isGCS && (i[0] = t(e[0]), i[1] = t(e[1]), i[2] = t(e[2]), i[3] = t(e[3]));\n  }\n\n  getExtentGeometry(e, t, i, s = new o()) {\n    return this.getExtent(e, t, i, v), s.spatialReference = this.spatialReference, s.xmin = v[0], s.ymin = v[1], s.xmax = v[2], s.ymax = v[3], s.zmin = void 0, s.zmax = void 0, s;\n  }\n\n  ensureMaxLod(e) {\n    if (null == e) return !1;\n    let t = !1;\n\n    for (; this.levels.length <= e;) {\n      const e = this.levels[this.levels.length - 1],\n            i = e.resolution / 2;\n      this.levels.push({\n        resolution: i,\n        scale: e.scale / 2,\n        tileSize: [i * this.pixelSize, i * this.pixelSize]\n      }), t = !0;\n    }\n\n    return t;\n  }\n\n  capMaxLod(e) {\n    this.levels.length > e + 1 && (this.levels.length = e + 1);\n  }\n\n  getMaxLod() {\n    return this.levels.length - 1;\n  }\n\n  scaleAtLevel(e) {\n    return this.levels[0].scale / 2 ** e;\n  }\n\n  levelAtScale(e) {\n    const t = this.levels[0].scale;\n    return e >= t ? 0 : Math.log(t / e) * Math.LOG2E;\n  }\n\n  resolutionAtLevel(e) {\n    return this.levels[0].resolution / 2 ** e;\n  }\n\n  compatibleWith(e) {\n    if (!(e instanceof x)) {\n      if (x.checkUnsupported(e)) return !1;\n      e = new x(e);\n    }\n\n    if (!e.spatialReference.equals(this.spatialReference)) return !1;\n    if (e.pixelSize !== this.pixelSize) return !1;\n    const t = Math.min(this.levels.length, e.levels.length) - 1,\n          s = this.levels[t].resolution;\n    let r = .5 * s;\n    if (!i(e.origin[0], this.origin[0], r) || !i(e.origin[1], this.origin[1], r)) return !1;\n    return r = .5 * s / 2 ** t / this.pixelSize * g, i(s, e.levels[t].resolution, r);\n  }\n\n  rootTilesInExtent(e, t = null, i = 1 / 0) {\n    const s = this.levels[0].tileSize;\n    if (0 === s[0] || 0 === s[1]) return [];\n    x.computeRowColExtent(e, s, this.origin, v);\n    let l = v[1],\n        o = v[3],\n        n = v[0],\n        a = v[2];\n    const c = a - n,\n          h = o - l;\n\n    if (c * h > i) {\n      const e = Math.floor(Math.sqrt(i));\n      h > e && (l = l + Math.floor(.5 * h) - Math.floor(.5 * e), o = l + e), c > e && (n = n + Math.floor(.5 * c) - Math.floor(.5 * e), a = n + e);\n    }\n\n    const u = [];\n\n    for (let r = l; r < o; r++) for (let e = n; e < a; e++) u.push([0, r, e]);\n\n    return r(t) && (t[0] = this.origin[0] + n * s[0], t[1] = this.origin[1] - o * s[1], t[2] = this.origin[0] + a * s[0], t[3] = this.origin[1] - l * s[1]), u;\n  }\n\n  static computeRowColExtent(e, t, i, s) {\n    const r = .001 * (e[2] - e[0] + (e[3] - e[1]));\n    s[0] = Math.max(0, Math.floor((e[0] + r - i[0]) / t[0])), s[2] = Math.max(0, Math.ceil((e[2] - r - i[0]) / t[0])), s[1] = Math.max(0, Math.floor((i[1] - e[3] + r) / t[1])), s[3] = Math.max(0, Math.ceil((i[1] - e[1] - r) / t[1]));\n  }\n\n  static isPowerOfTwo(e) {\n    const t = e.lods,\n          i = t[0].resolution * 2 ** t[0].level;\n    return !t.some(function (e) {\n      return !s(e.resolution, i / 2 ** e.level);\n    });\n  }\n\n  static hasGapInLevels(e) {\n    const t = e.lods.map(function (e) {\n      return e.level;\n    });\n    t.sort(function (e, t) {\n      return e - t;\n    });\n\n    for (let i = 1; i < t.length; i++) if (t[i] !== t[0] + i) return !0;\n\n    return !1;\n  }\n\n  static tileSizeSupported(e) {\n    const t = e.size[1];\n    return t === e.size[0] && 0 == (t & t - 1) && t >= 128 && t <= 512;\n  }\n\n  static checkUnsupported(t) {\n    return t ? t.lods.length < 1 ? new e(\"tilingscheme:generic\", \"Tiling scheme must have at least one level\") : x.isPowerOfTwo(t) ? x.hasGapInLevels(t) ? new e(\"tilingscheme:gaps\", \"Tiling scheme levels must not have gaps between min and max level\") : x.tileSizeSupported(t) ? null : new e(\"tilingscheme:tile-size\", \"Tiles must be square and size must be one of [128, 256, 512]\") : new e(\"tilingscheme:power-of-two\", \"Tiling scheme must be power of two\") : new e(\"tilingscheme:tile-info-missing\", \"Tiling scheme must have tiling information\");\n  }\n\n  static fromExtent(e, t) {\n    const i = e[2] - e[0],\n          s = e[3] - e[1],\n          r = l(t),\n          o = 1.2 * Math.max(i, s),\n          n = 256,\n          a = 96,\n          c = .0254,\n          h = new x(new f({\n      size: [n, n],\n      origin: {\n        x: e[0] - .5 * (o - i),\n        y: e[3] + .5 * (o - s)\n      },\n      lods: [{\n        level: 0,\n        resolution: o / n,\n        scale: 1 / (n / a * c / (o * r))\n      }],\n      spatialReference: t\n    }));\n    return h.ensureMaxLod(20), h;\n  }\n\n  static makeWebMercatorAuxiliarySphere(e) {\n    const t = new x(x.WebMercatorAuxiliarySphereTileInfo);\n    return t.ensureMaxLod(e), t;\n  }\n\n  static makeGCSWithTileSize(e, t = 256, i = 16) {\n    const s = 256 / t,\n          r = new x(new f({\n      size: [t, t],\n      origin: {\n        x: -180,\n        y: 90,\n        spatialReference: e\n      },\n      spatialReference: e,\n      lods: [{\n        level: 0,\n        resolution: .703125 * s,\n        scale: 295497598.570834 * s\n      }]\n    }));\n    return r.ensureMaxLod(i), r;\n  }\n\n  get test() {\n    return {\n      isWebMercator: this._isWebMercator,\n      isGCS: this._isGCS\n    };\n  }\n\n}\n\nx.WebMercatorAuxiliarySphereTileInfo = new f({\n  size: [256, 256],\n  origin: {\n    x: -20037508.342787,\n    y: 20037508.342787,\n    spatialReference: a.WebMercator\n  },\n  spatialReference: a.WebMercator,\n  lods: [{\n    level: 0,\n    resolution: 156543.03392800014,\n    scale: 591657527.591555\n  }]\n}), x.WebMercatorAuxiliarySphere = x.makeWebMercatorAuxiliarySphere(19);\nconst v = c();\nexport default x;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/terrain/TilingScheme.js"],"names":["e","deg2rad","t","floatEqualAbsolute","i","floatEqualRelative","s","isSome","r","getMetersPerUnitForSR","l","o","canProjectToWGS84ComparableLonLat","n","a","create","c","isMars","h","isMoon","u","x2lon","m","y2lat","p","f","g","x","constructor","checkUnsupported","spatialReference","_isWebMercator","isWebMercator","_isGCS","origin","y","pixelSize","size","dpi","lods","reduce","level","min","minIndex","max","Math","resolution","scale","levels","Array","length","tileSize","clone","toTileInfo","map","getExtent","convertExtentToRadians","getExtentGeometry","v","xmin","ymin","xmax","ymax","zmin","zmax","ensureMaxLod","push","capMaxLod","getMaxLod","scaleAtLevel","levelAtScale","log","LOG2E","resolutionAtLevel","compatibleWith","equals","rootTilesInExtent","computeRowColExtent","floor","sqrt","ceil","isPowerOfTwo","some","hasGapInLevels","sort","tileSizeSupported","fromExtent","makeWebMercatorAuxiliarySphere","WebMercatorAuxiliarySphereTileInfo","makeGCSWithTileSize","test","isGCS","WebMercator","WebMercatorAuxiliarySphere"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{deg2rad as t,floatEqualAbsolute as i,floatEqualRelative as s}from\"../../../core/mathUtils.js\";import{isSome as r}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as l}from\"../../../core/unitUtils.js\";import o from\"../../../geometry/Extent.js\";import{canProjectToWGS84ComparableLonLat as n}from\"../../../geometry/projection.js\";import a from\"../../../geometry/SpatialReference.js\";import{create as c}from\"../../../geometry/support/aaBoundingRect.js\";import{isMars as h,isMoon as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{x2lon as m,y2lat as p}from\"../../../geometry/support/webMercatorUtils.js\";import f from\"../../../layers/support/TileInfo.js\";const g=12;class x{constructor(e){const t=x.checkUnsupported(e);if(t)throw t;this.spatialReference=e.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=n(this.spatialReference)||h(this.spatialReference)||u(this.spatialReference),this.origin=[e.origin.x,e.origin.y],this.pixelSize=e.size[0],this.dpi=e.dpi;const i=e.lods.reduce((function(e,t,i){return t.level<e.min&&(e.min=t.level,e.minIndex=i),e.max=Math.max(e.max,t.level),e}),{min:1/0,minIndex:0,max:-1/0}),s=e.lods[i.minIndex],r=2**s.level;let l=s.resolution*r,o=s.scale*r;this.levels=new Array(i.max+1);for(let n=0;n<this.levels.length;n++)this.levels[n]={resolution:l,scale:o,tileSize:[l*e.size[0],l*e.size[1]]},l/=2,o/=2}clone(){return new x(this.toTileInfo())}toTileInfo(){return new f({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((e,t)=>({level:t,scale:e.scale,resolution:e.resolution})))})}getExtent(e,t,i,s){const r=this.levels[e],l=r.tileSize[0],o=r.tileSize[1];s[0]=this.origin[0]+i*l,s[2]=s[0]+l,s[3]=this.origin[1]-t*o,s[1]=s[3]-o}convertExtentToRadians(e,i){this._isWebMercator?(i[0]=m(e[0]),i[1]=p(e[1]),i[2]=m(e[2]),i[3]=p(e[3])):this._isGCS&&(i[0]=t(e[0]),i[1]=t(e[1]),i[2]=t(e[2]),i[3]=t(e[3]))}getExtentGeometry(e,t,i,s=new o){return this.getExtent(e,t,i,v),s.spatialReference=this.spatialReference,s.xmin=v[0],s.ymin=v[1],s.xmax=v[2],s.ymax=v[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(null==e)return!1;let t=!1;for(;this.levels.length<=e;){const e=this.levels[this.levels.length-1],i=e.resolution/2;this.levels.push({resolution:i,scale:e.scale/2,tileSize:[i*this.pixelSize,i*this.pixelSize]}),t=!0}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof x)){if(x.checkUnsupported(e))return!1;e=new x(e)}if(!e.spatialReference.equals(this.spatialReference))return!1;if(e.pixelSize!==this.pixelSize)return!1;const t=Math.min(this.levels.length,e.levels.length)-1,s=this.levels[t].resolution;let r=.5*s;if(!i(e.origin[0],this.origin[0],r)||!i(e.origin[1],this.origin[1],r))return!1;return r=.5*s/2**t/this.pixelSize*g,i(s,e.levels[t].resolution,r)}rootTilesInExtent(e,t=null,i=1/0){const s=this.levels[0].tileSize;if(0===s[0]||0===s[1])return[];x.computeRowColExtent(e,s,this.origin,v);let l=v[1],o=v[3],n=v[0],a=v[2];const c=a-n,h=o-l;if(c*h>i){const e=Math.floor(Math.sqrt(i));h>e&&(l=l+Math.floor(.5*h)-Math.floor(.5*e),o=l+e),c>e&&(n=n+Math.floor(.5*c)-Math.floor(.5*e),a=n+e)}const u=[];for(let r=l;r<o;r++)for(let e=n;e<a;e++)u.push([0,r,e]);return r(t)&&(t[0]=this.origin[0]+n*s[0],t[1]=this.origin[1]-o*s[1],t[2]=this.origin[0]+a*s[0],t[3]=this.origin[1]-l*s[1]),u}static computeRowColExtent(e,t,i,s){const r=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+r-i[0])/t[0])),s[2]=Math.max(0,Math.ceil((e[2]-r-i[0])/t[0])),s[1]=Math.max(0,Math.floor((i[1]-e[3]+r)/t[1])),s[3]=Math.max(0,Math.ceil((i[1]-e[1]-r)/t[1]))}static isPowerOfTwo(e){const t=e.lods,i=t[0].resolution*2**t[0].level;return!t.some((function(e){return!s(e.resolution,i/2**e.level)}))}static hasGapInLevels(e){const t=e.lods.map((function(e){return e.level}));t.sort((function(e,t){return e-t}));for(let i=1;i<t.length;i++)if(t[i]!==t[0]+i)return!0;return!1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512}static checkUnsupported(t){return t?t.lods.length<1?new e(\"tilingscheme:generic\",\"Tiling scheme must have at least one level\"):x.isPowerOfTwo(t)?x.hasGapInLevels(t)?new e(\"tilingscheme:gaps\",\"Tiling scheme levels must not have gaps between min and max level\"):x.tileSizeSupported(t)?null:new e(\"tilingscheme:tile-size\",\"Tiles must be square and size must be one of [128, 256, 512]\"):new e(\"tilingscheme:power-of-two\",\"Tiling scheme must be power of two\"):new e(\"tilingscheme:tile-info-missing\",\"Tiling scheme must have tiling information\")}static fromExtent(e,t){const i=e[2]-e[0],s=e[3]-e[1],r=l(t),o=1.2*Math.max(i,s),n=256,a=96,c=.0254,h=new x(new f({size:[n,n],origin:{x:e[0]-.5*(o-i),y:e[3]+.5*(o-s)},lods:[{level:0,resolution:o/n,scale:1/(n/a*c/(o*r))}],spatialReference:t}));return h.ensureMaxLod(20),h}static makeWebMercatorAuxiliarySphere(e){const t=new x(x.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e,t=256,i=16){const s=256/t,r=new x(new f({size:[t,t],origin:{x:-180,y:90,spatialReference:e},spatialReference:e,lods:[{level:0,resolution:.703125*s,scale:295497598.570834*s}]}));return r.ensureMaxLod(i),r}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}x.WebMercatorAuxiliarySphereTileInfo=new f({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:a.WebMercator},spatialReference:a.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),x.WebMercatorAuxiliarySphere=x.makeWebMercatorAuxiliarySphere(19);const v=c();export default x;\n"]},"metadata":{},"sourceType":"module"}