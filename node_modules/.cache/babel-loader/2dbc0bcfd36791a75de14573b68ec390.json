{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { PathGeometryCursor as t } from \"../CIMCursor.js\";\nimport { PathHelper as e } from \"../CurveHelper.js\";\nimport { GeometryWalker as s, DashPattern as a } from \"../GeometryWalker.js\";\n\nclass i {\n  static local() {\n    return null === i.instance && (i.instance = new i()), i.instance;\n  }\n\n  execute(t, e, s) {\n    return new r(t, e, s);\n  }\n\n}\n\ni.instance = null;\n\nclass r extends t {\n  constructor(t, e, i) {\n    super(t, !0, !0), this._walker = new s(), this._walker.updateTolerance(i), this._endings = e.lineDashEnding, this._customDashPos = void 0 !== e.offsetAlongLine ? e.offsetAlongLine * i : 0, this._offsetAtEnd = void 0 !== e.customEndingOffset ? e.customEndingOffset * i : 0, this._pattern = new a(), this._pattern.init(e.dashTemplate, !0), this._pattern.scale(i);\n  }\n\n  processPath(t) {\n    if (0 === this._pattern.length()) return this.iteratePath = !1, {\n      paths: [t]\n    };\n\n    if (!this.iteratePath) {\n      let e = !0;\n\n      switch (this._endings) {\n        case \"HalfPattern\":\n        case \"HalfGap\":\n        default:\n          this._pattern.extPtGap = 0;\n          break;\n\n        case \"FullPattern\":\n          this.isClosed || (this._pattern.extPtGap = .5 * this._pattern.firstValue());\n          break;\n\n        case \"FullGap\":\n          this.isClosed || (this._pattern.extPtGap = .5 * this._pattern.lastValue());\n          break;\n\n        case \"NoConstraint\":\n          this.isClosed || (e = !1);\n          break;\n\n        case \"Custom\":\n          this.isClosed || (this._pattern.extPtGap = .5 * this._offsetAtEnd);\n      }\n\n      const s = this._walker.calculatePathLength(t);\n\n      if (this._pattern.isEmpty() || s < .1 * this._pattern.length()) return {\n        paths: [t]\n      };\n      if (!this._walker.init(t, this._pattern, e)) return {\n        paths: [t]\n      };\n    }\n\n    let s;\n    if (this.iteratePath) s = this._pattern.nextValue();else {\n      let t;\n\n      switch (this._endings) {\n        case \"HalfPattern\":\n        default:\n          t = .5 * this._pattern.firstValue();\n          break;\n\n        case \"HalfGap\":\n          t = .5 * -this._pattern.lastValue();\n          break;\n\n        case \"FullGap\":\n          t = -this._pattern.lastValue();\n          break;\n\n        case \"FullPattern\":\n          t = 0;\n          break;\n\n        case \"NoConstraint\":\n        case \"Custom\":\n          t = -this._customDashPos;\n      }\n\n      let e = t / this._pattern.length();\n\n      e -= Math.floor(e), t = e * this._pattern.length(), this._pattern.reset(), s = this._pattern.nextValue();\n      let a = !1;\n\n      for (; t >= s;) t -= s, s = this._pattern.nextValue(), a = !a;\n\n      s -= t, a ? (this._walker.nextPosition(s), s = this._pattern.nextValue()) : this.isClosed && (this._firstCurve = this._walker.nextCurve(s), s = this._pattern.nextValue(), this._walker.nextPosition(s), s = this._pattern.nextValue());\n    }\n\n    let a = this._walker.nextCurve(s);\n\n    return a ? this._walker.isPathEnd() ? (this.iteratePath = !1, this._firstCurve && (this._firstCurve.splice(0, 1), e.mergePath(a, this._firstCurve), this._firstCurve = null)) : (s = this._pattern.nextValue(), !this._walker.nextPosition(s) || this._walker.isPathEnd() ? (this.iteratePath = !1, this._firstCurve && (a = this._firstCurve, this._firstCurve = null)) : this.iteratePath = !0) : (this.iteratePath = !1, a = this._firstCurve, this._firstCurve = null), {\n      paths: [a]\n    };\n  }\n\n}\n\nexport { i as EffectDashes };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/symbols/cim/effects/EffectDashes.js"],"names":["PathGeometryCursor","t","PathHelper","e","GeometryWalker","s","DashPattern","a","i","local","instance","execute","r","constructor","_walker","updateTolerance","_endings","lineDashEnding","_customDashPos","offsetAlongLine","_offsetAtEnd","customEndingOffset","_pattern","init","dashTemplate","scale","processPath","length","iteratePath","paths","extPtGap","isClosed","firstValue","lastValue","calculatePathLength","isEmpty","nextValue","Math","floor","reset","nextPosition","_firstCurve","nextCurve","isPathEnd","splice","mergePath","EffectDashes"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{PathGeometryCursor as t}from\"../CIMCursor.js\";import{PathHelper as e}from\"../CurveHelper.js\";import{GeometryWalker as s,DashPattern as a}from\"../GeometryWalker.js\";class i{static local(){return null===i.instance&&(i.instance=new i),i.instance}execute(t,e,s){return new r(t,e,s)}}i.instance=null;class r extends t{constructor(t,e,i){super(t,!0,!0),this._walker=new s,this._walker.updateTolerance(i),this._endings=e.lineDashEnding,this._customDashPos=void 0!==e.offsetAlongLine?e.offsetAlongLine*i:0,this._offsetAtEnd=void 0!==e.customEndingOffset?e.customEndingOffset*i:0,this._pattern=new a,this._pattern.init(e.dashTemplate,!0),this._pattern.scale(i)}processPath(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){let e=!0;switch(this._endings){case\"HalfPattern\":case\"HalfGap\":default:this._pattern.extPtGap=0;break;case\"FullPattern\":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case\"FullGap\":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case\"NoConstraint\":this.isClosed||(e=!1);break;case\"Custom\":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const s=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||s<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}let s;if(this.iteratePath)s=this._pattern.nextValue();else{let t;switch(this._endings){case\"HalfPattern\":default:t=.5*this._pattern.firstValue();break;case\"HalfGap\":t=.5*-this._pattern.lastValue();break;case\"FullGap\":t=-this._pattern.lastValue();break;case\"FullPattern\":t=0;break;case\"NoConstraint\":case\"Custom\":t=-this._customDashPos}let e=t/this._pattern.length();e-=Math.floor(e),t=e*this._pattern.length(),this._pattern.reset(),s=this._pattern.nextValue();let a=!1;for(;t>=s;)t-=s,s=this._pattern.nextValue(),a=!a;s-=t,a?(this._walker.nextPosition(s),s=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(s),s=this._pattern.nextValue(),this._walker.nextPosition(s),s=this._pattern.nextValue())}let a=this._walker.nextCurve(s);return a?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),e.mergePath(a,this._firstCurve),this._firstCurve=null)):(s=this._pattern.nextValue(),!this._walker.nextPosition(s)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(a=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,a=this._firstCurve,this._firstCurve=null),{paths:[a]}}}export{i as EffectDashes};\n"]},"metadata":{},"sourceType":"module"}