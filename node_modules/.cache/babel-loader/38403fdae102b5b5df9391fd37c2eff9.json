{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { createScreenPoint as e, pt2px as t, toPt as r } from \"../../../core/screenUtils.js\";\nimport { getBasemapId as o } from \"../../support/utils.js\";\nconst n = [\"streets\", \"gray\", \"topo\", \"terrain\", \"national-geographic\", \"oceans\", \"osm\", \"gray-vector\", \"streets-vector\", \"topo-vector\", \"streets-relief-vector\", \"streets-navigation-vector\"],\n      i = [\"satellite\", \"hybrid\", \"dark-gray\", \"dark-gray-vector\", \"streets-night-vector\"],\n      c = [].concat(n).concat(i);\n\nfunction s(e, t) {\n  return e.r === t.r && e.g === t.g && e.b === t.b;\n}\n\nfunction a(e, t) {\n  let r = 0;\n\n  if (e.length === t.length) {\n    let o = e.every((e, r) => s(e, t[r]));\n    if (o) r = 1;else {\n      o = e.slice(0).reverse().every((e, r) => s(e, t[r])), o && (r = -1);\n    }\n  }\n\n  return r;\n}\n\nfunction l(t) {\n  const r = t.width,\n        o = t.height;\n  let n = t.pixelSizeAt(t.toMap(e(.5 * r, .5 * o), {\n    exclude: []\n  }));\n\n  if (n <= 0 && (n = t.pixelSizeAt(t.toMap(e(.5 * r, .95 * o), {\n    exclude: []\n  })), n <= 0)) {\n    const e = t.camera.position.clone();\n    e.z = 0, n = 2 * t.pixelSizeAt(e);\n  }\n\n  return n;\n}\n\nfunction u(e, o) {\n  return Math.ceil(l(o) * t(r(e)));\n}\n\nfunction f(e) {\n  return \"multipoint\" === e ? \"point\" : \"mesh\" === e ? \"polygon\" : e;\n}\n\nfunction p(e) {\n  const t = o(e, c, !1);\n  return t ? n.indexOf(t) > -1 ? \"light\" : i.indexOf(t) > -1 ? \"dark\" : void 0 : null;\n}\n\nfunction g(e) {\n  if (!e) return [];\n  const t = new Set(),\n        r = [e.primaryScheme];\n  e.secondarySchemes && r.push(...e.secondarySchemes);\n\n  for (const o of r) o && \"tags\" in o && o.tags && o.tags.forEach(e => t.add(e));\n\n  return [...t];\n}\n\nexport { p as getBasemapTheme, l as getPixelSize, f as getStorageType, g as getTagsFromSchemes, a as hasIdenticalColors, u as toWorldScale };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/smartMapping/symbology/support/utils.js"],"names":["createScreenPoint","e","pt2px","t","toPt","r","getBasemapId","o","n","i","c","concat","s","g","b","a","length","every","slice","reverse","l","width","height","pixelSizeAt","toMap","exclude","camera","position","clone","z","u","Math","ceil","f","p","indexOf","Set","primaryScheme","secondarySchemes","push","tags","forEach","add","getBasemapTheme","getPixelSize","getStorageType","getTagsFromSchemes","hasIdenticalColors","toWorldScale"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{createScreenPoint as e,pt2px as t,toPt as r}from\"../../../core/screenUtils.js\";import{getBasemapId as o}from\"../../support/utils.js\";const n=[\"streets\",\"gray\",\"topo\",\"terrain\",\"national-geographic\",\"oceans\",\"osm\",\"gray-vector\",\"streets-vector\",\"topo-vector\",\"streets-relief-vector\",\"streets-navigation-vector\"],i=[\"satellite\",\"hybrid\",\"dark-gray\",\"dark-gray-vector\",\"streets-night-vector\"],c=[].concat(n).concat(i);function s(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b}function a(e,t){let r=0;if(e.length===t.length){let o=e.every(((e,r)=>s(e,t[r])));if(o)r=1;else{o=e.slice(0).reverse().every(((e,r)=>s(e,t[r]))),o&&(r=-1)}}return r}function l(t){const r=t.width,o=t.height;let n=t.pixelSizeAt(t.toMap(e(.5*r,.5*o),{exclude:[]}));if(n<=0&&(n=t.pixelSizeAt(t.toMap(e(.5*r,.95*o),{exclude:[]})),n<=0)){const e=t.camera.position.clone();e.z=0,n=2*t.pixelSizeAt(e)}return n}function u(e,o){return Math.ceil(l(o)*t(r(e)))}function f(e){return\"multipoint\"===e?\"point\":\"mesh\"===e?\"polygon\":e}function p(e){const t=o(e,c,!1);return t?n.indexOf(t)>-1?\"light\":i.indexOf(t)>-1?\"dark\":void 0:null}function g(e){if(!e)return[];const t=new Set,r=[e.primaryScheme];e.secondarySchemes&&r.push(...e.secondarySchemes);for(const o of r)o&&\"tags\"in o&&o.tags&&o.tags.forEach((e=>t.add(e)));return[...t]}export{p as getBasemapTheme,l as getPixelSize,f as getStorageType,g as getTagsFromSchemes,a as hasIdenticalColors,u as toWorldScale};\n"]},"metadata":{},"sourceType":"module"}