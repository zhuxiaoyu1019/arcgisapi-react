{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isUint32Array as e } from \"../../../../../core/typedArrayUtil.js\";\nimport { WorkerHandle as r } from \"../../../../../core/workers/WorkerHandle.js\";\nimport { unpackInterleavedBuffer as t } from \"../../../support/buffer/workerHelper.js\";\nimport { work as n } from \"./EdgeProcessingWorker.js\";\n\nclass s extends r {\n  constructor(e) {\n    super(\"EdgeProcessingWorker\", \"wrappedWork\", e);\n  }\n\n  async process(e, r, t) {\n    if (t) return n(e);\n\n    const s = this._packInput(e),\n          a = await this.invoke(s, r);\n\n    return this._unpackOutput(a);\n  }\n\n  getTransferList(e) {\n    return [e.dataBuffer];\n  }\n\n  _packInput(r) {\n    return {\n      dataBuffer: r.data.buffer,\n      writerSettings: r.writerSettings,\n      skipDeduplicate: r.skipDeduplicate,\n      indicesBuffer: r.indices.buffer,\n      indicesType: e(r.indices) ? \"Uint32Array\" : \"Uint16Array\",\n      indicesLength: r.indicesLength\n    };\n  }\n\n  _unpackOutput(e) {\n    return {\n      regular: {\n        instancesData: t(e.regular.instancesData),\n        lodInfo: {\n          lengths: new Float32Array(e.regular.lodInfo.lengths)\n        }\n      },\n      silhouette: {\n        instancesData: t(e.silhouette.instancesData),\n        lodInfo: {\n          lengths: new Float32Array(e.silhouette.lodInfo.lengths)\n        }\n      },\n      averageEdgeLength: e.averageEdgeLength\n    };\n  }\n\n}\n\nexport default s;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeWorkerHandle.js"],"names":["isUint32Array","e","WorkerHandle","r","unpackInterleavedBuffer","t","work","n","s","constructor","process","_packInput","a","invoke","_unpackOutput","getTransferList","dataBuffer","data","buffer","writerSettings","skipDeduplicate","indicesBuffer","indices","indicesType","indicesLength","regular","instancesData","lodInfo","lengths","Float32Array","silhouette","averageEdgeLength"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,aAAa,IAAIC,CAAxB,QAA8B,uCAA9B;AAAsE,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,6CAA7B;AAA2E,SAAOC,uBAAuB,IAAIC,CAAlC,QAAwC,yCAAxC;AAAkF,SAAOC,IAAI,IAAIC,CAAf,QAAqB,2BAArB;;AAAiD,MAAMC,CAAN,SAAgBL,CAAhB,CAAiB;AAACM,EAAAA,WAAW,CAACR,CAAD,EAAG;AAAC,UAAM,sBAAN,EAA6B,aAA7B,EAA2CA,CAA3C;AAA8C;;AAAa,QAAPS,OAAO,CAACT,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,QAAGA,CAAH,EAAK,OAAOE,CAAC,CAACN,CAAD,CAAR;;AAAY,UAAMO,CAAC,GAAC,KAAKG,UAAL,CAAgBV,CAAhB,CAAR;AAAA,UAA2BW,CAAC,GAAC,MAAM,KAAKC,MAAL,CAAYL,CAAZ,EAAcL,CAAd,CAAnC;;AAAoD,WAAO,KAAKW,aAAL,CAAmBF,CAAnB,CAAP;AAA6B;;AAAAG,EAAAA,eAAe,CAACd,CAAD,EAAG;AAAC,WAAM,CAACA,CAAC,CAACe,UAAH,CAAN;AAAqB;;AAAAL,EAAAA,UAAU,CAACR,CAAD,EAAG;AAAC,WAAM;AAACa,MAAAA,UAAU,EAACb,CAAC,CAACc,IAAF,CAAOC,MAAnB;AAA0BC,MAAAA,cAAc,EAAChB,CAAC,CAACgB,cAA3C;AAA0DC,MAAAA,eAAe,EAACjB,CAAC,CAACiB,eAA5E;AAA4FC,MAAAA,aAAa,EAAClB,CAAC,CAACmB,OAAF,CAAUJ,MAApH;AAA2HK,MAAAA,WAAW,EAACtB,CAAC,CAACE,CAAC,CAACmB,OAAH,CAAD,GAAa,aAAb,GAA2B,aAAlK;AAAgLE,MAAAA,aAAa,EAACrB,CAAC,CAACqB;AAAhM,KAAN;AAAqN;;AAAAV,EAAAA,aAAa,CAACb,CAAD,EAAG;AAAC,WAAM;AAACwB,MAAAA,OAAO,EAAC;AAACC,QAAAA,aAAa,EAACrB,CAAC,CAACJ,CAAC,CAACwB,OAAF,CAAUC,aAAX,CAAhB;AAA0CC,QAAAA,OAAO,EAAC;AAACC,UAAAA,OAAO,EAAC,IAAIC,YAAJ,CAAiB5B,CAAC,CAACwB,OAAF,CAAUE,OAAV,CAAkBC,OAAnC;AAAT;AAAlD,OAAT;AAAkHE,MAAAA,UAAU,EAAC;AAACJ,QAAAA,aAAa,EAACrB,CAAC,CAACJ,CAAC,CAAC6B,UAAF,CAAaJ,aAAd,CAAhB;AAA6CC,QAAAA,OAAO,EAAC;AAACC,UAAAA,OAAO,EAAC,IAAIC,YAAJ,CAAiB5B,CAAC,CAAC6B,UAAF,CAAaH,OAAb,CAAqBC,OAAtC;AAAT;AAArD,OAA7H;AAA4OG,MAAAA,iBAAiB,EAAC9B,CAAC,CAAC8B;AAAhQ,KAAN;AAAyR;;AAA1uB;;AAA2uB,eAAevB,CAAf","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isUint32Array as e}from\"../../../../../core/typedArrayUtil.js\";import{WorkerHandle as r}from\"../../../../../core/workers/WorkerHandle.js\";import{unpackInterleavedBuffer as t}from\"../../../support/buffer/workerHelper.js\";import{work as n}from\"./EdgeProcessingWorker.js\";class s extends r{constructor(e){super(\"EdgeProcessingWorker\",\"wrappedWork\",e)}async process(e,r,t){if(t)return n(e);const s=this._packInput(e),a=await this.invoke(s,r);return this._unpackOutput(a)}getTransferList(e){return[e.dataBuffer]}_packInput(r){return{dataBuffer:r.data.buffer,writerSettings:r.writerSettings,skipDeduplicate:r.skipDeduplicate,indicesBuffer:r.indices.buffer,indicesType:e(r.indices)?\"Uint32Array\":\"Uint16Array\",indicesLength:r.indicesLength}}_unpackOutput(e){return{regular:{instancesData:t(e.regular.instancesData),lodInfo:{lengths:new Float32Array(e.regular.lodInfo.lengths)}},silhouette:{instancesData:t(e.silhouette.instancesData),lodInfo:{lengths:new Float32Array(e.silhouette.lodInfo.lengths)}},averageEdgeLength:e.averageEdgeLength}}}export default s;\n"]},"metadata":{},"sourceType":"module"}