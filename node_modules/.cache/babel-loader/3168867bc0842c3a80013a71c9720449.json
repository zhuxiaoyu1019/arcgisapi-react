{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../../core/maybe.js\";\nimport { i as r, t as s } from \"../../../../chunks/mat4.js\";\nimport { c as i } from \"../../../../chunks/mat4f64.js\";\nimport { s as o } from \"../../../../chunks/vec3.js\";\nimport { Z as n, c as l } from \"../../../../chunks/vec3f64.js\";\nimport { g as h, c as a } from \"../../../../chunks/vec4.js\";\nimport { f as p, c as d, a as f } from \"../../../../chunks/vec4f32.js\";\nimport { Object3DVisualElement as _ } from \"./Object3DVisualElement.js\";\nimport { createGeometry as c } from \"../../layers/graphics/lineUtils.js\";\nimport { RibbonLineMaterial as u } from \"../../webgl-engine/materials/RibbonLineMaterial.js\";\n\nclass m extends _ {\n  constructor(e) {\n    super(e), this._renderOccluded = 4, this._width = 1, this._color = p(1, 0, 1, 1), this._innerWidth = 1, this._innerColor = null, this._stipplePattern = null, this._stippleOffColor = null, this._stippleIntegerRepeats = !1, this._writeDepthEnabled = !0, this._falloff = 0, this._polygonOffset = !1, this.applyProps(e);\n  }\n\n  setGeometryFromExtent(e) {\n    const t = this.view.spatialReference,\n          r = l(),\n          s = l(),\n          i = 100,\n          n = [];\n    o(r, e[0], e[1], i), this.view.renderCoordsHelper.toRenderCoords(r, t, s), n.push([s[0], s[1], s[2]]), o(r, e[2], e[1], i), this.view.renderCoordsHelper.toRenderCoords(r, t, s), n.push([s[0], s[1], s[2]]), o(r, e[2], e[3], i), this.view.renderCoordsHelper.toRenderCoords(r, t, s), n.push([s[0], s[1], s[2]]), o(r, e[0], e[3], i), this.view.renderCoordsHelper.toRenderCoords(r, t, s), n.push([s[0], s[1], s[2]]), o(r, e[0], e[1], i), this.view.renderCoordsHelper.toRenderCoords(r, t, s), n.push([s[0], s[1], s[2]]), o(r, e[0], e[1], i), this.view.renderCoordsHelper.toRenderCoords(r, t, s), n.push([s[0], s[1], s[2]]), this.geometry = [n];\n  }\n\n  setGeometryFromFrustum(e) {\n    const t = [];\n    e.lines.forEach(e => {\n      t.push([e.origin[0], e.origin[1], e.origin[2]]), t.push([e.endpoint[0], e.endpoint[1], e.endpoint[2]]);\n    }), this.geometry = [t];\n  }\n\n  setGeometryFromBoundedPlane(e) {\n    const t = [],\n          r = e.origin,\n          s = e.basis1,\n          i = e.basis2,\n          o = .5,\n          n = l(),\n          h = l(),\n          a = l(),\n          p = l();\n    n[0] = r[0] - s[0] * o - i[0] * o, n[1] = r[1] - s[1] * o - i[1] * o, n[2] = r[2] - s[2] * o - i[2] * o, h[0] = r[0] - s[0] * o + i[0] * o, h[1] = r[1] - s[1] * o + i[1] * o, h[2] = r[2] - s[2] * o + i[2] * o, a[0] = r[0] + s[0] * o + i[0] * o, a[1] = r[1] + s[1] * o + i[1] * o, a[2] = r[2] + s[2] * o + i[2] * o, p[0] = r[0] + s[0] * o - i[0] * o, p[1] = r[1] + s[1] * o - i[1] * o, p[2] = r[2] + s[2] * o - i[2] * o, t.push([n[0], n[1], n[2]]), t.push([h[0], h[1], h[2]]), t.push([a[0], a[1], a[2]]), t.push([p[0], p[1], p[2]]), t.push([n[0], n[1], n[2]]), this.geometry = [t];\n  }\n\n  setGeometryFromSegment(e) {\n    const t = e.endRenderSpace;\n    r(g), s(g, g, t), this.transform = g;\n    const {\n      points: i\n    } = e.createRenderGeometry(t, this.view.renderCoordsHelper);\n    this.geometry = [i];\n  }\n\n  setGeometryFromSegments(e, t = n) {\n    r(g), s(g, g, t), this.transform = g, this.geometry = e.map(e => e.createRenderGeometry(t, this.view.renderCoordsHelper).points);\n  }\n\n  get renderOccluded() {\n    return this._renderOccluded;\n  }\n\n  set renderOccluded(e) {\n    e !== this._renderOccluded && (this._renderOccluded = e, this._updateMaterial());\n  }\n\n  get geometry() {\n    return this._geometry;\n  }\n\n  set geometry(e) {\n    this._geometry = e, this.recreateGeometry();\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  set width(e) {\n    e !== this._width && (this._width = e, this._updateMaterial());\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(e) {\n    h(e, this._color) || (a(this._color, e), this._updateMaterial());\n  }\n\n  get innerWidth() {\n    return this._innerWidth;\n  }\n\n  set innerWidth(e) {\n    e !== this._innerWidth && (this._innerWidth = e, this._updateMaterial());\n  }\n\n  get innerColor() {\n    return this._innerColor;\n  }\n\n  set innerColor(r) {\n    e(r) ? !t(this._innerColor) && h(r, this._innerColor) || (this._innerColor = a(d(), r), this._updateMaterial()) : e(this._innerColor) && (this._innerColor = null, this._updateMaterial());\n  }\n\n  get stipplePattern() {\n    return this._stipplePattern;\n  }\n\n  set stipplePattern(t) {\n    const r = e(t) !== e(this._stipplePattern);\n    this._stipplePattern = t, r ? this.recreate() : this._updateMaterial();\n  }\n\n  get stippleOffColor() {\n    return this._stippleOffColor;\n  }\n\n  set stippleOffColor(r) {\n    (t(r) || t(this._stippleOffColor) || !h(r, this._stippleOffColor)) && (this._stippleOffColor = e(r) ? f(r) : null, this._updateMaterial());\n  }\n\n  get stippleIntegerRepeats() {\n    return this._stippleIntegerRepeats;\n  }\n\n  set stippleIntegerRepeats(e) {\n    this._stippleIntegerRepeats !== e && (this._stippleIntegerRepeats = e, this._updateMaterial());\n  }\n\n  get writeDepthEnabled() {\n    return this._writeDepthEnabled;\n  }\n\n  set writeDepthEnabled(e) {\n    this._writeDepthEnabled !== e && (this._writeDepthEnabled = e, this._updateMaterial());\n  }\n\n  get falloff() {\n    return this._falloff;\n  }\n\n  set falloff(e) {\n    e !== this._falloff && (this._falloff = e, this._updateMaterial());\n  }\n\n  get polygonOffset() {\n    return this._polygonOffset;\n  }\n\n  set polygonOffset(e) {\n    e !== this._polygonOffset && (this._polygonOffset = e, this._updateMaterial());\n  }\n\n  createExternalResources() {\n    this._material = new u(this.materialParameters);\n  }\n\n  destroyExternalResources() {\n    this._material = null;\n  }\n\n  createGeometries(e) {\n    const t = this._createLineGeometries();\n\n    if (0 !== t.length) for (let r = 0; r < t.length; ++r) {\n      const s = c(t[r]);\n      e.addGeometry(s, this._material);\n    }\n  }\n\n  forEachExternalMaterial(e) {\n    e(this._material);\n  }\n\n  get materialParameters() {\n    return {\n      width: this._width,\n      color: this._color,\n      stippleOffColor: this._stippleOffColor,\n      stipplePattern: this._stipplePattern,\n      isClosed: !1,\n      falloff: this._falloff,\n      innerColor: this._innerColor,\n      innerWidth: this._innerWidth,\n      stippleIntegerRepeats: this._stippleIntegerRepeats,\n      polygonOffset: this._polygonOffset,\n      renderOccluded: this._renderOccluded,\n      writeDepth: this._writeDepthEnabled\n    };\n  }\n\n  _updateMaterial() {\n    this.attached && this._material.setParameterValues(this.materialParameters);\n  }\n\n  _createLineGeometries() {\n    const e = this.geometry;\n    if (t(e) || 0 === e.length) return [];\n    const r = [];\n    return e.forEach(e => {\n      const t = e.length,\n            s = new Float64Array(3 * t);\n      e.forEach((e, t) => {\n        s[3 * t + 0] = e[0], s[3 * t + 1] = e[1], s[3 * t + 2] = e[2];\n      });\n      const i = {\n        attributeData: {\n          position: s\n        },\n        removeDuplicateStartEnd: 0\n      };\n      r.push(i);\n    }), r;\n  }\n\n}\n\nconst g = i();\nexport { m as LineVisualElement };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js"],"names":["isSome","e","isNone","t","i","r","s","c","o","Z","n","l","g","h","a","f","p","d","Object3DVisualElement","_","createGeometry","RibbonLineMaterial","u","m","constructor","_renderOccluded","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stippleIntegerRepeats","_writeDepthEnabled","_falloff","_polygonOffset","applyProps","setGeometryFromExtent","view","spatialReference","renderCoordsHelper","toRenderCoords","push","geometry","setGeometryFromFrustum","lines","forEach","origin","endpoint","setGeometryFromBoundedPlane","basis1","basis2","setGeometryFromSegment","endRenderSpace","transform","points","createRenderGeometry","setGeometryFromSegments","map","renderOccluded","_updateMaterial","_geometry","recreateGeometry","width","color","innerWidth","innerColor","stipplePattern","recreate","stippleOffColor","stippleIntegerRepeats","writeDepthEnabled","falloff","polygonOffset","createExternalResources","_material","materialParameters","destroyExternalResources","createGeometries","_createLineGeometries","length","addGeometry","forEachExternalMaterial","isClosed","writeDepth","attached","setParameterValues","Float64Array","attributeData","position","removeDuplicateStartEnd","LineVisualElement"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{i as r,t as s}from\"../../../../chunks/mat4.js\";import{c as i}from\"../../../../chunks/mat4f64.js\";import{s as o}from\"../../../../chunks/vec3.js\";import{Z as n,c as l}from\"../../../../chunks/vec3f64.js\";import{g as h,c as a}from\"../../../../chunks/vec4.js\";import{f as p,c as d,a as f}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as _}from\"./Object3DVisualElement.js\";import{createGeometry as c}from\"../../layers/graphics/lineUtils.js\";import{RibbonLineMaterial as u}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class m extends _{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=p(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromExtent(e){const t=this.view.spatialReference,r=l(),s=l(),i=100,n=[];o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),this.geometry=[n]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],r=e.origin,s=e.basis1,i=e.basis2,o=.5,n=l(),h=l(),a=l(),p=l();n[0]=r[0]-s[0]*o-i[0]*o,n[1]=r[1]-s[1]*o-i[1]*o,n[2]=r[2]-s[2]*o-i[2]*o,h[0]=r[0]-s[0]*o+i[0]*o,h[1]=r[1]-s[1]*o+i[1]*o,h[2]=r[2]-s[2]*o+i[2]*o,a[0]=r[0]+s[0]*o+i[0]*o,a[1]=r[1]+s[1]*o+i[1]*o,a[2]=r[2]+s[2]*o+i[2]*o,p[0]=r[0]+s[0]*o-i[0]*o,p[1]=r[1]+s[1]*o-i[1]*o,p[2]=r[2]+s[2]*o-i[2]*o,t.push([n[0],n[1],n[2]]),t.push([h[0],h[1],h[2]]),t.push([a[0],a[1],a[2]]),t.push([p[0],p[1],p[2]]),t.push([n[0],n[1],n[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;r(g),s(g,g,t),this.transform=g;const{points:i}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[i]}setGeometryFromSegments(e,t=n){r(g),s(g,g,t),this.transform=g,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){h(e,this._color)||(a(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&h(r,this._innerColor)||(this._innerColor=a(d(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!h(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?f(r):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new u(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=c(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={attributeData:{position:s},removeDuplicateStartEnd:0};r.push(i)})),r}}const g=i();export{m as LineVisualElement};\n"]},"metadata":{},"sourceType":"module"}