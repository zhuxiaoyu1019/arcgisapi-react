{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Accessor.js\";\nimport { HandleOwnerMixin as s } from \"../../core/HandleOwner.js\";\nimport { property as t } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/Logger.js\";\nimport { subclass as o } from \"../../core/accessorSupport/decorators/subclass.js\";\nconst a = {\n  visible: \"visibleSublayers\"\n};\nlet l = class extends s(r) {\n  constructor(e) {\n    super(e), this.scale = 0;\n  }\n\n  set layer(e) {\n    this._get(\"layer\") !== e && (this._set(\"layer\", e), this.handles.remove(\"layer\"), e && this.handles.add([e.sublayers.on(\"change\", () => this.notifyChange(\"visibleSublayers\")), e.on(\"wms-sublayer-update\", e => this.notifyChange(a[e.propertyName]))], \"layer\"));\n  }\n\n  get layers() {\n    const {\n      visibleSublayers: e\n    } = this;\n    return e.filter(e => e.name).map(e => e.name).join(\",\");\n  }\n\n  get version() {\n    this.commitProperty(\"layers\");\n    const e = this.layer;\n    return e && e.commitProperty(\"imageTransparency\"), (this._get(\"version\") || 0) + 1;\n  }\n\n  get visibleSublayers() {\n    const {\n      layer: e,\n      scale: r\n    } = this,\n          s = null == e ? void 0 : e.sublayers,\n          t = [],\n          o = e => {\n      const {\n        minScale: s,\n        maxScale: a,\n        sublayers: l,\n        visible: i\n      } = e;\n      i && (0 === r || (0 === s || r <= s) && (0 === a || r >= a)) && (l ? l.forEach(o) : t.unshift(e));\n    };\n\n    return null == s || s.forEach(o), t;\n  }\n\n  toJSON() {\n    const {\n      layer: e,\n      layers: r\n    } = this,\n          {\n      imageFormat: s,\n      imageTransparency: t,\n      version: o\n    } = e;\n    return {\n      format: s,\n      request: \"GetMap\",\n      service: \"WMS\",\n      styles: \"\",\n      transparent: t,\n      version: o,\n      layers: r\n    };\n  }\n\n};\ne([t()], l.prototype, \"layer\", null), e([t({\n  readOnly: !0\n})], l.prototype, \"layers\", null), e([t({\n  type: Number\n})], l.prototype, \"scale\", void 0), e([t({\n  readOnly: !0\n})], l.prototype, \"version\", null), e([t({\n  readOnly: !0\n})], l.prototype, \"visibleSublayers\", null), l = e([o(\"esri.layers.support.ExportWMSImageParameters\")], l);\nexport { l as ExportWMSImageParameters };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/layers/support/ExportWMSImageParameters.js"],"names":["_","e","r","HandleOwnerMixin","s","property","t","subclass","o","a","visible","l","constructor","scale","layer","_get","_set","handles","remove","add","sublayers","on","notifyChange","propertyName","layers","visibleSublayers","filter","name","map","join","version","commitProperty","minScale","maxScale","i","forEach","unshift","toJSON","imageFormat","imageTransparency","format","request","service","styles","transparent","prototype","readOnly","type","Number","ExportWMSImageParameters"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";const a={visible:\"visibleSublayers\"};let l=class extends(s(r)){constructor(e){super(e),this.scale=0}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.sublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"wms-sublayer-update\",(e=>this.notifyChange(a[e.propertyName])))],\"layer\"))}get layers(){const{visibleSublayers:e}=this;return e.filter((e=>e.name)).map((e=>e.name)).join(\",\")}get version(){this.commitProperty(\"layers\");const e=this.layer;return e&&e.commitProperty(\"imageTransparency\"),(this._get(\"version\")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,s=null==e?void 0:e.sublayers,t=[],o=e=>{const{minScale:s,maxScale:a,sublayers:l,visible:i}=e;i&&(0===r||(0===s||r<=s)&&(0===a||r>=a))&&(l?l.forEach(o):t.unshift(e))};return null==s||s.forEach(o),t}toJSON(){const{layer:e,layers:r}=this,{imageFormat:s,imageTransparency:t,version:o}=e;return{format:s,request:\"GetMap\",service:\"WMS\",styles:\"\",transparent:t,version:o,layers:r}}};e([t()],l.prototype,\"layer\",null),e([t({readOnly:!0})],l.prototype,\"layers\",null),e([t({type:Number})],l.prototype,\"scale\",void 0),e([t({readOnly:!0})],l.prototype,\"version\",null),e([t({readOnly:!0})],l.prototype,\"visibleSublayers\",null),l=e([o(\"esri.layers.support.ExportWMSImageParameters\")],l);export{l as ExportWMSImageParameters};\n"]},"metadata":{},"sourceType":"module"}