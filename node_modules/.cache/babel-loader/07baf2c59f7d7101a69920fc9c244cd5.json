{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport r from \"../../PopupTemplate.js\";\nimport \"../../renderers/ClassBreaksRenderer.js\";\nimport \"../../renderers/DictionaryRenderer.js\";\nimport \"../../renderers/DotDensityRenderer.js\";\nimport \"../../renderers/HeatmapRenderer.js\";\nimport \"../../renderers/Renderer.js\";\nimport \"../../renderers/SimpleRenderer.js\";\nimport \"../../renderers/UniqueValueRenderer.js\";\nimport \"../../renderers/support/jsonUtils.js\";\nimport { rendererTypes as i, webSceneRendererTypes as t } from \"../../renderers/support/types.js\";\nimport o from \"../../request.js\";\nimport { isSymbol3D as s } from \"../../symbols.js\";\nimport a from \"../../core/Collection.js\";\nimport l from \"../../core/Error.js\";\nimport { HandleOwnerMixin as n } from \"../../core/HandleOwner.js\";\nimport { IdentifiableMixin as p } from \"../../core/Identifiable.js\";\nimport { clone as y } from \"../../core/lang.js\";\nimport d from \"../../core/Loadable.js\";\nimport u from \"../../core/Logger.js\";\nimport { MultiOriginJSONMixin as c } from \"../../core/MultiOriginJSONSupport.js\";\nimport { objectToQuery as f } from \"../../core/urlUtils.js\";\nimport { property as m } from \"../../core/accessorSupport/decorators/property.js\";\nimport { getProperties as h } from \"../../core/accessorSupport/utils.js\";\nimport { cast as b } from \"../../core/accessorSupport/decorators/cast.js\";\nimport \"../../core/has.js\";\nimport { reader as g } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as v } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as S } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { ensureInteger as I, ensureType as w, Integer as j, ensureClass as L } from \"../../core/accessorSupport/ensureType.js\";\nimport { nameToId as D } from \"../../core/accessorSupport/PropertyOrigin.js\";\nimport O from \"./FeatureType.js\";\nimport x from \"./Field.js\";\nimport P from \"./FieldsIndex.js\";\nimport F from \"./LabelClass.js\";\nimport { DataLayerSource as _ } from \"./source/DataLayerSource.js\";\nimport { MapLayerSource as E } from \"./source/MapLayerSource.js\";\nimport M from \"../../rest/support/Query.js\";\nimport { createPopupTemplate as N } from \"../../support/popupUtils.js\";\nimport T from \"../../geometry/Extent.js\";\nvar V;\n\nfunction k(e) {\n  return e && \"esriSMS\" === e.type;\n}\n\nfunction C(e, r, i) {\n  var t;\n  const o = this.originIdOf(r) >= D(i.origin);\n  return {\n    ignoreOrigin: !0,\n    allowNull: o,\n    enabled: !!i && \"map-image\" === (null == (t = i.layer) ? void 0 : t.type) && (i.writeSublayerStructure || o)\n  };\n}\n\nfunction A(e, r, i) {\n  var t;\n  return {\n    enabled: !!i && \"tile\" === (null == (t = i.layer) ? void 0 : t.type) && this._isOverridden(r)\n  };\n}\n\nfunction q(e, r, i) {\n  return {\n    ignoreOrigin: !0,\n    enabled: i && i.writeSublayerStructure || !1\n  };\n}\n\nfunction U(e, r, i) {\n  return {\n    ignoreOrigin: !0,\n    enabled: !!i && (i.writeSublayerStructure || this.originIdOf(r) >= D(i.origin))\n  };\n}\n\nconst $ = u.getLogger(\"esri.layers.support.Sublayer\");\nlet J = 0;\nconst R = new Set();\nR.add(\"layer\"), R.add(\"parent\"), R.add(\"loaded\"), R.add(\"loadStatus\"), R.add(\"loadError\"), R.add(\"loadWarnings\");\nlet B = V = class extends n(c(p(d))) {\n  constructor(e) {\n    super(e), this.capabilities = void 0, this.fields = null, this.fullExtent = null, this.globalIdField = null, this.legendEnabled = !0, this.objectIdField = null, this.popupEnabled = !0, this.popupTemplate = null, this.sourceJSON = null, this.title = null, this.typeIdField = null, this.types = null;\n  }\n\n  async load(e) {\n    return this.addResolvingPromise((async () => {\n      var r;\n      if (!this.layer && !this.url) throw new l(\"sublayer:missing-layer\", \"Sublayer can't be loaded without being part of a layer\", {\n        sublayer: this\n      });\n      let i = null;\n\n      if (!this.layer || this.originIdOf(\"url\") > 2 || \"data-layer\" === (null == (r = this.source) ? void 0 : r.type)) {\n        i = (await o(this.url, {\n          responseType: \"json\",\n          query: {\n            f: \"json\"\n          },\n          ...e\n        })).data;\n      } else {\n        var t;\n        let r = this.id;\n        \"map-layer\" === (null == (t = this.source) ? void 0 : t.type) && (r = this.source.mapLayerId), i = await this.layer.fetchSublayerInfo(r, e);\n      }\n\n      i && (this.sourceJSON = i, this.read({\n        layerDefinition: i\n      }, {\n        origin: \"service\"\n      }));\n    })()), this;\n  }\n\n  readCapabilities(e, r) {\n    const i = (e = (r = r.layerDefinition || r).capabilities || e) ? e.toLowerCase().split(\",\").map(e => e.trim()) : [];\n    return {\n      exportMap: {\n        supportsModification: !!r.canModifyLayer\n      },\n      operations: {\n        supportsQuery: -1 !== i.indexOf(\"query\")\n      }\n    };\n  }\n\n  set definitionExpression(e) {\n    this._setAndNotifyLayer(\"definitionExpression\", e);\n  }\n\n  get fieldsIndex() {\n    return new P(this.fields || []);\n  }\n\n  readGlobalIdFieldFromService(e, r) {\n    if ((r = r.layerDefinition || r).globalIdField) return r.globalIdField;\n    if (r.fields) for (const i of r.fields) if (\"esriFieldTypeGlobalID\" === i.type) return i.name;\n  }\n\n  get id() {\n    const e = this._get(\"id\");\n\n    return null == e ? J++ : e;\n  }\n\n  set id(e) {\n    this._get(\"id\") !== e && (!1 !== this.get(\"layer.capabilities.exportMap.supportsDynamicLayers\") ? this._set(\"id\", e) : this._logLockedError(\"id\", \"capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'\"));\n  }\n\n  set labelingInfo(e) {\n    this._setAndNotifyLayer(\"labelingInfo\", e);\n  }\n\n  writeLabelingInfo(e, r, i, t) {\n    e && e.length && (r.layerDefinition = {\n      drawingInfo: {\n        labelingInfo: e.map(e => e.write({}, t))\n      }\n    });\n  }\n\n  set labelsVisible(e) {\n    this._setAndNotifyLayer(\"labelsVisible\", e);\n  }\n\n  set layer(e) {\n    this._set(\"layer\", e), this.sublayers && this.sublayers.forEach(r => r.layer = e);\n  }\n\n  set listMode(e) {\n    this._set(\"listMode\", e);\n  }\n\n  set minScale(e) {\n    this._setAndNotifyLayer(\"minScale\", e);\n  }\n\n  readMinScale(e, r) {\n    return r.minScale || r.layerDefinition && r.layerDefinition.minScale || 0;\n  }\n\n  set maxScale(e) {\n    this._setAndNotifyLayer(\"maxScale\", e);\n  }\n\n  readMaxScale(e, r) {\n    return r.maxScale || r.layerDefinition && r.layerDefinition.maxScale || 0;\n  }\n\n  readObjectIdFieldFromService(e, r) {\n    if ((r = r.layerDefinition || r).objectIdField) return r.objectIdField;\n    if (r.fields) for (const i of r.fields) if (\"esriFieldTypeOID\" === i.type) return i.name;\n  }\n\n  set opacity(e) {\n    this._setAndNotifyLayer(\"opacity\", e);\n  }\n\n  readOpacity(e, r) {\n    const i = r.layerDefinition;\n    return 1 - .01 * (null != i.transparency ? i.transparency : i.drawingInfo.transparency);\n  }\n\n  writeOpacity(e, r, i, t) {\n    r.layerDefinition = {\n      drawingInfo: {\n        transparency: 100 - 100 * e\n      }\n    };\n  }\n\n  writeParent(e, r) {\n    this.parent && this.parent !== this.layer ? r.parentLayerId = I(this.parent.id) : r.parentLayerId = -1;\n  }\n\n  get defaultPopupTemplate() {\n    return this.createPopupTemplate();\n  }\n\n  set renderer(e) {\n    if (e) for (const r of e.getSymbols()) if (s(r)) {\n      $.warn(\"Sublayer renderer should use 2D symbols\");\n      break;\n    }\n\n    this._setAndNotifyLayer(\"renderer\", e);\n  }\n\n  get source() {\n    return this._get(\"source\") || new E({\n      mapLayerId: this.id\n    });\n  }\n\n  set source(e) {\n    this._setAndNotifyLayer(\"source\", e);\n  }\n\n  set sublayers(e) {\n    this._handleSublayersChange(e, this._get(\"sublayers\")), this._set(\"sublayers\", e);\n  }\n\n  castSublayers(e) {\n    return w(a.ofType(V), e);\n  }\n\n  writeSublayers(e, r, i) {\n    this.get(\"sublayers.length\") && (r[i] = this.sublayers.map(e => e.id).toArray().reverse());\n  }\n\n  readTypeIdField(e, r) {\n    let i = (r = r.layerDefinition || r).typeIdField;\n\n    if (i && r.fields) {\n      i = i.toLowerCase();\n      const e = r.fields.find(e => e.name.toLowerCase() === i);\n      e && (i = e.name);\n    }\n\n    return null;\n  }\n\n  get url() {\n    var e, r;\n    const i = null != (e = null == (r = this.layer) ? void 0 : r.parsedUrl) ? e : this._lastParsedUrl,\n          t = this.source;\n    if (!i) return null;\n    if (this._lastParsedUrl = i, \"map-layer\" === (null == t ? void 0 : t.type)) return `${i.path}/${t.mapLayerId}`;\n    const o = {\n      layer: JSON.stringify({\n        source: this.source\n      })\n    };\n    return `${i.path}/dynamicLayer?${f(o)}`;\n  }\n\n  set url(e) {\n    e ? this._override(\"url\", e) : this._clearOverride(\"url\");\n  }\n\n  set visible(e) {\n    this._setAndNotifyLayer(\"visible\", e);\n  }\n\n  writeVisible(e, r, i, t) {\n    r[i] = this.getAtOrigin(\"defaultVisibility\", \"service\") || e;\n  }\n\n  clone() {\n    const {\n      store: e\n    } = h(this),\n          r = new V();\n    return h(r).store = e.clone(R), this.commitProperty(\"url\"), r._lastParsedUrl = this._lastParsedUrl, r;\n  }\n\n  createPopupTemplate(e) {\n    return N(this, e);\n  }\n\n  createQuery() {\n    return new M({\n      returnGeometry: !0,\n      where: this.definitionExpression || \"1=1\"\n    });\n  }\n\n  async createFeatureLayer() {\n    var e, r;\n    if (this.hasOwnProperty(\"sublayers\")) return null;\n    const i = null == (e = this.layer) ? void 0 : e.parsedUrl,\n          t = new (0, (await import(\"../FeatureLayer.js\")).default)({\n      url: i.path\n    });\n    return i && this.source && (\"map-layer\" === this.source.type ? t.layerId = this.source.mapLayerId : t.dynamicDataSource = this.source), null != this.layer.refreshInterval && (t.refreshInterval = this.layer.refreshInterval), this.definitionExpression && (t.definitionExpression = this.definitionExpression), this.originIdOf(\"labelingInfo\") > 2 && (t.labelingInfo = y(this.labelingInfo)), this.originIdOf(\"labelsVisible\") > 0 && (t.labelsVisible = this.labelsVisible), this.originIdOf(\"legendEnabled\") > 0 && (t.legendEnabled = this.legendEnabled), this.originIdOf(\"visible\") > 0 && (t.visible = this.visible), this.originIdOf(\"minScale\") > 0 && (t.minScale = this.minScale), this.originIdOf(\"maxScale\") > 0 && (t.maxScale = this.maxScale), this.originIdOf(\"opacity\") > 0 && (t.opacity = this.opacity), this.originIdOf(\"popupTemplate\") > 0 && (t.popupTemplate = y(this.popupTemplate)), this.originIdOf(\"renderer\") > 2 && (t.renderer = y(this.renderer)), \"data-layer\" === (null == (r = this.source) ? void 0 : r.type) && (t.dynamicDataSource = this.source.clone()), this.originIdOf(\"title\") > 0 && (t.title = this.title), \"map-image\" === this.layer.type && this.layer.originIdOf(\"customParameters\") > 0 && (t.customParameters = this.layer.customParameters), \"tile\" === this.layer.type && this.layer.originIdOf(\"customParameters\") > 0 && (t.customParameters = this.layer.customParameters), t;\n  }\n\n  getFeatureType(e) {\n    const {\n      typeIdField: r,\n      types: i\n    } = this;\n    if (!r || !e) return null;\n    const t = e.attributes ? e.attributes[r] : void 0;\n    if (null == t) return null;\n    let o = null;\n    return i.some(e => {\n      const {\n        id: r\n      } = e;\n      return null != r && (r.toString() === t.toString() && (o = e), !!o);\n    }), o;\n  }\n\n  getFieldDomain(e, r) {\n    const i = r && r.feature,\n          t = this.getFeatureType(i);\n\n    if (t) {\n      const r = t.domains && t.domains[e];\n      if (r && \"inherited\" !== r.type) return r;\n    }\n\n    return this._getLayerDomain(e);\n  }\n\n  async queryFeatures(e = this.createQuery(), r) {\n    var i, t, o, s;\n    if (await this.load(), !this.get(\"capabilities.operations.supportsQuery\")) throw new l(\"Sublayer.queryFeatures\", \"this layer doesn't support queries.\");\n    const [{\n      executeQuery: a\n    }, {\n      default: n\n    }] = await Promise.all([import(\"../../rest/query/operations/query.js\"), import(\"../../rest/support/FeatureSet.js\")]),\n          p = await a(this.url, M.from(e), null != (i = null == (t = this.layer) ? void 0 : t.spatialReference) ? i : null, { ...r,\n      query: { ...(null == (o = this.layer) ? void 0 : o.customParameters),\n        token: null == (s = this.layer) ? void 0 : s.apiKey\n      }\n    }),\n          y = n.fromJSON(p.data);\n    if (null != y && y.features) for (const l of y.features) l.sourceLayer = this;\n    return y;\n  }\n\n  toExportImageJSON() {\n    var e;\n    const r = {\n      id: this.id,\n      source: (null == (e = this.source) ? void 0 : e.toJSON()) || {\n        mapLayerId: this.id,\n        type: \"mapLayer\"\n      }\n    };\n    this.definitionExpression && (r.definitionExpression = this.definitionExpression);\n    const i = [\"renderer\", \"labelingInfo\", \"opacity\", \"labelsVisible\"].reduce((e, r) => (e[r] = this.originIdOf(r), e), {});\n\n    if (Object.keys(i).some(e => i[e] > 2)) {\n      const e = r.drawingInfo = {};\n      i.renderer > 2 && (e.renderer = this.renderer ? this.renderer.toJSON() : null), i.labelsVisible > 2 && (e.showLabels = this.labelsVisible), this.labelsVisible && i.labelingInfo > 2 && (e.labelingInfo = this.labelingInfo ? this.labelingInfo.map(e => e.write({}, {\n        origin: \"service\",\n        layer: this.layer\n      })) : null, e.showLabels = !0), i.opacity > 2 && (e.transparency = 100 - 100 * this.opacity), this._assignDefaultSymbolColors(e.renderer);\n    }\n\n    return r;\n  }\n\n  _assignDefaultSymbolColors(e) {\n    this._forEachSimpleMarkerSymbols(e, e => {\n      e.color || \"esriSMSX\" !== e.style && \"esriSMSCross\" !== e.style || (e.outline && e.outline.color ? e.color = e.outline.color : e.color = [0, 0, 0, 0]);\n    });\n  }\n\n  _forEachSimpleMarkerSymbols(e, r) {\n    if (e) {\n      const i = \"uniqueValueInfos\" in e ? e.uniqueValueInfos : \"classBreakInfos\" in e ? e.classBreakInfos : [];\n\n      for (const e of i) k(e.symbol) && r(e.symbol);\n\n      \"symbol\" in e && k(e.symbol) && r(e.symbol), \"defaultSymbol\" in e && k(e.defaultSymbol) && r(e.defaultSymbol);\n    }\n  }\n\n  _setAndNotifyLayer(e, r) {\n    const i = this.layer,\n          t = this._get(e);\n\n    let o, s;\n\n    switch (e) {\n      case \"definitionExpression\":\n        o = \"supportsSublayerDefinitionExpression\";\n\n      case \"minScale\":\n      case \"maxScale\":\n      case \"visible\":\n        o = \"supportsSublayerVisibility\";\n        break;\n\n      case \"labelingInfo\":\n      case \"labelsVisible\":\n      case \"opacity\":\n      case \"renderer\":\n      case \"source\":\n        o = \"supportsDynamicLayers\", s = \"supportsModification\";\n    }\n\n    const a = h(this).getDefaultOrigin();\n\n    if (\"service\" !== a) {\n      if (o && !1 === this.get(`layer.capabilities.exportMap.${o}`)) return void this._logLockedError(e, `capability not available 'layer.capabilities.exportMap.${o}'`);\n      if (s && !1 === this.get(`capabilities.exportMap.${s}`)) return void this._logLockedError(e, `capability not available 'capabilities.exportMap.${s}'`);\n    }\n\n    \"source\" !== e || \"not-loaded\" === this.loadStatus ? (this._set(e, r), \"service\" !== a && t !== r && i && i.emit && i.emit(\"sublayer-update\", {\n      propertyName: e,\n      target: this\n    })) : this._logLockedError(e, \"'source' can't be changed after calling sublayer.load()\");\n  }\n\n  _handleSublayersChange(e, r) {\n    r && (r.forEach(e => {\n      e.parent = null, e.layer = null;\n    }), this.handles.removeAll()), e && (e.forEach(e => {\n      e.parent = this, e.layer = this.layer;\n    }), this.handles.add([e.on(\"after-add\", ({\n      item: e\n    }) => {\n      e.parent = this, e.layer = this.layer;\n    }), e.on(\"after-remove\", ({\n      item: e\n    }) => {\n      e.parent = null, e.layer = null;\n    }), e.on(\"before-changes\", e => {\n      const r = this.get(\"layer.capabilities.exportMap.supportsSublayersChanges\");\n      null == r || r || ($.error(new l(\"sublayer:sublayers-non-modifiable\", \"Sublayer can't be added, moved, or removed from the layer's sublayers\", {\n        sublayer: this,\n        layer: this.layer\n      })), e.preventDefault());\n    })]));\n  }\n\n  _logLockedError(e, r) {\n    $.error(new l(\"sublayer:locked\", `Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`, {\n      reason: r,\n      sublayer: this,\n      layer: this.layer\n    }));\n  }\n\n  _getLayerDomain(e) {\n    const r = this.fieldsIndex.get(e);\n    return r ? r.domain : null;\n  }\n\n};\nB.test = {\n  isMapImageLayerOverridePolicy: e => e === q || e === C,\n  isTileImageLayerOverridePolicy: e => e === A\n}, e([m({\n  readOnly: !0\n})], B.prototype, \"capabilities\", void 0), e([g(\"service\", \"capabilities\", [\"layerDefinition.canModifyLayer\", \"layerDefinition.capabilities\"])], B.prototype, \"readCapabilities\", null), e([m({\n  type: String,\n  value: null,\n  json: {\n    name: \"layerDefinition.definitionExpression\",\n    write: {\n      overridePolicy: C\n    }\n  }\n})], B.prototype, \"definitionExpression\", null), e([m({\n  type: [x],\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"layerDefinition.fields\"\n        }\n      }\n    }\n  }\n})], B.prototype, \"fields\", void 0), e([m({\n  readOnly: !0\n})], B.prototype, \"fieldsIndex\", null), e([m({\n  type: T,\n  json: {\n    read: {\n      source: \"layerDefinition.extent\"\n    }\n  }\n})], B.prototype, \"fullExtent\", void 0), e([m({\n  type: String\n})], B.prototype, \"globalIdField\", void 0), e([g(\"service\", \"globalIdField\", [\"layerDefinition.globalIdField\", \"layerDefinition.fields\"])], B.prototype, \"readGlobalIdFieldFromService\", null), e([m({\n  type: j,\n  json: {\n    write: {\n      ignoreOrigin: !0\n    }\n  }\n})], B.prototype, \"id\", null), e([m({\n  value: null,\n  type: [F],\n  json: {\n    read: {\n      source: \"layerDefinition.drawingInfo.labelingInfo\"\n    },\n    write: {\n      target: \"layerDefinition.drawingInfo.labelingInfo\",\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"labelingInfo\", null), e([S(\"labelingInfo\")], B.prototype, \"writeLabelingInfo\", null), e([m({\n  type: Boolean,\n  value: !0,\n  json: {\n    read: {\n      source: \"layerDefinition.drawingInfo.showLabels\"\n    },\n    write: {\n      target: \"layerDefinition.drawingInfo.showLabels\",\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"labelsVisible\", null), e([m({\n  value: null\n})], B.prototype, \"layer\", null), e([m({\n  type: Boolean,\n  value: !0,\n  json: {\n    origins: {\n      service: {\n        read: {\n          enabled: !1\n        }\n      }\n    },\n    read: {\n      source: \"showLegend\"\n    },\n    write: {\n      target: \"showLegend\",\n      overridePolicy: U\n    }\n  }\n})], B.prototype, \"legendEnabled\", void 0), e([m({\n  type: [\"show\", \"hide\", \"hide-children\"],\n  value: \"show\",\n  json: {\n    read: !1,\n    write: !1,\n    origins: {\n      \"web-scene\": {\n        read: !0,\n        write: !0\n      }\n    }\n  }\n})], B.prototype, \"listMode\", null), e([m({\n  type: Number,\n  value: 0,\n  json: {\n    write: {\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"minScale\", null), e([g(\"minScale\", [\"minScale\", \"layerDefinition.minScale\"])], B.prototype, \"readMinScale\", null), e([m({\n  type: Number,\n  value: 0,\n  json: {\n    write: {\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"maxScale\", null), e([g(\"maxScale\", [\"maxScale\", \"layerDefinition.maxScale\"])], B.prototype, \"readMaxScale\", null), e([m({\n  type: String\n})], B.prototype, \"objectIdField\", void 0), e([g(\"service\", \"objectIdField\", [\"layerDefinition.objectIdField\", \"layerDefinition.fields\"])], B.prototype, \"readObjectIdFieldFromService\", null), e([m({\n  type: Number,\n  value: 1,\n  json: {\n    write: {\n      target: \"layerDefinition.drawingInfo.transparency\",\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"opacity\", null), e([g(\"opacity\", [\"layerDefinition.drawingInfo.transparency\", \"layerDefinition.transparency\"])], B.prototype, \"readOpacity\", null), e([S(\"opacity\")], B.prototype, \"writeOpacity\", null), e([m({\n  json: {\n    type: j,\n    write: {\n      target: \"parentLayerId\",\n      allowNull: !0,\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"parent\", void 0), e([S(\"parent\")], B.prototype, \"writeParent\", null), e([m({\n  type: Boolean,\n  value: !0,\n  json: {\n    read: {\n      source: \"disablePopup\",\n      reader: (e, r) => !r.disablePopup\n    },\n    write: {\n      target: \"disablePopup\",\n      overridePolicy: U,\n\n      writer(e, r, i) {\n        r[i] = !e;\n      }\n\n    }\n  }\n})], B.prototype, \"popupEnabled\", void 0), e([m({\n  type: r,\n  json: {\n    read: {\n      source: \"popupInfo\"\n    },\n    write: {\n      target: \"popupInfo\",\n      overridePolicy: U\n    }\n  }\n})], B.prototype, \"popupTemplate\", void 0), e([m({\n  readOnly: !0\n})], B.prototype, \"defaultPopupTemplate\", null), e([m({\n  types: i,\n  value: null,\n  json: {\n    name: \"layerDefinition.drawingInfo.renderer\",\n    write: {\n      overridePolicy: q\n    },\n    origins: {\n      \"web-scene\": {\n        types: t,\n        name: \"layerDefinition.drawingInfo.renderer\",\n        write: {\n          overridePolicy: q\n        }\n      }\n    }\n  }\n})], B.prototype, \"renderer\", null), e([m({\n  types: {\n    key: \"type\",\n    base: null,\n    typeMap: {\n      \"data-layer\": _,\n      \"map-layer\": E\n    }\n  },\n\n  cast(e) {\n    if (e) {\n      if (\"mapLayerId\" in e) return L(E, e);\n      if (\"dataSource\" in e) return L(_, e);\n    }\n\n    return e;\n  },\n\n  json: {\n    name: \"layerDefinition.source\",\n    write: {\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"source\", null), e([m()], B.prototype, \"sourceJSON\", void 0), e([m({\n  value: null,\n  json: {\n    type: [j],\n    write: {\n      target: \"subLayerIds\",\n      allowNull: !0,\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"sublayers\", null), e([b(\"sublayers\")], B.prototype, \"castSublayers\", null), e([S(\"sublayers\")], B.prototype, \"writeSublayers\", null), e([m({\n  type: String,\n  json: {\n    read: {\n      source: \"name\"\n    },\n    write: {\n      target: \"name\",\n      allowNull: !0,\n      overridePolicy: U\n    }\n  }\n})], B.prototype, \"title\", void 0), e([m({\n  type: String\n})], B.prototype, \"typeIdField\", void 0), e([g(\"typeIdField\", [\"layerDefinition.typeIdField\"])], B.prototype, \"readTypeIdField\", null), e([m({\n  type: [O],\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"layerDefinition.types\"\n        }\n      }\n    }\n  }\n})], B.prototype, \"types\", void 0), e([m({\n  type: String,\n  json: {\n    read: {\n      source: \"layerUrl\"\n    },\n    write: {\n      target: \"layerUrl\",\n      overridePolicy: A\n    }\n  }\n})], B.prototype, \"url\", null), e([m({\n  type: Boolean,\n  value: !0,\n  json: {\n    read: {\n      source: \"defaultVisibility\"\n    },\n    write: {\n      target: \"defaultVisibility\",\n      overridePolicy: q\n    }\n  }\n})], B.prototype, \"visible\", null), e([S(\"visible\")], B.prototype, \"writeVisible\", null), B = V = e([v(\"esri.layers.support.Sublayer\")], B);\nvar Q = B;\nexport default Q;","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgis-api-react/node_modules/@arcgis/core/layers/support/Sublayer.js"],"names":["_","e","r","rendererTypes","i","webSceneRendererTypes","t","o","isSymbol3D","s","a","l","HandleOwnerMixin","n","IdentifiableMixin","p","clone","y","d","u","MultiOriginJSONMixin","c","objectToQuery","f","property","m","getProperties","h","cast","b","reader","g","subclass","v","writer","S","ensureInteger","I","ensureType","w","Integer","j","ensureClass","L","nameToId","D","O","x","P","F","DataLayerSource","MapLayerSource","E","M","createPopupTemplate","N","T","V","k","type","C","originIdOf","origin","ignoreOrigin","allowNull","enabled","layer","writeSublayerStructure","A","_isOverridden","q","U","$","getLogger","J","R","Set","add","B","constructor","capabilities","fields","fullExtent","globalIdField","legendEnabled","objectIdField","popupEnabled","popupTemplate","sourceJSON","title","typeIdField","types","load","addResolvingPromise","url","sublayer","source","responseType","query","data","id","mapLayerId","fetchSublayerInfo","read","layerDefinition","readCapabilities","toLowerCase","split","map","trim","exportMap","supportsModification","canModifyLayer","operations","supportsQuery","indexOf","definitionExpression","_setAndNotifyLayer","fieldsIndex","readGlobalIdFieldFromService","name","_get","get","_set","_logLockedError","labelingInfo","writeLabelingInfo","length","drawingInfo","write","labelsVisible","sublayers","forEach","listMode","minScale","readMinScale","maxScale","readMaxScale","readObjectIdFieldFromService","opacity","readOpacity","transparency","writeOpacity","writeParent","parent","parentLayerId","defaultPopupTemplate","renderer","getSymbols","warn","_handleSublayersChange","castSublayers","ofType","writeSublayers","toArray","reverse","readTypeIdField","find","parsedUrl","_lastParsedUrl","path","JSON","stringify","_override","_clearOverride","visible","writeVisible","getAtOrigin","store","commitProperty","createQuery","returnGeometry","where","createFeatureLayer","hasOwnProperty","default","layerId","dynamicDataSource","refreshInterval","customParameters","getFeatureType","attributes","some","toString","getFieldDomain","feature","domains","_getLayerDomain","queryFeatures","executeQuery","Promise","all","from","spatialReference","token","apiKey","fromJSON","features","sourceLayer","toExportImageJSON","toJSON","reduce","Object","keys","showLabels","_assignDefaultSymbolColors","_forEachSimpleMarkerSymbols","color","style","outline","uniqueValueInfos","classBreakInfos","symbol","defaultSymbol","getDefaultOrigin","loadStatus","emit","propertyName","target","handles","removeAll","on","item","error","preventDefault","reason","domain","test","isMapImageLayerOverridePolicy","isTileImageLayerOverridePolicy","readOnly","prototype","String","value","json","overridePolicy","origins","service","Boolean","Number","disablePopup","key","base","typeMap","Q"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{rendererTypes as i,webSceneRendererTypes as t}from\"../../renderers/support/types.js\";import o from\"../../request.js\";import{isSymbol3D as s}from\"../../symbols.js\";import a from\"../../core/Collection.js\";import l from\"../../core/Error.js\";import{HandleOwnerMixin as n}from\"../../core/HandleOwner.js\";import{IdentifiableMixin as p}from\"../../core/Identifiable.js\";import{clone as y}from\"../../core/lang.js\";import d from\"../../core/Loadable.js\";import u from\"../../core/Logger.js\";import{MultiOriginJSONMixin as c}from\"../../core/MultiOriginJSONSupport.js\";import{objectToQuery as f}from\"../../core/urlUtils.js\";import{property as m}from\"../../core/accessorSupport/decorators/property.js\";import{getProperties as h}from\"../../core/accessorSupport/utils.js\";import{cast as b}from\"../../core/accessorSupport/decorators/cast.js\";import\"../../core/has.js\";import{reader as g}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as v}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as S}from\"../../core/accessorSupport/decorators/writer.js\";import{ensureInteger as I,ensureType as w,Integer as j,ensureClass as L}from\"../../core/accessorSupport/ensureType.js\";import{nameToId as D}from\"../../core/accessorSupport/PropertyOrigin.js\";import O from\"./FeatureType.js\";import x from\"./Field.js\";import P from\"./FieldsIndex.js\";import F from\"./LabelClass.js\";import{DataLayerSource as _}from\"./source/DataLayerSource.js\";import{MapLayerSource as E}from\"./source/MapLayerSource.js\";import M from\"../../rest/support/Query.js\";import{createPopupTemplate as N}from\"../../support/popupUtils.js\";import T from\"../../geometry/Extent.js\";var V;function k(e){return e&&\"esriSMS\"===e.type}function C(e,r,i){var t;const o=this.originIdOf(r)>=D(i.origin);return{ignoreOrigin:!0,allowNull:o,enabled:!!i&&(\"map-image\"===(null==(t=i.layer)?void 0:t.type)&&(i.writeSublayerStructure||o))}}function A(e,r,i){var t;return{enabled:!!i&&(\"tile\"===(null==(t=i.layer)?void 0:t.type)&&this._isOverridden(r))}}function q(e,r,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function U(e,r,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(r)>=D(i.origin))}}const $=u.getLogger(\"esri.layers.support.Sublayer\");let J=0;const R=new Set;R.add(\"layer\"),R.add(\"parent\"),R.add(\"loaded\"),R.add(\"loadStatus\"),R.add(\"loadError\"),R.add(\"loadWarnings\");let B=V=class extends(n(c(p(d)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var r;if(!this.layer&&!this.url)throw new l(\"sublayer:missing-layer\",\"Sublayer can't be loaded without being part of a layer\",{sublayer:this});let i=null;if(!this.layer||this.originIdOf(\"url\")>2||\"data-layer\"===(null==(r=this.source)?void 0:r.type)){i=(await o(this.url,{responseType:\"json\",query:{f:\"json\"},...e})).data}else{var t;let r=this.id;\"map-layer\"===(null==(t=this.source)?void 0:t.type)&&(r=this.source.mapLayerId),i=await this.layer.fetchSublayerInfo(r,e)}i&&(this.sourceJSON=i,this.read({layerDefinition:i},{origin:\"service\"}))})()),this}readCapabilities(e,r){const i=(e=(r=r.layerDefinition||r).capabilities||e)?e.toLowerCase().split(\",\").map((e=>e.trim())):[];return{exportMap:{supportsModification:!!r.canModifyLayer},operations:{supportsQuery:-1!==i.indexOf(\"query\")}}}set definitionExpression(e){this._setAndNotifyLayer(\"definitionExpression\",e)}get fieldsIndex(){return new P(this.fields||[])}readGlobalIdFieldFromService(e,r){if((r=r.layerDefinition||r).globalIdField)return r.globalIdField;if(r.fields)for(const i of r.fields)if(\"esriFieldTypeGlobalID\"===i.type)return i.name}get id(){const e=this._get(\"id\");return null==e?J++:e}set id(e){this._get(\"id\")!==e&&(!1!==this.get(\"layer.capabilities.exportMap.supportsDynamicLayers\")?this._set(\"id\",e):this._logLockedError(\"id\",\"capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'\"))}set labelingInfo(e){this._setAndNotifyLayer(\"labelingInfo\",e)}writeLabelingInfo(e,r,i,t){e&&e.length&&(r.layerDefinition={drawingInfo:{labelingInfo:e.map((e=>e.write({},t)))}})}set labelsVisible(e){this._setAndNotifyLayer(\"labelsVisible\",e)}set layer(e){this._set(\"layer\",e),this.sublayers&&this.sublayers.forEach((r=>r.layer=e))}set listMode(e){this._set(\"listMode\",e)}set minScale(e){this._setAndNotifyLayer(\"minScale\",e)}readMinScale(e,r){return r.minScale||r.layerDefinition&&r.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer(\"maxScale\",e)}readMaxScale(e,r){return r.maxScale||r.layerDefinition&&r.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,r){if((r=r.layerDefinition||r).objectIdField)return r.objectIdField;if(r.fields)for(const i of r.fields)if(\"esriFieldTypeOID\"===i.type)return i.name}set opacity(e){this._setAndNotifyLayer(\"opacity\",e)}readOpacity(e,r){const i=r.layerDefinition;return 1-.01*(null!=i.transparency?i.transparency:i.drawingInfo.transparency)}writeOpacity(e,r,i,t){r.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,r){this.parent&&this.parent!==this.layer?r.parentLayerId=I(this.parent.id):r.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const r of e.getSymbols())if(s(r)){$.warn(\"Sublayer renderer should use 2D symbols\");break}this._setAndNotifyLayer(\"renderer\",e)}get source(){return this._get(\"source\")||new E({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer(\"source\",e)}set sublayers(e){this._handleSublayersChange(e,this._get(\"sublayers\")),this._set(\"sublayers\",e)}castSublayers(e){return w(a.ofType(V),e)}writeSublayers(e,r,i){this.get(\"sublayers.length\")&&(r[i]=this.sublayers.map((e=>e.id)).toArray().reverse())}readTypeIdField(e,r){let i=(r=r.layerDefinition||r).typeIdField;if(i&&r.fields){i=i.toLowerCase();const e=r.fields.find((e=>e.name.toLowerCase()===i));e&&(i=e.name)}return null}get url(){var e,r;const i=null!=(e=null==(r=this.layer)?void 0:r.parsedUrl)?e:this._lastParsedUrl,t=this.source;if(!i)return null;if(this._lastParsedUrl=i,\"map-layer\"===(null==t?void 0:t.type))return`${i.path}/${t.mapLayerId}`;const o={layer:JSON.stringify({source:this.source})};return`${i.path}/dynamicLayer?${f(o)}`}set url(e){e?this._override(\"url\",e):this._clearOverride(\"url\")}set visible(e){this._setAndNotifyLayer(\"visible\",e)}writeVisible(e,r,i,t){r[i]=this.getAtOrigin(\"defaultVisibility\",\"service\")||e}clone(){const{store:e}=h(this),r=new V;return h(r).store=e.clone(R),this.commitProperty(\"url\"),r._lastParsedUrl=this._lastParsedUrl,r}createPopupTemplate(e){return N(this,e)}createQuery(){return new M({returnGeometry:!0,where:this.definitionExpression||\"1=1\"})}async createFeatureLayer(){var e,r;if(this.hasOwnProperty(\"sublayers\"))return null;const i=null==(e=this.layer)?void 0:e.parsedUrl,t=new(0,(await import(\"../FeatureLayer.js\")).default)({url:i.path});return i&&this.source&&(\"map-layer\"===this.source.type?t.layerId=this.source.mapLayerId:t.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(t.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(t.definitionExpression=this.definitionExpression),this.originIdOf(\"labelingInfo\")>2&&(t.labelingInfo=y(this.labelingInfo)),this.originIdOf(\"labelsVisible\")>0&&(t.labelsVisible=this.labelsVisible),this.originIdOf(\"legendEnabled\")>0&&(t.legendEnabled=this.legendEnabled),this.originIdOf(\"visible\")>0&&(t.visible=this.visible),this.originIdOf(\"minScale\")>0&&(t.minScale=this.minScale),this.originIdOf(\"maxScale\")>0&&(t.maxScale=this.maxScale),this.originIdOf(\"opacity\")>0&&(t.opacity=this.opacity),this.originIdOf(\"popupTemplate\")>0&&(t.popupTemplate=y(this.popupTemplate)),this.originIdOf(\"renderer\")>2&&(t.renderer=y(this.renderer)),\"data-layer\"===(null==(r=this.source)?void 0:r.type)&&(t.dynamicDataSource=this.source.clone()),this.originIdOf(\"title\")>0&&(t.title=this.title),\"map-image\"===this.layer.type&&this.layer.originIdOf(\"customParameters\")>0&&(t.customParameters=this.layer.customParameters),\"tile\"===this.layer.type&&this.layer.originIdOf(\"customParameters\")>0&&(t.customParameters=this.layer.customParameters),t}getFeatureType(e){const{typeIdField:r,types:i}=this;if(!r||!e)return null;const t=e.attributes?e.attributes[r]:void 0;if(null==t)return null;let o=null;return i.some((e=>{const{id:r}=e;return null!=r&&(r.toString()===t.toString()&&(o=e),!!o)})),o}getFieldDomain(e,r){const i=r&&r.feature,t=this.getFeatureType(i);if(t){const r=t.domains&&t.domains[e];if(r&&\"inherited\"!==r.type)return r}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),r){var i,t,o,s;if(await this.load(),!this.get(\"capabilities.operations.supportsQuery\"))throw new l(\"Sublayer.queryFeatures\",\"this layer doesn't support queries.\");const[{executeQuery:a},{default:n}]=await Promise.all([import(\"../../rest/query/operations/query.js\"),import(\"../../rest/support/FeatureSet.js\")]),p=await a(this.url,M.from(e),null!=(i=null==(t=this.layer)?void 0:t.spatialReference)?i:null,{...r,query:{...null==(o=this.layer)?void 0:o.customParameters,token:null==(s=this.layer)?void 0:s.apiKey}}),y=n.fromJSON(p.data);if(null!=y&&y.features)for(const l of y.features)l.sourceLayer=this;return y}toExportImageJSON(){var e;const r={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:\"mapLayer\"}};this.definitionExpression&&(r.definitionExpression=this.definitionExpression);const i=[\"renderer\",\"labelingInfo\",\"opacity\",\"labelsVisible\"].reduce(((e,r)=>(e[r]=this.originIdOf(r),e)),{});if(Object.keys(i).some((e=>i[e]>2))){const e=r.drawingInfo={};i.renderer>2&&(e.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>2&&(e.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>2&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map((e=>e.write({},{origin:\"service\",layer:this.layer}))):null,e.showLabels=!0),i.opacity>2&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,(e=>{e.color||\"esriSMSX\"!==e.style&&\"esriSMSCross\"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}_forEachSimpleMarkerSymbols(e,r){if(e){const i=\"uniqueValueInfos\"in e?e.uniqueValueInfos:\"classBreakInfos\"in e?e.classBreakInfos:[];for(const e of i)k(e.symbol)&&r(e.symbol);\"symbol\"in e&&k(e.symbol)&&r(e.symbol),\"defaultSymbol\"in e&&k(e.defaultSymbol)&&r(e.defaultSymbol)}}_setAndNotifyLayer(e,r){const i=this.layer,t=this._get(e);let o,s;switch(e){case\"definitionExpression\":o=\"supportsSublayerDefinitionExpression\";case\"minScale\":case\"maxScale\":case\"visible\":o=\"supportsSublayerVisibility\";break;case\"labelingInfo\":case\"labelsVisible\":case\"opacity\":case\"renderer\":case\"source\":o=\"supportsDynamicLayers\",s=\"supportsModification\"}const a=h(this).getDefaultOrigin();if(\"service\"!==a){if(o&&!1===this.get(`layer.capabilities.exportMap.${o}`))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${o}'`);if(s&&!1===this.get(`capabilities.exportMap.${s}`))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}\"source\"!==e||\"not-loaded\"===this.loadStatus?(this._set(e,r),\"service\"!==a&&t!==r&&i&&i.emit&&i.emit(\"sublayer-update\",{propertyName:e,target:this})):this._logLockedError(e,\"'source' can't be changed after calling sublayer.load()\")}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((e=>{e.parent=this,e.layer=this.layer})),this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,e.layer=this.layer})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,e.layer=null})),e.on(\"before-changes\",(e=>{const r=this.get(\"layer.capabilities.exportMap.supportsSublayersChanges\");null==r||r||($.error(new l(\"sublayer:sublayers-non-modifiable\",\"Sublayer can't be added, moved, or removed from the layer's sublayers\",{sublayer:this,layer:this.layer})),e.preventDefault())}))]))}_logLockedError(e,r){$.error(new l(\"sublayer:locked\",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:r,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}};B.test={isMapImageLayerOverridePolicy:e=>e===q||e===C,isTileImageLayerOverridePolicy:e=>e===A},e([m({readOnly:!0})],B.prototype,\"capabilities\",void 0),e([g(\"service\",\"capabilities\",[\"layerDefinition.canModifyLayer\",\"layerDefinition.capabilities\"])],B.prototype,\"readCapabilities\",null),e([m({type:String,value:null,json:{name:\"layerDefinition.definitionExpression\",write:{overridePolicy:C}}})],B.prototype,\"definitionExpression\",null),e([m({type:[x],json:{origins:{service:{read:{source:\"layerDefinition.fields\"}}}}})],B.prototype,\"fields\",void 0),e([m({readOnly:!0})],B.prototype,\"fieldsIndex\",null),e([m({type:T,json:{read:{source:\"layerDefinition.extent\"}}})],B.prototype,\"fullExtent\",void 0),e([m({type:String})],B.prototype,\"globalIdField\",void 0),e([g(\"service\",\"globalIdField\",[\"layerDefinition.globalIdField\",\"layerDefinition.fields\"])],B.prototype,\"readGlobalIdFieldFromService\",null),e([m({type:j,json:{write:{ignoreOrigin:!0}}})],B.prototype,\"id\",null),e([m({value:null,type:[F],json:{read:{source:\"layerDefinition.drawingInfo.labelingInfo\"},write:{target:\"layerDefinition.drawingInfo.labelingInfo\",overridePolicy:q}}})],B.prototype,\"labelingInfo\",null),e([S(\"labelingInfo\")],B.prototype,\"writeLabelingInfo\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"layerDefinition.drawingInfo.showLabels\"},write:{target:\"layerDefinition.drawingInfo.showLabels\",overridePolicy:q}}})],B.prototype,\"labelsVisible\",null),e([m({value:null})],B.prototype,\"layer\",null),e([m({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:\"showLegend\"},write:{target:\"showLegend\",overridePolicy:U}}})],B.prototype,\"legendEnabled\",void 0),e([m({type:[\"show\",\"hide\",\"hide-children\"],value:\"show\",json:{read:!1,write:!1,origins:{\"web-scene\":{read:!0,write:!0}}}})],B.prototype,\"listMode\",null),e([m({type:Number,value:0,json:{write:{overridePolicy:q}}})],B.prototype,\"minScale\",null),e([g(\"minScale\",[\"minScale\",\"layerDefinition.minScale\"])],B.prototype,\"readMinScale\",null),e([m({type:Number,value:0,json:{write:{overridePolicy:q}}})],B.prototype,\"maxScale\",null),e([g(\"maxScale\",[\"maxScale\",\"layerDefinition.maxScale\"])],B.prototype,\"readMaxScale\",null),e([m({type:String})],B.prototype,\"objectIdField\",void 0),e([g(\"service\",\"objectIdField\",[\"layerDefinition.objectIdField\",\"layerDefinition.fields\"])],B.prototype,\"readObjectIdFieldFromService\",null),e([m({type:Number,value:1,json:{write:{target:\"layerDefinition.drawingInfo.transparency\",overridePolicy:q}}})],B.prototype,\"opacity\",null),e([g(\"opacity\",[\"layerDefinition.drawingInfo.transparency\",\"layerDefinition.transparency\"])],B.prototype,\"readOpacity\",null),e([S(\"opacity\")],B.prototype,\"writeOpacity\",null),e([m({json:{type:j,write:{target:\"parentLayerId\",allowNull:!0,overridePolicy:q}}})],B.prototype,\"parent\",void 0),e([S(\"parent\")],B.prototype,\"writeParent\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"disablePopup\",reader:(e,r)=>!r.disablePopup},write:{target:\"disablePopup\",overridePolicy:U,writer(e,r,i){r[i]=!e}}}})],B.prototype,\"popupEnabled\",void 0),e([m({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\",overridePolicy:U}}})],B.prototype,\"popupTemplate\",void 0),e([m({readOnly:!0})],B.prototype,\"defaultPopupTemplate\",null),e([m({types:i,value:null,json:{name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:q},origins:{\"web-scene\":{types:t,name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:q}}}}})],B.prototype,\"renderer\",null),e([m({types:{key:\"type\",base:null,typeMap:{\"data-layer\":_,\"map-layer\":E}},cast(e){if(e){if(\"mapLayerId\"in e)return L(E,e);if(\"dataSource\"in e)return L(_,e)}return e},json:{name:\"layerDefinition.source\",write:{overridePolicy:q}}})],B.prototype,\"source\",null),e([m()],B.prototype,\"sourceJSON\",void 0),e([m({value:null,json:{type:[j],write:{target:\"subLayerIds\",allowNull:!0,overridePolicy:q}}})],B.prototype,\"sublayers\",null),e([b(\"sublayers\")],B.prototype,\"castSublayers\",null),e([S(\"sublayers\")],B.prototype,\"writeSublayers\",null),e([m({type:String,json:{read:{source:\"name\"},write:{target:\"name\",allowNull:!0,overridePolicy:U}}})],B.prototype,\"title\",void 0),e([m({type:String})],B.prototype,\"typeIdField\",void 0),e([g(\"typeIdField\",[\"layerDefinition.typeIdField\"])],B.prototype,\"readTypeIdField\",null),e([m({type:[O],json:{origins:{service:{read:{source:\"layerDefinition.types\"}}}}})],B.prototype,\"types\",void 0),e([m({type:String,json:{read:{source:\"layerUrl\"},write:{target:\"layerUrl\",overridePolicy:A}}})],B.prototype,\"url\",null),e([m({type:Boolean,value:!0,json:{read:{source:\"defaultVisibility\"},write:{target:\"defaultVisibility\",overridePolicy:q}}})],B.prototype,\"visible\",null),e([S(\"visible\")],B.prototype,\"writeVisible\",null),B=V=e([v(\"esri.layers.support.Sublayer\")],B);var Q=B;export default Q;\n"]},"metadata":{},"sourceType":"module"}