{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport { isPolyline as t, isPolygon as e } from \"../../../geometry/support/jsonUtils.js\";\nimport { PathHelper as i } from \"../CurveHelper.js\";\nimport { DashPattern as s, GeometryWalker as h } from \"../GeometryWalker.js\";\n\nclass n {\n  static local() {\n    return null === n.instance && (n.instance = new n()), n.instance;\n  }\n\n  execute(t, e, i) {\n    return new r(t, e, i);\n  }\n\n}\n\nn.instance = null;\n\nclass r {\n  constructor(t, e, i) {\n    this._inputGeometries = t, this._height = (void 0 !== e.amplitude ? e.amplitude : 2) * i, this._period = (void 0 !== e.period ? e.period : 3) * i, this._style = e.waveform, this._height <= 0 && (this._height = Math.abs(this._height)), this._period <= 0 && (this._period = Math.abs(this._period)), this._pattern = new s(), this._pattern.addValue(this._period), this._pattern.addValue(this._period), this._walker = new h(), this._walker.updateTolerance(i);\n  }\n\n  next() {\n    let i = this._inputGeometries.next();\n\n    for (; i;) {\n      if (0 === this._height || 0 === this._period) return i;\n\n      if (t(i)) {\n        const t = this._processGeom(i.paths);\n\n        if (t.length) return {\n          paths: t\n        };\n      }\n\n      if (e(i)) {\n        const t = this._processGeom(i.rings);\n\n        if (t.length) return {\n          rings: t\n        };\n      }\n\n      i = this._inputGeometries.next();\n    }\n\n    return null;\n  }\n\n  _processGeom(t) {\n    const e = [];\n\n    for (const i of t) if (this._walker.init(i, this._pattern)) switch (this._style) {\n      case \"Sinus\":\n      default:\n        e.push(this._constructCurve(i, !1));\n        break;\n\n      case \"Square\":\n        e.push(this._constructSquare(i));\n        break;\n\n      case \"Triangle\":\n        e.push(this._constructTriangle(i));\n        break;\n\n      case \"Random\":\n        e.push(this._constructCurve(i, !0));\n    } else e.push(i);\n\n    return e;\n  }\n\n  _constructCurve(t, e) {\n    const s = new i(),\n          h = this._walker.calculatePathLength(t);\n\n    let n = Math.round(h / this._period);\n    0 === n && (n = 1);\n\n    const r = n * 16 + 1,\n          a = h / n,\n          o = this._period / 16,\n          l = 1 / r,\n          _ = 2 * Math.PI * h / a,\n          c = 2 * Math.PI * Math.random(),\n          p = 2 * Math.PI * Math.random(),\n          u = 2 * Math.PI * Math.random(),\n          d = .75 - Math.random() / 2,\n          g = .75 - Math.random() / 2,\n          w = {};\n\n    this._walker.curPointAndAngle(w), s.startPath(w.pt);\n    let k = 0;\n\n    for (;;) {\n      if (!this._walker.nextPointAndAngle(o, w)) {\n        s.lineTo(t[t.length - 1]);\n        break;\n      }\n\n      {\n        const t = k;\n        let i;\n\n        if (k += l, e) {\n          const e = this._height / 2 * (1 + .3 * Math.sin(d * _ * t + c));\n          i = e * Math.sin(_ * t + p), i += e * Math.sin(g * _ * t + u), i /= 2;\n        } else i = .5 * this._height * Math.sin(.5 * _ * t);\n\n        s.lineTo([w.pt[0] - i * w.sa, w.pt[1] + i * w.ca]);\n      }\n    }\n\n    return s.path();\n  }\n\n  _constructSquare(t) {\n    const e = new i(),\n          s = this._walker.calculatePathLength(t);\n\n    Math.round(s / this._period);\n    let h = !0;\n\n    for (;;) {\n      let t = !1;\n\n      if (this._walker.curPositionIsValid()) {\n        const i = {};\n\n        this._walker.curPointAndAngle(i);\n\n        const s = {};\n\n        if (this._walker.nextPointAndAngle(this._period, s)) {\n          const n = {};\n          this._walker.nextPointAndAngle(this._period, n) && (h ? (e.startPath(i.pt), h = !1) : e.lineTo(i.pt), e.lineTo([i.pt[0] - this._height / 2 * i.sa, i.pt[1] + this._height / 2 * i.ca]), e.lineTo([s.pt[0] - this._height / 2 * s.sa, s.pt[1] + this._height / 2 * s.ca]), e.lineTo([s.pt[0] + this._height / 2 * s.sa, s.pt[1] - this._height / 2 * s.ca]), e.lineTo([n.pt[0] + this._height / 2 * n.sa, n.pt[1] - this._height / 2 * n.ca]), t = !0);\n        }\n      }\n\n      if (!t) {\n        e.lineTo(this._walker.getPathEnd());\n        break;\n      }\n    }\n\n    return e.path();\n  }\n\n  _constructTriangle(t) {\n    const e = new i(),\n          s = this._walker.calculatePathLength(t);\n\n    Math.round(s / this._period);\n    let h = !0;\n\n    for (;;) {\n      let t = !1;\n\n      if (this._walker.curPositionIsValid()) {\n        const i = {};\n\n        this._walker.curPointAndAngle(i);\n\n        const s = {};\n\n        if (this._walker.nextPointAndAngle(this._period / 2, s)) {\n          const n = {};\n          this._walker.nextPointAndAngle(this._period, n) && (this._walker.nextPosition(this._period / 2) && (h ? (e.startPath(i.pt), h = !1) : e.lineTo(i.pt), e.lineTo([s.pt[0] - this._height / 2 * s.sa, s.pt[1] + this._height / 2 * s.ca]), e.lineTo([n.pt[0] + this._height / 2 * n.sa, n.pt[1] - this._height / 2 * n.ca])), t = !0);\n        }\n      }\n\n      if (!t) {\n        e.lineTo(this._walker.getPathEnd());\n        break;\n      }\n    }\n\n    return e.path();\n  }\n\n}\n\nexport { n as EffectWave };","map":{"version":3,"sources":["/Users/xiaoyuzhu/Desktop/arcgisapi-react/node_modules/@arcgis/core/symbols/cim/effects/EffectWave.js"],"names":["isPolyline","t","isPolygon","e","PathHelper","i","DashPattern","s","GeometryWalker","h","n","local","instance","execute","r","constructor","_inputGeometries","_height","amplitude","_period","period","_style","waveform","Math","abs","_pattern","addValue","_walker","updateTolerance","next","_processGeom","paths","length","rings","init","push","_constructCurve","_constructSquare","_constructTriangle","calculatePathLength","round","a","o","l","_","PI","c","random","p","u","d","g","w","curPointAndAngle","startPath","pt","k","nextPointAndAngle","lineTo","sin","sa","ca","path","curPositionIsValid","getPathEnd","nextPosition","EffectWave"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isPolyline as t,isPolygon as e}from\"../../../geometry/support/jsonUtils.js\";import{PathHelper as i}from\"../CurveHelper.js\";import{DashPattern as s,GeometryWalker as h}from\"../GeometryWalker.js\";class n{static local(){return null===n.instance&&(n.instance=new n),n.instance}execute(t,e,i){return new r(t,e,i)}}n.instance=null;class r{constructor(t,e,i){this._inputGeometries=t,this._height=(void 0!==e.amplitude?e.amplitude:2)*i,this._period=(void 0!==e.period?e.period:3)*i,this._style=e.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new s,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new h,this._walker.updateTolerance(i)}next(){let i=this._inputGeometries.next();for(;i;){if(0===this._height||0===this._period)return i;if(t(i)){const t=this._processGeom(i.paths);if(t.length)return{paths:t}}if(e(i)){const t=this._processGeom(i.rings);if(t.length)return{rings:t}}i=this._inputGeometries.next()}return null}_processGeom(t){const e=[];for(const i of t)if(this._walker.init(i,this._pattern))switch(this._style){case\"Sinus\":default:e.push(this._constructCurve(i,!1));break;case\"Square\":e.push(this._constructSquare(i));break;case\"Triangle\":e.push(this._constructTriangle(i));break;case\"Random\":e.push(this._constructCurve(i,!0))}else e.push(i);return e}_constructCurve(t,e){const s=new i,h=this._walker.calculatePathLength(t);let n=Math.round(h/this._period);0===n&&(n=1);const r=n*16+1,a=h/n,o=this._period/16,l=1/r,_=2*Math.PI*h/a,c=2*Math.PI*Math.random(),p=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),d=.75-Math.random()/2,g=.75-Math.random()/2,w={};this._walker.curPointAndAngle(w),s.startPath(w.pt);let k=0;for(;;){if(!this._walker.nextPointAndAngle(o,w)){s.lineTo(t[t.length-1]);break}{const t=k;let i;if(k+=l,e){const e=this._height/2*(1+.3*Math.sin(d*_*t+c));i=e*Math.sin(_*t+p),i+=e*Math.sin(g*_*t+u),i/=2}else i=.5*this._height*Math.sin(.5*_*t);s.lineTo([w.pt[0]-i*w.sa,w.pt[1]+i*w.ca])}}return s.path()}_constructSquare(t){const e=new i,s=this._walker.calculatePathLength(t);Math.round(s/this._period);let h=!0;for(;;){let t=!1;if(this._walker.curPositionIsValid()){const i={};this._walker.curPointAndAngle(i);const s={};if(this._walker.nextPointAndAngle(this._period,s)){const n={};this._walker.nextPointAndAngle(this._period,n)&&(h?(e.startPath(i.pt),h=!1):e.lineTo(i.pt),e.lineTo([i.pt[0]-this._height/2*i.sa,i.pt[1]+this._height/2*i.ca]),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca]),e.lineTo([n.pt[0]+this._height/2*n.sa,n.pt[1]-this._height/2*n.ca]),t=!0)}}if(!t){e.lineTo(this._walker.getPathEnd());break}}return e.path()}_constructTriangle(t){const e=new i,s=this._walker.calculatePathLength(t);Math.round(s/this._period);let h=!0;for(;;){let t=!1;if(this._walker.curPositionIsValid()){const i={};this._walker.curPointAndAngle(i);const s={};if(this._walker.nextPointAndAngle(this._period/2,s)){const n={};this._walker.nextPointAndAngle(this._period,n)&&(this._walker.nextPosition(this._period/2)&&(h?(e.startPath(i.pt),h=!1):e.lineTo(i.pt),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([n.pt[0]+this._height/2*n.sa,n.pt[1]-this._height/2*n.ca])),t=!0)}}if(!t){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}export{n as EffectWave};\n"]},"metadata":{},"sourceType":"module"}